var isc=window.isc?window.isc:{};
if(window.isc&&!window.isc.module_Core){isc.module_Core=1;isc._moduleStart=isc._Core_start=isc.timestamp?isc.timestamp():(new Date).getTime();if(isc._moduleEnd&&(!isc.Log||isc.Log&&isc.Log.logIsDebugEnabled("loadTime"))){isc._pTM={message:"Core load/parse time: "+(isc._moduleStart-isc._moduleEnd)+"ms",category:"loadTime"};if(isc.Log&&isc.Log.logDebug)isc.Log.logDebug(isc._pTM.message,"loadTime");else if(isc._preLog)isc._preLog[isc._preLog.length]=isc._pTM;else isc._preLog=[isc._pTM]}isc.definingFramework=
true;isc=window.isc?window.isc:{};isc.$d=(new Date).getTime();isc.version="SC_SNAPSHOT-2011-01-05/LGPL Development Only";isc.versionNumber="SC_SNAPSHOT-2011-01-05";isc.buildDate="2011-01-05";isc.expirationDate="";isc.licenseType="LGPL";isc.licenseCompany="Isomorphic Software";isc.licenseSerialNumber="ISC_LGPL_NIGHTLY";isc.licensingPage="http://smartclient.com/product/";isc.$41r={SCServer:{present:"false",name:"SmartClient Server",serverOnly:true,isPro:true},Drawing:{present:"false",name:"Drawing Module"},
PluginBridges:{present:"true",name:"PluginBridges Module"},RichTextEditor:{present:"true",name:"RichTextEditor Module"},Calendar:{present:"true",name:"Calendar Module"},Analytics:{present:"false",name:"Analytics Module"},NetworkPerformance:{present:"false",name:"Network Performance Module"},FileLoader:{present:"false",name:"Network Performance Module"},RealtimeMessaging:{present:"false",name:"RealtimeMessaging Module"},serverCriteria:{present:"false",name:"Server Advanced Filtering",serverOnly:true,
isFeature:true},customSQL:{present:"false",name:"SQL Templating",serverOnly:true,isFeature:true},chaining:{present:"false",name:"Transaction Chaining",serverOnly:true,isFeature:true},batchDSGenerator:{present:"false",name:"Batch DS-Generator",serverOnly:true,isFeature:true},batchUploader:{present:"false",name:"Batch Uploader",serverOnly:true,isFeature:true},transactions:{present:"false",name:"Automatic Transaction Management",serverOnly:true,isFeature:true}};isc.canonicalizeModules=function(a){if(!a)return null;
if(isc.isA.String(a))if(a.indexOf(",")!=-1){a=a.split(",");for(var b=/^\s+/,c=/\s+$/,d=0;d<a.length;d++)a[d]=a[d].replace(b,"").replace(c,"")}else a=[a];return a};isc.hasOptionalModules=function(a){if(!a)return true;a=isc.canonicalizeModules(a);for(var b=0;b<a.length;b++)if(!isc.hasOptionalModule(a[b]))return false;return true};isc.getMissingModules=function(a){var b=[];a=isc.canonicalizeModules(a);for(var c=0;c<a.length;c++){var d=a[c];isc.hasOptionalModule(d)||b.add(isc.$41r[d])}return b};isc.hasOptionalModule=
function(a){var b=isc.$41r[a];if(!b){isc.Log&&isc.Log.logWarn("isc.hasOptionalModule - unknown module: "+a);return false}return b.present=="true"||b.present.charAt(0)=="$"};isc.getOptionalModule=function(a){return isc.$41r[a]};isc.$a=window.isc_useSimpleNames;if(isc.$a==null)isc.$a=true;if(window.OpenAjax){isc.$b=isc.versionNumber.replace(/[a-zA-Z_]+/,".0");OpenAjax.registerLibrary("SmartClient","http://smartclient.com/SmartClient",isc.$b,{namespacedMode:!isc.$a,iscVersion:isc.version,buildDate:isc.buildDate,
licenseType:isc.licenseType,licenseCompany:isc.licenseCompany,licenseSerialNumber:isc.licenseSerialNumber});OpenAjax.registerGlobals("SmartClient",["isc"])}isc.$e=window.isc_useLongDOMIDs;isc.$f="isc.";isc.addGlobal=function(a,b){if(a.indexOf(isc.$f)==0)a=a.substring(4);isc[a]=b;if(isc.$a)window[a]=b};isc.onLine=true;isc.isOffline=function(){return!isc.onLine};isc.goOffline=function(){isc.onLine=false};isc.goOnline=function(){isc.onLine=true};if(window.addEventListener){window.addEventListener("online",
isc.goOnline,false);window.addEventListener("offline",isc.goOffline,false)}isc.addGlobal("Browser",{isSupported:false});isc.Browser.isOpera=navigator.appName=="Opera"||navigator.userAgent.indexOf("Opera")!=-1;isc.Browser.isNS=navigator.appName=="Netscape"&&!isc.Browser.isOpera;isc.Browser.isIE=navigator.appName=="Microsoft Internet Explorer"&&!isc.Browser.isOpera;isc.Browser.isMSN=isc.Browser.isIE&&navigator.userAgent.indexOf("MSN")!=-1;isc.Browser.minorVersion=parseFloat(isc.Browser.isIE?navigator.appVersion.substring(navigator.appVersion.indexOf("MSIE")+
5):navigator.appVersion);isc.Browser.version=parseInt(isc.Browser.minorVersion);isc.Browser.isIE6=isc.Browser.isIE&&isc.Browser.version<=6;isc.Browser.isMoz=navigator.userAgent.indexOf("Gecko")!=-1&&navigator.userAgent.indexOf("Safari")==-1&&navigator.userAgent.indexOf("AppleWebKit")==-1;isc.Browser.isCamino=isc.Browser.isMoz&&navigator.userAgent.indexOf("Camino/")!=-1;if(isc.Browser.isCamino)isc.Browser.caminoVersion=navigator.userAgent.substring(navigator.userAgent.indexOf("Camino/")+7);isc.Browser.isFirefox=
isc.Browser.isMoz&&navigator.userAgent.indexOf("Firefox/")!=-1;if(isc.Browser.isFirefox)isc.Browser.firefoxVersion=navigator.userAgent.substring(navigator.userAgent.indexOf("Firefox/")+8);if(isc.Browser.isMoz){isc.Browser.$g=navigator.userAgent.indexOf("Gecko/")+6;isc.Browser.geckoVersion=parseInt(navigator.userAgent.substring(isc.Browser.$g,isc.Browser.$g+8));if(isc.Browser.isFirefox)if(isc.Browser.firefoxVersion.match(/^1\.0/))isc.Browser.geckoVersion=20050915;else if(isc.Browser.firefoxVersion.match(/^2\.0/))isc.Browser.geckoVersion=
20071108}isc.Browser.isStrict=document.compatMode=="CSS1Compat";if(isc.Browser.isStrict&&isc.Browser.isMoz){isc.Browser.$51p=document.doctype.publicId;isc.Browser.$51q=document.doctype.systemId;isc.Browser.isTransitional=isc.Browser.$51p.indexOf("Transitional")!=-1||isc.Browser.$51p.indexOf("Frameset")!=-1}isc.Browser.isIE8=isc.Browser.isIE&&isc.Browser.version>=8&&document.documentMode>7;isc.Browser.isIE8Strict=isc.Browser.isIE&&isc.Browser.isStrict&&isc.Browser.isIE8;isc.Browser.isAIR=navigator.userAgent.indexOf("AdobeAIR")!=
-1;isc.Browser.AIRVersion=isc.Browser.isAIR?navigator.userAgent.substring(navigator.userAgent.indexOf("AdobeAir/")+9):null;isc.Browser.isWebKit=navigator.userAgent.indexOf("WebKit")!=-1;isc.Browser.isSafari=isc.Browser.isAIR||navigator.userAgent.indexOf("Safari")!=-1||navigator.userAgent.indexOf("AppleWebKit")!=-1;isc.Browser.isChrome=isc.Browser.isSafari&&navigator.userAgent.indexOf("Chrome/")!=-1;if(isc.Browser.isSafari)if(isc.Browser.isAIR)isc.Browser.safariVersion=530;else{isc.Browser.rawSafariVersion=
navigator.userAgent.indexOf("Safari/")!=-1?navigator.userAgent.substring(navigator.userAgent.indexOf("Safari/")+7):navigator.userAgent.indexOf("AppleWebKit/")!=-1?navigator.userAgent.substring(navigator.userAgent.indexOf("AppleWebKit/")+12):"530";isc.Browser.safariVersion=function(){var a=isc.Browser.rawSafariVersion,b=a.indexOf(".");if(b==-1)return parseInt(a);for(var c=a.substring(0,b+1),d;b!=-1;){b+=1;d=a.indexOf(".",b);c+=a.substring(b,d==-1?a.length:d);b=d}return parseFloat(c)}()}isc.Browser.isWin=
navigator.platform.toLowerCase().indexOf("win")>-1;isc.Browser.isWin2k=navigator.userAgent.match(/NT 5.01?/)!=null;isc.Browser.isMac=navigator.platform.toLowerCase().indexOf("mac")>-1;isc.Browser.isUnix=!isc.Browser.isMac&&!isc.Browser.isWin;isc.Browser.isAndroid=navigator.userAgent.indexOf("Android")>-1;isc.Browser.isMobileWebkit=isc.Browser.isSafari&&navigator.userAgent.indexOf(" Mobile/")>-1||isc.Browser.isAndroid&&navigator.userAgent.indexOf(" Mobile ")>-1;isc.Browser.isMobile=isc.Browser.isMobileWebkit;
isc.Browser.isTouch=isc.Browser.isMobileWebkit;isc.Browser.isIPhone=isc.Browser.isMobileWebkit&&navigator.userAgent.indexOf("AppleWebKit");isc.Browser.isHandset=isc.Browser.isMobileWebkit&&navigator.userAgent.indexOf("iPad")==-1;isc.Browser.isIPad=isc.Browser.isIPhone&&navigator.userAgent.indexOf("iPad");isc.Browser.isTablet=isc.Browser.isIPad;isc.Browser.isBorderBox=isc.Browser.isIE&&!isc.Browser.isStrict;isc.Browser.lineFeed=isc.Browser.isWin?"\r\n":"\r";isc.Browser.$h=false;isc.Browser.isDOM=isc.Browser.isMoz||
isc.Browser.isOpera||isc.Browser.isSafari||isc.Browser.isIE&&isc.Browser.version>=5;isc.Browser.isSupported=isc.Browser.isIE&&isc.Browser.minorVersion>=5.5&&isc.Browser.isWin||isc.Browser.isMoz||isc.Browser.isOpera||isc.Browser.isSafari||isc.Browser.isAIR;isc.Browser.allowsXSXHR=isc.Browser.isFirefox&&isc.Browser.firefoxVersion>="3.5"||isc.Browser.isChrome||isc.Browser.isSafari&&isc.Browser.safariVersion>=531;isc.noOp=function(){};isc.emptyObject={};isc.$ac=[];isc.emptyString=isc.$ad="";isc.dot=".";
isc.semi=";";isc.colon=":";isc.slash="/";isc.star="*";isc.auto="auto";isc.px="px";isc.nbsp="&nbsp;";isc.xnbsp="&amp;nbsp;";isc.$ae="false";isc.$af="FALSE";isc.$ag="_";isc.$75g="$";isc.$ah="_$observed_";isc.$ai="_$SuperProto_";isc.gwtRef="__ref";isc.logWarn=function(a,b){isc.Log.logWarn(a,b)};isc.echo=function(a){return isc.Log.echo(a)};isc.echoAll=function(a){return isc.Log.echoAll(a)};isc.echoLeaf=function(a){return isc.Log.echoLeaf(a)};isc.echoFull=function(a){return isc.Log.echoFull(a)};isc.logEcho=
function(a,b){if(b)b+=": ";isc.Log.logWarn((b||isc.$ad)+isc.echo(a))};isc.logEchoAll=function(a,b){if(b)b+=": ";isc.Log.logWarn((b||isc.$ad)+isc.echoAll(a))};isc.$aq=function(a,b){var c=b||a;return b==null?new Function(c):new Function(a,c)};isc.doEval=function(a){if(isc.Browser.isMoz)return isc.$as(a);if(!isc.$at)isc.$at=[];isc.$at[isc.$at.length]=a;return null};isc.finalEval=function(){if(isc.$at){if(isc.Browser.isMoz)for(var a=0;a<isc.$at.length;a++)isc.eval(isc.$at[a]);a=isc.$at.join("");if(isc.Browser.isSafari)a=
isc.$as(a);isc.Browser.isIE?window.execScript(a,"javascript"):isc.eval(a)}isc.$at=null};isc.$au="//$0";isc.$av="//$1";isc.$aw=0;isc.$ax=true;isc.$as=function(a){isc.$ar=true;var b=isc.timeStamp?isc.timeStamp():(new Date).getTime(),c=isc.$aj,d=isc.$ay;if(isc.$ax)c=isc.$an+c;var e=a.split(isc.$az);e=a.split(isc.$au);a=e.join(c);e=a.split(isc.$av);a=e.join(d);if(isc.$ax){e=a.split("//$2");a=e.join(isc.$ap)}c=isc.timeStamp?isc.timeStamp():(new Date).getTime();isc.$aw+=c-b;return a};isc.$ay="}catch($al){isc.eval(isc.$a0(";
isc.$a0=function(a){var b="var _ = {";if(a!=""){a=a.split(",");for(var c=0;c<a.length;c++){var d=a[c];b+=d+":"+d;if(c<a.length-1)b+=","}}b+="};";b+="if(isc.Log)isc.Log.$am($al,arguments,this,_);throw $al;";return b};isc.fillList=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,s,r,t,p,q,u,w,v,z,A,B,C){if(a==null)a=[];else a.length=0;if(A===void 0&&B===void 0&&C===void 0){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=f;a[5]=g;a[6]=h;a[7]=i;a[8]=j;a[9]=k;a[10]=l;a[11]=m;a[12]=n;a[13]=o;a[14]=s;a[15]=r;a[16]=t;a[17]=p;a[18]=
q;a[19]=u;a[20]=w;a[21]=v;a[22]=z}else for(var x=1;x<arguments.length;x++)a[x-1]=arguments[x];return a};isc.$a1=[];isc.addGlobal("addProperties",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,s,r,t,p,q,u,w,v,z,A,B,C){var x=isc.$a1;if(A===void 0&&B===void 0&&C===void 0)isc.fillList(x,b,c,d,e,f,g,h,i,j,k,l,m,n,o,s,r,t,p,q,u,w,v,z,A,B,C);else{x.length=0;for(var D=1;D<arguments.length;D++)x[D-1]=arguments[D]}D=isc.addPropertyList(a,x);x.length=0;return D});isc.$a2={};isc.$a3={};isc.$a4=function(a){var b=a.Class,
c;if(isc.isA.ClassObject(a))c=isc.$a3[b]=isc.$a3[b]||[];else if(isc.isAn.InstancePrototype(a))c=isc.$a2[b]=isc.$a2[b]||[];return c};isc.addPropertyList=function(a,b){if(a==null){isc.Log&&isc.Log.logWarn("Attempt to add properties to a null object. Creating a new object for the list of properties.");a={}}var c,d=isc.isA!=null,e=isc.isAn&&isc.isAn.Instance(a)?a.getClass()._stringMethodRegistry:a._stringMethodRegistry;if(e==null)e=isc.emptyObject;for(var f=a.$a5?isc.$a4(a):null,g=0,h=b.length;g<h;g++){var i=
b[g];if(i!=null)for(var j in i){var k=i[j],l=d&&isc.isA.Function(k);if(e[j]!==void 0||l){if(c==null)c={};c[j]=k}else{if(f!=null)f[f.length]=j;var m=a[j];!l&&m!=null&&isc.isA.Function(a[j])&&isc.Log!=null&&isc.Log.logWarn("method "+j+" on "+a+" overridden with non-function: '"+k+"'");a[j]=k}}}c!=null&&isc.addMethods(a,c);return a};isc.$a6="string";isc.$a7="function";isc.$a8="constructor";isc.$bl="object";isc.addGlobal("addMethods",function(a,b){if(!a||!b)return a;var c=a.$a5?isc.$a4(a):null;if(!isc.$a9)isc.$a9=
{};for(var d in b){if(c!=null)c[c.length]=d;var e=b[d];if(isc.isAn.Instance!=null&&e!=null&&(typeof e==isc.$a6||typeof e==isc.$bl)){var f=isc.isAn.Instance(a)?a.getClass()._stringMethodRegistry:a._stringMethodRegistry;if(f&&f[d]!==void 0&&d!=isc.$a8)e=isc.Func.expressionToFunction(f[d],b[d])}f=a.$ba;f=f!=null&&f[d]!=null?isc.$ah+d:d;if(e!==a[f]){e!=null&&this.$bb(e,d,a);a[f]=e;if(e!=null)if(isc.$a9[d])a[a.$ba!=null&&a.$ba[isc.$a9[d]]!=null?isc.$ah+isc.$a9[d]:isc.$a9[d]]=e}}return a});isc._allFuncs=
[];isc._allFuncs._maxIndex=0;isc._funcClasses=Array(5E3);isc.$bb=function(a,b,c){if(typeof a==isc.$a7){if(c.Class==null)return a.$bc=b;if(isc.isA!=null&&isc.isAn.InstancePrototype!=null&&(isc.isAn.InstancePrototype(c)||isc.isA.ClassObject(c))){b=isc._allFuncs;b[b._maxIndex]=a;isc._funcClasses[b._maxIndex]=c.Class;b._maxIndex++}else{a.$bd=c==isc.isA?"isA":c.Class;if(isc[c.Class]==null)a.$bc=b;if(isc.isA!=null&&isc.isAn.Instance!=null&&isc.isAn.Instance(c)&&!isc.isAn.InstancePrototype(c)){a.$bc=b;a.$be=
true;if(c[b]!=null)a.$bf=true}}}};isc.addGlobal("getKeys",function(a){var b=[];if(a!=null)for(var c in a)b[b.length]=c;return b});isc.addGlobal("firstKey",function(a){for(var b in a)return b});isc.addGlobal("getValues",function(a){var b=[];if(a!=null)for(var c in a)b[b.length]=a[c];return b});isc.addGlobal("sortObject",function(a,b){if(!isc.isA.Object(a))return a;if(isc.isAn.Array(a)){if(b!=null)return a.sort(b);return a.sort()}var c=isc.getKeys(a);c=b==null?c.sort():c.sort(b);for(var d={},e=0;e<
c.length;e++)d[c[e]]=a[c[e]];return d});isc.addGlobal("sortObjectByProperties",function(a,b){if(!isc.isA.Object(a))return a;if(isc.isAn.Array(a)){if(b!=null)return a.sort(b);return a.sort()}var c=isc.getValues(a);c=b==null?c.sort():c.sort(b);for(var d={},e=0;e<c.length;e++){var f=c[e],g;for(g in a)if(a[g]===f)d[g]=a[g]}return d});isc.addGlobal("addDefaults",function(a,b){if(a!=null){for(var c in b)if(a[c]===void 0)a[c]=b[c];return a}});isc.addGlobal("propertyDefined",function(a,b){if(a==null)return false;
if(a[b]!==void 0)return true;return isc.getKeys(a).contains(b)});isc.addGlobal("objectsAreEqual",function(a,b){if(a===b)return true;else if(isc.isAn.Object(a)&&isc.isAn.Object(b))if(isc.isA.Date(a))return isc.isA.Date(b)&&Date.compareDates(a,b)==0;else if(isc.isAn.Array(a)){if(isc.isAn.Array(b)&&a.length==b.length){for(var c=0;c<a.length;c++)if(!isc.objectsAreEqual(a[c],b[c]))return false;return true}return false}else{if(isc.isAn.Array(b))return false;c=0;for(var d in a){if(!isc.objectsAreEqual(a[d],
b[d]))return false;c++}if(isc.getKeys(b).length!=c)return false;return true}else return false});isc.addGlobal("combineObjects",function(a,b){if(a==null||!isc.isAn.Object(a))return b;if(b==null||!isc.isAn.Object(b))return a;for(var c in b){var d=a[c],e=b[c];if(isc.isAn.Object(d)&&!isc.isAn.Array(d)&&!isc.isA.Date(d)&&isc.isAn.Object(e)&&!isc.isAn.Array(e)&&!isc.isA.Date(e))isc.combineObjects(d,e);else a[c]=e}});isc.applyMask=function(a,b){var c={};if(a==null)return c;if(b==null)return isc.addProperties(c,
a);var d=false;if(!isc.isAn.Array(a)){d=true;a=[a]}isc.isAn.Array(b)||(b=isc.getKeys(b));c=[];for(var e,f,g,h=0;h<a.length;h++){e=a[h];f=c[h]={};for(var i=0;i<b.length;i++){g=b[i];if(e[g]!==void 0)f[g]=e[g]}}return d?c[0]:c};isc.getProperties=function(a,b){if(a==null)return null;var c={};if(b==null)return c;for(var d=0;d<b.length;d++){var e=b[d];c[e]=a[e]}return c};isc.$bg={};isc.$bh=Math.floor;isc.$bi="-";for(isc.$bj=0;isc.$bj<10;isc.$bj++)isc.$bg[isc.$bj]=isc.$bj.toString();isc.$bk=function(a,b,
c,d){var e=c+d-1,f=b,g=false,h;if(b<0){h=true;b=-b;a[c]=this.$bi;c+=1;d-=1}for(;b>9;){var i=this.$bh(b/10);a[e]=this.$bg[b-i*10];b=i;if(e==c+1&&b>9){isc.Log.logWarn("fillNumber: number too large: "+f+isc.Log.getStackTrace());g=true;break}e-=1}if(g){e=c+d-1;a[e--]=!h?f:-f}else a[e--]=this.$bg[b];for(b=e;b>=c;b--)a[b]=null};isc.booleanValue=function(a,b){if(a==null)return b;if(isc.isA.String(a))return a!=isc.$ae&&a!=isc.$af;return a?true:false};isc.iscToLocaleString=function(a){if(a!=null)return a.iscToLocaleString?
a.iscToLocaleString():a.toLocaleString?a.toLocaleString():a.toString?a.toString():isc.emptyString+a;return isc.emptyString+a};isc.addGlobal("isA",{});isc.addGlobal("isAn",isc.isA);isc.addGlobal("is",isc.isA);isc.isA.Class="isA";isc.isA.isc=isc.isA;Function.$k=1;Array.$k=2;Date.$k=3;String.$k=4;Number.$k=5;Boolean.$k=6;RegExp.$k=7;Object.$k=8;Function.prototype.$k=1;isc.A=isc.isA;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.useTypeOf=isc.Browser.isMoz||
isc.Browser.isSafari;isc.A.$bl="object";isc.A.$73x="String";isc.A.$a7="function";isc.A.$bm="text/xml";isc.A.$58k={SelectItem:true,Time:true};isc.B.push(isc.A.emptyString=function(a){return isc.isA.String(a)&&a==isc.emptyString},isc.A.nonemptyString=function(a){return isc.isA.String(a)&&a!=isc.emptyString},isc.A.Object=function(a){if(a==null)return false;if(isc.Browser.isIE&&typeof a==this.$a7)return false;if(this.useTypeOf){var b=typeof a;return b=="object"||b=="array"||b=="date"||isc.Browser.isMoz&&
b=="function"&&isc.isA.RegularExpression(a)}if(a.constructor&&a.constructor.$k!=null){b=a.constructor.$k;if(b!=1)return b==8||b==7||b==3||b==2}if(a.Class!=null&&a.Class==this.$73x)return false;return typeof a==this.$bl?isc.Browser.isIE&&isc.isA.Function(a)?false:true:false},isc.A.emptyObject=function(a){if(!isc.isAn.Object(a))return false;for(var b in a)return false;return true},isc.A.emptyArray=function(a){return isc.isAn.Array(a)&&a.length==0},isc.A.String=function(a){if(a==null)return false;if(this.useTypeOf)return typeof a==
"string"||a.Class!=null&&a.Class==this.$73x;if(a.constructor&&a.constructor.$k!=null)return a.constructor.$k==4;if(a.Class!=null&&a.Class==this.$73x)return true;return typeof a=="string"},isc.A.Array=function(a){if(a==null)return false;if(this.useTypeOf&&typeof a=="array")return true;if(typeof a==this.$a7)return false;if(a.constructor&&a.constructor.$k!=null)return a.constructor.$k==2;if(isc.Browser.isSafari)return""+a.splice=="(Internal function)";return""+a.constructor==""+Array},isc.A.Function=
function(a){if(a==null)return false;if(isc.Browser.isIE&&typeof a==this.$a7)return true;var b=a.constructor;if(b&&b.$k!=null){if(b.$k!=1)return false;if(b===Function)return true}return isc.Browser.isIE?isc.emptyString+a.constructor==Function.toString():typeof a==this.$a7},isc.A.Number=function(a){if(a==null)return false;if(this.useTypeOf&&typeof a=="number")return!isNaN(a)&&a!=Number.POSITIVE_INFINITY&&a!=Number.NEGATIVE_INFINITY;if(a.constructor&&a.constructor.$k!=null){if(a.constructor.$k!=5)return false}else if(typeof a!=
"number")return false;return!isNaN(a)&&a!=Number.POSITIVE_INFINITY&&a!=Number.NEGATIVE_INFINITY},isc.A.SpecialNumber=function(a){if(a==null)return false;if(a.constructor&&a.constructor.$k!=null){if(a.constructor.$k!=5)return false}else if(typeof a!="number")return false;return isNaN(a)||a==Number.POSITIVE_INFINITY||a==Number.NEGATIVE_INFINITY},isc.A.Boolean=function(a){if(a==null)return false;if(a.constructor&&a.constructor.$k!=null)return a.constructor.$k==6;return typeof a=="boolean"},isc.A.Date=
function(a){if(a==null)return false;if(a.constructor&&a.constructor.$k!=null)return a.constructor.$k==3;return""+a.constructor==""+Date&&a.getDate&&isc.isA.Number(a.getDate())},isc.A.RegularExpression=function(a){if(a==null)return false;if(a.constructor&&a.constructor.$k!=null)return a.constructor.$k==7;return""+a.constructor==""+RegExp},isc.A.XMLNode=function(a){if(a==null)return false;if(isc.Browser.isIE)return a.specified!=null&&a.parsed!=null&&a.nodeType!=null&&a.hasChildNodes!=null;a=a.ownerDocument;
if(a==null)return false;return a.contentType==this.$bm},isc.A.AlphaChar=function(a){a=a.charCodeAt(0);return a>=65&&a<=90||a>=97&&a<=122},isc.A.NumChar=function(a){a=a.charCodeAt(0);return a>=48&&a<=57},isc.A.AlphaNumericChar=function(a){return isc.isA.AlphaChar(a)||isc.isA.NumChar(a)},isc.A.WhitespaceChar=function(a){a=a.charCodeAt(0);return a>=0&&a<=32},isc.A.color=function(a){if(!isc.isA.String(a))return false;if(!this.$bn)this.$bn=/^(#([\dA-F]{2}){3}|rgb\((\s*[\d]{1,3}\s*,\s*){2}\s*[\d]{1,3}\s*\)|[a-z]+)$/i;
return this.$bn.test(a)},isc.A.ResultSet=function(){return false},isc.A.ResultTree=function(){return false},isc.A.SelectItem=function(a){if(!a||!isc.isA.FormItem(a))return false;a=a.getClass();return a==isc.SelectItem||a==isc.NativeSelectItem},isc.A.SelectOtherItem=function(a){if(!a||!isc.isA.FormItem(a))return false;var b=a.getClass();return(b==isc.SelectItem||b==isc.NativeSelectItem)&&a.isSelectOther},isc.A.Time=function(a){return isc.isA.Date(a)});isc.B._maxIndex=isc.C+24;isc.addGlobal("ClassFactory",
{});isc.ClassFactory.Class="ClassFactory";isc.A=isc.isA;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.Instance=function(a){return a!=null&&a.$76y!=null},isc.A.ClassObject=function(a){return a!=null&&a.$bp==true},isc.A.Interface=function(a){return a!=null&&a.$a5==true},isc.A.InstancePrototype=function(a){return isc.isAn.Instance(a)&&a.$76y==a});isc.B._maxIndex=isc.C+4;isc.A=isc.ClassFactory;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=
isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$f="isc.";isc.A.$bq="Window";isc.A.$br="Selection";isc.A.$bs={};isc.A.$bt="object";isc.A.$bu=["if(object==null||object.isA==null||object.isA==isc.isA)return false;return object.isA(isc.",null,")"];isc.A.$60l={toolbar:true,parent:true,window:true};isc.A._$isc_OID_="isc_OID_";isc.A._$isc_="isc_";isc.A.$bv="_";isc.A.$bw=[];isc.A.$75m={};isc.A.reuseGlobalIDs=true;isc.A.globalIDClassPoolSize=1E3;isc.A.$63v={};isc.A.$bx=0;isc.A._$isc_="isc_";isc.A.$by=[null,
"_",null];isc.A.reuseDOMIDs=false;isc.A.DOMIDPoolSize=1E4;isc.A.$63w=[];isc.A.$bz=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];isc.A.$b0=[];isc.A.$b1="a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p";isc.B.push(isc.A.defineClass=function(a,b,c,d){return this.$b2(a,b,c,null,d)},isc.A.defineInterface=function(a,b){return this.$b2(a,b,null,true)},isc.A.defineRootClass=function(a){return this.$b3(a,null)},isc.A.$b2=function(a,
b,c,d,e){b=b||isc.ClassFactory.defaultSuperClass;if(!b){isc.Log.logWarn("isc.ClassFactory.defineClass("+a+") called with null superClass and no ClassFactory.defaultRootClass is defined.");return null}return this.$b3(a,b,c,d,e)},isc.A.$b3=function(a,b,c,d,e){var f=isc.Browser.isMoz&&(a==this.$bq||a==this.$br),g,h;e=isc.$a&&!e;g=isc[a];if(g!=null)h=true;else if(e&&!f)g=window[a];if(g!=null&&a!="IButton"){f="New Class ID: '"+a+"' collides with ID of existing "+(isc.isA&&isc.isA.Function(isc.isA.Class)&&
isc.isA.Class(g)?"Class object '":"object with value '")+g+"'.  Existing object will be replaced.";h||(f+="\nThis conflict would be avoided by disabling ISC Simple Names mode.  See documentation for further information.");window.isc.Log&&isc.Log.logWarn(f)}f=(b=this.getClass(b))?new b.$b4.$b5:{};h=this.$b6(b);f.$b5=this.$b7(f);h.Class=a;h.$bp=true;h.isFrameworkClass=isc.definingFramework==true?true:false;if(!h.isFrameworkClass){for(g=b;g&&!g.isFrameworkClass;)g=g.getSuperClass();if(g)h.$75y=g.Class}if(!h.$75y)h.$75y=
h.Class;h.$a5=f.$a5=!!d;h.$b8=b;h.$b4=f;f.Class=a;f.$b9=h;f.$76y=f;f.isFrameworkClass=h.isFrameworkClass;f.$75y=h.$75y;isc[a]=h;if(e)window[a]=h;this.classList[this.classList.length]=a;isc.isA.$58k[a]&&isc.isA[a]||(isc.isA[a]=this.makeIsAFunc(a));if(c!=null){isc.isAn.Array(c)||(c=[c]);for(b=0;b<c.length;b++)this.mixInInterface(a,c[b])}return h},isc.A.makeIsAFunc=function(a){if(this.isFirefox2==null)this.isFirefox2=isc.Browser.isFirefox&&isc.Browser.geckoVersion>=20061010;if(this.isFirefox2)return function(c){if(c==
null||c.isA==null||c.isA==isc.isA)return false;return c.isA(a)};else{var b=this.$bu;b[1]=a;return new Function(this.$bt,b.join(isc.$ad))}},isc.A.$b6=function(a){if(!a)return{};var b=a.$b8,c=a.$ca;if(!(c&&(b==null||c!==b.$ca)))c=a.$ca=this.$b7(a);return new c},isc.A.getClass=function(a){if(isc.isA.String(a)){var b=isc[a];if(b&&isc.isA.ClassObject(b))return b}if(isc.isA.ClassObject(a))return a;if(isc.isAn.Instance(a))return a.$b9;return null},isc.A.newInstance=function(a,b,c,d,e,f){var g=this.getClass(a);
if(g==null&&isc.isAn.Object(a)){var h;for(g=0;g<arguments.length;g++){var i=arguments[g];if(i!=null&&i._constructor!=null)h=i._constructor}f=e;e=d;d=c;c=b;b=a;a=h;if(isc.isA.String(b.constructor)){if(a==null)a=b.constructor;isc.Log.logWarn("ClassFactory.newInstance() passed an object with illegal 'constructor' property - removing this property from the final object. To avoid seeing this message in the future, specify the object's class using '_constructor'.","ClassFactory");b.constructor=null}g=this.getClass(h)}if(g==
null){isc.Log.logWarn("newInstance("+a+"): class not found","ClassFactory");return null}return g.newInstance(b,c,d,e,f)},isc.A.$b7=function(a){var b=isc.Browser.isSafari?function(){}:new Function;b.prototype=a;return b},isc.A.addGlobalID=function(a,b,c){a.ID=b||a.ID;if(a.ID==null){a.ID=this.getNextGlobalID(a);a.$541=true}var d=this.getWindow(),e,f;if(d[a.ID]!=null){var g=isc.isA.Canvas(d[a.ID]);c||isc.Log.logWarn("ClassFactory.addGlobalID: ID:'"+a.ID+"' for object '"+a+"' collides with ID of existing object '"+
d[a.ID]+"'."+(g?" The pre-existing widget will be destroyed.":" The global reference to this object will be replaced"));g&&d[a.ID].destroy();if(!g)if(this.$60l[b])e=true;else f=true}if(!e)if(f){try{d[a.ID]=a}catch(h){e=true}if(d[a.ID]!=a)e=true}else d[a.ID]=a;if(e){b=this.getNextGlobalID(a);isc.logWarn("ClassFactory.addGlobalID: ID specified as:"+a.ID+". This is a reserved word in Javascript or a native property of the browser window object and can not be used as an ID. Setting ID to "+b+" instead.");
a.ID=b;a.$541=true;d[a.ID]=a}isc.globalsSnapshot&&isc.globalsSnapshot.add(a.ID)},isc.A.getNextGlobalID=function(a){return this.getNextGlobalIDForClass(a!=null&&isc.isA.String(a.Class)?a.Class:null)},isc.A.getNextGlobalIDForClass=function(a){if(a){var b=this.$63v[a];if(b&&b.length>0){a=b[b.length-1];b.length-=1;return a}if(this.$75m[a]==null)this.$75m[a]=0;b=this.$75m[a]++;var c=this.$bw;c[0]=this._$isc_;c[1]=a;c[2]=this.$bv;isc.$bk(c,b,3,5);return c.join(isc.emptyString)}return this._$isc_OID_+this.$cb++},
isc.A.dereferenceGlobalID=function(a){if(window[a.ID]==a){window[a.ID]=null;a.Class!=null&&a.$541&&this.releaseGlobalID(a.Class,a.ID)}},isc.A.releaseGlobalID=function(a,b){if(this.reuseGlobalIDs){var c=this.$63v[a];if(c){if(c.length<=this.globalIDClassPoolSize)c[c.length]=b}else this.$63v[a]=[b]}},isc.A.releaseDOMID=function(a){!this.reuseDOMIDs||this.$63w.length>this.DOMIDPoolSize||(this.$63w[this.$63w.length]=a)},isc.A.getDOMID=function(a,b){if(!isc.$e||!a||!b){var c=this.$63w.length;if(c>0){a=
this.$63w[c-1];this.$63w.length=c-1;return a}return this.$cc(this.$bx++,this._$isc_)}this.$by[0]=a;this.$by[2]=b;return this.$by.join(isc.emptyString)},isc.A.$cc=function(a,b){var c=this.$bz,d=this.$b0;d.length=0;if(b)d[0]=b;var e=3;if(a>46655)for(;Math.pow(36,e)<=a;)e+=1;for(;a>=36;){d[e-(b?0:1)]=c[a%36];e-=1;a=Math.floor(a/36)}d[e-(b?0:1)]=c[a];return d.join(isc.emptyString)},isc.A.mixInInterface=function(a,b){var c=this.getClass(b),d=this.getClass(a);if(!c||!d)return null;if(c.$a5)for(d.$cd=d.$cd?
d.$cd.duplicate():[];c;){this.$ce(c,d,true);this.$ce(c,d);d.$cd[d.$cd.length]=b;if((c=c.getSuperClass())&&!c.$a5)break}else isc.Log.logWarn("ClassFactory.mixInInterface asked to mixin a class which was not declared as an Interface: "+b+" onto "+a)},isc.A.$ce=function(a,b,c){var d;if(c)d=isc.$a3[a.Class];else{d=isc.$a2[a.Class];a=a.getPrototype();b=b.getPrototype()}if(d!=null)for(var e=0;e<d.length;e++){var f=d[e];if(b[f]==null){var g=a[f];b[f]=isc.isA.String(g)&&g==this.TARGET_IMPLEMENTS?new Function('this.logError("'+
((c?"Class":"Instance")+" method "+f+" of Interface "+a.Class+" must be implemented by class "+b.Class)+'")'):g}}},isc.A.makePassthroughMethods=function(a,b){b||(b="parentElement");var c=this.$cf;if(c==null)c=this.$cf=["return this.",,".",,"("+this.$b1+")"];for(var d={},e=0;e<a.length;e++){var f=a[e];c[1]=b;c[3]=f;d[f]=new Function(this.$b1,c.join(isc.emptyString))}return d},isc.A.writePassthroughFunctions=function(a,b,c){b=this.makePassthroughMethods(c,b);a.addMethods(b)});isc.B._maxIndex=isc.C+
22;isc.A=isc.ClassFactory;isc.A.TARGET_IMPLEMENTS="TARGET_IMPLEMENTS";isc.A.$cb=0;isc.A.classList=[];isc.defineClass=function(a,b,c,d){return isc.ClassFactory.defineClass(a,b,c,d)};isc.defineInterface=function(a,b){return isc.ClassFactory.defineInterface(a,b)};isc.defer=function(a){var b=isc.ClassFactory.getClass(isc.ClassFactory.classList.last()),c=b.$cg;isc.Log.logWarn("deferred code being placed on class: "+b);if(c)c.add(a);else b.$cg=[a]};if(!isc.Browser.isSafari){isc.$ch=window;isc.$ci=window.document}if(window.isc_enableCrossWindowCallbacks&&
isc.Browser.isIE){isc.enableCrossWindowCallbacks=true;Object.$ch=window}isc.ClassFactory.defineRootClass("Class");isc.ClassFactory.defaultSuperClass=isc.Class;isc.A=isc.Class;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.addClassMethods=function(){for(var a=0;a<arguments.length;a++)isc.addMethods(this,arguments[a])});isc.B._maxIndex=isc.C+1;isc.A=isc.Class;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;
isc.A.$cj={};isc.A.dontDup={StringBuffer:true,Action:true,MathFunction:true,JSONEncoder:true};isc.A.$ck={};isc.A.fireOnPauseDelay=200;isc.A.$cl="$cm";isc.A.$cn={};isc.A.$co={};isc.A.useFastEvalWithVars=isc.Browser.isMoz&&isc.Browser.geckoVersion>=20061010;isc.A.$cp="ID";isc.A.getWindow=isc.Browser.isSafari?function(){return window}:function(){return this.ns.$ch};isc.A.getDocument=isc.Browser.isSafari?function(){return window.document}:function(){return this.ns.$ci};isc.B.push(isc.A.create=function(a,
b,c,d,e,f,g,h,i,j,k,l,m){var n=this.createRaw();return n=n.completeCreation(a,b,c,d,e,f,g,h,i,j,k,l,m)},isc.A.createRaw=function(){this.initialized()||this.init();var a=new this.$b4.$b5;a.ns=this.ns;return a},isc.A.init=function(){var a=this.getSuperClass();a&&!a.initialized()&&a.init();if(a=this.$cg){this.$cg=null;a.map(eval)}this.autoDupMethods&&isc.Class.duplicateMethods(this,this.autoDupMethods);this.$cj[this.Class]=true},isc.A.duplicateMethods=function(a,b){if(!(a.Class&&this.dontDup[a.Class]))for(var c=
0;c<b.length;c++)this.duplicateMethod(b[c],a)},isc.A.duplicateMethod=function(a,b){b||(b=this);var c=b[a];if(c!=null){if(c.$761)for(;c.$761;)c=c.$761;var d;d=c.toSource==null?eval("dup = "+c.toString()):eval(c.toSource());c.$dx||isc.Func.getName(c,true);d.$dx=c.$dx+"[d]";d.$761=c;return b[a]=d}},isc.A.initialized=function(){return this.$cj[this.Class]},isc.A.getClassName=function(){return this.Class},isc.A.getSuperClass=function(){return this.$b8},isc.A.getPrototype=function(){return this.$b4},isc.A.addMethods=
function(){this.$a5&&this.logWarn("Use addInterfaceMethods() to add methods to interface "+this);for(var a=0;a<arguments.length;a++)isc.addMethods(this.$b4,arguments[a]);return this.$b4},isc.A.addInterfaceMethods=function(){for(var a=0;a<arguments.length;a++)isc.addMethods(this.$b4,arguments[a])},isc.A.addInterfaceProperties=function(){isc.addPropertyList(this.$b4,arguments)},isc.A.registerStringMethods=function(a,b){var c=this._stringMethodRegistry;if(!this.isOverridden("_stringMethodRegistry")){for(var d=
{},e=d.$cq=c.$cq?c.$cq.duplicate():[],f=0;f<e.length;f++)d[e[f]]=c[e[f]];this._stringMethodRegistry=c=d}if(isc.isA.String(a)){if(b==null)b=null;c[a]=b;c.$cq.add(a)}else{d=a;if(!isc.isAn.Object(d)){this.logWarn("registerStringMethods() called with a bad argument: "+a);return false}for(a in d){c[a]=d[a];c.$cq.add(a)}}return true},isc.A.registerDupProperties=function(a,b){if(this.$769==null||this.$769.$bd!=this.getClassName()){if(this.$769!=null){var c=this.$769;this.$769=this.$769.duplicate();if(c.$77a!=
null)this.$769.$77a=isc.shallowClone(c.$77a)}else this.$769=[];this.$769.$bd=this.getClassName()}this.$769.contains(a)||this.$769.add(a);if(b!=null){c=this.$769.$77a||{};c[a]=b;this.$769.$77a=c}},isc.A.isDupProperty=function(a){return this.$769!=null&&this.$769.contains(a)},isc.A.cloneDupPropertyValue=function(a,b){if(isc.isA.Array(b)){for(var c=[],d=0;d<b.length;d++)c[d]=this.cloneDupPropertyValue(a,b[d]);return c}if(isc.Canvas&&isc.isA.Canvas(b)){this.logWarn("Default value for property '"+a+"' is set to a live Canvas (with ID '"+
b.getID()+"') at the Class or AutoChild-defaults level. SmartClient cannot clone a live widget, so each instance of this class may end up pointing to the same live component. To avoid unpredictable behavior and suppress this warning, use the AutoChild subsystem to set up re-usable default properties for sub-components.");return b}c=isc.shallowClone(b);var e=this.$769;if(e.$77a!=null&&e.$77a[a]!=null&&c!=null)for(d=0;d<e.$77a[a].length;d++){var f=e.$77a[a][d];if(c[f]!=null)c[f]=isc.shallowClone(c[f])}return c},
isc.A.evaluate=function(a,b,c){if(!isc.$611)isc.$611=0;isc.$611++;if(b)with(b)a=c?window.eval(a):eval(a);else a=c?window.eval(a):eval(a);isc.$611!=null&&isc.$611--;isc.$611==0&&delete isc.$611;return a},isc.A.addClassProperties=function(){isc.addPropertyList(this,arguments);return this},isc.A.markAsFrameworkClass=function(){this.isFrameworkClass=true;this.$b4.isFrameworkClass=true;this.$75y=this.Class;this.$b4.$75y=this.Class},isc.A.addProperties=function(){this.$a5&&this.logWarn("Use addInterfaceProperties() to add methods to interface "+
this);isc.addPropertyList(this.$b4,arguments);return this},isc.A.addPropertyList=function(a){isc.addPropertyList(this.$b4,a);return this},isc.A.changeDefaults=function(a,b){var c=this.$cr(a),d=false,e=this.getSuperClass();if(e){e=e.$cr(a);if(e!=null&&e==c){c=isc.addProperties({},c);d=true}}if(c==null){c=b||{};d=true}else isc.addProperties(c,b);if(d){d={};d[a]=c;this.addProperties(d)}},isc.A.$cr=function(a){var b=this.$ck[this.Class];return this.getInstanceProperty(a)||(b?b[a]:null)},isc.A.replaceDefaults=
function(a,b){this.changeDefaults(a,b)},isc.A.setProperties=function(){var a;if(arguments.length==1)a=arguments[0];else{a={};for(var b=0;b<arguments.length;b++)isc.addProperties(a,arguments[b])}this.$b4.setProperties(a)},isc.A.isOverridden=function(a){return this[a]!==this.$b8[a]},isc.A.isA=function(a){if(a==null)return false;if(!isc.isA.String(a)){a=a.Class;if(!isc.isA.String(a))return false}if(isc.startsWith(a,isc.ClassFactory.$f))a=a.substring(4);for(var b=this;b;){if(b.Class==a)return true;b=
b.$b8}if(this.$cd)for(b=0;b<this.$cd.length;b++)for(var c=isc.ClassFactory.getClass(this.$cd[b]);c;){if(c.Class==a)return true;c=c.$b8}return false},isc.A.$cs=function(a,b,c,d){for(var e;;){if(b==null){e=null;break}e=isc.Class.$ct(c,b);if(e==null)break;if(a!=e)break;b=d?b.$b8:b.$b9.$b8.$b4}if(e!=null)return b;return null},isc.A.Super=function(a,b,c){if(isc.$cv)arguments.$cw=this;if(this.autoDupMethods&&isc.isAn.Instance(this)){this.duplicateMethod("Super");this.duplicateMethod("invokeSuper")}if(b!=
null&&(b.length==null||isc.isA.String(b)))b=[b];if(b==null)b=isc.$ac;this.$cx=c||b;this.$cy=isc.Class.$cz(a,this);this.$c0=true;return this.invokeSuper(null,a)},isc.A.$ct=function(a,b){for(var c=b[a];c!=null&&c.$c1;)c=b[c.$c1];if(c!=null&&c.$761!=null)c=c.$761;return c},isc.A.invokeSuper=function(a,b,c,d,e,f,g,h,i,j){var k=this.$bp,l=this.$c0;this.$c0=null;var m=this.$cx;this.$cx=null;var n;if(l)n=this.$cy;else if(a!=null)n=k?a:a.$b4;var o;if(n==null){o=isc.Class.$ct(b,this);a=k?this:this.getPrototype()}else{o=
isc.Class.$ct(b,n);a=k?n.$b8:n.$b9.$b8.$b4;if(m&&m.callee!=null&&m.callee!=o){o=isc.Class.$ct(b,this);a=k?this:this.getPrototype()}}a=isc.Class.$cs(o,a,b,k);if(a==null){if(isc.Log)isc.Log.logWarn("Call to Super for method: "+b+" failed on: "+this+": couldn't find a superclass implementation of : "+(n?n.Class:this.Class)+"."+b+this.getStackTrace());return null}k=a[b];isc.Class.$c2(b,a,this);c=l?m?k.apply(this,m):k.apply(this):k.call(this,c,d,e,f,g,h,i,j);isc.Class.$c3(b,this);return c},isc.A.$cz=function(a,
b){var c=b.$c4;c=c==null?null:c[a];if(isc.isAn.Array(c))return c.last();return c},isc.A.$c3=function(a,b){var c=b.$c4,d=c[a];if(d!=null)if(d.$81d){d.length=Math.max(0,d.length-1);if(d.length==0)c[a]=null}else c[a]=null},isc.A.$c2=function(a,b,c){c=c.$c4=c.$c4||{};var d=c[a];if(d==null)c[a]=b;else if(isc.isAn.Array(d))d.add(b);else{c[a]=[d,b];c[a].$81d=true}},isc.A.map=function(a,b,c,d,e,f,g){if(a==null)return b;for(var h=[],i=0;i<b.length;i++)h.add(this[a](b[i],c,d,e,f,g));return h},isc.A.getInstanceProperty=
function(a){return this.$b4[a]},isc.A.setInstanceProperty=function(a,b){this.$b4[a]=b},isc.A.getArgString=function(a){var b=this._stringMethodRegistry[a];if(b!==void 0)return b||isc.emptyString;a=this.getInstanceProperty(a);if(a==null)return"";return isc.Func.getArgString(a)},isc.A.fireCallback=function(a,b,c,d,e){arguments.$cw=this;if(a!=null){if(b==null)b=void 0;var f=a;if(isc.isA.String(a))f=d!=null&&isc.isA.Function(d[a])?d[a]:this.$c5(a,b);else if(isc.isAn.Object(a)&&!isc.isA.Function(a)){if(a.caller!=
null)d=a.caller;else if(a.target!=null)d=a.target;if(a.args)c=a.args;if(a.argNames)b=a.argNames;if(a.method)f=a.method;else if(a.methodName&&d!=null)f=d[a.methodName];else if(a.action)f=this.$c5(a.action,b)}if(isc.isA.Function(f)){if(d==null)d=window;else if(d.destroyed){this.logIsInfoEnabled("callbacks")&&this.logInfo("aborting attempt to fire callback on destroyed target:"+d+". Callback:"+isc.Log.echo(a)+",\n stack:"+this.getStackTrace());return}f.$c6=true;if(c==null)c=[];if(isc.enableCrossWindowCallbacks&&
isc.Browser.isIE){var g=d.constructor?d.constructor.$ch:d;if(g&&g!=window&&g.isc){g=g.Array.newInstance();for(var h=0;h<c.length;h++)g[h]=c[h];c=g}}var i;if(!e||isc.Log.supportsOnError)i=f.apply(d,c);else try{i=f.apply(d,c)}catch(j){isc.Log.$am(j);throw j;}return i}else this.logWarn("fireCallback() unable to convert callback: "+this.echo(a)+" to a function.  target: "+d+", argNames: "+b+", args: "+c)}},isc.A.delayCall=function(a,b,c,d){if(d==null)d=this;if(c==null)c=0;return isc.Timer.setTimeout({target:d,
methodName:a,args:b},c)},isc.A.$c5=function(a,b){if(b==null)b=void 0;var c=isc.$aq(b,a);c.$c7=true;return c},isc.A.fireOnPause=function(a,b,c,d,e){if(a){if(!c)c=this.fireOnPauseDelay;if(e==null)e=this.getClassName();this.$cn[a]||(this.$cn[a]={});this.$cn[a][e]={fireTime:c,callback:b,target:d};a=isc.timeStamp();b=this.$c8?a-this.$c8:null;this.$c8=a;if(!(b&&this.$c9!=null&&c>=this.$c9-b)){this.$da&&isc.Timer.clearTimeout(this.$da);this.$da=this.delayCall(this.$cl,null,c);this.$c9=c}}},isc.A.$cm=function(){var a,
b=isc.timeStamp()-this.$c8,c;for(c in this.$cn){var d=this.$cn[c],e;for(e in d){var f=d[e];if(f.fireTime<=b){this.fireCallback(f.callback,null,null,f.target);delete this.$cn[c][e]}else{f.fireTime-=b;a=a==null?f.fireTime:Math.min(a,f.fireTime)}}isc.isAn.emptyObject(this.$cn[c])&&delete this.$cn[c]}if(a!=null){this.$c9=a;this.$c8=isc.timeStamp();this.delayCall(this.$cl,null,a)}else this.$c8=this.$c9=null},isc.A.evalWithVars=function(a,b,c){c||(c=window);if(this.useFastEvalWithVars)return this.evaluate.call(c,
a,b);for(var d="_1";b&&isc.propertyDefined(b,d);)d+="1";var e=[d];a=[a];if(b)for(var f in b){e.push(f);a.push(b[f])}return isc.$aq(e.join(","),"return eval("+d+")").apply(c,a)},isc.A.evalWithCapture=function(a,b,c){var d=isc.globalsSnapshot=[];this.evalWithVars(a,b,c);isc.globalsSnapshot=null;return d},isc.A.destroyGlobals=function(a){isc.isAn.Array(a)||(a=[a]);for(var b=0;b<a.length;b++){var c=a[b];if(window[c]&&isc.isA.Function(window[c].destroy))window[c].destroy();else window[c]=null}},isc.A.globalEvalWithCapture=
function(a,b,c,d){if(d==null)d=true;this.$db=c;this.$dc=b;if(isc.Browser.isSafari){a="isc.Class.$dd();\n"+a+"\nisc.Class.$de();";window.setTimeout(a,0)}else{this.$dd(c);var e;try{isc.Browser.isIE?window.execScript(a,"javascript"):isc.Class.evaluate(a,null,true)}catch(f){d&&isc.Log.$am(f);e=f}this.$de(e)}},isc.A.$dd=function(){var a=this.$db;this.$df={};if(a)for(var b in a){var c=window[b];if(c!==void 0)this.$df[b]=c;window[b]=a[b]}isc.globalsSnapshot=[]},isc.A.$de=function(a){var b=this.$db;if(b)for(var c in b)window[c]=
this.$df[c]!==void 0?this.$df[c]:void 0;b=this.$dc;c=isc.globalsSnapshot;isc.globalsSnapshot=this.$dc=this.$db=this.$df=null;this.fireCallback(b,["globals","error"],[c,a])},isc.A.$dg=function(a,b,c){c.$dh-=1;if(!c.$dh){for(var d=false,e=0;e<c.length;e++)if(c[e].$di){d=true;c.removeItem(e);e--}else if(c[e].$dj){delete c[e].$dj;d=true}if(d)if(c.length==0){c=isc.$ah+b;a[b]=a[c];delete a[c]}else a[b]=a.$dk(b,c)}},isc.A.getArrayItem=function(a,b,c){if(b==null)return null;if(isc.isA.Number(a))return b[a];
if(isc.isAn.Object(a))return a;if(isc.isA.String(a))return b.find(c||this.$cp,a);return null},isc.A.getArrayItemIndex=function(a,b,c){if(isc.isA.Number(a))return a;a=isc.Class.getArrayItem(a,b,c);return b.indexOf(a)},isc.A.getDocumentBody=function(a){var b=(a=!a&&isc.Browser.isIE&&isc.Browser.isStrict)?this.ns.$dl:this.ns.$dm;if(b!=null)return b;var c=this.getDocument();if(a){this.ns.$dl=c.documentElement;return this.ns.$dl}if(isc.Browser.isIE)b=c.body;else if(c.body!=null)b=c.body;else{b=c.getElementsByTagNameNS(c.documentElement.namespaceURI,
"body")[0];if(b==null){b=c.documentElement.childNodes[1];if(b!=null&&b.tagName!="body")b=null}if(!b)return null}return this.ns.$dm=b},isc.A.getActiveElement=function(){try{return this.getDocument().activeElement}catch(a){this.logWarn("error accessing activeElement: "+a.message)}return null});isc.B._maxIndex=isc.C+54;isc.A=isc.Class;isc.A.newInstance=isc.Class.create;isc.Class.ns=isc;isc.A=isc.ClassFactory;isc.A.ns=isc;isc.A.getWindow=isc.Class.getWindow;isc.A.getDocument=isc.Class.getDocument;isc.A=
isc.Class.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.getWindow=isc.Browser.isSafari?function(){return window}:function(){return this.ns.$ch};isc.A.getDocument=isc.Browser.isSafari?function(){return window.document}:function(){return this.ns.$ci};isc.A.$dn="_autoMaker";isc.A.$58e="creator";isc.A.$do="show";isc.A.$dp="Constructor";isc.A.$dq="Defaults";isc.A.$dr="Properties";isc.A.map=isc.Class.map;isc.A.Super=isc.Class.Super;isc.A.invokeSuper=
isc.Class.invokeSuper;isc.B.push(isc.A.init=function(){},isc.A.destroy=function(){},isc.A.completeCreation=function(a,b,c,d,e,f,g,h,i,j,k,l,m){if(this.addPropertiesOnCreate!=false){if(isc.captureInitData){a={className:this.Class,defaults:isc.addProperties({},a,b,c,d,e,f,g,h,i,j,k,l,m)};if(!isc.capturedComponents)isc.capturedComponents=[];isc.capturedComponents.add(a);a.defaults.ID&&isc.ClassFactory.addGlobalID(a,a.defaults.ID);return a}isc.addProperties(this,a,b,c,d,e,f,g,h,i,j,k,l,m)}for(var n=this.getClass(),
o=n.$769||[],s=0;s<o.length;s++){var r=o[s];if(this[r]==n.$b4[r])this[r]=n.cloneDupPropertyValue(r,this[r])}this.init(a,b,c,d,e,f,g,h,i,j,k,l,m);this.autoDupMethods&&isc.Class.duplicateMethods(this,this.autoDupMethods);return this},isc.A.duplicateMethod=function(a){isc.Class.duplicateMethod(a,this)},isc.A.getUniqueProperties=function(a){if(a==null)a={};var b=this.getPrototype(),c;for(c in this)if(!c.startsWith("_"))if(c!="ns")if(!(c=="ID"&&this.ID.startsWith("isc_OID_"))){var d=this[c];if(!isc.isA.Function(d))if(d!=
b[c])a[c]=this[c]}return a},isc.A.clone=function(){return this.getClass().create(this.getUniqueProperties())},isc.A.serialize=function(a){return isc.Comm.serialize(this,a)},isc.A.xmlSerialize=function(a){return isc.Comm.xmlSerialize(this.getClassName(),this,a)},isc.A.getSerializeableFields=function(a,b){var c=isc.DS?isc.DS.getNearestSchema(this):null,d=this.getUniqueProperties();if(c==null){this.logDebug("No schema available for class"+this.getClassName());return d}else this.logDebug("Constraining serializeable fields for class: "+
this.getClassName()+" with schema : "+c.ID);var e=isc.applyMask(d,c.getFields());a=a||[];b=b||[];a.map(function(f){delete e[f]});for(c=0;c<b.length;c++)e[b[c]]=this[b[c]];return e},isc.A.getID=function(){return this.ID},isc.A.getClass=function(){return this.$b9},isc.A.getSuperClass=function(){return this.$b9.$b8},isc.A.getClassName=function(){return this.getClass().getClassName()},isc.A.getPrototype=function(){return this.$76y},isc.A.getGlobalReference=function(a){if(typeof a=="string")return this.evaluate(a);
return a},isc.A.addMethods=function(){for(;0<arguments.length;)return isc.addMethods(this,arguments[0])},isc.A.addProperties=function(){return isc.addPropertyList(this,arguments)},isc.A.addPropertyList=function(a){return isc.addPropertyList(this,a)},isc.A.$ds=function(a){a="set"+a.substring(0,1).toUpperCase()+a.substring(1);return isc.isA.Function(this[a])?a:null},isc.A.$dt=function(a){a="get"+a.substring(0,1).toUpperCase()+a.substring(1);return isc.isA.Function(this[a])?a:null},isc.A.setProperty=
function(a,b){var c={};c[a]=b;this.setProperties(c)},isc.A.setProperties=function(){var a,b={};if(!(arguments.length<1)){if(arguments.length==1){a=arguments[0];if(a==null)return}else{a={};for(var c=0;c<arguments.length;c++)isc.addProperties(a,arguments[c])}for(var d in a){c=a[d];var e=this.$ds(d);if(isc.isA.StringMethod(c))c=c.getValue();if(e){this[e](c);this.propertyChanged&&this.propertyChanged(d,c)}else b[d]=c}this.addProperties(b);if(this.propertyChanged)for(d in b)this.propertyChanged(d,b[d]);
this.doneSettingProperties&&this.doneSettingProperties(a)}},isc.A.getProperty=function(a){var b=this.$dt(a);if(b)return this[b]();return this[a]},isc.A.$du=function(a,b,c,d,e,f){return a!=null?a:b!=null?b:c!=null?c:d!=null?d:e!=null?e:f},isc.A.isA=function(a){return this.getClass().isA(a)},isc.A.observe=function(a,b,c){if(a==null){this.logWarn("Invalid observation: Target is not an object.  target: "+a+", methodName: "+b+", action: '"+c+"'");return false}if(!isc.Func.convertToMethod(a,b)){this.logWarn("Invalid observation: property: '"+
b+"' is not a method on "+a);return false}var d=isc.$a9[b];a[d]&&this.observe(a,d,c);d=a[b];var e;e=isc.isAn.Instance(a)&&a.getClass().getInstanceProperty(b)?a.getClass().getArgString(b):isc.Func.getArgString(d);var f=e.split(",");if(!a.$ba)a.$ba={};if(a.$ba[b]){h=a.$ba[b];f=0;for(var g=h.length;f<g;f++)if(h[f].target==this){if(h[f].$di){h[f].$di=false;h[f].action=c;return true}this.logWarn("Observer: "+this+" is already observing method '"+b+"' on object '"+a+"', ignoring");return false}}else{var h=
a.$ba[b]=[];if(f.length>0)h.argStr=e}if(c==null||isc.is.emptyString(c)){if(!this[b]||!this.convertToMethod(b)){this.logWarn("Invalid Observation - no action specified, and observer: "+this+" has no method '"+b+"', ignoring");return false}c="it."+b+"("+e+")"}e=h.$dh;h.add({target:this,action:c,$dj:e});c=isc.$ah+b;a[c]||(a[c]=d);e||(a[b]=this.$dk(b,h));return true},isc.A.$dk=function(a,b){var c=isc.StringBuffer.create();c.append(isc.$cv?"arguments.$cw=this;":"","var queue=this.$ba.",a,";\r","queue.$dh=queue.$dh?queue.$dh+1:1;\r",
"var returnVal=this.",isc.$ah,a,"(",b.argStr?b.argStr:"","),\r","observed=this,observer,it;\r");for(var d=0,e=b.length;d<e;d++){c.append("if(!queue)return;\r");c.append("observer=it=queue[",d,"].target;\r");isc.isA.String(b[d].action)&&c.append(b[d].action,";\r");if(isc.isA.Function(b[d].action))c.append("queue[",d,"].action.apply(it, ",b.argStr?"'"+b.argStr+"'":"null",");\r")}isc.Browser.isSafari?c.append("arguments.callee.$dv.Class.$dg(this,'",a,"',queue);\r"):c.append("isc.Class.$dg(this,'",a,
"',queue);\r");c.append("return returnVal;\r");c=isc.$aq(b.argStr,c);c.$dw=true;c.$dx=a+"Observation";c.$c1=isc.$ah+a;if(isc.Browser.isSafari)c.$dv=isc;return c},isc.A.ignore=function(a,b){var c=isc.$a9[b];c!==void 0&&a[c]&&this.ignore(a,c);c=isc.$ah+b;if(!a[c]||!a.$ba)return false;for(var d=a.$ba[b],e=d.$dh,f=0,g=d.length;f<g;f++)if(d[f].target==this){if(e)d[f].$di=true;else d.removeAt(f);break}if(d.length==0){a[b]=a[c];delete a[c];delete a.$ba[b]}else e||(a[b]=this.$dk(b,d));return true},isc.A.getObserversOf=
function(a){if(!this.$ba||!this.$ba[a])return null;a=this.$ba[a];for(var b=[],c=0;c<a.length;c++)b[c]=a[c]?a[c].target:null;return b},isc.A.isObserving=function(a,b){if(!a.$ba)return false;var c=a.$ba[b];if(!c)return false;for(var d=0;d<c.length;d++)if(c[d].target==this)return true;return false},isc.A.convertToMethod=function(a){return isc.Func.convertToMethod(this,a)},isc.A.evaluate=function(a,b){return isc.Class.evaluate.apply(this,[a,b])},isc.A.fireCallback=function(a,b,c,d){return this.getClass().fireCallback(a,
b,c,this,d)},isc.A.delayCall=function(a,b,c){return this.getClass().delayCall(a,b,c,this)},isc.A.fireOnPause=function(a,b,c){return this.getClass().fireOnPause(a,b,c,this,this.getID())},isc.A.evalWithVars=function(a,b){return isc.Class.evalWithVars(a,b,this)},isc.A.getDocumentBody=function(){return isc.Class.getDocumentBody()},isc.A.getActiveElement=function(){return isc.Class.getActiveElement()},isc.A.addAutoChildren=function(a,b,c){if(a!=null){isc.isAn.Array(a)||(a=[a]);for(var d=0;d<a.length;d++){var e=
a[d];if(isc.isA.Canvas(e)){b=b||this;this.$dy(e,b,c)}else this.addAutoChild(e,null,null,b,c)}}},isc.A.addAutoChild=function(a,b,c,d,e){var f=this[a];if(isc.isAn.Instance(f))return f;if(isc.isAn.Object(a)&&a.autoChildName){b=a;c=b._constructor||c;a=b.autoChildName}if(isc.isA.String(f)&&window[f]){this[a]=window[f];return this[a]}if(!(a!=null&&!this.shouldCreateChild(a))){f=a+this.$dn;if(b=a!=null&&this[f]?this[f](b):this.createAutoChild(a,b,c,true)){this[a]=b;this.$dz(a,b,d,e);return b}}},isc.A.$dz=
function(a,b,c,d){if(c==null)c=b.autoParent||this.getAutoChildParent(a);if(isc.isA.String(c)){if(c==isc.Canvas.NONE){this.isDrawn()&&b.draw();return}a=this[c]||window[c]||c;if(isc.isA.Canvas(a))c=a;else this.logWarn("no valid parent could be found for String '"+c+"'")}isc.isA.Canvas(b)&&isc.isA.Canvas(c)&&this.$dy(b,c,d)},isc.A.$dy=function(a,b,c){if(a.addAsPeer||a.snapEdge)b.addPeer(a);else if(isc.isA.Layout(b)&&!a.addAsChild&&!a.snapTo)b.addMember(a,c);else isc.isA.TileLayout(b)&&!a.addAsChild&&
!a.snapTo?b.addTile(a,c):b.addChild(a)},isc.A.shouldCreateChild=function(a){var b=this.$do+a.charAt(0).toUpperCase()+a.substring(1);if(this[b]!=null&&this[b]==false)return false;a=this.$d0(a);if(a==null)return true;return this.shouldCreateChild(a)},isc.A.getAutoChildClass=function(a,b,c,d,e){d=d||this.$d1(a);d=this[d];e=e||this.$543(a);e=this[e];return this[a+this.$dp]||(b?b._constructor:null)||(e?e._constructor:null)||(d?d._constructor:null)||c||isc.Canvas},isc.A.applyBaseDefaults=function(a,b,c){a.autoDraw=
false;a._generated=true;a.creator=this;var d=this.creatorName;if(d)a[d]=this;if(c==null||c.ID===void 0){a.ID=this.getID()+isc.$ag+b;if(window[a.ID])a.ID=a.ID+isc.$ag+isc.ClassFactory.getNextGlobalID()}},isc.A.getDynamicDefaults=function(){},isc.A.$d1=function(a){var b=isc.Class.$d2;if(!b)isc.Class.$d2=b={};if(b[a])return b[a];var c=a+this.$dq;if(this[c])b[a]=c;return c},isc.A.$543=function(a){var b=isc.Class.$544;if(!b)isc.Class.$544=b={};if(b[a])return b[a];var c=a+this.$dr;if(this[c])b[a]=c;return c},
isc.A.createAutoChild=function(a,b,c,d){var e=this.getDynamicDefaults(a);e=e!=null&&b!=null?isc.addProperties({},e,b):b||e;var f=this.$d1(a),g=this[f],h=this.$543(a);c=this.getAutoChildClass(a,e,c,f,h);var i=isc.ClassFactory.getClass(c);if(i==null){this.logWarn("Unable to create autoChild '"+a+"' of type '"+c+"' - no such class in runtime.");return null}e=this.applyDuplicateAutoChildDefaults(i,f,e);f=i.createRaw();if(c=this.autoPassthroughs)for(var j in c)if(a==c[j]&&this[j]!==void 0)f[j]=this[j];
this.applyBaseDefaults(f,a,b);isc.addProperties(f,this.autoChildDefaults,g,void 0,e);if(d)this[a]=f;f.autoConfigure&&f.autoConfigure(this,a);this.configureAutoChild&&this.configureAutoChild(f,a);isc.addProperties(f,this[h]);f.init();if(!this.$542)this.$542={};b=f.getID?f.getID():null;if(b!=null)if(isc.isAn.Array(this.$542[a]))this.$542[a].add(b);else{this.$542[a]!=null&&isc.logWarn(this+".createAutoChild(): Creating auto child named:"+a+" appears to be replacing autoChild with same name...");this.$542[a]=
[b]}return f},isc.A.applyDuplicateAutoChildDefaults=function(a,b,c){var d=a.$769;if(d&&d.length>0){b=this[b];if(b!=null||this.autoChildDefaults!=null)for(var e=0;e<d.length;e++){var f=d[e];if(b!=null&&b[f]!=null){if(c==null)c={};if(c[f]===void 0)c[f]=a.cloneDupPropertyValue(f,b[f])}else if(this.autoChildDefaults!=null&&this.autoChildDefaults[f]!=null){if(c==null)c={};if(c[f]===void 0)c[f]=a.cloneDupPropertyValue(f,this.autoChildDefaults[f])}}}return c},isc.A.$d3=function(a,b,c){this.applyBaseDefaults(b,
a,c);var d=this.$d1(a);a=this.$543(a);c=this.applyDuplicateAutoChildDefaults(b.getClass(),d,c);b.completeCreation(this.autoChildDefaults,this[d],c,this[a])},isc.A.$d0=function(a){var b=this.autoChildParentMap;if(b)return b[a]},isc.A.getAutoChildParent=function(a){if(a=this.$d0(a))return this[a];return this},isc.A.setAutoChild=function(a,b){if(this.shouldCreateChild(a))if(isc.isA.Canvas(b)){this[a]&&this[a].destroy();this[a]=b;this.$dz(a,b)}else return this.addAutoChild(a,b);else{this[a]&&this[a].destroy();
delete this[a]}});isc.B._maxIndex=isc.C+54;isc.Class.toString=function(){return"[Class "+this.Class+"]"};isc.Class.getPrototype().toString=function(){return"["+this.Class+" ID:"+this.ID+"]"};isc.A=isc.Class;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.ns=isc;isc.A._stringMethodRegistry={};isc.B.push(isc.A.NO_OP=function(){});isc.B._maxIndex=isc.C+1;isc.A=isc.ClassFactory;isc.A.observe=isc.Class.getPrototype().observe;isc.A.ignore=isc.Class.getPrototype().ignore;
isc.A.$dk=isc.Class.getPrototype().$dk;isc.A=isc.Class;isc.A.$dk=isc.Class.getPrototype().$dk;isc.eval=function(a){return isc.Class.evaluate(a)};Function.prototype.Class="Function";isc.ClassFactory.defineClass("Func");isc.A=isc.Func;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$d5=/function\s+([\w$]+)\s*\(/;isc.B.push(isc.A.getName=function(a){if(a==Function.prototype.apply)return"Function.apply";if(a==Function.prototype.call)return"Function.call";
if(a.$dx==null){if(a.$bd==null&&isc._allFuncs){var b=isc._allFuncs.indexOf(a);if(b!=-1){for(var c=isc._funcClasses[b];c==null;b--)c=isc._funcClasses[b];a.$bd=c}}b=a.$bc;var d;if(b==null&&a.$bd!=null){var e;c=isc.ClassFactory.getClass(a.$bd);if(c==null)c=isc[a.$bd]||window[a.$bd];else e=c.getPrototype();if(e!=null)for(var f in e)if(e[f]===a){b=f;break}if(b==null&&c!=null){for(f in c)if(c[f]===a){b=f;d=true;break}if(b==null&&!isc.isA.Class(c)&&c.prototype!=null)for(f in c.prototype)if(c.prototype[f]===
a){b=f;break}}}if(b!=null)a.$dx=(a.$be?a.$bf?"[o]":"[a]":isc.$ad)+(d?"[c]":isc.$ad)+(a.$bd?a.$bd+isc.dot:isc.$ad)+b;else if(a.$c6)a.$dx="callback";else{d=isc.Func.$d5.exec(a.toString());a.$dx=d?d[1]:"anonymous"}}return a.$dx},isc.A.getArgs=function(a){a=isc.Func.getArgString(a);if(a=="")return[];return a.split(",")},isc.A.getArgString=function(a){a=a.toString();return a.substring(a.indexOf("(")+1,a.indexOf(")"))},isc.A.getBody=function(a){a=a.toString();return a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))},
isc.A.getShortBody=function(a){a=a.toString();return a.substring(a.indexOf("{")+1,a.lastIndexOf("}")).replace(/[\r\n\t]*/g,"")});isc.B._maxIndex=isc.C+5;if(!Function.prototype.apply){isc.A=Function.prototype;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.apply=function(a,b){if(a==null)a=window;var c="__TEMPF_"+Function.prototype.$d6++,d;a[c]=this;b||(b=[]);if(b.length<=10)d=a[c](b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9]);else{for(var e=
"targetObject[tempFunctionName](",f=0;f<b.length;f++){e+="args["+f+"]";if(f+1<b.length)e+=","}e+=");";isc.eval("returnValue ="+e)}delete a[c];return d});isc.B._maxIndex=isc.C+1;Function.prototype.$d6=0}isc.A=isc.Func;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$d7=[["//","\n"],["//","\\n"],["/*","*/"]];isc.A.$d8=['"',"'"];isc.A.$d9=["switch","while","if","return","for","var"];isc.A.$ea=["(",")","[","]","{","}",":","?","!","+","-","/","*","=",">",
"<","|","&",",","\\"];isc.B.push(isc.A.expressionToFunction=function(a,b,c){return this.$eb(a,b,c)},isc.A.$eb=function(a,b,c){if(b==null){isc.Log.logInfo("makeFunctionExpression() called with empty expression");b=""}if(isc.isAn.Object(b)){if(isc.isA.StringMethod(b))b=b.getValue();else if(b.Action&&!b.target)b=b.Action;c=a;if(isc.isA.String(c))c=a.split(",");else if(isc.isAn.Array(c))a=c.join();isc.isAn.Array(c);c=["if (!window.",,"){var message='Component ID \"",,'", target of action "',,"\" does not exist';isc.Log.logWarn(message);if(isc.designTime)isc.say(message)}",
,".",,"(",,")"];c[1]=c[3]=c[7]=b.target;c[9]=b.name;c[5]=b.title?b.title:"[No title specified]";var d=b.mapping||[];isc.isAn.Array(d)||(d=[]);c[11]=d.join();c=c.join(isc.emptyString);var e;try{e=isc.$aq(a,c)}catch(f){this.logWarn("invalid code: "+c+" generated from action: "+this.echo(b));e=new Function}e.iscAction=b;return e}if(isc.isAn.Array(a))a=a.join();e=true;var g=0;d=this.$d7;for(var h=this.$d8,i=this.$d9,j=this.$ea,k=false,l=isc.$ad,m=isc.slash,n=isc.semi,o=l,s=l;g<b.length;){var r=b.charAt(g);
if(r==m)for(var t=0;t<d.length;t++){var p=d[t],q=p[0];p=p[1];if(b.indexOf(q,g)==g){for(g=g+q.length;g<b.length;){if(b.substring(g,g+p.length)==p){g+=p.length;break}g++}g=g;o=l;s=this.$ec(b,g)}}if(k)if(s==l)break;else if(isc.isA.WhitespaceChar(r)){g++;continue}else{e=false;break}for(t=0;t<h.length;t++){q=h[t];if(r==q){for(g=g+1;g<b.length;){if(b.charAt(g)=="\\")g+=2;if(b.charAt(g)==q){g++;break}g++}g=g;o=q.charAt(0);s=this.$ec(b,g)}}if(r=="\n"){q=false;for(t=0;t<j.length;t++)if(o==j[t]){q=true;break}if(q||
s=="+")o=l;else{e=false;break}}if(r==n)k=true;if("swirfv".indexOf(r)!=-1)for(t=0;t<i.length;t++){s=i[t];q=s.length;if(g+q<=b.length&&b.substring(g,g+q)==s&&(g+q==b.length||!isc.isA.AlphaNumericChar(b.charAt(g+q)))&&(g==0||!isc.isA.AlphaNumericChar(b.charAt(g-1)))){e=false;break}}isc.isA.WhitespaceChar(r)||(o=r);g++;s=this.$ec(b,g)}if(e)b="return "+b;if(c)b="//"+c+"\r\n"+b;return e=isc.$aq(a,b)},isc.A.$ec=function(a,b){for(var c=isc.$ad,d=b+1;d<a.length;d++)if(!isc.isA.WhitespaceChar(a.charAt(d))){c=
a.charAt(d);break}if(d>=a.length)c=isc.$ad;return c},isc.A.convertToMethod=function(a,b){if(!isc.isAn.Object(a)||!isc.isA.nonemptyString(b)){isc.Log.logWarn("convertToMethod() called with bad parameters.  Cannot convert  property '"+b+"' on object "+a+" to a function.  Returning false.");return false}if(a[b]&&isc.isA.Function(a[b]))return true;var c=isc.isAn.Instance(a)?a.getClass()._stringMethodRegistry:a._stringMethodRegistry;if(c==null)return false;c=c[b];if(c===void 0)return false;isc.Func.replaceWithMethod(a,
b,c);return true},isc.A.replaceWithMethod=function(a,b,c,d){if(a[b]==null)a[b]=isc.is.emptyString(c)?isc.Class.NO_OP:new Function(c,isc.$ad);var e=a[b];if(!isc.isA.Function(e))if(isc.isA.String(e)||isc.isA.Object(e)){c=isc.Func.expressionToFunction(c,e,d);d={};d[b]=c;isc.addMethods(a,d)}else isc.Log.logWarn("Property '"+b+"' on object "+a+" is of type "+typeof e+".  This can not be converted to a method.","Function")});isc.B._maxIndex=isc.C+5;Array.prototype.Class="Array";Array.newInstance=function(){var a=
[];isc.addPropertyList(a,arguments);return a};Array.create=Array.newInstance;Array.LOADING="loading";Array.isLoading=function(a){return a!=null&&!isc.isAn.XMLNode(a)&&a===Array.LOADING};Array.CASE_INSENSITIVE=function(a,b){return isc.isA.String(a)&&isc.isA.String(b)&&a.toLowerCase()==b.toLowerCase()?true:a==b};Array.DATE_VALUES=function(a,b){return isc.isA.Date(a)&&isc.isA.Date(b)&&Date.compareLogicalDates(a,b)==0?true:a==b};Array.DATETIME_VALUES=function(a,b){return isc.isA.Date(a)&&isc.isA.Date(b)&&
Date.compareDates(a,b)==0?true:a==b};isc.A=Array.prototype;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.newInstance=Array.newInstance;isc.A.create=Array.newInstance;isc.A.slice=Array.prototype.slice?Array.prototype.slice:function(a,b){if(b==null)b=this.length;for(var c=[],d=this.length;a<b&&a<d;a++)c[c.length]=this[a];return c};isc.A.observe=isc.Class.getPrototype().observe;isc.A.ignore=isc.Class.getPrototype().ignore;isc.A.$dk=isc.Class.getPrototype().$dk;
isc.B.push(isc.A.getPrototype=function(){return Array.prototype},isc.A.get=function(a){return this[a]},isc.A.getLength=function(){return this.length},isc.A.isEmpty=function(){return this.getLength()==0},isc.A.first=function(){return this[0]},isc.A.last=function(){return this[this.length-1]},isc.A.indexOf=function(a,b,c){if(b==null)b=0;if(c==null)c=this.length-1;for(b=b;b<=c;b++)if(this[b]==a)return b;return-1},isc.A.lastIndexOf=function(a,b,c){if(b==null)b=this.length-1;if(c==null)c=0;for(b=b;b>=
c;b--)if(this[b]==a)return b;return-1},isc.A.contains=function(a,b){return this.indexOf(a,b)!=-1},isc.A.containsAll=function(a){if(a==null)return true;for(var b=a.getLength(),c=0;c<b;c++)if(!this.contains(a.get(c)))return false;return true},isc.A.intersect=function(){for(var a=[],b=0;b<this.length;b++){var c=this.get(b),d=true;if(c!=null){for(var e=0;e<arguments.length;e++)if(!arguments[e].contains(c)){d=false;break}d&&a.add(c)}}return a},isc.A.equals=function(a){if(a==null||!isc.isA.List(a))return false;
var b=a.getLength();if(b!=this.getLength())return false;for(var c=0;c<b;c++)if(a.get(c)!=this.get(c))return false;return true},isc.A.getItems=function(a){for(var b=[],c=a.getLength(),d=0;d<c;d++)b[d]=this.get(a.get(d));return b},isc.A.getRange=function(a,b){if(b==null)b=this.length-1;return this.slice(a,b)},isc.A.duplicate=function(){return isc.$ac.concat(this)},isc.A.set=function(a,b){this[a]=b;this.dataChanged()},isc.A.addAt=function(a,b){if(b==null)b=0;for(var c=this.length-1;c>=b;c--)this[c+1]=
this[c];this[b]=a;this.dataChanged();return a},isc.A.removeAt=function(a){var b=this.length;if(a>=b||a<0)return null;for(var c=this[a];a<b-1;a++)this[a]=this[a+1];this.length--;this.dataChanged();return c},isc.A.add=function(a,b){if(b!==void 0)return this.addAt(a,b);var c;if(this.sortUnique){c=this.indexOf(a);if(c==-1)c=this.length}else c=this.length;this[c]=a;this.sortProps&&this.sortProps.length>0&&this.sortByProperties(this.sortProps,this.sortDirections,this.sortNormalizers);this.dataChanged();
return a},isc.A.addList=function(a,b,c){if(a==null)return null;this.$ed();if(b==null)b=0;if(c==null)c=a.getLength();for(b=b;b<c;b++)this.add(a.get(b));this.$ee();return a},isc.A.setLength=function(a){this.length=a},isc.A.addListAt=function(a,b){if(a==null)return null;for(var c=this.length-1,d=a.length;c>=b;c--)this[c+d]=this[c];for(c=0;c<d;c++)this[c+b]=a[c];this.dataChanged();return a},isc.A.remove=function(a){a=this.indexOf(a);if(a==-1)return false;for(a=a;a<this.length;a++)this[a]=this[a+1];this.length-=
1;this.dataChanged();return true},isc.A.removeList=function(a){if(a==null)return null;for(var b=[],c=0,d=this.length;c<d;c++)a.contains(this[c])||b.add(this[c]);this.setArray(b);return a},isc.A.removeEvery=function(a){this.removeList([a]);return this},isc.A.$ed=function(){if(this.$ef===void 0)this.$ef=0;this.$ef++},isc.A.$ee=function(){--this.$ef==0&&this.dataChanged()},isc.A.dataChanged=function(){this.onDataChanged&&this.onDataChanged()},isc.A.$52z=function(){return this.$ef!=null&&this.$ef>0},
isc.A.setArray=function(a){this.setLength(a.length);for(var b=0;b<a.length;b++)this[b]=a[b];this.dataChanged()},isc.A.addAsList=function(a){isc.isAn.Array(a)||(a=[a]);return this.addList(a)},isc.A.removeRange=function(a,b){if(a===void 0)return this;isc.isA.Number(a)||(a=0);if(!isc.isA.Number(b))b=this.length;return this.splice(a,b-a)},isc.A.removeWhere=function(a,b){for(var c=0,d=[];c<this.length;c++)if(!this[c]||this[c][a]!=b)d.add(this[c]);this.setArray(d)},isc.A.removeEmpty=function(){for(var a=
0,b=[];a<this.length;a++)this[a]!=null&&b.add(this[a]);this.setArray(b)},isc.A.getProperty=function(a){for(var b=[],c=0,d=this.length;c<d;c++)b[b.length]=this[c]?this[c][a]:null;return b},isc.A.getValueMap=function(a,b){for(var c={},d=0,e=this.getLength();d<e;d++){var f=this.get(d);if(isc.isAn.Object(f))if(f&&f[a]!=null)c[f[a]]=f[b]}return c},isc.A.map=function(a,b,c,d,e,f){for(var g=isc.isA.Function(a),h=[],i=this.getLength(),j=0;j<i;j++){var k=this.get(j);h[j]=g?a(k,b,c,d,e,f):k&&k[a]!=null?k[a](b,
c,d,e,f):null}return h},isc.A.setProperty=function(a,b){for(var c=0,d=this.length;c<d;c++)if(this[c])this[c][a]=b},isc.A.clearProperty=function(a){for(var b=false,c=0,d=this.length;c<d;c++){b=b||this[c]!==void 0;this[c]&&delete this[c][a]}return b},isc.A.getProperties=function(a){return isc.applyMask(this,a)},isc.A.getUniqueItems=function(){for(var a=[],b=0,c=this.length;b<c;b++)a.contains(this[b])||(a[a.length]=this[b]);return a},isc.A.findIndex=function(a,b,c){return this.findNextIndex(0,a,b,null,
c)},isc.A.findNextIndex=function(a,b,c,d,e){if(a==null)a=0;else if(a>=this.length)return-1;if(d==null)d=this.length-1;if(b==null)return-1;if(isc.isA.String(b)){if(e)for(a=a;a<=d;a++){if(this[a]&&e(this[a][b],c,b))return a}else for(a=a;a<=d;a++)if(this[a]&&this[a][b]==c)return a;return-1}else return this.findNextMatch(b,a,d,e)},isc.A.findNextMatch=function(a,b,c,d){var e=isc.getKeys(a);if(d)for(b=b;b<=c;b++){var f=this.get(b);if(f){for(var g=true,h=0;h<e.length;h++){var i=e[h];if(!d(f[i],a[i],i)){g=
false;break}}if(g)return b}}else for(b=b;b<=c;b++)if(f=this.get(b)){g=true;for(h=0;h<e.length;h++){i=e[h];if(f[i]!=a[i]){g=false;break}}if(g)return b}return-1},isc.A.find=function(a,b,c){a=this.findIndex(a,b,c);return a!=-1?this.get(a):null},isc.A.findByKeys=function(a,b,c,d){if(a==null){isc.Log.logWarn("findByKeys: passed null record");return-1}var e={},f=b.getPrimaryKeyFields(),g=false,h;for(h in f){g=true;if(a[h]==null){isc.Log.logWarn("findByKeys: passed record does not have a value for key field '"+
h+"'");return-1}e[h]=a[h]}if(!g){isc.Log.logWarn("findByKeys: dataSource '"+b.ID+"' does not have primary keys declared, can't find record");return-1}return this.findNextIndex(c,e,null,d)},isc.A.containsProperty=function(a,b){return this.findIndex(a,b)!=-1},isc.A.findAll=function(a,b){if(a==null)return null;if(isc.isA.String(a)){for(var c=null,d=this.length,e=isc.isAn.Array(b),f=0;f<d;f++){var g=this[f];if(g&&(e?b.contains(g[a]):g[a]==b)){if(c==null)c=[];c.add(g)}}return c}else return this.findAllMatches(a)},
isc.A.findAllMatches=function(a){for(var b=this.getLength(),c=isc.getKeys(a),d=null,e=0;e<b;e++){var f=this.get(e);if(f){for(var g=true,h=0;h<c.length;h++){var i=c[h];if(f[i]!=a[i]){g=false;break}}if(g){if(d==null)d=[];d.add(f)}}}return d},isc.A.slide=function(a,b){this.slideRange(a,a+1,b)},isc.A.slideRange=function(a,b,c){this.addListAt(this.splice(a,b-a),c)},isc.A.slideList=function(a,b){var c=[],d;if(b<0)b=0;for(d=0;d<b;d++)a.contains(this[d])||c.add(this[d]);for(d=0;d<a.length;d++)c.add(a[d]);
for(d=b;d<this.length;d++)a.contains(this[d])||c.add(this[d]);this.setArray(c)},isc.A.makeIndex=function(a,b,c){var d={},e=b==-1;b=b!=null&&b!=0;for(var f=0;f<this.length;f++){var g=this[f],h=g[a];if(h==null){if(!c)continue;h=f}if(e)d[h]=g;else{var i=d[h];if(i==null)d[h]=b?[g]:g;else if(b)d[h].add(g);else if(isc.isAn.Array(i))d[h].add(g);else d[h]=[i,g]}}return d},isc.A.arraysToObjects=function(a){for(var b=a.length,c=[],d=0,e=this.length;d<e;d++)for(var f=c[d]={},g=0;g<b;g++)f[a[g]]=this[d][g];return c},
isc.A.objectsToArrays=function(a){for(var b=a.length,c=[],d=0,e=this.length;d<e;d++)for(var f=c[d]=[],g=0;g<b;g++)f[g]=this[d][a[g]];return c},isc.A.spliceArray=function(a,b,c){if(a===void 0)return this.splice();if(b===void 0)return this.splice(a);if(c===void 0)return this.splice(a,b);if(!isc.isAn.Array(c)){isc.Log.logWarn("spliceArray() method passed a non-array third parameter. Ignoring...","Array");return this.splice(a,b)}return this.splice.apply(this,[a,b].concat(c))},isc.A.peek=function(){var a=
this.pop();this.push(a);return a},isc.A.removeItem=function(a){return this.removeAt(a)},isc.A.getItem=function(a){return this.get(a)},isc.A.setItem=function(a){return this.set(a)},isc.A.clearAll=function(){return this.removeList(this)},isc.A.size=function(){return this.getLength()},isc.A.subList=function(a,b){return this.getRange(a,b)},isc.A.addAll=function(a){return this.addList(a)},isc.A.removeAll=function(a){var b=this.getLength();this.removeList(a);return this.getLength()!=b},isc.A.clear=function(){this.setLength(0)},
isc.A.toArray=function(){return this.duplicate()});isc.B._maxIndex=isc.C+67;Number.prototype.Class="Number";isc.A=Number.prototype;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.stringify=function(a,b){a||(a=2);var c=this.toString(),d=a-c.length;if(b){var e=c.indexOf(isc.dot);if(e!=-1)d+=c.length-e}d=Number.$eg(d);if(d==null)return c;return d+c},isc.A.toCurrencyString=function(a,b,c,d){var e=Math.floor(this),f=Math.round((this-e)*100),g=
isc.StringBuffer.create();isc.isA.String(a)||(a="$");isc.isA.nonemptyString(b)||(b=".");if(c==null)c=true;d!=true&&g.append(a);g.append(e.stringify(1));if(c){g.append(b);g.append(f.stringify(2))}else if(f!=0){g.append(b);f%10==0?g.append(f/10):g.append(f.stringify(2))}d==true&&g.append(a);return g.toString()});isc.B._maxIndex=isc.C+2;isc.A=Number;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A._1zero="0";isc.A._2zero="00";isc.A._3zero="000";isc.A._4zero=
"0000";isc.B.push(isc.A.setStandardFormatter=function(a){if(isc.isA.Function(Number.prototype[a]))Number.prototype.formatter=a},isc.A.setStandardLocaleStringFormatter=function(a){if(isc.isA.Function(Number.prototype[a]))Number.prototype.localeStringFormatter=a},isc.A.$eg=function(a){if(!(a<=0)){for(var b;a>4;){if(b==null)b=this._4zero;else b+=this._4zero;a-=4}var c;switch(a){case 4:c=this._4zero;break;case 3:c=this._3zero;break;case 2:c=this._2zero;break;case 1:c=this._1zero}if(b==null)return c;return b+
c}});isc.B._maxIndex=isc.C+3;if(!Number.prototype.formatter)Number.prototype.formatter="toString";if(!Number.prototype.localeStringFormatter)Number.prototype.localeStringFormatter="toString";isc.A=Number.prototype;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.localeProperties={decimalSymbol:".",groupingSymbol:",",negativeSymbol:"-",currencySymbol:"$",negativeFormat:1,groupingFormat:1};isc.A.$eh=".";isc.B.push(isc.A.iscToLocaleString=function(){return this[this.localeStringFormatter]()},
isc.A.toFormattedString=function(a){return this[a?a:this.formatter]()},isc.A.toLocalizedString=function(a,b,c,d){var e=!a?this:Math.round(this*Math.pow(10,a))/Math.pow(10,a),f=Math.abs(e),g=Math.floor(f),h,i=[];if(a)h=Math.round((f-g)*Math.pow(10,a)).stringify(a);else if(a==0)g=Math.round(f);else if(f-g>0){h=f.toString();h=h.substring(h.indexOf(this.$eh)+1)}g=g.toString();a=g.length;f=Math.floor(a/3);if(a%3)i[0]=g.substr(0,a%3);for(var j=0;j<f;j++)i[i.length]=g.substr(a%3+j*3,3);c=i.join(c||this.localeProperties.groupingSymbol);
if(h)c=c+(b||this.localeProperties.decimalSymbol)+h;if(e<0)c=(d||this.localeProperties.negativeSymbol)+c;return c},isc.A.toUSString=function(a){return this.toLocalizedString(a)},isc.A.toUSDollarString=function(a){return this.localeProperties.currencySymbol+this.toLocalizedString(a)});isc.B._maxIndex=isc.C+5;isc.defineClass("Format");isc.A=isc.Format;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.toUSString=function(a,b){if(!isc.isA.Number(a))return a;
return a.toUSString(b)},isc.A.toUSDollarString=function(a,b){if(!isc.isA.Number(a))return a;return a.toUSDollarString(b)},isc.A.toCurrencyString=function(a,b,c,d,e){if(!isc.isA.Number(a))return a;return a.toCurrencyString(b,c,d,e)});isc.B._maxIndex=isc.C+3;isc.Math={random:function(a,b){return b==null?Math.round(Math.random()*a):Math.round(Math.random()*(b-a))+a}};isc.addGlobal("timeStamp",function(){return(new Date).getTime()});isc.addGlobal("timestamp",isc.timeStamp);Date.prototype.Class="Date";
Date.Class="Date";isc.Date=Date;isc.A=Date;isc.A.INVALID_DATE_STRING="Invalid date format";isc.A=Date;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$64g={toUSShortDate:"MDY",toUSShortDateTime:"MDY",toEuropeanShortDate:"DMY",toEuropeanShortDateTime:"DMY",toJapanShortDate:"YMD",toJapanShortDateTime:"YMD"};isc.B.push(isc.A.newInstance=function(a,b,c,d,e,f,g){return new Date(a,b,c,d,e,f,g)},isc.A.create=function(a,b,c,d,e,f,g){return new Date(a,b,c,d,
e,f,g)},isc.A.compareDates=function(a,b){var c=a!=null?a.getTime():0,d=b!=null?b.getTime():0;return c>d?-1:d>c?1:0},isc.A.compareLogicalDates=function(a,b){if(a==b)return 0;if(!isc.isA.Date(a)||!isc.isA.Date(b))return false;var c=a.getFullYear(),d=a.getMonth(),e=a.getDate(),f=b.getFullYear(),g=b.getMonth(),h=b.getDate();c=c*1E4+d*100+e;f=f*1E4+g*100+h;return c>f?-1:f>c?1:0},isc.A.setInputFormat=function(a){this.$ei=a},isc.A.getInputFormat=function(){return this.$ei},isc.A.mapDisplayFormatToInputFormat=
function(a){if(a=="toShortDate")a=Date.prototype.$el;else if(a=="toNormalDate")a=Date.prototype.formatter;if(isc.isA.Function(a)){isc.Log.logInfo("Unable to determine input format associated with display format function - returning default input format","Date");return this.getInputFormat()}var b=this.$64g[a];if(b!=null&&isc.isA.String(b))return b;if(a=="toSerializeableDate")return this.parseSchemaDate;isc.Log.logInfo("Unable to determine input format associated with display format "+a+" - returning default input format",
"Date");return this.getInputFormat()},isc.A.parseInput=function(a,b,c,d,e){if(isc.isA.Date(a))return a;if(!isc.isA.String(a)||isc.isAn.emptyString(a))return null;if(b==null)b=this.getInputFormat();if(isc.isA.Function(Date[b]))b=Date[b];if(isc.isA.Function(b))return b(a,c,d,e);a=this.$ej(a,b);if(a!=null){if((b=a[0])&&b.length<=2){b=parseInt(b,10);b+=b<c?2E3:1900;a[0]=b}c=a[3];b=a[4];var f=a[5];a[3]=c=parseInt(c||0,10);a[4]=b=parseInt(b||0,10);a[5]=f=parseInt(f||0,10);if(e){e=new Date(Date.UTC(a[0],
a[1],a[2],a[3],a[4],a[5]));if(d)(d=e.getUTCFullYear()==a[0]&&e.getUTCMonth()==a[1]&&e.getUTCDate()==a[2]&&(a[3]==null||e.getUTCHours()==a[3])&&(a[4]==null||e.getUTCMinutes()==a[4])&&(a[5]==null||e.getUTCSeconds()==a[5]))||(e=null);e!=null&&e.$68d(-isc.Time.getUTCHoursDisplayOffset(e),-isc.Time.getUTCMinutesDisplayOffset(e));return e}else{e=new Date(a[0],a[1],a[2],c,b,f);if(!d)return e;return(d=e.getFullYear()==a[0]&&e.getMonth()==a[1]&&e.getDate()==a[2]&&(a[3]==null||e.getHours()==a[3])&&(a[4]==null||
e.getMinutes()==a[4])&&(a[5]==null||e.getSeconds()==a[5]))?e:null}}else return null},isc.A.parseDateTime=function(a,b,c,d){return this.parseInput(a,b,c,d,true)},isc.A.parseSchemaDate=function(a){if(isc.isA.Date(a))return a;isc.isA.String(a)||(a=a.toString?a.toString():a+"");var b=a.match(/(\d{4})[\/-](\d{2})[\/-](\d{2})([T ](\d{2}):(\d{2}):(\d{2}))?(\.(\d+))?([+-]\d{2}:\d{2}|Z)?/);if(b==null)return null;if(b[4])if(b[9]){a=b[9];if(a.length!=3){var c=Math.pow(10,3-a.length);a=Math.round(parseInt(a,
10)*c)}a=new Date(Date.UTC(b[1],b[2]-1,b[3],b[5],b[6],b[7],a))}else a=new Date(Date.UTC(b[1],b[2]-1,b[3],b[5],b[6],b[7]));else a=new Date(b[1],b[2]-1,b[3]);if(b[10]&&b[10].toLowerCase()!="z"){var d=b[10].split(":");c=(b=d[0])&&b.startsWith("-");d=d[1];b=parseInt(b,10);d=parseInt(d,10);var e=a.getTime();if(isc.isA.Number(b))e-=36E5*b;if(isc.isA.Number(d))e-=6E4*d*(c?-1:1);a.setTime(e)}return a},isc.A.parseDate=function(a,b,c,d){return this.parseInput(a,b,c,d)},isc.A.parseDateTime=function(a,b,c,d){return this.parseInput(a,
b,c,d)},isc.A.parseServerDate=function(a,b,c){return new Date(a,b,c)},isc.A.$ej=function(a,b){var c,d,e,f,g,h;c=b?b.indexOf("M"):0;d=b?b.indexOf("D"):1;e=b?b.indexOf("Y"):2;if(isc.Browser.isSafari&&isc.Browser.safariVersion<=312){h=this.$ek(a,c,d,e);e=h[0];c=h[1];d=h[2];f=h[3];g=h[4];h=h[5]}else{h=a.match(RegExp(/^\s*(\d{4}|\d{1,2})[^\d](\d{4}|\d{1,2})[^\d](\d{4}|\d{1,2})([^\d](\d{1,2})[^\d](\d\d)[^\d]?(\d\d)?)?\s*$/));if(h==null)return null;c=h[c+1]-1;d=h[d+1];e=h[e+1];f=h[5]||0;g=h[6]||0;h=h[7]||
0}return isc.isA.Number(e-c-d-f-g-h)?[e,c,d,f,g,h]:null},isc.A.setNormalDisplayFormat=function(a){if(isc.isA.Function(Date.prototype[a])||isc.isA.Function(a))Date.prototype.formatter=a},isc.A.setShortDisplayFormat=function(a){if(isc.isA.Function(Date.prototype[a])||isc.isA.Function(a))Date.prototype.$el=a},isc.A.setDefaultDateSeparator=function(a){Date.prototype.$em=[,,,,a,,,,,a,,,,null];Date.prototype.$665=a},isc.A.getDefaultDateSeparator=function(){return Date.prototype.$665?Date.prototype.$665:
"/"},isc.A.setShortDatetimeDisplayFormat=function(a){if(isc.isA.Function(Date.prototype[a])||isc.isA.Function(a))Date.prototype.$68e=a},isc.A.setFormatter=function(a){Date.setNormalDisplayFormat(a)},isc.A.setLocaleStringFormatter=function(a){if(isc.isA.Function(Date.prototype[a])||isc.isA.Function(a))Date.prototype.localeStringFormatter=a},isc.A.getShortMonthNames=function(a){a=a||3;var b=Date.shortMonthNames;if(b==null)b=Date.$41t;if(b==null){b=Date.$41t=[];for(var c=0;c<12;c++)b[c]=(new Date(2E3,
c,2)).deriveShortMonthName();b=Date.$41t}var d=[];for(c=0;c<12;c++)d[c]=b[c].substring(0,a);return d},isc.A.getShortDayNames=function(a){a=a||3;var b=Date.shortDayNames;if(b==null)b=Date.$41s;if(b==null){Date.$41s=[];b=new Date;b.setDate(1);b.getDay()>0&&b.setDate(b.getDate()+(7-b.getDay()));for(var c=b.getDate(),d=0;d<7;d++){b.setDate(c+d);Date.$41s[d]=b.deriveShortDayName()}b=Date.$41s}c=[];for(d=0;d<7;d++)c[d]=b[d].substring(0,a);return c},isc.A.getWeekendDays=function(){var a=Date.weekendDays;
if(a==null)a=Date.$54i;if(a==null)a=Date.$54i=[0,6];return a},isc.A.getFormattedDateRangeString=function(a,b){var c=a?a.getMonth():null,d=a?a.getShortMonthName():null,e=a?a.getFullYear():null,f=a?a.getDate():null,g=b?b.getMonth():null,h=b?b.getShortMonthName():null,i=b?b.getFullYear():null,j=b?b.getDate():null,k="";if(a&&b)k=e==i?c==g?f==j?d+" "+a.getDate()+", "+e:d+" "+a.getDate()+" - "+b.getDate()+", "+e:d+" "+a.getDate()+" - "+h+" "+b.getDate()+", "+e:d+" "+a.getDate()+", "+e+" - "+h+" "+b.getDate()+
", "+i;else if(a)k=d+" "+a.getDate()+", "+e;else if(b)k=h+" "+b.getDate()+", "+i;return k});isc.B._maxIndex=isc.C+25;isc.A=Date.prototype;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$em=[,,,,"/",,,,,"/",,,,null];isc.A.$en="MDY";isc.A.$eo="DMY";isc.A.$ep="YMD";isc.A.$en="MDY";isc.A.$w0="0";isc.A.$68f=[null,null];isc.B.push(isc.A.duplicate=function(){var a=new Date;a.setTime(this.getTime());a.logicalDate=this.logicalDate;a.logicalTime=this.logicalTime;
return a},isc.A.clearTimeFields=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this},isc.A.deriveShortDayName=function(a){var b=this.toString();if(a==null||a<=0||a>3)a=3;return b.substring(0,a)},isc.A.getShortDayName=function(){return Date.getShortDayNames()[this.getDay()]},isc.A.deriveShortMonthName=function(a){var b=this.toUTCString(),c=8;if(a==null||a<0||a>3)a=3;if(b.substring(6,7)==" ")c=7;return b.substring(c,c+a)},isc.A.getShortMonthName=function(){return Date.getShortMonthNames()[this.getMonth()]},
isc.A.getShortYear=function(){return(this.getFullYear()%100).stringify(2)},isc.A.getWeek=function(){var a=new Date(this.getFullYear(),0,1);return Math.ceil(((this-a)/864E5+a.getDay())/7)},isc.A.toDateStamp=function(){return this.getUTCFullYear()+(this.getUTCMonth()+1).stringify()+this.getUTCDate().stringify()+"T"+this.getUTCHours().stringify()+this.getUTCMinutes().stringify()+this.getUTCSeconds().stringify()+"Z"},isc.A.toNormalDate=function(a,b){if(!a)a=this.formatter;if(isc.isA.Function(a))return a.apply(this,
[b]);else if(this[a])return this[a](b)},isc.A.toShortDate=function(a,b){if(!a)a=this.$el;if(isc.isA.Function(a))return a.apply(this,[b]);else if(isc.isA.Function(this[a]))return this[a](b);isc.logWarn("Date.toShortDate() specified formatter not understood:"+a);return this.toUSShortDate()},isc.A.toShortDateTime=function(a,b){if(!a)a=this.$68e;return this.toShortDate(a,b)},isc.A.setDefaultDateSeparator=function(a){this.$em=[,,,,a,,,,,a,,,,null];this.$665=a},isc.A.getDefaultDateSeperator=function(){return this.$665?
this.$665:"/"},isc.A.$68d=function(a,b,c){if(c==null)c=this.getTime();if(isc.isA.Number(a))c+=36E5*a;if(isc.isA.Number(b))c+=6E4*b;this.setTime(c)},isc.A.$68g=function(a,b){var c=Date.$68h;if(c==null)c=Date.$68h=new Date;c.$68d(a,b,this.getTime());return c},isc.A.$es=function(a,b){var c=this.$em,d,e;if(b){var f=this.$68g(isc.Time.getUTCHoursDisplayOffset(this),isc.Time.getUTCMinutesDisplayOffset(this));d=f.getUTCMonth()+1;e=f.getUTCDate();f.getUTCFullYear()}else{d=this.getMonth()+1;e=this.getDate();
this.getFullYear()}var g,h;if(a==this.$en){f=0;g=5;h=10}else if(a==this.$eo){g=0;f=5;h=10}else if(a==this.$ep){h=0;f=5;g=10}else{g=a.indexOf("D")*5;h=a.indexOf("Y")*5;f=a.indexOf("M")*5}c[g]=e<10?this.$w0:null;isc.$bk(c,e,g+1,3);c[f]=d<10?this.$w0:null;isc.$bk(c,d,f+1,3);isc.$bk(c,this.getFullYear(),h,4);return c.join(isc.emptyString)},isc.A.toUSShortDate=function(a){return this.$es(this.$en,a)},isc.A.$68i=function(a){if(a)return isc.Time.toShortTime(this,"toShortPadded24HourTime");else{a=this.$68f;
a[0]=this.getHours().stringify();a[1]=this.getMinutes().stringify();return a.join(":")}},isc.A.toUSShortDateTime=function(a){return this.toUSShortDate(a)+" "+this.$68i(a)},isc.A.toEuropeanShortDate=function(a){return this.$es(this.$eo,a)},isc.A.toEuropeanShortDateTime=function(a){return this.toEuropeanShortDate(a)+" "+this.$68i(a)},isc.A.toJapanShortDate=function(a){return this.$es(this.$ep,a)},isc.A.toJapanShortDateTime=function(a){return this.toJapanShortDate(a)+" "+this.$68i(a)},isc.A.$eu=function(){return isc.Comm.$ev?
isc.SB.concat('"'+this.toDBDate(),'"'):isc.SB.concat("new Date(",this.getTime(),")")},isc.A.$ew=function(a,b,c,d){return isc.Comm.$ex(a,this.toSchemaDate(),b||(this.logicalDate?"date":this.logicalTime&&!isc.DataSource.serializeTimeAsDatetime?"time":"datetime"),c,d)},isc.A.toSchemaDate=function(a){if(a=="date"||this.logicalDate)return isc.SB.concat(this.getFullYear().stringify(4),"-",(this.getMonth()+1).stringify(2),"-",this.getDate().stringify(2));if((!isc.DataSource||!isc.DataSource.serializeTimeAsDatetime)&&
(a=="time"||this.logicalTime))return isc.SB.concat(this.getUTCHours().stringify(2),":",this.getUTCMinutes().stringify(2),":",this.getUTCSeconds().stringify(2));return isc.SB.concat(this.getUTCFullYear().stringify(4),"-",(this.getUTCMonth()+1).stringify(2),"-",this.getUTCDate().stringify(2),"T",this.getUTCHours().stringify(2),":",this.getUTCMinutes().stringify(2),":",this.getUTCSeconds().stringify(2))},isc.A.toSerializeableDate=function(a){var b=isc.SB.create();b.append(this.getFullYear().stringify(4),
"-",(this.getMonth()+1).stringify(2),"-",this.getDate().stringify(2));a||b.append(isc.Comm.xmlSchemaMode?"T":" ",this.getHours().stringify(2),":",this.getMinutes().stringify(2),":",this.getSeconds().stringify(2));return b.toString()},isc.A.toDBDate=function(){return isc.StringBuffer.concat("$$DATE$$:",this.toSerializeableDate())},isc.A.toDBDateTime=function(){return this.toDBDate()},isc.A.setFormatter=function(a){this.setNormalDisplayFormat(a)},isc.A.setLocaleStringFormatter=function(a){if(isc.isA.Function(this[a])||
isc.isA.Function(a))this.localeStringFormatter=a},isc.A.isBeforeToday=function(a){var b=(new Date(this.getFullYear(),this.getMonth(),this.getDate(),0)).getTime();return a.getTime()<b?true:false},isc.A.isToday=function(a){return this.getFullYear()==a.getFullYear()&&this.getMonth()==a.getMonth()&&this.getDate()==a.getDate()?true:false},isc.A.isTomorrow=function(a){var b=new Date(this.getFullYear(),this.getMonth(),this.getDate()+1,0),c=new Date(this.getFullYear(),this.getMonth(),this.getDate()+1,23);
a=a.getTime();return a>=b.getTime()&&a<=c.getTime()?true:false},isc.A.isThisWeek=function(a){var b=new Date(this.getFullYear(),this.getMonth(),this.getDate()-this.getDay(),0),c=new Date(this.getFullYear(),this.getMonth(),this.getDate()+(7-this.getDay()),23);a=a.getTime();return a>=b.getTime()&&a<=c.getTime()?true:false},isc.A.isNextWeek=function(a){var b=new Date(this.getFullYear(),this.getMonth(),this.getDate()-this.getDay()+7,0),c=new Date(this.getFullYear(),this.getMonth(),this.getDate()-this.getDay()+
14,23);a=a.getTime();return a>=b.getTime()&&a<=c.getTime()?true:false},isc.A.isNextMonth=function(a){var b=new Date(this.getFullYear(),this.getMonth());b.setMonth(b.getMonth()+1);return b.getFullYear()==a.getFullYear()&&b.getMonth()==a.getMonth()?true:false});isc.B._maxIndex=isc.C+38;Date.prototype.toBrowserString=Date.prototype.toString;Date.prototype.toBrowserLocaleString=Date.prototype.toLocaleString;if(!Date.prototype.formatter)Date.prototype.formatter="toLocaleString";Date.prototype.$el||Date.setShortDisplayFormat("toUSShortDate");
Date.prototype.$68e||Date.setShortDatetimeDisplayFormat("toUSShortDateTime");Date.prototype.iscToLocaleString=function(){var a=this.localeStringFormatter;if(isc.isA.Function(a))return a.apply(this);else if(this[a])return this[a]()};if(!Date.prototype.localeStringFormatter)Date.prototype.localeStringFormatter="toLocaleString";Date.setInputFormat("MDY");isc.A=Date;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.$ek=function(a,b,c,d){var e=d*
3;e=a.substring(e,e+4);var f=parseInt(e)!=e;if(f)e=e.substring(0,2);var g=0,h=0;if(b>c)g+=3;else h+=3;if(b>d)g+=f?3:5;if(c>d)h+=f?3:5;b=a.substring(g,g+2)-1;c=a.substring(h,h+2);h=f?9:11;f=a.substring(h,h+2)||0;d=a.substring(h+3,h+5)||0;a=a.substring(h+6,h+8)||0;return[e,b,c,f,d,a]});isc.B._maxIndex=isc.C+1;isc.A=Date.prototype;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.toPrettyString=function(){return this.toUSShortDateTime()});isc.B._maxIndex=
isc.C+1;isc.A=Date;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.parseStandardDate=function(a){if(!isc.isA.String(a))return null;var b=a.substring(0,4),c=a.substring(5,7)-1,d=a.substring(8,10),e=a.substring(11,13),f=a.substring(14,16),g=a.substring(17,19);if(a.length<19){if(!isc.isA.Number(b-c-d))return null}else if(!isc.isA.Number(b-c-d-e-f-g))return null;return new Date(b,c,d,e,f,g)},isc.A.parseSerializeableDate=function(a){return this.parseStandardDate(a)},
isc.A.parseDBDate=function(a){if(isc.isA.String(a)&&a.startsWith("$$DATE$$:")){a=a.substring(9);return this.parseStandardDate(a)}return null},isc.A.parseDateStamp=function(a){if(a==null||isc.isA.Date(a))return a;a=new Date(Date.UTC(a.substring(0,4),parseInt(a.substring(4,6),10)-1,a.substring(6,8),a.substring(9,11),a.substring(11,13),a.substring(13,15)));return isc.isA.Date(a)?a:null},isc.A.parseShortDate=function(a,b){return this.parseInput(a,"MDY",b)},isc.A.parseShortDateTime=function(a,b){return this.parseShortDate(a,
b)},isc.A.parsePrettyString=function(a,b){return this.parseShortDate(a,b)},isc.A.parseEuropeanShortDate=function(a,b){return this.parseInput(a,"DMY",b)},isc.A.parseEuropeanShortDateTime=function(a,b){return this.parseInput(a,"DMY",b)});isc.B._maxIndex=isc.C+9;String.prototype.Class="String";isc.$ey=function(){for(var a=[Array,Number,Date].getProperty("prototype"),b=0;b<a.length;b++){var c=a[b];if(c.toLocaleString==null)c.toLocaleString=c.toString}a=String.prototype;if(!a.toLocaleUpperCase){a.toLocaleUpperCase=
a.toUpperCase;a.toLocaleLowerCase=a.toLowerCase}if(isc.Browser.isMoz){b="x";c=b.toLocaleString();if(c!=b){a.toBrowserLocaleString=a.toLocaleString;a.toLocaleString=a.toString}b=true;c=b.toLocaleString();if(c!=b+""){Boolean.prototype.toBrowserLocaleString=Boolean.prototype.toLocaleString;Boolean.prototype.toLocaleString=Boolean.prototype.toString}}};isc.$ey();isc.A=String;isc.A.$ez=RegExp("'","g");isc.A.$e0=RegExp('"',"g");isc.A=String.prototype;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;
isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.replaceAll=function(a,b){return isc.replaceAll(this,a,b)},isc.A.contains=function(a){isc.isA.String(a)||(a=a.toString());return isc.contains(this,a)},isc.A.startsWith=function(a){isc.isA.String(a)||(a=a.toString());return isc.startsWith(this,a)},isc.A.endsWith=function(a){isc.isA.String(a)||(a=a.toString());return isc.endsWith(this,a)},isc.A.trim=function(a){a=a||" \t\n\r";for(var b=this.length,c=0,d=b-1,e=0;c<b&&a.contains(this.charAt(e++));)c++;for(e=b-
1;d>=0&&d>=c&&a.contains(this.charAt(e--));)d--;return this.substring(c,d+1)},isc.A.convertTags=function(a,b){return(a?a:"")+this.replace(/</g,"&lt;").replace(/>/g,"&gt;")+(b?b:"")},isc.A.asHTML=function(a){var b=this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/(\r\n|\r|\n) /g,"<BR>&nbsp;").replace(/(\r\n|\r|\n)/g,"<BR>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;");return a?b.replace(/ /g,"&nbsp;"):b.replace(/  /g," &nbsp;")},isc.A.unescapeHTML=function(){return this.replace(/&nbsp;/g,
" ").replace(/<BR>/gi,"\n").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")},isc.A.toInitialCaps=function(){for(var a=this.toLowerCase().split(" "),b=0;b<a.length;b++)a[b]=a[b].substring(0,1).toLocaleUpperCase()+a[b].substring(1);return a.join(" ")},isc.A.evalDynamicString=function(a,b){if(this.indexOf("${")<0)return this.toString();for(var c=this,d,e,f,g=isc.StringBuffer.create();(d=c.indexOf("${"))!=-1;){e=c.indexOf("}",d+1);if(e==-1)break;if(c.charAt(d-1)=="\\")g.append(c.slice(0,
d-1),c.slice(d,e+1));else{f=c.slice(d+2,e);var h;if(b!=null&&b[f])h=b[f];else try{h=isc.Class.evalWithVars(f,b,a)}catch(i){(a?a:isc.Log).logWarn("dynamicContents eval error - returning empty string for block --\>${"+f+"}<-- error was: "+isc.Log.echo(i));h=isc.emptyString}g.append(c.slice(0,d),h)}c=c.substring(e+1,c.length)}g.append(c);return c=g.toString()},isc.A.asSource=function(a){return String.asSource(this,a)},isc.A.cssToCamelCaps=function(){return this.replace(/-([^a-z]*)([a-z])/g,function(a,
b,c){return b+c.toUpperCase()})});isc.B._maxIndex=isc.C+12;isc.A=String;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.asSource=function(a,b){isc.isA.String(a)||(a=""+a);var c=b?String.$ez:String.$e0,d=b?"'":'"';return d+a.replace(/\\/g,"\\\\").replace(c,"\\"+d).replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+d});isc.B._maxIndex=isc.C+1;isc.addMethods(isc,{replaceAll:function(a,b,c){return a.split(b).join(c)},contains:function(a,
b){if(a==null)return false;return a.indexOf(b)>-1},startsWith:function(a,b){if(a==null)return false;return a.lastIndexOf(b,0)==0},endsWith:function(a,b){if(a==null)return false;var c=a.length-b.length;if(c<0)return false;return a.indexOf(b,c)==c},makeXMLSafe:function(a){if(a==null)return isc.emptyString;else isc.isA.String(a)||(a=a.toString());return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(String.$e0,"&quot;").replace(String.$ez,"&apos;").replace(/\r/,"&#x000D;")},
makeCDATA:function(a){return"<![CDATA["+a.replace(/\]\]>/,"]]<![CDATA[>")+"]]\>"}});isc.ClassFactory.defineClass("StringBuffer");isc.SB=isc.StringBuffer;isc.A=isc.StringBuffer;isc.A.$e1=[];isc.A.$e2=50;isc.A=isc.StringBuffer.getPrototype();isc.A.maxStreamLength=isc.Browser.isIE6?1E3:1E5;isc.A.addPropertiesOnCreate=false;isc.A=isc.StringBuffer.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function(){this.$e3=[]},isc.A.append=
function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,s,r,t,p,q,u,w,v,z,A,B,C){var x=this.$e3,D;if(a!=null&&a.constructor.$k==2){D=a.length;if(D<=30){D=x.length;for(var F=0;F<a.length;F++)x[D++]=a[F]}else x[x.length]=a.join(isc.emptyString)}else if(C===void 0&&B===void 0&&A===void 0){if(a!=null)x[x.length]=a;if(b!=null)x[x.length]=b;if(c!=null)x[x.length]=c;if(d!=null)x[x.length]=d;if(e!=null)x[x.length]=e;if(f!=null)x[x.length]=f;if(g!=null)x[x.length]=g;if(h!=null)x[x.length]=h;if(i!=null)x[x.length]=i;if(j!=
null)x[x.length]=j;if(k!=null)x[x.length]=k;if(l!=null)x[x.length]=l;if(m!=null)x[x.length]=m;if(n!=null)x[x.length]=n;if(o!=null)x[x.length]=o;if(s!=null)x[x.length]=s;if(r!=null)x[x.length]=r;if(t!=null)x[x.length]=t;if(p!=null)x[x.length]=p;if(q!=null)x[x.length]=q;if(u!=null)x[x.length]=u;if(w!=null)x[x.length]=w;if(v!=null)x[x.length]=v;if(z!=null)x[x.length]=z}else{D=arguments;F=0;for(var L=D.length;F<L;F++)x[x.length]=D[F]}if(x.length>this.maxStreamLength){x[0]=x.join(isc.emptyString);x.length=
1}return this},isc.A.appendNumber=function(a,b){var c=this.$e3;if(b==null){b=5;var d=a;if(d<0){d=0-d;b+=1}if(d>=1E5)for(d/=1E5;d>=1;){b+=1;d/=10}}isc.$bk(c,a,c.length,b)},isc.A.clear=function(){this.$e3.length=0},isc.A.release=function(){var a=isc.SB,b=a.$e1,c=this.toString();if(b.length<a.$e2){this.clear();b[b.length]=this}return c},isc.A.getArray=function(){return this.$e3});isc.B._maxIndex=isc.C+6;isc.StringBuffer.getPrototype().toString=function(){return this.$e3.join(isc.emptyString)};isc.StringBuffer.$e4=
Array.prototype.join;isc.A=isc.StringBuffer;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$bw=[];isc.B.push(isc.A.create=function(){var a=this.$e1,b=a.length;if(b>0){var c=a[b-1];a.length=b-1;return c}else return isc.Class.create.apply(this)},isc.A.concat=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,s,r,t,p,q,u,w,v,z,A,B,C,x,D,F,L,E,J,M,K,G,I,H,N,R,S,T,U,V,W,X,Y,Z,$,O,P,Q){var y;if(isc.Browser.isIE&&O===void 0&&P===void 0&&Q===void 0){y=this.$bw;y.length=
0;if(a!=null)y[y.length]=a;if(b!=null)y[y.length]=b;if(c!=null)y[y.length]=c;if(d!=null)y[y.length]=d;if(e!=null)y[y.length]=e;if(f!=null)y[y.length]=f;if(g!=null)y[y.length]=g;if(h!=null)y[y.length]=h;if(i!=null)y[y.length]=i;if(j!=null)y[y.length]=j;if(k!=null)y[y.length]=k;if(l!=null)y[y.length]=l;if(m!=null)y[y.length]=m;if(n!=null)y[y.length]=n;if(o!=null)y[y.length]=o;if(s!=null)y[y.length]=s;if(r!=null)y[y.length]=r;if(t!=null)y[y.length]=t;if(p!=null)y[y.length]=p;if(q!=null)y[y.length]=q;
if(u!=null)y[y.length]=u;if(w!=null)y[y.length]=w;if(v!=null)y[y.length]=v;if(z!=null)y[y.length]=z;if(A!=null)y[y.length]=A;if(B!=null)y[y.length]=B;if(C!=null)y[y.length]=C;if(x!=null)y[y.length]=x;if(D!=null)y[y.length]=D;if(F!=null)y[y.length]=F;if(L!=null)y[y.length]=L;if(E!=null)y[y.length]=E;if(J!=null)y[y.length]=J;if(M!=null)y[y.length]=M;if(K!=null)y[y.length]=K;if(G!=null)y[y.length]=G;if(I!=null)y[y.length]=I;if(H!=null)y[y.length]=H;if(N!=null)y[y.length]=N;if(R!=null)y[y.length]=R;if(S!=
null)y[y.length]=S;if(T!=null)y[y.length]=T;if(U!=null)y[y.length]=U;if(V!=null)y[y.length]=V;if(W!=null)y[y.length]=W;if(X!=null)y[y.length]=X;if(Y!=null)y[y.length]=Y;if(Z!=null)y[y.length]=Z;if($!=null)y[y.length]=$;if(O!=null)y[y.length]=O;if(P!=null)y[y.length]=P;if(Q!=null)y[y.length]=Q;y=y.join(isc.emptyString)}else{arguments.join=this.$e4;y=arguments.join(isc.emptyString)}return y});isc.B._maxIndex=isc.C+2;isc.defineClass("StringMethod");isc.A=isc.StringMethod.getPrototype();isc.B=isc._allFuncs;
isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.toString=function(){var a=this.getValue();if(a==null||isc.isA.String(a))return a;return a.toString()},isc.A.getValue=function(){return this.value},isc.A.getDisplayValue=function(){var a=this.getValue();if(a==null||isc.isA.String(a))return a;if(a.title!=null)return"["+a.title+"]";return a},isc.A.cdata=function(a){var b=a.indexOf("]]\>");if(b==-1)return"<![CDATA["+a+"]]\>";return this.cdata(a.slice(0,b))+"]]&gt;"+
this.cdata(a.slice(b+3))},isc.A.$ew=function(a,b,c,d,e,f){var g=this.value;return isc.isA.String(g)?isc.Comm.$ex(a,this.cdata(g),b||"stringMethod",c,d):isc.StringMethod.$41u(g,a,d,e,f)});isc.B._maxIndex=isc.C+5;isc.A=isc.StringMethod;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$41v="Action";isc.B.push(isc.A.$41u=function(a,b,c,d,e){var f=isc.DataSource.get(this.$41v);if(!f)return isc.Comm.$36t(b,a,e,d,c);return[isc.Comm.$36u(b),f.xmlSerialize(a,
null,c+"        ",this.$41v),"\n",c,isc.Comm.$36v(b)].join(isc.emptyString)});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("Cookie");isc.A=isc.Cookie;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function(){isc.Cookie.list={};if(document.cookie!="")for(var a=(""+document.cookie).split("; "),b=0,c=a.length,d;d=a[b],b<c;b++){var e=d.indexOf("="),f=e==-1?d:d.substring(0,e);isc.Cookie.list[f]=e==-1?"":unescape(d.substring(e+1))}},
isc.A.get=function(a){isc.Cookie.init();return isc.Cookie.list[a]},isc.A.set=function(a,b,c,d,e){isc.Cookie.init();document.cookie=a+"="+escape(b)+(c?";path="+c:"")+(d?";domain="+d:"")+(e?";expires="+(isc.isA.String(e)?e:e.toGMTString()):"")},isc.A.clear=function(a,b,c){isc.Cookie.init();this.set(a,"",b,c,"Thu, 01-Jan-70 00:00:01 GMT")},isc.A.getList=function(){isc.Cookie.init();return isc.getKeys(isc.Cookie.list)});isc.B._maxIndex=isc.C+5;isc.$e5={getCallTrace:function(a,b,c){if(a==null)a=arguments.caller;
if(a==null)return"[getCallTrace(): Error: couldn't get arguments object]";var d,e=a.callee;d=e==null?"[args.callee == null]":isc.Func?isc.Func.getName(e,true):"[Func utility class not loaded]";d+="(";for(var f=e!=null?isc.Func.getArgs(e):[],g=Math.max(a.length,f.length),h=0;h<g;h++){var i=f[h],j=a[h];if(h>0)d+=", ";if(i!=null)d+=i+"=>";d+=this.echoLeaf(j)}d+=")";if(b=b||a.$cw)d+=" on "+this.echoLeaf(b);if(!c&&!e.$c7)return d;f=this.$e6(e);if(!e.$c7){e=f.split(/[\r\n]+/);if(e.length>1||e[0].length>
200)return d}d+='\n        "'+f+'"';return d},$e6:function(a){return isc.Func.getBody(a).trim()},getStackTrace:function(a,b,c,d){var e="";e+=this.$76x(a,b,c);if(this.hasFireBug()&&!d){isc.Log.$50m=isc.Log.$50m||0;a="FBugTrace"+isc.Log.$50m++;e+="\r\n"+this.fireBugTrace(a)}return e},$76x:function(a,b,c){if(!arguments||!arguments.callee||!arguments.callee.caller)return" [Stack trace not supported in this browser]";if(a==null)a=arguments.caller||arguments.callee.caller.arguments;for(var d=[],e=isc.Browser.isIE&&
isc.Browser.version<=5,f=0;f<b;f++){if(a==null)break;a=e?a.caller:a.callee.caller.arguments}if(a==null)return"";var g=a.callee;f=[];var h=true;if(c==null)c=Number.MAX_VALUE;for(var i=0;g!=null&&a!=null&&i<c;){if(a.timerTrace){d.add("\nStack trace for setTimeout() call:   "+a.timerTrace);break}if(!e){if(f.contains(g)){d.add("    ** recursed on "+isc.Func.getName(g,true));break}f.add(g)}d.add("    "+this.getCallTrace(a,null,h||a.callee.caller==null));if(i==0)(g=this.$e7(a.$e8))&&d.add(g);g=a.callee;
if(e)a=a.caller;else if(g=g.caller)a=g.arguments;h=false;i++}if(d.length==0)return"";return"\r\n"+d.join("\r")+"\r"},hasFireBug:function(){return isc.Browser.isMoz&&window.console!=null&&window.console.trace!=null},fireBugVersion:function(){return this.hasFireBug()?window.console.firebug:null},fireBugTrace:function(a){window.console.trace(a);return" [Complete stack trace logged via Firebug: "+a+"]"},$e7:function(a){var b=isc.SB.create(),c;for(c in a){var d=a[c];if(d!==void 0)isc.startsWith(c,isc.$ag)||
b.append("\n        "+c+" = "+this.echoLeaf(d))}return b.toString()},$am:function(a){if(!a.$fa){a.$fa=true;var b=a.toString();if(isc.Browser.isMoz)if(a.stack){var c;try{c=this.transformMozStackTrace(a.stack)}catch(d){c=a.stack}b+="\n"+c}else b+="  [No error.stack available]";this.logWarn(b)}},transformMozStackTrace:function(a){a=a.split("\n");for(var b=isc.StringBuffer.create(),c=isc.Page.getAppDir(),d=window.location.protocol+"//"+window.location.host,e=0;e<a.length;e++){var f=a[e],g=f.indexOf("("),
h=f.lastIndexOf("@"),i=null,j=null,k=null,l=f.substring(0,g);if(l=="")l="unnamed";else if(l.startsWith("isc_")){var m;if(l.startsWith("isc_c_")){l=l.substring(6);m=true}else l=l.substring(4);j=l.substring(0,l.indexOf("_"));k=l.substring(j.length+1);j=isc.ClassFactory.getClass(j);var n;if(j)n=m?j[k]:j.getInstanceProperty(k);if(n!=null){l=isc.Func.getName(n,true);k=m?isc.Func.getArgString(n):j.getArgString(k);i=k.split(",")}else{l=l.replace(/_{1}/,".");l=l.replace(/_{2}/,"._")}}b.append("    ",l,"(");
k=f.substring(g+1,h-1);for(g=0;k&&k.length>0;){g>0&&b.append(", ");i&&b.append(i[g]+"=>");l=k.length;k=this.parseMozArgument(k,b);if(k.length==l){isc.logWarn("failure to parse next arg at:\n"+k);break}g++}b.append(")");b.append(this.getSourceLine(f.substring(h),c,d));b.append("\n")}return b.toString()},parseMozArgument:function(a,b){var c=a.charAt(0);if(c=='"'){c=a.search(/[^\\]"/);if(c==-1)c=a.length;var d=a.substring(0,c+2);if(d.length>40)d=d.substring(0,40)+'..."[ '+d.length+"]";b.append(d);return a.substring(c+
3)}else if(c=="["){c=a.substring(1).indexOf("]");d=a.substring(0,c+2);if(d=="[object Object]")d="{Obj}";b.append(d);return a.substring(c+3)}else if(a.startsWith("(void 0)")){b.append("undef");return a.substring(9)}else if(a.startsWith("undefined")){b.append("undef");return a.substring(10)}else if(a.startsWith("(function ")){c=a.substring(1,a.indexOf("{"));if(c.endsWith(" "))c=c.substring(0,c.length-1);b.append(c);c=a.indexOf("}),");if(c==-1)return"";return a.substring(c+3)}else{c=a.indexOf(",");if(c==
-1)c=a.length;b.append(a.substring(0,c));return a.substring(c+1)}},getSourceLine:function(a,b,c){var d=a.indexOf("/system/modules/ISC_"),e=a.indexOf("/system/development/ISC_");if(!this.logIsDebugEnabled("traceLineNumbersCore"))return"";if(d!=-1)a=a.substring(d+16);else if(e!=-1)a=a.substring(e+20)+"[d]";if(d!=-1||e!=-1){d=a.indexOf("?isc_version");if(d!=-1)a=a.substring(0,d)+a.substring(a.indexOf(":"))}if(a.startsWith(b))a=a.substring(b.length);else if(a.startsWith(c))a=a.substring(c.length);return" @ "+
a},echoLeaf:function(a,b){var c="";if(a===void 0)return"undef";try{if(isc.isA.Class(a))c+=a.toString();else if(isc.isAn.Array(a))c+="Array["+a.length+"]";else if(isc.isA.Date(a))c+="Date("+a.toShortDate()+")";else if(isc.isA.Function(a))c+=isc.Func.getName(a,true)+"()";else switch(typeof a){case "string":if(a.length<=40||b){c+='"'+a+'"';break}c+='"'+a.substring(0,40)+'..."['+a.length+"]";c=c.replaceAll("\n","\\n").replaceAll("\r","\\r");break;case "object":if(a==null){c+="null";break}if(a.tagName!=
null){c+="["+a.tagName+"Element]"+this.getIDText(a);break}var d=""+a;if(d!=""&&d!="[object Object]"&&d!="[object]"){c+=d;break}c+="Obj"+this.getIDText(a);break;default:c+=""+a}return c}catch(e){d="[Error in echoLeaf: "+e+"]";c+=d;this.logDebug(d,"Log");return c}},getIDText:function(a){var b=a.name||(isc.isAn.XMLNode(a)?a.getAttribute("name"):null);if(b!=null&&!isc.isAn.emptyString(b))return"{name:"+b+"}";b=a.ID!=null?a.ID:a.id!=null?a.id:isc.isAn.XMLNode(a)?a.getAttribute("id"):null;if(b!=null&&!isc.isAn.emptyString(b))return"{ID:"+
b+"}";if(a.nodeName!=null&&!isc.isAn.emptyString(a.nodeName))return"{nodeName:"+a.nodeName+"}";b=a.title||(isc.isAn.XMLNode(a)?a.getAttribute("title"):null);if(b!=null&&!isc.isAn.emptyString(b))return"{title:"+b+"}";b=a.type||(isc.isAn.XMLNode(a)?a.getAttribute("type"):null);if(b!=null&&!isc.isAn.emptyString(b))return"{type:"+b+"}";b=a.label||(isc.isAn.XMLNode(a)?a.getAttribute("label"):null);if(b!=null&&!isc.isAn.emptyString(b))return"{label:"+b+"}";if(a.length!=null)return"{length:"+a.length+"}";
return""},echo:function(a,b,c,d){if(a==null)return this.echoLeaf(a);if(b==null)b=true;if(a.tagName)return this.echoDOM(a);if(typeof a!="object"||isc.isA.Date(a))return this.echoLeaf(a,true);if(isc.isAn.Array(a)){for(var e=c?"[\n":"[",f=0;f<a.length;f++){e+=c?this.echo(a[f],b):this.echoLeaf(a[f]);if(f+1<a.length)e+=c?",\n":", "}e+="\n]";return e}e="{";if(a.getUniqueProperties!=null){e=a.getClassName()+"{";a=a.getUniqueProperties();if(d==null)d=false}if(d==null)d=true;var g;try{g=isc.getKeys(a)}catch(h){return this.echoLeaf(a)}if(isc.Browser.isSafari){f=
false;try{f=a+""=="[object CSSStyleDeclaration]"}catch(i){}if(f){e="[object CSSStyleDeclaration]{\n[standard props only]\n";g=isc.getKeys(isc.Canvas.$fi());g.add("cssText")}}for(f=0;f<g.length;f++){c=g[f];var j;try{j=a[c]}catch(k){j="[error accessing property: "+k+"]"}if(!(!d&&isc.isA.Function(j)))if(!c.startsWith("$")){var l;l=c==isc.gwtRef?"{GWT Java Obj}":this.echoLeaf(j);e+=c+": "+l;if(f+1<g.length)e+=b?",\r":", "}}e+="}";return e},echoAll:function(a,b){return this.echo(a,b,true)},echoFull:function(a){return isc.JSON.encode(a,
{prettyPrint:true,showDebugOutput:true})},echoShort:function(a){return this.echo(a,false,false)},echoArray:function(a){if(!isc.isAn.Array(a))return this.echo(a);if(a.length==0)return"[empty array]";for(var b=["["],c=0;c<a.length;c++)b.addList([c,":",a[c],"\n"]);b.add("]");return b.join("")},$fj:{outerText:false,innerText:false,parentTextEdit:false,isTextEdit:false,parentTextEdit:false,contentEditable:false,canHaveHTML:true,isMultiLine:false,filters:false,canHaveChildren:false,behaviorUrns:false,sourceIndex:false,
accelerator:false,textDecorationUnderline:false,textDecorationNone:false},echoDOM:function(a){return this.echoDelta(a,window.Node,a.tagName+this.getIDText(a))},echoEvent:function(a){return this.echoDelta(a,isc.Browser.isMoz?window.KeyEvent:window.Event)},echoDelta:function(a,b,c){if(a==null)return null;if(isc.Browser.isIE&&isc.isAn.XMLNode(a)){c="<"+a.tagName+" [XMLNode] ";b=a.attributes;for(var d=0;d<b.length;d++){var e=b[d];if(d>0)c+=" ";c+=e.name+"="+this.echoLeaf(e.value)}c+=(d>0?" [":"")+a.childNodes.length+
" child nodes]>";return c}c=(c||isc.emptyString)+"{";var f=isc.getKeys(a);for(d=0;d<f.length;d++){var g=f[d];if(this.$fj[g]==null)if(!(b!=null&&b[g]!=null))if(!(g.length>3&&g.toUpperCase()==g)){try{e=a[g];if(e==null||e=="")continue;if(isc.isA.Function(e))continue;c+=g+": "+this.echoLeaf(a[g])}catch(h){c+=g+": "+this.echoLeaf(h)}if(d+1<f.length)c+=", "}}c+="}";return c},echoElementSize:function(a){return this.echo({scrollLeft:a.scrollLeft,scrollTop:a.scrollTop,scrollWidth:a.scrollWidth,scrollHeight:a.scrollHeight,
clientWidth:void 0,clientHeight:void 0,offsetWidth:a.offsetWidth,offsetHeight:a.offsetHeight,styleLeft:a.style.left,styleTop:a.style.top,styleWidth:a.style.width,styleHeight:a.style.height,styleClip:a.style.clip})}};isc.Class.addProperties(isc.$e5);isc.Class.addClassProperties(isc.$e5);isc.$fk={logMessage:function(a,b,c,d){var e=isc.Log;if(e){if(a==null)a=e.defaultPriority;if(a<=e.stackTracePriority&&this.getStackTrace!=null)b+="\nStack trace:\n"+this.getStackTrace(arguments,2);if(!c)c=this.Class;
e.log(a,b,c,this.ID,this,d)}},logDebug:function(a,b){return this.logMessage(isc.Log.DEBUG,a,b)},logInfo:function(a,b){return this.logMessage(isc.Log.INFO,a,b)},logWarn:function(a,b){return this.logMessage(isc.Log.WARN,a,b)},logError:function(a,b){return this.logMessage(isc.Log.ERROR,a,b)},logFatal:function(a,b){return this.logMessage(isc.Log.FATAL,a,b)},logIsEnabledFor:function(a,b){return isc.Log.isEnabledFor&&isc.Log.isEnabledFor(b?b:this.Class,a,this)},logIsDebugEnabled:function(a){return this.logIsEnabledFor(isc.Log.DEBUG,
a)},logIsInfoEnabled:function(a){return this.logIsEnabledFor(isc.Log.INFO,a)},logIsWarnEnabled:function(a){return this.logIsEnabledFor(isc.Log.WARN,a)},logIsErrorEnabled:function(a){return this.logIsEnabledFor(isc.Log.ERROR,a)},setLogPriority:function(a,b){isc.Log.setPriority(a,b,this)},setDefaultLogPriority:function(a){isc.Log.setDefaultPriority(a,this)},getDefaultLogPriority:function(){return isc.Log.getDefaultPriority(this)},clearLogPriority:function(a){isc.Log.clearPriority(a,this)}};isc.Class.addMethods(isc.$fk);
isc.Class.addClassMethods(isc.$fk);isc.ClassFactory.defineClass("Log");isc.A=isc.Log;isc.A.FATAL=1;isc.A.ERROR=2;isc.A.WARN=3;isc.A.INFO=4;isc.A.DEBUG=5;isc.A.PRIORITY_NAMES=["NONE","FATAL","ERROR","WARN","INFO","DEBUG"];isc.A=isc.Log;isc.A.defaultPriority=isc.Log.WARN;isc.A.stackTracePriority=isc.Log.ERROR;isc.A.$fl={};isc.A.$fm={};isc.A.$fn=1E3;isc.A.$fo=0;isc.A.$fp=[];isc.A.$fq=":";isc.A.$fr=".";isc.A._allCategories="_allCategories";isc.A.$fs="$fs";isc.A=isc.Log;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;
isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A._1zero="0";isc.A._2zero="00";isc.A.showInlineLogs=false;isc.A.$ft="$T_";isc.A.$73n={};isc.A.$fu=["Timed ",,": ",,"ms"];isc.A.flashHiliteCount=7;isc.A.flashHilitePeriod=500;isc.B.push(isc.A.applyLogPriorities=function(a){if(!this.$fl)this.$fl={};a&&isc.addProperties(this.$fl,a)},isc.A.getLogPriorities=function(a,b){var c;if(a!=null){c=this.$fm[this.$fv(a)];if(b)return isc.addProperties({},c)}var d=isc.addProperties({},this.$fl);if(c)d=isc.addProperties(d,
c);return d},isc.A.$fv=function(a){return a==null?isc.emptyString:a.getID?a.getID():a.getClassName()},isc.A.getPriority=function(a,b){if(b!=null){var c=this.$fm[this.$fv(b)];if(c){if(c._allCategories!=null)return c._allCategories;if(c[a]!=null)return c[a];if(c.$fs!=null)return c.$fs}}c=this.$fl;return c[a]||c.$fs},isc.A.setPriority=function(a,b,c){if(c!=null){c=this.$fv(c);if(this.$fm[c]==null)this.$fm[c]={};if(!a)a=this._allCategories;this.$fm[c][a]=b}else this.$fl[a]=b},isc.A.setDefaultPriority=
function(a,b){if(!b||b==isc.Log)isc.Log.defaultPriority=a;else isc.Log.setPriority("$fs",a,b)},isc.A.getDefaultPriority=function(a){var b;if(a&&a!=isc.Log)b=this.getPriority("$fs",a);return b||isc.Log.defaultPriority},isc.A.clearPriority=function(a,b){if(b){var c=this.$fv(b);if(a)this.$fm[c]&&delete this.$fm[c][a];else delete this.$fm[c]}else delete this.$fl[a]},isc.A.isEnabledFor=function(a,b,c){if(!a)a=isc.$ad;for(;a!=isc.$ad;){var d=this.getPriority(a,c);if(d!=null)return b<=d;d=a.lastIndexOf(this.$fr);
if(d>0)a=a.substring(0,d);else break}return b<=isc.Log.defaultPriority},isc.A.log=function(a,b,c,d,e,f){if(this.isEnabledFor(c,a,e))this.addLogMessage(a,b,c,d,f);else this.reportSuppressedLogs&&this.logWarn("suppressed log, category: "+c+": "+b)},isc.A.getLogTimestamp=function(a){var b=this.$fw;if(b==null){b=this.$fw=[];b[2]=this.$fq;b[5]=this.$fq;b[8]=this.$fr}if(a==null)a=new Date;var c=a.getHours(),d=a.getMinutes(),e=a.getSeconds();a=a.getMilliseconds();b[1]=c;b[0]=c<10?this._1zero:null;b[4]=d;
b[3]=d<10?this._1zero:null;b[7]=e;b[6]=e<10?this._1zero:null;b[10]=a;b[9]=a<10?this._2zero:a<100?this._1zero:null;return b.join(isc.$ad)},isc.A.getPriorityName=function(a){if(a==null)return isc.$ad;return this.PRIORITY_NAMES[a]},isc.A.$fc=function(a,b,c,d,e){var f=this.$fx;if(f==null)f=this.$fx=[];if(!c)c=this.category;f[0]=this.getLogTimestamp(e);f[1]=this.$fq;if(this.ns.EH&&this.ns.EH.$lc!=null){f[2]=this.ns.EH.$lc;f[3]=this.$fq}if(a!=null){f[4]=this.getPriorityName(a);f[5]=this.$fq}f[6]=c;f[7]=
this.$fq;if(d){f[8]=d;f[9]=this.$fq}f[10]=b;a=f.join(isc.$ad);f.length=0;return a},isc.A.addLogMessage=function(a,b,c,d,e){c=this.$fc(a,b,c,d,e);this.addToMasterLog(c);this.warningLogged!=null&&a!=null&&a<=this.WARN&&this.warningLogged(c);a!=null&&a<=this.ERROR&&alert(b)},isc.A.addToMasterLog=function(a){this.$fp[this.$fo]=a;this.$fo++;if(this.$fo>this.$fn)this.$fo=0;this.showInlineLogs&&this.updateInlineLogResults()},isc.A.updateInlineLogResults=function(){if(!(isc.Canvas==null||this.$fp==null)){if(!this.inlineLogCanvas)this.inlineLogCanvas=
isc.Canvas.create({width:"50%",height:"100%",overflow:"auto",backgroundColor:"white",canDragReposition:true,autoDraw:true});this.inlineLogCanvas.setContents(this.$fp.join("<br>"));this.inlineLogCanvas.bringToFront()}},isc.A.getMessages=function(){var a=this.$fp,b=this.$fo,c=this.$fn;return a.slice(c-b,c).concat(a.slice(0,b))},isc.A.show=function(a,b,c){if(!this.logViewer)this.logViewer=isc.LogViewer.create();this.logViewer.showLog(a,b,c)},isc.A.clear=function(){this.$fp=[];this.$fo=0;this.logViewer&&
this.logViewer.clear()},isc.A.evaluate=function(a,b){var c=isc.timeStamp(),d,e;if(isc.Log.supportsOnError)e=isc.Class.evalWithVars(a,b,this);else try{e=isc.Class.evalWithVars(a,b,this)}catch(f){d=f}var g=isc.timeStamp(),h=isc.Log.getLogTimestamp()+":",i=a.split(/[\r\n]+/);if(i.length>1)a=i[0]+"...";if(a.length>200)a=a.substring(0,200)+"...";if(d){if(!isc.Log.supportsOnError){isc.Log.$am(d);return}h+="Evaluator: '"+a+"' returned a script error: \r\n'"+d+"'"}else h="Evaluator: result of '"+a+"' ("+
(g-c)+"ms):\r\n"+this.echo(e);this.logViewer&&this.logViewer.addToLog(h,true)},isc.A.updateStats=function(a){this.logViewer&&this.logViewer.updateStats(a)},isc.A.$fy=function(){var a=isc.$j;if(a){for(var b=0;b<a.length;b++){var c=a[b];isc.isA.String(c)?this.logDebug(c):this.logMessage(c.priority||isc.Log.INFO,c.message,c.category,c.timestamp)}isc.$j=null}},isc.A.traceMethod=function(a,b,c){var d=this.validObservation(a,b);if(d){if(!this.$fz)this.$fz={};this.$fz[a]||(this.$fz[a]=[]);if(!this.$f0)this.$f0=
isc.Class.create();var e=this.$f0;if(e.isObserving(d,b)&&this.$fz[a].contains(b)){e.ignore(d,b);this.logWarn("MethodTimer: Stopped logging stack traces for "+b+" method on "+a);this.$fz[a].remove(b)}else{var f="isc.Log.logWarn('"+(d.ID?d.ID:d.Class?d.Class:d)+"."+b+"() - trace:' +";f+=c?"'\\n' + isc.Log.getCallTrace(arguments))":"isc.Log.getStackTrace())";this.logWarn("expression is: "+f);e.observe(d,b,f);this.logWarn("MethodTimer: Logging traces whenever "+b+" method on "+a+" is called");this.$fz[a].add(b)}}},
isc.A.traceCall=function(a,b){this.traceMethod(a,b,true)},isc.A.timeMethod=function(a,b,c,d,e){var f=this.validObservation(a,b);if(f){if(!this.$f1)this.$f1={};this.$f1[a]||(this.$f1[a]=[]);if(!this.$f1[a].contains(b)){var g=isc.$ah+b;g=f[g]?g:b;f[isc.Log.$ft+b]=f[g];f[g]=isc.Log.makeTimerFunction(b,f,c,d,e);this.logWarn("MethodTimer: Timing "+b+" method on "+a);this.$f1[a].add(b)}}},isc.A.stopTimingMethod=function(a,b){var c=this.validObservation(a,b);if(c)if(this.$f1[a].contains(b)){var d=isc.Log.$ft+
b,e=isc.$ah+b;e=c[e]?e:b;if(c[d]){c[e]=c[d];delete c[d];this.logWarn("MethodTimer: "+b+" method on "+a+" is no longer being timed")}else this.logWarn("Not timing method '"+b+"' on object '"+a+"'.");this.$f1[a].remove(b)}},isc.A.makeTimerFunction=function(a,b,c,d,e){var f=b[a],g=isc.Func.getName(f,true);c=function(h,i,j,k,l,m,n,o,s,r,t){e&&isc.Log.$f2();var p=isc.timeStamp();h=f.call(this,h,i,j,k,l,m,n,o,s,r,t);p=isc.timeStamp()-p;d||isc.Log.$f3(this,g,p);return h};c.$dx=(b.ID||b.Class||"")+"_"+a+
"Timing";c.$f4=true;c.$c1=isc.Log.$ft+a;return c},isc.A.$f3=function(a,b,c){if(this.deferTimerLogs)return this.$f5(a,b,c);var d=isc.Log.$fu;d[1]=a.logWarn?b:b+" on "+this.echoLeaf(a);d[3]=c.toFixed(3);b=d.join(isc.emptyString);a.logMessage?a.logWarn(b):isc.Log.logWarn(b)},isc.A.validObservation=function(a,b){if(isc.isAn.emptyString(a)||isc.isAn.emptyString(b))return false;var c=a;if(isc.isA.String(a)){c=isc.Class.evaluate(a);if(!c){this.logWarn("MethodTimer: "+a+" is not an object.");return false}}if(b.indexOf("(")!=
-1)b=b.slice(0,b.indexOf("("));if(isc.isA.ClassObject(c)){var d=c.getPrototype();if(isc.isA.Function(d[b]))return d;if(!c[b]){this.logWarn("MethodTimer: "+b+" could not be found as a static or instance property on "+a);return false}}else if(!c[b]){this.logWarn("MethodTimer: "+b+" is undefined or null on "+a);return false}if(!isc.Func.convertToMethod(c,b)){this.logWarn("MethodTimer: "+b+" is not a method on "+a);return false}return c},isc.A.hiliteCanvas=function(a){var b=a;if(isc.isA.String(a))b=window[a];
isc.isA.Canvas(b)?this.showHiliteCanvas(b.getPageRect()):this.logWarn("Unable to find specified canvas '"+a+"'.")},isc.A.hiliteElement=function(a){var b=a||this.elementToHilite;if(isc.isA.String(a))b=isc.Element.get(a);if(b==null)this.logWarn("Unable to find specified element '"+a+"'.");else{this.showHiliteCanvas(isc.Element.getElementRect(b));this.elementToHilite=null}},isc.A.showHiliteCanvas=function(a){var b=this._hiliteCanvas;if(!b)b=this._hiliteCanvas=isc.Canvas.create({ID:"logHiliteCanvas",
autoDraw:false,overflow:"hidden",hide:function(){this.Super("hide",arguments);this.resizeTo(1,1);this.setTop(-20)},border1:"2px dotted red",border2:"2px dotted white"});b.setPageRect(a);isc.Page.setEvent("click",b.getID()+".hide()");b.setBorder(b.border1);b.bringToFront();b.show();this.$f6()},isc.A.hideHiliteCanvas=function(){this._hiliteCanvas&&this._hiliteCanvas.hide()},isc.A.$f6=function(){for(var a=[this._hiliteCanvas.border1,this._hiliteCanvas.border2],b=0;b<this.flashHiliteCount;b++)isc.Timer.setTimeout({target:this._hiliteCanvas,
methodName:"setBorder",args:[a[b%2]]},this.flashHilitePeriod*b)});isc.B._maxIndex=isc.C+34;isc.ClassFactory.defineClass("LogViewer");isc.A=isc.LogViewer;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getGlobalLogCookie=function(){var a=isc.Cookie.get("GLog");if(!a)return null;try{return(new Function("return "+a))()}catch(b){this.logWarn("bad log cookie: "+a+this.getStackTrace())}},isc.A.getLogCookie=function(){var a=isc.Cookie.get("Log");
if(!a)return null;try{return(new Function("return "+a))()}catch(b){this.logWarn("bad log cookie: "+a+this.getStackTrace())}});isc.B._maxIndex=isc.C+2;isc.A=isc.LogViewer.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$f7=25;isc.A.$f8="count";isc.B.push(isc.A.logWindowLoaded=function(){return this._logWindowLoaded&&this._logWindow!=null&&!this._logWindow.closed},isc.A.showLog=function(a,b,c,d){if(b)this._logWindow=b;if(this.logWindowLoaded()){this._logWindow.setResultsValue(isc.Log.getMessages().join("\r"));
this._logWindow.focus()}else{if(!isc.Log.logViewer)isc.Log.logViewer=this;if(!(this._logWindow&&!this._logWindow.closed)){a={};b=c?null:isc.LogViewer.getGlobalLogCookie();if(b!=null)a=b;else{a.left=100;a.top=100;a.width=640;a.height=480}var e="RESIZABLE,WIDTH="+a.width+",HEIGHT="+a.height;if(b){e+=isc.Browser.isIE?",left="+a.left+",top="+a.top:",screenX="+a.left+",screenY="+a.top;if(b.evals)this.$f9=b.evals.length-1}d=d||"_simpleLog";this._logWindow=window.open(isc.Page.getIsomorphicClientDir()+"helpers/Log.html",
d+(isc.version.contains("version")?"Dev":""),e);this.$ga(c)}}},isc.A.$ga=function(a){if(this._logWindow!=null){if(isc.Browser.isIE)try{this._logWindow.$gb=true}catch(b){this.delayCall("$ga",[a],this.$f7);return}if(isc.Browser.isIE)this._logWindow.launchWindow=window;if(a)this._logWindow.dontSaveState=true;isc.Page.setEvent("idle",function(){if(isc.Log.logViewer){var c=isc.Log.logViewer._logWindow;c&&!c.closed&&c.focus()}},isc.Page.FIRE_ONCE);this._logWindow.initializePage&&this._logWindow.initializePage()}},
isc.A.addToLog=function(a,b){this.logWindowLoaded()&&!this.$gc&&this._logWindow.addToLog(a,b)},isc.A.updateStats=function(a){if(!isc.$gd)if(this.logWindowLoaded()){var b=isc.Canvas,c=this._logWindow.staticForm;a==this.$f8?c.setValue(a,b._canvasList.length-b._iscInternalCount):c.setValue(a,b._stats[a])}},isc.A.displayEventTarget=function(){var a=isc.EH.lastTarget?isc.EH.lastTarget.getID():"";if(a!=this.$ge){this.$ge=a;this.logWindowLoaded()&&this._logWindow.staticForm.setValue("currentCanvas",a);a=
(a=isc.EH.lastEvent.nativeTarget)?a.id||a.ID||a.tagName:"none";this.logWindowLoaded()&&this._logWindow.staticForm.setValue("nativeTarget",a)}},isc.A.displayFocusTarget=function(){var a=isc.EH.getFocusCanvas();a=a?a.getID():"";if(a!=this.$gf){this.$gf=a;this.logWindowLoaded()&&this._logWindow.staticForm.setValue("currentFocusCanvas",a)}},isc.A.displayMouseDownTarget=function(){var a=isc.EH.mouseDownEvent.target;a=a?a.getID():"";if(this.logWindowLoaded()){this._logWindow.staticForm.setValue("lastMouseDown",
a);if(isc.AutoTest!=null&&isc.Log.showLocatorOnMouseDown)this._logWindow.staticForm.setValue("autoTestLocator",isc.AutoTest.getLocator()||"none")}},isc.A.updateRPC=function(){this.logWindowLoaded()&&this._logWindow.RPCTracker&&this._logWindow.RPCTracker.dataChanged()},isc.A.evaluate=function(a,b){return isc.Log.evaluate(a,b)},isc.A.clear=function(){this.logWindowLoaded()&&this._logWindow.clearResults()});isc.B._maxIndex=isc.C+11;isc.$gg=isc.LogViewer.getGlobalLogCookie();if(isc.$gg!=null){isc.Log.applyLogPriorities(isc.$gg.priorityDefaults);
if(isc.$gg.defaultPriority!=null)isc.Log.defaultPriority=isc.$gg.defaultPriority}else isc.Log.setPriority("Log",isc.Log.INFO);isc.showConsole=function(a,b,c,d){isc.showLog(a,b,c,d)};isc.addGlobal("showLog",function(a,b,c,d){isc.Log.show(a,b,c,d)});isc.Log.logInfo("initialized");isc.Log.$fy();isc.Log.supportsOnError=isc.Browser.isIE;if(isc.Log.supportsOnError&&window.isc_installOnError!=false)window.onerror=function(a,b,c){var d=arguments.caller;if(d==null&&arguments.callee.caller!=null)d=arguments.callee.caller.arguments;
if(!(d&&d.$e9)){var e="Error:\r\t'"+a+"'\r\tin "+b+"\r\tat line "+c;if(d)e+=isc.Log.getStackTrace(d);isc.Log.logWarn(e);if(isc.Browser.isIE&&isc.useIEDebugger)if(confirm("Run debugger?\r\r"+e))debugger}};isc.$63a=function(){return"["+this.Class+" ID:"+this.ID+" (created by: "+this.componentId+")]"};isc.$63b=function(a,b,c,d){var e=isc.Log;if(e){if(a==null)a=e.defaultPriority;if(a<=e.stackTracePriority&&this.getStackTrace!=null)b+="\nStack trace:\n"+this.getStackTrace(arguments,2);if(!c)c=this.Class;
e.log(a,b,c,this.ID+" (created by: "+this.componentId+")",this,d)}};isc.A=Array;isc.A.ASCENDING=true;isc.A.DESCENDING=false;isc.A=Array;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.shouldSortAscending=function(a){if(a==Array.ASCENDING)return true;if(a==Array.DESCENDING)return false;if(isc.isA.String(a)){if(a.toLowerCase()=="ascending")return true;if(a.toLowerCase()=="descending")return false}return null});isc.B._maxIndex=isc.C+1;isc.A=
Array.prototype;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.sortByProperty=function(a,b,c,d){return this.sortByProperties({property:a,direction:b,normalizer:c,context:d})},isc.A.setSort=function(a){for(var b=[],c=[],d=[],e=[],f=0;f<a.length;f++){var g=a[f];b[f]=g.property;c[f]=Array.shouldSortAscending(g.direction);d[f]=g.normalizer;e[f]=g.context}return this.sortByProperties(b,c,d,e)},isc.A.sortByProperties=function(){var a=isc.$gh,b=
isc.$gi;if(isc.isAn.Array(arguments[0])){this.sortProps=arguments[0];this.sortDirections=arguments[1]||[];this.normalizers=arguments[2]||[];this.contexts=arguments[3]||[]}else{if(this.sortProps){this.sortProps.clear();this.sortDirections.clear();this.normalizers.clear();this.contexts.clear()}else{this.sortProps=[];this.normalizers=[];this.sortDirections=[];this.contexts=[]}for(var c=0;c<arguments.length;c++){this.sortProps[c]=arguments[c].property;this.sortDirections[c]=arguments[c].direction;this.normalizers[c]=
arguments[c].normalizer;this.contexts[c]=arguments[c].context}}var d=this.sortProps,e=this.normalizers,f=this.contexts;isc.timestamp();for(c=0;c<d.length;c++){isc.$506[c]=this.sortDirections[c];var g=e[c],h=f[c],i;if(g==null)i=this.$gj(d[c]);else if(isc.isA.String(g))i=g;if(i!=null)g=Array.$gk(i);if(g==null)g=Array.$gl;this.normalizers[c]=g;if(this.length!=0){a[c]=[];b[c]=[];if(isc.isA.Function(g))for(var j=0,k=this.length,l;j<k;j++){l=this[j];if(l==null)isc.$gq=true;else{l.$gm=j;var m=g(l,this.sortProps[c],
h);a[c][j]=m;if(i!=null&&!Array.$gn(l[this.sortProps[c]],i))b[c][j]=l[this.sortProps[c]];if(isc.isA.SpecialNumber(m)&&isNaN(m))a[c][j]=0-Number.MAX_VALUE}}else{g=this.normalizers[c];j=0;for(k=this.length;j<k;j++){l=this[j];if(l==null)isc.$gq=true;else{h=l[this.sortProps[c]];if(h==null)h="";m=g[h];if(m==null)m=h;l.$gm=j;a[c][j]=m}}}}}var n=false;for(c=0;c<isc.$gi.length;c++)if(isc.$gi[c].length>0){n=true;break}isc.$752=n;var o=isc.$gh,s=isc.$506;n=isc.$752;var r=this;r.compareAscending=Array.compareAscending;
r.compareDescending=Array.compareDescending;isc.timeStamp();this.sort(function(t,p){for(var q=t!=null?t.$gm:null,u=p!=null?p.$gm:null,w=0;w<o.length;w++){var v=o[w][q],z=o[w][u];if(n&&v!=null&&z!=null){var A=isc.$gi,B=A[w][q];A=A[w][u];if(B!=null&&A!=null){v=B;z=A}}v=s[w]?r.compareAscending(v,z):r.compareDescending(v,z);if(v!=0)return v}return 0});if(isc.$gq){isc.Log.logWarn("Attempt to sort array by property hit null entry where a record should be. Array:"+isc.Log.echo(this));isc.$gq=null}this.clearProperty("$gm");
a.clear();b.clear();isc.$506.clear();this.dataChanged();return this},isc.A.unsort=function(){this.sortProps&&this.sortProps.clear();return true},isc.A.$gj=function(a,b){for(var c=b!=null?isc.isAn.Array(b)?b:[b]:this,d=0;d<c.length;d++)if(isc.isAn.Object(c[d])){b=c[d][a];if(b!=null){var e=Array.$gr(b);if(e!=null)return e}}return null},isc.A.$gs=function(a,b){var c=this.$gj(a,b);return Array.$gk(c)||Array.$gl},isc.A.normalize=function(a,b){return(this.normalizer?this.normalizer:this.$gs(b,a))(a,b)});
isc.B._maxIndex=isc.C+7;isc.A=Array;isc.A.$gt="$gu";isc.A.$gv="$gw";isc.A=Array;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$a6="string";isc.A.$gx="text";isc.A.$gy="number";isc.A.$gz="integer";isc.A.$g0="float";isc.A.$g1="int";isc.A.$g2="boolean";isc.A._$Date_="Date";isc.A.$g3="Time";isc.A.$g4="date";isc.A.$g5="time";isc.A.$bl="object";isc.A.$g6={"float":"number","int:":"number",integer:"number",text:"string",Date:"date",Time:"date",time:"date"};
isc.B.push(isc.A.$gl=function(a,b){return a[b]},isc.A.$g7=function(a,b){return isc.isA.String(a[b])?a[b].toLowerCase():isc.emptyString},isc.A.$g8=function(a,b){var c=a[b];return isc.isA.Number(c)?c:0-Number.MAX_VALUE},isc.A.$g9=function(a,b){var c=a[b];if(c==true)return 1;if(c==false)return 0;if(c==null)return-1;return-2},isc.A.$ha=function(a,b){var c=a[b]&&isc.isA.Date(a[b])?a[b].getTime():(new Date(a[b])).getTime();if(isNaN(c))return-864E13;return c},isc.A.$hb=function(a,b){var c=a[b];if(!isc.isA.Date(c)&&
c!=null)c=isc.Time.parseInput(c);if(isc.isA.Date(c))return c.getTime();return 0},isc.A.textToNumericNormalizer=function(a,b){var c=parseInt(a[b],10);return isc.isA.Number(c)?c:0},isc.A.$gk=function(a){if(!a||!isc.isA.String(a))return null;switch(a){case this.$a6:case this.$gx:return Array.$g7;case this.$g2:return Array.$g9;case this._$Date_:case this.$g4:return Array.$ha;case this.$g3:case this.$g5:return Array.$hb;case this.$gy:case this.$gz:case this.$g1:case this.$g0:return Array.$g8}return Array.$gl},
isc.A.$gr=function(a){var b=typeof a;if(b==this.$bl)if(isc.isA.Date(a))b=this.$g4;return b},isc.A.$gn=function(a,b){var c=this.$gr(a);if(c==b)return true;return this.$g6[b]==c},isc.A.compareAscending=function(a,b){if(a!=null&&a.localeCompare!=null){var c=a.localeCompare(b);return c}if(b!=null&&b.localeCompare!=null)return c=b.localeCompare(a);return b>a?-1:b<a?1:0},isc.A.compareDescending=function(a,b){if(a!=null&&a.localeCompare!=null){var c=a.localeCompare(b);return-1*c}if(b!=null&&b.localeCompare!=
null){c=b.localeCompare(a);return-1*c}return b<a?-1:b>a?1:0},isc.A.safariCompareAscending=function(a,b){if(a!=null&&a.localeCompare!=null){var c=a.localeCompare(b);return c-2}if(b!=null&&b.localeCompare!=null){c=b.localeCompare(a);return c-2}return b>a?-1:b<a?1:0},isc.A.safariCompareDescending=function(a,b){if(a!=null&&a.localeCompare!=null){var c=a.localeCompare(b);return-1*(c-2)}if(b!=null&&b.localeCompare!=null){c=b.localeCompare(a);return-1*(c-2)}return b<a?-1:b>a?1:0});isc.B._maxIndex=isc.C+
14;isc.$gh=[];isc.$gi=[];isc.$506=[];(function(){if(isc.Browser.isSafari)if("b".localeCompare("a")==3){Array.compareAscending=Array.safariCompareAscending;Array.compareDescending=Array.safariCompareDescending}})();isc.A=Array.prototype;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.max=function(a,b){if(a==null)a=0;if(b==null)b=this.length;for(var c=null,d=a;d<b;d++){var e=this[d];if(isc.isA.Number(e))c=c==null?e:Math.max(c,e)}return c},isc.A.min=
function(a,b){if(a==null)a=0;if(b==null)b=this.length;for(var c=null,d=a;d<b;d++){var e=this[d];if(isc.isA.Number(e))c=c==null?e:Math.min(c,e)}return c},isc.A.sum=function(a,b){if(a==null)a=0;if(b==null)b=this.length;for(var c=0,d=a;d<b;d++)if(isc.isA.Number(this[d]))c+=this[d];return c},isc.A.and=function(a,b){if(a==null)a=0;if(b==null)b=this.length;for(var c=a;c<b;c++)if(!this[c])return false;return true},isc.A.or=function(a,b){if(a==null)a=0;if(b==null)b=this.length;for(var c=a;c<b;c++)if(this[c])return true;
return false});isc.B._maxIndex=isc.C+5;isc.getValueForKey=function(a,b,c){if(b&&b[a]!=null&&!isc.isAn.Array(b))return b[a];return arguments.length<3?a:c};isc.getKeyForValue=function(a,b,c){if(b)for(var d in b)if(b[d]==a)return d;return arguments.length<3?a:c};isc.makeReverseMap=function(a){var b={},c,d;for(d in a){c=a[d];b[c]=d}return b};isc.sortByKey=function(a){for(var b={},c=isc.getKeys(a).sort(),d=0;d<c.length;d++)b[c[d]]=a[c[d]];return b};isc.sortByValue=function(a){return isc.makeReverseMap(isc.sortByKey(isc.makeReverseMap(a)))};
isc.ClassFactory.defineClass("Time");isc.A=isc.Time;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$he=[/^\s*(\d?\d)\s*[: ]\s*(\d?\d)\s*[: ]\s*(\d?\d)?\s*([AaPp][Mm]?)?\s*([+-]\d{2}:\d{2}|Z)?\s*$/,/^\s*(\d?\d)\s*[: ]\s*(\d?\d)(\s*)([AaPp][Mm]?)?\s*([+-]\d{2}:\d{2}|Z)?\s*$/,/^\s*(\d\d)(\d\d)(\d\d)?\s*([AaPp][Mm]?)?\s*([+-]\d{2}:\d{2}|Z)?\s*$/,/^\s*(\d)(\d\d)(\d\d)?\s*([AaPp][Mm]?)?\s*([+-]\d{2}:\d{2}|Z)?\s*$/,/^\s*(\d\d?)(\s)?(\s*)([AaPp][Mm]?)?\s*([+-]\d{2}:\d{2}|Z)?\s*$/];
isc.A.formatterMap={toTime:{showSeconds:true,padded:false,show24:false},to24HourTime:{showSeconds:true,padded:false,show24:true},toPaddedTime:{showSeconds:true,padded:true,show24:false},toPadded24HourTime:{showSeconds:true,padded:true,show24:true},toShortTime:{showSeconds:false,padded:false,show24:false},toShort24HourTime:{showSeconds:false,padded:false,show24:true},toShortPaddedTime:{showSeconds:false,padded:true,show24:false},toShortPadded24HourTime:{showSeconds:false,padded:true,show24:true}};
isc.A.displayFormat="toTime";isc.A.shortDisplayFormat="toShortTime";isc.A.AMIndicator=" am";isc.A.PMIndicator=" pm";isc.B.push(isc.A.setDefaultDisplayTimezone=function(a){if(a!=null){var b,c;if(isc.isA.Number(a)){a=-a;b=Math.floor(a/60);c=a-b*60}else if(isc.isA.String(a)){c=a.split(":");if(a=(b=c[0])&&b.startsWith("-"))b=b.substring(1);c=c[1];b=(a?-1:1)*parseInt(b,10);c=(a?-1:1)*parseInt(c,10)}if(isc.isA.Number(b)&&isc.isA.Number(c)){this.UTCHoursDisplayOffset=b;this.UTCMinutesDisplayOffset=c}}},
isc.A.getDefaultDisplayTimezone=function(){var a=this.UTCHoursDisplayOffset,b=this.UTCMinutesDisplayOffset,c=a<0;return(!c?"+":"")+a.stringify(2)+":"+((c?-1:1)*b).stringify(2)});isc.B._maxIndex=isc.C+2;isc.A=isc.Time;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$hf=[null,":",null,":"];isc.A.$hg=[null,":"];isc.B.push(isc.A.toTime=function(a,b){return this.format(a,b,false)},isc.A.toShortTime=function(a,b){return this.format(a,b,true)},isc.A.format=
function(a,b,c){if(!isc.isA.Date(a))return a;var d=b;if(!b&&!isc.isA.String(b)&&!isc.isA.Function(b))b=c?this.shortDisplayFormat:this.displayFormat;if(isc.isA.Function(b))return b(a);if(isc.isA.String(b))b=this.formatterMap[b];if(!isc.isAn.Object(b)){this.logWarn("Invalid time formatter:"+d+" - using 'toTime'");b=this.formatterMap.toTime}c=b.showSeconds;d=b.padded;b=b.show24;var e=a.getUTCHours(),f=a.getUTCMinutes();f=this.$68d(e,f,this.getUTCHoursDisplayOffset(a),this.getUTCMinutesDisplayOffset(a));
e=f[0];f=f[1];a=c?a.getUTCSeconds():null;var g=b?null:e>=12;if(!b){if(e>12)e-=12;if(e==0)e=12}if(d)e=e.stringify(2);d=c?this.$hf:this.$hg;d[0]=e;d[2]=f.stringify();if(c)d[4]=a.stringify();d[5]=b?null:g?this.PMIndicator:this.AMIndicator;return d.join(isc.emptyString)},isc.A.parseInput=function(a,b,c){var d=0,e=0,f=0,g=0,h,i;if(isc.isA.Date(a)){c=true;d=a.getUTCHours();e=a.getUTCMinutes();f=a.getUTCSeconds();g=a.getUTCMilliseconds()}else if(a){for(var j=0;j<isc.Time.$he.length;j++){var k=isc.Time.$he[j].exec(a);
if(k)break}if(k){d=Math.min(parseInt(k[1]|0,10),23);e=Math.min(parseInt(k[2]|0,10),59);f=Math.min(parseInt(k[3]|0,10),59);if(a=k[4]){if(!this.$hh)this.$hh={p:true,P:true,pm:true,PM:true,Pm:true};if(this.$hh[a]==true){if(d<12)d+=12}else if(d==12)d=0}if(k[5]!=null&&k[5]!=""&&k[5].toLowerCase()!="z"){k=k[5].split(":");i=(h=k[0])&&h.startsWith("-");k=k[1];h=parseInt(h,10);i=(i?-1:1)*parseInt(k,10)}}else if(b)return null}else if(b)return null;k=new Date;if(h==null)h=c?0:this.getUTCHoursDisplayOffset(k);
if(i==null)i=c?0:this.getUTCMinutesDisplayOffset(k);c=this.$68d(d,e,0-h,0-i);d=c[0];e=c[1];d!=null&&k.setUTCHours(d);e!=null&&k.setUTCMinutes(e);f!=null&&k.setUTCSeconds(f);g!=null&&k.setUTCMilliseconds(g);return k},isc.A.$68d=function(a,b,c,d){if(b==null||a==null){this.logWarn("applyTimezoneOffset passed null hours/minutes");return[a,b]}if(c==null)c=0;if(d==null)c=0;if(c==0&&d==0)return[a,b,0];a+=c;for(b+=d;b>=60;){b-=60;a+=1}for(;b<0;){b+=60;a-=1}for(c=0;a>=24;){a-=24;c+=1}for(;a<0;){a+=24;c-=1}return[a,
b,c]},isc.A.createDate=function(a,b,c,d,e){var f=new Date;if(a==null)a=0;if(b==null)b=0;if(c==null)c=0;if(d==null)d=0;if(!e){b=this.$68d(a,b,-this.UTCHoursDisplayOffset,-this.UTCMinutesDisplayOffset);a=b[0];b=b[1]}f.setUTCHours(a);f.setUTCMinutes(b);f.setUTCSeconds(c);f.setUTCMilliseconds(d);return f},isc.A.setShortDisplayFormat=function(a){this.shortDisplayFormat=a},isc.A.setNormalDisplayFormat=function(a){this.displayFormat=a},isc.A.compareTimes=function(a,b){if(isc.isA.String(a))a=isc.Time.parseInput(a);
if(isc.isA.String(b))b=isc.Time.parseInput(b);if(a==null&&b==null)return true;if(!isc.isA.Date(a)||!isc.isA.Date(b))return false;return a.getUTCHours()==b.getUTCHours()&&a.getUTCMinutes()==b.getUTCMinutes()&&a.getUTCSeconds()==b.getUTCSeconds()},isc.A.$76r=function(){var a=new Date,b=new Date(0),c=new Date(0);b.setUTCFullYear(a.getUTCFullYear());b.setUTCMonth(0);b.setUTCDate(1);c.setUTCFullYear(a.getUTCFullYear());c.setUTCMonth(6);c.setUTCDate(1);a=a.getTimezoneOffset();this.januaryDstOffset=b.getTimezoneOffset();
b=c.getTimezoneOffset();this.dstDeltaMinutes=this.januaryDstOffset-b;if(this.dstDeltaMinutes>0){this.southernHemisphere=false;this.adjustForDST=true;if(a==b)this.currentlyInDST=true}else if(this.dstDeltaMinutes<0){this.adjustForDST=this.southernHemisphere=true;if(a==this.januaryDstOffset)this.currentlyInDST=true}else this.adjustForDST=false;this.dstDeltaMinutes=Math.abs(this.dstDeltaMinutes);this.dstDeltaHours=Math.floor(this.dstDeltaMinutes/60);this.dstDeltaMinutes-=this.dstDeltaHours*60},isc.A.getUTCHoursDisplayOffset=
function(a){var b=this.currentlyInDST?-this.dstDeltaHours:0;if(this.adjustForDST)if(a.getTimezoneOffset()==this.januaryDstOffset){if(this.southernHemisphere)b+=this.dstDeltaHours}else this.southernHemisphere||(b+=this.dstDeltaHours);return this.UTCHoursDisplayOffset+(this.adjustForDST?b:0)},isc.A.getUTCMinutesDisplayOffset=function(a){var b=this.currentlyInDST?-this.dstDeltaMinutes:0;if(this.adjustForDST)if(a.getTimezoneOffset()==this.januaryDstOffset){if(this.southernHemisphere)b+=this.dstDeltaMinutes}else this.southernHemisphere||
(b+=this.dstDeltaMinutes);return this.UTCMinutesDisplayOffset+(this.adjustForDST?b:0)});isc.B._maxIndex=isc.C+12;isc.Time.$76r();isc.Time.setDefaultDisplayTimezone((new Date).getTimezoneOffset());isc.ClassFactory.defineClass("Page");isc.A=isc.Page;isc.A.$hi=[];isc.A.$hj=false;isc.A.defaultUnsupportedBrowserURL="[SKIN]/unsupported_browser.html";isc.A.$hk={};isc.A.protocolURLs=window.isc_protocolURLs||["http://","https://","file://","mailto:","app-resource:","data:"];isc.A.textDirection=null;isc.A.LTR=
"ltr";isc.A.RTL="rtl";isc.A=isc.Page;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$hm="[SKIN]";isc.A.$hn="[SKIN]/";isc.A.$ho="[";isc.A.$hp="./";isc.A.$hq="..";isc.A.leaveScrollbarGap=isc.Browser.isMoz&&isc.Browser.geckoVersion<20051107;isc.A.getWidth=isc.Browser.isNS?function(a,b){a||(a=window);b=b||isc.Browser.isMoz&&isc.Browser.geckoVersion>=20080529;if(isc.Browser.isMoz&&a==window&&!b){if(this.width!=null)return this.width-(this.leaveScrollbarGap?
isc.Element?isc.Element.getNativeScrollbarSize():16:0);this.logInfo("NOTE: isc.Page.getWidth() unable to determine page width.  Returning 500","sizing");return 500}else{var c=isc.Browser.geckoVersion!=null&&isc.Browser.geckoVersion<20051111,d;if(!this.leaveScrollbarGap&&!c&&a.document.body!=null){c=isc.Browser.isStrict?a.document.documentElement:a.document.body;if(c!=null)d=c.clientWidth}if(d==null||d==0)d=a.innerWidth;if(a==window)this.width=d;return d}}:function(a){a||(a=window);var b=a.document.body;
if(isc.Browser.isStrict&&!isc.Browser.isOpera)b=a.document.documentElement;if(b)return b.clientWidth;else{isc.Page.isLoaded()||isc.Page.setEvent("load","isc.EH.$hr()",isc.Page.FIRE_ONCE);this.logWarn("NOTE: isc.Page.getWidth() called before <BODY> tag was written out -- value cannot be determined.  Returning 500");return 500}};isc.A.getHeight=isc.Browser.isNS?function(a,b){a||(a=window);b=b||isc.Browser.isMoz&&isc.Browser.geckoVersion>=20080529;if(isc.Browser.isMoz&&a==window&&!b){if(this.height!=
null)return this.height;return 500}else{var c;if(!isc.Browser.isStrict&&isc.Browser.geckoVersion>=20051111&&a.document.body!=null)c=a.document.body.clientHeight;if(c==null||c==0)c=a.innerHeight;if(a==window)this.height=c;return c}}:function(a){a||(a=window);var b=a.document.body;if(isc.Browser.isStrict&&!isc.Browser.isOpera)b=a.document.documentElement;if(b)return b.clientHeight;else{this.logWarn("NOTE: isc.Page.getHeight() called before <BODY> tag was written out -- value cannot be determined.  Returning 500");
return 500}};isc.A.getScrollHeight=isc.Browser.isNS?function(a){a=a||document;a=a.body.scrollHeight;if(isc.isA.Number(a))return a}:function(a){a=a||document;if(a==null||a.body==null)return 800;if(isc.Browser.version>=6)return Math.max(a.body.scrollHeight,a.documentElement.clientHeight);return a.body.scrollHeight};isc.A.getScrollLeft=isc.Browser.isNS?function(){return window.pageXOffset}:function(){if(document==null||document.body==null)return 0;return isc.Browser.isStrict?document.documentElement.scrollLeft:
document.body.scrollLeft};isc.A.getScrollTop=isc.Browser.isNS?function(){return window.pageYOffset}:function(){if(document==null||document.body==null)return 0;return isc.Browser.isStrict?document.documentElement.scrollTop:document.body.scrollTop};isc.A.unsupportedBrowserAction="continue";isc.B.push(isc.A.finishedLoading=function(){if(this.width==null||this.height==null)isc.EH.$hr();isc.Page.$hj=true;isc.Log.logInfo("isc.Page is loaded");isc.EH.startIdleTimer();isc.Browser.isSafari&&isc.Canvas.clearCSSCaches();
if(!window.suppressAutoLogWindow){var a=isc.LogViewer.getLogCookie();a!=null&&a.keepOpen&&isc.Timer.setTimeout("isc.Log.show(true)",1E3)}if(isc.Time&&isc.Time.UTCHoursOffset!=null){isc.logWarn("This application includes code to set the Time.UTCHoursOffset attribute. This property will be respected but has been deprecated in favor of the classMethod isc.Time.setDefaultDisplayTimezone().");isc.Time.setDefaultDisplayTimezone(isc.Time.UTCHoursOffset.stringify()+":00")}isc.Page.pollPageSize?isc.EH.$hr():
isc.EH.delayCall("$hr",null,200)},isc.A.isLoaded=function(){return this.$hj},isc.A.getBlankFrameURL=function(){if(isc.Browser.isIE&&("https:"==window.location.protocol||document.domain!=location.hostname))return this.getURL("[HELPERS]empty.html");return"about:blank"},isc.A.setTitle=function(a){document.title=a},isc.A.setDirectories=function(a){if(a==null)a={imgDir:window.imgDir,isomorphicDir:window.isomorphicDir?window.isomorphicDir:window.IsomorphicDir,isomorphicClientDir:window.isomorphicClientDir,
isomorphicDocsDir:window.isomorphicDocsDir,skinDir:window.skinDir,helperDir:window.helperDir};this.$hs();this.setIsomorphicDir(a.isomorphicDir);this.setIsomorphicClientDir(a.isomorphicClientDir);this.setIsomorphicDocsDir(a.isomorphicDocsDir);this.setAppImgDir(a.imgDir);this.setSkinDir(a.skinDir);this.setHelperDir(a.helperDir)},isc.A.$hs=function(){var a=window.location.href;if(a.contains("?"))a=a.substring(0,a.indexOf("?"));if(a.contains("#"))a=a.substring(0,a.indexOf("#"));if(a.charAt(a.length-1)!=
"/")a=a.substring(0,a.lastIndexOf("/")+1);this.$hk.APP=a;this.logIsInfoEnabled()&&this.logInfo("app dir is "+this.$hk.APP);this.setAppImgDir()},isc.A.getAppDir=function(){return this.$hk.APP},isc.A.setAppImgDir=function(a){this.$hk.APPIMG=this.combineURLs(this.getAppDir(),a!=null?a:"[APP]images/")},isc.A.getAppImgDir=function(a){if(a!=null&&(isc.startsWith(a,isc.slash)||this.getProtocol(a)!=isc.emptyString))return a;return a?this.$hk.APPIMG+a:this.$hk.APPIMG},isc.A.setAppFilesDir=function(a){this.$hk.APPFILES=
this.combineURLs(this.getAppDir(),a)},isc.A.getAppFilesDir=function(){return this.$hk.APPFILES},isc.A.setIsomorphicDir=function(a){this.$hk.ISOMORPHIC=this.combineURLs(this.getAppDir(),a!=null?a:"../isomorphic/");this.setIsomorphicClientDir();this.setIsomorphicDocsDir()},isc.A.getIsomorphicDir=function(){return this.$hk.ISOMORPHIC},isc.A.setSkinDir=function(a){this.$hk.SKIN=this.combineURLs(this.getAppDir(),a!=null?a:"[ISOMORPHIC]/skins/standard/");this.$hk.SKINIMG=this.$hk.SKIN+"images/";if(isc.Canvas)isc.Canvas.$ht=
isc.Canvas.$hu=null},isc.A.getSkinDir=function(){return this.$hk.SKIN},isc.A.getSkinImgDir=function(a){if(a==null)return this.$hk.SKINIMG;return this.combineURLs(this.$hk.SKIN,a)},isc.A.setIsomorphicClientDir=function(a){this.$hk.ISOMORPHIC_CLIENT=this.combineURLs(this.getAppDir(),a!=null?a:"[ISOMORPHIC]/system/");this.setSkinDir();this.setHelperDir()},isc.A.getIsomorphicClientDir=function(){return this.$hk.ISOMORPHIC_CLIENT},isc.A.setIsomorphicDocsDir=function(a){this.$hk.ISOMORPHIC_DOCS=this.combineURLs(this.getAppDir(),
a!=null?a:"[ISOMORPHIC]/system/reference/");this.setIsomorphicDocsSkinDir()},isc.A.getIsomorphicDocsDir=function(){return this.$hk.ISOMORPHIC_DOCS},isc.A.setIsomorphicDocsSkinDir=function(a){this.$hk.ISO_DOCS_SKIN=this.combineURLs(this.getIsomorphicDocsDir(),a!=null?a:"skin/")},isc.A.getIsomorphicDocsSkinDir=function(){return this.$hk.ISO_DOCS_SKIN},isc.A.setHelperDir=function(a){this.$hk.HELPERS=this.combineURLs(this.getAppDir(),a!=null?a:"[ISOMORPHIC_CLIENT]/helpers/")},isc.A.getHelperDir=function(){return isc.Page.$hk.HELPERS},
isc.A.getImgURL=function(a,b){var c;if(isc.startsWith(a,this.$hm)){c=isc.Page.getSkinImgDir(b);var d=isc.startsWith(a,this.$hn)?7:6;a=a.substring(d)}else c=isc.Page.getAppImgDir(b);return isc.Page.combineURLs(c,a)},isc.A.getURL=function(a){if(isc.startsWith(a,this.$ho)){var b=a.indexOf("]");if(b>0){var c=a.substring(1,b).toUpperCase(),d=isc.Page.$hk[c];if(d!=null)a=isc.Page.combineURLs(d,a.substring(b+(a.charAt(b+1)!="/"?1:2)));else this.logDebug("getURL("+a+"): couldn't find cached directory "+c)}else this.logDebug("getURL("+
a+"): didn't find matching ']' in URL")}return a},isc.A.combineURLs=function(a,b){if(!isc.isA.String(b))return a;if(isc.startsWith(b,this.$ho))return this.getURL(b);var c=isc.$ad;if(a==null||a==c||isc.Page.getProtocol(b)!=c)return b;c=isc.slash;var d=isc.Page.getProtocol(a);if(isc.startsWith(b,c))if(isc.isAn.emptyString(d))a=isc.emptyString;else{if(a.indexOf(c,d.length)!=-1)a=a.substring(0,a.indexOf(c,d.length))}else if(b.indexOf(this.$hp)>-1){a=a.substring(d.length,a.length-1);var e=a.split(c),f=
b.split(c),g=e[0];for(e.shift();f[0]==isc.dot||f[0]==this.$hq;)if(f[0]==isc.dot)f.shift();else{f.shift();if(e.length==0)break;e.pop()}a=d+g+c;if(e.length>0)a+=e.join(c)+c;b=f.join(c)}return a+b},isc.A.getProtocol=function(a){for(var b=0;b<isc.Page.protocolURLs.length;b++)if(isc.startsWith(a,isc.Page.protocolURLs[b]))return isc.Page.protocolURLs[b];return isc.$ad},isc.A.getLastSegment=function(a){if(a==null)return isc.emptyString;var b=a.lastIndexOf(isc.slash);if(b==-1)return a;return a.substring(b+
1)},isc.A.isXHTML=function(){if(this.$hv!=null)return this.$hv;if(isc.Browser.isIE)return false;this.getWindow();return this.$hv=this.getDocument().constructor==this.getWindow().XMLDocument},isc.A.isRTL=function(){return this.getTextDirection()==isc.Canvas.RTL},isc.A.getTextDirection=function(){if(this.textDirection==null){var a=document.documentElement,b=document.body;if(a=(b?b.dir:null)||a.dir)return this.textDirection=a.toLowerCase();else if(b)return this.textDirection=this.LTR;return this.LTR}return this.textDirection},
isc.A.loadStyleSheet=function(a,b,c){var d=isc.Page.getURL(a),e="<link rel='stylesheet' type='text/css' href=\""+d+'"/>';if(b==null)b=window;if(isc.Page.isLoaded()&&b==window)if(isc.FileLoader){a=isc.FileLoader.$hw;if(a!=null)for(b=0;b<a.length;b++)if(d.indexOf(a[b])!=-1){this.logDebug("skin "+a[b]+" already loaded by FileLoader - not loading css file");return}isc.FileLoader.loadCSSFile(d,c)}else this.logWarn("isc.Page.loadStylesheet('"+a+"') called after page load.  Stylesheet not loaded.");else if(this.isXHTML()){a=
this.getDocument();c=a.documentElement.firstChild;a=a.createElementNS(a.documentElement.namespaceURI,"link");a.rel="stylesheet";a.type="text/css";a.href=d;c.appendChild(a);this.logWarn("added stylesheet DOM style")}else b.document.write(e)},isc.A.resizeTo=function(a,b){window.resizeTo(a,b)},isc.A.moveTo=function(a,b){window.moveTo(a,b)},isc.A.scrollTo=function(a,b){window.scroll(a,b)},isc.A.getOrientation=function(){if(window.orientation!=null)return window.orientation==0||window.orientation==180?
"portrait":"landscape";return this.getWidth()>this.getHeight()?"landscape":"portrait"},isc.A.updateViewport=function(a,b,c,d){var e=[];if(a!=null){if(isc.isA.Number(a))a=a.toFixed(2);e[e.length]="initial-scale="+a}if(b!=null)e[e.length]="width="+b;if(c!=null)e[e.length]="height="+c;if(d!=null){e[e.length]="user-scalable="+(d==false?"no":"yes");if(d==false&&a!=null)e[e.length]="minimum-scale="+a+", maximum-scale="+a}e=e.join(", ");a=document.getElementsByTagName("meta");var f;for(b=a.length-1;b>=0;b--)if(a[b].name==
"viewport"){f=a[b];f.parentNode.removeChild(f);f=null}if(f!=null)f.content=e;else{f=document.createElement("meta");f.name="viewport";f.content=e;document.getElementsByTagName("head")[0].appendChild(f)}},isc.A.getScrollWidth=function(a){a=a||document;if(a==null||a.body==null)return 500;if(isc.Browser.isIE&&isc.Browser.version>=6)return Math.max(a.body.scrollWidth,a.documentElement.clientWidth);return a.body.scrollWidth},isc.A.getScreenWidth=function(){return screen.width},isc.A.getScreenHeight=function(){return screen.height},
isc.A.getWindowRect=function(a){a||(a=window);return{left:isc.Browser.isIE||isc.Browser.isOpera?a.screenLeft:a.screenX,top:isc.Browser.isIE||isc.Browser.isOpera?a.screenTop:a.screenY,width:isc.Page.getWidth(a),height:isc.Page.getHeight(a)}},isc.A.setUnloadMessage=function(a){window.onbeforeunload=a==null?null:function(){return a}},isc.A.goBack=function(){history.length==0&&window.opener?window.close():history.back()},isc.A.print=function(a){a||(a=window);if(a.print)a.print();else{a=a.document;if(!a||
!a.body)this.logError("isc.Page.print() called on a window that doesn't have a document.body defined.  Exiting.");else if(isc.Browser.isWin){a.body.insertAdjacentHTML("beforeEnd",'<OBJECT ID="printControl" WIDTH=0 HEIGHT=0 CLASSID="CLSID:8856F961-340A-11D0-A96B-00C04FD705A2"></OBJECT>');if(a=a.all.printControl){a.ExecWB(6,1);a.outerHTML=""}else this.logError("isc.Page.print() couldn't create or find print control.  Exiting.")}else alert("Choose 'Print...' from the File menu to print this page.")}},
isc.A.observe=function(a,b,c){return isc.Class.create().observe(a,b,c)},isc.A.waitFor=function(a,b,c,d,e){var f=isc.Class.create({$545:a,$546:b,$547:c,_fired:function(g){this.$59i&&isc.Timer.clear(this.$59i);this.ignore(this.$545,this.$546);this.fireCallback(this.$547,"observed",[g]);this.destroy()},$59j:function(){this.ignore(this.$545,this.$546);this.fireCallback(this.$59k);this.destroy()}});isc.ClassFactory.addGlobalID(f);(a=f.observe(a,b,f.getID()+"._fired(observed)"))||f.destroy();if(d&&e){f.$59k=
e;f.$59i=isc.Timer.setTimeout(function(){f.$59j()},d)}return a},isc.A.waitForMultiple=function(a,b,c,d){var e=true,f=isc.Class.create({$59l:a,$59m:[],$547:b,$59n:function(h){this.$59m.remove(h);if(this.$59m.isEmpty()){this.$59i&&isc.Timer.clear(this.$59i);this.fireCallback(this.$547);this.destroy()}},$59j:function(){for(var h=this.$59m,i=0;i<h.length;i++){h[i].ignore(h[i].$545,h[i].$546);h[i].destroy()}this.fireCallback(this.$59k);this.destroy()}});for(b=0;b<a.length;b++){var g=isc.Class.create({$545:a[b].object,
$546:a[b].method,$59o:f,_fired:function(){this.ignore(this.$545,this.$546);this.$59o.$59n(this);this.destroy()}});isc.ClassFactory.addGlobalID(g);if(g.observe(a[b].object,a[b].method,g.getID()+"._fired(observed)"))f.$59m.add(g);else{g.destroy();e=false}}if(c&&d){f.$59k=d;f.$59i=isc.Timer.setTimeout(function(){f.$59j()},c)}return e},isc.A.checkBrowserAndRedirect=function(a){if(!isc.Browser.isSupported){isc.Log&&isc.Log.logWarn("Unsupported browser detected - userAgent:"+navigator.userAgent);if(this.unsupportedBrowserAction!=
"continue")if(!(this.unsupportedBrowserAction=="confirm"&&confirm(this.getUnsupportedBrowserPromptString()))){if(a==null)a=isc.Page.defaultUnsupportedBrowserURL;window.location.replace(isc.Page.getURL(a))}}},isc.A.getUnsupportedBrowserPromptString=function(){return"This page uses the Isomorphic SmartClient web presentation layer (Version"+isc.version+" - "+isc.buildDate+"). The web browser you are using is not supported by this version of SmartClient and you may encounter errors on this page. Would you like to continue anyway?\n\n(Reported userAgent string for this browser:"+
navigator.userAgent+")"});isc.B._maxIndex=isc.C+50;if(isc.Page.isXHTML())isc.nbsp=isc.xnbsp;isc.Page.setDirectories();if(isc.Browser.isMoz){isc.Page.getWidth(null,true);isc.Page.getHeight(null,true)}isc.addGlobal("Params",function(a){a||(a=window);a=isc.isA.String(a)?a:a.location.href;var b=a.indexOf("?"),c=a.indexOf("#");if(c<0||c<b)c=a.length;if(b!=-1){a=a.substring(b+1,c).split("&");b=0;for(var d;b<a.length;b++)if(c=a[b]){d=c.indexOf("=");this[c.substring(0,d)]=unescape(c.substring(d+1))}}});isc.params=
new isc.Params;isc.getParams=function(a){return new isc.Params(a)};isc.ClassFactory.defineClass("Comm");isc.A=isc.Comm;isc.A.sendMethod="POST";isc.A.$hz=0;isc.A=isc.Comm;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.xmlHttpConstructors=["MSXML2.XMLHTTP","Microsoft.XMLHTTP","MSXML.XMLHTTP","MSXML3.XMLHTTP"];isc.A.$50c=[];isc.B.push(isc.A.$h0=function(a,b){isc.EH.$h1("XRP");isc.Class.fireCallback(b,"xmlHttpRequest",[a],null,true);isc.EH.$h2()},isc.A.$h3=
function(){return function(){var a=arguments.callee.request;if(a)if(a.readyState==4){arguments.callee.request=null;isc.Timer.setTimeout({target:isc.Comm,methodName:"$h0",args:[a,arguments.callee.callback]},0)}}},isc.A.createXMLHttpRequest=function(){if(isc.Browser.isIE){var a;if(this.preferNativeXMLHttpRequest)(a=this.getNativeRequest())||(a=this.getActiveXRequest());else(a=this.getActiveXRequest())||(a=this.getNativeRequest());a||isc.rpc.logWarn("Couldn't create XMLHttpRequest");return a}else return new XMLHttpRequest},
isc.A.getNativeRequest=function(){var a;if(isc.Browser.version>=7){isc.rpc.logDebug("Using native XMLHttpRequest");a=new XMLHttpRequest}return a},isc.A.getActiveXRequest=function(){var a;if(this.$h4)a=new ActiveXObject(this.$h4);else for(var b=0;b<this.xmlHttpConstructors.length;b++)try{var c=this.xmlHttpConstructors[b];if(a=new ActiveXObject(c)){this.$h4=c;break}}catch(d){}a&&isc.rpc.logDebug("Using ActiveX XMLHttpRequest via constructor: "+this.$h4);return a},isc.A.sendScriptInclude=function(a){var b=
a.URL,c=a.fields,d=a.callbackParam,e=a.transaction;a="_scriptIncludeReply_"+e.transactionNum;this[a]=function(){var g=arguments.length==1?arguments[0]:[];if(arguments.length>1)for(var h=0;h<arguments.length;h++)g[h]=arguments[h];isc.Comm.performScriptIncludeReply(e.transactionNum,g)};var f={};f[d?d:"callback"]="isc.Comm."+a;b=isc.rpc.addParamsToURL(b,c);b=isc.rpc.addParamsToURL(b,f);if(e)e.mergedActionURL=b;isc.rpc.logInfo("scriptInclude call to: "+b);this.$50c[e.transactionNum]=e.callback;d=this.getDocument();
c=this.getDocumentBody();d=d.createElement("script");d.src=b;c.appendChild(d)},isc.A.performScriptIncludeReply=function(a,b){delete this["_scriptIncludeReply_"+a];var c=this.$50c[a];delete this.$50c[a];this.logDebug("scriptInclude reply for transactionNum: "+a+", data: "+this.echoLeaf(b),"xmlBinding");this.fireCallback(c,"transactionNum,results,wd",[a,b])},isc.A.sendXmlHttpRequest=function(a){var b=a.URL,c=a.fields,d=a.httpMethod,e=a.contentType,f=a.httpHeaders,g=a.data,h=a.transaction,i=a.blocking!=
null?a.blocking:false;this.$50c[h.transactionNum]=h.callback;var j="isc.Comm.performXmlTransactionReply("+h.transactionNum+", xmlHttpRequest)";d||(d="POST");var k=this.createXMLHttpRequest(),l;if(isc.Browser.isIE){l=this.$h3();l.request=k;l.callback=j}else l=function(){k.readyState==4&&isc.Comm.$h0(k,j)};k.onreadystatechange=l;if(isc.rpc.logIsDebugEnabled())this.lastXmlHttpRequest=k;if(d=="POST"||d=="PUT"){if(g){e=e||"text/xml";b=isc.rpc.addParamsToURL(b,c)}else{e=e||"application/x-www-form-urlencoded; charset=UTF-8";
g=isc.SB.create();a=true;for(var m in c){a||g.append("&");g.append(isc.rpc.encodeParameter(m,c[m]));a=false}g=g.toString()}isc.rpc.logIsDebugEnabled()&&isc.rpc.logDebug("XMLHttpRequest POST to "+b+" contentType: "+e+" with body --\>"+decodeURIComponent(g)+"<--");k.open(d,b,!i);k.setRequestHeader("Content-Type",e);this.$h5(k,f);if(h){h.xhrHeaders=f;h.xhrData=g}if(g!=null&&!isc.isA.String(g)){this.logWarn("Non-string data object passed to sendXML as request.data:"+this.echo(g)+" attempting to convert to a string.");
g=g.toString?g.toString():""+g}k.send(g)}else{e=isc.rpc.addParamsToURL(b,c);k.open(d,e,!i);a.bypassCache&&k.setRequestHeader("If-Modified-Since","Thu, 01 Jan 1970 00:00:00 GMT");this.$h5(k,f);isc.rpc.logIsDebugEnabled()&&isc.rpc.logDebug("XMLHttpRequest GET from "+b+" with fields: "+isc.Log.echoAll(c)+" full URL string: "+e);k.send(null)}return k},isc.A.performXmlTransactionReply=function(a,b){var c=this.$50c[a];delete this.$50c[a];this.fireCallback(c,"transactionNum,results,wd",[a,b])},isc.A.$h5=
function(a,b){if(b!=null)for(var c in b){var d=b[c];d!=null&&a.setRequestHeader(c,d)}});isc.B._maxIndex=isc.C+10;isc.ClassFactory.defineClass("Timer");isc.A=isc.Timer;isc.A.$ii=null;isc.A.listEvent={action:null,iterationInterval:null,iterationsRemaining:0,$ij:null,$ik:null};isc.A.MSEC=1;isc.A.SEC=1E3;isc.A.MIN=6E4;isc.A.HOUR=36E5;isc.A.DEFAULT_TIMEOUT_LENGTH=100;isc.A.$il=null;isc.A=isc.Timer;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$im=["isc.Timer.$in('",
null,"')"];isc.A.$io=0;isc.A.$ip={};isc.A.$iq="TMR";isc.A.$612=5E3;isc.B.push(isc.A.setTimeout=function(a,b,c){if(a!=null){if(a.action!=null){b=a.delay;c=a.units;a=a.action}if(c==null)c=isc.Timer.MSEC;if(b==null)b=isc.Timer.DEFAULT_TIMEOUT_LENGTH;b*=c;c="$ir"+this.$io++;this.$im[1]=c;this[c]=a;if(this.logIsDebugEnabled("traceTimers"))a.timerTrace=this.getStackTrace(null,1,null,true);a=this.$im.join(isc.emptyString);b=setTimeout(a,b);this.$ip[b]=c;return b}},isc.A.$in=function(a){if(isc.$611!=null){this.logIsInfoEnabled()&&
this.logInfo("timer ID:"+a+" fired during eval. Delaying until this thread completes");if(!this.$613)this.$613=isc.timeStamp();if(isc.timeStamp()-this.$613>this.$612){this.logWarn("timer ID:"+a+" fired during eval thread lasting more than "+this.$612+"ms. Thread may have caused an error and failed to complete. Allowing delayed action to fire.");delete isc.$611}else{this.$im[1]=a;var b=this.$im.join(isc.emptyString);b=setTimeout(b,0);if(!this.$614)this.$614={};this.$614[a]=b;return}}delete this.$613;
b=this[a];delete this[a];var c=this.$ip,d;for(d in c)if(c[d]=a){delete c[d];break}if(c=this.$614)for(d in c)if(c[d]=a){delete c[d];break}if(b!=null){isc.EH.$h1(this.$iq);arguments.timerTrace=b.timerTrace;this.fireCallback(b,null,null,null,true);isc.EH.$h2()}},isc.A.clear=function(a){if(isc.isAn.Array(a))for(var b=0;b<a.length;b++)this.clear(a[b]);else{b=this.$ip[a];delete this[b];delete this.$ip[a];if(this.$614&&this.$614[b]){a=this.$614[b];delete this.$614[b]}clearTimeout(a)}return null},isc.A.clearTimeout=
function(a){return this.clear(a)});isc.B._maxIndex=isc.C+4;isc.A=isc.Page;isc.A.$is={};isc.A.$it=0;isc.A.FIRE_ONCE="once";isc.A.$iu={};isc.A=isc.Page;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$cp="ID";isc.B.push(isc.A.setEvent=function(a,b,c,d){if(isc.isA.String(b))b=a==isc.EH.LOAD||a==isc.EH.IDLE||a==isc.EH.RESIZE||a==isc.EH.ORIENTATION_CHANGE?new Function("target,eventInfo",b):isc.Func.expressionToFunction("target,eventInfo",b);if(this.logIsDebugEnabled())this.logDebug("setEvent("+
a+"): action => "+(isc.isA.Function(b)?isc.Func.getShortBody(b):b));var e=isc.Page.$it++;b={action:b,functionName:d,fireStyle:c,ID:e};c=this.$is;isc.isAn.Array(c[a])||(c[a]=[]);c[a].add(b);a==isc.EH.IDLE&&isc.EventHandler.startIdleTimer();return e},isc.A.clearEvent=function(a,b){if(b==null)this.$is[a]=[];else if(this.$iv==a){var c=this.$is[a],d=isc.isA.Array(c)?c.findIndex(this.$cp,b):-1;if(d!=-1)c[d]=null}else isc.isA.Array(this.$is[a])&&this.$is[a].removeWhere(this.$cp,b)},isc.A.$iw=function(a){var b=
this.$ix=this.$ix||{};b[a]||(b[a]="page"+a.charAt(0).toUpperCase()+a.substring(1));return b[a]},isc.A.handleEvent=function(a,b,c){b==isc.EH.UNLOAD&&isc.Canvas.$iy();var d=isc.Page.$is[b];if(!isc.isAn.Array(d)||d.length==0)return true;var e=this.$iw(b),f=true;this.$iv=b;for(var g=0,h=d.length;f&&g<h;g++){var i=d[g];if(i){if(i.fireStyle==isc.Page.FIRE_ONCE)d[g]=null;this.logIsDebugEnabled()&&this.logDebug("handleEvent("+b+"): firing action => "+isc.Func.getShortBody(i.action));if(isc.isA.Function(i.action))f=
i.action(a,c)!=false;else{var j=i.action;if(!j||j.destroyed)d[g]=null;else{i=i.functionName||e;if(isc.isA.Function(j[i]))f=j[i](a,c)!=false}}}}this.$iv=null;this.$is[b].removeEmpty();return f},isc.A.actionsArePendingForEvent=function(a){return isc.isAn.Array(this.$is[a])&&this.$is[a].length!=0},isc.A.registerKey=function(a,b,c){if(!(a==null||b==null)){var d=a,e,f,g,h;if(isc.isAn.Object(a)){d=a.keyName;e=a.ctrlKey;f=a.shiftKey;g=a.altKey;h=a.metaKey}if(d.length==1)d=d.toUpperCase();var i=false,j;for(j in isc.EH.$iz)if(isc.EH.$iz[j]==
d){i=true;break}if(i){a=this.$iu;a[d]||(a[d]=[]);a[d].add({target:c,action:b,ctrlKey:e,shiftKey:f,altKey:g,metaKey:h})}else this.logWarn("Page.registerKey() passed unrecognized key name '"+a+"'. Not registering","events")}},isc.A.unregisterKey=function(a,b){if(!this.$iu[a]){isc.Log.logInfo("Page.unregisterKey(): No events registered for key "+isc.Log.echo(a)+".","events");return false}this.$iu[a].removeWhere("target",b)},isc.A.handleKeyPress=function(){var a=isc.EH,b=a.getKey(),c=this.$iu;if(!c[b])return true;
c=c[b];for(var d=c.duplicate(),e=d.length,f=true,g=0;g<e;g++){var h=d[g];if(c.contains(h))if(!(h.ctrlKey!=null&&h.ctrlKey!=a.ctrlKeyDown()))if(!(h.altKey!=null&&h.altKey!=a.altKeyDown()))if(!(h.shiftKey!=null&&h.shiftKey!=a.shiftKeyDown()))if(!(h.metaKey!=null&&h.metaKey!=a.metaKeyDown())){h.action!=null&&!isc.isA.Function(h.action)&&isc.Func.replaceWithMethod(h,"action","key,target");f=h.action(b,h.target)!=false&&f}}return f});isc.B._maxIndex=isc.C+8;isc.ClassFactory.defineClass("EventHandler");
isc.EH=isc.Event=isc.EventHandler;isc.A=isc.EventHandler;isc.A.lastEvent={};isc.A.$i0=[];isc.A.$i1=[];isc.A.passThroughEvents=true;isc.A.maskNativeTargets=true;isc.A.STILL_DOWN_DELAY=100;isc.A.DOUBLE_CLICK_DELAY=500;isc.A.IDLE_DELAY=10;isc.A.STOP_BUBBLING="***STOP***";isc.A.ALL_EDGES=["T","L","B","R","TL","TR","BL","BR"];isc.A.eventTypes={MOUSE_DOWN:"mouseDown",RIGHT_MOUSE_DOWN:"rightMouseDown",MOUSE_MOVE:"mouseMove",MOUSE_UP:"mouseUp",SHOW_CONTEXT_MENU:"showContextMenu",CLICK:"click",DOUBLE_CLICK:"doubleClick",
MOUSE_OUT:"mouseOut",MOUSE_STILL_DOWN:"mouseStillDown",MOUSE_OVER:"mouseOver",TOUCH_START:"touchStart",TOUCH_MOVE:"touchMove",TOUCH_END:"touchEnd",LONG_TOUCH:"longTouch",SET_DRAG_TRACKER:"setDragTracker",GET_DRAG_DATA:"getDragData",RELEASE_DRAG_DATA:"releaseDragData",DRAG_START:"dragStart",DRAG_STOP:"dragStop",DRAG_MOVE:"dragMove",DRAG_OUT:"dragOut",DRAG_REPOSITION_START:"dragRepositionStart",DRAG_REPOSITION_MOVE:"dragRepositionMove",DRAG_REPOSITION_STOP:"dragRepositionStop",DRAG_RESIZE_START:"dragResizeStart",
DRAG_RESIZE_MOVE:"dragResizeMove",DRAG_RESIZE_STOP:"dragResizeStop",DROP_OVER:"dropOver",DROP_MOVE:"dropMove",DROP_OUT:"dropOut",DROP:"drop",KEY_DOWN:"keyDown",KEY_UP:"keyUp",KEY_PRESS:"keyPress",MOUSE_WHEEL:"mouseWheel",SELECT_START:"selectStart",SELECTION_CHANGE:"selectionChange",FOCUS_IN:"focusIn",FOCUS_OUT:"focusOut",IDLE:"idle",LOAD:"load",UNLOAD:"unload",RESIZE:"resize",ORIENTATION_CHANGE:"orientationChange"};isc.A.$i2={mousemove:"mouseMove",mousedown:"mouseDown",mouseup:"mouseUp",mousewheel:"mouseWheel",
selectionchange:"selectionChange",DOMMouseScroll:"mouseWheel",mouseMove:"mouseMove",mouseDown:"mouseDown",mouseUp:"mouseUp",mouseWheel:"mouseWheel",touchstart:"touchStart",touchmove:"touchMove",touchend:"touchEnd",touchStart:"touchStart",touchMove:"touchMove",touchEnd:"touchEnd",selectionstart:"selectionStart",selectionStart:"selectionStart",selectionchange:"selectionChange",selectionChange:"selectionChange"};isc.A.$i3="event,eventInfo";isc.A.DRAG_RESIZE="dragResize";isc.A.DRAG_REPOSITION="dragReposition";
isc.A.DRAG_SCROLL="dragScroll";isc.A.DRAG_SELECT="dragSelect";isc.A.DRAG="drag";isc.A.NONE="none";isc.A.TRACKER="tracker";isc.A.TARGET="target";isc.A.OUTLINE="outline";isc.A.INTERSECT_WITH_MOUSE="mouse";isc.A.INTERSECT_WITH_RECT="rect";isc.A.dragTargetShadowDepth=10;isc.A.$i4={A:true,AREA:true};isc.A.$i5={INPUT:true,TEXTAREA:true,SELECT:true,OPTION:true};isc.A.$i6="LABEL";isc.A.$i7={keydown:"keyDown",keyup:"keyUp",keypress:"keyPress"};isc.A.$i8={Backspace:8,Tab:9,Shift:16,Ctrl:17,Alt:18,Pause_Break:19,
Caps_Lock:20,Page_Up:33,Page_Down:34,End:35,Home:36,Arrow_Left:37,Arrow_Up:38,Arrow_Right:39,Arrow_Down:40,Insert:45,Delete:46,Meta:91,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,Num_Lock:144,Scroll_Lock:145};isc.A.$iz={"0":"$i9","8":"Backspace","9":"Tab","13":"Enter","16":"Shift","17":"Ctrl","18":"Alt","19":"Pause_Break","20":"Caps_Lock","27":"Escape","32":"Space","33":"Page_Up","34":"Page_Down","35":"End","36":"Home","37":"Arrow_Left","38":"Arrow_Up","39":"Arrow_Right",
"40":"Arrow_Down","44":"Print_Screen","45":"Insert","46":"Delete","48":"0","49":"1","50":"2","51":"3","52":"4","53":"5","54":"6","55":"7","56":"8","57":"9","58":";","59":";","60":",","61":"=","62":"/","65":"A","66":"B","67":"C","68":"D","69":"E","70":"F","71":"G","72":"H","73":"I","74":"J","75":"K","76":"L","77":"M","78":"N","79":"O","80":"P","81":"Q","82":"R","83":"S","84":"T","85":"U","86":"V","87":"W","88":"X","89":"Y","90":"Z","91":"Meta","92":"Meta","93":"Menu","96":"0","97":"1","98":"2","99":"3",
"100":"4","101":"5","102":"6","103":"7","104":"8","105":"9","106":"*","107":"+","109":"-","110":".","111":"/","112":"f1","113":"f2","114":"f3","115":"f4","116":"f5","117":"f6","118":"f7","119":"f8","120":"f9","121":"f10","122":"f11","123":"f12","144":"Num_Lock","145":"Scroll_Lock","160":"Shift","161":"Shift","162":"Ctrl","163":"Ctrl","164":"Alt","165":"Alt","186":";","187":"=","188":",","189":"-","190":".","191":"/","192":"`","219":"[","220":"\\","221":"]","222":"'"};isc.A.$ja={"8":"Backspace","9":"Tab",
"13":"Enter","27":"Escape","32":"Space","33":"1","34":"'","35":"3","36":"4","37":"5","38":"7","39":"'","40":"9","41":"0","42":"8","43":"=","44":",","45":"-","46":".","47":"/","48":"0","49":"1","50":"2","51":"3","52":"4","53":"5","54":"6","55":"7","56":"8","57":"9","58":";","59":";","60":",","61":"=","62":".","63":"/","64":"2","65":"A","66":"B","67":"C","68":"D","69":"E","70":"F","71":"G","72":"H","73":"I","74":"J","75":"K","76":"L","77":"M","78":"N","79":"O","80":"P","81":"Q","82":"R","83":"S","84":"T",
"85":"U","86":"V","87":"W","88":"X","89":"Y","90":"Z","91":"[","92":"\\","93":"]","94":"6","95":"-","96":"`","97":"A","98":"B","99":"C","100":"D","101":"E","102":"F","103":"G","104":"H","105":"I","106":"J","107":"K","108":"L","109":"M","110":"N","111":"O","112":"P","113":"Q","114":"R","115":"S","116":"T","117":"U","118":"V","119":"W","120":"X","121":"Y","122":"Z","123":"[","124":"\\","125":"]","126":"`"};isc.A.$jb={"3":"Enter","25":"Tab","63232":"Arrow_Up","63233":"Arrow_Down","63234":"Arrow_Left",
"63235":"Arrow_Right","64236":"f1","64237":"f2","64238":"f3","64239":"f4","64240":"f5","64241":"f6","64242":"f7","64243":"f8","64244":"f9","64245":"f10","64246":"f11","63247":"f12","63273":"Home","63275":"End","63276":"Page_Up","63277":"Page_Down"};isc.A.$jc={};isc.A.dynamicBackMask=false;isc.A.alwaysBackMask=false;isc.A.dragTrackerDefaults={ID:"isc_dragTracker",width:10,height:10,offsetX:-10,offsetY:-10,autoDraw:false,visibility:"hidden",overflow:"visible",cursor:"arrow"};isc.EventHandler.addClassProperties(isc.EventHandler.eventTypes);
isc.A=isc.EventHandler;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$je="f10";isc.A.$20w="Escape";isc.A.$jf="Tab";isc.A.$70a={keydown:true,keyup:true,keypress:true};isc.A.$jg="IMG";isc.A.$jh="progid:DXImageTransform.Microsoft.AlphaImageLoader";isc.A.longTouchDelay=500;isc.A.$ji={};isc.A.$jj="BODY";isc.A.$jk="HTML";isc.A.$jl="eventProxy";isc.A.$jm="[object Text]";isc.A.$jn={autoDraw:false,$jo:true,$jp:false,overflow:"hidden",visibility:"hidden",$jq:false,
getTarget:function(){return this.$jr},show:function(){this.moveAbove(this.masterElement);return this.Super("show",arguments)}};isc.A.$js=isc.Browser.isIE?isc.undef:true;isc.A.$jt="handleNativeEvents";isc.A.$49r="APPLET";isc.A.$ju={mouseMove:true,mouseOver:true,mouseOut:true};isc.A.$41z="selectionChange";isc.A.currentOrientation=isc.Page.getOrientation();isc.A.$jv="$jw";isc.A.$jx=0;isc.A.$jy={load:"LOD",mousedown:"MDN",mouseup:"MUP",mousemove:"MMV",mouseout:"MOU",touchstart:"TDN",touchmove:"TMVP",
touchend:"TUP",contextmenu:"CXT",keypress:"KPR",keydown:"KDN",keyup:"KUP",resize:"RSZ"};isc.A.$jz="nativeEvents";isc.A.$j0="event";isc.A.$j1=(isc.Browser.isMoz?"if(event.getPreventDefault&&event.getPreventDefault())return;":isc.Browser.isSafari?"if(event.returnValue==false)return;":"")+"var returnVal=arguments.callee.$ch.isc.EH.dispatch(arguments.callee.$j2,event);"+(!isc.Browser.isIE&&isc.Browser.isDOM?"if(returnVal==false)event.preventDefault();else if(returnVal==isc.EH.STOP_BUBBLING)event.stopPropogation();":
"")+"return returnVal;";isc.A.$j3={};isc.A.$j4={onmousedown:"mousedown",onmouseup:"mouseup",onclick:"click",ondblclick:"dblclick",oncontextmenu:"contextmenu",onmousewheel:"mousewheel",onmouseover:"mouseover",onmouseout:"mouseout",onmousemove:"mousemove",onresize:"resize",onload:"load",onunload:"unload",onselecttext:"selecttext",onselectionchanged:"selectionchanged",onkeydown:"keydown",onkeyup:"keyup",onkeypress:"keypress"};isc.A.$649={};isc.A.getMouseEventProperties=isc.Browser.isIE?function(a){var b=
this.lastEvent;if(!a)a=this.getWindow().event;b.DOMevent=a;b.eventType=this.$i2[a.type];b.y=parseInt(a.clientY)+this.ns.Page.getScrollTop();b.x=parseInt(a.clientX);if(isc.Page.isRTL()){var c=this.ns.Page.getScrollLeft();if(c>0){var d=this.ns.Page.getScrollWidth()-this.ns.Page.getWidth();b.x-=d-c}b.x-=15}else b.x+=this.ns.Page.getScrollLeft();b.nativeTarget=a.srcElement;b.target=this.getEventTargetCanvas(a,b.nativeTarget);c=a.wheelDelta;b.wheelDelta=c!=null?-Math.round(c/120):null;b.screenX=a.screenX;
b.screenY=a.screenY;b.buttonNum=a.button;b.shiftKey=a.shiftKey==true;b.ctrlKey=a.ctrlKey==true;b.altKey=a.altKey==true;b.metaKey=a.metaKey==true;return b}:function(a){var b=this.lastEvent;b.DOMevent=a;b.eventType=this.$i2[a.type];if(isc.Browser.isMobileWebkit){if(isc.startsWith(b.eventType,"touch"))if(b.eventType!=isc.EH.TOUCH_END)if(a.touches!=null&&a.touches[0]!=null){var c=a.touches[0];b.clientX=c.clientX;b.clientY=c.clientY;b.screenX=c.screenX;b.screenY=c.screenY;b.x=c.pageX;b.y=c.pageY}}else{b.screenX=
a.screenX;b.screenY=a.screenY;if(isc.Browser.isSafari){c=isc.Browser.safariVersion>=523.12;b.x=parseInt(a.x);b.y=parseInt(a.y);if(c){b.x+=isc.Page.getScrollLeft();b.y+=isc.Page.getScrollTop()}}if(b.eventType!=this.MOUSE_WHEEL){c=true;b.x=parseInt(a.clientX)+(c?isc.Page.getScrollLeft():0);b.y=parseInt(a.clientY)+(c?isc.Page.getScrollTop():0)}}b.nativeTarget=a.target;b.$j5=null;b.target=this.getEventTargetCanvas(a,b.nativeTarget);if(b.eventType==this.MOUSE_WHEEL){c=a.wheelDelta;var d=a.detail;if(d==
0||d==null&&c!=null){b.wheelDelta=-Math.round(c/120);if(!isc.isA.Number(b.wheelDelta))b.wheelDelta=null}else if(isc.Canvas.useNativeWheelDelta&&a.detail==a.SCROLL_PAGE_UP)b.wheelDelta=-Math.floor(b.target.height/isc.Canvas.scrollWheelDelta);else if(isc.Canvas.useNativeWheelDelta&&a.detail==a.SCROLL_PAGE_DOWN)b.wheelDelta=Math.floor(b.target.height/isc.Canvas.scrollWheelDelta);else{c=a.detail/3;isc.isA.Number(c)||(c=0);if(c>15||c<-15)c=c>0?1:-1;b.wheelDelta=c}}else b.wheelDelta=null;if(b.eventType==
isc.EH.MOUSE_MOVE||b.eventType==isc.EH.TOUCH_MOVE){if(!this.$j6)b.buttonNum=0}else b.buttonNum=isc.Browser.isTouch?a.targetTouches&&a.targetTouches.length>1?2:1:a.which==1||isc.Browser.isSafari&&a.which==65536?1:2;b.shiftKey=a.shiftKey==true;b.ctrlKey=a.ctrlKey==true;b.altKey=a.altKey==true;b.metaKey=a.metaKey==true;return b};isc.A.$688="f1";isc.A.$689="help";isc.A.HARD="hard";isc.A.SOFT="soft";isc.A.$j7=0;isc.A.clickMaskRegistry=[];isc.A.$cp="ID";isc.B.push(isc.A.handleSyntheticEvent=function(a){var b=
a.target;a.$49s=true;if(b){a.clientX+=b.getPageLeft();a.clientY+=b.getPageTop();if(isc.Browser.isIE){a.clientX+=b.getLeftMargin()+b.getLeftBorderSize()+b.getLeftPadding()+2;a.clientY+=b.getTopMargin()+b.getRightBorderSize()+b.getTopPadding()+2}switch(a.type){case "mouseup":this.handleMouseUp(a);break;case "mousedown":this.handleMouseDown(a);break;case "mousemove":this.handleMouseMove(a)}}},isc.A.handleEvent=function(a,b,c){this.$77e=b;var d=isc.EH;a=isc.Page.handleEvent(a,b,c)==false?false:d.targetIsEnabled(a)&&
d.bubbleEvent(a,b,c)==false?false:true;delete this.$77e;return a},isc.A.handleLoad=function(){isc.SA_Page&&isc.SA_Page.$o();if(isc.Browser.isMoz)try{return isc.Page.handleEvent(null,isc.EH.LOAD)!=false}catch(a){isc.Log.$am(a);throw a;}else{isc.EH.$j8()&&document&&document.body&&document.body.addEventListener("unload",isc.EH.handleUnload,false);return isc.Page.handleEvent(null,isc.EH.LOAD)!=false}},isc.A.handleUnload=function(){var a=isc.Page.handleEvent(null,isc.EH.UNLOAD)!=false;a==true&&this.releaseEvents();
return a},isc.A.$j9=function(a,b){if(!isc.Page.isLoaded())return false;var c=isc.EH,d=c.lastEvent;if(!a)a=c.getWindow().event;c.getKeyEventProperties(a);if(!(isc.Browser.isIE&&d.keyName==this.$688&&!b)){var e=false,f=true;if(c.$ka==d.keyName){f=c.handleKeyPress();e=true}else f=c.handleKeyDown(a);c.$ka=d.keyName;if(f!=false&&(isc.Browser.isIE&&!e&&c.$i8[d.keyName]!=null||isc.Browser.isMoz&&d.keyName==this.$je&&this.shiftKeyDown()))f=c.handleKeyPress(a);f==false&&this.cancelKeyEvent(a);return f}},isc.A.handleKeyDown=
function(a,b){var c=isc.EH,d=c.lastEvent,e,f=c.eventHandledNatively(d.eventType,d.nativeKeyTarget);if(f)e=c.$js;b!=null&&isc.addProperties(d,b);if(!f){f=[d,d.target,d.keyName];var g=d.keyTarget;if(g==null)g=this.getEventTargetCanvas(a,d.nativeKeyTarget);if(c.targetIsEnabled(g))e=c.bubbleEvent(g,c.KEY_DOWN,f)!=false}if(e!=false&&this.clickMaskUp()&&d.keyName==this.$jf){var h;c=this.clickMaskRegistry;for(d=c.length-1;d>=0;d--)if(this.isHardMask(c[d])){h=c[d];break}if(h)e=false}return e},isc.A.$kb=function(a){if(!isc.Page.isLoaded())return false;
var b=isc.EH;if(!a)a=b.getWindow().event;b.getKeyEventProperties(a);if(b.$ka==b.lastEvent.keyName)if(b.handleKeyPress(a)==false){this.cancelKeyEvent(a);return false}return b.handleKeyUp(a)},isc.A.handleKeyUp=function(a,b){var c=isc.EH,d=c.lastEvent,e=[d,d.target,d.keyName];if(c.eventHandledNatively(d.eventType,d.nativeKeyTarget))return c.$js;var f=true;b!=null&&isc.addProperties(d,b);var g=d.keyTarget;if(g==null)g=this.getEventTargetCanvas(a,d.nativeKeyTarget);if(c.targetIsEnabled(g))f=c.bubbleEvent(g,
c.KEY_UP,e)!=false;if(!isc.Browser.isMac&&d.keyName==c.$je&&c.shiftKeyDown()&&isc.Menu&&isc.Menu.$kc&&isc.Menu.$kc.length>0)f=false;c.clearKeyEventProperties();return f},isc.A.$kd=function(a){if(!isc.Page.isLoaded())return false;var b=isc.EH,c=b.lastEvent,d=b.KEY_PRESS;if(!a)a=b.getWindow().event;b.getKeyEventProperties(a);c.eventType=d;if(!(isc.Browser.isMoz&&c.keyName==this.$je&&this.shiftKeyDown())){b=b.handleKeyPress(a);b==false&&this.cancelKeyEvent(a);return b}},isc.A.cancelKeyEvent=function(a){if(isc.Browser.isIE||
isc.Browser.isSafari)if(this.$70a[a.type]==true)try{a.keyCode=0}catch(b){}},isc.A.handleKeyPress=function(a,b){var c=isc.EH,d=c.lastEvent,e=c.KEY_PRESS;b!=null&&isc.addProperties(d,b);var f={keyName:d.keyName,characterValue:d.characterValue};d.eventType=e;c.$ka=null;if(isc.Page.handleEvent(d.keyTarget,e)==false)return false;if(c.eventHandledNatively(e,d.nativeKeyTarget)!==false){c.logDebug("keyPress handled natively");return c.$js}else c.logDebug("keyPress not handled natively");e=d.keyTarget;if(e==
null)e=this.getEventTargetCanvas(a,d.nativeKeyTarget);if(c.targetIsEnabled(e)){var g=c.bubbleEvent(e,d.eventType,f);if(g==false)return false}if(g!=c.STOP_BUBBLING&&isc.Page.handleKeyPress()==false)return false;if(this.clickMaskUp()&&d.keyName==this.$jf){var h;f=this.clickMaskRegistry;for(g=f.length-1;g>=0;g--)if(this.isHardMask(f[g])){h=f[g];break}if(h!=null){c=c.$ke;if(c!=null){this.logInfo("Telling focus canvas:"+c+" to shift focus","syntheticTabIndex");c.$kf(!this.shiftKeyDown(),h)}else if(this.shiftKeyDown()){this.logInfo("Putting focus into last widget in response to Tab keydown",
"syntheticTabIndex");this.$kg(h)}else{this.logInfo("Putting focus into first widget in response to Tab keydown","syntheticTabIndex");this.$kh(h)}return false}}if(isc.Browser.isIE&&d.keyName==isc.EH.$je&&isc.EH.shiftKeyDown()){if(h=this.handleContextMenu(a))this.$ki=true;return h}if(isc.Browser.isMoz&&isc.RPCManager&&isc.RPCManager.$410.length>0&&d.keyName==isc.EH.$20w)return false;return true},isc.A.$kh=function(a){var b=this.$kj;if(b)(!a||!this.targetIsMasked(b,a))&&!b.isDisabled()&&b.$kk()?b.focusAtEnd(true):
b.$kf(true,a)},isc.A.$kg=function(a){var b=this.$kl;if(b)(!a||!this.targetIsMasked(b,a))&&!b.isDisabled()&&b.$kk()?b.focusAtEnd():b.$kf(false,a)},isc.A.handleMouseDown=function(a,b){if(!(isc.Browser.isTouch&&!b)){var c=isc.EH;c.$km=true;var d=c.doHandleMouseDown(a,b);c.$km=false;return d}},isc.A.doHandleMouseDown=function(a,b){if(!isc.Page.isLoaded())return false;this.$j6=true;var c=b||this.getMouseEventProperties(a),d=this.$ke;if(d!=null&&d!=c.target&&!d._useNativeTabIndex&&!d.$kn&&!(isc.isA.DynamicForm!=
null&&isc.isA.DynamicForm(d)&&d.getFocusSubItem()&&d.getFocusSubItem().hasFocus))if(isc.Browser.isIE){d=this.$ke.getID();if(this.$ko==null)this.$ko=["if (",d," && ",d,".hasFocus)",d,".blur()"];else this.$ko[1]=this.$ko[3]=this.$ko[5]=d;isc.Timer.setTimeout(this.$ko.join(isc.emptyString),0)}else this.$ke.blur();this.mouseDownEvent=isc.addProperties({},c);d=c.target;var e=this.clickMaskClick(d)==false;if(e){this.$kp=true;return false}else this.$kp=false;var f=this.rightButtonDown()?this.RIGHT_MOUSE_DOWN:
this.MOUSE_DOWN;if(isc.Page.handleEvent(d,f)==false)return false;if(this.eventHandledNatively(f,c.nativeTarget))return this.$js;if(!this.targetIsEnabled(d))return false;var g;if(d&&!d.hasFocus)if((isc.Browser.isMoz&&d.canSelectText||isc.Browser.isSafari)&&d.$kn)this.focusInCanvas(d);else if(d._useNativeTabIndex)if(isc.Browser.isMoz)d.focus();else{if(isc.Browser.isIE){var h=c.nativeTarget;if(h&&h.tagName==this.$jg){h=h.style;if((h?h.filter:null).contains(this.$jh))g=d}}}else d.focus();d&&this.prepareForDragging(d);
e=this.bubbleEvent(d,f,null,e);g!=null&&g.focus();if(e==false){delete this.dragTarget;delete this.dragTargetLink}if(this.rightButtonDown()){if(!this.useSyntheticRightButtonEvents())return true;if(d&&(this.getBubbledProperty(d,"contextMenu")||this.getBubbledProperty(d,"showContextMenu")!=isc.Canvas.getInstanceProperty("showContextMenu")))return c.returnValue=false;return true}e!=false&&this.hasEventHandler(d,this.MOUSE_STILL_DOWN)&&this.$kq();return!(this.dragTarget!=null&&this.dragOperation!=this.DRAG_SELECT)&&
(!(isc.Browser.isMoz||isc.Browser.isSafari)||!!d.$kr(c))},isc.A.stillWithinMouseDownTarget=function(){var a=this.mouseDownTarget();if(!a)return false;var b=this.lastEvent,c=a==b.target;if(!c)return false;if(b.$j5!=null)return b.$j5;if(!(isc.Browser.isMoz&&a.$ks))return c;c=a.visibleAtPoint(b.x,b.y,true);if(!c&&a.$kt!=null)for(var d=0;d<a.$kt.length;d++)if(c=a.$kt[d].visibleAtPoint(b.x,b.y,true))break;return b.$j5=c},isc.A.handleMouseMove=function(a){if(!isc.Browser.isTouch){if(!isc.Page.isLoaded())return false;
var b=isc.EH;if(!(b.$km||b.$ku)){var c=b.getMouseEventProperties(a);if(isc.Browser.isMoz||isc.Browser.isIE){if(b.delayedMouseMoveTimer==null)b.delayedMouseMoveTimer=isc.Timer.setTimeout({target:b,methodName:"$kv",args:[isc.timeStamp()]},0,true);b.$kw=0;return true}var d=isc.timeStamp();a=b.$kx(a,c);b.$kw=isc.timeStamp()-d;return a}}},isc.A.$kv=function(){this.delayedMouseMoveTimer=null;this.$kx(null,this.lastEvent)},isc.A.$kx=function(a,b){this.$ky=true;var c=this.$kz(a,b);this.$ky=null;return c},
isc.A.$kz=function(a,b){var c;if(isc.Browser.isIE){var d=b.buttonNum;if(this.$j6){if(d==0){this.$j6=false;c=true}}else if(d==1&&b.eventType==this.MOUSE_MOVE){b.eventType=this.MOUSE_DOWN;this.handleMouseDown(null,b);b.eventType=this.MOUSE_MOVE}}var e=b.target;d=this.eventHandledNatively(this.MOUSE_MOVE,b.nativeTarget);if(this.$k0)this.handleMouseUp(a,true);else if(this.$k1&&c){this.logInfo("sythesizing mouseUp due to mouseUp outside window, buttonNum: "+b.buttonNum);this.handleMouseUp(a,true)}delete this.$k1;
e=this.mouseIsDown();if(isc.Browser.isMoz&&isc.Browser.geckoVersion<20100914&&e&&b.target&&b.target.$ks&&b.target!=this.mouseDownTarget()){b.nativeDraggingTarget=b.nativeTarget;b.nativeTarget=null;b.target=this.mouseDownTarget()}if(e&&this.dragTarget&&!this.dragging&&(Math.abs(b.x-this.mouseDownEvent.x)>this.dragTarget.dragStartDistance||Math.abs(b.y-this.mouseDownEvent.y)>this.dragTarget.dragStartDistance))this.handleDragStart(b);if(this.dragging)return this.handleDragMove();if(this.rightButtonDown())if(!isc.Browser.isMac||
!this.ctrlKeyDown())return true;e=e?this.stillWithinMouseDownTarget()?this.mouseDownTarget():null:b.target;if(e!=this.lastMoveTarget){if(this.logIsDebugEnabled())this.logDebug((this.lastMoveTarget?"mousing out of "+this.lastMoveTarget+"  ":"")+(e?"mousing over "+e:""));c=this.lastMoveTarget;var f,g=this.lastHoverTarget;c&&this.handleEvent(c,this.MOUSE_OUT);if(e){this.handleEvent(e,this.MOUSE_OVER);f=e.getHoverTarget(b)}if(f!=g){g&&g.stopHover();f&&f.startHover();this.lastHoverTarget=f}this.lastMoveTarget=
e}if(isc.Page.handleEvent(e,this.MOUSE_MOVE)==false)return false;if(d)return this.$js;if(!this.targetIsEnabled(e))return false;this.bubbleEvent(e,this.MOUSE_MOVE);e&&e.$k2();return true},isc.A.getNativeMouseTarget=function(a){if(!this.nativeTargetWarningLogged){this.nativeTargetWarningLogged=true;this.logWarn("getNativeMouseTarget(). This method will return the DOM element the browser reports as the target or source of the current mouse event. Please note that SmartClient cannot guarantee that the same element will be reported in all browser/platform configurations for all event types. If you wish to make use of this value, we recommend testing your use case in all target browser configurations.")}if(a==
null)a=this.lastEvent;return a.nativeTarget||a.nativeDraggingTarget},isc.A.handleNativeMouseOut=function(a){if(isc.Browser!=null){var b=isc.EH;if(!(b.$km||b.$ku)){a=a?a:b.getWindow().event;var c=false;if(c=isc.Browser.isIE?a.toElement==null:a.relatedTarget==null)b.$k1=true;if(c&&b.lastMoveTarget!=null){b.$k3(a);b.handleEvent(b.lastMoveTarget,b.MOUSE_OUT);b.lastMoveTarget=null;if(b.lastHoverTarget){b.lastHoverTarget.stopHover();delete b.lastHoverTarget}}}}},isc.A.$k3=function(a){var b=isc.EH.lastEvent;
b.nativeTarget=isc.Browser.isIE?a.toElement:a.relatedTarget;b.target=b.nativeTarget==null?null:this.getEventTargetCanvas(a,b.nativeTarget)},isc.A.$kq=function(){if(!isc.Page.isLoaded())return false;this.$k4=isc.Timer.clear(this.$k4);if(!this.mouseIsDown()||!this.mouseDownTarget())return false;if(this.bubbleEvent(this.mouseDownTarget(),this.MOUSE_STILL_DOWN)==false)return false;var a=this.mouseDownTarget();this.$k4=this.delayCall("$kq",[],this.$km?a.mouseStillDownInitialDelay:a.mouseStillDownDelay);
return true},isc.A.handleMouseUp=function(a,b){if(!(isc.Browser.isTouch&&!b)){var c=isc.EH;if(isc.Browser.isIE&&!c.$j6){c.lastEvent.eventType=c.MOUSE_DOWN;c.handleMouseDown(null,c.lastEvent)}if(!b)c.$ku=true;var d=c.$k5(a,b);c.$ku=false;if(isc.Browser.isSafari)d=true;return d}},isc.A.$k5=function(a,b){if(!isc.Page.isLoaded())return false;var c=!b?this.getMouseEventProperties(a):this.lastEvent,d=false;this.$j6=false;delete this.$k6;this.$k4=isc.Timer.clear(this.$k4);var e=this.$k7;if(e){e.focus();
this.$k7=null}e=this.$kp;this.$kp=null;var f;if(e==null)f=e=this.clickMaskClick(c.target)==false;if(e==true){this.logIsDebugEnabled()&&this.logDebug("mouseUp cancelled by clickMask");return false}e=false;if(this.dragging)e=this.handleDragStop();if(this.rightButtonDown(c)){this.useSyntheticRightButtonEvents()&&this.handleContextMenu();this.$k6=false}else if(!e)if(isc.Page.handleEvent(c.target,this.MOUSE_UP)!=false){e=true;var g=this.lastEvent.x,h=this.lastEvent.y,i=this.mouseDownTarget();d=this.eventHandledNatively(this.MOUSE_UP,
c.nativeTarget);if(!d&&this.targetIsEnabled(i))if(i.visibleAtPoint(g,h))e=this.bubbleEvent(i,this.MOUSE_UP,null,f);else if(i.containsPoint(g,h))e=this.bubbleEvent(i,this.MOUSE_OUT,null,f);if(e!=false)this.$k6=this.handleClick(c.target)}delete this.redrawnWhileDown;this.clearDragProperties();if(this.$k0)this.$k0=false;c=c.target;c=isc.isA.DynamicForm!=null&&isc.isA.DynamicForm(c);if(d&&(c||this.$k6==true))return this.$js;return c&&this.$k6==true},isc.A.clearDragProperties=function(){this.dragging=
false;delete this.dragTarget;delete this.dragTargetStartRect;delete this.dragTargetLink;delete this.dragMoveTarget;delete this.dragMoveAction;delete this.dragOperation;delete this.dragAppearance;delete this.dropTarget;delete this.lastDropTarget},isc.A.handleContextMenu=function(a){if(!isc.Page.isLoaded())return false;var b=isc.EH;b.$ku=true;a=b.$k8(a);b.$ku=false;return a},isc.A.$k8=function(a){var b=isc.Browser.isSafari||this.lastEvent.eventType==isc.EH.MOUSE_UP;if(this.$ki){delete this.$ki;return true}a&&
this.getMouseEventProperties(a);var c=this.lastEvent;a=c.target;if(!b&&!isc.Browser.isMoz){c.x=a?a.getPageLeft():0;c.y=a?a.getPageTop():0}if(isc.Browser.isSafari&&this.clickMaskClick(a)==false)return false;if(isc.Page.handleEvent(a,this.SHOW_CONTEXT_MENU)==false)return false;b=true;if(this.targetIsEnabled(a))b=this.bubbleEvent(a,this.SHOW_CONTEXT_MENU);if(b!=false){this.lastMoveTarget&&this.handleEvent(this.lastMoveTarget,this.MOUSE_OUT);delete this.lastMoveTarget}return b},isc.A.handleNativeClick=
function(){delete isc.EH.$k6},isc.A.handleClick=function(a,b){if(!isc.Page.isLoaded())return false;var c=this.lastEvent;b||(b=this.isDoubleClick(a)?this.DOUBLE_CLICK:this.CLICK);if(isc.Page.handleEvent(a,b)==false)c=false;else if(this.eventHandledNatively(b,c.nativeTarget))c=this.$js;else if(this.targetIsEnabled(a))if(this.stillWithinMouseDownTarget()){a=this.mouseDownTarget();c=this.bubbleEvent(a,b)}else c=false;else c=false;this.$k9=isc.timeStamp();return c},isc.A.isDoubleClick=function(a){a=a||
this.lastEvent.nativeTarget;var b,c;if(this.useNativeEventTime!=null?this.useNativeEventTime:isc.Browser.isMoz&&isc.Browser.isWin){b=(b=this.lastEvent.DOMevent)?b.timeStamp:null;if(b==0||!isc.isA.Number(b)){this.logDebug("Unable to derive native 'timeStamp' attribute from DOM event");b=isc.timeStamp()}c=b-this.lastClickTime<this.DOUBLE_CLICK_DELAY}else{b=isc.timeStamp();c=this.$k9-this.lastClickTime<this.DOUBLE_CLICK_DELAY?b-this.lastClickTime<this.DOUBLE_CLICK_DELAY:b-this.$k9<100}this.lastClickTime=
b;c||delete this.lastClickTarget;b=false;if(a==this.lastClickTarget)if(b=!a.noDoubleClicks)for(c=a;c.parentElement;){c=c.parentElement;if(c.noDoubleClicks){b=false;break}}this.lastClickTarget=b?null:a;return b},isc.A.targetIsEnabled=function(a){if(!a)return false;if(a.destroyed)return false;if(isc.isA.Function(a.isDisabled))return!a.isDisabled();return true},isc.A.$77p=function(a){var b=isc.EH,c=b.getMouseEventProperties(a);if(b.handleEvent(c.target,b.TOUCH_START)!==false){c.originalType=b.TOUCH_START;
c.eventType=b.MOUSE_DOWN;b.doHandleMouseDown(a,c);b.$78m!=null&&isc.Timer.clear(b.$78m);b.$78m=this.delayCall("$78n",[],b.longTouchDelay)}},isc.A.$78n=function(){!this.mouseIsDown()||!this.mouseDownTarget()||!this.stillWithinMouseDownTarget()||this.bubbleEvent(this.mouseDownTarget(),this.LONG_TOUCH)},isc.A.$77q=function(a){var b=isc.EH,c=b.getMouseEventProperties(a);if(b.handleEvent(c.target,b.TOUCH_MOVE)!==false){c.originalType=b.TOUCH_MOVE;c.eventType=b.MOUSE_MOVE;b.$kx(a,c);b.dragging&&window.event!=
null&&window.event.preventDefault()}b.$78m!=null&&isc.Timer.clear(b.$78m)},isc.A.$77r=function(a){var b=isc.EH,c=b.getMouseEventProperties(a);if(b.handleEvent(c.target,b.TOUCH_END)!==false){c.originalType=b.TOUCH_END;c.eventType=b.MOUSE_UP;b.$k5(a,true)}b.$78m!=null&&isc.Timer.clear(b.$78m)},isc.A.getFocusCanvas=function(){return this.$ke},isc.A.$la=function(a,b){if(this.logIsDebugEnabled("nativeFocus"))this.logDebug((b?"onfocus":"onblur")+" fired on: "+a+this.$lb(),"nativeFocus")},isc.A.$lb=function(){if(!isc.Browser.isIE)return isc.$ad;
var a=this.getActiveElement();if(a==null)return isc.$ad;return", activeElement: "+a.tagName},isc.A.blurFocusCanvas=function(a,b){var c=this.$lc;if(b){this.$h1("BLR");this.$la(a);isc.EH.$ld=null}this.$le(a,b);if(b)this.$lc=c},isc.A.$le=function(a){if(this.$ke){var b=this.$ke;if(!(a!=null&&b!=a)){this.$ke=null;b.$lf(false)}}},isc.A.focusInCanvas=function(a,b){var c=this.$lc;if(b){this.$h1("FCS");this.$la(a,true);isc.EH.$lg=null}if(isc.Browser.isMoz)if(b&&this.lastEvent.eventType!=this.KEY_DOWN&&this.lastEvent.eventType!=
this.KEY_PRESS&&this.lastEvent.eventType!=this.KEY_UP)a&&a.showFocusOutline&&a.setShowFocusOutline(false,true);else a&&a.showFocusOutline&&a.setShowFocusOutline(true,true);this._focusInCanvas(a,b);if(b)this.$lc=c},isc.A._focusInCanvas=function(a,b){if(!(!a||a.hasFocus||!a.$kk()||a.isDisabled()))if(this.$ke!=a){this.checkMaskedFocus(a);b&&isc.Browser.isMoz&&a.parentElement&&a.parentElement.$lh(null,true);var c=this.$ke;this.$ke=a;c&&c.$lf(false);if(this.$ke==a){a.$lf(true);if(this.targetIsMasked(a)){c=
this.clickMaskRegistry.last();this.setMaskedFocusCanvas(a,c)}}}},isc.A.setMaskedFocusCanvas=function(a,b){if(b)b.$li=a},isc.A.getMaskedFocusCanvas=function(a){if(a=a==null?this.clickMaskRegistry.last():this.getClickMask(a))return a.$li},isc.A.checkMaskedFocus=function(a){if(isc.Browser.isIE){var b=this.getActiveElement(),c=a?a.getHandle():null;if(!c)return;for(var d;b&&b.tagName;){if(b==c){d=true;break}if(b.eventProxy){d=b.eventProxy==a.getID();break}b=b.parentElement}if(!d)return}b=this.clickMaskRegistry;
for(c=b.length-1;c>=0;c--){d=b[c];if(this.targetIsMasked(a,d)){if(this.isHardMask(d))return false;this.$lj(d)}else break}},isc.A.prepareForDragging=function(a){this.dragging&&this.handleDragStop();delete this.dragMoveAction;delete this.dragTarget;this.bubbleEvent(a,"prepareForDragging");if(this.dragTarget){if(a.dragTarget)if(isc.isA.Canvas(a.dragTarget))this.dragTarget=a.dragTarget;else if(a.dragTarget=="top"&&a.topElement)this.dragTarget=a.topElement;else if(a.dragTarget=="parent"&&a.parentElement)this.dragTarget=
a.parentElement;else if(a.dragTarget=="creator"&&a.creator)this.dragTarget=a.creator;else if(isc.isA.String(a.dragTarget)&&isc.isA.Canvas(window[a.dragTarget]))this.dragTarget=window[a.dragTarget];else this.logWarn("prepareForDragging():  target.dragTarget not understood : "+a.dragTarget);if(this.logIsInfoEnabled("dragDrop"))this.logInfo("target is draggable with dragOperation: "+this.dragOperation+", dragTarget is : "+this.dragTarget+(this.dragTarget!=a?" (delegated from: "+a+")":""),"dragDrop");
this.dragTargetStartRect=this.dragTarget.getRect()}else this.logIsDebugEnabled()&&this.logDebug("No dragTarget, not dragging")},isc.A.handleDragStart=function(){if(!this.mouseIsDown()||!this.dragTarget)return false;delete this.dropTarget;delete this.dragMoveTarget;this.dragOffsetY=this.dragOffsetX=-10;this.handleEvent(this.lastMoveTarget,this.MOUSE_OUT);this.lastMoveTarget!=this.mouseDownTarget()&&this.handleEvent(this.mouseDownTarget(),this.MOUSE_OUT);isc.Hover&&isc.Hover.clear();this.dragStartOffsetX=
this.mouseDownEvent.x-this.dragTarget.getPageLeft();this.dragStartOffsetY=this.mouseDownEvent.y-this.dragTarget.getPageTop();var a=this.dragOperation+"Start";if(this.handleEvent(this.dragTarget,a)==false){this.logInfo("drag cancelled by false return from: "+a+" on "+this.dragTarget,"dragDrop");delete this.dragTarget;delete this.dragTargetLink;this.handleEvent(this.dragTarget,this.MOUSE_OVER);return false}delete this.lastMoveTarget;if(this.dragTarget.dragAppearance!=this.TRACKER){this.dragOffsetX=
this.dragStartOffsetX;this.dragOffsetY=this.dragStartOffsetY}this.dragAppearance=this.dragTarget.dragAppearance;if(this.dragAppearance==this.TRACKER){this.dragMoveTarget=this.$lk();if(!this.dragMoveAction)this.dragMoveAction=this.$ll;this.dragTracker.setOverflow(isc.Canvas.VISIBLE);this.bubbleEvent(this.dragTarget,this.SET_DRAG_TRACKER);this.dragOffsetX=this.dragTracker.offsetX;this.dragOffsetY=this.dragTracker.offsetY}else if(this.dragAppearance==this.OUTLINE){this.dragMoveTarget=this.getDragOutline(this.dragTarget);
if(!this.dragMoveAction)this.dragMoveAction=this.$ll}else if(this.dragAppearance==this.TARGET){this.dragMoveTarget=this.dragTarget;if(!this.dragMoveAction)this.dragMoveAction=this.$ll;this.dragTarget.showDragShadow&&this.$lm();this.dragTarget.dragOpacity!=null&&this.$ln()}if(this.dragMoveTarget){if(this.dragMoveTarget!=this.dragTarget)this.dragMoveTarget.dragIntersectStyle=this.dragTarget.dragIntersectStyle;this.dragMoveTarget.show();this.dragMoveTarget.bringToFront()}a=this.dragMoveTarget?this.dragMoveTarget:
this.dragTarget;if((isc.Browser.isIE||isc.Browser.isMoz)&&this.dragAppearance!=this.OUTLINE&&!(a.$lo||a.neverBackMask))if(this.alwaysBackMask)this.$lp(a);else{var b=[];if(isc.BrowserPlugin)for(var c=isc.BrowserPlugin.instances,d=0;d<c.length;d++){var e=c[d];if(e.isVisible()&&(a.parentElement==null||a.parentElement.contains(e,true)))b.add({instance:e,rect:e.getPageRect()})}if(isc.Browser.isIE&&isc.Browser.minorVersion>=5.5&&isc.NativeSelectItem){c=isc.NativeSelectItem.instances;for(d=0;d<c.length;d++){e=
c[d];if(e.isVisible()&&(a.parentElement==null||a.parentElement.contains(e.containerWidget,true)))b.add({instance:e,rect:e.getPageRect()})}}if(b.length>0&&this.dynamicBackMask===false)this.$lp(a);else this.$lq=b}this.showEventMasks(this.dragOperation==this.DRAG_RESIZE);this.dragging=true;this.logInfo("Started dragOperation: "+this.dragOperation+" with dragTarget: "+this.dragTarget+" dragAppearance: "+this.dragAppearance,"dragDrop");return true},isc.A.$lm=function(){var a=isc.EH,b=a.dragTarget;a.$lr=
!b.showShadow;a.$ls=b.shadowDepth;b.shadowDepth=a.dragTargetShadowDepth;b.updateShadow();b.showShadow||b.setShowShadow(true)},isc.A.$lt=function(){var a=isc.EH,b=a.dragTarget;a.$lr&&b.setShowShadow(false);b.shadowDepth=a.$ls;b.updateShadow();delete a.$lr;delete a.$ls},isc.A.$ln=function(){var a=isc.EH,b=a.dragTarget;a.$lu=b.opacity;b.setOpacity(b.dragOpacity)},isc.A.$lv=function(){var a=isc.EH;a.dragTarget.setOpacity(a.$lw)},isc.A.$lp=function(a){if(a._backMask)a._backMask.isVisible()||a._backMask.show();
else a.makeBackMask({$lx:true})},isc.A.$ly=function(a){a._backMask&&a._backMask.$lx&&a._backMask.isVisible()&&a._backMask.hide()},isc.A.$lz=function(){var a=this.dragMoveTarget;if(a){var b=[a];a._backMask&&b.add(a._backMask);a.$l0&&b.add(a.$l0);a._shadow&&b.add(a._shadow);return b}},isc.A.$l1=function(a){var b=this.$ji;b[a]||(b[a]=a+"Move");return b[a]},isc.A.handleDragMove=function(){var a=this.lastEvent;isc.$54j=true;this.dropTarget=this.getDropTarget(a);isc.$54j=false;if(this.$lq&&this.dynamicBackMask){a=
false;for(var b=this.dragMoveTarget?this.dragMoveTarget:this.dragTarget,c=b.getRect(),d=0;d<this.$lq.length;d++){var e=this.$lq[d];if(isc.Canvas.rectsIntersect(e.rect,c)){this.$l2=e.instance;a=true;break}}this.$l2&&this.$l2.repaintIfRequired&&this.$l2.repaintIfRequired();if(a)this.$lp(b);else{this.$ly(b);delete this.$l2}}else isc.BrowserPlugin&&isc.BrowserPlugin.handleDragMoveNotify();this.dragMoveAction&&this.dragMoveAction();if(this.handleEvent(this.dragTarget,this.$l1(this.dragOperation))==false){delete this.dropTarget;
return false}if(this.dropTarget!=this.lastDropTarget){this.logDebug("New drop target: "+this.dropTarget,"dragDrop");this.lastDropTarget&&this.handleEvent(this.lastDropTarget,this.DROP_OUT);this.dropTarget&&this.handleEvent(this.dropTarget,this.DROP_OVER);this.lastDropTarget=this.dropTarget}this.dropTarget&&this.handleEvent(this.dropTarget,this.DROP_MOVE);isc.$54j=true;this.$l3();return isc.$54j=false},isc.A.$l3=function(){var a=this.dragTarget;if(this.dragOperation!=this.DRAG_SCROLL){if(this.dragOperation==
this.DRAG_SELECT){if(a.overflow==isc.Canvas.VISIBLE)return;if(!a.containsEvent()||a.$l4(a.dragScrollDirection))a.$l5(a.dragScrollDirection,true)}var b=[],c=a.dragScrollType=="parentsOnly"?a.getParentElements():isc.Canvas._canvasList;if(!(c==null||c.length==0)){for(var d=0;d<c.length;d++)if((c[d].hscrollOn||c[d].vscrollOn)&&c[d].isDrawn()&&c[d].isVisible()&&c[d].shouldDragScroll())b.add(c[d]);d=this.lastEvent;c=d.x;var e=d.y,f=[];for(d=0;d<b.length;d++)b[d].visibleAtPoint(c,e,false,this.$lz())&&f.add(b[d]);
if(f.length>0){var g;for(d=0;d<f.length;d++)if(f[d].$l4(a.dragScrollDirection))if(g==null||g.contains(f[d],true))g=f[d];g!=null&&g.$l5(a.dragScrollDirection)}}}},isc.A.handleDragStop=function(){var a=false;this.dragging=false;this.logInfo("end of drag interaction","dragDrop");this.dragOffsetX=this.dragOffsetY=0;var b=this.dragTarget,c=this.dragMoveTarget,d=this.dragOperation;if(c&&(c==this.dragTracker||c==this.dragOutline))c.hide();else{b.showDragShadow&&this.$lt();b.dragOpacity!=null&&this.$lv()}if(this.dragTracker&&
this.dragTracker.$l6){this.dragTracker.destroy();delete this.dragTracker}this.$ly(this.dragMoveTarget?this.dragMoveTarget:this.dragTarget);this.$lq&&delete this.$lq;var e=this.dropTarget;if(e){this.handleEvent(this.dropTarget,this.DROP_OUT);e.willAcceptDrop()&&this.handleEvent(e,this.DROP);a=true}e=b==c;if(this.handleEvent(b,d+"Stop")!=false){a=true;if(d==this.DRAG_RESIZE){if(!e)if(c!=null)b.setPageRect(c.getPageLeft(),c.getPageTop(),c.getWidth(),c.getHeight(),true);else{c=isc.EH.resizeEdge;if(c!=
null){d=isc.EH.getX();e=isc.EH.getY();var f=c.contains("L")?d-this.dragTargetStartRect[0]:0,g=c.contains("T")?e-this.dragTargetStartRect[1]:0;b.setPageRect(c.contains("L")?d:this.dragTargetStartRect[0],c.contains("T")?e:this.dragTargetStartRect[1],c.contains("R")?d-b.getPageLeft():this.dragTargetStartRect[2]-f,c.contains("B")?isc.EH.getY()-b.getPageTop():this.dragTargetStartRect[3]-g,true)}}c=b.getVisibleWidth()-this.dragTargetStartRect[2];d=b.getVisibleHeight()-this.dragTargetStartRect[3];b.dragResized(c,
d)}else if(d==this.DRAG_REPOSITION){if(!e){c!=null?b.setPageRect(c.getPageLeft(),c.getPageTop()):b.setPageRect(isc.EH.getX(),isc.EH.getY());b.bringToFront()}this.dragTarget.dragRepositioned()}}else if(d==this.DRAG_RESIZE)e&&b.setRect(this.dragTargetStartRect);else this.dragOperation==this.DRAG_REPOSITION&&e&&b.moveTo(this.dragTargetStartRect[0],this.dragTargetStartRect[1]);this.clearDragProperties();this.hideEventMasks();(b=this.lastEvent.target)&&this.handleEvent(b,this.MOUSE_OVER);this.lastMoveTarget=
b;return a});isc.B.push(isc.A.getEventTargetCanvas=function(a,b){if(a==null)a={};var c=this.getWindow();b||(b=isc.Browser.isIE?a.srcElement:a.target);if(!this.$l7(b))return this.lastTarget;if(a&&a.$49s)return a.target;if(!b||b.tagName==this.$jj||b.tagName==this.$jk)return this.lastTarget=null;if(b&&b.tagName&&b.tagName==this.$49r)return(c=isc.Applet?isc.Applet.idForName(b.name):null)?window[c]:this.lastTarget;if(isc.Browser.isIE&&b.parentElement==null)b=this.lastTarget;else{var d=this.$jl;if(isc.Browser.isIE)for(;b!=
null;){if(b.eventProxy)break;b=b.parentElement}else for(;b!=null;){if(b.eventProxy!=null||b.hasAttribute!=null&&b.hasAttribute(d))break;b=b.parentNode}if(!b)return this.lastTarget=null;for(b=c[b.getAttribute(d)];b&&b.eventProxy;){if(isc.isA.String(b.eventProxy))b.eventProxy=c[b.eventProxy];b=b.eventProxy}if(this.logIsInfoEnabled()&&!a||a.type!="mousemove"&&a.type!="selectstart")b!=null?this.logInfo("Target Canvas for event '"+a.type+"': "+b):this.logDebug("No target Canvas for event '"+a.type+"'");
if(b==this.dragTracker)b=this.lastTarget;this.lastTarget=b}if(isc.isA.Canvas(b))return b;return null},isc.A.$l7=function(a){try{if(!(isc.Browser.isMoz&&a==this.$jm))return true}catch(b){return false}return true},isc.A.getDropTarget=function(a){if(!this.dragTarget||!this.dragTarget.canDrop||this.dragOperation==this.DRAG_RESIZE)return null;var b=this.dragMoveTarget||this.dragTarget,c=this.$i0,d=[],e=0,f=c.length,g=b.dragAppearance!=isc.EH.TARGET;if(b.dragIntersectStyle==this.INTERSECT_WITH_MOUSE){if(a.target!=
this.mouseDownTarget()||isc.Browser.isIE||isc.Browser.isSafari&&!isc.Browser.isTouch||isc.Browser.isMoz&&isc.Browser.geckoVersion>20040616&&!this.mouseDownTarget().$ks){for(var h=a.target;h&&h.dropTarget;)h=h.dropTarget;if((g||h!=b)&&c.contains(h))return h}for(;e<f;e++){h=c[e];if(h.canAcceptDrop&&!h.isDisabled()&&h.visibleAtPoint(a.x,a.y,false,this.$lz())&&(g||h!=b))d.add(h)}}else for(;e<f;e++){h=c[e];!g&&h==b||h.intersects(b)&&h.canAcceptDrop&&!h.isDisabled()&&d.add(h)}if(d.length<2)return d[0];
a=d[0];for(e=1;e<d.length;e++){c=d[e];if(a.contains(c,true))a=c;else if(b.dragIntersectStyle==this.INTERSECT_WITH_RECT){f=null;g=a;for(h=c;f==null;)if(g.parentElement==null){f=true;h=c.topElement||c}else if(g.parentElement.contains(c,true))for(f=g.parentElement;h.parentElement!=f;)h=h.parentElement;else g=g.parentElement;if(h.getZIndex()>g.getZIndex())a=c}}return a},isc.A.registerDroppableItem=function(a){if(!a.$ma){this.$i0.add(a);a.$ma=true}},isc.A.unregisterDroppableItem=function(a){this.$i0.remove(a);
delete a.$ma},isc.A.registerMaskableItem=function(a,b){if(!this.$i1.contains(a)){this.$i1.add(a);b&&this.makeEventMask(a,{eventProxy:a})}},isc.A.unregisterMaskableItem=function(a){this.$i1.remove(a);a._eventMask&&a._eventMask.destroy();delete a._eventMask},isc.A.makeEventMask=function(a,b,c){if(isc.isA.Function(a.makeEventMask))return a.makeEventMask(b,c);var d=this.$jn;if(!d.contents)d.contents=isc.Browser.isIE&&isc.Browser.version>6?isc.Canvas.blankImgHTML(1600,1200):isc.Canvas.spacerHTML(1600,
1200);b=isc.Canvas.create({ID:a.getID()+"_eventMask",cursor:a.cursor,$jr:a},d,b);b.setRect(c?c:a.getRect());a._eventMask=b;a.addPeer(b);return b},isc.A.showEventMasks=function(a,b){var c=this.$i1;if(a){if(!this._eventMask)this._eventMask=isc.ScreenSpan.create({ID:"isc_EH_eventMask",mouseDown:function(){this.hide()},pointersToThis:[{object:this,property:"_eventMask"}]});this._eventMask.show();this._eventMask.bringToFront();isc.BrowserPlugin&&c.intersect(isc.BrowserPlugin.instances).map("$mb")}else for(var d=
0;d<c.length;d++){var e=c[d];b&&b[e.getID()]?e.$mc():e.$mb()}},isc.A.hideEventMasks=function(){var a=this.$i1;if(this._eventMask&&this._eventMask.isVisible()){this._eventMask.hide();isc.BrowserPlugin&&a.intersect(isc.BrowserPlugin.instances).map("$mc")}else for(var b=0;b<a.length;b++)a[b].$mc()},isc.A.eventHandledNatively=function(a,b,c){var d=a;if(!this.reverseEventTypes[a])if(this.$i2[a])d=this.$i2[a];else if(this.$i7[a])d=this.$i7[a];var e=this.$md(d,b,c);if(e&&this.logIsDebugEnabled()&&d!="mouseMove")this.logDebug(a+
" event on "+(c?" native target:"+b:this.lastTarget)+" handled natively");return e},isc.A.$md=function(a,b,c){a=a||"";var d=this.lastEvent;if(!this.$l7(b))return true;if(b&&b.tagName==this.$49r)return true;var e=this.isMouseEvent(a),f=e?d.target:d.keyTarget;if(!c&&e&&f==null)return true;if(this.logIsInfoEnabled()&&a==this.KEY_DOWN||this.logIsDebugEnabled()&&(a==this.KEY_UP||a==this.KEY_PRESS))this.logInfo(a+" event with Canvas target: "+this.lastEvent.keyTarget+", native target: "+this.echoLeaf(b));
if(this.passThroughEvents&&b){b=b;var g=b.handleNativeEvents||(b.getAttribute?b.getAttribute(this.$jt):null),h=b.tagName;if(!this.$me)this.$me="false";if(g==null){h=!b.focusProxy&&(b.form!=null&&h!=this.$i6||this.$i5[h]!=null||b.isContentEditable&&!b.eventProxy);if(!h&&a!=this.MOUSE_WHEEL&&a!=this.MOUSE_MOVE)for(;b&&b.tagName!=this.BODY_TAG&&b.tagName!=this.$jk;){if(b.eventProxy!=null||b.hasAttribute!=null&&b.hasAttribute(this.$jl))break;if(this.$i4[b.tagName]!=null){var i=b.handleNativeEvents||(b.getAttribute?
b.getAttribute(this.$jt):null);if(i!=null&&!isc.isA.emptyString(i))if(isc.isA.String(i))i=i==isc.EH.$me?false:true;if(i!=false){h=true;break}}b=b.parentNode}}else{h=g;if(h==this.$me)h=false}if(h)return true;else if(g!=null)return false}if(!c&&e&&this.$mf(f,a,d))return true;return false},isc.A.isMouseEvent=function(a){a=a||this.lastEvent.eventType;if(this.$mg==null)this.$mg={mouseOver:true,mouseover:true,mouseDown:true,mousedown:true,rightMouseDown:true,mouseMove:true,mousemove:true,mouseOut:true,
mouseout:true,mouseUp:true,mouseup:true,DOMMouseScroll:true,mousewheel:true,mouseWheel:true,click:true,doubleClick:true,doubleclick:true,showContextMenu:true,showcontextmenu:true,selectStart:true,selectstart:true};if(this.$mg[a]==true)return true;return false},isc.A.isKeyEvent=function(a){a=a||this.lastEvent.eventType;if(this.$mh==null){var b=this.$mh={};b[this.KEY_DOWN]=true;b[this.KEY_PRESS]=true;b[this.KEY_UP]=true;var c=this.$i7,d;for(d in c)b[d]=true}if(this.$mh[a]==true)return true;return false},
isc.A.$mf=function(a,b,c){if(isc.Browser.isTouch)return false;if(!a||a.showCustomScrollbars||!(a.vscrollOn||a.hscrollOn))return false;var d=isc.Element.getNativeScrollbarSize();if(a.isRTL()){if(a.vscrollOn&&c.x<a.getPageLeft()+d||a.hscrollOn&&c.y>a.getPageTop()+a.getHeight()-d){if(b==this.MOUSE_DOWN)this.$k0=true;return true}}else if(a.vscrollOn&&c.x>a.getPageRight()-d||a.hscrollOn&&c.y>a.getPageBottom()-d){if(b==this.MOUSE_DOWN)this.$k0=true;return true}return false},isc.A.bubbleEvent=function(a,
b,c,d){var e=this.lastEvent,f=this.logIsDebugEnabled()&&!this.$ju[b];if(this.isMouseEvent(b)){if(d==null)d=this.targetIsMasked(a,null);if(d){f&&this.logDebug(b+" on "+a+" blocked by clickmask");return false}}d=this.$mi(b);for(var g;a;){if(a.destroyed)break;var h=null;if((h=a.mouseEventParent&&b.startsWith("mouse")?a.mouseEventParent:a.keyEventParent&&b.startsWith("key")?a.keyEventParent:a.eventParent||a.parentElement)&&h.eventProxy)h=h.eventProxy;if(a[d]!=null)g=d;else if(a[b]!=null&&a[b]!=isc.Class.NO_OP&&
!isc.is.emptyString(a[b])){g=b;isc.isA.String(a[b])&&a.convertToMethod(b);f&&this.logDebug("Bubbling event '"+b+"', target '"+a+"' has handler: "+this.echoLeaf(a[b]))}if(a[g]!=null){var i;i=a[g](e,c);if(i==false){f&&this.logDebug("Bubbling for event '"+b+"' cancelled via false return value by target: "+a);return false}if(i==this.STOP_BUBBLING){f&&this.logDebug("Bubbling for event '"+b+"' cancelled via STOP_BUBBLING return value by target: "+a);return this.STOP_BUBBLING}}if(a.bubbleEvents==false||
a.bubbleMouseEvents==false&&this.isMouseEvent(b)){f&&this.logDebug("Bubbling for event '"+b+"' stopped by '"+a+"' which does not allow bubbling");return true}else if(isc.isAn.Array(a.bubbleMouseEvents))if(a.bubbleMouseEvents.contains(b)){f&&this.logDebug("Bubbling for event '"+b+"' stopped by '"+a+"' which does not allow bubbling");return true}a=h}f&&this.logDebug("Event '"+b+"' bubbled to top");return true},isc.A.$mi=function(a){this.$jc[a]||(this.$jc[a]="handle"+a.charAt(0).toUpperCase()+a.substring(1));
return this.$jc[a]},isc.A.hasEventHandler=function(a,b){if(!isc.isAn.Object(a)||!isc.isA.String(b)){isc.Log.logWarn("EventHandler.hasEventHandler() passed bad parameters ["+[a,b]+"]. returning null;","event");return null}var c=this.$mi(b);if(this.getBubbledProperty(a,b)!=null||this.getBubbledProperty(a,c)!=null)return true;return false},isc.A.getBubbledProperty=function(a,b){for(;a;){if(a[b])return a[b];if((a=a.eventParent||a.parentElement)&&a.eventProxy)a=a.eventProxy}return null},isc.A.handleSelectStart=
function(){var a=isc.EH,b=a.getWindow(),c=b.event?b.event.srcElement:null,d=a.mouseDownEvent?a.mouseDownEvent.nativeTarget:null;if(c&&d==c&&c.form&&!a.dragging)return true;if(isc.EH.$mj)return true;c=isc.EH.mouseIsDown()?a.mouseDownTarget():null;b=a.getEventTargetCanvas(b.event);if(!((a.dragging||a.dragTarget)&&a.dragOperation!=a.DRAG_SELECT)&&(c!=null?c.$kr():true)&&(b!=null?b.$kr():true))return true;return a.killEvent()},isc.A.handleSelectionChange=function(a){if(!a)a=window.event;var b=isc.EH,
c=b.lastEvent,d=isc.Element.$mk(document);if(d){a=b.getEventTargetCanvas(a,d);c.nativeKeyTarget=d;c.keyTarget=a;c.eventType=this.$41z;if(a){a.keyTarget=a;b.bubbleEvent(c.keyTarget,"selectionChange")}}return true},isc.A.handleNativeHelp=function(){if(this.$69a)if(this.$69a()==false)return false;if(this.$69b)if(this.$69b()==false)return false;return isc.EH.$j9(window.event,true)},isc.A.handleNativeDragStart=function(){if(isc.EH.dragTarget)return false;var a=isc.EH.mouseDownTarget();if(a)return!!a.$kr();
if(this.$ml)return this.$ml();if(this.$mm)return this.$mm()},isc.A.handleResize=function(){if(isc.EH.resizeTimer==null)isc.EH.resizeTimer=isc.Timer.setTimeout("isc.EH.$hr()",0);return true},isc.A.handleOrientationChange=function(){this.$78p()},isc.A.$mn=function(){isc.EH.$hr(true)},isc.A.$hr=function(a){isc.EH.resizeTimer=null;var b=isc.Page.getOrientation();if(a){a=isc.Page.getWidth(window,true);var c=isc.Page.getHeight(window,true),d=b==this.currentOrietnation&&a==this.$mo&&c==this.$mp;if(isc.Page.pollPageSize){isc.Page.setEvent(isc.EH.IDLE,
this.$mn,isc.Page.FIRE_ONCE);this.$mo=a;this.$mp=c}if(d)return}else{this.$mo=isc.Page.getWidth(window,true);this.$mp=isc.Page.getHeight(window,true);this.resizingPollTimer!=null&&isc.Timer.clearTimeout(this.resizingPollTimer);this.resizingPollTimer=isc.Timer.setTimeout(this.$mn,100)}this.$78p(b)},isc.A.$78p=function(a){isc.Page.handleEvent(null,isc.EH.RESIZE);if(a==null)a=isc.Page.getOrientation();if(a!=this.currentOrientation){this.currentOrientation=a;isc.Page.handleEvent(null,isc.EH.ORIENTATION_CHANGE)}},
isc.A.handleMouseWheel=function(a){var b=isc.EH;if(!a)a=b.getWindow().event;if(b.eventHandledNatively(a.type,a.srcElement||a.target))return b.$js;b.getMouseEventProperties(a);var c=b.getEventTargetCanvas(a);if(b.bubbleEvent(c,b.eventTypes.MOUSE_WHEEL)==false){a.preventDefault&&a.preventDefault();return false}return true},isc.A.getWheelDelta=function(a){return(a||this.lastEvent).wheelDelta},isc.A.handleDOMMouseScroll=function(a){return isc.EH.handleMouseWheel(a)},isc.A.handleScroll=function(){},isc.A.prepareForLinkDrag=
function(a,b){this.dragTarget=isc.isA.String(a)?this.getWindow()[a]:a;this.dragTargetLink=b;return false},isc.A.setDragTracker=function(a,b,c,d,e,f){f=this.$lk(f);b=b||10;c=c||10;f.resizeTo(b,c);f.setContents(a);f.redrawIfDirty("setDragTracker");if(d)f.offsetX=d;if(e)f.offsetY=e;f.$l6=true},isc.A.$lk=function(a){if(this.dragTracker)a!=null&&this.dragTracker.setProperties(a);else{var b=this.dragTrackerDefaults;b.contents=isc.Canvas.imgHTML("[SKIN]black.gif",10,10);this.dragTracker=isc.Canvas.create(b,
a)}return this.dragTracker},isc.A.getDragOutline=function(a,b,c){if(!this.dragOutline){this.dragOutline=isc.Canvas.create({autoDraw:false,overflow:isc.Canvas.HIDDEN});isc.Browser.isIE&&this.dragOutline.setContents(isc.Canvas.spacerHTML(1600,1200))}var d=this.dragOutline;isc.Element.getStyleDeclaration(a.dragOutlineStyle)?d.setStyleName(a.dragOutlineStyle):d.setBorder((b||1)+"px solid "+(c||"black"));d.setPageRect(a.getPageLeft(),a.getPageTop(),a.getVisibleWidth(),a.getVisibleHeight());d.minWidth=
a.minWidth;d.minHeight=a.minHeight;d.maxWidth=a.maxWidth;d.maxHeight=a.maxHeight;d.keepInParentRect=isc.isAn.Array(a.keepInParentRect)?a.keepInParentRect:a.keepInParentRect==true?a.getParentPageRect():null;return d},isc.A.getDragRect=function(){var a=this.dragMoveTarget||this.dragTarget;if(!a)return null;return a.getPageRect()},isc.A.$ll=function(){var a=this.dragMoveTarget;if(!a)return true;if(isc.Browser.isMoz&&isc.Browser.geckoVersion<20031007&&!a.keepInParentRect&&a.parentElement&&!a.parentElement.containsPoint(this.lastEvent.x,
this.lastEvent.y))return true;isc.$54j=true;this.dragMoveTarget.moveToEvent(this.dragOffsetX,this.dragOffsetY);isc.$54j=false;return true},isc.A.$mq=function(){this.dragMoveTarget&&this.dragMoveTarget.resizeToEvent(this.resizeEdge);return true},isc.A.killEvent=function(){isc.EH.getWindow().event.cancelBubble=true;return false},isc.A.stopBubbling=function(){return isc.EH.STOP_BUBBLING},isc.A.startIdleTimer=function(){if(isc.Page.isLoaded())if(!this.idleTimer)this.idleTimer=isc.Timer.setTimeout({target:isc.EH,
methodName:this.$jv},this.IDLE_DELAY)},isc.A.$jw=function(){this.idleTimer=null;var a=isc.Page.handleEvent(null,this.IDLE);isc.Page.actionsArePendingForEvent(this.IDLE)&&this.startIdleTimer();return a},isc.A.$h1=function(a){this.$lc=a+this.$jx++;if(this.$jx>9)this.$jx=0},isc.A.$h2=function(){this.$mr!=null&&this.runTeas();this.$lc=null},isc.A.$ms=function(a){isc.Timer.setTimeout(a,0);var b=this.$mr;if(b==null)b=this.$mr=[];b.add(a)},isc.A.runTeas=function(){for(this.$lc+="[E]";this.$mr!=null;){var a=
this.$mr;this.$mr=null;this.logIsDebugEnabled()&&this.logDebug("firing threadExitActions: "+this.echoAll(a));for(var b=0;b<a.length;b++){var c=a[b];isc.isA.String(c)?isc.eval(c):c()}}},isc.A.dispatch=function(a,b){isc.$611!=null&&delete isc.$611;if(isc.Browser.isIE)b=this.getWindow().event;this.$h1(this.$jy[b.type]||b.type);if(isc.Log.supportsOnError)var c=a.call(this,b);else try{c=a.call(this,b)}catch(d){isc.Log.$am(d);throw d;}this.$h2();if(c!=false&&this.$j3[b.type])if(this.$j3[b.type](b)==false)c=
false;return c},isc.A.captureEvent=function(a,b,c,d){var e=this.getWindow(),f=this.$mt,g=isc.$aq(this.$j0,this.$j1);g.$ch=e;g.$j2=d;var h;if(f)if(isc.Browser.isIE)a.attachEvent(b,g);else if(isc.Browser.isDOM){h=this.$j4[b]||b.substring(2);a.addEventListener(h,g,false)}else{this.logWarn("Unable to use event listeners in this browser");this.$mt=false;return this.captureEvent(a,b,c,d)}else{if(a[b]!=null){h=this.$j4[b]||b.substring(2);this.$j3[h]=a[b]}a[b]=g}if(a===e.document)this.$649[!f||isc.Browser.isIE?
b:h]=g},isc.A.captureEvents=function(a){if(window.isc_useEventListeners!=null)this.$mt=window.isc_useEventListeners;var b=isc.makeReverseMap(this.eventTypes);isc.addProperties(this,{reverseEventTypes:b});if(a==null)a=this.getWindow();b=a.document;isc.Page.setEvent(this.LOAD,isc.Page.finishedLoading);if(isc.Browser.isIE)a.attachEvent("onload",this.handleLoad);else isc.Browser.isDOM&&!isc.Browser.isOpera?a.addEventListener("load",this.handleLoad,true):this.captureEvent(a,"onload",this.LOAD,this.handleLoad);
this.$j8()||this.captureEvent(a,"onunload",this.UNLOAD,this.handleUnload);this.captureEvent(a,"onresize",this.RESIZE,this.handleResize);this.captureEvent(b,"onmousedown",this.MOUSE_DOWN,this.handleMouseDown);this.captureEvent(b,"onmousemove",this.MOUSE_MOVE,this.handleMouseMove);this.captureEvent(b,"onmouseup",this.MOUSE_UP,this.handleMouseUp);this.captureEvent(b,"onclick",this.CLICK,this.handleNativeClick);this.captureEvent(b,"ondblclick",this.DOUBLE_CLICK,this.handleNativeClick);this.captureEvent(b,
"onscroll","scroll",this.handleScroll);this.captureEvent(b,"onmousewheel",this.MOUSE_WHEEL,this.handleMouseWheel);isc.Browser.isMoz&&a.addEventListener("DOMMouseScroll",this.handleDOMMouseScroll,true);this.captureEvent(b,"onmouseout",this.MOUSE_OUT,this.handleNativeMouseOut);this.captureEvent(b,"oncontextmenu",this.SHOW_CONTEXT_MENU,this.handleContextMenu);this.captureEvent(b,"onselectstart",this.SELECT_START,this.handleSelectStart);this.captureEvent(a,"onselectstart",this.SELECT_START,this.handleSelectStart);
isc.Browser.isIE&&this.captureEvent(b,"onselectionchange",this.SELECTION_CHANGE,this.handleSelectionChange);if(a.isc_captureKeyEvents!=false){this.captureEvent(b,"onkeydown",this.KEY_DOWN,this.$j9);this.captureEvent(b,"onkeypress",this.KEY_PRESS,this.$kd);this.captureEvent(b,"onkeyup",this.KEY_UP,this.$kb)}if(isc.Browser.isIE){this.$mm=a.ondragstart;this.$ml=b.ondragstart;b.ondragstart=a.ondragstart=this.handleNativeDragStart;this.$69b=a.onhelp;this.$69a=b.onhelp;b.onhelp=a.onhelp=this.handleNativeHelp}if(isc.Browser.isTouch){this.captureEvent(b,
"ontouchstart",this.TOUCH_START,this.$77p);this.captureEvent(b,"ontouchmove",this.TOUCH_MOVE,this.$77q);this.captureEvent(b,"ontouchend",this.TOUCH_END,this.$77r)}if(isc.Browser.isMobile)isc.Page.pollPageSize=true},isc.A.$j8=function(){return isc.Browser.isSafari&&isc.Browser.safariVersion<=412},isc.A.releaseEvents=function(a){if(a==null)a=this.getWindow();var b=a.document,c=this.$649,d;for(d in c)if(this.$mt)if(isc.Browser.isIE)b.detachEvent(d,c[d]);else isc.Browser.isDOM&&b.removeEventListener(d,
c[d],false);else b[d]=null;if(isc.Browser.isIE){b.ondragstart=a.onhelp=null;b.onhelp=a.onhelp=null}delete this.$649},isc.A.getLastEvent=function(){return this.lastEvent},isc.A.getEventType=function(a){return(a||this.lastEvent).eventType},isc.A.getTarget=function(a){return(a||this.lastEvent).target},isc.A.getDragTarget=function(){return this.dragTarget},isc.A.getX=function(a){return(a||this.lastEvent).x},isc.A.getY=function(a){return(a||this.lastEvent).y},isc.A.getScreenX=function(a){return(a||this.lastEvent).screenX},
isc.A.getScreenY=function(a){return(a||this.lastEvent).screenY},isc.A.mouseIsDown=function(){return this.$j6},isc.A.mouseDownTarget=function(){return this.mouseDownEvent?this.mouseDownEvent.target:null},isc.A.getButtonNum=function(a){return(a||this.lastEvent).buttonNum},isc.A.leftButtonDown=function(a){return(a||this.lastEvent).buttonNum==1},isc.A.rightButtonDown=function(a){if(!a)a=this.lastEvent;return a.buttonNum==2||a.button==2||isc.Browser.isMac&&a.ctrlKey||isc.Browser.isOpera&&a.ctrlKey&&a.shiftKey||
isc.Browser.isSafari&&isc.Browser.safariVersion<125&&a.altKey},isc.A.useSyntheticRightButtonEvents=function(){return isc.Browser.isOpera||isc.Browser.isSafari&&isc.Browser.safariVersion<125},isc.A.getKeyEventCharacterValue=function(a){return(a||this.lastEvent).characterValue},isc.A.getKeyEventCharacter=function(a){return String.fromCharCode(this.getKeyEventCharacterValue(a))},isc.A.getKey=function(a){return(a||this.lastEvent).keyName||null},isc.A.getKeyName=function(a){return this.getKey(a)},isc.A.shiftKeyDown=
function(a){return!!(a||this.lastEvent).shiftKey},isc.A.ctrlKeyDown=function(a){return!!(a||this.lastEvent).ctrlKey},isc.A.altKeyDown=function(a){return!!(a||this.lastEvent).altKey},isc.A.metaKeyDown=function(a){return!!(a||this.lastEvent).metaKey},isc.A.getKeyEventProperties=function(a){if(a==null)a=this.getWindow().event;var b=this.lastEvent;b.nativeKeyTarget=a.target||a.srcElement;b.keyTarget=this.$ke;if(isc.isA&&isc.DynamicForm&&isc.isA.DynamicForm(this.$ke)){var c=isc.DynamicForm.$mu(b.nativeKeyTarget,
b.keyTarget);if(c&&c.item)b.keyTarget=c.item}b.eventType=this.getKeyEventType(a.type);if(b.eventType==this.KEY_PRESS)b.characterValue=this.$mv(a);c=this.determineEventKeyName(a);if(c!=null)b.keyName=c;else b.eventType!=isc.EH.keyPress&&delete b.keyName;b.nativeKeyCode=a.keyCode;b.shiftKey=a.shiftKey==true||isc.Browser.isMoz&&b.shiftKey;b.ctrlKey=a.ctrlKey==true;b.altKey=a.altKey==true;b.metaKey=a.metaKey==true},isc.A.getKeyEventType=function(a){if(a)return this.$i7[a]},isc.A.$mv=function(a){if(isc.Browser.isIE)return a.keyCode||
null;if(isc.Browser.isMoz)return a.which||null;return a.which||a.keyCode||null},isc.A.determineEventKeyName=function(a){if(a!=null){var b=a.keyCode,c=a.which,d=isc.EH,e=d.getKeyEventType(a.type);if(a.type==this.$689)return this.$688;if(isc.Browser.isIE){if(e==d.KEY_DOWN||e==d.KEY_UP)return d.$iz[b];if(e==d.KEY_PRESS){if(d.$ka!=null)return d.$ka;a=d.$ja[b];if(!a&&this.getWindow().event.ctrlKey)a=isc.EH.$mw(b);return a}}else if(isc.Browser.isMoz)if(e==d.KEY_DOWN||e==d.KEY_UP)return d.$iz[b];else{if(e==
d.KEY_PRESS){if(c==0&&b!=0)return d.$iz[b];if(d.$ka!=null)return d.$ka;return b==0?d.$ja[c]:d.$iz[c]}}else if(isc.Browser.isSafari){if(e==d.KEY_DOWN||e==d.KEY_UP)return d.$iz[b];c=c!=null?c:b;if(c!=null&&c!=0){if(this.getWindow().event.ctrlKey){b=isc.EH.$ja[c];if(b==null)b=c==10?"Enter":isc.EH.$mw(c);return b}b=isc.EH.$ja[c];if(b==null)b=isc.EH.$jb[c];return b}else if(e==this.KEY_PRESS)return null}else{c=c;if(c==null||c==0&&b)c=b;if(c!=null)return isc.EH.$ja[c]}isc.Log.logWarn("EventHandler.determineEventKeyName(): Unable to determine key for '"+
a.type+"' event. Returning null");return null}},isc.A.$mw=function(a){if(a==30)return"6";if(a==31)return"-";return String.fromCharCode(a+64)},isc.A.clearKeyEventProperties=function(){var a=this.lastEvent;delete a.eventType;delete a.nativeKeyTarget;delete a.characterValue;delete a.keyName;delete a.shiftKey;delete a.ctrlKey;delete a.altKey;delete a.metaKey;delete this.$ka},isc.A.canvasDestroyed=function(a){this.clickMaskUp()&&isc.EH.maskTarget(a);a.$rq&&isc.Page.clearEvent(a.$nx,a.$rq);if(this.mouseDownEvent&&
this.mouseDownEvent.target==a)this.mouseDownEvent.target=null;if(this.lastClickTarget==a)this.lastClickTarget=null;if(this.lastEvent.target==a)this.lastEvent.target=null;if(this.lastEvent.keyTarget==a)this.lastEvent.keyTarget=null;if(this.$ke==a)this.$ke=null;if(this.$k7==a)this.$k7=null},isc.A.showClickMask=function(a,b,c,d){var e;if(b==true){e=true;b=isc.EH.SOFT}else if(b==false||b==null){e=false;b=isc.EH.HARD}else e=b!=isc.EH.HARD;if(c==null)c=[];else isc.isAn.Array(c)||(c=[c]);if(this.logIsInfoEnabled("clickMask"))this.logInfo("showing click mask, action: "+
a+(e?", autoHide true ":", autoHide false ")+(d?", ID: "+d:""),"clickMask");var f=this.clickMaskRegistry;this.lastMoveTarget&&this.handleEvent(this.lastMoveTarget,this.MOUSE_OUT);delete this.lastMoveTarget;b={autoHide:e,mode:b,ID:d!=null?d:"cm_"+this.$j7++,$mx:{}};this.$my(c,b);d=f.last();f.add(b);b.clickAction=a;a=this.getFocusCanvas();if(a!=null&&!c.contains(a)){a.blur();this.setMaskedFocusCanvas(a,b)}else d!=null&&this.setMaskedFocusCanvas(d.$li,b);if(a=this.isHardMask(b)){isc.timeStamp();if(f.length>
1){var g=false;e=[];for(var h=f.length-2;h>=0;h--){e.add(f[h]);if(this.isHardMask(f[h])){g=true;break}}if(g)for(h=0;h<e.length;h++)(f=e[h].$mx)&&this.$mz(f,c,true,true);else this.$mz(isc.Canvas._canvasList,c,false,true)}else this.$mz(isc.Canvas._canvasList,c,false,true)}if(this.maskNativeTargets)if(d==null)this.showScreenSpan(b);else a&&this.$m0(b.$mx);this.updateEventMasks();return b.ID},isc.A.updateEventMasks=function(){var a=this.clickMaskRegistry;if((a=a?a[a.length-1]:null)&&a.autoHide){var b=
{};isc.addProperties(b,a.$mx);this.showEventMasks(false,b)}else this.hideEventMasks()},isc.A.$my=function(a,b){a=this.$m1(a,b);for(var c=0;c<a.length;c++)if(a[c]!=null)b.$mx[a[c].getID()]=true},isc.A.$m1=function(a,b){if(!a||a.length==0||!b)return a;for(var c=0;c<a.length;c++)a[c]=this.$m2(a[c]);var d=b.$mx;if(!b.autoHide&&a.length>0){var e=a.length;for(c=0;c<e;c++){var f=a[c];if(f.topElement&&!d[f.topElement.getID()]&&!a.contains(f.topElement)){this.logWarn("Attempting to unmask target canvas:"+
f.getID()+" with respect to a hard click mask. This is not a top level Canvas - all ancestors of this Canvas will also be unmasked.","clickMask");a.add(f.topElement)}}}this.$m3(a);this.$m4(a);return a},isc.A.$m4=function(a){for(var b=a.length,c=0;c<b;c++)a[c]!=null&&this.$m5(a[c],a)},isc.A.$m5=function(a,b,c){c&&!b.contains(a)&&b.add(a);if(a.children)for(c=0;c<a.children.length;c++)this.$m5(a.children[c],b,true)},isc.A.$m3=function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b];d.parentElement&&a.contains(d.parentElement)||
this.$m6(a[b],a)}},isc.A.$m6=function(a,b,c){c&&!b.contains(a)&&b.add(a);if(c=a.peers)for(var d=0;d<c.length;d++)this.$m6(c[d],b,true);this.$m5(a,b)},isc.A.getClickMask=function(a){var b=this.clickMaskRegistry;if(isc.isAn.Object(a))return b.contains(a)?a:null;return b.find(this.$cp,a)},isc.A.isHardMask=function(a){isc.isAn.Object(a)||(a=this.getClickMask(a));return a==null?false:a.mode==isc.EH.HARD},isc.A.getTopHardMask=function(){for(var a=this.clickMaskRegistry,b=a.length-1;b>=0;b--)if(this.isHardMask(a[b]))return a[b];
return null},isc.A.$mz=function(a,b,c,d){if(a)if(c)for(var e in a){c=this.$m2(e);this.$m7(c,b,d)}else for(e=0;e<a.length;e++){c=this.$m2(a[e]);this.$m7(c,b,d)}},isc.A.$m7=function(a,b,c){if(!isc.isA.Canvas(a)||a.destroyed)isc.Log.logWarn("showClickMask - attempting to remove invalid object :"+isc.Log.echo(a)+" from tab order","clickMask");else if(!(b&&b[a.getID()])){if(a.isDrawn())if(a.parentElement==null)if(!c&&this.$m8&&this.$m8.isDrawn()&&a.getZIndex()>=this.$m8.getZIndex()){this.logDebug("lowering zIndex of: "+
a,"clickMask");a.setZIndex(isc.EH.$m8.getZIndex()-1)}a.accessKey!=null&&a.isDrawn()&&a.$m9(null)}},isc.A.hideClickMask=function(a){this.logIsInfoEnabled("clickMask")&&this.logInfo("hideClickMask called with ID: "+a,"clickMask");var b=this.clickMaskRegistry;if(b.length!=0)if(a==null){this.hideClickMask(b[0].ID);b.length>0?this.hideClickMask():this.logInfo("all clickmasks hidden","clickMask")}else{var c=this.getClickMask(a);if(c!=null){var d=b.indexOf(c),e=d==b.length-1,f=this.isHardMask(c),g=d>0?b[d-
1]:null,h,i;if(this.logIsInfoEnabled("clickMask")){a="hiding clickMask ID: "+a;a+=f?"[autoHide:false]":"[autoHide:true]";a+=b.length<2?", all masks hidden":" with index: "+d+" of "+(b.length-1);this.logInfo(a,"clickMask")}if(f){i=this.$na(d,false);h=this.$na(d,true)==null}a=c.$li;var j=c.$mx;b.remove(c);if(g!=null){if(j!=null){if(g.$mx==null)g.$mx={};isc.addProperties(g.$mx,j)}a&&!g.$mx[a.getID()]&&this.setMaskedFocusCanvas(a,g)}if(this.$m8){if(e&&g==null)isc.Browser.isIE?isc.Timer.setTimeout({target:this.$m8,
methodName:"hide"},0):this.$m8.hide();else if(h)i?this.$m0(i.$mx):this.$m8.sendToBack();if(f){if(i!=null){c=[];for(d=d-1;d>=0;d--){e=b[d];c.addList(isc.getKeys(e.$mx));if(e==i)break}}else c=isc.Canvas._canvasList;this.$nb(c,true)}if(a!=null&&!a.destroyed&&!this.targetIsMasked(a)){this.logIsInfoEnabled("clickMask")&&this.logInfo("focusing in "+a+" on clickMask hide","clickMask");if(isc.Browser.isIE&&this.lastEvent.eventType==this.MOUSE_DOWN)this.$k7=a;else try{a.focus()}catch(k){}}}this.updateEventMasks()}}},
isc.A.$na=function(a,b){var c=this.clickMaskRegistry;if(b)for(var d=a+1;d<c.length;d++){if(this.isHardMask(c[d]))return c[d]}else for(d=a-1;d>=0;d--)if(this.isHardMask(c[d]))return c[d];return null},isc.A.$m2=function(a){if(isc.isA.String(a))return window[a];return a});isc.B.push(isc.A.$nb=function(a,b){if(!(!a||a.length==0))for(var c=0;c<a.length;c++){var d=this.$m2(a[c]);if(d){d.accessKey!=null&&d.isDrawn()&&d.$m9(d.accessKey);if(!d.isDrawn()&&isc.isA.DynamicForm&&isc.isA.DynamicForm(d)&&d.items&&
d.items.length>0){var e=d.items[0];if(e.containerWidget!=d)d=e.containerWidget}if(!b&&d.parentElement==null&&d.getZIndex()<=this.$m8.getZIndex()&&d!=this.$m8){d.setZIndex(this.$m8.getZIndex()+1);this.logDebug("raised above screenspan: "+d,"clickMask")}}}},isc.A.clickMaskUp=function(a){var b=this.clickMaskRegistry;return a==null?b.length>0:b.find("ID",a)!=null},isc.A.getAllClickMaskIDs=function(){var a=this.clickMaskRegistry;if(a.length<1)return[];return a.getProperty("ID")},isc.A.showScreenSpan=function(a){if(!this.$m8)this.$m8=
isc.ScreenSpan.create({ID:"isc_EH_screenSpan",pointersToThis:[{object:this,property:"$m8"}]},this.clickMaskProperties);var b=this.$m8;b.show();this.isHardMask(a)?this.$m0(a.$mx):b.sendToBack()},isc.A.$m0=function(a){this.$nc=true;var b,c;for(c in a){var d=this.$m2(c);if(!(!d||d.destroyed||d.parentElement!=null))if(!(d.masterElement&&a[d.masterElement.getID()])){d.bringToFront();if(b==null)b=d.getZIndex(true);if(d.peers)for(var e=0;e<d.peers.length;e++)if(d.peers[e].isDrawn())b=Math.min(b,d.peers[e].getZIndex(true))}}b!=
null?this.$m8.setZIndex(b-1):this.$m8.bringToFront();this.$nc=false},isc.A.maskTarget=function(a,b){return this.maskTargets(a,b)},isc.A.maskTargets=function(a,b,c){var d=this.clickMaskRegistry;if(!(a==null||d.length==0)){if(isc.isAn.Array(a)){if(a.length==0)return}else a=[a];var e=b==null?d[0]:isc.isA.String(b)?this.getClickMask(b):b;if(e==null)this.logInfo("maskTargets called with invalid maskID - returning.","event");else{var f=a.length;for(b=0;b<f;b++){var g=a[b];!c&&g.children!=null&&this.$m5(g,
a);for(var h=g.parentElement;h!=null;){if(!a.contains(h)){a.add(h);c&&this.$m6(h,a)}h=h.parentElement}if(c||!h)this.$m6(g,a);h&&this.$m6(h,a)}c=d.indexOf(e);var i;for(b=c;b<d.length;b++){f=d[b];if(this.isHardMask(f))i=b}var j;if(i!=null)j=[];for(e=0;e<a.length;e++){g=a[e];g.hasFocus&&g.blur();h=null;for(b=c;b<d.length;b++){f=d[b];if(f.$mx[g.getID()]){h=b;delete f.$mx[g.getID()]}}i!=null&&h!=null&&i<=h&&j.add(g)}i!=null&&this.$mz(j,null,false,false)}}},isc.A.addUnmaskedTarget=function(a,b){return this.addUnmaskedTargets(a,
b)},isc.A.addUnmaskedTargets=function(a,b){if(!(isc.$nd&&this.$nc)){var c=this.clickMaskRegistry;if(!(a==null||c.length==0)){isc.isAn.Array(a)||(a=[a]);if(a.length!=0){var d;d=b==null?c.last():isc.isA.String(b)?this.getClickMask(b):b;if(d==null)this.logInfo("addUnmaskedTargets called with invalid maskID - returning.","clickMask");else{for(var e=d;e&&!this.isHardMask(e);)e=c[c.indexOf(e)-1];if(e!=null)if(isc.$nd&&a.length==1&&a[0].topElement!=null)return;a=this.$m1(a,d);this.logIsDebugEnabled("clickMask")&&
this.logDebug("Added unmasked targets:"+a.getProperty("ID")+" [+ decendants] to clickMask with ID: "+d.ID,"clickMask");e=false;for(var f=c.indexOf(d)+1;f<c.length;f++)if(this.isHardMask(c[f]))e=true;for(c=0;c<a.length;c++){f=a[c];if(d.$mx==null)d.$mx={};d.$mx[f.getID()]=true}e||this.$nb(a)}}}}},isc.A.targetIsMasked=function(a,b,c){var d=this.clickMaskRegistry;if(d.length==0)return false;if(a==null)return true;var e;e=b==null?d.last():isc.isA.String(b)?d.find("ID",b):b;if(!isc.isAn.Object(e)){this.logWarn("EventHandler.targetIsMasked() passed invalid maskID:"+
b,"clickMask");return false}b=d.indexOf(e);for(var f=false,g=b;g<d.length;g++){if(g!=b)e=d[g];if(c)if(e.mode==isc.EH.HARD||e.mode==isc.EH.SOFT_CANCEL)f=true;else continue;if(e.$mx){if(e.$mx[a.getID()])return false;if(isc.isA.DynamicForm!=null&&isc.isA.DynamicForm(a)){var h=a.$ne(isc.EH.lastEvent);if(h&&h.item&&h.item.form==a&&h.item.containerWidget!=a&&e.$mx[h.item.containerWidget.getID()])return false}}}return c&&!f?false:true},isc.A.clickMaskClick=function(a){for(var b=this.clickMaskRegistry.duplicate(),
c=b.last();c!=null&&(this.targetIsMasked(a)||a==this.$m8);){if(this.logIsInfoEnabled("clickMask"))this.logInfo("mouseDown on masked "+a+(c.clickAction!=null?" firing clickAction, ":"")+(c.autoHide?"will hide mask"+(c.mode==isc.EH.SOFT_CANCEL?" and block click":""):"will block click"));var d=c.mode!=isc.EH.SOFT;this.$lj(c);if(d)return false;c=b[b.indexOf(c)-1]}return true},isc.A.$lj=function(a){var b=a.clickAction;a.autoHide==true&&this.hideClickMask(a.ID);b!=null&&this.fireCallback(b)});isc.B._maxIndex=
isc.C+169;isc.EventHandler.captureEvents();isc.ClassFactory.defineClass("Element",null,null,true);isc.A=isc.Element;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$wq=window.isc_insertAfterBodyStart;isc.A.$wr="isc_global_insertion_marker";isc.A.$n7="afterBegin";isc.A.$n9="afterEnd";isc.A.$n6="beforeBegin";isc.A.$n8="beforeEnd";isc.A.$w2=isc.Browser.isMoz?"border-left-width":"borderLeftWidth";isc.A.$w3=isc.Browser.isMoz?"border-top-width":"borderTopWidth";
isc.A.$oi=isc.Browser.isMoz?"margin-left":"marginLeft";isc.A.$ok=isc.Browser.isMoz?"margin-top":"marginTop";isc.A.$27r="none";isc.A.cacheCount=0;isc.A.uncachedCount=0;isc.A.$808="$808";isc.A.$809="$809";isc.A.cacheOffsetCoords=true;isc.A.$nk={};isc.A.$419={border:"borderStyle",borderWidth:"borderStyle",borderLeft:"borderLeftStyle",borderRight:"borderRightStyle",borderTop:"borderTopStyle",borderBottom:"borderBottomStyle",borderLeftWidth:"borderLeftStyle",borderRightWidth:"borderRightStyle",borderBottomWidth:"borderBottomStyle",
borderTopWidth:"borderTopStyle"};isc.A.$nl={};isc.A.$39=";";isc.A.vendorCSSPrefix=isc.Browser.isMoz?"-moz-":isc.Browser.isSafari?"-webkit-":isc.Browser.isOpera?"-o-":"";isc.B.push(isc.A.get=function(a,b){b=b||this.getDocument();if(isc.Browser.isDOM)return b.getElementById(a)},isc.A.$mk=function(a){a||(a=document);if(isc.Browser.isIE){a=a.selection;var b=a.type.toLowerCase();if(!a)return null;if(b=="text"||b=="none"){var c;try{c=a.createRange()}catch(d){}return c?c.parentElement():null}else{c=a.createRange();
var e;for(a=0;a<c.length;a++)if(e)for(;!e.contains(c(a));)e=e.parentElement;else e=c(a).parentElement;return e}}},isc.A.findAttribute=function(a,b,c){if(!a)return null;if(a[b]==c||a.getAttribute&&a.getAttribute(b)==c)return a;a=a.childNodes;for(var d=0;d<a.length;d++){var e=this.findAttribute(a[d],b,c);if(e)return e}return null},isc.A.getInsertionMarkerHTML=function(){return"<span id='"+this.$wr+"' style='display:none'></span>"},isc.A.getInsertionMarker=function(){return document.getElementById(this.$wr)},
isc.A.createAbsoluteElement=function(a,b){b||this.getWindow();var c=this.getDocumentBody(true);if(c==null&&!isc.Element.noBodyTagMessageShown){isc.Element.noBodyTagMessageShown=true;this.logError("Error: Attempt to write content into a page outside the BODY tag.  Isomorphic SmartClient requires this tag be present and all widgets be written out inside it.\rPlease ensure your file has a BODY tag and any code to draw SmartClient widgets is enclosed in this tag.")}else{if(this.$wq)return isc.Element.insertAdjacentHTML(c,
this.$n7,a,true);if(isc.Browser.isIE){if(!this.$w7){if(c.childNodes.length<2)isc.Element.insertAdjacentHTML(c,this.$n7,this.getInsertionMarkerHTML());else{for(var d=c.lastChild;d&&d.nodeType==3;)d=d.previousSibling;d!=null?isc.Element.insertAdjacentHTML(d,this.$n6,this.getInsertionMarkerHTML()):isc.Element.insertAdjacentHTML(c,this.$n7,this.getInsertionMarkerHTML())}this.$w7=this.getInsertionMarker()}return isc.Element.insertAdjacentHTML(this.$w7,this.$n9,a,true)}else return isc.Element.insertAdjacentHTML(c,
this.$n8,a,true)}},isc.A.insertAdjacentHTML=function(a,b,c,d){if(isc.isA.String(a))a=isc.Element.get(a);a||this.logWarn("insertAdjacentHTML: element is null for where: '"+b+"' with html: "+c);if(isc.Browser.isIE||isc.Browser.isOpera)a.insertAdjacentHTML(b,c);else{if(d){var e=a.ownerDocument.createElement("DIV");e.innerHTML=c;c=e.firstChild}else{e=a.ownerDocument.createRange();e.setStartBefore(a);c=e.createContextualFragment(c)}switch(b){case "beforeBegin":a.parentNode.insertBefore(c,a);break;case "afterBegin":a.insertBefore(c,
a.firstChild);break;case "beforeEnd":a.appendChild(c);break;case "afterEnd":a.nextSibling?a.parentNode.insertBefore(c,a.nextSibling):a.parentNode.appendChild(c)}if(d)return c}},isc.A.clear=function(a,b){if(a!=null)if(!b&&isc.Page.isLoaded()&&isc.Browser.isIE)a.outerHTML=isc.emptyString;else if(a.parentNode)a.parentNode.removeChild(a);else{isc.Log.logWarn("element parentNode null");a.innerHTML=""}},isc.A.isBorderBox=function(a){if(a){if(!isc.Browser.isMoz)return isc.Browser.isBorderBox;return a.style.MozBoxSizing==
"border-box"}},isc.A.getScrollHeight=function(a){if(a==null)return 0;var b=a.scrollHeight!=null&&a.scrollHeight!="undefined"?a.scrollHeight:a.offsetHeight;a=this.$yq(a);return a>b?a:b},isc.A.$yq=function(a){if(a.childNodes==null)return 0;var b=0,c=document.ELEMENT_NODE||1;this.logIsDebugEnabled("sizing");for(var d=0;d<a.childNodes.length;d++){var e=a.childNodes.item(d);if(e.nodeType==c){var f=isc.Element.getComputedStyleAttribute(e,"position"),g=0;if(f==isc.Canvas.ABSOLUTE||f==isc.Canvas.RELATIVE){g+=
isc.Element.getOffsetTop(e);var h=e.getAttribute("eventProxy");h=h!=null&&!isc.isAn.emptyString(h)&&!window[h].$s0&&isc.isA.Function(window[h].getVisibleHeight)?window[h].getVisibleHeight():isc.Element.getVisibleHeight(e);g=g+h;if(f==isc.Canvas.ABSOLUTE&&(a.style.overflow==isc.Canvas.SCROLL||a.style.overflow==isc.Canvas.AUTO||a.style.overflow==isc.Canvas.HIDDEN))g-=isc.Element.getBottomMargin(e);if(g>b)b=g}}}return b},isc.A.getScrollWidth=function(a){if(a==null)return 0;var b=a.scrollWidth!=null&&
a.scrollWidth!="undefined"?a.scrollWidth:a.offsetWidth;a=this.$yr(a);return a>b?a:b},isc.A.$yr=function(a){if(a.childNodes==null)return 0;for(var b=0,c=document.ELEMENT_NODE||1,d=this.logIsDebugEnabled("sizing"),e=0;e<a.childNodes.length;e++){var f=a.childNodes.item(e);if(f.nodeType==c){var g=isc.Element.getComputedStyle(f,["position","display","left"]),h=0;if(g.position==isc.Canvas.ABSOLUTE||g.position==isc.Canvas.RELATIVE){h=isc.Element.getOffsetLeft(f);g=f.getAttribute("eventProxy");g=g!=null&&
!isc.isAn.emptyString(g)&&!window[g].$sv&&isc.isA.Function(window[g].getVisibleWidth)?window[g].getVisibleWidth():isc.Element.getVisibleWidth(f);var i=h+g;if(a.style.overflow==isc.Canvas.SCROLL||a.style.overflow==isc.Canvas.HIDDEN||a.style.overflow==isc.Canvas.AUTO)i-=isc.Element.getRightMargin(f);if(i>b)b=i;d&&this.logInfo("getChildNodesRight: child node "+e+" of "+a.childNodes.length+" ("+this.echoLeaf(f)+") left:"+h+", width: "+g+", right:"+i,"sizing")}}}return b},isc.A.getElementRect=function(a){var b=
this.getDocumentBody(),c=this.getLeftOffset(a,b);b=this.getTopOffset(a,b);var d=0,e=0;if(a.style&&a.style.overflow=="visible"){d=this.getScrollWidth(a);e=this.getScrollHeight(a)}d=Math.max(a.offsetWidth,a.clientWidth,d);e=Math.max(a.offsetHeight,a.clientHeight,e);return[c,b,d,e]},isc.A.getInnerWidth=function(a){var b=a.style.width;if(b!=null&&!isc.isAn.emptyString(b)){b=parseInt(b);if(isc.isA.Number(b))return b}a=a.clientWidth;b=parseInt(this.getComputedStyleAttribute("paddingLeft"));var c=parseInt(this.getComputedStyleAttribute("paddingRight"));
b=b+c;if(isc.isA.Number(b))a-=b;return a},isc.A.getInnerHeight=function(a){var b=a.style.height;if(b!=null&&!isc.isAn.emptyString(b)){b=parseInt(b);if(isc.isA.Number(b))return b}a=a.clientHeight;b=parseInt(this.getComputedStyleAttribute("paddingTop"));var c=parseInt(this.getComputedStyleAttribute("paddingBottom"));b=b+c;if(isc.isA.Number(b))a-=b;return a},isc.A.getNativeInnerWidth=function(a){if(isc.Browser.isMoz)return this.getInnerWidth(a);var b=a.offsetWidth;b||(b=this.getInnerWidth(a));return b},
isc.A.getNativeInnerHeight=function(a){if(isc.Browser.isMoz)return this.getInnerHeight(a);var b=a.offsetHeight;b||(b=this.getInnerHeight(a));return b},isc.A.getTopMargin=function(a){if(a!=null){var b;if(a.style!=null)b=parseInt(a.style.marginTop);if(isc.isA.Number(b))return b;if(a.className!=null)return isc.Element.$th(a.className)}return 0},isc.A.getBottomMargin=function(a){if(a!=null){var b;if(a.style!=null)b=parseInt(a.style.marginBottom);if(isc.isA.Number(b))return b;if(a.className!=null)return isc.Element.$ti(a.className)}return 0},
isc.A.getLeftMargin=function(a){if(a!=null){var b;if(a.style!=null)b=parseInt(a.style.marginLeft);if(isc.isA.Number(b))return b;if(a.className!=null)return isc.Element.$tf(a.className)}return 0},isc.A.getRightMargin=function(a){if(a!=null){var b;if(a.style!=null)b=parseInt(a.style.marginRight);if(isc.isA.Number(b))return b;if(a.className!=null)return isc.Element.$tg(a.className)}return 0},isc.A.getHMarginSize=function(a){return isc.Element.getLeftMargin(a)+isc.Element.getRightMargin(a)},isc.A.getVMarginSize=
function(a){return isc.Element.getTopMargin(a)+isc.Element.getBottomMargin(a)},isc.A.getTopBorderSize=function(a){if(a==null)return 0;if(isc.Browser.isOpera&&a.currentStyle.borderTopStyle==this.$27r)return 0;a=isc.Browser.isIE||isc.Browser.isOpera?parseInt(a.currentStyle.borderTopWidth):parseInt(isc.Element.getComputedStyleAttribute(a,"borderTopWidth"));return isNaN(a)?0:a},isc.A.getBottomBorderSize=function(a){if(a==null)return 0;if(isc.Browser.isOpera&&a.currentStyle.borderBottomStyle==this.$27r)return 0;
a=isc.Browser.isIE||isc.Browser.isOpera?parseInt(a.currentStyle.borderBottomWidth):parseInt(isc.Element.getComputedStyleAttribute(a,"borderBottomWidth"));return isNaN(a)?0:a},isc.A.getLeftBorderSize=function(a){if(a==null)return 0;if(isc.Browser.isOpera&&a.currentStyle.borderLeftStyle==this.$27r)return 0;a=isc.Browser.isIE||isc.Browser.isOpera?parseInt(a.currentStyle.borderLeftWidth):parseInt(isc.Element.getComputedStyleAttribute(a,"borderLeftWidth"));return isNaN(a)?0:a},isc.A.getRightBorderSize=
function(a){if(a==null)return 0;if(isc.Browser.isOpera&&a.currentStyle.borderRightStyle==this.$27r)return 0;a=isc.Browser.isIE||isc.Browser.isOpera?parseInt(a.currentStyle.borderRightWidth):parseInt(isc.Element.getComputedStyleAttribute(a,"borderRightWidth"));return isNaN(a)?0:a},isc.A.getVBorderSize=function(a){return isc.Element.getTopBorderSize(a)+isc.Element.getBottomBorderSize(a)},isc.A.getHBorderSize=function(a){return isc.Element.getLeftBorderSize(a)+isc.Element.getRightBorderSize(a)},isc.A.getVisibleWidth=
function(a){if(a==null)return 0;return(isc.Element.getComputedStyleAttribute(a,"overflow")==isc.Canvas.VISIBLE||!isc.isA.Number(parseInt(a.style.width))?isc.Element.getScrollWidth(a)+isc.Element.getHBorderSize(a):parseInt(a.style.width))+isc.Element.getHMarginSize(a)},isc.A.getVisibleHeight=function(a){if(a==null)return 0;return(isc.Element.getComputedStyleAttribute(a,"overflow")==isc.Canvas.VISIBLE||!isc.isA.Number(parseInt(a.style.height))?isc.Element.getScrollHeight(a)+isc.Element.getVBorderSize(a):
parseInt(a.style.height))+isc.Element.getVMarginSize(a)},isc.A.getOffsetLeft=function(a){if(a==null){this.logWarn("getOffsetLeft: passed null element");return 0}var b=a.offsetLeft;if(isc.Browser.isIE&&isc.Page.isRTL()&&b<0)b=-b;if(a.$ys==b)return a.$yt;var c=parseInt(isc.Element.getComputedStyleAttribute(a,"marginLeft"));if(isc.isA.Number(c)&&c>0)b-=c;c=this.getDocumentBody();var d,e=a.style.position;if(isc.Browser.isMoz){if(a.offsetParent==null)return b;if(a.offsetParent!=c){d=this.ns.Element.getComputedStyle(a.offsetParent,
["borderLeftWidth","overflow"]);var f=isc.Browser.geckoVersion;e=d.overflow!="visible"&&(f>=20051111||e==isc.Canvas.ABSOLUTE&&d.overflow!="hidden");f=f>20020826&&a.offsetParent.style.MozBoxSizing=="border-box";if(f!=e){if(f)b-=isc.isA.Number(parseInt(d.borderLeftWidth))?parseInt(d.borderLeftWidth):0;if(e)b+=isc.isA.Number(parseInt(d.borderLeftWidth))?parseInt(d.borderLeftWidth):0}}}if(isc.Browser.isIE&&!isc.Browser.isIE8Strict){f=a.offsetParent;if(d!=c)d=f.currentStyle;e=a.currentStyle.height!=isc.Canvas.AUTO||
a.currentStyle.width!=isc.Canvas.AUTO;for(var g=true;f!=c;){if(d.position==isc.Canvas.ABSOLUTE)g=false;if(d.width==isc.Canvas.AUTO&&d.height==isc.Canvas.AUTO&&d.position==isc.Canvas.RELATIVE){if(g&&isc.isA.String(d.borderLeftWidth)&&d.borderLeftWidth.contains("px"))b-=parseInt(d.borderLeftWidth);if(e){if(isc.isA.String(d.marginLeft)&&d.marginLeft.contains("px")){var h=parseInt(d.marginLeft);if(h>0)b-=h}if(f.offsetParent!=c){h=f.offsetParent.currentStyle.padding;if(isc.isA.String(h)&&h.contains("px"))b-=
parseInt(h)}else b-=c.leftMargin?parseInt(c.leftMargin):0}}f=f.offsetParent;if(f!=document.body)d=f.currentStyle}}if(isc.Browser.isSafari&&isc.Browser.safariVersion<525.271)if(a.offsetParent!=null&&a.offsetParent!=c){d=this.ns.Element.getComputedStyle(a.offsetParent,["borderLeftWidth"]).borderLeftWidth;if(d!=null)d=parseInt(d);if(isc.isA.Number(d))b-=d}a.$ys=a.offsetLeft;return a.$yt=b},isc.A.getOffsetTop=function(a){if(a==null){this.logWarn("getOffsetTop: passed null element");return 0}var b=a.offsetTop;
if(a.$yu==b)return a.$yv;var c=parseInt(isc.Element.getComputedStyleAttribute(a,"marginTop"));if(isc.isA.Number(c)&&c>0)b-=c;c=this.getDocumentBody();var d,e=a.style.position;if(isc.Browser.isMoz){if(a.offsetParent==null)return b;if(a.offsetParent!=c){d=this.ns.Element.getComputedStyle(a.offsetParent,["overflow","borderTopWidth"]);e=d.overflow!="visible"&&(isc.Browser.geckoVersion>=20051111||e==isc.Canvas.ABSOLUTE&&d.overflow!="hidden");var f=isc.Browser.geckoVersion>20020826&&a.offsetParent.style.MozBoxSizing==
"border-box";if(f!=e){if(f)b-=isc.isA.Number(parseInt(d.borderTopWidth))?parseInt(d.borderTopWidth):0;if(e)b+=isc.isA.Number(parseInt(d.borderTopWidth))?parseInt(d.borderTopWidth):0}}}if(isc.Browser.isIE)if(a.offsetParent&&a.offsetParent!=c){d=a.offsetParent.currentStyle;if(d.position==isc.Canvas.RELATIVE&&d.height==isc.Canvas.AUTO&&d.width==isc.Canvas.AUTO&&isc.isA.String(d.borderTopWidth)&&d.borderTopWidth.contains("px"))b-=parseInt(d.borderTopWidth)}if(isc.Browser.isSafari&&isc.Browser.safariVersion<
525.271)if(a.offsetParent&&a.offsetParent!=c){c=this.ns.Element.getComputedStyle(a.offsetParent,["borderTopWidth"]).borderTopWidth;if(c!=null)c=parseInt(c);if(isc.isA.Number(c))b-=c}a.$yu=a.offsetTop;return a.$yv=b},isc.A.getLeftOffset=function(a,b,c,d){return this.getOffset(isc.Canvas.LEFT,a,b,c,d)},isc.A.getTopOffset=function(a,b,c){return this.getOffset(isc.Canvas.TOP,a,b,null,c)},isc.A.getOffset=function(a,b,c,d,e){var f=e||isc.isA.Canvas(b),g=e||c==null||isc.isA.Canvas(c);e=f&&g&&this.cacheOffsetCoords&&
b.cacheOffsetCoords!=false;var h=a==isc.Canvas.LEFT?this.$808:this.$809;if(e&&b[h]!=null){var i=b[h][c?c.ID:this.$27r];if(i!=null){this.cacheCount++;return i}}this.uncachedCount++;var j=f?b.getClipHandle():b;f=c==null?this.getDocumentBody():g?c.getHandle():c;if(f==null||j==null)return 0;g=j.offsetParent;if(isc.Browser.isMoz&&g==null)return 0;i=f.offsetParent;var k=j;j=0;var l=(a=a==isc.Canvas.LEFT)?this.$w2:this.$w3,m=a?this.$oi:this.$ok;if(a){if(d==null)d=isc.Page.getTextDirection()==isc.Canvas.RTL}else d=
false;for(var n=0;g!=f&&g!=i;){k=a?this.ns.Element.getOffsetLeft(k):this.ns.Element.getOffsetTop(k);j+=k;if(d){if(isc.isA.Number(g.scrollLeft))j+=g.scrollWidth-g.clientWidth-g.scrollLeft}else j-=(a?g.scrollLeft:g.scrollTop)||0;var o;if(isc.Browser.isIE||isc.Browser.isOpera){k=g.currentStyle;o=isc.Browser.isOpera&&(a?k.borderLeftStyle==this.$27r:k.borderTopStyle==this.$27r)?null:parseInt(k[l]);if(isc.isA.Number(o))j+=o;k=parseInt(k[m]);if(isc.isA.Number(k)&&k>0)j+=k}else if(isc.Browser.isMoz){k=document.defaultView.getComputedStyle(g,
null);o=parseInt(k.getPropertyValue(l));j+=o;k=parseInt(k.getPropertyValue(m));if(k>0)j+=k}else{o=parseInt(this.getComputedStyleAttribute(g,l));if(isc.isA.Number(o))j+=o;k=parseInt(this.getComputedStyleAttribute(g,m));if(isc.isA.Number(k)&&k>0)j+=k}k=g;g=k.offsetParent;n++}j+=a?this.ns.Element.getOffsetLeft(k):this.ns.Element.getOffsetTop(k);if(g==i)j-=a?this.ns.Element.getOffsetLeft(f):this.ns.Element.getOffsetTop(f);if(e)(b[h]=b[h]||{})[c?c.ID:this.$27r]=j;return j},isc.A.getStyleEdges=function(a){if(isc.Browser.isSafari&&
!isc.Element.$x1){isc.Browser.isStrict=isc.Element.$x2();isc.Element.$x1=true}if(a==null)return null;if(this.$nk[a]!==void 0)return this.$nk[a];var b;b=isc.Browser.isMoz&&isc.Browser.geckoVersion<20040616?this.getStyleDeclaration(a):this.$x5(a,isc.Browser.isIE?this.$x3:this.$x4);return this.$nk[a]=b},isc.A.$x2=function(){if(document.compatMode!=null)return document.compatMode=="CSS1Compat";var a=isc.Element.createAbsoluteElement("<TABLE cellspacing=0 cellpadding=2 border=0><tr><td height=30>x</td></tr></TABLE>"),
b=a.offsetHeight>30;isc.Element.clear(a);return b},isc.A.$x5=function(a,b){var c=isc.Browser.isIE||isc.Browser.isOpera||isc.Browser.isSafari||isc.Browser.isMoz&&isc.Browser.geckoVersion>=20080205;if(!this.$x6){this.createAbsoluteElement("<TABLE CELLPADDING=81 STYLE='position:absolute;left:0px;top:-2000px;'><TR><TD "+(isc.Browser.isIE8Strict?" ID=isc_cellStyleTester STYLE='border:0px;margin:0px'><DIV ID=isc_cellInnerStyleTester>"+isc.Canvas.blankImgHTML(30,30)+"</DIV></TD>":" ID=isc_cellStyleTester>&nbsp;</TD><TD ID=isc_cellNoStyleTester>&nbsp;</TD></TR></TABLE>"));
this.$x6=isc.Element.get("isc_cellStyleTester");if(isc.Browser.isIE8Strict)this.$62a=isc.Element.get("isc_cellInnerStyleTester");this.$x7="81px";if(isc.Browser.isSafari||isc.Browser.isChrome){var d=this.getComputedStyle(isc.Element.get("isc_cellNoStyleTester"),["paddingLeft"]).paddingLeft;if(d!=this.$x7){this.logDebug("Browser natively misreporting cell-padding (81px reported as:"+d+"). This behavior is known to occur when the view is zoomed in certain browsers but is worked around by SmartClient and should have no visible effect on the application.",
"sizing");this.$x7=d}}this.$x8="-16384px";if(c){this.createAbsoluteElement("<DIV ID=isc_styleTester STYLE='position:absolute;left:0px;top:-2000px;'>&nbsp;</DIV>");this.$x9=isc.Element.get("isc_styleTester");this.$ya=["marginLeft","marginTop","marginRight","marginBottom"];isc.Browser.isIE8Strict&&this.$ya.addList(["borderLeftWidth","borderTopWidth","borderRightWidth","borderBottomWidth"])}}this.$x6.className=a;d=this.getComputedStyle(this.$x6,b);var e=this.$x7;if(d.paddingLeft==e)d.paddingLeft=null;
if(d.paddingTop==e)d.paddingTop=null;if(d.paddingRight==e)d.paddingRight=null;if(d.paddingBottom==e)d.paddingBottom=null;if(isc.Browser.isIE8Strict){var f=this.$62a;e=f.offsetLeft;f=f.offsetTop;if(e==81)d.paddingLeft=null;if(f==81)d.paddingTop=null;if(this.$x6.offsetWidth-e-30==81)d.paddingRight=null;if(this.$x6.offsetHeight-f-30==81)d.paddingBottom=null}if(isc.Browser.isSafari){if(isc.Browser.safariVersion<419.3){e=isc.Canvas.AUTO;if(d.paddingLeft==e)d.paddingLeft=null;if(d.paddingTop==e)d.paddingTop=
null;if(d.paddingRight==e)d.paddingRight=null;if(d.paddingBottom==e)d.paddingBottom=null}e=this.$x8;if(d.marginTop==e)d.marginTop=null;if(d.marginBottom==e)d.marginBottom=null}if(c){this.$x9.className=a;c=this.getComputedStyle(this.$x9,this.$ya);d.marginLeft=c.marginLeft;d.marginRight=c.marginRight;d.marginTop=c.marginTop;d.marginBottom=c.marginBottom;if(isc.Browser.isIE8Strict){d.borderLeftWidth=c.borderLeftWidth;d.borderRightWidth=c.borderRightWidth;d.borderTopWidth=c.borderTopWidth;d.borderBottomWidth=
c.borderBottomWidth}}return d},isc.A.getComputedStyle=function(a,b){var c,d;c=isc.isA.String(a)?isc.Element.get(a):a;if(c==null||!isc.isAn.Object(c)){this.logWarn("getComputedStyle: Unable to get to DOM element specified by '"+a+"'."+this.getStackTrace());return null}if(isc.Browser.isIE||isc.Browser.isOpera){d=c.currentStyle;if(b==null)b=this.$yb;return isc.applyMask(d,b)}if(b==null)b=this.$yc;else if(isc.isAn.Array(b)){d={};for(var e=this.$yc,f=0;f<b.length;f++)d[b[f]]=e[b[f]];b=d}e=isc.Browser.isSafari&&
isc.Browser.safariVersion<312;var g;if(e){d=c.style;g=this.getStyleDeclaration(c.className)}else d=document.defaultView.getComputedStyle(c,null);c={};for(var h in b){c[h]=d.getPropertyValue(b[h]);if(e&&c[h]==null&&g!=null&&g[h]!=null&&!isc.isAn.emptyString(g[h]))c[h]=g[h]}return c},isc.A.getComputedStyleAttribute=function(a,b){if(a==null||b==null)return null;if(isc.Browser.isIE||isc.Browser.isOpera){if(a.currentStyle==null)return null;if(isc.Browser.isOpera&&this.$419[b]!=null&&a.currentStyle[this.$419[b]]==
this.$27r)return 0;return a.currentStyle[b]}if(isc.Browser.isSafari){var c=null;if(a.style)c=a.style[b];if((c==null||isc.isAn.emptyString(c))&&a.className){var d=isc.Element.getStyleEdges(a.className);if(d)c=d[b]}if(isc.isAn.emptyString(c))return null;return c}d=this.$yc;c=this.$yd=this.$yd||document.defaultView;d=d[b]||b;return c.getComputedStyle(a,null).getPropertyValue(d)},isc.A.getStyleDeclaration=function(a,b){if(!a)return null;isc.allowDuplicateStyles||(b=false);if(isc.Browser.isSafari&&isc.Browser.safariVersion>=
312)a=a.toLowerCase();for(var c="."+a,d,e=b?[]:null,f=document.styleSheets.length-1;f>=0;f--){var g=this.$ye(document.styleSheets[f]);if(g!=null)for(var h=g.length-1;h>=0;h--){d=g[h].selectorText;if(d!=null){if(isc.Browser.isSafari&&isc.Browser.safariVersion>=312)d=d.toLowerCase();if(isc.Browser.isMoz)for(var i=d.split(", "),j=0;j<i.length;j++){if(i[j]==c){d=g[h].style;if(d!=null)if(b)e[e.length]=d;else return d}}else if(d==c){d=g[h].style;if(d!=null)if(b)e[e.length]=d;else return d}}}}if(b&&e.length>
0)return e;return null},isc.A.$ye=function(a){if(!this.$yf)this.$yf=new Function("$yg","try{return $yg.rules||$yg.cssRules}catch(e){isc.Page.$yh = true}");return this.$yf(a)},isc.A.getStyleText=function(a,b){isc.allowDuplicateStyles||(b=false);var c=this.$nl,d=c[a];if(d!=null)return d;var e=this.getStyleDeclaration(a,b);if(e==null){if(!isc.Browser.isSafari||isc.Page.isLoaded())this.$nl[a]=isc.emptyString;return isc.emptyString}if(b){for(var f=e.length-1;f>-1;f--){var g=e[f].cssText;if(g!=null){isc.endsWith(g,
this.$39)||(g+=this.$39);if(d==null)d=g;else d+=g}}if(d==null)d=isc.$ad}else d=e.cssText||isc.$ad;isc.endsWith(d,isc.semi)||(d+=isc.semi);return c[a]=d},isc.A.$50f=function(){isc.Element.$nk={};isc.Element.$nl={};isc.Element.$yj=isc.Element.$yk=isc.Element.$yl=null},isc.A.$th=function(a){return this.$sd(a).top},isc.A.$ti=function(a){return this.$sd(a).bottom},isc.A.$tf=function(a){return this.$sd(a).left},isc.A.$tg=function(a){return this.$sd(a).right},isc.A.$sd=function(a){if(this.$yk==null)this.$yk=
{};else if(this.$yk[a]!=null)return this.$yk[a];var b={top:0,bottom:0,left:0,right:0},c=isc.Element.getStyleEdges(a);if(c==null)return b;var d=c.marginTop,e=c.marginBottom,f=c.marginLeft;c=c.marginRight;var g=isc.px;if(isc.isA.String(d)&&isc.endsWith(d,g))b.top=parseInt(d);if(isc.isA.String(e)&&isc.endsWith(e,g))b.bottom=parseInt(e);if(isc.isA.String(f)&&isc.endsWith(f,g))b.left=parseInt(f);if(isc.isA.String(c)&&isc.endsWith(c,g))b.right=parseInt(c);return this.$yk[a]=b},isc.A.$tn=function(a){return this.$tj(a).top},
isc.A.$to=function(a){return this.$tj(a).bottom},isc.A.$tl=function(a){return this.$tj(a).left},isc.A.$tm=function(a){return this.$tj(a).right},isc.A.$tj=function(a){if(this.$yj==null)this.$yj={};else if(this.$yj[a]!=null)return this.$yj[a];var b={top:0,bottom:0,left:0,right:0},c=isc.Element.getStyleEdges(a);if(c==null)return b;var d=c.borderTopWidth,e=c.borderBottomWidth,f=c.borderLeftWidth;c=c.borderRightWidth;var g=isc.px;if(isc.isA.String(d)&&isc.endsWith(d,g))b.top=parseInt(d);if(isc.isA.String(e)&&
isc.endsWith(e,g))b.bottom=parseInt(e);if(isc.isA.String(f)&&isc.endsWith(f,g))b.left=parseInt(f);if(isc.isA.String(c)&&isc.endsWith(c,g))b.right=parseInt(c);return this.$yj[a]=b},isc.A.$ym=function(a){return this.$tn(a)+this.$to(a)},isc.A.$yn=function(a){return this.$tl(a)+this.$tm(a)},isc.A.$tt=function(a,b){var c=this.$tq(a);if(b&&c.nullTop)return null;return c.top},isc.A.$tu=function(a,b){var c=this.$tq(a);if(b&&c.nullBottom)return null;return c.bottom},isc.A.$tr=function(a,b){var c=this.$tq(a);
if(b&&c.nullLeft)return null;return c.left},isc.A.$ts=function(a,b){var c=this.$tq(a);if(b&&c.nullRight)return null;return c.right},isc.A.$tq=function(a){if(this.$yl==null)this.$yl={};else if(this.$yl[a]!=null)return this.$yl[a];var b={top:0,bottom:0,left:0,right:0},c=isc.Element.getStyleEdges(a);if(c==null){b.nullLeft=true;b.nullRight=true;b.nullTop=true;b.nullBottom=true;return b}var d=c.paddingTop,e=c.paddingBottom,f=c.paddingLeft;c=c.paddingRight;var g=isc.px;b.nullTop=d==null||d==isc.emptyString;
b.nullBottom=e==null||e==isc.emptyString;b.nullLeft=f==null||f==isc.emptyString;b.nullRight=c==null||c==isc.emptyString;if(isc.isA.String(d)&&isc.endsWith(d,g))b.top=parseInt(d);if(isc.isA.String(e)&&isc.endsWith(e,g))b.bottom=parseInt(e);if(isc.isA.String(f)&&isc.endsWith(f,g))b.left=parseInt(f);if(isc.isA.String(c)&&isc.endsWith(c,g))b.right=parseInt(c);return this.$yl[a]=b},isc.A.$s1=function(a){return this.$tt(a)+this.$tu(a)},isc.A.$sw=function(a){return this.$tr(a)+this.$ts(a)},isc.A.$yo=function(a){return this.$ym(a)+
this.$s1(a)},isc.A.$yp=function(a){return this.$yn(a)+this.$sw(a)},isc.A.getNativeScrollbarSize=function(){if(isc.Element.$yi==null){if(isc.Browser.isMobileWebkit)return isc.Element.$yi=16;this.createAbsoluteElement("<div id=isc_ScrollbarTest style='position:absolute;top:-100px;border:0px;padding:0px;margin:0px;height:100px;width:100px;overflow:scroll;'>"+isc.nbsp+"</div>");var a=this.get("isc_ScrollbarTest");isc.Element.$yi=parseInt(a.style.height)-a.clientHeight;this.clear(a)}return isc.Element.$yi},
isc.A.getRotationCSS=function(a,b){var c=this.vendorCSSPrefix,d=c+"transform: rotate("+a+"deg);";if(b!=null)d+=c+"transform-origin: "+b+";";return d});isc.B._maxIndex=isc.C+69;isc.Element.$50g=function(){var a=this.$x4={borderLeftWidth:"border-left-width",borderRightWidth:"border-right-width",borderTopWidth:"border-top-width",borderBottomWidth:"border-bottom-width",marginLeft:"margin-left",marginRight:"margin-right",marginTop:"margin-top",marginBottom:"margin-bottom",paddingLeft:"padding-left",paddingRight:"padding-right",
paddingTop:"padding-top",paddingBottom:"padding-bottom"},b=this.$yc=isc.addProperties({position:"position",overflow:"overflow",top:"top",left:"left",width:"width",height:"height",display:"display"},a);if(isc.Browser.isIE||isc.Browser.isOpera){this.$yb=isc.getKeys(b);this.$x3=isc.getKeys(a)}};isc.Element.$50g();isc.ClassFactory.defineClass("Canvas");isc.isA.Canvas=function(a){return a!=null&&a._isA_Canvas};isc.A=isc.Canvas;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=
isc.A.Class;isc.A._isA_Canvas=true;isc.A.AUTO="auto";isc.A.ANYTHING="**anything**";isc.A.ABSOLUTE="absolute";isc.A.RELATIVE="relative";isc.A.INHERIT="inherit";isc.A.VISIBLE="visible";isc.A.HIDDEN="hidden";isc.A.COMPLETE="complete";isc.A.DRAWN="complete";isc.A.DRAWING_HANDLE="drawingHandle";isc.A.HANDLE_DRAWN="handleDrawn";isc.A.UNDRAWN="undrawn";isc.A.SCROLL="scroll";isc.A.CLIP_H="clip-h";isc.A.CLIP_V="clip-v";isc.A.IGNORE="ignore";isc.A.NATIVE="native";isc.A.CLIP="clip";isc.A.NESTED_DIV="nestedDiv";
isc.A.CENTER="center";isc.A.LEFT="left";isc.A.RIGHT="right";isc.A.TOP="top";isc.A.BOTTOM="bottom";isc.A.UP="up";isc.A.DOWN="down";isc.A.BOTH="both";isc.A.NONE="none";isc.A.VERTICAL="vertical";isc.A.HORIZONTAL="horizontal";isc.A.MARKED="marked";isc.A.MIDDLE="middle";isc.A.ALL="all";isc.A.DEFAULT="default";isc.A.ARROW="default";isc.A.WAIT="wait";isc.A.HAND=isc.Browser.isMoz||isc.Browser.isSafari&&isc.Browser.isStrict?"pointer":"hand";isc.A.MOVE="move";isc.A.HELP="help";isc.A.TEXT="text";isc.A.CROSSHAIR=
"crosshair";isc.A.NOT_ALLOWED="not-allowed";isc.A.COL_RESIZE=isc.Browser.isIE&&isc.Browser.version>=6?"col-resize":"e-resize";isc.A.ROW_RESIZE=isc.Browser.isIE&&isc.Browser.version>=6?"row-resize":"n-resize";isc.A.TILE="tile";isc.A.STRETCH="stretch";isc.A.NORMAL="normal";isc.A.REPEAT="repeat";isc.A.NO_REPEAT="no-repeat";isc.A.REPEAT_X="repeat-x";isc.A.REPEAT_Y="repeat-y";isc.A.LTR="ltr";isc.A.RTL="rtl";isc.A.BEFORE="before";isc.A.AFTER="after";isc.A.NEAREST="nearest";isc.A.$ng=2E5;isc.A.$nh=199950;
isc.A.$ni=8E5;isc.A.TAB_INDEX_GAP=50;isc.A.TAB_INDEX_FLOOR=1E3;isc.A.TAB_INDEX_CEILING=32766;isc.A.$nj=[];isc.A.textStyleAttributes=["fontFamily","fontSize","color","backgroundColor","fontWeight","fontStyle","textDecoration","textAlign"];isc.A.$816=[];isc.A.allowExternalFilters=true;isc.A.$nm=[];isc.A._redrawQueueDelay=0;isc.A.$nn=200;isc.A._canvasList=[];isc.A._iscInternalCount=0;isc.A._stats={redraws:0,clears:0,destroys:0,draws:0};isc.A.$no={};isc.A.$np={};isc.A.$nq=[];isc.A.useMozBackMasks=false;
isc.A.useNativeWheelDelta=true;isc.A.scrollWheelDelta=50;isc.A.loadingImageSrc="[SKINIMG]loadingSmall.gif";isc.A.loadingImageSize=16;isc.B.push(isc.A.$814=function(){this.$42a=isc.Browser.isIE&&(!this.neverUseFilters||this.allowExternalFilters)?"margin:0px;border:0px;padding:0px;background-color:transparent;filter:none;background-image:none;":"margin:0px;border:0px;padding:0px;background-image:none;background-color:transparent;";isc.Canvas.addProperties({$4o:"' style='"+isc.Canvas.$42a});for(var a=
0;a<this.$816.length;a++){var b=this.$816[a];b.target==null||b.target.destroyed||b.target[b.methodName](this.$42a)}},isc.A.setNeverUseFilters=function(a){this.neverUseFilters=a;this.$814()},isc.A.setAllowExternalFilters=function(a){this.allowExternalFilters=a;this.$814()});isc.B._maxIndex=isc.C+3;isc.Canvas.$814();isc.A=isc.Canvas.getPrototype();isc.A._isA_Canvas=true;isc.A.autoDraw=true;isc.A.htmlPosition="afterBegin";isc.A.position=null;isc.A.left=0;isc.A.top=0;isc.A.defaultWidth=100;isc.A.defaultHeight=
100;isc.A.minWidth=10;isc.A.maxWidth=1E4;isc.A.minHeight=10;isc.A.maxHeight=1E4;isc.A.zIndex=isc.Canvas.AUTO;isc.A.autoShowParent=false;isc.A.visibility=isc.Canvas.INHERIT;isc.A.styleName="normal";isc.A.contents=isc.nbsp;isc.A.backgroundRepeat=isc.Canvas.REPEAT;isc.A.mozOutlineOffset="-1px";isc.A.appImgDir="";isc.A.skinImgDir="images/";isc.A.cursor=isc.Canvas.DEFAULT;isc.A.disabledCursor=isc.Canvas.DEFAULT;isc.A.noDropCursor=isc.Canvas.NOT_ALLOWED;isc.A.$65q=isc.Browser.isMoz&&isc.Browser.geckoVersion<
20081201;isc.A.overflow=isc.Canvas.VISIBLE;isc.A.alwaysShowVScrollbar=false;isc.A.showCustomScrollbars=!(isc.Browser.isOpera||isc.Browser.isIE&&isc.Browser.version>4||isc.Browser.isUnix&&isc.Browser.isMoz&&isc.Browser.geckoVersion>=20020826&&isc.Browser.geckoVersion<=20031007);isc.A.scrollbarSize=16;isc.A.scrollbarConstructor="Scrollbar";isc.A.scrollLeft=0;isc.A.scrollTop=0;isc.A.scrollDelta=20;isc.A.$nr="unset";isc.A.enabled="unset";isc.A.redrawOnDisable=false;isc.A.$jp=true;isc.A.$jo=true;isc.A.$ns=
true;isc.A.$nt=true;isc.A.$jq=true;isc.A._redrawWithParent=true;isc.A.showFocusOutline=true;isc.A._useNativeTabIndex=isc.Browser.isIE&&isc.Browser.version>=5||isc.Browser.isMoz&&isc.Browser.geckoVersion>=20051111;isc.A.$kn=isc.Browser.isMoz&&isc.Browser.geckoVersion<20051111||isc.Browser.isSafari&&!isc.Browser.isTouch||isc.Browser.isOpera;isc.A.contextMenuProperties={autoDraw:false,width:200,showIcons:true};isc.A.menuConstructor="Menu";isc.A.clippedCorners=["TL","TR","BL","BR"];isc.A.cornerClipColor=
"FFFFFF";isc.A.cornerClipImage="[SKIN]corner.gif";isc.A.cornerClipSize=10;isc.A.$nv={_generated:true,overflow:"hidden",$jp:false,$jo:false,autoDraw:false,skinImgDir:"images/corners/",draw:function(){this.Super("draw",arguments)}};isc.A.dragOutlineStyle="dragOutline";isc.A.dragStartDistance=5;isc.A.canDragScroll=true;isc.A.dragScrollDelay=100;isc.A.dragScrollThreshold="10%";isc.A.minDragScrollIncrement=1;isc.A.maxDragScrollIncrement="5%";isc.A.dragIntersectStyle=isc.EventHandler.INTERSECT_WITH_MOUSE;
isc.A.dragRepositionCursor=isc.Canvas.MOVE;isc.A.dragScrollType="any";isc.A.hoverDelay=300;isc.A.showHover=true;isc.A.edgeMarginSize=5;isc.A.edgeCursorMap={T:"n-resize",L:"w-resize",B:"s-resize",R:"e-resize",TL:"nw-resize",TR:"ne-resize",BL:"sw-resize",BR:"se-resize"};isc.A.dragAppearance=isc.EventHandler.OUTLINE;isc.A.dropTypes=isc.Canvas.ANYTHING;isc.A.mouseStillDownInitialDelay=400;isc.A.mouseStillDownDelay=100;isc.A.doubleClickDelay=250;isc.A.refreshVariable="refresh";isc.A.$ks=isc.Browser.isMoz&&
(!isc.Browser.isUnix||isc.Browser.geckoVersion>20031007);isc.A.useClipDiv=isc.Browser.isMoz||isc.Browser.isSafari||isc.Browser.isOpera;isc.A.manageChildOverflow=true;isc.A.$nw={};isc.A.percentBox="visible";isc.A.$520="viewport";isc.A.snapHGap=20;isc.A.snapVGap=20;isc.A.snapHDirection=isc.Canvas.AFTER;isc.A.snapVDirection=isc.Canvas.AFTER;isc.A.snapAxis=isc.Canvas.BOTH;isc.A.snapOnDrop=true;isc.A=isc.Canvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=
isc.A.Class;isc.A.$nx="resize";isc.A.$ny="draw";isc.A.$nz="hidden";isc.A.$n0="redraw";isc.A.$n1="undefined";isc.A.$n2="draws";isc.A.$n3="drawing";isc.A.$n4="redraws";isc.A.$n5="autoDraw";isc.A.$n6="beforeBegin";isc.A.$n7="afterBegin";isc.A.$n8="beforeEnd";isc.A.$n9="afterEnd";isc.A.$oa=">";isc.A.$ob="'";isc.A.$77b='"';isc.A.$oc="initWidget";isc.A.$55w="html";isc.A.$od="initial draw";isc.A.$oe="parentDrawn";isc.A.$of="eventProxy";isc.A.reuseDOMIDs=false;isc.A.$og="canvas";isc.A.$oh="canvas_clipDiv";
isc.A.$oi="MARGIN-LEFT:";isc.A.$oj="MARGIN-RIGHT:";isc.A.$ok="MARGIN-TOP:";isc.A.$ol="MARGIN-BOTTOM:";isc.A.$om="MARGIN:";isc.A.$on="</div>";isc.A.$oo="</div></div>";isc.A.$op=[];isc.A.isBorderBox=isc.Browser.isMoz||isc.Browser.isBorderBox;isc.A.$oq="isc.EH.focusInCanvas(";isc.A.$or="if(event.target!=this)return;isc.EH.focusInCanvas(";isc.A.$os="if(window.isc)isc.EH.blurFocusCanvas(";isc.A.$ot=",true);";isc.A.$ou="autoChild:";isc.A.$ov=["<DIV ID='",null,"'style='position:absolute;width:1px;height:1px;overflow:hidden;left:",
null,"px;top:",null,"px;'>&nbsp;</DIV>"];isc.A.$ow="scrollSizeDiv";isc.A.$ox="enforceScrollSize";isc.A.$oy="-1px";isc.A.useClientRectAPI=isc.Browser.isMoz&&isc.Browser.geckoVersion>20071109;isc.A.useBoxObjectAPI=false;isc.A.useBoxObjectAPISelectively=true;isc.A.$65h="0px";isc.A.$oz="left";isc.A.$o0="top";isc.A.$o1="right";isc.A.$o2="bottom";isc.A.$o3="center";isc.A.$o4="childMoved";isc.A.$o5="height";isc.A.$o6="width";isc.A.$oz="left";isc.A.$o0="top";isc.A.$o7="$o8";isc.A.$o9="%";isc.A.$pa="*";isc.A.$pb=
{height:"_percent_height",width:"_percent_width",left:"_percent_left",top:"_percent_top"};isc.A.$pc="resized";isc.A.$pd="childResized";isc.A.momentumScrolling=true;isc.A.momentumScrollTime=1500;isc.A.momentumScrollAcceleration="smoothStart";isc.A.hoopSelectorDefaults={_constructor:"Canvas",keepInParentRect:true,redrawOnResize:false,overflow:"hidden",border:"1px solid blue",opacity:10,backgroundColor:"blue"};isc.A.hoopSelectAxis="both";isc.A.shouldSetNoDropTracker=isc.Browser.isOpera;isc.A.noDropTracker=
"[SKIN]/shared/no_drop.png";isc.A.adjustOverflowWhileDirty=true;isc.A.$pe={hidden:true,visible:true,scroll:true,auto:true,"clip-v":true,"clip-h":true,ignore:true};isc.A.$pf="sizing";isc.A.$pg="overflow";isc.A.$ph="px";isc.A.$27r="none";isc.A.$411="relative";isc.A.$pi="disabled";isc.A.$27r="none";isc.A.$pj="styleName";isc.A.$pk="eventpart";isc.A.$f8="count";isc.A.$pl=["edgeImage","edgeColor","customEdges","shownEdges","edgeSize","edgeTop","edgeBottom","edgeLeft","edgeRight","edgeOffset","edgeOffsetTop",
"edgeOffsetBottom","edgeOffsetLeft","edgeOffsetRight","canDragResize","canDragReposition"];isc.A.shadowDepth=4;isc.A.dragResizeFromShadow=true;isc.A.$pm="shadow";isc.A.isGroup=false;isc.A.groupBorderCSS="2px solid black";isc.A.groupLabelPadding=10;isc.A.showGroupLabel=true;isc.A.groupLabelStyleName="groupLabel";isc.A.groupLabelDefaults={_constructor:"Label",overflow:"visible",height:1,width:1,wrap:false,vAlign:"center",align:"center"};isc.B.push(isc.A.init=function(a,b,c,d,e,f,g,h,i,j,k,l,m){if(isc.$cv)arguments.$cw=
this;if(!isc.Canvas.$80c){this.getDocumentBody(true)==null&&isc.logWarn("Canvas created in a page outside the BODY tag. This is not supported. Isomorphic Software requires the tag to be present and all widgets be created and drawn inside it. Canvas details follow:\n"+isc.Log.echo(this));isc.Canvas.$80c=true}this.ns.ClassFactory.addGlobalID(this);this._canvasList(true);if(this.position==null)this.position=this.htmlElement!=null?isc.Canvas.RELATIVE:isc.Canvas.ABSOLUTE;this.className!=null&&this.logIsInfoEnabled(this.$pj)&&
this.logInfo("'className' property specified. This property has been deprecated in favor of 'styleName' as of SmartClient 5.5.",this.$pj);if(this.styleName!=null)if(this.className!=null)if(this.styleName!=this.getPrototype().styleName)this.className=this.styleName;else this.styleName=this.className;else this.className=this.styleName;else if(this.className!=null)this.styleName=this.className;if(this.size!=null)this.height=this.width=this.size;this.$pn=this.width;this.$po=this.height;if(this.width==
null)this.width=this.defaultWidth;if(this.height==null)this.height=this.defaultHeight;this.$o8=this.height;if(isc.isA.String(this.margin)){var n=parseInt(this.margin);if(isc.isA.Number(n))this.margin=n;else{this.logWarn("Invalid setting for this.margin:"+this.margin+". This should be a numeric value - ignoring");this.margin=null}}if(isc.isA.String(this.padding)){n=parseInt(this.padding);if(isc.isA.Number(n))this.padding=n;else{this.logWarn("Invalid setting for this.padding:"+this.padding+". This should be set to a numeric value - ignoring");
this.padding=null}}if(this.border!=null&&!isc.isA.String(this.border))this.border=this.$63e(this.border);this.percentSource&&this.setPercentSource(this.percentSource,true);this.$pp=true;this.resizeTo(this.width,this.$o8);this.moveTo(this.left,this.top);this.$pp=null;if(this.children&&!isc.isAn.Array(this.children))this.children=[this.children];if(this.peers&&!isc.isAn.Array(this.peers))this.peers=[this.peers];if(this.enabled!=this.$nr){this.logWarn("Widget initialized with explicitly specified 'enabled' property. This property has been deprecated - use 'disabled' instead.");
this.disabled=!this.enabled}if(this.redrawOnEnable!=null){this.logWarn("Widget initialized with deprecated 'redrawOnEnable' - use 'redrawOnDisable' instead.");this.redrawOnDisable=this.redrawOnEnable}this.initWidget(a,b,c,d,e,f,g,h,i,j,k,l,m);this.$pq();this.showShadow&&this.$pr();this.clipCorners&&this.$ps();if(this.useBackMask&&(isc.Browser.isIE&&isc.Browser.minorVersion>=5.5||isc.Canvas.useMozBackMasks&&isc.Browser.isMoz))this.makeBackMask();if(this.isGroup){delete this.isGroup;this.setIsGroup(true)}this.children&&
this.children.setProperty(this.$n5,false);this.peers&&this.peers.setProperty(this.$n5,false);if(this.observes)for(var o,s=this.observes,r=s.length,t=0;t<r;t++)if(n=s[t])(o=isc.isA.String(n.source)?this.getGlobalReference(n.source):n.source)&&this.observe(o,n.message,n.action);this.$pt();this.autoChildren&&this.addAutoChildren(this.autoChildren);this.addOns&&this.addAutoChildren(this.addOns);if(this._adjacentHandle&&!this.drawContext)this.drawContext={element:this._adjacentHandle};if(this.htmlElement){n=
this.htmlElement;delete this.htmlElement;this.setHtmlElement(n)}if(this.eventProxy!=null)if(isc.isA.Canvas(this.eventProxy)){if(this.eventProxy.$kt==null)this.eventProxy.$kt=[];this.eventProxy.$kt.add(this)}else{this.logWarn("Canvas ID:'"+this.getID()+"' initialized with bad eventProxy. This property should be set to another Canvas instance. Clearing this property.");delete this.eventProxy}if(n=this.parentElement){this.parentElement=null;if(isc.isA.String(n))n=window[n];n.addChild(this)}if(this.autoFetchAsFilter!=
null){n=this.autoFetchAsFilter?"substring":"exact";this.logWarn("This component has autoFetchAsFilter explicitly specified as:"+this.autoFetchAsFilter+'. This attribute is deprecated in favor of this.autoFetchTextMatchStyle. Defaulting autoFetchTextMatchStyle to "'+n+'" based on this setting.');this.autoFetchTextMatchStyle=n}this.initializeValuesManager();if(this.showPanelHeader==true){this.setupPanelHeader&&this.setupPanelHeader();this.refreshPanelControls&&this.refreshPanelControls()}if(this.autoDraw&&
!this.parentElement&&!isc.noAutoDraw)isc.Browser.isSafari&&!isc.Browser.isChrome&&isc.deferAutoDraw&&!isc.Page.isLoaded()&&this.position!="relative"?isc.Page.setEvent("load","if(window."+this.getID()+")"+this.getID()+".$77f()"):this.draw()},isc.A.$77f=function(){this.destroyed||this.isDrawn()||this.draw()},isc.A.initWidget=function(){},isc.A.setID=function(a){(this.pointersToThis=this.pointersToThis||[]).add({object:window,property:this.ID});this.ID=a;window[this.ID]=this;this.clear();this.draw()},
isc.A.clearIDs=function(){this.clear();window[this.ID]=null;if(this.children)for(var a=0;a<this.children.length;a++)this.children[a].clearIDs();if(this.peers)for(a=0;a<this.peers.length;a++)this.peers[a].clearIDs()},isc.A.getDrawnState=function(){if(this.$if==true)return isc.Canvas.COMPLETE;if(this.$pu==true)return isc.Canvas.HANDLE_DRAWN;if(this.$pv==true)return isc.Canvas.DRAWING_HANDLE;return isc.Canvas.UNDRAWN},isc.A.setDrawnState=function(a){this.$if=a==isc.Canvas.COMPLETE?true:false;this.$pu=
a==isc.Canvas.HANDLE_DRAWN?true:false;this.$pv=a==isc.Canvas.DRAWING_HANDLE?true:false},isc.A.isDrawn=function(){return!!this.$if},isc.A.handleDrawn=function(){return!!this.$pu},isc.A.getID=function(){this.ID==null&&this.ns.ClassFactory.addGlobalID(this);return this.ID},isc.A.getAttribute=function(a){return this[a]},isc.A.getInnerHTML=function(){var a;if(this.containsIFrame()){a=this.getContentsURL();a=isc.Page.getURL(a);if(isc.rpc)a=isc.rpc.addParamsToURL(a,this.contentsURLParams);isc.EventHandler.registerMaskableItem(this,
true);a=this.getIFrameHTML(a)}else a=this.getContents();return a},isc.A.getIFrameHTML=function(a){return"<iframe height='100%' width='100%' scrolling='"+(this.overflow==isc.Canvas.HIDDEN?"no'":"auto'")+(isc.Browser.isSafari?" id="+this.$qs("iframe"):"")+" frameborder='0' src=\""+a+'"></iframe>'},isc.A.$pw=function(){var a=this.getDrawnState();if(!(a!=isc.Canvas.COMPLETE&&a!=isc.Canvas.HANDLE_DRAWN)){a=(a=this.getHandle())?a.firstChild:null;if(a!=null)a.style.height=this.getInnerContentHeight()-2+
isc.px}},isc.A.$px=function(a){if(isc.$cv)arguments.$cw=this;var b=this.getInnerHTML(a);if(this.$pz){var c=this.$pz.join(isc.emptyString);b=b==null||b==isc.nbsp?c:b+c}return b},isc.A.readyToDraw=function(){var a=this.getDrawnState();if(this.getDrawnState()!=isc.Canvas.UNDRAWN){a=this.getDrawnState();this.logWarn("draw() called on widget with current drawn state: "+a+(a==isc.Canvas.COMPLETE?", use redraw() instead.":", ignoring.")+this.getStackTrace(),"drawing");return false}if(this.showIf!=null){this.convertToMethod("showIf");
if(this.showIf(this)==false)return false}if(this.getHeight()<=0||this.getWidth()<=0){if(this.$77g){this.$77h();return false}this.logWarn("negative or zero area: height: "+this.getHeight()+", width: "+this.getWidth()+", refusing to draw"+this.getStackTrace(),"drawing");return false}if(this.deferredDrawEvent!=null){this.logInfo("draw() called while object already pending a delayed draw - no action to take","drawing");return false}if(this.parentElement!=null&&(!isc.isA.Canvas(this.parentElement)||this.parentElement.getDrawnState()==
isc.Canvas.UNDRAWN)){this.logWarn("Attempt to draw child of an undrawn parent - ignoring"+this.getStackTrace(),"drawing");return false}if(isc.Browser.isSafari&&!isc.Page.isLoaded())if(parseInt(isc.Browser.safariVersion)<100){this.drawDeferred();return false}return true},isc.A.$77h=function(){isc.Page.isLoaded()?this.drawDeferred():isc.Page.setEvent("load",this.getID()+".$77i()")},isc.A.$77i=function(){this.destroyed||(isc.Page.getWidth()==0||isc.Page.getHeight()==0?this.delayCall("draw",null,100):
this.draw())},isc.A.$p2=function(){return false},isc.A.$p4=function(){if(this.$p5)return true;for(var a=this.parentElement;a;){if(a.$p5)return true;a=a.parentElement}if(this.children)for(a=0;a<this.children.length;a++)if(this.children[a].$p2())return true;return false},isc.A.draw=function(a){if(isc.$cv)arguments.$cw=this;if(!this.readyToDraw())return this;this.overflow==isc.Canvas.AUTO&&this.getTabIndex();if(this.logIsInfoEnabled(this.$n2))this.logInfo("draw(): drawing "+this.Class+(this.parentElement?
" with parent: "+this.parentElement:"")+(!isc.Page.isLoaded()?" before page load":"")+(this.logIsDebugEnabled(this.$n2)?this.getStackTrace():""),this.$n2);this.$p6(this.$n2);var b=this.doInitialFetch();this.peers!=null&&this.peers.getLength()>0&&this.predrawPeers();var c=isc.Browser.isIE&&this.fixIEOpacity&&!this.masterElement,d=isc.Element.cacheOffsetCoords;if(this.position==isc.Canvas.RELATIVE)d=this.cacheOffsetCoords=false;if(c||d)for(var e=this.parentElement;e;){if(c)if(e.opacity!=null&&e.opacity!=
100){this.setOpacity(100,null,true);c=false;if(!d)break}if(d)if(e.position==isc.Canvas.RELATIVE){d=this.cacheOffsetCoords=false;if(!c)break}e=e.parentElement}if(d)this.cacheOffsetCoords=true;if(this.htmlElement!=null&&this.matchElement){if(isc.isA.String(this.htmlElement))this.htmlElement=isc.Element.get(this.htmlElement);c=isc.Element.getNativeInnerWidth(this.htmlElement);d=isc.Element.getNativeInnerHeight(this.htmlElement);this.setWidth(c);this.setHeight(d)}c=this.parentElement;c=(c=!isc.Page.isLoaded()&&
!this.drawContext&&c==null&&this.position==isc.Canvas.RELATIVE)||this.$p2();d=this.separateContentInsertion;if(isc.Page.isLoaded()||!c){this.$p8(!d);d&&this.$p9();this.drawChildren();this.$qa()}else{if((isc.Browser.isOpera||isc.Browser.isIE)&&this.getDocument().readyState=="complete")isc.Page.finishedLoading();this.$qb()}b&&isc.RPCManager.sendQueue();this.$kn&&this.$kk()&&this.makeFocusProxy();this.accessKey!=null&&this.$qc()&&this.$kk()&&this.$qd();this.$qe!=null&&this.enforceScrollSize(this.$qe[0],
this.$qe[1]);this.$qf()&&isc.EH.$mz([this]);this.clipCorners&&this.$qg();this.$806=this.isVisible();!a&&this.$806&&this.show();this.parentElement&&this.parentElement.childDrawn(this);this.masterElement&&this.masterElement.peerDrawn(this);if(this.parentElement==null&&this.position==this.$411){this.$412=this.getPageLeft();this.$413=this.getPageTop();isc.Page.setEvent("resize",this,isc.Page.FIRE_ONCE,"$414")}return this},isc.A.doInitialFetch=function(){},isc.A.$qb=function(){this.setDrawnState(isc.Canvas.DRAWING_HANDLE);
var a=this.getDocument(),b=this.separateContentInsertion;if(this.children!=null&&this.$p2()){this.$p5=true;var c=this.getTagStart(),d=this.getTagEnd();a.write(b?c:c+this.$px());this.drawChildren();a.write(b?this.$px()+d:d);this.setDrawnState(isc.Canvas.HANDLE_DRAWN)}else{a.write(isc.SB.concat(this.getTagStart(),b?null:this.$px(),this.getTagEnd()));this.setDrawnState(isc.Canvas.HANDLE_DRAWN);b&&this.$p9();this.drawChildren()}this.$qa();isc.Browser.isMoz&&this.getScrollingMechanism()==isc.Canvas.NATIVE&&
this.checkNativeScroll();return this},isc.A.drawDeferred=function(){var a=isc.Page.isLoaded()?"idle":"load";if(this.deferredDrawEvent!=null)this.logInfo("drawDeferred() called when object is already pending drawing - No action to take.");else{var b=this.getID();this.deferredDrawEvent=isc.Page.setEvent(a,"delete "+b+".deferredDrawEvent;"+b+".draw();",isc.Page.FIRE_ONCE)}},isc.A.getPrintHTML=function(a,b){this.isPrinting=true;a=isc.addProperties({},a,this.printProperties);if(a.topLevelCanvas==null){a.topLevelCanvas=
this;a.isDrawn=this.isDrawn();a.isVisible=this.isVisible()}if(a.omitControls==null)a.omitControls=isc.Canvas.printOmitControls;if(a.includeControls==null)a.includeControls=isc.Canvas.printIncludeControls;this.currentPrintProperties=a||{};var c=[this.getPrintTagStart(),,,this.getPrintTagEnd()];if(!this.children||this.children.length==0||this.allowContentAndChildren)c[1]=this.getPrintInnerHTML();delete a.inline;if(a.omitComponents){for(var d=a.omitComponents,e=0;e<d.length;e++){if(isc.isA.String(d[e]))d[e]=
window[d[e]];isc.isAn.Instance(d[e])||(d[e]=[])}d.removeEmpty()}d=this.getPrintChildren();var f=this.getCompletePrintHTMLFunction(c,b);if(d){var g=[],h=d.length,i=0,j=function(m,n){g[m]=n;++i;if(i==h)return f(g);return null};c=null;for(e=0;e<h;e++){var k=d[e],l=function(m){return function(n){j(m,n)}}(e);k=this.getChildPrintHTML(k,a,l);if(k!==null)c=j(e,k)}return c}else return f()},isc.A.getChildPrintHTML=function(a,b,c){return a.getPrintHTML(b,c)},isc.A.getCompletePrintHTMLFunction=function(a,b){var c=
this;return function(d){c.isPrinting=false;if(isc.isAn.Array(d))d=d.join(isc.emptyString);if(d)a[2]=d;a=a.join(isc.emptyString);delete c.currentPrintProperties;if(b){c.fireCallback(b,"HTML,callback",[a,b]);return null}else return a}},isc.A.getPrintInnerHTML=function(){return this.$px()},isc.A.getPrintChildren=function(){var a=this.children;if(!(!a||a.length==0)){for(var b=[],c=0;c<a.length;c++)this.shouldPrintChild(a[c])&&b.add(a[c]);return b.length>0?b:null}},isc.A.shouldPrintChild=function(a){if(a.shouldPrint!=
null)return a.shouldPrint;if(a.masterElement)return false;var b=this.currentPrintProperties,c=b.omitControls,d=b.omitComponents;if(!isc.isAn.Instance(a)||d&&d.contains(a))return false;if(c){if((d=b.includeControls)&&d.length>0)for(var e=0;e<d.length;e++){var f=d[e];if(isc.isA[f]&&isc.isA[f](a))return true}for(e=0;e<c.length;e++){f=c[e];if(isc.isA[f]&&isc.isA[f](a))return false}}if(!a.isDrawn()&&b.isDrawn||!a.isVisible()&&b.isVisible)return false;return true},isc.A.$xo=function(){if(this.isPrinting)return false;
return true},isc.A.getPrintStyleName=function(){return this.printStyleName||this.styleName},isc.A.getPrintTagStart=function(){var a=this.currentPrintProperties;a=a.topLevelCanvas!=this&&a.inline;var b=this.getPrintStyleName();return[a?"<span ":"<div ",b?"class='"+b+"' ":null,this.getPrintTagStartAttributes(),">"].join(isc.emptyString)},isc.A.getPrintTagStartAttributes=function(){return null},isc.A.getPrintTagEnd=function(){var a=this.currentPrintProperties;return a.topLevelCanvas!=this&&a.inline?
"</span>":"</div>"},isc.A.makeBackMask=function(a){if(isc.Browser.isMoz&&!isc.Page.isLoaded()){this.$49t=a;isc.Page.setEvent("load",this,isc.Page.FIRE_ONCE,"makeBackMask")}else{if(this.$49t){a=this.$49t;delete this.$49t}this._backMask=isc.BackMask.create(a);this.addPeer(this._backMask);this._backMask.setZIndex(this.getZIndex(true)-2);this.$qi()}},isc.A.makeFocusProxy=function(){if(!(!this.$kn||this.$qj||this.$qk||!this.isDrawn()||this.$ql!=null)){this.$qk=true;this.$qm();this.$qk=null}},isc.A.$qm=
function(){if(!isc.Page.isLoaded()&&isc.Browser.isSafari){this.getTabIndex();this.$ql=isc.Page.setEvent("load",this,null,"delayedMakeFocusProxy")}else{var a=this.getTabIndex();if(this.isDisabled())a=-1;if(!(isc.Browser.isSafari&&a==-1)){var b=isc.Browser.isSafari?1:this.getViewportWidth(),c=isc.Browser.isSafari?1:this.getViewportHeight();a=isc.Canvas.getFocusProxyString(this.getCanvasName(),true,this.getOffsetLeft()-1,this.getOffsetTop()-1,b,c,this.isVisible(),this.$kk(),a,this.accessKey,false,this.$qn(),
this.$qo());isc.Element.insertAdjacentHTML(this.getClipHandle(),"afterEnd",a);this.$qj=true}}},isc.A.delayedMakeFocusProxy=function(){this.$ql=null;this.makeFocusProxy()},isc.A.$qp=function(){if(this.$kn){if(this.$ql!=null){isc.Page.clearEvent("load",this.$ql);this.$ql=null}if(this.$qj){var a=this.$qq();if(a!=null){if(isc.Browser.isDOM)a.parentNode?a.parentNode.removeChild(a):this.logWarn("Unable clear focusProxy for this widget - element has no parentNode.");this.$qr=null}this.$qj=null}}},isc.A.$qc=
function(){return isc.Browser.isMoz&&this._useNativeTabIndex},isc.A.$qd=function(){var a=this.accessKey;if(!(!a||!this.isDrawn()||!this.$kk())){var b=this.$qs("focusProxy");a=isc.StringBuffer.concat("<a id='",b,"' href='javascript:void(0)","' onfocus='var _0=window.",this.getID(),";if(_0){_0.focus()}' ","accessKey='"+a+"'></a>");isc.Element.insertAdjacentHTML(this.getClipHandle(),"beforeEnd",a);this.$qt=isc.Element.get(b)}},isc.A.$qu=function(){var a=this.$qt;delete this.$qt;a&&isc.Element.clear(a)},
isc.A.drawChildren=function(){if(this.children==null)return true;if(this.isDrawn())this.logWarn("drawChildren() is only safe to call BEFORE a canvas has been drawn"+this.getStackTrace());else{this.children&&this.logIsInfoEnabled(this.$n3)&&this.logInfo("drawChildren(): "+this.children.length+" children",this.$n3);this.$pt();this.layoutChildren(this.$od);if(this.manageChildOverflow)this.$qv=true;for(var a=0;a<this.children.length;a++){var b=this.children[a];b.masterElement||b.isDrawn()||b.draw()}}},
isc.A.$qx=function(a){if(this.manageChildOverflow){this.$qv=null;this.$qy();for(var b=0,c=0;c<a.length;c++){var d=a[c];if(d!=null&&d.$qz){b++;d.$qz=null;d.adjustOverflow(this.$oe)}}}},isc.A.predrawPeers=function(){if(this.peers)for(var a=0;a<this.peers.getLength();a++){var b=this.peers[a];if(b.$q0==true){if(!isc.isA.Canvas(b)||b.masterElement!=this){this.peers.remove(b);this.addPeer(b)}b.draw()}}},isc.A.drawPeers=function(){if(!this.peers)return true;this.logIsInfoEnabled(this.$n3)&&this.logInfo("drawPeers(): "+
this.peers.length+" peers","drawing");var a=this.peers;this.peers=[];for(var b=0,c;b<a.length;b++){c=a[b];!isc.isA.Canvas(c)||c.masterElement!=this?this.addPeer(c):this.peers.add(c)}for(b=0;b<this.peers.length;b++){c=this.peers[b];if(c.snapTo||c.snapEdge)c.$qw();c.isDrawn()||c.draw()}},isc.A.$p8=function(a){this.setDrawnState(isc.Canvas.DRAWING_HANDLE);a=a?this.$px():null;var b=this.getTagStart(true);if(isc.isAn.Array(b)){var c=b.length;b[b.length]=a;b[b.length]=this.getTagEnd();a=b.join(isc.$ad);
b.length=c}else a=isc.SB.concat(b,a,this.getTagEnd());b=this.logIsInfoEnabled(this.$n3);if(c=this.drawContext){b=c.element;c=c.position||"beforeBegin";this.logInfo("$p8(): drawing with "+c+" relative to element: "+this.echoLeaf(b),"drawing");if(c=="replace"){c="beforeBegin";if(isc.isA.String(b))b=isc.Element.get(b);a=this.$q1(b,c,a,true);b.parentNode.removeChild(b);this.drawContext=null;if(this.htmlElement)this.htmlElement=null}else a=this.$q1(b,c,a,true)}else if(this.masterElement&&this.masterElement.getClipHandle()!=
null){b&&this.logInfo("inserting HTML next to master element: "+this.masterElement,"drawing");a=this.$q1(this.masterElement.getClipHandle(),this.$n9,a,true)}else if(this.parentElement){b&&this.logInfo("inserting HTML into parent: "+this.parentElement,"drawing");a=this.$q1(this.parentElement.getHandle(),this.$n8,a,true)}else{b&&this.logDebug("inserting HTML at top level","drawing");a=this.$q2(a)}if(!(isc.Browser.isIE||isc.Browser.isOpera))if(a!=null)if(this.useClipDiv){this._clipDiv=a;this.$q3=a.firstChild}else this.$q3=
a;this.setDrawnState(isc.Canvas.HANDLE_DRAWN)},isc.A.$q2=function(a){return this.ns.Element.createAbsoluteElement(a)},isc.A.$q1=function(a,b,c,d){return this.ns.Element.insertAdjacentHTML(a,b,c,d)},isc.A.$qa=function(){this.modifyContent();isc.Browser.isMoz&&isc.Browser.isStrict&&this.containsIFrame()&&this.$pw();isc.screenReader&&this.addContentRoles();this.manageChildOverflow&&this.children!=null&&this.$qx(this.children);this.setUpEvents();if(this.$q4){this.$q5(this.left,this.top,this.width,this.$o8);
var a=this.$q6;isc.isAn.Array(a)&&this.setClip(a)}this.setDrawnState(isc.Canvas.COMPLETE);this.$q7=false;this.parentElement==null&&isc.Canvas.$q8(this);if(this.parentElement!=null&&this.parentElement.$qv)this.$qz=true;else this.adjustOverflow(this.$ny);isc.screenReader&&this.addPrimaryRole();this.drawPeers()},isc.A.setHtmlElement=function(a){if(this.htmlElement!=a){this.htmlElement=a;if(!this.htmlPosition)this.htmlPosition="afterBegin";this.setDrawContext(a?{position:this.htmlPosition,element:this.htmlElement}:
null)}},isc.A.setHtmlPosition=function(a){if(a==null)a="afterBegin";if(this.htmlPosition!=a){this.htmlPosition=a;this.htmlElement!=null&&this.setDrawContext({position:this.htmlPosition,element:this.htmlElement})}},isc.A.isDirty=function(){return this.$q7==true},isc.A.markForRedraw=function(a){if(isc.$cv)arguments.$cw=this;if(this.isDrawn()&&!this.isDirty()){this.$q9(a);isc.Canvas.scheduleRedraw(this);this.$q7=true}},isc.A.readyToRedraw=function(a,b){if(isc.$cv)arguments.$cw=this;if(!this.isDrawn())return false;
var c=this.ns.EH;if(c.lastTarget==this&&(c.$ku||c.$km||isc.Browser.isMobileWebkit&&c.dragOperation==c.DRAG_SCROLL)){if(b){this.$q9(a,true);this.priorityRedraw=true;this.$q7=false;this.markForRedraw(false)}return false}return true},isc.A.$q9=function(a,b){if(!(a==false||!this.logIsInfoEnabled(this.$n4))){var c=!a&&this.logIsDebugEnabled(this.$n4)||this.logIsDebugEnabled("redrawTrace");this.logInfo((b==null?"Scheduling redraw ":(b==true?"DEFERRED ":"")+"Immediate redraw ")+(this.isDirty()&&b!=null?
"of dirty widget ":"")+(this.children&&this.children.length>0?"("+this.getChildCount()+" children) ":"")+"("+(a?a:"no reason provided")+")"+(c?this.getStackTrace():""),this.$n4)}},isc.A.redraw=function(a){if(isc.$cv)arguments.$cw=this;if(!this.readyToRedraw(a,true))return this;this.$q9(a,false);this.$p6(this.$n4);var b=isc.timeStamp();this.$ra();this.$rb=isc.timeStamp()-b;return this},isc.A.redrawIfDirty=function(a){if(this.isDrawn()&&this.isDirty())return this.redraw(a)},isc.A.$ra=function(){var a=
this.logIsDebugEnabled(this.$n3),b=this.logIsInfoEnabled(this.$n3),c;if(a)c=isc.timeStamp();b&&this.logInfo("$ra(): redrawing","drawing");this.peers!=null&&this.peers.getLength()>0&&this.redrawPredrawnPeers();b=this.children&&this.children.length>0;var d=this.allowContentAndChildren&&b;if(b&&!d&&this.shouldRedrawOnResize())d=true;if((!b||d)&&(this.getVisibleWidth()>this.getWidth()||this.getVisibleHeight()>this.getHeight()))this.$q5(null,null,this.width,this.$o8);if(b){d&&this.$p9();this.redrawChildren()}else this.$rd();
if(this.$qe&&!b){delete this.$re;this.enforceScrollSize(this.$qe[0],this.$qe[1])}this.modifyContent();isc.screenReader&&this.addContentRoles();this.setUpEvents();this.$q7=false;this.adjustOverflow(this.$n0,null,true);this.redrawPeers();a&&this.logDebug("Redraw() - Total time to redraw in DOM:"+(isc.timeStamp()-c),"drawing");return this},isc.A.$p9=function(){for(var a=this.$px(),b=this.getHandle();b.hasChildNodes();){var c=b.firstChild.getAttribute?b.firstChild.getAttribute(this.$of):null;if(c&&isc.isA.Canvas(window[c]))break;
b.removeChild(b.firstChild)}isc.Element.insertAdjacentHTML(b,this.$n7,a)},isc.A.$rd=function(){var a=this.isPrinting;this.isPrinting=false;var b=this.$px();this.getHandle().innerHTML=b;this.isPrinting=a},isc.A.modifyContent=function(){},isc.A.redrawChildren=function(){if(!this.children)return true;this.logInfo("redrawChildren(): "+this.children.length+" children","drawing");for(var a=this.children,b=0;b<a.length;b++){var c=a[b];isc.isA.Canvas(c)&&c._redrawWithParent&&c.redraw(false)}},isc.A.redrawPredrawnPeers=
function(){if(!(!this.peers||this.peers.getLength<1))for(var a=this.peers,b=0;b<a.length;b++)a[b]&&a[b].$jp&&a[b].$q0&&a[b].redraw("redrawPeers")},isc.A.redrawPeers=function(){if(!this.peers)return true;this.logInfo("redrawPeers(): "+this.peers.length+" peers","drawing");for(var a=this.peers,b=0;b<a.length;b++)a[b]&&a[b].$jp&&!a[b].$q0&&a[b].redraw("redrawPeers")},isc.A.updateFromServer=function(a){a=isc.clone(a);isc.addProperties(a,{useXmlHttpRequest:true,evalResult:true,suppressAutoDraw:true});
if(!a.evalVars)a.evalVars={};if(!a.evalVars.targetComponent)a.evalVars.targetComponent=this;isc.rpc.sendRequest(a)},isc.A.refreshFromServer=function(a,b,c,d){this.$rf("refresh",a,b,c,d)},isc.A.replaceFromServer=function(a,b,c,d){this.$rf("replace",a,b,c,d)},isc.A.$rf=function(a,b,c,d,e){if(this.$rg)this.logWarn("Attempt to "+a+" while "+this.$rh+" is in progress - ignoring.");else{this.$rg=true;this.$rh=a;this.$ri=e;this.logDebug("Submitting to "+a+" URL: "+b+", with data: "+this.echo(c));isc.Comm.sendFieldsToServer({URL:b,
fields:c,prompt:d,callback:this.getID()+".$rj(frame)",resultVarName:this.refreshVariable})}},isc.A.$rj=function(a){this.$rg=false;var b=this.$rh;a=a[this.refreshVariable];if(isc.isAn.Object(a)){a=isc.clone(a);var c=this;if(b=="refresh")this.setProperties(a);else{if(!a._constructor)a._constructor=this.getClassName();c=this.replaceWith(a)}isc.clearPrompt();if(this.$ri){if(!isc.isA.Function(this.$ri))this.$ri=isc.Func.expressionToFunction("canvas",this.$ri);isc.isA.Function(this.$ri)?this.$ri(c):this.logError("Can't convert "+
b+" callback '"+this.$ri+" to a function - not firing callback!")}}else this.logError("Expected object literal for "+b+", but got: "+isc.Log.echo(a))},isc.A.clear=function(a){this.$66p=true;if(!a&&this.logIsInfoEnabled("clears"))this.logInfo("clear()"+(this.children&&this.children.length>0?" ("+this.getChildCount()+" children) ":"")+(this.logIsDebugEnabled("clears")?this.getStackTrace():""),"clears");this.$rk();this._eventMask&&this.ns.EH.unregisterMaskableItem(this);this==isc.Canvas.$rl&&isc.Canvas.hideResizeThumbs();
this.$kn&&this.$qp();if(this.children){a=this.children;for(var b=0;b<a.length;b++){var c=a[b];if(isc.isA.Canvas(c)){c.$74w=true;c.clear(true);c.$74w=null}}}this.getHandle()&&this.clearHandle();this.parentElement&&this.parentElement.childCleared(this);this.masterElement&&this.masterElement.peerCleared(this);delete this.$re;delete this.$qt;if(this.deferredDrawEvent){isc.Page.clearEvent(this.deferredDrawEvent);delete this.deferredDrawEvent}if(this.peers){a=this.peers;for(b=0;b<a.length;b++){if(this.$74w)a[b].$74w=
true;a[b].clear(true);a[b].$74w=null}}this.canAcceptDrop&&this.ns.EH.unregisterDroppableItem(this);this.setDrawnState(isc.Canvas.UNDRAWN);this.$808=this.$809=null;delete this.$66p},isc.A.destroy=function(a){if(this.doNotDestroy)this.clear();else if(!this.destroyed){this.destroying=true;this.$rm&&isc.Timer.clearTimeout(this.$rn);this.hideClickMask();this.$75s(true,a);isc.Hover.lastHoverCanvas==this&&isc.Hover.hide();this.clear(true);this.deparent();this.depeer();if(this.children){var b=this.children.duplicate();
for(a=0;a<b.length;a++){var c=b[a];isc.isA.Canvas(c)&&c.destroy(true)}}if(this.peers){b=this.peers.duplicate();for(a=0;a<b.length;a++)b[a].destroy(true)}delete this.peers;delete this.children;if(this.hscrollbar&&!this.hscrollbar.destroyed){this.hscrollbar.destroy(true);delete this.hscrollbar}if(this.vscrollbar&&!this.vscrollbar.destroyed){this.vscrollbar.destroy(true);delete this.vscrollbar}if(this.$542){b=this.$542;for(var d in b){var e=b[d];for(a=0;a<e.length;a++)(c=(c=e[a])?window[c]:null)&&!c.destroyed&&
c.destroy&&!c.dontAutoDestroy&&c.destroy();delete this[d]}}this.eventProxy!=null&&this.clearEventProxy();if(this.$kt!=null){b=this.$kt.duplicate();for(a=0;a<b.length;a++)b[a].clearEventProxy()}this.locatorParent&&this.locatorParent.locatorChildDestroyed&&this.locatorParent.locatorChildDestroyed(this);delete this.locatorParent;this._canvasList();isc.Canvas.$ro(this);this.$rp();isc.EH.canvasDestroyed(this);isc.ClassFactory.dereferenceGlobalID(this);if(this.pointersToThis!=null){for(a=0;a<this.pointersToThis.length;a++){d=
this.pointersToThis[a];if(d.object&&d.object[d.property]==this)d.object[d.property]=void 0}delete this.pointersToThis}if(this.$rr)for(var f in this)delete this[f];this.$63x();this.destroyed=true}});isc.B.push(isc.A.markForDestroy=function(){if(isc.$cv)arguments.$cw=this;if(!(this.destroyed||this.destroying||this.isPendingDestroy())){this.$65i=true;this.$75s(false,false);isc.Canvas.scheduleDestroy(this)}},isc.A.isPendingDestroy=function(){return!this.destroyed&&!this.destroying&&this.$65i==true},isc.A.$75s=
function(a,b){if(!this.$ih){a&&this.$p6("destroys");if(!b&&this.logIsInfoEnabled("destroys"))this.logInfo((a?"destroy()":"markForDestroy()")+(this.children&&this.children.length>0?" ("+this.getChildCount()+" children) ":"")+(this.logIsDebugEnabled("destroys")?this.getStackTrace():""),"destroys")}},isc.A.clearHandle=function(){if(this.getHandle()){this.$p6("clears");this.getHandle().eventProxy=null;this.getClipHandle().eventProxy=null;var a=this.getClipHandle();this._clipDiv=this.$rs=this.$q3=null;
isc.Element.clear(a,this._clearWithRemoveChild)}},isc.A.replaceWith=function(a){if(isc.isAn.Object(a)){var b;if(isc.Browser.isDOM){b=isc.ClassFactory.getNextGlobalID();isc.Element.insertAdjacentHTML(this.getClipHandle(),"afterEnd","<DIV ID="+b+"></DIV>");b=this.getDocument().getElementById(b);a.drawContext={element:b}}var c=this.parentElement,d=this.masterElement,e=isc.isA.Layout(c)&&c.hasMember(this),f=e?c.getMemberNumber(this):0;this.destroy();if(isc.isA.Canvas(a))a.clear();else{a.autoDraw=false;
a=isc.ClassFactory.newInstance(a);if(a==null){this.logWarn("canvas.replaceWith(): Unable to create a widget instance from the argument passed in.  Returning.");return}}if(e)c.addMember(a,f);else if(c)c.addChild(a);else d&&d.addPeer(a);a.isDrawn()||a.draw();if(isc.Browser.isDOM)b.parentNode?b.parentNode.removeChild(b):this.logWarn("unable to clear marker");return a}},isc.A.setDrawContext=function(a){var b=this.isDrawn();this.deparent();b&&this.clear();this.drawContext=a;b&&this.draw()},isc.A.$qs=function(a,
b){if(b){var c=isc.ClassFactory.getDOMID(this.getID(),a);if(this.reuseDOMIDs){if(!this.$63y)this.$63y=[];this.$63y[this.$63y.length]=c}return c}if(!this.$rt)this.$rt={};this.$rt[a]||(this.$rt[a]=isc.ClassFactory.getDOMID(this.getID(),a));return this.$rt[a]},isc.A.$557=function(a){if(!this.$rt)return null;for(var b in this.$rt)if(this.$rt[b]==a)return b},isc.A.$63x=function(){if(this.reuseDOMIDs){if(this.$63y)for(var a=0;a<this.$63y.length;a++)isc.ClassFactory.releaseDOMID(this.$63y[a]);if(this.$rt)for(a in this.$rt)isc.ClassFactory.releaseDOMID(this.$rt[a])}},
isc.A.getCanvasName=function(){if(!this.$ru)this.$ru=this.$qs(this.$og,true);return this.$ru},isc.A.$rv=function(){return this.$qs(this.$oh)},isc.A.getTransformCSS=function(){if(this.rotation!=null)return";"+isc.Element.getRotationCSS(this.rotation,this.transformOrigin);return null},isc.A.getTagStart=function(a){var b=isc.Canvas,c=this.$rw();if(this.zIndex==b.AUTO)this.zIndex=b.getNextZIndex();var d=this.eventProxy?this.eventProxy.ID:this.ID,e=this.$rx(),f=e[0];e=e[1];if(!b.$ry){b.$ry=" onfocus=";
b.$rz=" onblur=";b.$r0=" tabindex=";b.$r1=" accessKey="}var g=isc.Browser.isMoz,h=this.opacity;if(!isc.Browser.isIE)if(h!=null)h/=100;if(isc.Browser.isMoz)if(this.smoothFade&&(h==1||h==null))h=0.9999;if(this.useClipDiv){var i=this.getCurrentCursor(),j;if((a=this._useNativeTabIndex)&&this.$kk())j=isc.SB.concat(b.$ry,this.$qn(),b.$rz,this.$qo(),!this.isDisabled()?b.$r0+this.getTabIndex():null,!this.$qc()&&this.accessKey!=null?b.$r1+this.accessKey:null);b=isc.StringBuffer.concat("<div id='",this.$rv(),
"' eventProxy=",d,this.className?" class='"+this.className+"'":"",j," style='","POSITION:",this.position,";LEFT:",this.left,"px;TOP:",this.top,"px;WIDTH:",f,"px;HEIGHT:",e,"px;Z-INDEX:",this.zIndex,this.visibility==b.INHERIT?"":";VISIBILITY:"+this.visibility,this.backgroundColor==null?"":";BACKGROUND-COLOR:"+this.backgroundColor,this.backgroundImage==null?"":";BACKGROUND-IMAGE:url("+this.getImgURL(this.backgroundImage)+");BACKGROUND-REPEAT:"+this.backgroundRepeat+(this.backgroundPosition?";BACKGROUND-POSITION:"+
this.backgroundPosition:""),this.border?";BORDER:"+this.border:"",this.padding!=null||this.$415?";PADDING:0px":"",this.$r2(),h!=null?(this.$65q?";-moz-opacity:":";opacity:")+h:"",g?";-moz-box-sizing:border-box":null,g&&a&&this.mozOutlineOffset!=null?";-moz-outline-offset:"+this.mozOutlineOffset:null,g&&a&&this.mozOutlineColor!=null?";-moz-outline-color:"+this.mozOutlineColor:null,g&&a&&!this.showFocusOutline?";-moz-outline-style:none":null,this.getTransformCSS(),isc.Browser.isTouch?!this.canSelectText?
";-webkit-user-select:none":";-webkit-user-select:text":null,";OVERFLOW:",c,";' ONSCROLL='return "+d+".$lh()'>","<div id='",this.getCanvasName(),"' eventProxy='",d,this.textDirection!=null?"' dir='"+this.textDirection:"","' style='POSITION:relative;VISIBILITY:inherit",";Z-INDEX:",this.zIndex,i==b.AUTO?"":";CURSOR:"+i,this.padding!=null?";PADDING:"+this.padding+"px":"",this.topPadding!=null?";padding-top:"+this.topPadding+"px":"",this.bottomPadding!=null?";padding-bottom:"+this.bottomPadding+"px":
"",this.leftPadding!=null?";padding-left:"+this.leftPadding+"px":"",this.rightPadding!=null?";padding-right:"+this.rightPadding+"px":"",";'>")}else{if(!b.$r4){b.$r5=" style='POSITION:absolute;LEFT:";b.$r6=" style='POSITION:relative;LEFT:";b.$bd=" class='";b.$416="'";b.$r7=";VISIBILITY:";b.$r8=";CURSOR:";j=b.$r4=[];j[0]="<div id=";j[2]=" eventProxy=";j[15]="px;TOP:";j[22]="px;WIDTH:";j[28]="px;HEIGHT:";j[34]="px;Z-INDEX:";j[44]=";OVERFLOW:";j[59]="' ONSCROLL='return ";j[61]=".$lh()' "}j=b.$r4;j[1]=
this.getCanvasName();j[3]=d;if(this.className!=null){j[4]=b.$bd;j[5]=this.className;j[6]=b.$416}else j[4]=j[5]=j[6]=null;j[7]=this.textDirection!=null?" dir="+this.textDirection:null;j[8]=this.position==b.RELATIVE?b.$r6:b.$r5;isc.$bk(j,this.left,9,6);isc.$bk(j,this.top,16,6);isc.$bk(j,f,23,5);isc.$bk(j,e,29,5);if(this.zIndex!=b.AUTO)isc.$bk(j,this.zIndex,35,9);else{j[35]=this.zIndex;j[36]=j[37]=j[38]=j[39]=j[40]=j[41]=j[42]=j[43]=null}j[45]=c;if(this.visibility!=b.INHERIT){j[46]=b.$r7;j[47]=this.visibility}else j[46]=
j[47]=null;j[48]=this.backgroundColor==null?null:";BACKGROUND-COLOR:"+this.backgroundColor;j[49]=this.backgroundImage==null?null:";BACKGROUND-IMAGE:url("+this.getImgURL(this.backgroundImage)+");BACKGROUND-REPEAT:"+this.backgroundRepeat+(this.backgroundPosition?";BACKGROUND-POSITION:"+this.backgroundPosition:"");j[50]=g?";-moz-box-sizing:border-box":null;i=this.getCurrentCursor();if(i==b.AUTO)j[51]=j[52]=null;else{j[51]=b.$r8;j[52]=i}j[53]=this.$r2();j[54]=this.padding!=null?";PADDING:"+this.padding+
isc.px:null;if(this.topPadding!=null)j[54]=(j[54]||"")+";padding-top:"+this.topPadding+"px";if(this.bottomPadding!=null)j[54]=(j[54]||"")+";padding-bottom:"+this.bottomPadding+"px";if(this.leftPadding!=null)j[54]=(j[54]||"")+";padding-left:"+this.leftPadding+"px";if(this.rightPadding!=null)j[54]=(j[54]||"")+";padding-right:"+this.rightPadding+"px";j[55]=this.border?";BORDER:"+this.border:null;if(isc.Browser.isIE){if(!isc.Canvas.neverUseFilters||this.useOpacityFilter)j[56]=h==null?null:";filter:progid:DXImageTransform.Microsoft.Alpha(opacity="+
h+")";isc.Canvas.neverUseFilters||(j[57]=this.$r9?";filter:progid:DXImageTransform.Microsoft.iris(irisStyle=circle)":null)}else j[56]=h!=null?(this.$65q?";-moz-opacity:":";opacity:")+h:null;j[58]=this.getTransformCSS();j[60]=d;c=64;if(this.$kk()&&this._useNativeTabIndex){j[64]=b.$ry;j[65]=this.$qn();j[66]=b.$rz;j[67]=this.$qo();if(this.isDisabled())c=68;else{j[68]=b.$r0;isc.$bk(j,this.getTabIndex(),69,5);if(this.accessKey!=null){j[74]=b.$r1;j[75]=this.accessKey;c=76}else c=74;if(!this.showFocusOutline){if(!b.$sa)b.$sa=
" hideFocus=true";j[c]=b.$sa;c+=1}}}j.length=c;j[c]=this.$oa;if(a)return j;return j.join(isc.emptyString)}return b},isc.A.$r2=function(){if(!this.$sb()&&this.$sc==null){if(this.margin==null)return null;return isc.SB.concat(isc.semi,this.$om,this.margin,isc.px)}var a=this.$sd();return isc.SB.concat(isc.semi,this.$oi,a.left,isc.px,isc.semi,this.$oj,a.right,isc.px,isc.semi,this.$ok,a.top,isc.px,isc.semi,this.$ol,a.bottom,isc.px)},isc.A.getTagEnd=function(){if(this.useClipDiv)return this.$oo;return this.$on},
isc.A.$rw=function(){var a=this.overflow,b=this.overflow==isc.Canvas.SCROLL||this.overflow==isc.Canvas.AUTO,c=b&&this.showCustomScrollbars;b=b&&!this.showCustomScrollbars;if(this.overflow==isc.Canvas.HIDDEN||c)if(this.$ks){a=this.$se?this.$nz:"-moz-scrollbars-none";this.$r3=true}else a=this.$nz;else if(isc.Browser.isOpera&&this.overflow==isc.Canvas.VISIBLE)a=this.$nz;else if(isc.Browser.isMoz)if(b)this.$r3=true;else if(this.$ks){a=this.$se?this.$nz:"-moz-scrollbars-none";this.$r3=true}if(this.useClipDiv&&
(this.overflow==isc.Canvas.CLIP_H||this.overflow==isc.Canvas.CLIP_V))a=this.$nz;return a},isc.A.$rx=function(){var a=this.getInitialWidth(),b=this.getInitialHeight();return this.$sf(a,b)},isc.A.getInitialWidth=function(){return this.getWidth()},isc.A.getInitialHeight=function(){return this.getHeight()},isc.A.$sf=function(a,b){var c=this.$sd();if(a!=null){if(this.showCustomScrollbars&&this.vscrollOn)a-=this.getScrollbarSize();a-=c.left+c.right;this.isBorderBox||(a-=this.useClipDiv?this.padding==null&&
!this.$415?this.getHBorderPad():this.getHBorderSize():this.getHBorderPad())}if(b!=null){if(this.showCustomScrollbars&&this.hscrollOn)b-=this.getScrollbarSize();b-=c.top+c.bottom;this.isBorderBox||(b-=this.useClipDiv?this.padding==null&&!this.$415?this.getVBorderPad():this.getVBorderSize():this.getVBorderPad())}if(a!=null&&a<1){this.logInfo("Specified width:"+this.getInitialWidth()+" adjusted for border, margin, and scrollbars would cause initial handle size to be less than or equal to zero, which is not supported. Clamping handle width to 1px.",
"sizing");a=1}if(b!=null&&b<1){this.logInfo("Specified height:"+this.getInitialHeight()+" adjusted for border, margin, and scrollbars would cause initial handle size to be less than or equal to zero, which is not supported. Clamping handle height to 1px.","sizing");b=1}c=this.$op;c[0]=a;c[1]=b;return c},isc.A.$qn=function(a){var b=this.getID();a=a?null:this.$ob;if(isc.Browser.isMoz)return isc.SB.concat(a,this.$or,b,this.$ot,a);return isc.SB.concat(a,this.$oq,this.getID(),this.$ot,a)},isc.A.$qo=function(a){a=
a?null:this.$ob;return isc.SB.concat(a,this.$os,this.getID(),this.$ot,a)},isc.A.$sg=function(){if(!this.$sh)this.$sh=new Function("event",this.$qn(true));return this.$sh},isc.A.$si=function(){if(!this.$sj)this.$sj=new Function("event",this.$qo(true));return this.$sj},isc.A.getHandle=function(){if(isc.$cv)arguments.$cw=this;this.destroyed&&this.logWarn("Attempt to access destroyed widget in the DOM - destroy() called at invalid time (eg: mid-draw) or invalid method called on destroy()d widget. Stack Trace:"+
this.getStackTrace());if(!(this.$pu||this.$if))return null;if(this.$q3==null){var a=this.getCanvasName();this.$q3=this.ns.Element.get(a);this.$q3==null&&this.logWarn("Unable to find handle for drawn Canvas, elementId: "+a)}return this.$q3},isc.A.getClipHandle=function(){if(!this.useClipDiv)return this.getHandle();if(!(this.$pu||this.$if))return null;if(this._clipDiv==null){var a=this.$rv();this._clipDiv=this.ns.Element.get(a);this._clipDiv==null&&this.logWarn("Unable to find clipHandle for drawn Canvas, elementId: "+
a)}return this._clipDiv},isc.A.getScrollHandle=function(){return this.getClipHandle()},isc.A.$sk=function(){if(!this.containsIFrame())return null;var a=this.getHandle();if(!a)return null;if((a=a.firstChild)&&a.tagName&&a.tagName.toLowerCase()=="iframe")return a;return null},isc.A.$sl=function(){if(!this.$kn||!this.$qj)return null;if(!this.$qr){var a=this.getCanvasName()+"__focusProxy";this.$qr=this.getDocument().getElementById(a)}return this.$qr},isc.A.$qq=function(){if(!this.$kn)return null;if(!this.$qr)this.$qr=
this.$sl();return this.$qr!=null?this.$qr.parentNode:null},isc.A.getStyleHandle=function(){if(!this.$rs)this.$rs=this.getClipHandle()?this.getClipHandle().style:null;return this.$rs},isc.A.setUpEvents=function(){this.canAcceptDrop&&this.ns.EH.registerDroppableItem(this)},isc.A.$pt=function(a){if(!a)a=this.children;if(a){this.children=[];for(var b=0,c;b<a.length;b++)if(c=a[b])!isc.isA.Canvas(c)||c.parentElement!=this?this.addChild(c):this.children.add(c)}},isc.A.$sm=function(a){a=a.substring(this.$ou.length);
var b=this.$d1(a);b=this[b]?this:isc.isA.Canvas(this.creator)&&this.creator[b]?this.creator:this;if(isc.isA.Canvas(b[a]))return b[a];return b[a]=b.createAutoChild(a)},isc.A.createCanvas=function(a){if(isc.isA.Canvas(a))return a;if(a!=null){if(isc.isA.String(a)){if(isc.startsWith(a,this.$ou))return this.$sm(a);return window[a]}var b=a.autoChildName;if(b)return this[b]=this.createAutoChild(b,a);b=a._constructor;if(b==null||isc.ClassFactory.getClass(b)==null)b=isc.Canvas;a._constructor=null;a.autoDraw=
false;return isc.ClassFactory.newInstance(b,a)}},isc.A.createCanvii=function(a){if(a!=null){for(var b=0;b<a.length;b++)a[b]=this.createCanvas(a[b]);return a}},isc.A.setEventProxy=function(a){var b=this.eventProxy;if(b!=a){if(b!=null){b.$kt.remove(this);if(this.isDrawn()){if(this.getHandle()!=null)this.getHandle().eventProxy=null;if(this.getClipHandle()!=this.getHandle())this.getClipHandle().eventProxy=null}}this.eventProxy=a;if(a!=null)if(isc.isA.Canvas(a)){if(a.$kt==null)a.$kt=[];a.$kt.add(this)}else{this.logWarn("setEventProxy() passed invalid eventProxy - clearing this property");
this.eventProxy=null}this.isDrawn()&&this.redraw("eventProxy updated")}},isc.A.clearEventProxy=function(){this.setEventProxy()},isc.A.addChild=function(a,b,c){if(isc.$cv)arguments.$cw=this;if(!a)return null;if(a==this)this.logWarn("Attempt to add a child to itself");else{isc.isAn.Instance(a)||(a=this.createCanvas(a));if(!isc.isA.Canvas(a)){this.logWarn("addChild(): trying to install a non-canvas as a child.  Returning.");return null}if(a.parentElement==this)return a;var d=a.isDrawn();a.parentElement&&
a.deparent(b);isc.Canvas.$ro(a);if(a.drawContext)a.drawContext=null;if(a.htmlElement)a.htmlElement=null;a.parentElement=this;a.topElement=this.topElement||this;a.$sn();if(b)this[b]=a;if(!this.children)this.children=[];this.children.contains(a)||this.children.add(a);var e=a.masterElement;if(e&&e.parentElement!=this){e.peers.remove(a);if(e[b]==a)e[b]=null;a.masterElement=null}if(a.peers)for(e=0;e<a.peers.length;e++)this.addChild(a.peers[e]);a.isDrawn()&&a.clear();d&&!this.warnAboutClear&&!isc.Page.isLoaded()&&
this.logWarn("Adding already drawn widget:"+a.getID()+" to new parent:"+this.getID()+". Child has been cleared so it can be drawn inside the new parent. This may be a result of autoDraw being enabled for the child.");this.isDrawn()&&a.$qw();d=this.ns.EH;if(d.clickMaskUp()){var f=d.getAllClickMaskIDs();for(e=f.length-1;e>=0;e--)if(d.targetIsMasked(this,f[e]))d.targetIsMasked(a,f[e])||d.maskTarget(a,f[e]);else{d.addUnmaskedTarget(a,f[e]);break}}if(c==false||a.$so){a.$so=null;return a}e=false;d=a.$sp||
!a.tabIndex;if(isc.isA&&isc.isA.Layout&&d&&(a.$kk()||a.children!=null&&a.children.length>0))for(f=a;f.parentElement;){if(isc.isA.Layout(f.parentElement)&&f.parentElement.isDrawn()){f.parentElement.updateMemberTabIndex(f);if(f.parentElement==this)e=true}f=f.parentElement}if(this.isDrawn()&&!a.masterElement){if(this.logIsDebugEnabled(this.$n3))this.logInfo("child added to already drawn parent: "+(isc.Page.isLoaded()?"page loaded, will draw immediately":"page not loaded, will defer child drawing"),"drawing");
if(!e&&a.$kk()&&d){var g;if(this.children.length>1)for(e=this.children.length-2;e>=0;e--)if(this.children[e].$kk()&&this.children[e].$sp){g=this.children[e];break}if(g==null&&this.$kk()&&this.$sp)g=this;g!=null&&a.$sq(g)}a.draw();this.adjustOverflow("addChild")}return a}},isc.A.$sn=function(){this.dataPath&&this.setDataPath(this.dataPath);var a=this.children;if(!(!a||a.length==0))for(var b=0;b<a.length;b++){var c=a[b];c.topElement=this.topElement;c.$sn()}},isc.A.reparent=function(a){if(this.getID()==
a.getID())return false;if(this.parentElement==a.parentElement&&this.getClipHandle()&&a.getClipHandle()&&this.getClipHandle().parentNode==a.getClipHandle().parentNode)return false;this._adjacentHandle=a.getClipHandle();if(a.parentElement)a.parentElement.addChild(this);else{this.parentElement?this.deparent():this.clear();this.draw()}return true},isc.A.removePeer=function(a,b){if(a!=null){var c=this.peers,d;if(!c||(d=c.indexOf(a))==-1)this.logWarn("Attempt to remove peer: "+a+" from Canvas that is not its master");
else{c.removeAt(d);if(this[b]==a)this[b]=null;a.masterElement=null;a.depeered&&a.depeered(this,b);this.peerRemoved&&this.peerRemoved(a,b)}}},isc.A.depeer=function(a){this.masterElement&&this.masterElement.removePeer(this,a)},isc.A.removeChild=function(a,b){if(isc.$cv)arguments.$cw=this;if(a!=null){var c=this.children,d;if(!c||(d=c.indexOf(a))==-1)this.logWarn("Attempt to remove child: "+a+" from Canvas that is not its parent");else{c.removeAt(d);if(this[b]==a)this[b]=null;a.isDrawn()&&a.clear();delete a.parentElement;
delete a.topElement;isc.Canvas.$q8(a);a.peers&&a.peers.map("deparent");a.deparented&&a.deparented(this,b);this.childRemoved&&this.childRemoved(a,b)}}},isc.A.deparent=function(a){this.parentElement&&this.parentElement.removeChild(this,a)},isc.A.addPeer=function(a,b,c,d){if(!a)return null;isc.isAn.Instance(a)||(a=this.createCanvas(a));if(d==true)a.$q0=true;if(a.masterElement==this)return null;a.masterElement&&a.depeer(b);a.masterElement=this;if(b)this[b]=a;if(!this.peers)this.peers=[];this.peers.contains(a)||
this.peers.add(a);if(this.parentElement)this.parentElement.addChild(a,b);else a.parentElement&&a.deparent();a.$nt&&a.opacity!=this.opacity&&a.setOpacity(this.opacity);a.$jq&&a.visibility!=this.visibility&&a.setVisibility(this.visibility);if(a.snapTo||a.snapEdge)a.$qw();b=this.ns.EH;if(b.clickMaskUp()){d=b.getAllClickMaskIDs();for(var e=d.length-1;e>=0;e--)if(b.targetIsMasked(this,d[e]))b.targetIsMasked(a,d[e])||b.maskTarget(a,d[e]);else{b.addUnmaskedTarget(a,d[e]);break}}if(c==false)return a;if(this.isDrawn()&&
!a.isDrawn()){a.draw();a.$q0&&this.redraw()}return a},isc.A.setSnapTo=function(a){this.snapTo=a;this.parentResized()},isc.A.getSnapTo=function(){return this.snapTo},isc.A.setSnapEdge=function(a){this.snapEdge=a;this.parentResized()},isc.A.getSnapEdge=function(){return this.snapEdge},isc.A.getFieldMethod=function(a,b,c){if(b=="children"){if(c=="add")return"addChild";if(c=="remove")return"removeChild"}return this.Super("getFieldMethod",arguments)},isc.A.getParentElements=function(){for(var a=[],b=this.parentElement;b;){a.add(b);
b=b.parentElement}return a},isc.A.contains=function(a,b){if(!b&&a)a=a.parentElement;for(;a;){if(a==this)return true;a=a.parentElement}return false},isc.A.$sr=function(a){for(a=a;a;){if(a==this)return true;if(a.visibility!=isc.Canvas.INHERIT)break;a=a.parentElement}return false},isc.A.getChildCount=function(){if(this.children!=null)return this.children.map("getChildCount").sum()+this.children.length},isc.A.showClickMask=function(a,b,c){var d=this.getID();if(!this.ns.EH.clickMaskUp(d))return this.ns.EH.showClickMask(a,
b,c,d)},isc.A.hideClickMask=function(a){if(a==null)a=this.getID();this.ns.EH.clickMaskUp(a)&&this.ns.EH.hideClickMask(a)},isc.A.clickMaskUp=function(a){if(a==null)a=this.getID();return this.ns.EH.clickMaskUp(a)},isc.A.unmask=function(a){this.ns.EH.addUnmaskedTarget(this,a)},isc.A.mask=function(a){this.ns.EH.maskTarget(this,a)},isc.A.isMasked=function(a){return this.ns.EH.targetIsMasked(this,a)},isc.A.$qf=function(){var a=isc.EH.clickMaskRegistry;if(!a||a.length==0)return false;for(var b=a.length-
1;b>=0;b--){var c=a[b];if(!this.isMasked(c))break;if(isc.EH.isHardMask(c))return true}return false},isc.A.showComponentMask=function(a){if(this.componentMask)this.componentMask.isDrawn()||this.componentMask.draw();else{this.componentMask=this.addAutoChild("componentMask",isc.addProperties({},a,{disabled:true,autoDraw:false,$nt:false}),isc.Canvas);this.componentMask.setRect(this.getOffsetLeft(),this.getOffsetTop(),this.getVisibleWidth(),this.getVisibleHeight());this.addPeer(this.componentMask)}this.disableKeyboardEvents(true,
true)},isc.A.hideComponentMask=function(){this.componentMask&&this.componentMask.clear();this.disableKeyboardEvents(false,true)},isc.A.setRect=function(a,b,c,d,e){if(isc.$cv)arguments.$cw=this;if(isc.isAn.Array(a)){b=a[1];c=a[2];d=a[3];a=a[0]}else if(a!=null&&a.top!=null){b=a.top;c=a.width;d=a.height;a=a.left}this.logIsDebugEnabled()&&this.logDebug("setRect: "+this.echo({left:a,top:b,width:c,height:d}));var f=this.resizeTo(c,d,e,true);if(f)this.$ss=true;this.moveTo(a,b,e,true);this.$ss=null;return f},
isc.A.getRect=function(){return[this.getLeft(),this.getTop(),this.getVisibleWidth(),this.getVisibleHeight()]},isc.A.getLeft=function(){var a=this.getStyleHandle();if(a==null)return this.left;a=isc.Browser.isIE?a.pixelLeft:parseInt(a.left);if(this.vscrollOn&&this.showCustomScrollbars&&this.isRTL())return a-this.getScrollbarSize();return a},isc.A.getOffsetLeft=function(){var a=this.getClipHandle();if(isc.Browser.isMoz&&this.$st())a=null;if(a==null){this.logIsInfoEnabled()&&this.logInfo("getOffsetLeft() called before widget is drawn - unable to calculate offset coordinates.  Returning specified coordinates");
return this.left}a=isc.Element.getOffsetLeft(a);if(this.vscrollOn&&this.showCustomScrollbars&&this.isRTL())a-=this.getScrollbarSize();return a},isc.A.setLeft=function(a){this.moveTo(a,null)},isc.A.getTop=function(){var a=this.getStyleHandle();if(a==null)return this.top;return isc.Browser.isIE?a.pixelTop:parseInt(a.top)},isc.A.getOffsetTop=function(){var a=this.getClipHandle();if(isc.Browser.isMoz&&this.$st())a=null;if(a==null)return this.top;return isc.Element.getOffsetTop(a)},isc.A.setTop=function(a){this.moveTo(null,
a)},isc.A.getWidth=function(){return this.width},isc.A.setWidth=function(a){this.resizeTo(a)},isc.A.getHeight=function(){return this.$o8},isc.A.setHeight=function(a){this.resizeTo(null,a)},isc.A.getMinWidth=function(){return this.minWidth},isc.A.getMinHeight=function(){return this.minHeight},isc.A.getMaxWidth=function(){return this.maxWidth},isc.A.getMaxHeight=function(){return this.maxHeight},isc.A.getRight=function(){return this.getLeft()+this.getVisibleWidth()},isc.A.setRight=function(a){isc.isA.Number(a)?
this.resizeTo(a-this.getLeft(),null):this.logWarn("setRight() expects an integer value")},isc.A.getBottom=function(){return this.getTop()+this.getVisibleHeight()},isc.A.setBottom=function(a){isc.isA.Number(a)?this.resizeTo(null,a-this.getTop()):this.logWarn("setBottom() expects an integer value")},isc.A.enforceScrollSize=function(a,b){this.logIsDebugEnabled(this.$ox)&&this.logDebug("enforcing scroll size:"+[a,b],"enforceScrollSize");if(this.$pu||this.$if){if(a==null)a=0;if(b==null)b=0;if(isNaN(a)||
isNaN(b)||a<0||b<0)this.logWarn("Invalid width or height in Canvas.enforceScrollSize() on component: "+this.getID()+" with sizes: "+[a,b]+this.getStackTrace());else{if(this.$re==null){var c=this.$ov,d=this.$qs(this.$ow);c[1]=d;c[3]=a-1;c[5]=b-1;c=c.join(isc.emptyString);this.$re=isc.Element.insertAdjacentHTML(this.getHandle(),this.$n8,c,true);if(this.$re==null)this.$re=document.getElementById(d)}else if(!this.$qe||this.$qe[0]!=a||this.$qe[1]!=b){this.$re.style.left=a-1+isc.px;this.$re.style.top=b-
1+isc.px}this.$qe=[a,b]}}},isc.A.stopEnforcingScrollSize=function(){this.logIsDebugEnabled(this.$ox)&&this.logDebug("stop enforcing scroll size","enforceScrollSize");delete this.$qe;if(this.isDrawn())if(this.$re){this.$re.style.left=this.$oy;this.$re.style.top=this.$oy}},isc.A.getScrollWidth=function(a){if(isc.$cv)arguments.$cw=this;if(this.$qz){this.$qz=null;this.adjustOverflow("widthCheckWhileDeferred")}if(!a&&this.$su!=null)return this.$su;var b=0,c=this.getClipHandle();if(c==null){this.logDebug("No size info available from DOM, returning user-specified size");
return this.getInnerWidth()}if(this.allowNativeContentPositioning){this.$sv=true;b=isc.Browser.isSafari||isc.Browser.isMoz&&(c.scrollWidth||c.offsetWidth)<=parseInt(c.style.width)?isc.Element.getScrollWidth(this.getHandle()):isc.Element.getScrollWidth(c);delete this.$sv}else{var d=this.children;d=d&&d.length>0;var e=0;if(!d||this.allowContentAndChildren)if(isc.Browser.isSafari&&this.overflow==isc.Canvas.VISIBLE){b=this.getHandle().scrollWidth;if(this.useClipDiv&&this.padding==null)b+=isc.Element.$sw(this.styleName)}else{e=
c.scrollWidth||c.offsetWidth;if(e!=null&&e!=this.$n1){b=e;if(isc.Browser.isOpera)b-=this.getLeftBorderSize()+this.getLeftPadding();if(isc.Browser.isMoz)b-=this.$sx();if(isc.Browser.isMoz&&this.getScrollingMechanism()==isc.Canvas.NESTED_DIV){e=this.getHandle().offsetLeft;if(e<0)e=-e;b-=e}}if(isc.Browser.isSafari||isc.Browser.isMoz&&b<=parseInt(c.style.width)){c=this.getHandle();c=c.scrollWidth||c.offsetWidth;if(c>b)b=c}}if(d){d=this.$sy(this.children);b=Math.max(d,b);if(this.$qe!=null)b=Math.max(b,
this.$qe[0])}}return this.$su=b},isc.A.$sy=function(a,b){for(var c=0,d=0,e=this.overflow==isc.Canvas.VISIBLE||this.overflow==isc.Canvas.CLIP_H,f=0;f<a.length;f++){var g=a[f];if(g.isDrawn()||g.$59d)if(!(b&&g.visibility==isc.Canvas.HIDDEN)){var h=g.position!=isc.Canvas.RELATIVE,i=g.getVisibleWidth(),j=h?g.getLeft():g.getOffsetLeft();if(!e&&h)i-=g.getRightMargin();if(j+i>d)d=j+i;if(j<c)c=this.isRTL()?j:Math.max(0,j)}}return d-c},isc.A.getScrollHeight=function(a){if(isc.$cv)arguments.$cw=this;if(this.$qz){this.$qz=
null;this.adjustOverflow("heightCheckWhileDeferred")}if(!a&&this.$sz!=null)return this.$sz;var b=0,c=this.getClipHandle();if(c==null){this.logDebug("No size info available from DOM, returning user-specified size");return this.getInnerHeight()}if(this.allowNativeContentPositioning){this.$s0=true;b=isc.Browser.isSafari||isc.Browser.isMoz&&(c.scrollHeight||c.offsetHeight)<=parseInt(c.style.height)?isc.Element.getScrollHeight(this.getHandle()):isc.Element.getScrollHeight(c);delete this.$s0}else{var d=
this.children&&this.children.length>0;if(!d||this.allowContentAndChildren)if(isc.Browser.isSafari&&this.overflow==isc.Canvas.VISIBLE){b=this.getHandle().scrollHeight;if(this.useClipDiv&&this.padding==null)b+=isc.Element.$s1(this.styleName)}else{var e=c.scrollHeight||c.offsetHeight;if(e!=null&&e!=this.$n1){b=e;if(isc.Browser.isMoz)b-=this.$s2();if(this.useClipDiv&&(isc.Browser.isSafari||isc.Browser.isMoz&&b<=parseInt(c.style.height))){c=this.getHandle();c=c.scrollHeight||c.offsetHeight;if(c>b)b=c}}}if(d){d=
this.$s3(this.children);if(d>b)b=d;if(this.$qe!=null)b=Math.max(b,this.$qe[1])}}return this.$sz=b},isc.A.$s2=function(){if(!isc.isAn.Array(this.children))return 0;for(var a=0,b=0;b<this.children.length;b++){var c=this.children[b];c=c.position==isc.Canvas.ABSOLUTE?c.getTop():c.getOffsetTop();if(c<a)a=c}return-a},isc.A.$sx=function(){if(!isc.isAn.Array(this.children))return 0;if(!this.useClipDiv)return 0;for(var a=0,b=0;b<this.children.length;b++){var c=this.children[b];c=c.position==isc.Canvas.ABSOLUTE?
c.getLeft():c.getOffsetLeft();if(c<a)a=c}return-a},isc.A.$s3=function(a,b){for(var c=0,d=0,e=this.overflow==isc.Canvas.VISIBLE||this.overflow==isc.Canvas.CLIP_H,f=0;f<a.length;f++){var g=a[f];if(g.isDrawn()||g.$59d)if(!(b&&g.visibility==isc.Canvas.HIDDEN)){var h=g.position!=isc.Canvas.RELATIVE,i=g.getVisibleHeight(),j=h?g.getTop():g.getOffsetTop();if(!e&&h)i-=g.getBottomMargin();if(i+j>d)d=i+j;if(j<c)c=Math.max(0,j)}}return d-c},isc.A.getScrollLeft=function(){if(!this.isDrawn()||this.getScrollingMechanism()!=
isc.Canvas.NATIVE)return this.scrollLeft;return this.getScrollHandle().scrollLeft},isc.A.getScrollTop=function(){if(!this.isDrawn()||this.getScrollingMechanism()!=isc.Canvas.NATIVE)return this.scrollTop;return this.getScrollHandle().scrollTop},isc.A.setPageLeft=function(a){this.moveBy(a-this.getPageLeft(),0)},isc.A.setPageTop=function(a){this.moveBy(0,a-this.getPageTop())},isc.A.getParentPageRect=function(){if(this.parentElement){var a=this.parentElement,b=a.getPageRect(),c=a.getLeftMargin(),d=a.getTopMargin();
b[0]+=c;b[1]+=d;b[2]-=c+a.getRightMargin();b[3]-=d+a.getBottomMargin();if(this.peers&&this.peers.length>0){c=this.getPeerRect();d=this.getPageRect();b[0]+=d[0]-c[0];b[1]+=d[1]-c[1];b[2]-=c[2]-d[2];b[3]-=c[3]-d[3]}c=a.$tj();b[0]+=c.left;b[1]+=c.top;b[2]-=c.right+c.left;b[3]-=c.bottom+c.top;c=a.getScrollbarSize();if(a.vscrollOn)b[2]-=c;if(a.hscrollOn)b[3]-=c;return b}else return[0,0,isc.Page.getWidth(),isc.Page.getHeight()]},isc.A.setPageRect=function(a,b,c,d,e){if(isc.isAn.Array(a)){b=a[1];c=a[2];
d=a[3];a=a[0]}if(this.keepInParentRect&&this.ns.EH.dragging&&this==this.ns.EH.dragMoveTarget){var f=c==null&&d==null;if(c==null)c=this.getVisibleWidth();if(d==null)d=this.getVisibleHeight();var g=a+c,h=b+d,i;i=isc.isAn.Array(this.keepInParentRect)?this.keepInParentRect:this.getParentPageRect();var j=i[0],k=i[1],l=j+i[2];i=k+i[3];var m=this.ns.EH,n=m.getDragTarget(m.getLastEvent()).parentElement;if(n){m=n.getScrollLeft();var o=n.getScrollWidth()-n.getViewportWidth()-m,s=n.getScrollTop();n=n.getScrollHeight()-
n.getViewportHeight()-s}else{m=isc.Page.getScrollLeft();o=isc.Page.getScrollWidth()-isc.Page.getWidth()-m;s=isc.Page.getScrollTop();n=isc.Page.getScrollHeight()-isc.Page.getHeight()-s}if(o<0)o=0;if(n<0)n=0;if(f){if(a<j-m)a=j-m;else if(g>l+o)a=l+o-c;if(b<k-s)b=k-s;else if(h>i+n)b=i+n-d}else{if(a<j){c-=j-a;a=j}else if(g>l)c-=g-l;if(b<k){d-=k-b;b=k}else if(h>i)d-=h-i}}this.moveBy(a-this.getPageLeft(),b-this.getPageTop());if(e){this.getVisibleWidth();this.getVisibleHeight();this.resizeTo(c,d);this.redrawIfDirty("setPageRect");
this.getVisibleWidth();this.getVisibleHeight();this.getPageLeft();this.getPageTop()}else this.resizeTo(c,d)});isc.B.push(isc.A.getCanvasLeft=function(a){if(a!=null){if(!a.contains(this,false)){this.logWarn("getCanvasTop passed ancestor:"+a+". This is not an ancestor of this component - ignoring");a=this.parentElement}}else a=this.parentElement;if(!this.isDrawn()||isc.Browser.isMoz&&this.$st()){!this.isDrawn()&&this.position==isc.Canvas.RELATIVE&&this.logWarn("getCanvasLeft(): Called on undrawn relatively-position widget '"+
this.getID()+"'.  The drawn coordinates can not be reliably calculated until the widget has drawn - returning estimated position");for(var b=this.left,c=this.parentElement;a!=c;){b+=c.left;c=c.parentElement}return b}return this.getLeftOffset(a)},isc.A.getPageLeft=function(){if(isc.$cv)arguments.$cw=this;var a=this.getClipHandle();if(a&&isc.Browser.isMoz&&this.$st())a=null;if(a==null){!this.isDrawn()&&this.position==isc.Canvas.RELATIVE&&this.logWarn("getPageLeft(): Called on undrawn relatively-position widget '"+
this.getID()+"'.  The page level coordinates can not be reliably calculated until the widget has drawn - returning estimated position");if(a=this.parentElement){var b=0;if(a.hscrollOn)b=this.isRTL()?-1*(a.getScrollWidth()-a.getViewportWidth()-a.getScrollLeft()):a.getScrollLeft();return this.getOffsetLeft()+a.getLeftBorderSize()+a.getLeftMargin()+a.getPageLeft()-b}else return this.getOffsetLeft()}if(this.useClientRectAPI&&a.getBou7ndingClientRect!=null){a=a.getBoundingClientRect().left;a-=this.getLeftMargin();
a+=isc.Page.getScrollLeft();return a}return this.getLeftOffset()},isc.A.getLeftOffset=function(a){return this.ns.Element.getOffset(isc.Canvas.LEFT,this,a,this.isRTL(),true)},isc.A.getCanvasTop=function(a){if(a!=null){if(!a.contains(this,false)){this.logWarn("getCanvasTop passed ancestor:"+a+". This is not an ancestor of this component - ignoring");a=this.parentElement}}else a=this.parentElement;if(!this.isDrawn()||isc.Browser.isMoz&&this.$st()){!this.isDrawn()&&this.position==isc.Canvas.RELATIVE&&
this.logWarn("getCanvasTop(): Called on undrawn relatively-position widget '"+this.getID()+"'.  The drawn coordinates can not be reliably calculated until the widget has drawn - returning estimated position");for(var b=this.top,c=this.parentElement;a!=c;){b+=c.top;c=c.parentElement}return b}return this.getTopOffset(a)},isc.A.getPageTop=function(){var a=this.getClipHandle();if(a&&isc.Browser.isMoz&&this.$st())a=null;if(a==null){!this.isDrawn()&&this.position==isc.Canvas.RELATIVE&&this.logWarn("getPageTop(): Called on undrawn relatively-positioned widget '"+
this.getID()+"'.  The page level coordinates can not be reliably calculated until the widget has drawn - returning estimated position");return(a=this.parentElement)?this.getOffsetTop()+a.getTopBorderSize()+a.getTopMargin()+a.getPageTop()-a.getScrollTop():this.getOffsetTop()}if(this.useClientRectAPI&&a.getBoundingClientRect!=null){a=a.getBoundingClientRect().top;a-=this.getTopMargin();a+=isc.Page.getScrollTop();return a}return this.getTopOffset()},isc.A.getTopOffset=function(a){return this.ns.Element.getOffset(isc.Canvas.TOP,
this,a,null,true)},isc.A.getPageRight=function(){return this.getPageLeft()+this.getVisibleWidth()},isc.A.getPageBottom=function(){return this.getPageTop()+this.getVisibleHeight()},isc.A.getPageRect=function(){return[this.getPageLeft(),this.getPageTop(),this.getVisibleWidth(),this.getVisibleHeight()]},isc.A.usingCSSScrollbars=function(){return!this.showCustomScrollbars&&(this.overflow==isc.Canvas.AUTO||this.overflow==isc.Canvas.SCROLL)},isc.A.getScrollingMechanism=function(){if(!this.$s6)this.$s6=
!this.showCustomScrollbars&&(this.overflow==isc.Canvas.AUTO||this.overflow==isc.Canvas.SCROLL)?isc.Canvas.NATIVE:isc.Browser.isSafari&&isc.Browser.SafariVersion<125||isc.Browser.isMoz&&isc.Browser.isUnix&&isc.Browser.geckoVersion<=20031007?isc.Canvas.NESTED_DIV:isc.Canvas.NATIVE;return this.$s6},isc.A.setMargin=function(a){this.$s8=this.$s7=null;if(a==null)delete this.margin;else{var b=a;if(isc.isA.String(a))a=parseInt(a);if(!isc.isA.Number(a)){this.logWarn("setMargin() passed invalid margin:"+b+
", ignoring.");return}this.margin=a}if(b=this.getStyleHandle()){b.margin=a==null?0:this.margin+isc.px;this.adjustOverflow("setMargin");this.innerSizeChanged("Margin thickness changed")}},isc.A.getMargin=function(){return this.margin},isc.A.getTopMargin=function(){return this.$sd().top},isc.A.getLeftMargin=function(){return this.$sd().left},isc.A.getBottomMargin=function(){return this.$sd().bottom},isc.A.getRightMargin=function(){return this.$sd().right},isc.A.$sd=function(){var a=this.$sc,b=a!=null,
c,d,e,f;if(b){c=a.top;f=a.bottom;d=a.left;e=a.right;if((c==null||c.length==0)&&(f==null||f.length==0)&&(d==null||d.length==0)&&(e==null||e.length==0))b=false}if(!this.$sb()&&!b)return this.$s9();if(a=this.$s8)return a;a=this.$ta();a={left:a.left,right:a.right,top:a.top,bottom:a.bottom};if(b){if(c)for(b=0;b<c.length;b++){var g=c[b];a.top+=g.getVisibleHeight();if(g.$55s!=null)a.top-=g.$55s}if(f)for(b=0;b<f.length;b++){c=f[b];a.bottom+=c.getVisibleHeight();if(c.$55s!=null)a.bottom-=c.$55s}if(d)for(b=
0;b<d.length;b++){f=d[b];a.left+=f.getVisibleWidth();if(f.$55s!=null)a.left-=f.$55s}if(e)for(b=0;b<e.length;b++){d=e[b];a.right+=d.getVisibleWidth();if(d.$55s!=null)a.right-=d.$55s}}if(this.$sb()){e=this.$pq();a.left+=e.$tb;a.right+=e.$tc;a.top+=e.$td;a.bottom+=e.$te}return this.$s8=a},isc.A.$ta=function(){var a=this.$if;this.$if=false;var b=this.$s9();this.$if=a;return b},isc.A.$s9=function(){if(this.$s7!=null)return this.$s7;var a={},b=isc.px;if(this.isDrawn()){var c=this.getStyleHandle(),d=c.marginLeft,
e=c.marginRight,f=c.marginTop;c=c.marginBottom;if(isc.isA.String(d)&&isc.endsWith(d,b))d=parseInt(d);if(isc.isA.String(e)&&isc.endsWith(e,b))e=parseInt(e);if(isc.isA.String(f)&&isc.endsWith(f,b))f=parseInt(f);if(isc.isA.String(c)&&isc.endsWith(c,b))c=parseInt(c);if(isc.isA.Number(d))a.left=d;if(isc.isA.Number(e))a.right=e;if(isc.isA.Number(f))a.top=f;if(isc.isA.Number(c))a.bottom=c}else{d=this.margin;if(isc.isA.String(d))if(isc.endsWith(d,b)||parseInt(d)+isc.emptyString==d)d=parseInt(d);if(isc.isA.Number(d)){a.top=
d;a.bottom=d;a.left=d;a.right=d;return this.$s7=a}}if(this.className){if(!isc.isA.Number(a.left))a.left=isc.Element.$tf(this.className);if(!isc.isA.Number(a.right))a.right=isc.Element.$tg(this.className);if(!isc.isA.Number(a.top))a.top=isc.Element.$th(this.className);if(!isc.isA.Number(a.bottom))a.bottom=isc.Element.$ti(this.className)}else{if(!isc.isA.Number(a.left))a.left=0;if(!isc.isA.Number(a.right))a.right=0;if(!isc.isA.Number(a.top))a.top=0;if(!isc.isA.Number(a.bottom))a.bottom=0}return this.$s7=
a},isc.A.getTopBorderSize=function(){return this.$tj().top},isc.A.getBottomBorderSize=function(){return this.$tj().bottom},isc.A.getLeftBorderSize=function(){return this.$tj().left},isc.A.getRightBorderSize=function(){return this.$tj().right},isc.A.getHBorderSize=function(){return this.getLeftBorderSize()+this.getRightBorderSize()},isc.A.getVBorderSize=function(){return this.getTopBorderSize()+this.getBottomBorderSize()},isc.A.$tj=function(){if(this.$tk!=null)return this.$tk;var a={},b=isc.px;if(this.isDrawn()){var c=
this.getStyleHandle(),d=c.borderLeftWidth,e=c.borderRightWidth,f=c.borderTopWidth;c=c.borderBottomWidth;if(isc.isA.String(d)&&isc.endsWith(d,b))d=parseInt(d);if(isc.isA.String(e)&&isc.endsWith(e,b))e=parseInt(e);if(isc.isA.String(f)&&isc.endsWith(f,b))f=parseInt(f);if(isc.isA.String(c)&&isc.endsWith(c,b))c=parseInt(c);if(isc.isA.Number(d))a.left=d;if(isc.isA.Number(e))a.right=e;if(isc.isA.Number(f))a.top=f;if(isc.isA.Number(c))a.bottom=c}else{d=this.border;if(d!=null&&isc.contains(d,b)){b=d.match(/\s*\d+px/g);
b=isc.isAn.Array(b)?parseInt(b[0]):parseInt(b);if(isc.isA.Number(b))return this.$tk={left:b,right:b,top:b,bottom:b}}}if(this.className){if(!isc.isA.Number(a.left))a.left=isc.Element.$tl(this.className);if(!isc.isA.Number(a.right))a.right=isc.Element.$tm(this.className);if(!isc.isA.Number(a.top))a.top=isc.Element.$tn(this.className);if(!isc.isA.Number(a.bottom))a.bottom=isc.Element.$to(this.className)}else{if(!isc.isA.Number(a.left))a.left=0;if(!isc.isA.Number(a.right))a.right=0;if(!isc.isA.Number(a.top))a.top=
0;if(!isc.isA.Number(a.bottom))a.bottom=0}return this.$tk=a},isc.A.setTopPadding=function(a){this.topPadding=a;if(isc.isA.Number(a))a+="px";if(this.isDrawn())this.getHandle().paddingTop=a},isc.A.setLeftPadding=function(a){this.leftPadding=a;if(isc.isA.Number(a))a+="px";if(this.isDrawn())this.getHandle().paddingLeft=a},isc.A.setRightPadding=function(a){this.rightPadding=a;if(isc.isA.Number(a))a+="px";if(this.isDrawn())this.getHandle().paddingRight=a},isc.A.setBottomPadding=function(a){this.bottomPadding=
a;if(isc.isA.Number(a))a+="px";if(this.isDrawn())this.getHandle().paddingBottom=a},isc.A.setPadding=function(a){this.$tp=null;if(a!=null){var b=a;if(isc.isA.String(a))a=parseInt(a);if(!isc.isA.Number(a)){this.logWarn("setPadding passed unrecognized value:"+b+" - ignoring");return}}this.padding=a;if(b=isc.Browser.isDOM?this.getHandle():null)if(a==null){b.style.padding=null;if(this.useClipDiv)this.getClipHandle().style.padding=null}else{b.style.padding=this.padding+isc.px;if(this.useClipDiv)this.getClipHandle().style.padding=
this.$65h}},isc.A.getPadding=function(){return this.padding},isc.A.getTopPadding=function(){return this.$tq().top},isc.A.getBottomPadding=function(){return this.$tq().bottom},isc.A.getLeftPadding=function(){return this.$tq().left},isc.A.getRightPadding=function(){return this.$tq().right},isc.A.getVPadding=function(){return this.getTopPadding()+this.getBottomPadding()},isc.A.getHPadding=function(){return this.getLeftPadding()+this.getRightPadding()},isc.A.$tq=function(){if(this.$tp!=null)return this.$tp;
var a={},b=isc.px;if(this.isDrawn()&&this.getHandle()!=null){var c=this.getHandle().style;if(c.paddingTop!=null&&!isc.isAn.emptyString(c.paddingTop)&&isc.endsWith(c.paddingTop,b))a.top=parseInt(c.paddingTop);if(c.paddingBottom!=null&&!isc.isAn.emptyString(c.paddingBottom)&&isc.endsWith(c.paddingBottom,b))a.bottom=parseInt(c.paddingBottom);if(c.paddingLeft!=null&&!isc.isAn.emptyString(c.paddingLeft)&&isc.endsWith(c.paddingLeft,b))a.left=parseInt(c.paddingLeft);if(c.paddingRight!=null&&!isc.isAn.emptyString(c.paddingRight)&&
isc.endsWith(c.paddingRight,b))a.right=parseInt(c.paddingRight)}else if(this.padding)a.left=a.right=a.bottom=a.top=parseInt(this.padding);if(this.className){if(!isc.isA.Number(a.left))a.left=isc.Element.$tr(this.className);if(!isc.isA.Number(a.right))a.right=isc.Element.$ts(this.className);if(!isc.isA.Number(a.top))a.top=isc.Element.$tt(this.className);if(!isc.isA.Number(a.bottom))a.bottom=isc.Element.$tu(this.className)}else{if(!isc.isA.Number(a.left))a.left=0;if(!isc.isA.Number(a.right))a.right=
0;if(!isc.isA.Number(a.top))a.top=0;if(!isc.isA.Number(a.bottom))a.bottom=0}return this.$tp=a},isc.A.containsPoint=function(a,b,c){if(isc.$cv)arguments.$cw=this;if(!this.isVisible()||!this.isDrawn())return false;if(c==null)c=false;var d=this.getPageLeft()+this.getLeftMargin();if(a<d)return false;var e=this.getPageTop()+this.getTopMargin();if(b<e)return false;var f=c?this.getViewportWidth():this.getVisibleWidth()-this.getHMarginSize();if(a>d+f)return false;d=c?this.getViewportHeight():this.getVisibleHeight()-
this.getVMarginSize();if(b>e+d)return false;d=e=0;f=this.$tv=this.$tv||[];f.length=1;f[0]=this;for(var g=1,h=this;h.parentElement!=null;){h=h.parentElement;f[g]=h;g++}var i;for(g=f.length-1;g>=0;g--){i=f[g];e+=i.getCanvasLeft();d+=i.getCanvasTop();if(g+1<f.length){h=f[g+1];e-=h.getScrollLeft();d-=h.getScrollTop()}e+=i.getLeftMargin();d+=i.getTopMargin();if(i==this&&!c){h=i.getVisibleWidth()-i.getHMarginSize();i=i.getVisibleHeight()-i.getVMarginSize()}else{e+=i.getLeftBorderSize();d+=i.getTopBorderSize();
h=i.getViewportWidth();i=i.getViewportHeight()}if(!(a>=e&&a<=e+h&&b>=d&&b<=d+i))return false}return true},isc.A.visibleAtPoint=function(a,b,c,d,e){if(isc.$cv)arguments.$cw=this;if(!this.containsPoint(a,b,c))return false;isc.isAn.Array(d)||(d=[d]);for(var f=this;f!=null&&f!=e;){for(var g=f.parentElement!=null?f.parentElement.children:isc.Canvas.$tw,h=0;h<g.length;h++){var i=g[h];if(!(i==null||i==f||!i.isDrawn()||!i.isVisible()||d.contains(i)||i.isMouseTransparent||i.getZIndex()<f.getZIndex()))if(!i.$jr)if(!(isc.isA.Scrollbar(i)||
isc.isA.ScrollThumb(i)))if(!(isc.EdgedCanvas&&isc.isA.EdgedCanvas(i)&&i.masterElement&&i.masterElement.$l0==i))if(!(isc.Layout&&isc.isA.Layout(i.parentElement)&&i.parentElement.hasMember(i)&&i.parentElement.hasMember(f)))if(!(isc.TabSet&&isc.isA.TabBar(i)&&isc.isA.TabSet(i.parentElement)&&i.parentElement.paneContainer&&i.parentElement.paneContainer.contains(this)))if(i.containsPoint(a,b,false))return false}f=f.parentElement}return true},isc.A.scrollIntoView=function(a,b,c,d,e,f,g,h,i){if(c==null)c=
0;if(d==null)d=0;var j=true,k,l;if(this.overflow!=isc.Canvas.VISIBLE&&this.overflow!=isc.Canvas.IGNORE){if(a!=null){var m=this.getScrollLeft(),n=this.getViewportWidth(),o=false,s=false;if(a+c>m+n)o=true;if(a<m)s=true;if(o!=s||i)k=e==this.$oz?a:e==this.$o1?a+c-this.getViewportWidth():a+parseInt(c/2)-parseInt(this.getViewportWidth()/2)}if(b!=null){e=this.getScrollTop();m=e+this.getViewportHeight();o=n=false;if(b+d>m)o=true;if(b<e)n=true;if(n!=o||i)l=f==this.$o0?b:f==this.$o2?b+d-this.getViewportHeight():
b+parseInt(d/2)-parseInt(this.getViewportHeight()/2)}if(k!=null||l!=null)if(g){this.animateScroll(k,l,h);j=false}else this.scrollTo(k,l)}if(this.parentElement!=null){a=a;b=b;if(a!=null){a-=this.getScrollLeft();a+=this.getOffsetLeft()}if(b!=null){b-=this.getScrollTop();b+=this.getOffsetTop()}this.parentElement.scrollIntoView(a,b,c,d)}h&&j&&this.fireCallback(h)},isc.A.intersects=function(a){var b=a.getPageLeft(),c=a.getVisibleWidth(),d=a.getPageTop();a=a.getVisibleHeight();return this.intersectsRect(b,
d,c,a)},isc.A.intersectsRect=function(a,b,c,d){a=isc.isAn.Array(a)?a:[a,b,c,d];return isc.Canvas.rectsIntersect(a,[this.getPageLeft(),this.getPageTop(),this.getVisibleWidth(),this.getVisibleHeight()])},isc.A.containsEvent=function(){return this.containsPoint(this.ns.EH.getX(),this.ns.EH.getY())},isc.A.getEventEdge=function(a){var b=this.ns.EH;a||(a=this.resizeFrom||b.ALL_EDGES);var c=this.edgeMarginSize;isc.isAn.Array(a)||(a=[a]);var d=this.$ta(),e=d.left,f=d.right,g=d.top;d=d.bottom;e=this.getPageLeft()+
e;g=this.getPageTop()+g;f=this.getPageRight()-f+1;d=this.getPageBottom()-d+1;var h=b.getY(),i=b.getX(),j=b="";if(h<g||h>d||i<e||i>f)return null;if(h>=d-c&&h<=d)j="B";else if(h>=g&&h<=g+c+1)j="T";if(i>=f-c&&i<=f)b="R";else if(i>=e&&i<=e+c+1)b="L";if(b!=""||j!=""){c=j+b;if(a.contains(c))return c;else if(b!=""&&a.contains(b))return b;else if(j!=""&&a.contains(j))return j}return null},isc.A.getOffsetX=function(){return this.ns.EH.getX()-(this.getPageLeft()+this.getLeftBorderSize())+this.getScrollLeft()-
(this.vscrollOn&&this.isRTL()?this.getScrollbarSize():0)},isc.A.getOffsetY=function(){return this.ns.EH.getY()+this.getScrollTop()-(this.getPageTop()+this.getTopBorderSize())},isc.A.setClip=function(a,b,c,d){this.$q6=isc.isAn.Array(a)?a:[a,b,c,d];a=this.getClipHandle();if(a!=null)a.style.clip="rect("+this.$q6.join("px ")+"px)"},isc.A.getScrollbarSize=function(){if(this.showCustomScrollbars)return this.getCustomScrollbarSize();return isc.Element.getNativeScrollbarSize()},isc.A.getViewportWidth=function(){return this.getVisibleWidth()-
(this.vscrollOn?this.getScrollbarSize():0)-this.getHMarginBorder()},isc.A.getViewportHeight=function(){return this.getVisibleHeight()-(this.hscrollOn?this.getScrollbarSize():0)-this.getVMarginBorder()},isc.A.getOuterViewportWidth=function(){return this.getVisibleWidth()-(this.vscrollOn?this.getScrollbarSize():0)-this.getHMarginSize()},isc.A.getOuterViewportHeight=function(){return this.getVisibleHeight()-(this.hscrollOn?this.getScrollbarSize():0)-this.getVMarginSize()},isc.A.getInnerHeight=function(){return this.getHeight()-
(this.hscrollOn||this.overflow==isc.Canvas.SCROLL?this.getScrollbarSize():0)-this.getVMarginBorder()},isc.A.getInnerWidth=function(){var a=this.getWidth();if(this.vscrollOn||this.overflow==isc.Canvas.SCROLL||this.alwaysShowVScrollbar)a-=this.getScrollbarSize();return a-this.getHMarginBorder()},isc.A.getInnerContentHeight=function(){return this.getHeight()-(this.hscrollOn||this.overflow==isc.Canvas.SCROLL?this.getScrollbarSize():0)-this.getVMarginBorderPad()},isc.A.getInnerContentWidth=function(){var a=
this.getWidth();if(this.vscrollOn||this.overflow==isc.Canvas.SCROLL||this.alwaysShowVScrollbar)a-=this.getScrollbarSize();return a-this.getHMarginBorderPad()},isc.A.getVBorderPad=function(){return this.getVBorderSize()+this.getVPadding()},isc.A.getHBorderPad=function(){return this.getHBorderSize()+this.getHPadding()},isc.A.getHMarginSize=function(){return this.getLeftMargin()+this.getRightMargin()},isc.A.getVMarginSize=function(){return this.getTopMargin()+this.getBottomMargin()},isc.A.getVMarginBorder=
function(){var a=this.$sd(),b=this.$tj();return a.top+a.bottom+b.top+b.bottom},isc.A.getHMarginBorder=function(){var a=this.$sd(),b=this.$tj();return a.left+a.right+b.left+b.right},isc.A.getVMarginBorderPad=function(){return this.getVMarginSize()+this.getVBorderPad()},isc.A.getHMarginBorderPad=function(){return this.getHMarginSize()+this.getHBorderPad()},isc.A.getClipWidth=function(){return this.getVisibleWidth()},isc.A.getClipHeight=function(){return this.getVisibleHeight()},isc.A.getVisibleWidth=
function(a){if((this.$if||this.$pu)&&(this.overflow==isc.Canvas.VISIBLE||this.overflow==isc.Canvas.CLIP_V))return Math.max(this.width,this.getScrollWidth(a)+this.getHMarginBorder());else{a=this.isAnimating(this.$do)?this.$showAnimationInfo:this.isAnimating(this.$zb)?this.$hideAnimationInfo:null;if(a!=null&&!a.$1l&&this.vscrollOn){a=0;a=this.vscrollbar.visibility==isc.Canvas.HIDDEN?this.getScrollbarSize():this.getScrollbarSize()-this.getScrollbarSize();return Math.max(this.getWidth()-a,1)}return this.getWidth()}},
isc.A.getVisibleHeight=function(a){if((this.$if||this.$pu)&&(this.overflow==isc.Canvas.VISIBLE||this.overflow==isc.Canvas.CLIP_H))return Math.max(this.getHeight(),this.getScrollHeight(a)+this.getVMarginBorder());else{if(this.isAnimating()){a=this.isAnimating(this.$do)?this.$showAnimationInfo:this.isAnimating(this.$zb)?this.$hideAnimationInfo:null;if(a!=null&&a.$1l&&this.hscrollOn){a=0;a=this.hscrollbar&&this.hscrollbar.visibility==isc.Canvas.HIDDEN?this.getScrollbarSize():this.getScrollbarSize()-
this.getScrollbarSize();return Math.max(this.getHeight()-a,1)}}return this.getHeight()}},isc.A.getPeerRect=function(){var a=this.getPageRect();if(this.peers==null)return a;for(var b=0;b<this.peers.length;b++){var c=this.peers[b];if(!(!c.isDrawn()||this.isVisible()&&!c.isVisible()))if(!(!this.vscrollOn&&c==this.vscrollbar||!this.hscrollOn&&c==this.hscrollbar)){c=c.getPageRect();if(c[0]<a[0])a[0]=c[0];if(c[1]<a[1])a[1]=c[1];var d=c[0]+c[2];if(d>a[0]+a[2])a[2]=d-a[0];c=c[1]+c[3];if(c>a[1]+a[3])a[3]=
c-a[1]}}return a},isc.A.moveBy=function(a,b,c,d){if(!(c&&d)&&this.rectAnimation)this.finishAnimation("rect");else!c&&this.moveAnimation&&this.finishAnimation("move");if(isc.$cv)arguments.$cw=this;if(isc.isA.Number(a))this.left+=a;else a=0;if(isc.isA.Number(b))this.top+=b;else b=0;var e=a!=0||b!=0;if(!e&&!d)return false;this.$tx=a;this.$ty=b;this.$q5(this.left,this.top,d&&this.$tz?this.width:null,d&&this.$t0?this.$o8:null);d&&this.$t1();this.$t2();return e},isc.A.$t2=function(){var a=this.$tx||0,b=
this.$ty||0;this.$tx=void 0;this.$ty=void 0;if(a||b){this.$t3(this,a,b);this.$t4(a,b);this.parentElement&&this.parentElement.childMoved(this,a,b);this.masterElement&&this.masterElement.peerMoved(this,a,b);if(this.$kn&&this.$qj){var c=this.$qq();if(c!=null){var d=parseInt(c.style.left)+a,e=parseInt(c.style.top)+b;c.style.left=d+"px";c.style.top=e+"px"}}this.$808=this.$809=null;this.moved(a,b)}},isc.A.moved=function(){},isc.A.parentMoved=function(a,b,c){this.$808=this.$809=null;this.$t3(a,b,c)},isc.A.$t3=
function(a,b,c){var d=this.children;if(d!=null)for(var e=0;e<d.length;e++)isc.isA.Canvas(d[e])&&d[e].parentMoved(a,b,c)},isc.A.childMoved=function(){if(this.allowContentAndChildren&&this.overflow==isc.Canvas.VISIBLE)this.$t5=true;this.$t6(this.$o4)},isc.A.$t4=function(a,b){var c=this.peers;if(c!=null)for(var d=0;d<c.length;d++)c[d]&&c[d].masterMoved(a,b)},isc.A.masterMoved=function(a,b){this.$ns&&this.moveBy(a,b)},isc.A.peerMoved=function(){},isc.A.dragRepositioned=function(){},isc.A.getDelta=function(a,
b,c){if(b==null)return null;var d=a,e=this.$pb[a];if(a==this.$o5)d=this.$o7;if(isc.isA.Number(b)){var f=Math.round(b);if(f!=b){this.logWarn(a+" specified as fractional coordinate:"+b+". Rounded to:"+f);b=f}}else if(isc.isA.String(b)&&isc.endsWith(b,this.$o9)){this[e]=b;if(this.masterElement==null&&this.parentElement==null&&this.$rq==null)this.$rq=isc.Page.setEvent(this.$nx,this,isc.Page.FIRE_ONCE);if(this.$pp){c=this[d]=0;if(this.percentBox=="custom")this[d]=1}if(this.percentBox=="custom")return 0;
d=a==this.$oz||a==this.$o6;if(this.percentSource||this.snapTo&&this.masterElement){e=this.percentSource||this.masterElement;a=this.percentBox==this.$520;a=d?a?e.getViewportWidth():e.getVisibleWidth():a?e.getViewportHeight():e.getVisibleHeight()}else{e=this.parentElement;a=d?e?e.getInnerWidth():isc.Page.getWidth():e?e.getInnerHeight():isc.Page.getHeight()}if(isc.Browser.isIE&&!isc.Page.isLoaded()&&(isc.Page.getWidth()==0||isc.Page.getHeight()==0)){isc.Page.setEvent("load",this.ID+".pageResize()",isc.Page.FIRE_ONCE);
this.$77g=true}if(isc.Browser.isChrome&&(!isc.Page.isLoaded()||isc.EH.$77e=="load")&&(isc.Page.getWidth()==0||isc.Page.getHeight()==0)){isc.Page.isLoaded()?isc.Page.setEvent("idle","if(window."+this.ID+")"+this.ID+".pageResize()",isc.Page.FIRE_ONCE):isc.Page.setEvent("load","if(window."+this.ID+")"+this.ID+".delayCall('pageResize',null,100)",isc.Page.FIRE_ONCE);this.$77g=true}b=Math.round(parseInt(b,10)/100*a);return b-c}f=b;if(!isc.isA.Number(b)){b=parseInt(b);if(isc.isA.Number(b)&&isc.isA.String(c))this[d]=
c=b}this[e]=null;var g=false;if(!isc.isA.Number(b)||b<0&&(a==this.$o6||a==this.$o5)){if(f!="*")this.logWarn("ignoring bad or negative "+a+": "+f+(this.logIsDebugEnabled("sizing")?this.getStackTrace():" [enable 'sizing' log for stack trace]"));else{a==this.$o6?this.$pn="*":this.$po="*";e=this.parentElement;if(isc.isA.Layout(e)&&e.hasMember(this)){e.reflow(this.getID()+" set "+a+" to '*'");g=true}}if(!g&&(c==this[a]||c==this[d]))this.restoreDefaultSize(a==this.$o5);this.adjustOverflow();return null}return b-
c},isc.A.restoreDefaultSize=function(a){var b=a?this.$o5:this.$o6,c=this.getClass().getInstanceProperty(b);isc.isA.Number(c)||(c=a?this.defaultHeight:this.defaultWidth);b=this[b]=isc.isA.Number(c)?c:0;if(a)this.$o8=b;return b},isc.A.pageResize=function(){this.$77g=this.$rq=null;this.$qw()},isc.A.moveTo=function(a,b,c,d){if(!d&&a==null&&b==null)return false;if(isc.$cv)arguments.$cw=this;if(a!=null&&a.top!=null){b=a.top;a=a.left}var e=this.getDelta(this.$oz,a,this.getLeft()),f=this.getDelta(this.$o0,
b,this.getTop());return this.moveBy(e,f,c,d)},isc.A.moveToEvent=function(a,b){var c=this.ns.EH.getLastEvent(),d=c.x,e=c.y;if(isc.isA.Number(a))d-=a;if(isc.isA.Number(b))e-=b;var f=this.ns.EH,g=f.getDragTarget(c),h;if(f.getDragTarget().canDrop)if(h=f.getDropTarget(c)){if(!g.snapOnDrop||!h.shouldSnapOnDrop(g))h=null}else h=f.getDragTarget(c).parentElement;else h=f.getDragTarget(c).parentElement;if(isc.isA.Canvas(h)&&(g.snapToGrid==true||g.snapToGrid==null&&h.childrenSnapToGrid==true)){if(h.noSnapDragOffset(this)){d=
c.x;e=c.y}if(h.suppressHSnapOffset==true)d=c.x;if(h.suppressVSnapOffset==true)e=c.y;if(h.snapAxis==isc.Canvas.HORIZONTAL||h.snapAxis==isc.Canvas.BOTH){c=h.getPageLeft()+h.getLeftBorderSize()+h.getLeftMargin()-h.getScrollLeft();d-=c;d=h.getHSnapPosition(d)+h.getHSnapOrigin(g);d+=c}if(h.snapAxis==isc.Canvas.VERTICAL||h.snapAxis==isc.Canvas.BOTH){c=h.getPageTop()+h.getTopBorderSize()+h.getTopMargin()-h.getScrollTop();e-=c;e=h.getVSnapPosition(e)+h.getVSnapOrigin(g);e+=c}}this.setPageRect(d,e)},isc.A.getVSnapOrigin=
function(){return this.VSnapOrigin?this.VSnapOrigin:0},isc.A.getHSnapOrigin=function(){return this.HSnapOrigin?this.HSnapOrigin:0},isc.A.placeNextTo=function(a,b,c,d){a=a.getPeerRect();var e=this.getPeerRect();b=isc.Canvas.$t7(e[2],e[3],a,b,c,d);this.setPageRect(b[0],b[1])},isc.A.showNextTo=function(a,b,c){if(b==null)b="right";if(c==null)c=false;this.placeNextTo(a,b,c);this.animateShow("fade")},isc.A.placeNear=function(a,b){if(isc.isAn.Array(a)){b=a[1];a=a[0]}else if(isc.isAn.Object(a)){b=a.top;a=
a.left}var c=this.getPeerRect();c=isc.Canvas.$t7(c[2],c[3],{left:a,top:b});this.setPageRect(c[0],c[1])},isc.A.resizeBy=function(a,b,c,d){if(isc.$cv)arguments.$cw=this;var e=c&&d;!e&&this.rectAnimation&&this.finishAnimation("rect");if(!c){e&&this.resizeAnimation&&this.finishAnimation("resize");this.hideAnimation&&this.finishAnimation("hide");this.showAnimation&&this.finishAnimation("show")}e=this.getWidth();var f=this.getHeight();if(isc.isA.Number(a)){this.width+=a;if(!this.$pp)this.$t8=true}else a=
0;if(isc.isA.Number(b)){this.height=this.$o8=f+b;if(!this.$pp)this.$t9=true}else b=0;if(a==0&&b==0)return false;this.$tz=a;this.$t0=b;this.$ua=c;if(this.isDrawn()&&this.logIsInfoEnabled(this.$nx))this.logInfo("resize of drawn component: new width/height: "+[this.width,this.$o8]+", old width/height: "+[e,f]+", delta width/height: "+[a,b]+(this.logIsDebugEnabled(this.$nx)?this.getStackTrace():""),this.$nx);if(!d){e=this.$q6;if(isc.isAn.Array(e)){e[1]+=a;e[2]+=b}f=this.getDrawnState();if(f==isc.Canvas.COMPLETE){this.$q5(this.left,
this.top,this.width,this.$o8);isc.isAn.Array(e)&&this.setClip(e)}else if(f!=isc.Canvas.UNDRAWN)this.$q4=true;this.$t1()}return true},isc.A.$t1=function(){var a=this.$tz||0,b=this.$t0||0,c=this.$ua;this.$tz=void 0;this.$t0=void 0;this.$ua=void 0;if(a||b){var d;if(this.isDrawn())(d=this.shouldRedrawOnResize(a,b,c))&&this.markForRedraw(this.$nx);c||this.layoutChildren(this.$pc,a,b);isc.Browser.isMoz&&this.containsIFrame()&&this.$pw();this.$ub(a,b);d||this.adjustOverflow(this.$nx);if(!c&&this.$kn&&this.$qj){c=
this.$sl();if(c!=null){c.style.width=this.getWidth()+isc.px;c.style.height=this.getHeight()+isc.px}}this.resizePeersBy(a,b);this.$5y(a,b)}},isc.A.shouldRedrawOnResize=function(){var a=this.redrawOnResize;if(a==null)a=!(this.children!=null&&this.children.length>0&&!this.allowContentAndChildren||this.getInnerHTML==isc.Canvas.$b4.getInnerHTML&&!isc.isA.Function(this.contents));return a},isc.A.dragResizing=function(){var a=isc.EH;return a.dragging&&a.dragOperation==a.DRAG_RESIZE&&a.dragTarget==this},
isc.A.$5y=function(a,b,c){if(isc.$cv)arguments.$cw=this;this.snapTo&&this.$qw(true);this.parentElement&&this.parentElement.childResized(this,a,b,c);this.masterElement&&this.masterElement.peerResized(this,a,b,c);var d=this.peers;if(d)for(var e=0;e<d.length;e++)isc.isA.Canvas(d[e])&&d[e].masterResized(a,b,c);if(this.clipCorners&&this.$uc){d=this.$uc;d.TR&&d.TR.moveBy(a,null);d.BL&&d.BL.moveBy(null,b);d.BR&&d.BR.moveBy(a,b)}this.$ud!=null&&delete this.$ud;this.$ue!=null&&delete this.$ue;this.resized(a,
b,c)},isc.A.$ub=function(){},isc.A.resized=function(){},isc.A.innerSizeChanged=function(a){this.$81b();this.layoutChildren(a);if(a=this.peers)for(var b=0;b<a.length;b++)!a[b].percentSource&&a[b].snapTo&&a[b].percentBox==this.$520&&a[b].$qw()},isc.A.setPercentSource=function(a,b){if(isc.isA.String(a))a=window[a];if(!(!b&&this.percentSource==a)){if(this.percentSource&&this.isObserving(this.percentSource,"innerSizeChanged")){this.ignore(this.percentSource,"innerSizeChanged");this.ignore(this.percentSource,
"resized")}if(isc.isA.Canvas(a)){this.percentSource=a;this.observe(a,"innerSizeChanged","observer.percentSourceInnerSizeChanged()");this.observe(a,"resized","observer.$qw()")}else this.percentSource=null}},isc.A.percentSourceInnerSizeChanged=function(){this.percentBox==this.$520&&this.$qw()},isc.A.childResized=function(){if(this.allowContentAndChildren&&this.overflow==isc.Canvas.VISIBLE)this.$t5=true;this.$t6(this.$pd)},isc.A.peerResized=function(){},isc.A.masterResized=function(){this.$qw()},isc.A.dragResized=
function(){},isc.A.resizePeersBy=function(a,b){var c=this.peers;if(c)for(var d=0;d<c.length;d++)c[d]&&c[d].$jo&&c[d].resizeBy(a,b)},isc.A.layoutChildren=function(){this.children&&this.$uf()},isc.A.$uf=function(){var a=this.children;if(a!=null&&a.length>0)for(var b=0;b<a.length;b++)isc.isA.Canvas(a[b])&&a[b].parentResized()},isc.A.resizeTo=function(a,b,c,d){if(isc.$cv)arguments.$cw=this;if(a==null&&b==null)return false;var e=this.getDelta(this.$o6,a,this.getWidth()),f=this.getDelta(this.$o5,b,this.getHeight());
return this.resizeBy(e,f,c,d)},isc.A.resizeToEvent=function(a){var b=this.ns.EH,c=b.getLastEvent(),d=c.x,e=c.y,f=this.getPageLeft(),g=this.getPageTop(),h=this.getPageRight(),i=this.getPageBottom(),j=b.getDragTarget(c);if(c=b.getDragTarget(c).parentElement)if(j.snapResizeToGrid==true||j.snapResizeToGrid==null&&j.snapToGrid==true||j.snapResizeToGrid==null&&(c.childrenSnapResizeToGrid==true||c.childrenSnapResizeToGrid==null&&c.childrenSnapToGrid==true)){if(c.snapAxis==isc.Canvas.HORIZONTAL||c.snapAxis==
isc.Canvas.BOTH){var k=c.getPageLeft()+c.getLeftBorderSize()+c.getLeftMargin()-c.getScrollLeft();d-=k;d=c.getHSnapPosition(d)+c.getHSnapOrigin(j);d+=k}if(c.snapAxis==isc.Canvas.VERTICAL||c.snapAxis==isc.Canvas.BOTH){k=c.getPageTop()+c.getTopBorderSize()+c.getTopMargin()-c.getScrollTop();e-=k;e=c.getVSnapPosition(e)+c.getVSnapOrigin(j);e+=k}}this.logIsDebugEnabled("dragResize")&&this.logDebug("resizeToEvent: coords: "+isc.Log.echo({x:d,y:e,left:f,top:g,right:h,bottom:i}),"dragResize");a=a||b.resizeEdge||
"BR";if(a.contains("T")){e=Math.min(this.maxHeight,Math.max(i-e,this.minHeight));g=i-e}else if(a.contains("B")){e=Math.min(this.maxHeight,Math.max(e-g,this.minHeight));i=g+e}if(a.contains("L")){a=Math.min(this.maxWidth,Math.max(h-d,this.minWidth));f=h-a}else if(a.contains("R")){a=Math.min(this.maxWidth,Math.max(d-f,this.minWidth));h=f+a}h=h-f;i=i-g;this.setPageRect(f,g,h,i,true);b.dragResizeWidth=h;b.dragResizeHeight=i;this==this.ns.EH.dragTracker&&this.redrawIfDirty()});isc.B.push(isc.A.resizeTarget=
function(a,b,c,d,e,f,g){e=e||0;d=d||0;if(f==null)f=b?isc.EH.getY():isc.EH.getX();f+=d;if(this.parentElement){d=this.getParentPageRect();d=b?d[1]+d[3]:d[0]+d[2];d-=b?this.getVisibleHeight():this.getVisibleWidth();if(f>d)f=d}g=g!=null?g:!b&&this.isRTL();d=b?a.getMinHeight():a.getMinWidth();var h=b?a.getMaxHeight():a.getMaxWidth(),i;i=g?(b?a.getPageBottom():a.getPageRight())-(b?this.getVisibleHeight():this.getVisibleWidth()):b?a.getPageTop():a.getPageLeft();f=!g?f-i-e:i-f-e;if(f<d)f=d;else if(f>h)f=
h;this.$ug=f;f=i+e+(g?-f:f);if(c)b?a.setHeight(this.$ug):a.setWidth(this.$ug);else b?this.setPageTop(f):this.setPageLeft(f)},isc.A.finishTargetResize=function(a,b,c){c||(b?a.setHeight(this.$ug):a.setWidth(this.$ug))},isc.A.parentResized=function(){if(isc.$cv)arguments.$cw=this;this.$qw()},isc.A.$qw=function(a){if(this.snapTo!=null&&this.percentBox!="custom"){if((this._percent_width||this._percent_height)&&!a)this.resizeTo(this._percent_width,this._percent_height);var b;b=this.masterElement?this.masterElement:
this.parentElement;if(!b)return;isc.Canvas.snapToEdge(b,this.snapTo,this,this.snapEdge)}if(this.snapTo==null&&!a)if(this._percent_left||this._percent_top||this._percent_width||this._percent_height)this.setRect(this._percent_left,this._percent_top,this._percent_width,this._percent_height)},isc.A.prepareForDragging=function(){var a=this.ns.EH;if(!a.dragTarget){var b=this.dragOperation;if(isc.Browser.isTouch&&this.touchDragOperation&&a.lastEvent.originalType==a.TOUCH_START)b=this.touchDragOperation;
if(b){a.dragTarget=this;a.dragOperation=b}else if(this.canDragResize){a.resizeEdge=this.getEventEdge();if(a.resizeEdge){a.dragTarget=this;a.dragOperation=a.DRAG_RESIZE;a.dragMoveAction=a.$mq}}if(!a.dragTarget)if(this.canDragReposition){a.dragTarget=this;a.dragOperation=a.DRAG_REPOSITION;a.dragMoveAction=a.$ll}else if(isc.Browser.isTouch&&(this.hscrollOn||this.vscrollOn)&&!this.dragOperation){a.dragTarget=this;a.dragOperation=a.DRAG_SCROLL;a.dragAppearance=a.NONE}else if(this.canDrag){a.dragTarget=
this;a.dragOperation=a.DRAG}else if(this.canSelectText&&this.overflow!="visible"){a.dragTarget=this;a.dragOperation=a.DRAG_SELECT;this.dragAppearance="none"}}},isc.A.dragScrollStart=function(){var a=this.dragScrollTarget||this;this.$77s=isc.EH.getX();this.$77t=isc.EH.getY();this.$77u=a.scrollLeft||0;this.$77v=a.scrollTop||0;this.$77w=this.$77x=isc.EH.getX();this.$77y=this.$77z=isc.EH.getY();this.$770=this.$771=isc.timestamp()},isc.A.dragScrollMove=function(){var a=this.dragScrollTarget||this,b=this.$77s-
isc.EH.getX(),c=this.$77t-isc.EH.getY();a.scrollTo(this.$77u+b,this.$77v+c);window.event&&window.event.preventDefault();this.$77w=this.$77x;this.$77y=this.$77z;this.$770=this.$771;this.$77x=isc.EH.getX();this.$77z=isc.EH.getY();this.$771=isc.timestamp()},isc.A.dragScrollStop=function(){if(this.momentumScrolling){var a=this.$771-this.$770;if(a!=0)if(!(isc.timestamp()-this.$771>100)){var b=(this.$77x-this.$77w)/a,c=(this.$77z-this.$77y)/a,d=this,e=this.dragScrollTarget||this;e.hscrollOn||(b=0);e.vscrollOn||
(c=0);this.logIsDebugEnabled("dragScroll")&&this.logDebug("dragScroll: x/y: "+[this.$77x,this.$77z]+", last: "+[this.$77w,this.$77y]+", elapsed: "+a+", speed: "+[b,c],"dragScroll");if(!(b==0&&c==0))var f=this.$772=this.registerAnimation(function(g){var h=isc.timestamp(),i=h-d.$771;d.$771=h;var j=b*(1-g),k=c*(1-g);g=Math.round(j*i);h=Math.round(k*i);this.logIsDebugEnabled("dragScroll")&&this.logDebug("animating: elapsed: "+i+", frame speed: "+[j,k]+", distance: "+[g,h],"dragScroll");g==0&&h==0&&d.cancelAnimation(f);
i=e.getScrollLeft();j=e.getScrollTop();e.scrollTo(e.getScrollLeft()-g,e.getScrollTop()-h);i==e.getScrollLeft()&&j==e.getScrollTop()&&d.cancelAnimation(f)},this.momentumScrollTime,this.momentumScrollAcceleration)}}},isc.A.hoopSelectStart=function(){if(!this.hoopSelector)this.hoopSelector=this.createAutoChild("hoopSelector");if(this.hoopSelectorRect)this.hoopSelector.keepInParentRect=this.hoopSelectorRect;var a=this.$79e=this.hoopSelectorRect||[this.getPageLeft()+this.getLeftBorderSize(),this.getPageTop()+
this.getTopBorderSize(),this.getViewportWidth(),this.getViewportHeight()];this.$79f=this.hoopSelectAxis=="horizontal"?a[3]:null;this.$79g=this.hoopSelectAxis=="vertical"?a[2]:null;this.$79h=this.getOffsetX();this.$79i=this.getOffsetY();this.resizeHoopSelector();this.hoopSelector.show();return isc.EH.STOP_BUBBLING},isc.A.hoopSelectMove=function(){this.resizeHoopSelector()},isc.A.hoopSelectStop=function(){this.hoopSelector&&this.hoopSelector.hide()},isc.A.resizeHoopSelector=function(){if(this.hoopSelector){var a=
this.getOffsetX(),b=this.getOffsetY();if(this.hoopSelector.keepInParentRect){if(a<0)a=0;var c=this.$79e[3];if(b>c)b=c}this.hoopSelector.resizeTo(Math.max(1,this.$79g?this.$79g:Math.abs(a-this.$79h)),Math.max(1,this.$79f?this.$79f:Math.abs(b-this.$79i)));if(this.$79g)this.hoopSelector.setLeft(this.$79e[0]);else a<this.$79h?this.hoopSelector.setLeft(a):this.hoopSelector.setLeft(this.$79h);if(this.$79f)this.hoopSelector.setTop(this.$79e[1]);else b<this.$79i?this.hoopSelector.setTop(b):this.hoopSelector.setTop(this.$79i);
this.updateHoopSelection()}},isc.A.updateHoopSelection=function(){},isc.A.setNoDropIndicator=function(){this.$uh=true;this.$k2();if(this.shouldSetNoDropTracker&&isc.EH.dragTracker&&isc.EH.dragTracker.isVisible()){if(!this.$ui)this.$ui=isc.EH.dragTracker.getContents();isc.EH.setDragTracker(this.imgHTML(this.noDropTracker))}},isc.A.clearNoDropIndicator=function(){if(this.$uh){delete this.$uh;this.$k2();if(this.shouldSetNoDropTracker&&isc.EH.dragTracker){isc.EH.setDragTracker(this.$ui);delete this.$ui}}},
isc.A.shouldDragScroll=function(){return this.canDragScroll},isc.A.$uj=function(a){var b=this.getVDragScrollThreshold();if(a<b)return-1;if(a>this.getViewportHeight()-b)return 1;return 0},isc.A.$uk=function(a){var b=this.getHDragScrollThreshold();if(a<b)return-1;if(a>this.getViewportWidth()-b)return 1;return 0},isc.A.$l4=function(a){var b=this.getOffsetY()-this.getScrollTop(),c=this.getOffsetX()-this.getScrollLeft();if(a!=null)return a==isc.Canvas.VERTICAL?this.$uj(b)!=0:this.$uk(c)!=0;return this.$uj(b)!=
0||this.$uk(c)!=0},isc.A.getHDragScrollThreshold=function(){if(this.$ud!=null)return this.$ud;var a=this.dragScrollThreshold;if(isc.isA.Number(a))this.$ud=a;else{a=parseInt(a);if(isNaN(a)){isc.Log.logWarn("Unable to resolve specified drag scroll threshold '"+this.dragScrollThreshold+"' to a valid size. Should be specified as an absolute pixel value, or a percentage of widget viewport.");return 0}else return this.$ud=parseInt(a*this.getViewportWidth()/100)}},isc.A.getVDragScrollThreshold=function(){if(this.$ue!=
null)return this.$ue;var a=this.dragScrollThreshold;if(isc.isA.Number(a))this.$ue=a;else{a=parseInt(a);if(isNaN(a)){isc.Log.logWarn("Unable to resolve specified drag scroll threshold '"+this.dragScrollThreshold+"' to a valid size. Should be specified as an absolute pixel value, or a percentage of widget viewport.");return 0}else return this.$ue=parseInt(a*this.getViewportHeight()/100)}},isc.A.$l5=function(a,b){if(this.$ul==null){var c=this.getOffsetY()-this.getScrollTop(),d=this.$uk(this.getOffsetX()-
this.getScrollLeft());c=this.$uj(c);this.$ul=isc.Timer.setTimeout({target:this,methodName:"$um",args:[d,c,true,a,b]},this.dragScrollDelay)}},isc.A.$um=function(a,b,c,d,e){this.$ul=null;var f=0,g=0,h=this.containsEvent();if(this.ns.EH.dragging&&(e||h)){f=this.getOffsetX()-this.getScrollLeft();g=this.getOffsetY()-this.getScrollTop();var i=this.getViewportWidth(),j=this.getViewportHeight();if(isc.isA.Number(this.maxDragScrollIncrement))this.$un=this.$uo=this.maxDragScrollIncrement;else{var k=parseInt(this.maxDragScrollIncrement);
isc.isA.Number(k)||this.logWarn("Unable to resolve this.maxDragScrollIncrement '"+this.maxDragScrollIncrement+"' to a valid value. This should be an absolute pixel value or a percentage to scroll by.");this.$un=parseInt(k/100*this.getScrollWidth());this.$uo=parseInt(k/100*this.getScrollHeight())}if(isc.isA.Number(this.minDragScrollIncrement))this.$up=this.$uq=this.minDragScrollIncrement;else{k=parseInt(this.minDragScrollIncrement);isc.isA.Number(k)||this.logWarn("Unable to resolve this.minDragScrollIncrement '"+
this.minDragScrollIncrement+"' to a valid value. This should be an absolute pixel value or a percentage to scroll by.");this.$up=parseInt(k/100*(this.getScrollWidth()-i));this.$uq=parseInt(k/100*(this.getScrollHeight()-j))}k=d==isc.Canvas.VERTICAL?0:this.$uk(f);var l=d==isc.Canvas.HORIZONTAL?0:this.$uj(g);if(c){if(a!=0&&a!=k)a=0;if(b!=0&&b!=l)b=0}else{a=k;b=l}if(h){f=this.getScrollIncrement(a,f,i,this.getHDragScrollThreshold(),this.$un,this.$up);g=this.getScrollIncrement(b,g,j,this.getVDragScrollThreshold(),
this.$uo,this.$uq)}else{f=a*this.$un;g=b*this.$uo}if(f>0&&this.getScrollLeft()>=this.getScrollRight()||f<0&&this.getScrollLeft()<=0)f=0;if(g>0&&this.getScrollTop()>=this.getScrollBottom()||g<0&&this.getScrollTop()<=0)g=0}if(f!=0||g!=0){this.scrollBy(f,g);this.$ul=isc.Timer.setTimeout({target:this,methodName:"$um",args:[null,null,null,d,e]},50)}else{delete this.$un;delete this.$up;delete this.$uo;delete this.$uq}},isc.A.getScrollIncrement=function(a,b,c,d,e,f){if(a==null||a==0)return 0;if(a>0)b-=c-
d;else if(a<0)b=d-b;if(b<0||b>d)return 0;return parseInt(a*(b/d*(e-f)+f))},isc.A.hasInherentHeight=function(){if(this.inherentHeight!=null)return this.inherentHeight;return this.children==null&&(this.overflow==isc.Canvas.VISIBLE||this.overflow==isc.Canvas.CLIP_H)},isc.A.hasInherentWidth=function(){if(this.inherentWidth!=null)return this.inherentWidth;return this.children==null&&(this.overflow==isc.Canvas.VISIBLE||this.overflow==isc.Canvas.CLIP_V)},isc.A.canOverflowWidth=function(){return this.overflow==
isc.Canvas.VISIBLE||this.overflow==isc.Canvas.CLIP_H},isc.A.canOverflowHeight=function(){return this.overflow==isc.Canvas.VISIBLE||this.overflow==isc.Canvas.CLIP_V},isc.A.getOverflow=function(){return this.overflow},isc.A.setOverflow=function(a){this.$va!=null&&!this.$vb&&this.finishAnimation(this.$va);this.$vc!=null&&!this.$vd&&this.finishAnimation(this.$vc);if(this.overflow!=a){var b=this.overflow;this.overflow=a;if(this.isDrawn()){if(a!=isc.Canvas.SCROLL&&a!=isc.Canvas.AUTO&&(this.hscrollOn||this.vscrollOn)){this.hscrollOn=
this.vscrollOn=false;this.hscrollbar!=null&&this.hscrollbar.hide();this.vscrollbar!=null&&this.vscrollbar.hide()}if(isc.Browser.isIE&&(a==isc.Canvas.CLIP_H||a==isc.Canvas.CLIP_V))this.markForRedraw();else{var c=this.getStyleHandle();c.overflow=this.$rw();var d=this.$rx();c.width=d[0];c.height=d[1];if(c.clip!=null&&c.clip!=""&&c.clip!="rect(auto auto auto auto)")c.clip=isc.Browser.isIE?"rect(auto)":"";this.adjustOverflow("setOverflow");if(b==isc.Canvas.VISIBLE&&a!=isc.Canvas.VISIBLE){c=Math.max(this.getScrollWidth()-
this.getInnerWidth(),0);d=Math.max(this.getScrollHeight()-this.getInnerHeight(),0);if(c>0||d>0)this.$5y(-c,-d,"overflow changed")}else if(b!=isc.Canvas.VISIBLE&&a==isc.Canvas.VISIBLE){c=Math.max(this.getScrollWidth()-this.getInnerWidth(),0);d=Math.max(this.getScrollHeight()-this.getInnerHeight(),0);if(c>0||d>0)this.$5y(c,d,"overflow changed")}(a==isc.Canvas.HIDDEN||a==isc.Canvas.VISIBLE)&&(b==isc.Canvas.HIDDEN||b==isc.Canvas.VISIBLE)||this.$ur()}}}},isc.A.$t6=function(a){if(!(!this.isDrawn()||this.isDirty()||
this.destroying||this.$66p)){if(!this.$rm){if(this.logIsDebugEnabled())this.logDebug("delaying adjustOverflow: "+(a?a:this.getStackTrace()));var b=this;this.$rn=isc.Timer.setTimeout(function(){b.destroyed||b.adjustOverflow(a,true)},0)}this.$rm=true}},isc.A.adjustForContent=function(a){a?this.adjustOverflow("adjustForContent() called"):this.$t6("adjustForContent() called")},isc.A.$qy=function(){var a=this.getHandle();if(isc.Browser.isOpera){a=this.getHandle();return!(a.scrollHeight==0&&a.scrollWidth==
0)}if(!isc.Browser.isIE){a=this.getClipHandle();if(a==null)return false;a=a.scrollHeight;if(a==null||a==0)a=this.getClipHandle().offsetHeight;return a!=0}if(isc.Browser.isWin)return a!=null&&a.scrollHeight!=this.$n1&&a.scrollHeight!=0},isc.A.adjustOverflow=function(a,b,c){if(isc.$cv)arguments.$cw=this;if(!(b&&!this.$rm)){this.$rm=false;if(!this.isDrawn()||this.overflow==isc.Canvas.IGNORE)return true;if(!(!this.adjustOverflowWhileDirty&&!c&&this.isDirty()&&this.overflow!=isc.Canvas.VISIBLE)){if(!isc.Page.isLoaded()&&
(isc.Browser.isSafari||isc.Browser.isMoz&&isc.Browser.geckoVersion<20040616)){isc.Page.setEvent("load",this,isc.Page.FIRE_ONCE,"$us");if(isc.Browser.isMoz)return}if(!this.$417){if(this.$qy())return this.$ut(a);if(this.logIsDebugEnabled("overflow")){this.logDebug("browser not done drawing, deferring overflow.","overflow");this.useClipDiv&&this.logDebug("clipHandle sizes: "+this.echoElementSize(this.getClipHandle()),"overflow");this.logDebug("handle sizes: "+this.echoElementSize(this.getHandle()),"overflow")}if(this.$uu){this.logDebug("still waiting for size to become available",
"overflow");this.$uv()}else{this.$t6();this.$uu=true}return false}}}},isc.A.$us=function(){!this.destroyed&&this.isDrawn()&&this.adjustOverflow("pageLoad")},isc.A.$uv=function(){isc.Canvas.$uv(this.getID())},isc.A.$ut=function(a){if(!this.$uw){this.$uw=true;this.$ux(a);this.$uw=false}},isc.A.$ux=function(a){if(!this.$pe[this.overflow]){this.logWarn("This widget has overflow specified as "+this.echo(this.overflow)+'.  This overflow setting is not supported - defaulting to overflow:"visible".');this.overflow=
isc.Canvas.VISIBLE}this.$su!=null&&delete this.$su;this.$sz!=null&&delete this.$sz;var b=this.$uy,c=this.$uz;delete this.$uy;delete this.$uz;var d=this.$u0;this.$u0=false;var e=isc.Canvas;this.$uu=null;this.getHandle()==null&&this.logWarn("adjustOverflow: handle null");this.getClipHandle()==null&&this.logWarn("adjustOverflow: clipHandle null");if(this.alwaysShowVScrollbar)if(this.overflow!=isc.Canvas.AUTO||this.overflow!=isc.Canvas.SCROLL)this.logInfo('alwaysShowVScrollbar specified as true, but overflow set to "'+
this.overflow+'". Property will be ignored.');else this.showCustomScrollbars==false&&this.logWarn("alwaysShowVScrollbar property not supported when showing native scrollbars");if(this.logIsInfoEnabled(this.$pf))this.logInfo("Specified size: "+this.getWidth()+"x"+this.getHeight()+", drawn scroll size: "+this.getScrollWidth(true)+"x"+this.getScrollHeight(true)+", border: "+this.getVBorderSize()+"x"+this.getHBorderSize()+", margin: "+this.getVMarginSize()+"x"+this.getHMarginSize()+(b==null?"":", old size: "+
b+"x"+c)+", reason: "+a,"sizing");if(this.logIsDebugEnabled(this.$pf)){this.useClipDiv&&this.logDebug("clipHandle sizes: "+this.echoElementSize(this.getClipHandle()),"sizing");this.logDebug("handle sizes: "+this.echoElementSize(this.getHandle()),"sizing")}if(this.overflow!=e.IGNORE)if(this.overflow==e.VISIBLE){if(this.$t5){if(this.getWidth()<this.getVisibleWidth()||this.getHeight()<this.getVisibleHeight())this.$q5(null,null,this.width,this.$o8);delete this.$t5}e=this.getScrollWidth(true);var f=this.getScrollHeight(true);
if(this.$ks){var g=this.getScrollHandle();if(g.scrollTop!=0||g.scrollLeft!=0)g.scrollTop=g.scrollLeft=0}g=this.getInnerWidth();var h=this.getInnerHeight();g=this.$u0=e>g||f>h;if(!g&&!d){this.$uy=e;this.$uz=f;return}d=this.getHMarginBorder();h=this.getVMarginBorder();this.$q5(this.left,this.top,Math.max(e+d,this.getWidth()),Math.max(f+h,this.getHeight()));if(!(this.children&&this.children.length>0)||this.allowContentAndChildren){var i=this.getScrollHeight(true),j=this.getScrollWidth(true);if(i!=f||
j!=e){e=j;f=i;this.$q5(this.left,this.top,Math.max(e+d,this.getWidth()),Math.max(f+h,this.getHeight()))}}if(this.snapTo!=null&&g&&(a==this.$oe||a==this.$ny))this.$qw(true);this.$uy=e;this.$uz=f;if(b!=null&&b!=e||c!=null&&c!=f){if(!g&&a==this.$nx)return;this.$5y(e-b,f-c,this.$pg)}}else if(this.overflow==e.HIDDEN){this.$q5(this.left,this.top,this.getWidth(),this.getHeight());if(isc.Browser.isIE&&this.isRTL())this.scrollLeft=this.getClipHandle().scrollLeft;if(this.scrollLeft!=0||this.scrollTop!=0)this.$51s()}else if(this.overflow==
e.CLIP_H){f=this.getScrollHeight();h=this.getVMarginBorder();this.$uz=g=Math.max(f+h,this.getHeight());this.setClip(0,this.getWidth(),g,0);this.$q5(this.left,this.top,this.getWidth(),g)}else if(this.overflow==e.CLIP_V){e=this.getScrollWidth();d=this.getHMarginBorder();if((isc.Browser.isIE||isc.Browser.isMoz||isc.Browser.isOpera)&&e>this.getInnerWidth()&&this.$uy==e){this.$q5(this.left,this.top,this.getWidth(),this.getHeight());e=this.getScrollWidth(true);e>this.getInnerWidth()&&this.$q5(this.left,
this.top,e+d,this.getHeight())}else this.$q5(this.left,this.top,Math.max(e+d,this.getWidth()),this.getHeight());g=Math.max(e+d,this.getWidth());this.setClip(0,g,this.getHeight(),0);this.$uy=g}else{if(isc.Browser.isIE&&this.showCustomScrollbars&&this.getScrollingMechanism()==isc.Canvas.NATIVE){e=this.scrollLeft;f=this.scrollTop;if(this.getScrollLeft()!=e||this.getScrollTop()!=f)this.$lh()}a=this.vscrollOn;b=this.hscrollOn;c=this.$kk();var k=this.alwaysShowVScrollbar&&this.showCustomScrollbars;if(this.overflow==
isc.Canvas.SCROLL)this.hscrollOn=this.vscrollOn=true;else{f=this.getScrollHeight();var l=this.getHeight();e=this.getScrollWidth();var m=this.getWidth(),n=this.getScrollbarSize();h=this.getVMarginBorder();d=this.getHMarginBorder();if(!this.showCustomScrollbars&&this.getHandle().clientHeight!=null){this.hscrollOn=this.getClipHandle().clientHeight<l-h;this.vscrollOn=k||this.getClipHandle().clientWidth<m-d}else{this.vscrollOn=k||f-(l-h)>0;this.hscrollOn=e-(m-d)>0}if(this.vscrollOn&&!a&&!this.hscrollOn||
this.hscrollOn&&!b&&!this.vscrollOn){this.showCustomScrollbars&&this.$q5(this.left,this.top,this.getWidth(),this.getHeight());g=(this.vscrollOn?"V":"")+(this.hscrollOn?"H":"");this.innerSizeChanged("introducing scrolling");j=this.getScrollWidth(true);i=this.getScrollHeight(true);this.logIsDebugEnabled("scrolling")&&this.logDebug("Rechecking scrollWidth/Height on introduction of scroll: old: "+[e,f]+", new: "+[j,i],"scrolling");e=j;f=i}if(this.vscrollOn&&!this.hscrollOn)this.hscrollOn=this.showCustomScrollbars||
this.getClipHandle().clientHeight==null?e-(m-d-n)>0:l>this.getClipHandle().clientHeight+this.getVBorderSize();else if(this.hscrollOn)this.vscrollOn=this.showCustomScrollbars||this.getClipHandle().clientWidth==null?k||f-(l-h-n)>0:k||m>this.getClipHandle().clientWidth+this.getHBorderSize()}if(this.logIsInfoEnabled("scrolling"))this.logInfo("Drawn size: "+this.getScrollWidth(true)+" by "+this.getScrollHeight(true)+", specified: "+this.getWidth()+" by "+this.getHeight()+", scrollbar state: "+(this.hscrollOn?
"h":"")+(this.vscrollOn?"v":""),"scrolling");if(this.showCustomScrollbars&&(this.hscrollOn!=b||this.vscrollOn!=a)){this.$q5(this.left,this.top,this.getWidth(),this.getHeight());this.$su!=null&&delete this.$su;this.$sz!=null&&delete this.$sz}e=(a?"V":"")+(b?"H":"");f=(this.vscrollOn?"V":"")+(this.hscrollOn?"H":"");if(e!=f){this.logInfo("Scrollbar state: "+e+" -> "+f,"scrolling");if(g==null||f!=g)this.innerSizeChanged("scrolling state changed")}if(this.isRTL()&&this.hscrollOn&&!b)this.scrollLeft=this.getClipHandle().scrollLeft;
if(this.showCustomScrollbars){!this.hscrollOn&&b&&this.hscrollbar.hide();!this.vscrollOn&&a&&this.vscrollbar.hide();if(this.hscrollOn)this.$u1();else b&&this.scrollTo(0);if(this.vscrollOn)this.$u2();else a&&this.scrollTo(null,0);this.$51s()}if((this._useNativeTabIndex||this.$kn)&&c!=this.$kk())this.$ur()}return true},isc.A.$51s=function(){if(!(this.scrollLeft==0&&this.scrollTop==0)){var a=Math.max(0,this.getScrollBottom()),b=Math.max(0,this.getScrollRight()),c=this.getScrollLeft(),d=this.getScrollTop(),
e=false;if(c>b){e=true;c=b}if(d>a){e=true;d=a}e&&this.scrollTo(c,d)}},isc.A.checkNativeScroll=function(){var a=this.getScrollHandle();if(!(this.getScrollingMechanism()!=isc.Canvas.NATIVE||a==null))if(a.scrollLeft!=this.scrollLeft||a.scrollTop!=this.scrollTop)this.scrollTo(this.scrollLeft,this.scrollTop)},isc.A.$u1=function(){var a=this.hscrollbar;if(!a)a=this.hscrollbar=isc.ClassFactory.newInstance(this.scrollbarConstructor,{ID:this.getID()+"_hscroll",autoDraw:false,_generated:true,zIndex:this.getZIndex()+
1,vertical:false,scrollTarget:this,visibility:this.visibility,$jp:false,$jo:false,_redrawWithParent:false,$u3:false});if(isc.Page.isLoaded()){if(this.hscrollOn){a.setRect(this.getOffsetLeft()+this.getLeftMargin()+(this.vscrollOn&&this.isRTL()?this.getCustomScrollbarSize():0),this.getOffsetTop()+this.getHeight()-(this.getBottomMargin()+this.getCustomScrollbarSize()),this.getOuterViewportWidth(),this.getCustomScrollbarSize());if(a.masterElement)this.visibility!=isc.Canvas.HIDDEN&&a.show();else this.addPeer(a)}}else{var b=
this;isc.Page.setEvent("load",function(){b.destroyed||b.$u1()})}},isc.A.getCustomScrollbarSize=function(){var a=this.scrollbarConstructor;if(isc.isA.String(a))a=isc[a];if(isc.NativeScrollbar!=null&&a==isc.NativeScrollbar)return isc.NativeScrollbar.getScrollbarSize();return this.scrollbarSize},isc.A.$u2=function(){var a=this.vscrollbar;if(!a)a=this.vscrollbar=isc.ClassFactory.newInstance(this.scrollbarConstructor,{ID:this.getID()+"_vscroll",autoDraw:false,_generated:true,zIndex:this.getZIndex()+1,
vertical:true,scrollTarget:this,visibility:this.visibility,$jp:false,$jo:false,_redrawWithParent:false,$u3:false});if(isc.Page.isLoaded()){if(this.vscrollOn){a.setShowCorner(this.hscrollOn&&this.vscrollOn);a.setRect(this.getOffsetLeft()+(this.isRTL()?this.getLeftMargin():this.getWidth()-(this.getRightMargin()+this.getScrollbarSize())),this.getOffsetTop()+this.getTopMargin(),this.getScrollbarSize(),this.getHeight()-this.getVMarginSize());if(a.masterElement)this.visibility!=isc.Canvas.HIDDEN&&a.show();
else this.addPeer(a)}}else{var b=this;isc.Page.setEvent("load",function(){b.destroyed||b.$u2()})}},isc.A.scrollByPage=function(a,b){var c=(a?this.getViewportHeight():this.getViewportWidth())-this.scrollDelta;this.$u4(a,b*c)},isc.A.scrollByDelta=function(a,b){this.$u4(a,b*this.scrollDelta)},isc.A.$u4=function(a,b){a?this.scrollTo(null,this.getScrollTop()+b):this.scrollTo(this.getScrollLeft()+b)},isc.A.canScroll=function(a){var b=a?this.getScrollHeight():this.getScrollWidth();a=a?this.getViewportHeight():
this.getViewportWidth();return b>a},isc.A.getScrollRatio=function(a){var b=a?this.getScrollHeight():this.getScrollWidth(),c=a?this.getViewportHeight():this.getViewportWidth();a=a?this.getScrollTop():this.getScrollLeft();b=b-c;if(b==0)return 0;return a/b},isc.A.scrollToRatio=function(a,b){var c=Math.max(0,a?this.getScrollBottom():this.getScrollRight());c=Math.round(c*b);a?this.scrollTo(null,c):this.scrollTo(c)},isc.A.getViewportRatio=function(a){return a?this.getViewportHeight()/this.getScrollHeight():
this.getViewportWidth()/this.getScrollWidth()},isc.A.getScrollBottom=function(){if(this.overflow==isc.Canvas.VISIBLE)return 0;return this.getScrollHeight()-this.getViewportHeight()},isc.A.getScrollRight=function(){if(this.overflow==isc.Canvas.VISIBLE)return 0;return this.getScrollWidth()-this.getViewportWidth()},isc.A.scrollToTop=function(){this.scrollTo(null,0)},isc.A.scrollToBottom=function(){this.scrollTo(null,this.getScrollBottom())},isc.A.scrollToLeft=function(){this.scrollTo(0,null)},isc.A.scrollToRight=
function(){this.scrollTo(this.getScrollRight(),null)},isc.A.scrollBy=function(a,b){var c,d;if(a!=null)c=this.getScrollLeft()+a;if(b!=null)d=this.getScrollTop()+b;return this.scrollTo(c,d)},isc.A.scrollByPercent=function(a,b){if(isc.isA.String(a))a=parseInt(a);if(isc.isA.String(b))b=parseInt(b);a=isc.isA.Number(a)?parseInt(a/100*Math.max(0,this.getScrollWidth()-this.getViewportWidth())):0;b=isc.isA.Number(b)?parseInt(b/100*Math.max(0,this.getScrollHeight()-this.getViewportHeight())):0;this.scrollBy(a,
b)},isc.A.scrollTo=function(a,b,c,d){if(isc.$cv)arguments.$cw=this;if(!d){this.scrollAnimation&&this.finishAnimation("scroll");if(this.hideAnimation&&this.$hideAnimationInfo.slideOut)this.$hideAnimationInfo.slideOut=false;if(this.showAnimation&&this.$showAnimationInfo.slideIn)this.$showAnimationInfo.slideIn=false}if(this.logIsDebugEnabled("scrolling"))this.logDebug("scrollTo("+a+", "+b+(c?", handleAlreadyMoved":"")+")","scrolling");isc.isA.Number(a)||(a=this.getScrollLeft());isc.isA.Number(b)||(b=
this.getScrollTop());var e=false;if(a!=null&&a!=this.scrollLeft||b!=null&&b!=this.scrollTop){e=true;this.lastScrollLeft=this.scrollLeft;this.lastScrollTop=this.scrollTop;this.lastScrollDirection=a!=null&&a!=this.scrollLeft&&b!=null&&b!=this.scrollTop?"both":b!=null&&b!=this.scrollTop?"vertical":"horizontal"}if(c||!this.isDrawn()){this.scrollLeft=a;this.scrollTop=b}else{var f=this.getScrollRight();this.scrollLeft=Math.max(0,Math.min(f,a));f=this.getScrollBottom();this.scrollTop=Math.max(0,Math.min(f,
b));this.$u5(this.scrollLeft,this.scrollTop)}if(this.showCustomScrollbars){this.hscrollOn&&this.hscrollbar&&this.hscrollbar.setThumb();this.vscrollOn&&this.vscrollbar&&this.vscrollbar.setThumb()}e&&this.$u6()},isc.A.scrolled=function(){},isc.A.$u6=function(){if(!isc.EH.$ky){var a=isc.EH.lastEvent,b=isc.EH.isMouseEvent(a.eventType);a=b?a.target:isc.EH.lastMoveTarget;if(a!=null){if(this.contains(a,true)){if(!b&&a!=this){this.getOffsetX();this.getOffsetY();a.visibleAtPoint(isc.EH.getX(),isc.EH.getY(),
false,null,this)||(a=null)}}else a=null;a!=null&&isc.EH.$kx(null,isc.EH.lastEvent)}}this.$81b();this.scrolled&&this.scrolled()},isc.A.$81b=function(){if(isc.Element.cacheOffsetCoords){var a=this.children;if(a!=null&&a.length>0)for(var b=0;b<a.length;b++){a[b].$808=a[b].$809=null;a[b].$81b()}}},isc.A.scrollToPercent=function(a,b){if(isc.isA.String(a))a=parseInt(a);if(isc.isA.String(b))b=parseInt(b);isc.isA.Number(a)||(a=0);isc.isA.Number(b)||(b=0);a=parseInt(a/100*Math.max(0,this.getScrollWidth()-
this.getViewportWidth()));b=parseInt(b/100*Math.max(0,this.getScrollHeight()-this.getViewportHeight()));this.scrollTo(a,b)},isc.A.$u5=function(a,b){var c=this.getScrollingMechanism();if(c==isc.Canvas.NATIVE){if(c=this.getScrollHandle()){this.$u7=true;c.scrollLeft=a;c.scrollTop=b;delete this.$u7;if(c.scrollLeft!=this.scrollLeft||c.scrollTop!=this.scrollTop){this.scrollLeft=c.scrollLeft;this.scrollTop=c.scrollTop}}}else if(c==isc.Canvas.NESTED_DIV){c=this.getHandle();if(c==null)this.logWarn(this.getCallTrace(arguments)+
" in NS6 with null handle");else{c=c.style;c.left=-a+"px";c.top=-b+"px"}}},isc.A.$lh=function(a,b){isc.EH.$h1("SCR");if(isc.$cv)arguments.$cw=this;if(!this.$u7)if(isc.Browser.isMoz&&!a&&(b||isc.Browser.geckoVersion<20030312)){if(!this.$u8)this.$u8=this.delayCall("$lh",[true],10)}else{this.$u8=null;if(this.isDrawn()){var c=this.getScrollHandle(),d=c.scrollLeft,e=c.scrollTop;if(!(d==this.scrollLeft&&e==this.scrollTop)){var f=this.getScrollingMechanism();if(f!=isc.Canvas.NATIVE){this.logWarn("unsupported native scroll occurred on this widget - resetting");
if(f==isc.Canvas.NESTED_DIV)c.scrollLeft=c.scrollTop=0;else{c.scrollLeft=this.scrollLeft;c.scrollTop=this.scrollTop}}else{this.scrollTo(d,e,true);isc.EH.$h2()}}}}},isc.A.mouseWheel=function(){if((this.overflow==isc.Canvas.AUTO||this.overflow==isc.Canvas.SCROLL)&&this.showCustomScrollbars&&this.vscrollOn){var a=this.scrollTop+Math.round(this.ns.EH.lastEvent.wheelDelta*isc.Canvas.scrollWheelDelta);this.scrollTo(this.getScrollLeft(),a);return false}return true},isc.A.isDragScrolling=function(){if(this.vscrollOn&&
this.vscrollbar&&this.vscrollbar.isDragScrolling())return true;if(this.hscrollOn&&this.hscrollbar&&this.hscrollbar.isDragScrolling())return true;return false},isc.A.isRepeatTrackScrolling=function(){if(this.vscrollOn&&this.vscrollbar&&this.vscrollbar.isRepeatTrackScrolling())return true;if(this.hscrollOn&&this.hscrollbar&&this.hscrollbar.isRepeatTrackScrolling())return true;return false},isc.A.handleKeyPress=function(a,b){var c;if(this.convertToMethod("keyPress"))c=this.keyPress(a,b);if(c!=false&&
this.shouldCancelKey!=null&&this.shouldCancelKey(a,b))c=false;if(c==false)return false;var d=a.keyName;if(this.$kn&&(isc.Browser.isMoz&&this.canSelectText||isc.Browser.isSafari)&&d=="Tab")this.setFocus(true);if((this.overflow==isc.Canvas.AUTO||this.overflow==isc.Canvas.SCROLL)&&this.showCustomScrollbars){var e=0,f=0;if(d=="Page_Up")f-=this.getViewportHeight();else if(d=="Page_Down")f+=this.getViewportHeight();else if(d=="Arrow_Up")f-=10;else if(d=="Arrow_Down")f+=10;else if(d=="Arrow_Left")e-=10;
else if(d=="Arrow_Right")e+=10;if(e!=0||f!=0){this.scrollTo(this.scrollLeft+e,this.scrollTop+f);return false}if(d=="Home"){this.scrollTo(null,0);return false}else if(d=="End"){this.scrollTo(null,this.getScrollHeight()-this.getViewportHeight());return false}}return c},isc.A.$q5=function(a,b,c,d){if(this.showCustomScrollbars&&this.vscrollOn&&a!=null&&this.isRTL())a+=this.getScrollbarSize();if(c!=null||d!=null){d=this.$sf(c,d);c=d[0];d=d[1]}var e=this.getStyleHandle();if(e){a!=null&&isc.isA.Number(a)&&
this.$u9(e,isc.Canvas.LEFT,a);b!=null&&isc.isA.Number(b)&&this.$u9(e,isc.Canvas.TOP,b);c!=null&&isc.isA.Number(c)&&this.$u9(e,this.$o6,Math.max(c,1));d!=null&&isc.isA.Number(d)&&this.$u9(e,this.$o5,Math.max(d,1))}},isc.A.$u9=function(a,b,c){if(isc.Browser.isIE||isc.Browser.isOpera)if(isc.Browser.isStrict){if(c<0&&(b==this.$o6||b==this.$o5))c=0;a[b]=c+this.$ph}else a[b]=c;else if(a!=null)a[b]=c+this.$ph});isc.B.push(isc.A.$qi=function(){var a=this._backMask;if(a)if(this.showEdges){var b=this.$l0,c=
this.maskEdgeCenterOnly,d=c?b.$y4:b.$tb,e=c?b.$y5:b.$tc,f=c?b.$y6:b.$td;b=c?b.$y7:b.$te;e=this.getVisibleWidth()-(d+e);b=this.getVisibleHeight()-(f+b);if(e<=0||b<=0)a.hide();else{this.isVisible()&&a.show();a.setRect(this.getLeft()+d,this.getTop()+f,e,b)}}else a.setRect(this.getRect())},isc.A.getTextDirection=function(){if(this.$81a)return this.$81a;for(var a=this;a;){if(a.textDirection!=null)return this.$81a=a.textDirection;if((a=a.parentElement)&&a.eventProxy)a=a.eventProxy}return this.$81a=isc.Page.getTextDirection()},
isc.A.isRTL=function(){return this.getTextDirection()==isc.Canvas.RTL},isc.A.getRTLSign=function(){return this.isRTL()?-1:1},isc.A.setVisibility=function(a){this.$va!=null&&!this.$vb&&this.finishAnimation(this.$va);this.$vc!=null&&!this.$vd&&this.finishAnimation(this.$vc);this.fadeAnimation&&this.finishAnimation("fade");isc.isA.String(a)||(a=a!=false?isc.Canvas.INHERIT:isc.Canvas.HIDDEN);if(this.visibility!=a){var b=this.isVisible();this.visibility=a;if(this.isDrawn()){if(!b&&this.isVisible()){if(this.isDirty())this.redraw("show() while dirty");
else if(this.children&&this.children.length>0)for(var c=isc.Canvas.$nm.duplicate(),d=0;d<c.length;d++){var e=c[d];e&&e.isDirty()&&this.$sr(e)&&e.redraw("show() on parent while dirty")}this.$ve()}this.$vf(a)}b&&!this.isVisible()&&this.$ve();if(this.peers)for(d=0;d<this.peers.length;d++){b=this.peers[d];this.isVisible()&&(b==this.hscrollbar&&!this.hscrollOn||b==this.vscrollbar&&!this.vscrollOn)||this.isVisible()&&b==this._shadow&&!this.showShadow||b.$jq&&b.setVisibility(a)}this.children&&this.children.map("parentVisibilityChanged",
a,this);this.parentElement&&this.parentElement.childVisibilityChanged(this,a);this.$kn&&this.$vg();this.$807()}},isc.A.$807=function(){if(this.isDrawn()){var a=this.isVisible();if(a!=this.$806){this.$806=a;this.visibilityChanged!=null&&this.visibilityChanged(this.isVisible())}}},isc.A.parentVisibilityChanged=function(a,b){this.children&&this.children.map("parentVisibilityChanged",a,b);this.$ve();this==isc.Canvas.$rl&&isc.Canvas.hideResizeThumbs();this.$kn&&this.$vg();b.$sr(this)&&this.$807()},isc.A.childVisibilityChanged=
function(){this.$t6("childVisChange")},isc.A.childCleared=function(){this.destroying||this.$t6("childClear")},isc.A.peerCleared=function(){},isc.A.childDrawn=function(){this.isDrawn()&&this.$t6("childDraw")},isc.A.peerDrawn=function(){},isc.A.$vg=function(){if(this.$kn&&this.$qj){var a=this.isVisible(),b=this.$sl();if(b){if(a&&b.style.visibility==isc.Canvas.HIDDEN)b.style.visibility=isc.Canvas.VISIBLE;if(!a&&b.style.visibility!=isc.Canvas.HIDDEN)b.style.visibility=isc.Canvas.HIDDEN}}},isc.A.$vf=function(a){var b=
this.getStyleHandle();if(b!=null)b.visibility=a},isc.A.$ve=function(){if(this.hideUsingDisplayNone&&this.isDrawn()){var a=this.getStyleHandle();if(!this.isVisible()&&!this.$62u){this.$vh=a.display;this.$62u=true;a.display=this.$27r;this.$808=this.$809=null}else if(this.isVisible()&&this.$62u){a.display=this.$vh?this.$vh:isc.emptyString;delete this.$62u}}},isc.A.$418=function(){return this.getDrawnState()==isc.Canvas.UNDRAWN&&!this.parentElement&&!this.masterElement},isc.A.show=function(){if(isc.$cv)arguments.$cw=
this;var a=this.hasFocus;this.$418()&&this.draw(true);this.setVisibility(isc.Canvas.INHERIT);if(a&&this.hasFocus){this.logInfo("Show: Hidden / Undrawn widget marked as having focus - calling focus()","events");this.hasFocus=false;this.focus()}this.autoShowParent&&this.parentElement&&this.parentElement.show()},isc.A.$414=function(){if(!(!this.isDrawn()||this.parentElement||this.position!=this.$411)){var a=this.$412,b=this.$413,c=this.getPageLeft(),d=this.getPageTop();this.$tx=c-a;this.$ty=d-b;this.$t2();
this.$412=c;this.$413=d;isc.Page.setEvent("resize",this,isc.Page.FIRE_ONCE,"$414")}},isc.A.hide=function(){this.$rk();this.setVisibility(isc.Canvas.HIDDEN)},isc.A.isVisible=function(){for(var a=this;a;){if(a.visibility==isc.Canvas.HIDDEN)return false;if(a.visibility==isc.Canvas.VISIBLE)break;a=a.parentElement}return true},isc.A.$st=function(){for(var a=this;a;){if(a.visibility==isc.Canvas.HIDDEN&&a.hideUsingDisplayNone)return true;a=a.parentElement}return false},isc.A.setEnabled=function(a){this.logWarn("call to deprecated method 'setEnabled()' - use 'setDisabled()' instead.");
this.setDisabled(a==null||isc.isA.Boolean(a)?!a:a==this.$pi)},isc.A.setDisabled=function(a){if(a==null)a=false;isc.isA.Boolean(a)||(a=a==this.$pi);if(this.disabled!=a){this.peers&&this.peers.map("masterDisabled",a);var b=this.isDisabled();this.disabled=a;a=this.isDisabled();if(b!=a){this.setHandleDisabled(a);this.children&&this.children.map("parentDisabled",a)}}},isc.A.masterDisabled=function(a){this.setDisabled(a)},isc.A.parentDisabled=function(a){if(!this.disabled){this.parentElement.redrawOnDisable||
this.setHandleDisabled(a);this.children&&this.children.map("parentDisabled",a)}},isc.A.setHandleDisabled=function(a){if(this.isDrawn()){this.redrawOnDisable&&this.markForRedraw("setDisabled");this.$kk()&&this.disableKeyboardEvents(a)}},isc.A.disableKeyboardEvents=function(a,b){if(a){this.$vi(-1);this.accessKey!=null&&this.$m9(null)}else{this.$vi(this.getTabIndex());this.accessKey!=null&&this.$m9(this.accessKey)}a&&this.hasFocus&&this.blur();if(b&&this.children)for(var c=0;c<this.children.length;c++)this.children[c].disableKeyboardEvents(a,
true)},isc.A.enable=function(){this.disabled&&this.setDisabled(false)},isc.A.disable=function(){this.disabled||this.setDisabled(true)},isc.A.isDisabled=function(){for(var a=this;a;){if(a.disabled)return true;if((a=a.parentElement)&&a.eventProxy)a=a.eventProxy}return false},isc.A.isEnabled=function(){this.logWarn("Call to deprecated 'isEnabled()' method - should use isDisabled() instead");return!this.isDisabled()},isc.A.$kk=function(){if(this.canFocus!=null)return this.canFocus;if(this.overflow==isc.Canvas.SCROLL||
this.overflow==isc.Canvas.AUTO&&(this.vscrollOn||this.hscrollOn))return true;return false},isc.A.setCanFocus=function(a){this.canFocus=a;this.$ur()},isc.A.$ur=function(){this.$vj(this.$kk());this.canFocusChanged()},isc.A.$vj=function(a){var b;if(this.$kn){if(a){b=this.$sl();if(!b)return this.makeFocusProxy()}else{this.$qp();return}if(isc.Browser.isSafari&&this.getTabIndex()==-1){this.$qp();return}}if(this.$qc())if(a&&this.accessKey)this.$qd();else this.$qt&&this.$qu();if(this._useNativeTabIndex)b=
this.getClipHandle();if(a){this.$vk(this.getTabIndex(),this.$sp);if(b!=null){a=this.$sg();var c=this.$si();b.onfocus=a;b.onblur=c;this.accessKey&&this.$m9(this.accessKey)}}else if(b!=null){b.onFocus=null;b.onBlur=null;this.$vi(-1);b.accessKey!=null&&this.$m9(null)}},isc.A.canFocusChanged=function(){for(var a=this.parentElement;a;){a.childCanFocusChanged(this);a=a.parentElement}},isc.A.childCanFocusChanged=function(){},isc.A.setShowFocusOutline=function(a,b){if(!(!b&&this.showFocusOutline==a)){if(!b)this.showFocusOutline=
a;if(isc.Browser.isMoz){var c=this.getClipHandle();if(c)c.style.MozOutlineStyle=a?isc.emptyString:this.$27r}else if(c=this.getHandle())c.hideFocus=!a}},isc.A.$vl=function(a){return this.isDrawn()&&this.visibleInDOM()&&(!a||!this.isDisabled())},isc.A.visibleInDOM=function(){if(!this.isVisible())return false;for(var a=this;a.parentElement;)a=a.parentElement;if(a.position==isc.Canvas.ABSOLUTE)return true;var b=this.getDocumentBody();for(a=a.getClipHandle().parentNode;a&&a!=b;){var c=a.style;if(c&&c.visibility==
this.$nz)return false;if(c&&c.display==this.$27r)return false;a=a.parentNode}return true},isc.A.getFocusHandle=function(){if(this._useNativeTabIndex)return this.getClipHandle();else if(this.$kn&&this.$qj)return this.$sl();return null},isc.A.setFocus=function(a){if(this.$vl(a)){var b=this.getFocusHandle();if(a&&this.$kk())if(b!=null){this.logInfo("about to call native focus()"+(this.logIsDebugEnabled("traceFocus")?this.getStackTrace():""),"nativeFocus");isc.EH.$lg=this;b.focus();isc.EH.$vm=this}else this.ns.EH.focusInCanvas(this);
else if(this.hasFocus)if(b){this.logInfo("about to call native blur()"+(this.logIsDebugEnabled("traceBlur")?this.getStackTrace():""),"nativeFocus");isc.EH.$ld=this;b.blur()}else this.ns.EH.blurFocusCanvas(this)}},isc.A.$vn=function(){var a=isc.EH.$ke;if(a!=null&&a!=this)this.logDebug("not restoring focus; focus moved to: "+a,"nativeFocus");else{a=isc.EH.$lg;if(a!=null&&a!=this)this.logDebug("not restoring focus; focus about to move to:"+a,"nativeFocus");else{this.logDebug("restoring focus from zIndex change",
"nativeFocus");this.$vo(true)}}},isc.A.focus=function(a){if(isc.$cv)arguments.$cw=this;this.setFocus(true,a)},isc.A.blur=function(a){if(isc.$cv)arguments.$cw=this;this.setFocus(false,a)},isc.A.focusAtEnd=function(){return this.focus()},isc.A.$vo=function(a,b){this.$vp=true;this.setFocus(a,b)},isc.A.$lf=function(a){if(a==null)a=this.ns.EH.$ke==this;this.hasFocus=a;if(this.$vp){delete this.$vp;return false}this.$vq=true;if(this.focusChanged!=null){this.convertToMethod("focusChanged");this.focusChanged(a)}this.redrawOnFocus&&
this.markForRedraw("setFocus");this.$vq=false},isc.A.$rk=function(){var a=this.ns.EH.getFocusCanvas();if(this.$sr(a))if(isc.isA.Canvas(a.focusOnHide)&&a.focusOnHide.isDrawn()&&a.focusOnHide.isVisible())a.focusOnHide.focus();else{a.blur();a.hasFocus&&isc.EH.blurFocusCanvas(a)}},isc.A.containsFocus=function(){return this.contains(this.ns.EH.getFocusCanvas(),true)},isc.A.setAccessKey=function(a){this.accessKey=a;this.$kk()&&!this.isDisabled()&&this.$m9(this.accessKey)},isc.A.$m9=function(a){if(this.$qc())if(a==
null)this.$qu();else if(this.$qt)this.$qt.accessKey=a;else this.$qd();else{if(this._useNativeTabIndex){var b=this.getHandle();if(b!=null)b.accessKey=a}if(this.$kn&&this.$qj){b=this.$sl();if(b!=null)if(isc.Browser.isMoz){this.$qp();this.makeFocusProxy()}else b.accessKey=a}}},isc.A.getAccessKey=function(){return this.accessKey},isc.A.getTabIndex=function(){this.tabIndex==null&&this.$vr();return this.tabIndex},isc.A.getTabIndexSpan=function(){return 1},isc.A.setTabIndex=function(a){var b=isc.Canvas.TAB_INDEX_FLOOR;
if(a>=b){b=b-1;this.logWarn("setTabIndex(): Passed index of "+a+". This method does not support setting a tab index greater than "+b+".  Setting tab index for this widget to "+b+this.getStackTrace());a=b}this.$rp();this.$vk(a,false)},isc.A.$vk=function(a,b){this.$sp=b;this.tabIndex=a;this.$kk()&&!this.isDisabled()&&this.$vi(a)},isc.A.$vi=function(a){if(this._useNativeTabIndex&&this.isDrawn()){this.getClipHandle().tabIndex=a;isc.Browser.isIE&&isc.Canvas.$vs()}if(this.$kn){if(!this.$qj)return this.makeFocusProxy();
var b=this.$sl(),c=this.hasFocus&&!this.$vq;c&&b&&b.blur();if(isc.Browser.isSafari&&a<0)return this.$qp();if(b!=null){b.tabIndex=a;if(isc.Browser.isMoz)b.style.MozUserFocus=a<0?"ignore":"normal";c&&b.focus()}}},isc.A.$vr=function(){var a=isc.Canvas;if(a.$vt==null)a.$vt=a.TAB_INDEX_FLOOR;var b=isc.EH.$kl;if(b)a.$vt+=b.getTabIndexSpan();a.$vt+=a.TAB_INDEX_GAP;if(a.$vt>isc.Canvas.TAB_INDEX_CEILING&&!isc.Canvas.$vu){isc.Canvas.logWarn("Auto allocation of tab-indices has reached native browser ceiling - tab-order cannot be guaranteed for widgets on this page.");
isc.Canvas.$vu=true}this.$vk(a.$vt,true);if(b){b.$vv(this);this.$vw=b}else isc.EH.$kj=this;isc.EH.$kl=this},isc.A.$vx=function(a){if(!(this==a||this.$vy()==a)){a.getTabIndex();if(a.$sp){var b=this.$vz(),c=this.$vy();if(isc.EH.$kl==this)isc.EH.$kl=b;if(isc.EH.$kj==this)isc.EH.$kj=c;b!=null&&b.$vv(c);c!=null&&c.$v0(b);this.$v0(null);this.$vv(null);this.$v1(a.$vz(),a);this.$v2()}else this.logWarn("$vx() attempting to set tab index adjacent to widget "+a+" with explicitly specified tabIndex ["+a.tabIndex+
"]. This method can only manipulate widgets with auto-assigned tab indexes.")}},isc.A.$sq=function(a){if(!(this==a||this.$vw==a)){a.getTabIndex();if(a.$sp){var b=this.$vz(),c=this.$vy();if(isc.EH.$kl==this)isc.EH.$kl=b;if(isc.EH.$kj==this)isc.EH.$kj=c;b!=null&&b.$vv(c);c!=null&&c.$v0(b);this.$v0(null);this.$vv(null);this.$v1(a,a.$vy());this.$v2()}else this.logWarn("$sq() attempting to set tab index adjacent to widget "+a+" with explicitly specified tabIndex ["+a.tabIndex+"]. This method can only manipulate widgets with auto-assigned tab indexes.")}},
isc.A.$v1=function(a,b){if(b==null)return this.$vr();if(a==null){var c=b.$vy();b.$rp();this.$vv(c);this.$v0(null);this.$vk(b.tabIndex,true);isc.EH.$kj=this;b.$v1(this,c)}else{this.$vv(b);b.$v0(this);this.$v0(a);a.$vv(this);var d=a.tabIndex+a.getTabIndexSpan();c=b.tabIndex;d=d+Math.floor((c-d)/2);var e=this.getTabIndexSpan();d+e>c&&b.$v3(d+e-c);this.logIsDebugEnabled("tabIndex")&&this.logDebug("Putting "+this.getID()+" in tab order between: "+a.getID()+":"+a.tabIndex+", and :"+b.getID()+":"+b.tabIndex+
". Resulting tabIndex:"+d,"tabIndex");this.$vk(d,true)}},isc.A.$v3=function(a){var b=this.$vy();if(b==null)this.$vk(this.tabIndex+a+isc.Canvas.TAB_INDEX_GAP,true);else{var c=b.getTabIndex()-this.getTabIndexSpan();if(this.tabIndex+a<c)this.$vk(c,true);else{b.$v3(a-(c-this.tabIndex));this.$vk(b.tabIndex-this.getTabIndexSpan(),true)}}},isc.A.$vy=function(a){return a?this.$vw:this.$v4},isc.A.$vz=function(){return this.$vy(true)},isc.A.$vv=function(a,b){if(b)this.$vw=a;else this.$v4=a},isc.A.$v0=function(a){return this.$vv(a,
true)},isc.A.$kf=function(a,b){var c=this;do c=a?c.$vy():c.$vz();while(c&&(isc.EH.targetIsMasked(c,b)||c.isDisabled()||!c.isDrawn()||!c.isVisible()||!c.$kk()));if(c){this.logInfo("focusInNextTabElement() shifting focus to:"+c,"syntheticTabIndex");c.focusAtEnd(a)}else if(a){this.logInfo("focusInNextTabElement() shifting focus to first widget","syntheticTabIndex");isc.EH.$kj==null||isc.EH.$kj==this&&(this.isDisabled()||!this.isDrawn()||!this.isVisible()||!this.$kk()||this.isMasked(b))||isc.EH.$kh(b)}else{this.logInfo("focusInNextTabElement() shifting focus to last widget",
"syntheticTabIndex");isc.EH.$kl==null||isc.EH.$kl==this&&(this.isDisabled()||!this.isDrawn()||!this.isVisible()||!this.$kk()||this.isMasked(b))||isc.EH.$kg(b)}},isc.A.$v2=function(){var a=isc.isA.Layout(this)?this.members:this.children;if(!(!a||a.length==0))for(var b=this.$vy(),c=a.length-1;c>=0;c--)if(!(a[c]==null||a[c].tabIndex!=null&&!a[c].$sp)){b==null?a[c].$sq(this):a[c].$vx(b);b=a[c]}},isc.A.$v5=function(){var a=this.children;if(isc.Layout&&isc.isA.Layout(this))a=this.members;if(a!=null)for(var b=
a.length-1;b>=0;b--){var c=a[b].$v5();if(c!=null)return c}if(this.tabIndex==null||this.$sp)return this;return null},isc.A.$rp=function(){if(this.$sp&&this.tabIndex){var a=this.$vz(),b=this.$vy();if(!(a==null&&b==null&&isc.EH.$kl!=this&&isc.EH.$kj!=this)){if(a)a.$vv(b);else isc.EH.$kj=b;if(b)b.$v0(a);else isc.EH.$kl=a;this.$v0(null);this.$vv(null)}}},isc.A.getZIndex=function(a){if(!this.isDrawn()||isc.Browser.isSafari){a&&this.zIndex==isc.Canvas.AUTO&&this.setZIndex(isc.Canvas.getNextZIndex());return this.zIndex}return parseInt(this.getStyleHandle().zIndex)},
isc.A.setZIndex=function(a){var b=this.zIndex;if(b!=a){var c=false;if(isc.Browser.isIE&&this.hasFocus&&this._useNativeTabIndex){c=true;this.logDebug("blurring due to zIndex change","nativeFocus");this.$vo(false)}a<b&&this.$v6(a);this.zIndex=a;if(this.isDrawn()){if(this.useClipDiv)this.getHandle().style.zIndex=a;this.getStyleHandle().zIndex=a}a>b&&this.$v6(a);this.hscrollbar&&this.hscrollbar.moveAbove(this);this.vscrollbar&&this.vscrollbar.moveAbove(this);if(this.clipCorners){var d=this.$uc;d.TL&&
d.TL.moveAbove(this);d.TR&&d.TR.moveAbove(this);d.BL&&d.BL.moveAbove(this);d.BR&&d.BR.moveAbove(this)}c&&this.delayCall("$vn",[],0);this.zIndexChanged(b,a)}},isc.A.$v6=function(a){this.$sb()&&this.$l0.setZIndex(a-1);this._backMask&&this._backMask.setZIndex(a-2);this._shadow&&this._shadow.setZIndex(a-3);this.modalMask&&this.modalMask.setZIndex(a-4)},isc.A.zIndexChanged=function(){this.children&&this.children.map("parentZIndexChanged")},isc.A.parentZIndexChanged=function(){this.children&&this.children.map("parentZIndexChanged")},
isc.A.bringToFront=function(){if(isc.$cv)arguments.$cw=this;isc.Canvas.$ni+=18;this.setZIndex(isc.Canvas.$ni);isc.$nd=true;this.unmask();isc.$nd=false},isc.A.sendToBack=function(){isc.Canvas.$nh-=18;this.setZIndex(isc.Canvas.$nh)},isc.A.moveAbove=function(a){this.setZIndex(a.getZIndex(true)+6)},isc.A.moveBelow=function(a){this.setZIndex(a.getZIndex(true)-6)},isc.A.getContents=function(){var a=isc.isA.Function(this.contents)?this.contents():this.contents;return this.dynamicContents?a.evalDynamicString(this,
this.dynamicContentsVars):a},isc.A.setContents=function(a){if(a!=null)this.contents=a;this.markForRedraw("setContents")},isc.A.containsIFrame=function(){return this.contentsURL!=null&&this.contentsType=="page"},isc.A.getContentsURL=function(){return this.contentsURL},isc.A.setContentsURL=function(a,b){this.contentsURL=a;a=isc.Page.getURL(a);var c=isc.addProperties({},this.contentsURLParams,b);a=isc.rpc.addParamsToURL(a,c);if(this.isDrawn())if(this.containsIFrame()){c=this.$sk();if(!c||!a)this.markForRedraw("setContentsURL");
else c.src=a}},isc.A.setBackgroundColor=function(a){if(a)this.backgroundColor=a;if(this.isDrawn())return this.getStyleHandle().backgroundColor=a},isc.A.setBackgroundImage=function(a){if(a)this.backgroundImage=a;if(this.isDrawn())if(this.isDrawn())this.getStyleHandle().backgroundImage="url("+this.getImgURL(this.backgroundImage)+")"},isc.A.setBorder=function(a){this.$tk=null;if(a!=null&&!isc.isA.String(a))a=this.$63e(a);if(a!=null){if(isc.endsWith(a,isc.semi))a=a.slice(0,a.length-1);this.border=a;var b=
this.getStyleHandle();if(b){if(b.border!=a)b.border=a;this.adjustOverflow("setBorder");this.innerSizeChanged("Border thickness changed")}}},isc.A.$63e=function(a){var b=a;if(isc.isA.Number(a))a+="px solid";else{a=null;this.logWarn("this.border defined as "+b+". This property should have a string value - dropping this attribute.")}return a},isc.A.getBorder=function(){return this.border},isc.A.setOpacity=function(a,b,c){!b&&this.fadeAnimation&&this.finishAnimation("fade");this.opacity=a;if(this.opacity==
100&&!c&&!(this.smoothFade&&isc.Browser.isMoz))this.opacity=null;if(this.isDrawn())if(isc.Browser.isMoz){var d=this.opacity!=null?this.opacity/100:"";if(this.smoothFade&&(d==1||this.opacity==null))d=0.9999;if(this.$65q)this.getStyleHandle().MozOpacity=d;else this.getStyleHandle().opacity=d}else if(isc.Browser.isIE){if(!isc.Canvas.neverUseFilters||this.useOpacityFilter)this.getStyleHandle().filter=this.opacity==null?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+this.opacity+")"}else{d=this.opacity!=
null?this.opacity/100:"";this.getStyleHandle().opacity=d}this.$v7(a,b,c||a!=null);if(isc.Browser.isIE&&this.fixIEOpacity&&this.children)for(d=0;d<this.children.length;d++){var e=this.children[d];if(e.opacity==null&&(c||a!=null))e.setOpacity(100,b,true);else e.opacity==100&&e.setOpacity(null)}this.opacityChanged(a,b)},isc.A.opacityChanged=function(){},isc.A.$v7=function(a,b,c){if(this.peers)for(var d=0;d<this.peers.length;d++)if(this.peers[d].$nt)this.peers[d].setOpacity(a,b,c);else this.peers[d]==
this.edgedCanvas&&this.edgeOpacity&&this.peers[d].setOpacity(Math.round(this.opacity*this.edgeOpacity*0.01),b,c)},isc.A.setPrompt=function(a){this.prompt=a;this.updateHover()},isc.A.setCursor=function(a){if(a&&a!=this.cursor){this.cursor=a;this.$k2()}},isc.A.$v8=function(a){if(this.isDrawn()){if((isc.Browser.isMoz||isc.Browser.isStrict&&isc.Browser.isSafari)&&a=="hand")a=isc.Canvas.HAND;this.$v9=a;this.getStyleHandle().cursor=a;if(this.useClipDiv)this.getHandle().style.cursor=a;if(this.$kt)for(var b=
0;b<this.$kt.length;b++)this.$kt[b].$v8(a);this.ns.EH.$wa&&this==this.ns.EH.getTarget()&&this.ns.EH.$wa.setCursor(a)}isc.Browser.isOpera&&isc.EH.lastEvent.target==this&&this.markForRedraw()},isc.A.$k2=function(){var a=this.getCurrentCursor();this.$v9!=a&&this.$v8(a)},isc.A.getCurrentCursor=function(){var a=this.cursor;if(isc.EH.dragging&&this.$uh&&isc.EH.dragMoveTarget!=this)a=this.noDropCursor;else if(this.isDisabled())a=this.disabledCursor;else{var b;if(this.canDragResize&&this.edgeCursorMap){var c=
this.getEventEdge();if(c&&this.edgeCursorMap[c]){a=this.edgeCursorMap[c];b=true}}if(!b&&this.canDragReposition&&this.dragRepositionCursor)a=this.dragRepositionCursor}return a},isc.A.getHoverTarget=function(){for(var a=this;a;)if(a.getCanHover()==null){if(a.prompt!=null)return a;a=a.parentElement}else if(a.getCanHover())return a;else break;return null},isc.A.startHover=function(){isc.Hover.setAction(this,this.$wb,null,this.hoverDelay)},isc.A.stopHover=function(){isc.Hover.clear()},isc.A.$wb=function(){var a=
isc.EH,b=a.lastMoveTarget;a=a.lastEvent;if(!(!b||b.getHoverTarget(a)!=this))return this.handleHover()},isc.A.getCanHover=function(){return this.canHover},isc.A.getHoverComponent=function(){},isc.A.handleHover=function(){if(!(this.hover&&this.hover()==false))if(this.showHover){var a=this.showHoverComponents&&this.getHoverComponent?this.getHoverComponent():null;if(a!=null&&isc.isA.Canvas(a)){var b=this.$wc();isc.Hover.show(a,b,null,this)}else{a=this.getHoverHTML();if(a!=null&&!isc.isAn.emptyString(a)){b=
this.$wc();isc.Hover.show(a,b,null,this)}}}},isc.A.updateHover=function(a){if(!(isc.Hover.lastHoverCanvas!=this||!isc.Hover.hoverCanvas.isVisible())){if(a==null)a=this.getHoverHTML();isc.Hover.show(a,this.$wc(),null,this)}},isc.A.$80l=function(){if(this.hoverCanvas&&this.hoverCanvas.hoverAutoDestroy!=false){this.hoverCanvas.markForDestroy();this.hoverCanvas=null;delete this.hoverCanvas}this.hoverHidden()},isc.A.hoverHidden=function(){},isc.A.$wc=function(){return{width:this.hoverWidth,height:this.hoverHeight,
align:this.hoverAlign,valign:this.hoverVAlign,baseStyle:this.hoverStyle,opacity:this.hoverOpacity,moveWithMouse:this.hoverMoveWithMouse,wrap:this.hoverWrap}},isc.A.getHoverHTML=function(){return this.prompt},isc.A.setClassName=function(a){this.logIsInfoEnabled(this.$pj)&&this.logInfo("call to deprecated setClassName() property - use setStyleName() instead");return this.setStyleName(a)},isc.A.setStyleName=function(a){this.$tp=this.$tk=null;this.$81b();if(a)this.className=this.styleName=a;if(this.getClipHandle())this.getClipHandle().className=
this.styleName;this.overflow!=isc.Canvas.HIDDEN&&this.adjustOverflow("setStyleName")},isc.A.getStateName=function(){var a=this.getClipHandle().className;return a!=null?a:this.styleName},isc.A.handleShowContextMenu=function(a){if(a.target==this&&this.useEventParts){var b=this.getEventPart(a);if(b.part)if(this.$wd(b.part,"showContextMenu",b.element,b.ID,a)==false)return false}if(this.showContextMenu)return this.showContextMenu(a)},isc.A.showContextMenu=function(){var a=this.contextMenu;if(a){a.target=
this;if(!isc.isA.Canvas(a)){a.autoDraw=false;this.contextMenu=a=this.getMenuConstructor().create(a)}a.showContextMenu()}return a==null},isc.A.getMenuConstructor=function(){var a=isc.ClassFactory.getClass(this.menuConstructor);if(!a){isc.logWarn("Class not found for menuConstructor:"+this.menuConstructor+". Defaulting to isc.Menu class");a=isc.ClassFactory.getClass("Menu")}return a},isc.A.hideContextMenu=function(){this.contextMenu&&this.contextMenu.hideContextMenu()},isc.A.$kr=function(){return this.canSelectText},
isc.A.handleMouseMove=function(a,b){if(a.target==this&&this.useEventParts){var c=this.getEventPart(a),d=this.$nw;if(d&&d.part&&(d.part!=c.part||d.ID!=c.ID))this.$wd(d.part,isc.EH.MOUSE_OUT,d.element,d.ID,a);if(c.part){d=!d||d.ID!=c.ID;this.$wd(c.part,d?isc.EH.MOUSE_OVER:isc.EH.MOUSE_MOVE,c.element,c.ID,a);d&&isc.Hover.setAction(this,this.$we,[c.element,c.ID],this.hoverDelay)}this.$nw=c}if(this.mouseMove)return this.mouseMove(a,b)},isc.A.$we=function(a,b){this.$nw&&this.$wd(this.$nw.part,"hover",a,
b)},isc.A.handleMouseOut=function(a,b){if(a.target==this&&this.useEventParts){var c=this.$nw;c&&c.part&&this.$wd(c.part,isc.EH.MOUSE_OUT,c.element,c.ID,a)}if(this.mouseOut)return this.mouseOut(a,b)},isc.A.handleMouseDown=function(a,b){var c=this.$772;c!=null&&this.cancelAnimation(c);a.target==this&&this.useEventParts&&this.firePartEvent(a,isc.EH.MOUSE_DOWN);if(this.mouseDown)return this.mouseDown(a,b)},isc.A.handleMouseUp=function(a,b){a.target==this&&this.useEventParts&&this.firePartEvent(a,isc.EH.MOUSE_UP);
if(this.mouseUp)return this.mouseUp(a,b)},isc.A.handleClick=function(a,b){a.target==this&&this.useEventParts&&this.firePartEvent(a,isc.EH.CLICK);if(this.click)return this.click(a,b)},isc.A.handleDoubleClick=function(a,b){a.target==this&&this.useEventParts&&this.firePartEvent(a,isc.EH.DOUBLE_CLICK);if(this.doubleClick)return this.doubleClick(a,b)},isc.A.handleLongTouch=function(a,b){return this.handleShowContextMenu(a,b)},isc.A.getEventPart=function(a){if(!a)a=isc.EH.lastEvent;return this.getElementPart(a.nativeTarget)},
isc.A.getElementPart=function(a){var b,c;if(a&&a.getAttribute)b=a.getAttribute(this.$pk);if(b&&b!=isc.emptyString){var d=a.id;if(d&&d!=isc.emptyString)c=d.substring(this.getID().length+b.length+2)}return{part:b,ID:c,element:a}},isc.A.getPartElement=function(a){var b=a.part;a=a.partID;var c=this.getID+"_"+b;if(a)c+=a;if(a=isc.Element.get(c))return a;return isc.Element.findAttribute(this.getHandle(),this.$pk,b)},isc.A.firePartEvent=function(a,b){if(this.useEventParts&&a){var c=this.getEventPart(a);
if(c.part){if(!b)b=a.eventType;return this.$wd(c.part,b,c.element,c.ID,a)}}},isc.A.$wd=function(a,b,c,d,e){a=this.getPartEventHandler(a,b);if(this[a])return this[a](c,d,e)},isc.A.getPartEventHandler=function(a,b){isc.Canvas.$np[a]||(isc.Canvas.$np[a]={});if(!isc.Canvas.$np[a][b]){var c=b.substring(0,1).toUpperCase()+b.substring(1);isc.Canvas.$np[a][b]=a+c}return isc.Canvas.$np[a][b]},isc.A.getDragType=function(){return this.dragType},isc.A.willAcceptDrop=function(){if(this.ns.EH.dragTarget==null)return false;
if(this.dropTypes==isc.Canvas.ANYTHING||this.dropTypes==null||isc.is.emptyString(this.dropTypes))return true;var a=this.ns.EH.dragTarget.getDragType();if(a==null||isc.is.emptyString(a))return false;if(isc.isA.String(a))return this.dropTypes.contains(a);else if(isc.isAn.Array(a)){for(var b=0,c=true,d=a.length;b<d&&c;b++)c=c&&this.dropTypes.contains(a);return c}return false},isc.A.$mb=function(){this._eventMask.visibility==isc.Canvas.HIDDEN&&this._eventMask.show()},isc.A.$mc=function(){this._eventMask.visibility!=
isc.Canvas.HIDDEN&&this._eventMask.hide()},isc.A.handleDrop=function(a,b){if(this.onDrop!=null&&this.onDrop()==false)return false;return this.drop(a,b)},isc.A.getHSnapPosition=function(a,b){if(!b)b=this.snapHDirection;if(b!=isc.Canvas.BEFORE&&b!=isc.Canvas.AFTER&&b!=isc.Canvas.NEAREST)return a;var c=Math.floor(a/this.snapHGap)*this.snapHGap,d=c+this.snapHGap,e=c+this.snapHGap/2;return b==isc.Canvas.BEFORE?c:b==isc.Canvas.AFTER?d:a<=e?c:d},isc.A.getVSnapPosition=function(a,b){if(!b)b=this.snapVDirection;
if(b!=isc.Canvas.BEFORE&&b!=isc.Canvas.AFTER&&b!=isc.Canvas.NEAREST)return a;var c=Math.floor(a/this.snapVGap)*this.snapVGap,d=c+this.snapVGap,e=c+this.snapVGap/2;return b==isc.Canvas.BEFORE?c:b==isc.Canvas.AFTER?d:a<=e?c:d},isc.A.shouldSnapOnDrop=function(){return true},isc.A.noSnapDragOffset=function(){return false},isc.A.setAppImgDir=function(a){if(a)this.appImgDir=a});isc.B.push(isc.A.getAppImgDir=function(){return isc.Page.getImgURL("",this.appImgDir)},isc.A.setSkinImgDir=function(a){if(a)this.skinImgDir=
a},isc.A.getSkinImgDir=function(){return isc.Page.getSkinImgDir(this.skinImgDir)},isc.A.getImgURL=function(a,b){return isc.Canvas.getImgURL(a,b,this)},isc.A.imgHTML=function(a,b,c,d,e,f,g){return isc.Canvas.imgHTML(a,b,c,d,e,f,g,this)},isc.A.$wf=function(a,b,c,d,e,f,g){return isc.Canvas.imgHTML(a,b,c,d,e,f,g,this,true)},isc.A.getImage=function(a){if(isc.isA.String(a))a=this.getCanvasName()+a;var b=this.getHandle();if(b)return isc.Page.isXHTML()?document.getElementById(a):b.document?b.document.images[a]:
document.images[a];return null},isc.A.setImage=function(a,b,c){var d=this.getImage(a);d==null?this.logWarn("setImage: image '"+a+"' couldn't be found"):isc.Canvas.$wg(d,b,c,this)},isc.A.linkHTML=function(a,b,c,d,e,f,g){return isc.Canvas.linkHTML(a,b,c,d,e,f,g)},isc.A.inWhichPosition=function(a,b,c){if(!a||b<0)return-1;if(c==isc.Page.RTL){c=a.sum();for(var d=0,e=a.length;d<e;d++){if(b>=c-a[d])return d;c-=a[d]}}else{d=0;for(e=a.length;d<e;d++){if(b<=a[d])return d;b-=a[d]}}return-2},isc.A._canvasList=
function(a){var b=isc.Canvas._canvasList;a?b.add(this):b.remove(this);if(this.$ih)isc.Canvas._iscInternalCount+=a?1:-1;else isc.Log.updateStats(this.$f8)},isc.A.$p6=function(a){if(!this.$ih){isc.Canvas._stats[a]++;isc.Log.updateStats(a)}},isc.A.$wh=function(a){var b=this.$sc;if(!b)return null;if(a)return b[a]},isc.A.$wi=function(a,b,c){if(!(a==null||b==null)){if(!this.$sc)this.$sc={};this.$sc[b]||(this.$sc[b]=[]);this.$sc[b].add(a);if(c!=null)a.$55s=c;delete this.$s7;delete this.$s8}},isc.A.$wj=function(a,
b){if(!(a==null||b==null))if(this.$sc&&this.$sc[b]){this.$sc[b].remove(a);delete a.$55s;delete this.$s7;delete this.$s8}},isc.A.$ps=function(){this.$uc={};for(var a=0;a<this.clippedCorners.length;a++)this.$wk(this.clippedCorners[a])},isc.A.$wk=function(a){var b=this.$uc,c=this.left,d=this.top,e=this.cornerClipWidth||this.cornerClipSize,f=this.cornerClipHeight||this.cornerClipSize;if(a=="TR"||a=="BR")c=c+this.getWidth()-e;if(a=="BL"||a=="BR")d=d+this.getHeight()-f;if(this.noCornerClipImages&&!(isc.Browser.isIE&&
isc.Browser.minorVersion>=5.5))this.noCornerClipImages=false;a=b[a]=isc.ClassFactory.newInstance({_constructor:this.noCornerClipImages?"Canvas":"Img",left:c,top:d,width:e,height:f,eventProxy:this,src:this.noCornerClipImages?null:this.$wl(a),contents:this.noCornerClipImages?this.$wm(e,f,a):null},this.$nv);this.addPeer(a);a.moveAbove(this)},isc.A.$qg=function(){if(this.noCornerClipImages)for(var a in this.$uc){var b=this.$uc[a].getHandle().firstChild,c=b.style;b.filters[0].apply();c.visibility="hidden";
b.filters[0].percent=71}},isc.A.$wl=function(a){return isc.Img.urlForState(this.cornerClipImage,null,null,this.cornerClipColor,a)},isc.A.$wm=function(a,b,c){var d=isc.SB.create();d.append("<DIV STYLE='width:",2*a,"px;height:",2*b,"px;filter:progid:DXImageTransform.Microsoft.iris(irisStyle=circle,motion=out);");c.contains("R")&&d.append("margin-left:",-a,"px;");c.contains("B")&&d.append("margin-top:",-b,"px;");d.append("'><DIV STYLE='overflow:hidden;width:",a,"px;height:",b,"px;background-color:",
this.cornerClipColor,";");c.contains("R")&&d.append("margin-left:",a,"px;");c.contains("B")&&d.append("margin-top:",b,"px;");d.append("'></DIV></DIV>");return d.toString()},isc.A.$sb=function(){return this.showEdges&&!this.edgesAsChild},isc.A.$pq=function(){if(!this.showEdges||isc.isA.EdgedCanvas(this)||this.$l0!=null)return this.$l0;var a=this.$l0=this.$wn();if(this.edgesAsChild){a.resizeTo("100%","100%");a.sendToBack();this.addChild(a)}else this.addPeer(a);return a},isc.A.setEdgeOpacity=function(a){a=
this.edgeOpacity=a;if(this.opacity>0&&this.opacity<100)a=this.opacity*(this.edgeOpacity/100);this.$l0.setOpacity(a)},isc.A.$wn=function(){var a=this.$pl,b=isc.EdgedCanvas.createRaw();b.autoDraw=false;b._generated=true;b.dragTarget=this;b.visibility=this.visibility;b.opacity=this.opacity;if(this.edgeOpacity!=null){b.opacity=this.edgeOpacity;b.$nt=false}b.smoothFade=this.smoothFade;if(this.edgeOverflow!=null)b.overflow=this.edgeOverflow;b.eventProxy=this;for(var c=0;c<a.length;c++){var d=a[c];if(this[d]!=
null)b[d]=this[d]}if(this.edgeBackgroundColor)b.backgroundColor=this.edgeBackgroundColor;if(this.edgeCenterBackgroundColor)b.centerBackgroundColor=this.edgeCenterBackgroundColor;if(this.edgeShowCenter!=null)b.showCenter=this.edgeShowCenter;if(!this.edgesAsChild)b.zIndex=this.getZIndex(true)-1;b.completeCreation();return b},isc.A.setShowShadow=function(a){if(this.showShadow=a)if(this._shadow)this.isDrawn()&&this._shadow.show();else this.$pr();else this._shadow&&this._shadow.hide()},isc.A.$pr=function(){var a=
this._shadow=this.createAutoChild("shadow",{visibility:this.visibility,zIndex:this.getZIndex(true)-3},isc.DropShadow);this.updateShadow(true);this.addPeer(a);a.moveBelow(this)},isc.A.updateShadow=function(a){a||this.setShowShadow(this.showShadow);if(a=this._shadow){a.offset=this.shadowOffset;a.offsetX=this.shadowOffsetX;a.offsetY=this.shadowOffsetY;a.softness=this.shadowSoftness;this.shadowImage&&a.setEdgeImage(this.shadowImage);a.setDepth(this.shadowDepth);if(this.dragResizeFromShadow&&this.canDragResize){a.canDragResize=
this.canDragResize;a.resizeFrom=this.resizeFrom;a.dragTarget=this}}},isc.A.propertyChanged=function(a){isc.contains(a,this.$pm)&&this.updateShadow&&this.updateShadow()},isc.A.setIsGroup=function(a){if(a!=this.isGroup){var b=this.shouldShowGroupLabel()&&this.isDrawn();b&&this.clear();if(a){this.$55t=this.border;this.setBorder(this.groupBorderCSS);this.shouldShowGroupLabel()&&this.$55u()}else{this.setBorder(this.$55t||"");this.shouldShowGroupLabel()&&this.$55v()}this.isGroup=a;b&&this.draw()}},isc.A.shouldShowGroupLabel=
function(){return this.showGroupLabel},isc.A.makeGroupLabel=function(){if(this.groupLabel){this.groupTitle!=null&&this.groupLabel.setContents(this.groupTitle);this.groupLabel.setBackgroundColor(this.getGroupLabelBackgroundColor())}else{var a={autoDraw:false,$jo:false,$ns:true,backgroundColor:this.getGroupLabelBackgroundColor(),eventProxy:this,styleName:this.groupLabelStyleName};if(this.groupTitle!=null)a.contents=this.groupTitle;this.groupLabel=this.createAutoChild("groupLabel",a)}},isc.A.getGroupLabelBackgroundColor=
function(){if(this.groupLabelBackgroundColor)return this.groupLabelBackgroundColor;if(this.backgroundColor!=null)return this.backgroundColor;return"white"},isc.A.$55u=function(){this.makeGroupLabel();var a=this.groupLabel,b;if(a.overflow==isc.Canvas.VISIBLE){a.parentElement!=null&&a.deparent();a.setTop(-1E3);a.draw()}b=a.getVisibleHeight();var c=Math.round(b/2);this.$wi(a,isc.Canvas.TOP,c);b=b-c;if(this.padding)b+=this.padding;this.setTopPadding(b);a.setLeft(this.getLeft()+this.groupLabelPadding);
a.setTop(this.getTop());a.masterElement!=this&&this.addPeer(a);if(this.isDrawn())a.isDrawn()||a.draw();this.getTopMargin();a.moveAbove(this);a.isDrawn()&&!this.isDrawn()&&a.clear()},isc.A.$55v=function(){if(this.groupLabel){var a=this.groupLabel;this.$wj(a,isc.Canvas.TOP);this.setTopPadding(null);a.clear();a.depeer()}},isc.A.setGroupTitle=function(a){this.groupTitle=a;this.groupLabel?this.groupLabel.setContents(this.groupTitle):this.$55u()});isc.B._maxIndex=isc.C+530;isc.A=isc.Canvas;isc.B=isc._allFuncs;
isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$hm="[SKIN]";isc.A.printOmitControls=["Button","StretchImgButton","ImgButton","MenuButton","Toolbar","ToolStrip","ButtonItem","ToolbarItem"];isc.A.printIncludeControls=["Label"];isc.A.$ws=0;isc.A.$wt="ID='";isc.A.$ob="'";isc.A.$wu="absmiddle";isc.A.$wv=[,,," eventpart='valueicon' style='vertical-align:middle;margin-left:",,"px;margin-right:",,"px;'"];isc.A.$ww={};isc.A.$wx={png:true,PNG:true,Png:true};isc.A.$wy=["<a",," href='",
,"' target='",,"'",,,,">",,"</a>"];isc.A.$wz="[SKINIMG]/blank.gif";isc.A.$w0="0";isc.A.$w1="clearRedrawQueue";isc.A.$65j=[];isc.A.$65k=0;isc.A.$65l="clearDestroyQueue";isc.A.$tw=[];isc.B.push(isc.A.stripScriptTags=function(a){return a.replace(/<script([^>]*)?>(.|\n|\r)*?<\/script>/ig,isc.emptyString)},isc.A.stripLinkTags=function(a){return a.replace(/<link([^>]*)?>/ig,isc.emptyString)},isc.A.getById=function(a){return(a=window[a]||null)?isc.isA.Canvas(a)?a:null:null},isc.A.getNextZIndex=function(){return isc.Canvas.$ng+=
18},isc.A.getFocusProxyString=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,s){if(this.$w8==null){this.$w9="' ONFOCUS=";this.$xa="' ";this.$xb=" ONBLUR=";this.$w8=["<div"," id='",null,"$xc' style='overflow:hidden;width:0px;height:0px;position:",,";left:",null,"px;top:",null,"px;'>",isc.Browser.isSafari?"<textarea":isc.Browser.isMoz&&isc.Browser.geckoVersion>=20051111?"<div":"<button onclick='event.cancelBubble=true;return false;'"," id='",null,"__focusProxy'"," style='VISIBILITY:",null,"left:1px;top:1px;width:",
isc.Browser.isSafari?"1":null,"px;height:",isc.Browser.isSafari?"1":null,"px;",null,this.$w9,null,this.$xb,null,null,null,null," tabindex='",null,null,"' focusProxy='true' handleNativeEvents='",null,"'>",isc.Browser.isSafari?"</textarea>":isc.Browser.isMoz&&isc.Browser.geckoVersion>=20051111?"</div>":"</button>","</div>"]}var r=this.$w8;r[2]=a;r[4]=b?"absolute":"inline";r[6]=c;r[8]=d;r[12]=a;r[15]=g?"visible;":"hidden;";r[17]=e;r[19]=f;if(isc.Browser.isMoz)r[21]=!h||i==-1?"-moz-user-focus:ignore;":
"-moz-user-focus:normal;";if(l&&l!=isc.emptyString){r[22]=this.$w9;r[23]=l}else{r[22]=this.$xa;r[23]=null}if(m&&m!=isc.emptyString){r[24]=this.$xb;r[25]=m}else{r[24]=null;r[25]=null}r[26]=n!=null?" onkeydown="+n:null;r[27]=o!=null?" onkeypress="+o:null;r[28]=s!=null?" onkeyup="+s:null;r[30]=h?i:-1;r[31]=h&&j?"' accesskey='"+j:null;r[33]=k?true:false;return r.join(isc.$ad)},isc.A.clearCSSCaches=function(){isc.Element.$50f();for(var a=isc.Canvas._canvasList,b=0;b<a.length;b++){var c=a[b];if(!(c==null||
c.destroyed))c.$s8=c.$s7=c.$tk=c.$tp=null}},isc.A.setAppImgDir=function(a){this.getPrototype().appImgDir=a},isc.A.getAppImgDir=function(){return isc.Page.getImgURL(isc.emptyString,this.getPrototype().appImgDir)},isc.A.setSkinImgDir=function(a){this.getPrototype().skinImgDir=a},isc.A.getSkinImgDir=function(){return isc.Page.getSkinImgDir(this.getPrototype().skinImgDir)},isc.A.getImgURL=function(a,b,c){if(a==null||isc.isAn.emptyString(a))return isc.$ad;c=c||this.getPrototype();if(a.imgDir!=null&&b==
null)b=a.imgDir;if(a.src!=null)a=a.src;if(b==null)b=isc.startsWith(a,this.$hm)?c.skinImgDir:c.appImgDir;return isc.Page.getImgURL(a,b)},isc.A.setShowCustomScrollbars=function(a){isc.Canvas.addProperties({showCustomScrollbars:a})},isc.A.getPrintHTML=function(a,b,c,d,e,f){isc.isAn.Array(a)||(a=[a]);if(e==null)e=[];if(f==null)f=0;for(var g,h={target:this,methodName:"gotComponentPrintHTML",components:a,printProperties:b,callback:c,HTML:e,index:f,separator:d};f<a.length;f++){h.index+=1;var i=a[f];i=isc.isA.String(i)?
i:i.getPrintHTML(b,h);if(i!=null)e.add(i);else{g=true;break}}if(g){c||this.logWarn("getPrintHTML(): HTML generated asynchronously, but no callback passed in");return null}if(c)this.fireCallback(c,"HTML,callback",[e.join(d||isc.emptyString),c]);return e.join(d||isc.emptyString)},isc.A.gotComponentPrintHTML=function(a,b){b.HTML.add(a);this.getPrintHTML(b.components,b.printProperties,b.callback,b.separator,b.HTML,b.index)},isc.A.getImgHTML=function(a,b,c,d,e,f,g,h,i){return this.imgHTML(a,b,c,d,e,f,
g,h,i)},isc.A.$wf=function(a,b,c,d,e,f,g){return isc.Canvas.imgHTML(a,b,c,d,e,f,g,null,true)},isc.A.imgHTML=function(a,b,c,d,e,f,g,h,i){var j;if(isc.isAn.Object(a)){if(a.width!=null)b=a.width;if(a.height!=null)c=a.height;if(a.name!=null)d=a.name;if(a.extraStuff!=null)e=a.extraStuff;if(a.imgDir!=null)f=a.imgDir;if(a.align!=null)j=a.align;if(a.activeAreaHTML!=null)g=a.activeAreaHTML;a=a.src}if(a==null||isc.isAn.emptyString(a))return i?[isc.$ad]:isc.$ad;var k=this.$xd;if(!k){this.$xe="<img src='";this.$xf=
"' width='";this.$xg="' height='";this.$xh="' align='";this.$xi=isc.Page.isXHTML()?"' id='":"' name='";this.$xj="' ";this.$xk=isc.Browser.isOpera?"middle":"TEXTTOP";this.$xl=" border='0' suppress='TRUE'/>";this.$xd=k=[this.$xe];this.$xm="' style='filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\"";this.$xn='",sizingMethod="scale");'}if(j==null)j=this.$xk;if(!this.$hu)this.$hu=this.getImgURL("[SKIN]/blank.gif");if(isc.Browser.isSafari&&(b>32E3||c>32E3))this.logWarn("Attempting to draw an image of size "+
b+" x "+c+".  Images larger than 32000 pixels in either direction are not reliably  rendered in this browser.");f=this.getImgURL(a,f,h);if(i)k=[this.$xe];if(isc.Page.isXHTML())f=isc.makeXMLSafe(f);if(!this.$xo(h)||!this.$xp(a))k[1]=f;else{k[1]=this.$hu;k[3]=this.$xm;k[4]=f;k[5]=this.$xn;if(b==null)b=16;if(c==null)c=16}if(b){k[6]=this.$xf;k[7]=b}if(c){k[8]=this.$xg;k[9]=c}k[10]=this.$xh;k[11]=j;if(d){k[12]=this.$xi;if(h)k[13]=h.getCanvasName();k[14]=d}var l;if(g){l="ISC_IMGMAP_"+this.$ws++;k[15]="' usemap='#"+
l}k[16]=this.$xj;if(e)k[17]=e;k[18]=this.$xl;if(g)k[19]="<map name='"+l+"'>"+g+"</map>";if(i)return k;a=k.join(isc.$ad);k.length=3;return a},isc.A.$xq=function(a,b,c,d,e,f,g,h){var i=this.$wv;if(g!=null){i[0]=this.$wt;i[1]=g;i[2]=this.$ob}else i[0]=i[1]=i[2]=null;i[4]=e||0;i[6]=f||0;a=isc.Canvas.getImgURL(a,b,h);e=i.join(isc.emptyString);f=this.$ww;f.src=a;f.width=c;f.height=d;f.align=d!=null&&d<16&&(isc.Browser.isMoz||isc.Browser.isSafari)?null:this.$wu;f.imgDir=b;f.extraStuff=e;return isc.Canvas.imgHTML(f)},
isc.A.$xo=function(a){if(this.usePNGFix==false)return false;var b=isc.Browser.isIE&&isc.Browser.minorVersion>=5.5&&isc.Browser.isWin&&!isc.Canvas.neverUseFilters&&this.neverUsePNGWorkaround!=true;if(b&&a&&a.$xo&&!a.$xo())b=false;return b},isc.A.$xp=function(a){return a&&this.$wx[a.substring(a.lastIndexOf(isc.dot)+1)]},isc.A.$wg=function(a,b,c,d){c=this.getImgURL(b,c,d);if(this.$xo(d)){d=this.$xp(a.src);if(this.$xp(b)){a.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+c+'",sizingMethod="scale")';
if(!d)a.src=this.$hu}else{if(d)a.style.filter="";a.src=c}}else a.src=c},isc.A.linkHTML=function(a,b,c,d,e,f,g){a=a.replaceAll("'","\\'");if(b==null)b=a;c=c?c.replaceAll("'","\\'"):"_blank";var h=this.$wy;h[1]=d!=null?" ID='"+d+"'":null;h[3]=a;h[5]=c;h[7]=e!=null?" tabIndex="+e:null;h[8]=f!=null?" accessKey='"+f+"'":null;if(g)h[9]=" "+g;h[11]=b;return h.join(isc.emptyString)},isc.A.blankImgHTML=function(a,b){var c=this.$ht;if(!c)c=this.$ht=this.$wf(this.$wz,1,1);c[7]=a||this.$w0;c[9]=b||this.$w0;return c.join(isc.$ad)},
isc.A.spacerHTML=function(a,b,c){if(a==0&&b==0)return isc.$ad;if(isc.Browser.isMoz||isc.Browser.isSafari||isc.Browser.isOpera||isc.Browser.isStrict||b<3&&isc.Browser.isIE&&(isc.Browser.minorVersion==5.5||isc.Browser.isMac)){var d;if(isc.Browser.isSafari)d=32E3;else if(isc.Browser.isFirefox&&isc.Browser.geckoVersion>=20090219)d=17895580;else if(isc.Browser.isIE&&isc.Browser.isStrict)d=16E3;if(d!=null&&(a>d||b>d)){c=isc.SB.create();d=d;var e=Math.floor(b/d),f=Math.floor(a/d);c.append("<TABLE CELLPADDING=0 CELLSPACING=0 BORDER=0 MARGIN=0>");
for(var g=0;g<=e;g++){c.append("<TR>");for(var h=0;h<=f;h++){c.append("<TD>");if(g==h||g>f&&h==0||h>e&&g==0)c.append(this.blankImgHTML(h<f?d:a-h*d,g<e?d:b-g*d));c.append("</TD>")}c.append("</TR>")}c.append("</TABLE>");return c.toString()}return this.blankImgHTML(a,b)}if(b>13E5){c=[];for(d=0;d<b;){e=d+1400>=b?b-d:1400;c[c.length]=this.spacerHTML(a,e);c[c.length]="<br>";d+=e}return c.join(isc.$ad)}d=this.$xs;if(d==null)d=this.$xs=["<SPAN STYLE='WIDTH:",null,"px;HEIGHT:",null,"px;overflow:hidden;'>",
null,"</SPAN>"];d[1]=a;d[3]=b;d[5]=c?c:isc.nbsp;return d.join(isc.$ad)},isc.A.hiliteCharacter=function(a,b,c,d){if(!isc.isA.String(a)||!isc.isA.String(b)||b.length!=1)return a;if(b==" ")return a;if(c==null||d==null){c="<span style='text-decoration:underline;'>";d="</span>"}var e=a.indexOf(b.toUpperCase());if(e==-1)e=a.indexOf(b.toLowerCase());if(e!=-1){b=a.slice(0,e);var f=a.slice(e,e+1);a=a.slice(e+1);f=c+f+d;a=b.concat(f,a)}return a},isc.A.scheduleRedraw=function(a){a&&a.priorityRedraw?this.$nm.addAt(a,
0):this.$nm.add(a);if(!this.$xu)this.$xu=isc.Timer.setTimeout({target:isc.Canvas,methodName:this.$w1},this._redrawQueueDelay)},isc.A.clearRedrawQueue=function(){isc.EH.$h1("RDQ");var a=isc.timeStamp();this.$xu=null;var b=this.$nm;this.$nm=[];if(this.logIsDebugEnabled()){for(var c="",d=0;d<b.length;d++){c+=b[d];if(d!=b.length-1)c+=", "}this.logDebug("clearRedrawQueue: "+c,"drawing")}var e;for(d=0;d<b.length;d++)if((c=b[d])&&c.priorityRedraw){c.priorityRedraw=false;if(e==null)e=[];e.add(c);b[d]=null}if(e!=
null){this.logInfo("Priority redraw: postponing non-priority items","drawing");this.$nm=b;this.scheduleRedraw(b[0]);b=e}for(d=e=0;d<b.length;d++){c=b[d];if(!(c==null||c.destroyed))if(c&&c.isDirty()){c.redraw(false);e++}}this.logIsDebugEnabled("redraws")&&this.logDebug("clearRedrawQueue: "+e+" redraws ("+b.length+" items), "+(isc.timeStamp()-a)+"ms","redraws");isc.EH.$h2()},isc.A.$uv=function(a){if(!isc.Canvas.$xv)isc.Canvas.$xv=[];isc.Canvas.$xv.add(a);if(!isc.Canvas.$xw)isc.Canvas.$xw=isc.Timer.setTimeout({target:isc.Canvas,
methodName:"$xx"},isc.Canvas.$nn)},isc.A.$xx=function(){var a=isc.Canvas.$xv;isc.Canvas.$xv=[];isc.Canvas.$xw=null;if(!(!a||a.length==0))for(var b=0;b<a.length;b++){var c=window[a[b]];isc.isA.Canvas(c)&&c.adjustOverflow("delayed")}},isc.A.scheduleDestroy=function(a){if(!(!a||a.destroyed||a.destroying||!a.destroy)){this.$65j.add(a);if(!this.$65m)this.$65m=isc.Timer.setTimeout({target:isc.Canvas,methodName:this.$65l},this.$65k)}},isc.A.clearDestroyQueue=function(){isc.EH.$h1("DSQ");var a=isc.timeStamp();
this.$65m=null;var b=this.$65j;this.$65j=[];if(this.logIsDebugEnabled("destroys")){for(var c="",d=0;d<b.length;d++){c+=b[d];if(d!=b.length-1)c+=", "}this.logDebug("clearDestroyQueue: "+c,"destroys")}c=0;var e;for(d=0;d<b.length;d++){e=b[d];if(!(e==null||e.destroyed||e.destroying)){e.destroy(false);c++}}this.logIsDebugEnabled("destroys")&&this.logDebug("clearDestroyQueue: "+c+" direct destroy() calls ("+b.length+" items), "+(isc.timeStamp()-a)+"ms","destroys");isc.EH.$h2()},isc.A.outsetRect=function(a,
b){if(!b)return a;if(isc.isAn.Array(a)){a[0]-=b;a[1]-=b;a[2]+=2*b;a[3]+=2*b;return a}a.left-=b;a.top-=b;a.width+=2*b;a.height+=2*b;return a},isc.A.rectsIntersect=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],i=b[3];return!(c>g+b[2]||c+e<g)&&!(d>h+i||d+f<h)},isc.A.$vs=function(){if(this.$xy)this.$xy.innerHTML="&nbsp;";else{this.ns.Element.createAbsoluteElement("<DIV ID='$xz' style='position:absolute;left:0px;top:-100px'>&nbsp;</DIV>");this.$xy=document.all.$xz}},isc.A.$q8=function(a){if(!(!isc.isA.Canvas(a)||
a.$x0!=null)){this.$tw.add(a);a.$x0=this.$tw.length-1}},isc.A.$ro=function(a){if(!(!isc.isA.Canvas(a)||a.$x0==null)){this.$tw[a.$x0]=null;a.$x0=null}},isc.A.showClickMask=function(a,b,c){return this.ns.EH.showClickMask(a,b,c)},isc.A.hideClickMask=function(a){this.ns.EH.hideClickMask(a)},isc.A.$t7=function(a,b,c,d,e,f){if(isc.isAn.Array(c))c={left:c[0],top:c[1],width:c[2],height:c[3]};else if(c==null)c={left:this.ns.EH.getX(),top:this.ns.EH.getY()};if(c.width==null)c.width=0;if(c.height==null)c.height=
0;if(d==null)d="bottom";if(e==null)e=true;var g=d=="bottom"||d=="top";if(g){if(f=="inside-right")f="right";if(f!="right"&&f!="outside-right"&&f!="outside-left")f="left"}else{if(f=="inside-bottom")f="bottom";if(f!="bottom"&&f!="outside-bottom"&&f!="outside-top")f="top"}var h=c.left;if(g)if(f=="right")h+=c.width-a;else if(f=="outside-right")h+=c.width;else{if(f=="outside-left")h-=a}else if(d=="left")h-=a;else h+=c.width;var i=c.top;if(g)if(d=="top")i-=b;else i+=c.height;else if(f=="bottom")i+=c.height-
b;else if(f=="outside-bottom")i+=c.height;else if(f=="outside-top")i-=b;f=isc.Page.getWidth();g=isc.Page.getHeight();var j=isc.Page.getScrollLeft(),k=isc.Page.getScrollTop(),l=j-h,m=h+a-(f+j),n=k-i,o=i+b-(g+k);if(l<=0&&m<=0&&n<=0&&o<=0)return[h,i];if(l>0)h=d=="left"&&!e?c.left+c.width<j?j:c.left+c.width:j;else if(m>0)if(d=="right"&&!e){if(c.left-a>=j)h=c.left>j+f?j+f-a:c.left-a}else h=f<a?j:j+f-a;if(n>0)i=d=="top"&&!e?c.top+c.height<k?k:c.top+c.height:k;else if(o>0)if(d=="bottom"&&!e){if(c.top-b>=
k)i=c.top>k+g?k+g-b:c.top-b}else i=g<b?k:k+g-b;return[h,i]},isc.A.$iy=function(){isc.Browser.isIE&&this.$xt();var a=isc.Log.logViewer;if(a&&a.logWindowLoaded()){a._logWindow.openerUnloading();a._logWindow=null}},isc.A.$xt=function(){for(var a=this._canvasList,b=0;b<a.length;b++){var c=a[b];if(c)if(c.$q3){c.$q3.eventProxy=null;c.$q3=null}}return true},isc.A.snapToEdge=function(a,b,c,d,e){var f,g;if(isc.isAn.Array(a)){e=[a[1],a[0]];f=[a[2],a[3]]}else if(c.masterElement){g=c.percentBox==c.$520;f=[g?
a.getViewportWidth():a.getVisibleWidth(),g?a.getViewportHeight():a.getVisibleHeight()];e=[a.getTop()+(g?a.getTopBorderSize()+a.getTopMargin():0),a.getLeft()+(g?a.getLeftBorderSize()+a.getLeftMargin():0)]}else if(isc.isA.Canvas(e)){g=c.percentBox==c.$520;f=[g?e.getViewportWidth():e.getVisibleWidth(),g?e.getViewportHeight():e.getVisibleHeight()];e=[e.getPageTop()+(g?e.getTopBorderSize()+e.getTopMargin():0),e.getPageLeft()+(g?e.getLeftBorderSize()+e.getLeftMargin():0)]}else{f=[a.getViewportWidth(),a.getViewportHeight()];
e=[0,0]}a=isc.Canvas.$52c(b,e,f,false);b=isc.Canvas.$52c(d||b,a,[c.getVisibleWidth(),c.getVisibleHeight()],true);if(c.snapOffsetLeft!=null)b[1]+=c.snapOffsetLeft;if(c.snapOffsetTop!=null)b[0]+=c.snapOffsetTop;c.moveTo(b[1],b[0]);c.$jo=false},isc.A.$52c=function(a,b,c,d){var e=c[0];c=c[1];a=a=="TL"?[0,0]:a=="T"?[0,e/2]:a=="TR"?[0,e]:a=="R"?[c/2,e]:a=="BR"?[c,e]:a=="B"?[c,e/2]:a=="BL"?[c,0]:a=="L"?[c/2,0]:a=="C"?[c/2,e/2]:[0,0];a[0]=Math.floor(a[0]);a[1]=Math.floor(a[1]);return d?[b[0]-a[0],b[1]-a[1]]:
[b[0]+a[0],b[1]+a[1]]});isc.B._maxIndex=isc.C+43;isc.Canvas.registerStringMethods({resized:"deltaX,deltaY",showIf:"canvas",childRemoved:"child,name",peerRemoved:"peer,name",deparented:"oldParent,name",depeered:"oldMaster,name",focusChanged:"hasFocus",scrolled:null,hover:"",onDrop:"",visibilityChanged:"isVisible"});isc.Canvas.$yx=function(){var a=isc.EH,b={},c;for(c in a.eventTypes){this.registerStringMethods(a.eventTypes[c],a.$i3);var d=a.eventTypes[c];if(this.getInstanceProperty(d)==null)b[d]=isc.Class.NO_OP}this.addMethods(b)};
isc.Canvas.$yx();isc.defineClass("BackMask","Canvas");isc.A=isc.BackMask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoDraw=false;isc.A.$lo=true;isc.A._generated=true;isc.A.useClipDiv=false;isc.A.hideUsingDisplayNone=isc.Browser.isMoz;isc.A.overflow=isc.Canvas.HIDDEN;isc.A.contents="<iframe width='100%' height='100%' border='0' frameborder='0' src=\""+isc.Page.getBlankFrameURL()+"\" marginwidth='0' marginheight='0' scrolling='no' tabIndex='-1' tabStop='false'></iframe>";
isc.A.$ns=false;isc.A.$jo=false;isc.A.$jp=false;isc.A._redrawWithParent=false;isc.B.push(isc.A.masterMoved=function(){this.masterElement.$qi()},isc.A.masterResized=function(){this.masterElement.$qi()},isc.A.draw=function(a,b,c){if(this.suppressed)return this;if(!this.readyToDraw())return this;this.invokeSuper(isc.BackMask,this.$ny,a,b,c);this.masterElement.overflow==isc.Canvas.VISIBLE&&this.masterElement.$qi();return this},isc.A.show=function(){this.suppressed||this.invokeSuper(isc.BackMask,"show")});
isc.B._maxIndex=isc.C+4;isc.defineClass("ScreenSpan","Canvas");isc.A=isc.ScreenSpan.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A._generated=true;isc.A.src="[SKINIMG]/blank.gif";isc.A.redrawOnResize=false;isc.A.overflow="hidden";isc.B.push(isc.A.getInnerHTML=function(){if(!this.$yy)this.$yy=isc.Browser.isIE&&isc.Browser.version>6?isc.Canvas.imgHTML(this.src,1600,1200):isc.Canvas.spacerHTML(1600,1200);return this.$yy},isc.A.hide=function(a,
b,c,d){this.resizeTo(1,1);this.moveTo(null,-this.getHeight());return this.invokeSuper(isc.ScreenSpan,"hide",a,b,c,d)},isc.A.show=function(a,b,c,d){this.fitToScreen();isc.Page.setEvent("resize",this,isc.Page.FIRE_ONCE,"pageResized");return this.invokeSuper(isc.ScreenSpan,"show",a,b,c,d)},isc.A.pageResized=function(){if(this.isVisible()){this.resizeTo(isc.Page.getWidth(),isc.Page.getHeight());this.fitToScreen();isc.Page.setEvent("resize",this,isc.Page.FIRE_ONCE,"pageResized")}},isc.A.fitToScreen=function(){var a=
Math.max(isc.Page.getWidth(),isc.Page.getScrollWidth()),b=Math.max(isc.Page.getHeight(),isc.Page.getScrollHeight());this.resizeTo(a,b);this.moveTo(0,0)});isc.B._maxIndex=isc.C+5;isc.$yz={getForm:function(a){if(a&&typeof a=="object")return a;var b;if(a!=null&&isc.Browser.isDOM)b=document.getElementById(a);if(b!=null)return b;if(a==null)a=0;if(b==null)return document.forms[a];return b},getFormElementValue:function(a,b){var c=this.getFormElement(a,b);if(c)switch(c.type){case "radio":return c.checked?
c.value:null;case "checkbox":return c.checked;case "select-one":if(!c.options||c.options.length==0)return null;var d=c.options[c.selectedIndex];return d.value;case "select-multiple":for(var e=[],f=0,g=c.options.length;f<g;f++){d=c.options[f];d.selected&&e.add(d.value)}return e;case "button":case "reset":case "submit":return null;default:return c.value}},getFormValues:function(a){var b=this.getForm(a);if(!b)return null;var c={};if(!b.elements){this.logWarn("Form '"+a+"' contains no elements - returning empty map for data.");
return{}}for(a=0;a<b.elements.length;a++){var d=b.elements[a];if(d.name!=null){var e=this.getFormElementValue(b,b.elements[a]);if(e!=null)c[d.name]=e}}return c},getFormElement:function(a,b){if(typeof b=="object")return b;var c=this.getForm(a);if(c)return c.elements[b];return null}};isc.Canvas.addClassMethods(isc.$yz);isc.Canvas.addMethods(isc.$yz);isc.setAutoDraw=function(a){if(a==null)a=true;isc.Canvas.addProperties({autoDraw:a})};isc.allowDuplicateStyles=true;isc.defineClass("PrintCanvas","Canvas");
isc.A=isc.PrintCanvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.redrawOnResize=false;isc.A.overflow="hidden";isc.A.useExplicitHeight=isc.Browser.isSafari;isc.A.printFrameURL="[HELPERS]printFrame.html";isc.B.push(isc.A.initWidget=function(){this.Super("initWidget",arguments)},isc.A.resized=function(){if(this.useExplicitHeight){var a=this.getIFrameHandle();if(a){a.style.width=this.getInnerWidth();a.style.height=this.getInnerHeight()}}},
isc.A.getInnerHTML=function(){var a="100%",b="100%";if(this.useExplicitHeight){a=this.getInnerWidth();b=this.getInnerHeight()}return"<iframe height='"+b+"' width='"+a+"' scrolling='auto' id='"+this.getIFrameID()+"' frameborder='0' src=\""+this.getPrintFrameURL(this.title)+'"></iframe>'},isc.A.getIFrameID=function(){return this.getID()+"$55y"},isc.A.getPrintFrameURL=function(a){return isc.Page.getURL(this.printFrameURL+"?id="+this.getID()+"&title="+(a||""))},isc.A.getIFrameHandle=function(){return document.getElementById(this.getIFrameID())},
isc.A.getIFrameWindow=function(){return this.getIFrameHandle().contentWindow},isc.A.iframeLoad=function(){this.iframeLoaded=true},isc.A.setHTML=function(a,b){if(this.isDrawn())if(this.iframeLoaded){this.getIFrameWindow().assignHTML(a);this.fireCallback(b,["printPreview","callback"],[this,b])}else this.delayCall("setHTML",[a,b],100);else this.$741={HTML:a,callback:b}},isc.A.draw=function(){this.Super("draw",arguments);if(this.$741!=null){var a=this.$741;this.$741=null;this.setHTML(a.HTML,a.callback)}},
isc.A.setTitle=function(a){this.title=a;if(this.isDrawn()||this.iframeLoaded){delete this.iframeLoaded;this.isDrawn()&&this.redraw()}},isc.A.printHTML=function(a,b){var c=this;this.setTitle(b);this.setHTML(a,function(){c.print()})},isc.A.print=function(){if(this.isDrawn())this.iframeLoaded?this.getIFrameWindow().doPrint():this.delayCall("print",[],100);else this.logWarn("print(): Attempt to print an undrawn PrintCanvas. Ignoring.")},isc.A.printComplete=function(){});isc.B._maxIndex=isc.C+14;isc.A=
isc.Canvas;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.printComponents=function(a,b,c,d){isc.Canvas.getPrintHTML(a,b,{target:this,methodName:"$57f",title:c,debugOnly:d})},isc.A.$57f=function(a,b){var c=b.title,d=b.debugOnly;if(!this.$55z)this.$55z=isc.PrintCanvas.create({width:"100%",height:"100%",autoDraw:false,backgroundColor:"white"});this.$55z.moveTo(null,-isc.Page.getHeight());this.$55z.isDrawn()||this.$55z.draw();this.$55z.printHTML(a,
c,d)},isc.A.getPrintPreview=function(a,b,c,d,e){if(c==null)c={};c.autoDraw=true;isc.Canvas.getPrintHTML(a,b,{target:this,methodName:"$57g",origCallback:d,previewProperties:c},e)},isc.A.$57g=function(a,b){isc.PrintCanvas.create(b.previewProperties).setHTML(a,{target:this,methodName:"$57h",origCallback:b.origCallback})},isc.A.$57h=function(a,b){b.origCallback&&this.fireCallback(b.origCallback,["printPreview"],[a])},isc.A.showPrintPreview=function(a,b,c,d,e){isc.PrintWindow||isc.definePrintWindow();
if(isc.PrintWindow){if(c==null)c={};c.autoDraw=false;if(c.width==null)c.width="100%";if(c.height==null)c.height="100%";if(c.left==null)c.left=0;if(c.top==null)c.top=0;if(this.$57i)this.$57i.setProperties(c);else this.$57i=isc.PrintWindow.create(c);this.$57i.showPrintPreview(a,b,d,e)}});isc.B._maxIndex=isc.C+6;isc.definePrintWindow=function(){if(isc.Window){isc.defineClass("PrintWindow","Window");isc.PrintWindow.addProperties({isModal:true,headerControls:["headerIcon","headerLabel","printButton","closeButton"],
printButtonDefaults:{_constructor:"IButton",height:20,click:"this.creator.printClicked()"},showMinimizeButton:false,showShadow:false,title:"Print Preview",printButtonTitle:"Print",setPrintButtonTitle:function(a){this.printButtonTitle=a;this.printButton!=null&&this.printButton.setTitle(a)},initWidget:function(){this.printButtonDefaults.title=this.printButtonTitle;this.Super("initWidget",arguments)},showPrintPreview:function(a,b,c,d){isc.isAn.Array(a)||(a=[a]);isc.Canvas.getPrintHTML(a,b,{target:this,
methodName:"$57j",origCallback:c},d)},$57j:function(a,b){if(this.previewPane)this.previewPane.setTitle(this.title);else{this.previewPane=this.createPreviewPane();this.previewPane.addProperties({title:this.title});this.addItem(this.previewPane)}this.setVisibility("hidden");this.isDrawn()||this.draw();this.previewPane.setHTML(a,{target:this,methodName:"$57h",origCallback:b.origCallback})},$57h:function(a,b){this.isVisible()||this.show();this.bringToFront();b.origCallback&&this.fireCallback(b.origCallback,
["printPreview","printWindow"],[a,this])},printClicked:function(){var a=this.getPrintCanvas();a&&a.print()},createPreviewPane:function(){return isc.PrintCanvas.create({width:"100%",height:"100%"})},getPrintCanvas:function(){return this.previewPane},closeClick:function(){this.Super("closeClick",arguments);this.clear()}})}else isc.logWarn("Attempting to create PrintWindow class with no defined Window class. Ensure the required 'Containers' module is laoded")};isc.ClassFactory.defineInterface("DataBoundComponent");
isc.A=isc.Canvas;isc.A.COPY="copy";isc.A.MOVE="move";isc.A.CLONE="clone";isc.A=isc.Canvas;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$70l="/";isc.B.push(isc.A.getFieldImageDimensions=function(a,b){var c,d,e,f,g;if(isc.isA.String(a.imageWidth))e=a.imageWidth;else c=a.imageWidth;if(isc.isA.String(a.imageHeight))f=a.imageHeight;else d=a.imageHeight;if(isc.isA.String(a.imageSize))g=a.imageSize;else{c=c||a.imageSize;d=d||a.imageSize}if(b!=null){c=c||
b[e]||b[g];d=d||b[f]||b[g]}return{width:c,height:d}},isc.A.$70m=function(a,b){if(!(!b||a==null||isc.isAn.emptyString(a)))if(a.contains(this.$70l)){var c=a.split(this.$70l),d=[];if(isc.isAn.emptyString(c.last()))c.length-=1;for(var e=0;e<c.length;e++)if(!isc.isAn.emptyString(c[e])){if(b==null){d.length=0;break}d.add(b);if(e==c.length-1)delete b[c[e]];else b=b[c[e]]}for(e=d.length-1;e>0;e--)isc.isAn.emptyObject(d[e])&&delete d[e-1][c[e-1]]}else delete b[a]},isc.A.$70n=function(a,b,c){if(c!=null){if(a.contains(this.$70l)){a.trim(isc.Canvas.$70l);
a=a.split(this.$70l);for(var d=0;d<a.length;d++)if(!isc.isAn.emptyString(a[d]))if(d==a.length-1)c[a[d]]=b;else{var e=c[a[d]];if(!isc.isAn.Object(e)||isc.isA.Date(e))c[a[d]]={};else if(isc.isAn.Array(e))if(parseInt(a[d+1])!=a[d+1]){this.logInfo("saving a field value in a nested data object: overwriting an array"+this.echo(c[a[d]])+" with an object with nested values.");c[a[d]]={}}c=c[a[d]]}}else c[a]=b;return c}},isc.A.$70o=function(a,b){if(b!=null)if(a!=null)if(a.contains(this.$70l)){var c=a.split(this.$70l);
if(isc.isAn.emptyString(c.last()))c.length-=1;for(var d=0;d<c.length;d++)if(!isc.isAn.emptyString(c[d]))if(d==c.length-1)return b[c[d]];else{if(b[c[d]]==null)break;b=b[c[d]]}}else return b[a]},isc.A.$702=function(a,b){if(a==null)return""+b;if(b==null)return a+"";if(isc.isA.String(b)&&b.startsWith(this.$70l))b=b.substring(1);return isc.isA.String(a)&&a.endsWith(this.$70l)?a+b:a+this.$70l+b});isc.B._maxIndex=isc.C+5;isc.A=isc.Canvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;
isc.D[isc.C]=isc.A.Class;isc.A.showComplexFields=true;isc.A.exportIncludeSummaries=true;isc.A.ignoreEmptyCriteria=true;isc.A.dragRecategorize=false;isc.A.duplicateDragMessage="Duplicates not allowed";isc.A.showOfflineMessage=true;isc.A.offlineMessage="This data not available while offline";isc.A.offlineMessageStyle="offlineMessage";isc.A.offlineSaveMessage="Data cannot be saved because you are not online";isc.A.addDropValues=true;isc.A.fieldIdProperty="name";isc.A.dataArity="multiple";isc.A.autoTrackSelection=
true;isc.A.$308={date:true,DateItem:true};isc.A.$301="false;";isc.A.$18r="false";isc.A.styleOpposite="cellHiliteOpposite";isc.A.hiliteProperty="_hilite";isc.A.hiliteMarker="$63i";isc.A.$578=0;isc.A.$579=[];isc.A.dragDataAction=isc.Canvas.MOVE;isc.A.dragTrackerStyle="gridDragTracker";isc.A.canExport=true;isc.A.canPrint=true;isc.A.panelControls=["action:edit","action:editNew","action:sort","action:export","action:print"];isc.A.dbcProperties=["autoFetchData","autoFetchTextMatchStyle","autoFetchAsFilter",
"dataSource"];isc.A.badFormulaResultValue=".";isc.A.missingSummaryFieldValue="-";isc.A.canAddFormulaFields=false;isc.A.addFormulaFieldText="Add formula column...";isc.A.editFormulaFieldText="Edit formula...";isc.A.removeFormulaFieldText="Remove formula";isc.A.canAddSummaryFields=false;isc.A.addSummaryFieldText="Add summary column...";isc.A.editSummaryFieldText="Edit summary format...";isc.A.removeSummaryFieldText="Remove summary column..";isc.A.formulaFieldNamePrefix="formulaField";isc.A.summaryFieldNamePrefix=
"summaryField";isc.A.uniqueFieldNamePrefix="field";isc.A.exportDataChunkSize=50;isc.A.emptyExportMessage="You are attempting to export an empty dataset";isc.A.unknownErrorMessage="Invalid value";isc.A.$685=["isInteger","isFloat","isBoolean","isString"];isc.A.$746="partial";isc.A.$75a={};isc.A.$75b=null;isc.B.push(isc.A.initializeValuesManager=function(){var a=this.valuesManager;delete this.valuesManager;if(a!=null)if(isc.ValuesManager==null)this.logWarn("Widget initialized with specified 'valuesManager' proprety but ValuesManager class is not loaded. This functionality requires the Forms module.");
else if(isc.isA.ValuesManager(a))a.addMember(this);else if(isc.isA.ValuesManager(window[a]))window[a].addMember(this);else isc.isA.String(a)?isc.ValuesManager.create({ID:a,dataSource:this.dataSource,members:[this]}):this.logWarn("Widget initialized with invalid 'valuesManager' property:"+isc.Log.echo(a)+", clearing this property out")},isc.A.setDataPath=function(a){this.dataPath=a;if(!(this.getFields==null||this.getFields()==null))if(a==null){delete this.$704;if(this.valuesManager&&this.$703){this.valuesManager.removeMember(this);
delete this.$703}}else{var b;for(a=this;a&&(!a.valuesManager||a.$703)&&!a.dataSource;){if(a.dataPath)b=b?isc.Canvas.$702(a.dataPath,b):a.dataPath;a=a.parentElement}this.$704=b;if(a)if(a!=this){a.valuesManager==null&&a.createDefaultValuesManager();a.valuesManager.addMember(this,true)}}},isc.A.getFullDataPath=function(){return this.$704||this.dataPath},isc.A.createDefaultValuesManager=function(a){a||(a=[]);a.add(this);isc.ValuesManager.create({members:a,ID:this.getID()+"$705",dataSource:this.dataSource})},
isc.A.getDataPathField=function(a){var b=this.getDataSource(),c=a.split(isc.slash),d;if(b){for(var e=0;e<c.length;e++){b=(d=b.getField(c[e]))?b.getSchema(d.type):b;if(d==null){this.logWarn("Unable to find dataSource field matching specified dataPath: '"+a+"'");return}}return d}},isc.A.registerWithDataView=function(a){if(this.inputDataPath){for(a=this.parentElement;a&&!isc.isA.DataView(a);)a=a.parentElement;a?a.registerItem(this):this.logWarn("Component initialized with an inputDataPath property, but no DataView was found in the parent hierarchy. inputDataPath is only applicable to DataBoundComponents and FormItems being managed by a DataView")}},
isc.A.bindToDataSource=function(a,b){this.dataPath&&this.setDataPath(this.dataPath);if(this.dataSource==null&&this.data!=null)this.dataSource=this.data.dataSource;var c=this.fields||this.items;if(isc.isAn.Array(c))this.originalFields=c.duplicate();c=this.getDataSource();if(c!=null&&isc.isA.String(c)){this.logWarn("unable to look up DataSource: "+c+", databinding will not be used");return a}var d=a==null||a.length==0,e;if(c){e=this.useFlatFields;if(e==null)e=c.useFlatFields;e=e?c.getFlattenedFields():
c.getFields()}if(c==null||e==null){if(a!=null&&isc.SimpleType)for(var f=0;f<a.length;f++){if(a[f].type==null&&this.$308[a[f].editorType]==true)a[f].type="date";isc.SimpleType.addTypeDefaults(a[f])}this.addFieldValidators(a);return a}if(this.doNotUseDefaultBinding)return[];if(c!=null&&d){a=[];for(f in e){d=e[f];this.shouldUseField(d,c)&&a.add(isc.addProperties({},d))}this.addFieldValidators(a);return a}if(c!=null&&!d){for(f=0;f<a.length;f++){d=a[f];if(d!=null){if(d.type==null&&this.$308[d.editorType]==
true){var g=d.name;g=g!=null?c.getField(g):null;if(g==null||g.type==null)d.type="date"}d.type!=null&&isc.SimpleType.addTypeDefaults(d)}}if(this.useAllDataSourceFields||b){var h=this;e=c.combineFieldOrders(e,a,function(i,j){return h.shouldUseField(i,j)});for(f=0;f<e.length;f++){d=e[f];if(a.containsProperty("name",d.name))d.includeFrom!=null&&c.getField(d.name)==null&&this.$785(d);else if(b&&d.showIf==null)d.showIf="return false"}this.addFieldValidators(e);return e}else{for(f=0;f<a.length;f++)if(d=
a[f])d=this.combineFieldData(d);this.addFieldValidators(a);return a}}},isc.A.combineFieldData=function(a){var b=this.getDataSource();if(a.dataPath){isc.DataSource.combineFieldData(a,this.getDataPathField(a.dataPath));return a}else if(b.getField(a.name))return b.combineFieldData(a);else if(a.includeFrom!=null)return this.$785(a);return a},isc.A.$785=function(a){var b=a.includeFrom.split(".");if(b==null||b.length!=2)this.logWarn("This component includes a field with includeFrom set to:"+a.includeFrom+
". Format not understood.");else{var c=isc.DataSource.get(b[0]),d=b[1];if(c==null)this.logWarn("Field specifies includeFrom:"+a.includeFrom+". Unable to find dataSource with ID:"+b[0]);else{if(a.name==null)a.name=d;return c.combineFieldData(a,c.getField(d))}}},isc.A.shouldUseField=function(a,b){if(a.hidden&&!this.showHiddenFields)return false;if(a.canFilter==false&&this.showFilterFieldsOnly)return false;if(a.detail&&!this.showDetailFields)return false;if(!this.showComplexFields&&b.fieldIsComplexType(a.name))return false;
return true},isc.A.addFieldValidators=function(a){if(a!=null)for(var b=0;b<a.length;b++){var c=a[b];if(c.required){var d=this.getRequiredValidator(c),e=d.errorMessage;if(c.validators){if(!isc.isAn.Array(c.validators))c.validators=[c.validators];if(c.validators.containsProperty("type",d.type)){if(e!=null){var f=this.getDataSource();c=c.validators.find("type",d.type);if(c.errorMessage==null||f&&c.errorMessage==f.requiredMessage)c.errorMessage=e}}else{if(c.validators.$69)c.validators=c.validators.duplicate();
c.validators.add(d)}}else c.validators=[d]}}},isc.A.getRequiredValidator=function(a){var b={type:"required"};a=a.requiredMessage||this.requiredMessage;if(a!=null)b.errorMessage=a;return b},isc.A.getAllFields=function(){return this.completeFields||this.fields},isc.A.getField=function(a){if(!this.fields)return null;return isc.Class.getArrayItem(a,this.fields,this.fieldIdProperty)},isc.A.getFieldNum=function(a){if(!this.fields)return-1;if(isc.isA.Object(a)&&a[this.fieldIdProperty]!=null)a=a[this.fieldIdProperty];
return isc.Class.getArrayItemIndex(a,this.fields,this.fieldIdProperty)},isc.A.isXMLRequired=function(a){if(!a||!this.useXMLRequired||!a.xmlRequired)return false;if(!a.dataPath)return true;var b=this.getDataSource();if(!b)return true;for(var c=a.dataPath.split(isc.slash),d=0;d<c.length;d++){if(!b)break;a=b.getField(c[d]);if(!a)break;if(a.xmlMinOccurs!=null&&a.xmlMinOccurs<1)return false;b=b.getSchema(a.type)}return true},isc.A.evalViewState=function(a,b,c){if(isc.isA.String(a)){var d=a;try{a=isc.eval(a)}catch(e){c||
this.logWarn("Unable to parse "+b+" object passed in: "+d+" Ignoring.");return}}return a},isc.A.getFieldState=function(a){var b=[],c=this.getAllFields();if(c)for(var d=0;d<c.length;d++){var e=this.getStateForField(c[d][this.fieldIdProperty],a);b.add(e)}return isc.Comm.serialize(b,false)},isc.A.getStateForField=function(a,b){var c=this.getAllFields().find(this.fieldIdProperty,a),d={name:a};if(!this.fieldShouldBeVisible(c))d.visible=false;if(c.userFormula)d.userFormula=c.userFormula;if(c.userSummary)d.userSummary=
c.userSummary;if(b||c.userSummary||c.userFormula)d.title=c.title;if(this.getSpecifiedFieldWidth)d.width=this.getSpecifiedFieldWidth(c);if(c.autoFitWidth)d.autoFitWidth=true;return d},isc.A.$31y=function(a,b){if(a!=null){for(var c=this.getAllFields(),d=c.getProperty(this.fieldIdProperty),e=[],f=0;f<a.length;f++){var g=a[f],h=c.find(this.fieldIdProperty,g.name);if(h==null)if(g.userFormula||g.userSummary){h={};h[this.fieldIdProperty]=g.name}else continue;d.remove(g.name);if(g.visible==false)h.showIf=
this.$18r;else{h.showIf=null;h.detail=false}if(g.width!=null&&!isNaN(g.width))h.width=g.width;if(g.title)h.title=g.title;if(g.userFormula!=null)h.userFormula=g.userFormula;if(g.userSummary!=null)h.userSummary=g.userSummary;if(g.autoFitWidth)h.autoFitWidth=true;e.add(h)}for(f=0;f<d.length;f++){g=c.findIndex(this.fieldIdProperty,d[f]);h=c[g];var i=c[g-1];if(b)h.showIf=this.$18r;if(i!=null){i=e.indexOf(i);if(i!=-1){e.addAt(h,i+1);continue}}this.fieldShouldBeVisible(h,g)&&!b?e.addAt(h,this.$31z(e)+1):
e.add(h)}return e}},isc.A.fieldStateChanged=function(){},isc.A.$31z=function(a){if(a==null)a=this.completeFields;var b=this.getVisibleFields(a);if(b.length==0)return-1;return a.lastIndexOf(b.last())},isc.A.getVisibleFields=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];d!=null&&this.fieldShouldBeVisible(d,c)&&b.add(d)}return b},isc.A.fieldShouldBeVisible=function(a,b){if(a.showIf!=null){if(a.showIf==this.$18r||a.showIf==this.$301)return false;isc.Func.replaceWithMethod(a,"showIf","list,field,fieldNum");
if(!a.showIf(this,a,b))return false}return true},isc.A.setValueMap=function(a,b){isc.isAn.Object(a)||(a=this.getField(a));if(a)a.valueMap=b},isc.A.setDataSource=function(a,b){if(isc.$cv)arguments.$cw=this;this.dataSource=a||this.dataSource;this.setFields&&this.setFields(b);if(this.dataSource)this.isA("DynamicForm")?this.setData({}):this.setData([]);this.markForRedraw("bind")},isc.A.bind=function(a,b){this.setDataSource(a,b)},isc.A.getDataSource=function(){if(isc.isA.String(this.dataSource))if(this.serviceNamespace||
this.serviceName)this.dataSource=this.lookupSchema();else{var a=isc.DS.get(this.dataSource);if(a!=null)return a;if((a=this.getWindow()[this.dataSource])&&isc.isA.DataSource(a))return this.dataSource=a}return this.dataSource},isc.A.setData=function(a){this.data=a},isc.A.lookupSchema=function(){var a;a=this.serviceName?isc.WebService.getByName(this.serviceName,this.serviceNamespace):isc.WebService.get(this.serviceNamespace);if((this.serviceNamespace||this.serviceName)&&a==null)this.logWarn("Could not find WebService definition: "+
(this.serviceName?"serviceName: "+this.serviceName:"")+(this.serviceNamespace?"   serviceNamespace: "+this.serviceNamespace:""));if(isc.isA.String(this.dataSource)){var b;if(a)b=a.getSchema(this.dataSource);return b||this.dataSource}else this.logWarn("this.dataSource was not a String in lookupSchema")},isc.A.fieldValuesAreEqual=function(a,b,c){if(b==c)return true;if(a==null)return false;if(a.type=="date"){if(isc.isA.Date(b)&&isc.isA.Date(c))return Date.compareDates(b,c)==0}else if(a.type=="valueMap")if(isc.isAn.Array(b)&&
isc.isAn.Array(c))return b.equals(c);else if(isc.isAn.Object(b)&&isc.isAn.Object(c)){for(var d in b)if(c[d]!=b[d])return false;for(var e in c)if(b[e]!=c[e])return false;return true}return false},isc.A.setFields=function(a){this.fields=a=this.bindToDataSource(a)},isc.A.getSerializeableFields=function(a){a.addList(["zIndex","data"]);this.ID&&this.ID.startsWith("isc_")&&a.add("ID");this.dataSource&&a.addList(["fields","items"]);this.getClassName()!="Canvas"&&this.getClassName()!="Layout"&&a.add("children");
return this.Super("getSerializeableFields",arguments)},isc.A.addField=function(a,b,c){if(a!=null){if(c==null)c=this.fields||this.items||isc.$ac;c=c.duplicate();var d=this.getField(a.name);d&&c.remove(d);if(b==null||b>c.length)b=c.length;c.addAt(a,b);this.setFields(c)}},isc.A.removeField=function(a,b){if(b==null)b=this.fields||this.items||isc.$ac;b=b.duplicate();b.remove(b.find("name",a.name?a.name:a));this.setFields(b)},isc.A.setCanEdit=function(a){this.canEdit=a},isc.A.filterData=function(a,b,c){this.$wo("filter",
a,b,c)},isc.A.fetchData=function(a,b,c){c||(c={});if(!c.textMatchStyle)c.textMatchStyle="exact";this.$wo("fetch",a,b,c)},isc.A.$71s=function(a){return this.canExport!=false&&a.canExport!=false&&!a.userFormula&&!a.userSummary&&!a.hidden},isc.A.exportData=function(a){a||(a={});var b=this.getSort();if(b)a.sortBy=isc.DS.getSortBy(b);else if(this.sortField)a.sortBy=(!this.sortDirection?"-":"")+this.sortField;if(!a.textMatchStyle)if((b=this.data.context)&&b.textMatchStyle)a.textMatchStyle=b.textMatchStyle;
if(!this.exportAll&&!a.exportFields){b=this.exportFields;if(!b){b=[];for(var c=0;c<this.fields.length;c++){var d=this.fields.get(c);if(this.$71s(d)){b.add(d.name);d.displayField&&!d.optionDataSource&&b.add(d.displayField)}}}if(b&&b.length>0)a.exportFields=b}this.getDataSource().exportData(this.getCriteria(),a)},isc.A.setCriteria=function(a){if(this.data&&this.data.setCriteria)this.data.setCriteria(a);else this.initialCriteria=a},isc.A.getCriteria=function(){return!this.isDrawn()&&(!this.data||this.data.getLength()==
0)?isc.shallowClone(this.initialCriteria):this.data&&this.data.getCriteria?isc.shallowClone(this.data.getCriteria()):null},isc.A.doInitialFetch=function(){var a=false;if(this.autoFetchData&&!this.$p7&&this.fetchData)if(this.dataSource){a=!isc.RPCManager.startQueue();this.fetchData(this.getInitialCriteria(),null,this.getInitialFetchContext());this.$p7=true}else this.logWarn("autoFetchData is set, but no dataSource is specified, can't fetch");return a},isc.A.getInitialCriteria=function(){return this.initialCriteria},
isc.A.getInitialFetchContext=function(){var a={};a.textMatchStyle=this.autoFetchTextMatchStyle;return a},isc.A.fetchRelatedData=function(a,b,c,d){var e=isc.isA.DataSource(b)?b:isc.isA.String(b)?isc.DS.get(b):isc.isA.Canvas(b)?b.dataSource:null;if(e){b=this.getDataSource().getTreeRelationship(e);e={};e[b.parentIdField]=a[b.idField];this.fetchData(e,c,d)}else this.logWarn("schema not understood: "+this.echoLeaf(b))},isc.A.clearCriteria=function(a,b){this.$wo("filter",null,a,b)},isc.A.$wo=function(a,
b,c,d){if(isc.$cv)arguments.$cw=this;if(d==null&&isc.isAn.Object(c)&&c.methodName==null){d=c;c=null}d=this.buildRequest(d,a,c);this.onFetchData!=null&&this.onFetchData(b,d);var e=this.getAllFields();if(e!=null)for(var f=0;f<e.length;f++)if(e[f].includeFrom!=null&&this.getDataSource().getField(e[f].name)==null){if(d.additionalOutputs==null)d.additionalOutputs="";else d.additionalOutputs+=",";d.additionalOutputs+=[e[f].name,e[f].includeFrom].join(":")}if(b==null)b={};else if(isc.isA.Class(b))b=isc.DynamicForm.getFilterCriteria(b);
this.filterWithCriteria(b,d.operation,d)},isc.A.filterWithCriteria=function(a,b,c){c.prompt=c.prompt||isc.RPCManager.fetchDataPrompt;var d=a;if(this.ignoreEmptyCriteria)d=isc.DataSource.filterCriteriaForFormValues(a);d=isc.DS.checkEmptyCriteria(d);var e=this.getData();if(this.useExistingDataModel(a,b,c))this.updateDataModel(d,b,c);else e=this.createDataModel(d,b,c);this.setData(e);if(!c.$326&&this.requestVisibleRows!=null){a=this.data;b=a.fetchDelay;a.fetchDelay=0;this.requestVisibleRows();a.fetchDelay=
b}},isc.A.useExistingDataModel=function(a,b){var c=this.getData();if(!isc.isA.ResultSet(c))return false;c=c.getOperationId("fetch");return c==null||c==b.ID},isc.A.createDataModel=function(a,b,c){this.logIsInfoEnabled("ResultSet")&&this.logInfo("Creating new isc.ResultSet for operation '"+b.ID+"' with filterValues: "+this.echoFull(a),"ResultSet");var d=this.getDataSource();if(!d){this.logWarn("No DataSource or invalid DataSource specified, can't create data model"+this.getStackTrace());return null}var e=
this.dataProperties||{};if(e.context)c=isc.addProperties({},e.context,c);if(this.dataFetchDelay)e.fetchDelay=this.dataFetchDelay;isc.addProperties(e,{operation:b,filter:a,context:c,componentId:this.ID});if(this.getSort!=null){a=this.getSort();if(a!=null&&a.length>0){e.$73p=a;e.$39x=isc.DS.getSortBy(e.$73p)}}return d.getResultSet(e)},isc.A.updateDataModel=function(a,b,c){this.logDebug("Setting filter to: "+this.echoFull(a));b=this.getData();b.setContext(c);b.willFetchData(a)||delete c.afterFlowCallback;
b.setCriteria(a)},isc.A.requestVisibleRows=function(){return this.data.get(0)},isc.A.invalidateCache=function(){if(this.data&&this.data.invalidateCache!=null)return this.data.invalidateCache();else if(this.isGrouped&&isc.isA.ResultSet(this.originalData)){this.originalData.invalidateCache();this.regroup()}},isc.A.willFetchData=function(a,b){if(this.data&&this.data.willFetchData!=null)return this.data.willFetchData(a,b);return true},isc.A.findByKey=function(a){return this.data.findByKey(a)},isc.A.addData=
function(a,b,c){return this.$wp("add",a,b,c)},isc.A.updateData=function(a,b,c){return this.$wp("update",a,b,c)},isc.A.removeData=function(a,b,c){return this.$wp("remove",a,b,c)},isc.A.$wp=function(a,b,c,d){if(isc.$cv)arguments.$cw=this;if(d==null&&isc.isAn.Object(c)&&c.methodName==null){d=c;c=null}if(this.saveLocally||this.getDataSource()==null)if(a=="update"){var e=this.getDataSource();if(!e){isc.logWarn("Update by primary key cannot be performed without a DataSource.Modify the record directly instead");
return}e=this.data.get(e.findByKeys(b,this.data));isc.addProperties(e,b);return this.data.dataChanged()}else if(a=="add"){if(this.originalData){this.originalData.add(b);this.dataChanged("add",null,null,b)}else this.data.add(b);return}d=this.buildRequest(d,a);return this.getDataSource().performDSOperation(a,b,c,d)},isc.A.removeSelectedData=function(a,b){if(b==null&&isc.isAn.Object(a)&&a.methodName==null){b=a;a=null}var c=this.getSelection();if(isc.isA.ListGrid(this)&&this.canEdit&&this.selectOnEdit&&
(c==null||c.length==0)&&this.getEditRow()!=null&&this.getRecord(this.getEditRow())==null)this.discardEdits(this.getEditRow());else if(this.dataSource==null||this.saveLocally){if(this.data){this.data.removeList(this.getSelection());a&&this.fireCallback(a)}}else{var d=this.buildRequest(b,"remove",a),e=this.getDataSource();c.length>0&&this.deleteRecords(c,d.operation,d,e)}},isc.A.deleteRecords=function(a,b,c,d){isc.addProperties(c,{prompt:c.prompt||isc.RPCManager.removeDataPrompt});var e=isc.RPCManager.startQueue();
isc.isAn.Array(a)||(a=[a]);for(var f=0;f<a.length;f++)a[f].$52e||d.performDSOperation(b.type,a[f],null,c);e||isc.RPCManager.sendQueue()},isc.A.createSelectionModel=function(){this.selection&&this.destroySelectionModel();if(this.canSelectCells){var a=[];if(this.numRows!=null)for(var b=0;b<this.numRows;b++)a[b]={}}else a=this.data;var c;a={ID:this.getID()+"_selection",data:a,target:this,selectionProperty:this.selectionProperty,simpleDeselect:this.simpleDeselect,dragSelection:this.canDragSelect};if(this.canSelectCells&&
this.fields!=null)a.numCols=this.fields.length;if(this.recordEnabledProperty!=null)a.enabledProperty=this.recordEnabledProperty;if(this.recordCanSelectProperty!=null)a.canSelectProperty=this.recordCanSelectProperty;if(this.cascadeSelection!=null)a.cascadeSelection=this.cascadeSelection;if(this.data.getNewSelection)c=this.data.getNewSelection(a);if(c==null)c=this.canSelectCells?isc.CellSelection.create(a):isc.Selection.create(a);this.selection=c},isc.A.destroySelectionModel=function(){if(this.selection){this.selection.destroy&&
this.selection.destroy();delete this.selection}},isc.A.removeSelectionMarkers=function(a){var b=true;if(!isc.isAn.Array(a)){a=[a];b=false}a.clearProperty(this.selectionProperty||this.selection?this.selection.selectionProperty:null);return b?a:a[0]},isc.A.getSelection=function(a){if(!this.selection)return null;if(this.canSelectCells){a=this.selection.getSelectedCells();if(a==null)return null;for(var b=[],c=0;c<a.length;c++){var d=a[c];d=this.getCellRecord(d[0],d[1]);d!=null&&b.add(d)}return b}else return this.selection.getSelection(a)},
isc.A.getSelectedRecord=function(){if(!this.selection)return null;return this.selection.getSelectedRecord()},isc.A.getSelectionObject=function(){return this.selection},isc.A.isSelected=function(a){if(!a||!this.selection)return false;return this.selection.isSelected(a)},isc.A.isPartiallySelected=function(a){if(!a||!this.selection)return false;return this.selection.isPartiallySelected(a)},isc.A.selectRecord=function(a,b,c){this.selectRecords(a,b,c);this.fireSelectionUpdated()},isc.A.selectSingleRecord=
function(a){this.deselectAllRecords();this.selectRecord(a);this.fireSelectionUpdated()},isc.A.deselectRecord=function(a,b){this.selectRecord(a,false,b);this.fireSelectionUpdated()},isc.A.selectRecords=function(a,b,c){if(b==null)b=true;isc.isAn.Array(a)||(a=[a]);if(isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown())this.logWarn("ignoring attempt to select records while data is loading");else{for(var d=0;d<a.length;d++)if(a[d]!=null)if(isc.isA.Number(a[d]))a[d]=this.getRecord(a[d],c);if(d=this.getSelectionObject(c)){d.selectList(a,
b,c);this.fireSelectionUpdated()}}},isc.A.deselectRecords=function(a){this.selectRecords(a,false);this.fireSelectionUpdated()},isc.A.selectAllRecords=function(){this.selection.selectAll();this.fireSelectionUpdated()},isc.A.deselectAllRecords=function(){this.selection.deselectAll();this.fireSelectionUpdated()},isc.A.anySelected=function(){return this.selection&&this.selection.anySelected()},isc.A.getRecord=function(a){if(this.data)return this.data.get(a);return null},isc.A.fireSelectionUpdated=function(){if(this.selectionUpdated){var a=
this.getSelection();this.selectionUpdated(a&&a.length>0?a[0]:null,a)}},isc.A.getHilites=function(){return this.hilites},isc.A.setHilites=function(a){this.hilites=a;a!=null&&this.$63j(this.hilites)},isc.A.getHiliteState=function(){var a=this.getHilites();if(a==null)return null;return"("+isc.JSON.encode(a,{dateFormat:"dateConstructor"})+")"},isc.A.setHiliteState=function(a){a!=null&&this.setHilites(eval(a))},isc.A.$63j=function(a,b){for(var c=0;c<a.length;c++)if(a[c].id==null){this.$63k=this.$63k||
0;a[c].id=this.$63k++}this.$58b=a.makeIndex("id");b||this.applyHilites()},isc.A.applyHilites=function(){var a=this.hilites,b=this.data;if(a){a&&!this.$58b&&this.$63j(a,true);if(isc.isA.ResultSet(b))b=b.getAllLoadedRows();if(isc.isA.Tree(b))b=b.getAllItems();b.setProperty(this.hiliteMarker,null);for(var c=this.getAllFields(),d=0;d<c.length;d++){var e=c[d],f=e[this.fieldIdProperty];if(e.userFormula||e.userSummary){e.userSummary&&!e.$652&&this.getSummaryFunction(e);for(var g=0;g<b.length;g++)b[g][f]=
e.userFormula?this.getFormulaFieldValue(e,b[g]):e.$652(b[g],f,this)}}for(d=0;d<a.length;d++)this.applyHilite(a[d],b);this.redrawHilites()}},isc.A.getHilite=function(a){if(isc.isAn.Object(a))return a;if(this.hilites==null)return null;!this.$58b&&this.hilites&&this.$63j(this.hilites);var b=this.$58b[a];if(b==null)b=this.hilites[a];return b},isc.A.applyHilite=function(a,b,c){a=this.getHilite(a);if(a.criteria)if(!a.disabled){c=c||a.fieldName;if(c==null)c=this.fields.getProperty("name");var d=[];d=this.getDataSource()?
this.getDataSource().applyFilter(b,a.criteria):this.unboundApplyFilter(b,a.criteria);b=isc.isAn.Array(c)?c:[c];this.logIsDebugEnabled("hiliting")&&this.logDebug("applying filter: "+this.echoFull(a.criteria)+", produced matches: "+isc.echoLeaf(d)+", on fields: "+b,"hiliting");for(c=0;c<b.length;c++)for(var e=this.getField(b[c]),f=0;f<d.length;f++)this.hiliteRecord(d[f],e,a)}},isc.A.unboundApplyFilter=function(a,b){var c=[];if(a)if(b)for(var d=0;d<a.length;d++)this.evaluateCriterion(a[d],b)&&c.add(a[d]);
else c=a;return c},isc.A.evaluateCriterion=function(a,b){var c=isc.DataSource.$57z[b.operator];if(c==null){isc.logWarn("Attempted to use unknown operator "+b.operator);return false}return c.condition(b.value,a,b.fieldName,b,c,this)},isc.A.hiliteRecord=function(a,b,c){if(b){var d=a[this.hiliteMarker];if(d==null)d=a[this.hiliteMarker]=this.$578++;a=b.$58c=b.$58c||{};b=a[d];a[d]=b==null?c.id:[b,c.id]}},isc.A.getHiliteCSSText=function(a){if(a=this.getHilite(a))return a.cssText||a.style},isc.A.addHiliteCSSText=
function(a,b,c){if(!a)return c;a=a[this.hiliteMarker];b=this.getField(b);if(!b||!b.$58c)return c;b=b.$58c[a];if(b==null)return c;if(!isc.isAn.Array(b)){this.$579[0]=b;b=this.$579}for(a=0;a<b.length;a++){var d=this.getHiliteCSSText(b[a]);if(d!=null)c=c?c+isc.semi+d:d}return c},isc.A.addObjectHilites=function(a,b,c){if(!this.hilites||!a)return b;var d;if(!isc.isAn.Array(a)){this.$579[0]=a;d=this.$579}for(a=0;a<d.length;a++){var e,f;f=d[a];e=this.getHilite(isc.isA.String(f)?f:f!=null?f[this.hiliteProperty]:
null);if(e!=null&&!e.disabled){f=e.cssText||e.style;var g=[];if(e)g=isc.isAn.Array(e.fieldName)?e.fieldName:[e.fieldName];e=!e.fieldName||!c||g.contains(c.name);if(f!=null&&f!=isc.emptyString&&e)if(b==null)b=f;else b+=isc.semi+f}}return b},isc.A.getFieldHilites=function(a,b){if(!a||!b)return null;if(a[this.hiliteProperty]!=null){var c=this.getHilite(a[this.hiliteProperty]),d;if(c)d=isc.isAn.Array(c.fieldName)?c.fieldName:[c.fieldName];return d&&d.contains(b.name)?[c]:null}if(a[this.hiliteMarker]!=
null){c=a[this.hiliteMarker];return b.$58c?b.$58c[c]:null}},isc.A.applyHiliteHTML=function(a,b){if(!this.hilites)return b;var c,d;if(!isc.isAn.Array(a)){this.$579[0]=a;a=this.$579}for(var e=0;e<a.length;e++){c=a[e];c=this.getHilite(c);if(c!=null){if(c.htmlValue!=null)b=c.htmlValue;if(!c.disabled){d=c.htmlBefore;if(d!=null&&d.length>0)b=d+b;d=c.htmlAfter;if(d!=null&&d.length>0)b+=d;d=c.htmlOpposite;c=c.styleOpposite||this.styleOpposite;if(d)b=isc.Browser.isIE?"<nobr><table align=left><tr><td class='"+
c+"'>"+d+"</td></tr></table>"+b+"</nobr>":"<nobr><div class='"+c+"' style='float:left'>&nbsp;"+d+"&nbsp;</div>"+b+"</nobr>"}}}return b},isc.A.enableHilite=function(a,b){if(b==null)b=true;var c=this.getHilite(a);if(c!=null){c.disabled=!b;this.redrawHilites()}},isc.A.disableHilite=function(a){this.enableHilite(a,false)},isc.A.enableHiliting=function(a){if(a==null)a=true;this.hilites&&this.hilites.setProperty("disabled",!a);this.redrawHilites()},isc.A.disableHiliting=function(){this.enableHiliting(false)},
isc.A.redrawHilites=function(){this.markForRedraw()},isc.A.editHilites=function(){var a=isc.DataSource.create({fields:this.getAllFields()});if(this.hiliteWindow){this.hiliteEditor.setDataSource(a);this.hiliteEditor.clearHilites();this.hiliteEditor.setHilites(this.getHilites());this.hiliteWindow.show()}else{var b=this;a=this.hiliteEditor=isc.HiliteEditor.create({autoDraw:false,dataSource:a,hilites:this.getHilites(),callback:function(c){c!=null&&b.setHilites(c);b.hiliteWindow.hide()}});return this.hiliteWindow=
isc.Window.create({autoDraw:true,items:[a],autoSize:true,autoCenter:true,isModal:true,showModalMask:true,closeClick:function(){this.hide()},title:"Edit Highlights",bodyProperties:{layoutMargin:8,membersMargin:8}})}},isc.A.transferRecords=function(a,b,c,d,e){if(this.$67u("transferRecords",a,b,c,d,e)){if(isc.isAn.Array(this.data)&&this.data.length==0&&this.dataSource&&!this.saveLocally){this.fetchData(null,null,{$326:true});this.data.setFullLength(0)}if(d==this)c!=null&&!this.isGrouped&&this.data.slideList(a,
c);else{var f=this.getDataSource();e=d.getDataSource();if(f&&f==e&&d.dragDataAction==isc.Canvas.MOVE){for(var g=isc.rpc.startQueue(),h=0;h<a.length;h++){for(var i={},j=f.getPrimaryKeyFieldNames(),k=0;k<j.length;k++)i[j[k]]=a[h][j[k]];isc.addProperties(i,this.getDropValues(i,e,b,c,d));this.updateDataViaDataSource(i,e,null,d)}g||isc.rpc.sendQueue()}else{isc.isAn.Array(a)||(a=[a]);h=true;if(e!=null&&f!=null)h=(h=f.getPrimaryKeyField())&&e.getField(h.name)!=null;if(h)if(this.selectionType==isc.Selection.MULTIPLE||
this.selectionType==isc.Selection.SIMPLE){this.selection.deselectAll();this.selection.selectList(a)}else this.selectionType==isc.Selection.SINGLE&&this.selection.selectSingle(a[0]);if(f){this.$67o=isc.rpc.startQueue();for(h=0;h<a.length;h++)if(!a[h].$52e){i={};isc.addProperties(i,a[h]);isc.addProperties(i,this.getDropValues(i,e,b,c,d));if(f!=e){g=f.getForeignKeysByRelation(i,e);e&&e.getPrimaryKeyFields();isc.addProperties(i,g);if(f.titleField&&e&&e.titleField&&f.titleField!=e.titleField)if(i[f.titleField]===
void 0)i[f.titleField]=i[e.titleField]}this.$61d(i,e,d,g)}}else if(this.isGrouped)for(h=0;h<a.length;h++){i={};isc.addProperties(i,a[h]);isc.addProperties(i,this.getDropValues(i,e,b,c,d));if(!this.$61e(i)){this.$52u(i,true);this.originalData.add(i)}}else for(h=0;h<a.length;h++){i={};isc.addProperties(i,a[h]);isc.addProperties(i,this.getDropValues(i,e,b,c,d));if(c!=null)this.$61d(i,null,d,null,c)&&c++;else this.$61d(i,null,d)}}}this.canReorderRecords&&this.$60z()!=null&&this.unsort();if(!this.$67l){isc.Log.logDebug("Invoking transferDragData from inside transferRecords - no server queries needed?",
"dragDrop");d.transferDragData(this.$67n,this);if(f)this.$67o||isc.rpc.sendQueue()}this.$67m=false}},isc.A.$67u=function(a,b,c,d,e,f){if(!isc.isAn.Array(this.$67k))this.$67k=[];if(this.$67l&&this.$67l!=0){isc.logWarn("transferRecords was invoked but the prior transfer is not yet complete -                      the transfer will be queued up to run after the current transfer");this.$67k.add({implementation:a,dropRecords:b,targetRecord:c,index:d,sourceWidget:e,callback:f});return false}this.$67k.addAt({implementation:a,
dropRecords:b,targetRecord:c,index:d,sourceWidget:e,callback:f},0);this.$67m=true;this.$67n=[];this.$67l=0;return true},isc.A.updateDataViaDataSource=function(a,b,c,d){var e=this;if(this.updateOperation){if(c==null)c={};isc.addProperties(c,{operationId:this.updateOperation})}if(this.preventDuplicates){var f=this.getCleanRecordData(a);if(this.data.find(f,null,Array.DATETIME_VALUES)){isc.Log.logDebug("Found client-side duplicate, skipping update for '"+a[isc.firstKey(a)]+"'","dragDrop");this.$67n.add(this.getCleanRecordData(a))}else if(this.data.allMatchingRowsCached()){if(!d.$67v)d.$67v=
0;d.$67v++;b.updateData(a,function(g,h,i){d.$67w(g,h,i)},c)}else{isc.Log.logDebug("Incrementing dup query count: was "+e.$67l,"dragDrop");this.$67l++;b.fetchData(f,function(g,h){if(h&&h.length>0){isc.Log.logDebug("Found server-side duplicate, skipping update for '"+a[isc.firstKey(a)]+"'","dragDrop");e.$67n.add(e.getCleanRecordData(h[0]))}else{if(!d.$67v)d.$67v=0;d.$67v++;b.updateData(a,function(i,j,k){d.$67w(i,j,k)},c)}isc.Log.logDebug("Decrementing dup query count: was "+e.$67l,"dragDrop");if(--e.$67l==
0&&!e.$67m)if(d.dragDataAction==isc.Canvas.MOVE){isc.Log.logDebug("Invoking transferDragData from inside callback","dragDrop");d.transferDragData(e.$67n,e);delete e.$67n;e.$67o||isc.rpc.sendQueue()}},{sendNoQueue:true})}}else{if(!d.$67v)d.$67v=0;d.$67v++;b.updateData(a,function(g,h,i){d.$67w(g,h,i)},c)}});isc.B.push(isc.A.$61d=function(a,b,c,d,e,f){var g=this.getDataSource(),h,i=this,j={};this.addOperation&&isc.addProperties(j,{operationId:this.addOperation});if(g)h=g.getPrimaryKeyFields();if(g){var k;
if(h&&isc.firstKey(h)!=null)for(var l in h)if(h[l].type=="sequence"){k=true;break}if(k){for(l in h)a[l]=void 0;if(!c.$67v)c.$67v=0;c.$67v++;g.addData(a,function(m,n,o){c.$67w(m,n,o)},j);return true}}if(!this.preventDuplicates){if(g){if(!c.$67v)c.$67v=0;c.$67v++;g.addData(a,function(m,n,o){c.$67w(m,n,o)},j)}else if(isc.Tree&&isc.isA.Tree(this.data))this.data.add(a,f,e);else e!=null?this.data.addAt(a,e):this.data.add(a);return true}if(this.$61e(a,b,d)){this.duplicateDragMessage!=null&&isc.warn(this.duplicateDragMessage);
isc.Log.logDebug("Found client-side duplicate, adding '"+a[isc.firstKey(a)]+"' to exception list","dragDrop");this.$67n.add(this.getCleanRecordData(a));return false}else if(g)if(!isc.ResultSet||!isc.isA.ResultSet(this.data)){if(!c.$67v)c.$67v=0;c.$67v++;g.addData(a,function(m,n,o){c.$67w(m,n,o)},j);return true}else{if(this.data.allRowsCached()||d&&isc.firstKey(d)&&this.data.allMatchingRowsCached()){if(!c.$67v)c.$67v=0;c.$67v++;g.addData(a,function(m,n,o){c.$67w(m,n,o)},j);return true}if(g&&b==g)b=
h&&isc.firstKey(h)!=null?isc.applyMask(a,h):this.getCleanRecordData(a);else if(d&&isc.firstKey(d)){b=isc.addProperties({},this.data.getCriteria());isc.addProperties(b,d)}else b=g&&h&&isc.firstKey(h)!=null?isc.applyMask(a,h):this.getCleanRecordData(a);isc.Log.logDebug("Incrementing dup query count: was "+i.$67l,"dragDrop");this.$67l++;g.fetchData(b,function(m,n){if(n&&n.length>0){i.duplicateDragMessage!=null&&isc.warn(i.duplicateDragMessage);isc.Log.logDebug("Found server-side duplicate, adding '"+
a[isc.firstKey(a)]+"' to exception list","dragDrop");i.$67n.add(i.getCleanRecordData(a))}else{if(!c.$67v)c.$67v=0;c.$67v++;g.addData(a,function(o,s,r){c.$67w(o,s,r)},j)}isc.Log.logDebug("Decrementing dup query count: was "+i.$67l,"dragDrop");if(--i.$67l==0&&!i.$67m)if(c.dragDataAction==isc.Canvas.MOVE){isc.Log.logDebug("Invoking transferDragData from inside callback","dragDrop");c.transferDragData(i.$67n,i);delete i.$67n;i.$67o||isc.rpc.sendQueue()}},{sendNoQueue:true})}else{if(isc.Tree&&isc.isA.Tree(this.data))this.data.add(a,
f,e);else e!=null?this.data.addAt(a,e):this.data.add(a);return true}},isc.A.$61e=function(a,b,c){var d=this.getDataSource(),e;if(!this.preventDuplicates)return false;if(d)e=d.getPrimaryKeyFields();if(d&&d==b)if(e&&isc.firstKey(e)!=null)for(var f in e)if(e[f].type=="sequence")return false;if(d)if(d&&b==d)b=e&&isc.firstKey(e)!=null?isc.applyMask(a,e):this.getCleanRecordData(a);else if(c&&isc.firstKey(c)){b={};a=this.data.getCriteria();if(!d.isAdvancedCriteria(a))if((d=this.data.context)&&(d.textMatchStyle==
null||d.textMatchStyle=="exact"))isc.addProperties(b,a);isc.addProperties(b,c)}else b=d&&e&&isc.firstKey(e)!=null?isc.applyMask(a,e):this.getCleanRecordData(a);else b=this.getCleanRecordData(a);return this.data.find(b,null,Array.DATETIME_VALUES)?true:false},isc.A.getCleanRecordData=function(a){if(isc.Tree&&isc.isA.Tree(this.data))return this.data.getCleanNodeData(a,false);var b={},c;for(c in a)c.startsWith("_selection_")||(b[c]=a[c]);return b},isc.A.$67w=function(){if(this.$67v){isc.Log.logDebug("Decrementing update count - was "+
this.$67v,"dragDrop");this.$67v-=1}if(!this.$67v){isc.Log.logDebug("All updates complete, calling dragComplete()","dragDrop");isc.isA.Function(this.dragComplete)&&this.dragComplete()}},isc.A.getDropValues=function(a,b,c){if(this.addDropValues){a={};var d;if(this.data&&this.data.getNodeDataSource)d=this.data.getNodeDataSource(c);d||(d=this.getDataSource());if(this.data&&this.data.getCriteria)a=this.data.getCriteria(d);if(isc.isAn.emptyObject(a)||!d.isAdvancedCriteria(a))if((c=this.data.context)&&(c.textMatchStyle==
null||c.textMatchStyle=="exact")){c=isc.addProperties({},a);if(this.dropValues)c=isc.addProperties(c,this.dropValues);return c}return this.dropValues}},isc.A.transferDragData=function(a,b){var c=[],d,e,f;if(b&&b.$67k){f=b.$67k.shift();d=f.dropRecords;e=f.callback}else{d=this.getDragData();f={}}if(d==null)d=[];for(var g=0;g<d.length;g++){var h=this.getCleanRecordData(d[g]);if(!a||!a.find(h,null,Array.DATETIME_VALUES))c.add(d[g])}if(this.dragDataAction==isc.Canvas.MOVE&&b!=this&&!f.noRemove){if(this.dataSource){if(b.getDataSource()!=
this.getDataSource()){f=isc.rpc.startQueue();for(g=0;g<c.length;g++)this.getDataSource().removeData(c[g]);f||isc.rpc.sendQueue()}}else if(this.data)for(g=0;g<c.length;g++){this.data.remove(c[g]);this.isGrouped&&this.originalData.remove(c[g])}this.selection&&this.selection.deselectList&&this.selection.deselectList(d)}if(b){isc.isA.Function(b.dropComplete)&&b.dropComplete(c);e&&this.fireCallback(e,"records",[c]);if(b.$67k&&b.$67k.length>0){var i=b.$67k.shift();isc.Timer.setTimeout(function(){i.implementation==
"transferNodes"?b.transferNodes(i.dropRecords,i.targetRecord,i.index,i.sourceWidget,i.callback):b.transferRecords(i.dropRecords,i.targetRecord,i.index,i.sourceWidget,i.callback)},0)}}return c},isc.A.getDragData=function(){return this.selection&&this.selection.getSelection?this.selection.getSelection():null},isc.A.cloneDragData=function(){var a=this.$758;if(a==null)a=this.selection&&this.selection.getSelection?this.selection.getSelection():null;this.$758=null;if((this.dragDataAction==isc.Canvas.COPY||
this.dragDataAction==isc.Canvas.CLONE)&&a){for(var b=0;b<a.length;b++){var c=a[b];if(c.$29a!=null)for(var d=0;d<c.$29a.length;d++)this.removeEmbeddedComponent(c,c.$29a[d]);delete c.$29a}a=isc.isA.Tree(this.data)?this.data.getCleanNodeData(a):isc.isAn.Array(a)?isc.shallowClone(a):isc.addProperties({},a)}return a},isc.A.transferSelectedData=function(a,b,c){if(this.isValidTransferSource(a)){if(b!=null)b=Math.min(b,this.data.getLength());var d=a.cloneDragData(),e;if(b!=null)e=this.data.get(b);this.transferRecords(d,
e,b,a,c)}else c&&this.fireCallback(c)},isc.A.isValidTransferSource=function(a){if(!a||!a.transferDragData){this.logWarn("transferSelectedData(): "+(a?"Invalid ":"No ")+"source widget passed in - "+(a||"")+" taking no action.");return false}if(a==this){this.logWarn("transferSelectedData(): target parameter contains a pointer back to this grid - ignoring");return false}return true},isc.A.setDragTracker=function(){var a=isc.EH,b=this.dragTrackerMode;if(b=="none"||a.dragOperation==a.DRAG_SCROLL){a.setDragTracker("");
return false}else if(b=="icon"){b=this.getDragTrackerIcon(this.getSelection());a.setDragTracker(this.imgHTML(b),null,null,null,null,this.getDragTrackerProperties());return false}else{var c=this.getSelectedRecord(),d=c&&this.data?this.data.indexOf(c):-1;if(b=="title"){b=this.getDragTrackerTitle(c,d);a.setDragTracker(b,null,null,null,null,this.getDragTrackerProperties());return false}else if(b=="record"){b=this.body.getTableHTML([0,this.fields.length-1],d,d+1);a.setDragTracker(b,null,null,null,null,
this.getDragTrackerProperties());return false}}},isc.A.getDragTrackerProperties=function(){var a=isc.addProperties({},this.dragTrackerProperties);a.styleName=this.dragTrackerStyle;if(this.dragTrackerMode=="record")a.opacity=50;return a},isc.A.makeDragLine=function(){if(this._dragLine)return false;var a={ID:this.getID()+"_dragLine",width:2,height:2,overflow:isc.Canvas.HIDDEN,visibility:isc.Canvas.HIDDEN,isMouseTransparent:true,dropTarget:this,redrawOnResize:false,styleName:"dragLine"};if(this.ns.Element.getStyleEdges(a.styleName)==
null)a.backgroundColor="black";isc.addProperties(a,this.dragLineDefaults,this.dragLineProperties);this._dragLine=this.ns.Canvas.create(a);return true},isc.A.hideDragLine=function(){this._dragLine&&this._dragLine.hide()},isc.A.configureFrom=function(a){for(var b=this.dbcProperties,c=0;c<b.length;c++){this[b[c]]=a[b[c]];if(b[c]=="dataSource"){var d=this.autoFetchData;this.autoFetchData=false;this.setDataSource(isc.DS.getDataSource(this.dataSource));this.autoFetchData=d}}this.setCriteria(a.getCriteria());
this.setData(a.getData())},isc.A.addFormulaField=function(){this.editFormulaField()},isc.A.editFormulaField=function(a){if(isc.FormulaBuilder!=null){var b=this,c=!a?false:true;c||(a={name:b.getUniqueFieldName(this.formulaFieldNamePrefix),title:"New Field",width:"50",canFilter:false,canExport:false,canSortClientOnly:true});this.$65y=isc.Window.create({title:"Formula Editor ["+a.title+"]",showMinimizeButton:false,showMaximizeButton:false,isModal:true,showModalMask:true,autoSize:true,autoCenter:true,
autoDraw:true,headerIconProperties:{padding:1,src:"[SKINIMG]ListGrid/formula_menuItem.png"},closeClick:function(){this.items.get(0).completeEditing(true);return this.Super("closeClick",arguments)},items:[isc.FormulaBuilder.create({width:300,component:b,dataSource:b.getDataSource(),editMode:c,field:a,mathFunctions:isc.MathFunction.getDefaultFunctionNames(),fireOnClose:function(){b.userFieldCallback(this)}},this.formulaBuilderProperties)]},this.formulaBuilderProperties)}},isc.A.getFormulaFieldValue=
function(a,b){return this.getFormulaFunction(a)(b,this)},isc.A.getFormulaFunction=function(a){if(!a.userFormula)return null;var b=a.$65w;if(b!=null)return b;return b=a.$65w=a.sortNormalizer=isc.FormulaBuilder.generateFunction(a.userFormula,this.getAllFields(),this)},isc.A.addSummaryField=function(){this.editSummaryField()},isc.A.editSummaryField=function(a){if(isc.FormulaBuilder!=null){var b=this,c=!a?false:true;if(isc.isA.String(a))a=this.getField(a);c||(a={name:b.getUniqueFieldName(this.summaryFieldNamePrefix),
title:"New Field",width:"50",canFilter:false,canExport:false,canSortClientOnly:true});this.$65y=isc.Window.create({title:"Summary Editor ["+a.title+"]",showMinimizeButton:false,showMaximizeButton:false,isModal:true,showModalMask:true,autoSize:true,autoCenter:true,autoDraw:true,headerIconProperties:{padding:1,src:"[SKINIMG]ListGrid/formula_menuItem.png"},closeClick:function(){this.items.get(0).completeEditing(true);return this.Super("closeClick",arguments)},items:[isc.SummaryBuilder.create({width:300,
component:b,dataSource:b.getDataSource(),editMode:c,field:a,fireOnClose:function(){b.userFieldCallback(this)}},this.summaryBuilderProperties)]},this.summaryEditorProperties)}},isc.A.userFieldCallback=function(a){if(a){var b=this.$65y;if(a.cancelled)b.destroy();else{var c=a.getUpdatedFieldObject();if(this.userAddedField&&this.userAddedField(c)==false)b.destroy();else{if(this.hideField&&a.shouldHideUsedFields())for(var d=a.getUsedFields(),e=0;e<d.length;e++)this.hideField(d.get(e).name);d=this.getAllFields();
e=isc.Class.getArrayItemIndex(c.name,d,this.fieldIdProperty);if(e>=0)d[e]=c;else d.addAt(c,this.getFields().length);this.setFields(d);this.markForRedraw&&this.markForRedraw();c=a.restartBuilder;a=a.builderTypeText;b.destroy();if(c)a=="Formula"?this.addFormulaField():this.addSummaryField()}}}},isc.A.getUniqueFieldName=function(a){if(!a||a=="")a=this.uniqueFieldNamePrefix;for(var b=this.getFields(),c=1,d=a.length,e=0;e<b.length;e++){var f=b.get(e);if(f.name.startsWith(a)){f=f.name.substr(d);if((f=new Number(f))&&
f>=c)c=f+1}}return a+c},isc.A.getSummaryFunction=function(a){if(!a.userSummary)return null;var b=a.$652;if(b!=null)return b;return b=a.$652=a.sortNormalizer=isc.SummaryBuilder.generateFunction(a.userSummary,this.getAllFields(),this)},isc.A.getSummaryFieldValue=function(a,b){return this.getSummaryFunction(a)(b,a[this.fieldIdProperty],this)},isc.A.getRecordIndex=function(a){return this.data.indexOf(a)},isc.A.getTitleFieldValue=function(){},isc.A.getTitleField=function(){if(this.titleField!=null)return this.titleField;
if(this.dataSource!=null){var a=this.getDataSource().getTitleField();this.getField(a)||(a=this.getFields()[0][this.fieldIdProperty]);this.titleField=a}else{a=this.getFields().getProperty(this.fieldIdProperty);this.titleField=a.contains("title")?"title":a.contains("label")?"label":a.contains("name")?"name":a.contains("id")?"id":a.first()}return this.titleField},isc.A.getRecordHiliteCSSText=function(a,b,c){b=this.addObjectHilites(a,b,c);return b=this.addHiliteCSSText(a,c,b)},isc.A.convertCSSToProperties=
function(a,b){if(a==null)return null;var c;a.split(";").map(function(d){var e=d.split(":");if(e.length!=2)return null;var f=/^\s*(\S*)\s*$/;d=e[0].cssToCamelCaps().replace(f,"$1");e=e[1].replace(f,"$1");if(!b||b.contains(d)){c||(c={});c[d]=e}});return c},isc.A.getExportFieldValue=function(a,b){return this.htmlUnescapeExportFieldValue(this.getStandaloneFieldValue(a,b,false))},isc.A.addDetailedExportFieldValue=function(a,b,c,d,e,f,g){var h=this.getRecordHiliteCSSText(c,null,d),i;i=d.exportRawValues||
this.exportRawValues&&d.exportRawValues!=false?c[d[this.fieldIdProperty]]:this.getExportFieldValue(c,d.name,e);if(d.userSummary){d.userSummary.text||this.logError("Summary field does not have text format");var j=[];e={};var k={},l=h&&h!="",m;for(m in d.userSummary.summaryVars){var n=d.userSummary.summaryVars[m],o=this.getField(n);if(o){e[m]=o;if(n=this.getRecordHiliteCSSText(c,null,o)){k[m]=n;l=true}}else j.add(n)}if(l)if(j.length!=0&&h)a[b]=g?{style:this.convertCSSToProperties(h,f),value:i}:this.convertCSSToProperties(h,
f);else{var s=null,r=null,t=[],p=this;g=function(w,v){if(w){w=p.htmlUnescapeExportFieldValue(w);if(s&&r==v)s.value+=w;else{s&&t.push(s);s={value:w};if(r=v)s.style=p.convertCSSToProperties(v,f)}}};d=d.userSummary.text.split("#");i=/^\{([A-Z]+)\}/;d[0]&&g(d[0],h);for(m=1;m<d.length;m++){o=d[m];var q,u;n=o.charAt(0);if(l=e[n])o=o.substr(1);else if(j=o.match(i)){o=o.substr(j[0].length);n=j[1];if(l=e[n])o=this.missingSummaryFieldValue+o}else o="#"+o;if(l){q=this.getExportFieldValue(c,l.name,this.getFieldNum(l.name));
u=null;if(h)u=(u||"")+h;if(k[n])u=(u||"")+k[n]}g(q,u);g(o,h)}s&&t.push(s);a[b]=t}}else if(h)if(c=this.convertCSSToProperties(h,f))a[b]=g?[{value:i,style:c}]:c},isc.A.getClientExportData=function(a,b){var c=this.originalData||this.data,d=this.getClientExportFields(a),e,f,g,h;if(isc.isA.Object(a)){if(a.exportData!=null)c=a.exportData;e=a.includeHiddenFields;f=a.allowedProperties;g=a.includeCollapsedNodes;h=a.alwaysExportExpandedStyles;if(a&&a.exportFields)if(e!==false)e=true}if(isc.isA.ResultSet(c))c=
c.getAllLoadedRows();if(isc.isA.Tree(c))c=g?c.getAllNodes():c.getOpenList();c={settings:a,callback:b,chunkSize:this.exportDataChunkSize,data:c,exportData:[],fields:d,includeHiddenFields:e,allowedProperties:f,includeCollapsedNodes:g,alwaysExportExpandedStyles:h,totalRows:c.getLength(),startRow:0,endRow:Math.min(this.exportDataChunkSize,c.getLength())};c.firstTimeStamp=c.thisTimeStamp=isc.timeStamp();this.logWarn("starting export chunking process - "+c.firstTimeStamp);this.getClientExportDataChunk(c)},
isc.A.getClientExportDataChunk=function(a){for(var b=a.data,c=a.exportData,d=a.fields,e=a.includeHiddenFields,f=a.allowedProperties,g=a.includeCollapsedNodes,h=a.alwaysExportExpandedStyles,i=a.endRow,j=a.startRow;j<i;j++){var k=b[j];k=this.getRecordExportObject(k,d,f,e,g,h);c.push(k)}if(a.endRow<a.totalRows){a.lastTimeStamp=a.thisTimeStamp;a.thisTimeStamp=isc.timeStamp();this.logIsInfoEnabled("export")&&this.logInfo("processed "+a.endRow+" rows - starting next chunk - "+(a.thisTimeStamp-a.lastTimeStamp)/
1E3);a.startRow=a.endRow;a.endRow=Math.min(a.startRow+a.chunkSize,a.totalRows);return this.delayCall("getClientExportDataChunk",[a],0)}if(this.showGridSummary&&this.summaryRow&&this.exportIncludeSummaries){b=[this.summaryRow.$71q];for(j=0;j<b.getLength();j++){k=b[j];k=this.getRecordExportObject(k,d,f,e,g,h);c.push(k)}}if(a.callback){b=a.exportData;this.logIsInfoEnabled("export")&&this.logInfo("finished processing "+a.endRow+" rows - about to export - "+isc.timestamp());this.fireCallback(a.callback,
"data,context",[b,a.settings])}},isc.A.getClientExportFields=function(a){var b=this.getAllFields();if(isc.isA.Object(a))if(a&&a.exportFields){for(var c=[],d=0;d<b.length;d++)a.exportFields.contains(b[d].name)&&c.add(b[d]);b=c}return b},isc.A.getRecordExportObject=function(a,b,c,d,e,f){e={};for(var g=0;g<b.length;g++){var h=b[g];if(this.fields.contains(h)||d){var i=this.getFieldNum(h.name),j=this.htmlUnescapeExportFieldTitle(h.exportTitle||h.title||h.name),k=j+"$style",l;l=h.exportRawValues||this.exportRawValues&&
h.exportRawValues!=false?a[h[this.fieldIdProperty]]:this.getExportFieldValue(a,h.name,i);if(l==null||l=="&nbsp;")l="";e[j]=l;this.addDetailedExportFieldValue(e,k,a,h,i,c,f)}}return e},isc.A.htmlUnescapeExportFieldTitle=function(a){return this.htmlUnescapeExportFieldValue(a)},isc.A.htmlUnescapeExportFieldValue=function(a){if(isc.isA.String(a))return a.unescapeHTML().replace(/<.*?>/g,isc.emptyString);return a},isc.A.addHiliteSpan=function(a,b,c){return(a=this.getRecordHiliteCSSText(a,null,b))?'<span style="'+
a+'">'+c+"</span>":c},isc.A.getRawValue=function(a,b){return this.getCellValue(a,this.getField(b))},isc.A.getFormattedValue=function(a,b,c){return c},isc.A.fieldIsVisible=function(){return true},isc.A.getStandaloneFieldValue=function(a,b,c){var d=this.getSpecifiedField(b),e;if(d){if(d.userFormula)e=this.getFormulaFieldValue(d,a);else if(d.userSummary)e=this.getSummaryFieldValue(d,a);else{e=this.getRawValue(a,b);c||(e=this.getFormattedValue(a,b,e))}return this.addHiliteSpan(a,d,e)}},isc.A.getFormattingProperties=
function(a,b){if(!(a.type!="date"&&a.type!="datetime")){var c;if(a.displayFormat&&isc.isA.Function(Date.prototype[a.displayFormat]))c=a.displayFormat;if(a.dateFormatter&&isc.isA.Function(Date.prototype[a.dateFormatter]))c=a.dateFormatter;if(!c){var d=this.getDataSource().getField(a.name).displayFormat;if(d&&isc.isA.Function(Date.prototype[d]))c=d}if(!c)if((d=a.type=="date"?this.dateFormatter:this.datetimeFormatter)&&isc.isA.Function(Date.prototype[d]))c=d;if(!c)if((d=a.type=="date"?Date.prototype.$el:
Date.prototype.$68e)&&isc.isA.Function(Date.prototype[d]))c=d;if(c)return{dateFormatter:c,rawValue:b}}},isc.A.exportClientData=function(a){this.getClientExportData(a,this.getID()+".exportClientDataReply(data,context)")},isc.A.exportClientDataReply=function(a,b){if(a==null||a.length==0)isc.warn(this.emptyExportMessage);var c=b&&b.exportFilename?b.exportFilename:"export",d=b&&b.exportDisplay?b.exportDisplay:"download";isc.DMI.callBuiltin({methodName:"downloadClientExport",arguments:[a,b&&b.exportAs?
b.exportAs:"csv",c,d,{exportAs:b.exportAs,exportDelimiter:b.exportDelimiter,exportFields:b.exportFields,exportHeader:b.exportHeader,exportFooter:b.exportFooter,exportTitleSeparatorChar:b.exportTitleSeparatorChar,lineBreakStyle:b.lineBreakStyle}],requestParams:{showPrompt:false,transport:"hiddenFrame",exportResults:true,downloadResult:true,downloadToNewWindow:d=="window",download_filename:d=="window"?c:null}})},isc.A.getSort=function(){return this.$73p?isc.shallowClone(this.$73p):null},isc.A.setSort=
function(a){this.$73p=isc.shallowClone(a);if(this.data&&this.$73p&&this.$73p.length>0)if(this.data.setSort)this.data.setSort(this.$73p);else if(this.data.sortByProperty){a=this.$73p[0];this.data.sortByProperty(a.property,Array.shouldSortAscending(a.direction),a.normalizer,a.context)}},isc.A.askForSort=function(){isc.MultiSortDialog&&this.canMultiSort!=false&&isc.MultiSortDialog.askForSort(this,this.getSort(),this.getID()+".multiSortReply(sortLevels)")},isc.A.multiSortReply=function(a){a!=null&&this.setSort(a)},
isc.A.addValidationError=function(a,b,c){var d=false;if(isc.isAn.Array(c)){for(var e=0;e<c.length;e++)d=this.addValidationError(a,b,c[e])||d;return d}if(a[b]){isc.isAn.Array(a[b])||(a[b]=[a[b]]);if(!a[b].contains(c)){a[b].add(c);d=true}}else{a[b]=c;d=true}return d},isc.A.isFieldDependentOnOtherField=function(a,b){if(!a.validators)return false;for(var c=this.getDataSource(),d=0;d<a.validators.length;d++){var e=a.validators[d];if(e){if(!e.$74r&&e.applyWhen&&c!=null)e.$74r=c.getCriteriaFields(e.applyWhen);
if(e.dependentFields&&e.dependentFields.contains(b))return true;if(e.$74r&&e.$74r.length>0&&e.$74r.contains(b))return true}}return false},isc.A.getFieldDependencies=function(a){if(!a.validators)return null;for(var b=this.getDataSource(),c=[],d=0;d<a.validators.length;d++){var e=a.validators[d];if(e){if(!e.$74r&&e.applyWhen&&b!=null)e.$74r=b.getCriteriaFields(e.applyWhen);if(e.dependentFields){if(!isc.isAn.Array(e.dependentFields))e.dependentFields=[e.dependentFields];for(d=0;d<e.dependentFields.length;d++)c.add(e.dependentFields[d])}e.$74r&&
e.$74r.length>0&&c.addList(e.$74r)}}return c.length==0?null:c},isc.A.validateFieldAndDependencies=function(a,b,c,d,e){b={};var f=false,g={valid:true,errors:null,resultingValue:null};d[a.name]=c;c=this.validateField(a,a.validators,c,d,e);if(c!=null){g.valid=c.valid;g.stopOnError=c.stopOnError;if(c.errors!=null)this.addValidationError(b,a.name||a.dataPath,c.errors);if(c.resultingValue!=null){g.resultingValue=c.resultingValue;d[a.name]=c.resultingValue}f=true}a=a.name||a.dataPath;for(var h=this.getFields()||
[],i=0;i<h.length;i++){var j=h[i];if(j.name!=a&&j.dataPath!=a&&this.isFieldDependentOnOtherField(j,a)){c=this.validateField(j,j.validators,d[j.name],d,e);if(c!=null){c.errors!=null?this.addValidationError(b,j.name||j.dataPath,c.errors):this.addValidationError(b,j.name||j.dataPath,null);if(c.resultingValue!=null)d[j.name]=c.resultingValue}}}g.errors=b;return f?g:null},isc.A.validateField=function(a,b,c,d,e){if(!b)return null;var f=[],g=false,h=null,i={valid:true,errors:null,resultingValue:null},j=
false,k=false;isc.isAn.Array(b)||(b=[b]);for(var l=0;l<b.length;l++){var m=b[l];if(m)if(!(e&&e.typeValidationsOnly&&!this.$685.contains(m.type)))if(!(e&&e.dontValidateNullValue&&c==null&&m.type!="required"&&m.type!="requiredIf"))if(!e||!e.changing||m.validateOnChange!=false&&(m.validateOnChange||a.validateOnChange||this.validateOnChange))if(isc.Validator.isServerValidator(m)){j=true;if(m.stopOnError)k=true}else{if(m.applyWhen){var n=this.getDataSource(),o=m.applyWhen;if(n==null)isc.logWarn("Conditional validator criteria ignored because form has no dataSource");
else if(n.applyFilter([d],o).length==0){isc.Validator.performAction(null,a,m,this);continue}}g=true;n=isc.Validator.processValidator(a,m,c,null,d)==true;isc.Validator.performAction(n,a,m,this);if(!n){o=isc.Validator.getErrorMessage(m);if(o==null)o=e&&e.unknownErrorMessage?e.unknownErrorMessage:this.unknownErrorMessage;f.add(o);if(m.stopOnError)h=true}if(m.resultingValue!=null)c=i.resultingValue=m.resultingValue;if(!n&&m.stopIfFalse)break}}if(j&&(!e||e.skipServerValidation!=true)){k=this.$75e(k,a.stopOnError,
this.stopOnError);b=e&&e.serverValidationMode?e.serverValidationMode:this.$746;d=isc.addProperties({},d);k=k||a.synchronousValidation||this.synchronousValidation||false;d[a.name]=c;this.fireServerValidation(a,d,b,k,e.rowNum)}i.stopOnError=f.length>0&&this.$75e(h,a.stopOnError,this.stopOnError);i.errors=f.length==0?null:f;i.valid=f.length==0;return g?i:null},isc.A.$75e=function(a,b,c){if(a!=null)return a;return b==null&&c||b||false},isc.A.fireServerValidation=function(a,b,c,d,e){var f=this.getDataSource();
if(f!=null){e={showPrompt:d,prompt:isc.RPCManager.validateDataPrompt,validationMode:c,clientContext:{component:this,fieldName:a.name,rowNum:e}};if(c==this.$746)for(var g in b)b[g]===null&&delete b[g];if(!d){a=this.$75c(a);e.clientContext.pendingFields=a}f.validateData(b,this.$742,e)}},isc.A.$742=function(a){if(a.status==isc.DSResponse.STATUS_FAILURE){isc.logWarn("Server-side validation failed: "+a.data);isc.say(a.data)}var b=a.clientContext,c=b.component,d=b.pendingFields;if(a.errors){a=isc.DynamicForm.getSimpleErrors(a.errors);
for(var e in a){var f=a[e],g=c.getField(e);if(f!=null&&g!=null){isc.isAn.Array(f)||(f=[f]);for(var h=null,i=0;i<f.length;i++){c.addFieldErrors(e,f[i].errorMessage,false,b.rowNum);if(f[i].stopOnError)h=true}g.redraw&&g.redraw();h=c.$75e(h,g.stopOnError,c.stopOnError);if(e==b.fieldName&&h==true&&!g.hasFocus)!g.synchronousValidation&&!c.synchronousValidation?isc.logWarn("Server validation for "+e+" signaled stopOnError but validation is not set for synchronousValidation:true - stop ignored."):c.focusInItem(g)}}}d&&
c.$75d(d)},isc.A.$75c=function(a){var b=this.getFields()||[],c=[a.name];a=a.name;this.$75a[a]=this.$75a[a]==null?1:this.$75a[a]++;for(var d=0;d<b.length;d++){var e=b[d];if(e.name!=a&&this.isFieldDependentOnOtherField(e,a)){e=e.name;c.add(e);this.$75a[e]=this.$75a[e]==null?1:this.$75a[e]++}}return c},isc.A.$75d=function(a){for(var b=false,c=0;c<a.length;c++){this.$75a[a[c]]--;if(this.$75a[a[c]]==0){delete this.$75a[a[c]];b=true}}if(b&&this.$75b!=null){a=true;for(c=0;c<this.$75b;c++)if(this.$75a[this.$75b[c]]>
0){a=false;break}if(a){this.$75b=null;isc.clearPrompt()}}},isc.A.blockOnFieldBusy=function(a){if(this.$75b!=null)return true;var b=false,c;for(c in this.$75a){b=true;break}if(!b)return false;b=this.getFieldDependencies(a)||[];b.add(a.name);a=[];for(c=0;c<b.length;c++){var d=b[c];this.$75a[d]>0&&a.add(d)}if(a.length>0){this.$75b=a;this.delayCall("showValidationBlockingPrompt");return true}return false},isc.A.showValidationBlockingPrompt=function(){this.$75b&&isc.showPrompt(isc.RPCManager.validateDataPrompt)},
isc.A.enableField=function(a){if(!(a==null||isc.isAn.emptyString(a)))if(a=this.getField(a)){a.disabled=false;this.redraw()}},isc.A.disableField=function(a){if(!(a==null||isc.isAn.emptyString(a)))if(a=this.getField(a)){a.disabled=true;this.redraw()}},isc.A.showField=function(a){if(!(a==null||isc.isAn.emptyString(a)))if(a=this.getField(a)){a.hidden=false;this.redraw()}},isc.A.hideField=function(a){if(!(a==null||isc.isAn.emptyString(a)))if(a=this.getField(a)){a.hidden=true;this.redraw()}},isc.A.setFieldCanEdit=
function(a,b){if(!(a==null||isc.isAn.emptyString(a))){var c=this.getField(a);if(c){c.canEdit=b;this.redraw()}}},isc.A.isOffline=function(){if(this.data&&this.data.$78c)return true;return false});isc.B._maxIndex=isc.C+173;isc.ClassFactory.defineClass("MathFunction","Class");isc.A=isc.MathFunction;isc.A.$65z={};isc.A=isc.MathFunction;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.registerFunction=function(a){this.$65z[a.name]||(this.$65z[a.name]=
a)},isc.A.getRegisteredFunctionNames=function(){return isc.getKeys(this.$65z)},isc.A.getDefaultFunctionNames=function(){var a=this.getDefaultFunctions().makeIndex("name",false);return isc.getKeys(a)},isc.A.getRegisteredFunctions=function(){return isc.getValues(this.$65z)},isc.A.getDefaultFunctions=function(){for(var a=this.getRegisteredFunctions(),b=a.findAll("defaultSortPosition",-1)||[],c=0;c<b.length;c++)a.remove(b[c]);a.sortByProperties(["defaultSortPosition"],["true"]);return a},isc.A.getRegisteredFunctionIndex=
function(){return this.getRegisteredFunctions().makeIndex("name",false)},isc.A.getDefaultFunctionIndex=function(){return this.getDefaultFunctions().makeIndex("name",false)},isc.A.isRegistered=function(a){if(this.$65z[a])return true;return false});isc.B._maxIndex=isc.C+8;isc.A=isc.MathFunction.getPrototype();isc.A.defaultSortPosition=-1;isc.MathFunction.registerFunction(isc.MathFunction.create({name:"max",description:"Maximum of two values",usage:"max(value1, value2)",defaultSortPosition:1,jsFunction:function(a,
b){return Math.max(a,b)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"min",description:"Minimum of two values",usage:"min(value1, value2)",defaultSortPosition:2,jsFunction:function(a,b){return Math.min(a,b)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"round",description:"Round a value up or down, optionally providing <i>decimalDigits</i> as the maximum number of decimal places to round to.  For fixed or precision rounding, use <i>toFixed()</i> and <i>toPrecision()</i> respectively.",
usage:"round(value,decimalDigits)",defaultSortPosition:3,jsFunction:function(a,b){if(b){var c=Math.pow(10,b);return Math.round(a*c)/c}return Math.round(a)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"ceil",description:"Round a value up",usage:"ceil(value)",defaultSortPosition:4,jsFunction:function(a){return Math.ceil(a)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"floor",description:"Round a value down",usage:"floor(value)",defaultSortPosition:5,jsFunction:function(a){return Math.floor(a)}}));
isc.MathFunction.registerFunction(isc.MathFunction.create({name:"abs",description:"Absolute value",usage:"abs(value)",defaultSortPosition:6,jsFunction:function(a){return Math.abs(a)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"pow",description:"Value1 to the power of Value2",usage:"pow(value1, value2)",defaultSortPosition:7,jsFunction:function(a,b){return Math.pow(a,b)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"sin",description:"Sine of a value",usage:"sin(value)",
defaultSortPosition:8,jsFunction:function(a){return Math.sin(a)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"cos",description:"Cosine of a value",usage:"cos(value)",defaultSortPosition:9,jsFunction:function(a){return Math.cos(a)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"tan",description:"Tangent of a value",usage:"tan(value)",defaultSortPosition:10,jsFunction:function(a){return Math.tan(a)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"ln",
description:"Natural logarithm of a value",usage:"ln(value)",defaultSortPosition:11,jsFunction:function(a){return Math.log(a)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"log",description:"logarithm of a value with the specified <i>base</i>",usage:"log(base, value)",defaultSortPosition:12,jsFunction:function(a,b){return Math.log(b)/Math.log(a)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"asin",description:"Arcsine of a value",usage:"asin(value)",defaultSortPosition:13,
jsFunction:function(a){return Math.asin(a)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"acos",description:"Arccosine of a value",usage:"acos(value)",defaultSortPosition:14,jsFunction:function(a){return Math.acos(a)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"atan",description:"Arctangent of a value (-PI/2 to PI/2 radians)",usage:"atan(value)",defaultSortPosition:15,jsFunction:function(a){return Math.atan(a)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"atan2",
description:"Angle theta of a point (-PI to PI radians)",usage:"atan2(value1,value2)",defaultSortPosition:16,jsFunction:function(a,b){return Math.atan2(a,b)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"exp",description:"The value of E<sup>value</sup>",usage:"exp(value)",defaultSortPosition:17,jsFunction:function(a){return Math.exp(a)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"random",description:"Random number between 0 and 1",usage:"random()",defaultSortPosition:18,
jsFunction:function(){return Math.random()}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"sqrt",description:"Square root of a value",usage:"sqrt(value)",defaultSortPosition:19,jsFunction:function(a){return Math.sqrt(a)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"toPrecision",description:"Format a number to a length of <i>precision</i> digits, rounding or adding a decimal point and zero-padding as necessary.  Note that the values 123, 12.3 and 1.23 have an equal precision of 3.  Returns a formatted string and should be used as the outermost function call in a formula. For rounding, use <i>round()</i>.",
usage:"toPrecision(value,precision)",defaultSortPosition:20,jsFunction:function(a,b){var c=a;if(isc.isA.String(c))c=parseFloat(c);if(isNaN(c))return a;return c.toPrecision(b)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"toFixed",description:"Round or zero-pad a number to <i>digits</i> decimal places.  Returns a formatted string and should be used as the outermost function call in a formula.  To round values or restrict precision, use <i>round()</i> and <i>toPrecision()</i> respectively.",
usage:"toFixed(value,digits)",defaultSortPosition:21,jsFunction:function(a,b){var c=a;if(isc.isA.String(c))c=parseFloat(c);if(isNaN(c))return a;return c.toFixed(b)}}));isc.Canvas.registerStringMethods({userAddedField:"field",selectionUpdated:"record,recordList",onFetchData:"criteria,requestProperties"});isc.defineClass("EdgedCanvas","Canvas");isc.A=isc.EdgedCanvas.getPrototype();isc.A.redrawOnResize=false;isc.A._redrawWithParent=false;isc.A.$jp=false;isc.A.$jo=false;isc.A.useClipDiv=false;isc.A.overflow=
isc.Browser.isMoz?isc.Canvas.VISIBLE:isc.Canvas.HIDDEN;isc.A.$ks=false;isc.A.$tb=0;isc.A.$td=0;isc.A.$tc=0;isc.A.$te=0;isc.A.$y0=["TL","T","TR","L","center","R","BL","B","BR"];isc.A.skinImgDir="images/edges/";isc.A.edgeImage="[SKIN]/rounded/frame/FFFFFF/6.png";isc.A.shownEdges={TL:true,T:true,TR:true,L:true,R:true,BL:true,B:true,BR:true};isc.A.edgeSize=6;isc.A=isc.EdgedCanvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$61h="<TD class='";
isc.A.$61i="' ></TD>";isc.A.$y2="<TABLE CELLPADDING=0 CELLSPACING=0 STYLE='height:100%;width:100%;table-layout:fixed'><COL WIDTH=";isc.A.$y3="><COL><COL WIDTH=";isc.A.$4n=" class=";isc.A.addEdgeStyleSuffix=false;isc.A.forceMozRowHeight=true;isc.B.push(isc.A.initWidget=function(){this.invokeSuper(isc.EdgedCanvas,this.$oc);var a=this.customEdges;if(a){var b=this.shownEdges={};if(a.contains("T"))b.T=b.TL=b.TR=true;if(a.contains("B"))b.B=b.BL=b.BR=true;if(a.contains("L"))b.L=b.TL=b.BL=true;if(a.contains("R"))b.R=
b.TR=b.BR=true}this.updateEdgeSizes()},isc.A.updateEdgeSizes=function(){var a=this.edgeSize;this.$y4=this.$du(this.edgeLeft,a);this.$y5=this.$du(this.edgeRight,a);this.$y6=this.$du(this.edgeTop,a);this.$y7=this.$du(this.edgeBottom,a);a=this.shownEdges;var b=this.edgeOffset;if(a.L)this.$tb=this.$du(this.edgeOffsetLeft,b,this.$y4);if(a.R)this.$tc=this.$du(this.edgeOffsetRight,b,this.$y5);if(a.T)this.$td=this.$du(this.edgeOffsetTop,b,this.$y6);if(a.B)this.$te=this.$du(this.edgeOffsetBottom,b,this.$y7);
this.markForRedraw()},isc.A.getInnerWidth=function(a,b,c){return this.invokeSuper(isc.EdgedCanvas,"getInnerWidth",a,b,c)-this.$tb-this.$tc},isc.A.getInnerHeight=function(a,b,c){return this.invokeSuper(isc.EdgedCanvas,"getInnerHeight",a,b,c)-this.$td-this.$te},isc.A.getInnerHTML=function(){var a=isc.SB.create(),b=this.edgeImage,c=b.lastIndexOf(isc.dot),d=b.substring(0,c);c=b.substring(c);d=this.getImgURL(d);if(isc.Browser.isStrict&&isc.Browser.isIE&&isc.Browser.version>=8||isc.Browser.isMoz&&isc.Browser.isUnix){b=
" STYLE='background:url("+d;c=c+")'></TD>"}else{c=isc.EdgedCanvas.$y8;if(!c){c=isc.EdgedCanvas.$y8={width:"100%",height:"100%"};if(isc.Browser.isSafari)c.align="middle";if(isc.Browser.isStrict&&!isc.Browser.isTransitional)c.extraStuff="style='display:block;'"}c.src=b;c=this.imgHTML(c);if(isc.Browser.isSafari)c="<DIV style='overflow:hidden;width:100%;height:100%'>"+c+"</DIV>";d=c.lastIndexOf(isc.dot);b=this.$oa+c.substring(0,d);c=c.substring(d)+"</TD>"}if(this.edgeColor)b+=isc.$ag+this.edgeColor;d=
this.shownEdges;a.append(this.$y2,this.$y4,this.$y3,this.$y5,this.$oa,"<TR HEIGHT=",this.$y6,this.$oa);this.$y9("<TD HEIGHT=",this.$y6,b,c,0,2,d,a);isc.Browser.isIE&&isc.Browser.isStrict?a.append("</TR><TR HEIGHT=",this.getHeight()-this.$y6-this.$y7,">"):a.append("</TR><TR>");isc.Browser.isMoz?this.$y9("<TD HEIGHT=","100%",b,c,3,5,d,a):this.$y9("<TD",null,b,c,3,5,d,a);a.append("</TR><TR HEIGHT=",this.$y7,">");this.$y9("<TD HEIGHT=",this.$y7,b,c,6,8,d,a);a.append("</TR></TABLE>");return a.toString()},
isc.A.$y9=function(a,b,c,d,e,f,g,h){for(e=e;e<=f;e++){var i=this.$y0[e],j=this.getEdgeStyleName(i),k=j?this.$4n:null;if(g[i]||this.showCenter&&i==isc.Canvas.CENTER)h.append(a,b,k,j,c,this.getEdgePrefix(i),isc.$ag,i,d);else this.centerBackgroundColor&&i==isc.Canvas.CENTER?h.append("<TD ",k,j," style='background-color:",this.centerBackgroundColor,"'></TD>"):h.append(this.$61h,k,j,this.$61i)}},isc.A.getEdgeStyleName=function(a){if(this.edgeStyleName!=null){if(!this.addEdgeStyleSuffix)return this.edgeStyleName;
if(!this.$61j||this.$61j.base!=this.edgeStyleName){var b=this.edgeStyleName;this.$61j={base:b,TL:b+"$61o",T:b+"$61p",TR:b+"$61q",L:b+"$61r",C:b+"$61s",R:b+"$61t",BL:b+"$61u",B:b+"$61v",BR:b+"$61w"}}return this.$61j[a]}},isc.A.getEdgePrefix=function(){},isc.A.$ub=function(){if(!(!this.isDrawn()||this.$za))if(isc.Browser.isOpera)this.masterElement.bringToFront();else if(isc.Browser.isIE&&isc.Browser.isStrict)this.$u9(this.getHandle().firstChild.rows[1].style,this.$o5,this.getHeight()-this.$y6-this.$y7);
else if(isc.Browser.isMoz){var a=this.getHandle().firstChild.rows[1].cells[1],b=this.getHeight()-this.$y6-this.$y7;if(b<0)b=0;this.$u9(a.style,this.$o5,b);if(this.forceMozRowHeight){a=a.parentNode.cells;this.$u9(a[0].style,this.$o5,b);this.$u9(a[2].style,this.$o5,b)}}},isc.A.layoutChildren=function(a,b,c){var d=this.children;if(d){isc.Canvas.$b4.layoutChildren.call(this,a,b,c);d.length!=0&&d[0].setRect(this.$tb,this.$td,this.getInnerWidth(),this.getInnerHeight())}},isc.A.addChild=function(a,b,c){isc.Canvas.$b4.addChild.call(this,
a,b,c);this.layoutChildren("addChild")},isc.A.draw=function(a,b,c,d){if(!this.readyToDraw())return this;if(this.masterElement){for(var e=this.masterElement,f=false;e;){if(e.position==this.$411){f=true;break}e=e.parentElement}!f||isc.Page.isLoaded()?this.fitToMaster():isc.Page.setEvent("load",this,isc.Page.FIRE_ONCE,"fitToMaster")}this.invokeSuper(isc.EdgedCanvas,"draw",a,b,c,d);this.$ub();return this},isc.A.fitToMaster=function(){if(!this.destroyed){var a=this.masterElement;if(a.$uu)isc.Timer.setTimeout({target:this,
methodName:"fitToMaster"},200);else{a.$rm&&a.adjustOverflow();var b=a.$ta();this.setRect(a.getOffsetLeft()+b.left,a.getOffsetTop()+b.top,Math.max(1,a.getVisibleWidth()-b.left-b.right),Math.max(1,a.getVisibleHeight()-b.top-b.bottom))}}},isc.A.redraw=function(){this.Super("redraw",arguments);this.$ub();return this},isc.A.masterResized=function(){var a=this.masterElement;this.masterElement.isAnimating([this.$do,this.$zb])||(isc.Browser.isSafari?this.delayCall("$663",[a]):this.$663(a))},isc.A.$663=function(a){if(!(this.destroyed||
a!=this.masterElement)){var b=a.$ta();this.resizeTo(Math.max(1,a.getVisibleWidth()-b.left-b.right),Math.max(1,a.getVisibleHeight()-b.top-b.bottom))}},isc.A.setEdgeImage=function(a){if(this.edgeImage!=a){this.edgeImage=a;this.markForRedraw("setEdgeImage")}});isc.B._maxIndex=isc.C+17;isc.defineClass("DropShadow","EdgedCanvas");isc.A=isc.DropShadow.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.skinImgDir="images/shared/shadows/";isc.A.edgeImage=
"[SKIN]ds.png";isc.A.isMouseTransparent=true;isc.A.shownEdges={center:true,TL:true,T:true,TR:true,L:true,R:true,BL:true,B:true,BR:true};isc.A.depth=4;isc.A.showShadow=false;isc.B.push(isc.A.initWidget=function(){this.setDepth(this.depth);this.Super(this.$oc)},isc.A.setDepth=function(a){if(a!=null)this.depth=a;var b=this.softness||this.depth;a=this.$zc!=b;this.$zc=b;this.edgeSize=2*this.$zc;b=this.$du(this.offset,Math.round(this.depth/2));this.$zd=this.$du(this.offsetX,b);this.$ze=this.$du(this.offsetY,
b);this.updateEdgeSizes();if(this.isDrawn()){this.masterMoved();if(a||this.isDirty())this.redraw();this.masterResized()}},isc.A.getEdgePrefix=function(a){if(a!=isc.Canvas.CENTER)return this.$zc},isc.A.masterMoved=function(){var a=this.visibility==isc.Canvas.HIDDEN,b=this.masterElement,c=b.getOffsetLeft();b=b.getOffsetTop();if(!a){c+=this.$zd-this.$zc;b+=this.$ze-this.$zc}this.moveTo(c,b)},isc.A.masterResized=function(){if(this.visibility!=isc.Canvas.HIDDEN){var a=this.masterElement;this.resizeTo(a.getVisibleWidth()+
2*this.$zc,a.getVisibleHeight()+2*this.$zc)}},isc.A.fitToMaster=function(){this.masterMoved();this.masterResized()},isc.A.setVisibility=function(a,b,c,d,e){var f=a!=this.visibility;this.invokeSuper(isc.DropShadow,"setVisibility",a,b,c,d,e);if(f)if(a==isc.Canvas.HIDDEN){this.resizeTo(1,1);a=this.masterElement;this.moveTo(a.getOffsetLeft(),a.getOffsetTop())}else this.fitToMaster()},isc.A.getCurrentCursor=function(a,b,c,d){var e=this.masterElement;if(e&&e.dragResizeFromShadow)this.canDragResize=e.canDragResize;
return this.invokeSuper(isc.DropShadow,"getCurrentCursor",a,b,c,d)},isc.A.prepareForDragging=function(a,b,c,d){var e=this.masterElement;if(e&&e.dragResizeFromShadow)this.canDragResize=e.canDragResize;return this.invokeSuper(isc.DropShadow,"prepareForDragging",a,b,c,d)});isc.B._maxIndex=isc.C+9;isc.ClassFactory.defineClass("Hover");isc.A=isc.Hover;isc.A.delay=500;isc.A.leftOffset=15;isc.A.topOffset=15;isc.A.hoverCanvasDefaults={defaultWidth:100,defaultHeight:1,baseStyle:"canvasHover",align:isc.Canvas.LEFT,
valign:isc.Canvas.TOP,wrap:true,autoDraw:false};isc.A=isc.Hover;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.show=function(a,b,c,d){if(isc.isA.Canvas(a)){this.showingHoverComponent=true;this.hoverCanvas=a;this.hoverCanvas.hide=function(){this.Super("hide",arguments);isc.Hover.hoverCanvasHidden()};d.hoverCanvas=a}this.hoverCanvas||this.$zf();var e=this.hoverCanvas;if(a==null||a=="")e.hide();else{this.lastHoverCanvas=d;this.showingHoverComponent||
e.setContents(a);if(b==null)b={};var f=this.hoverCanvasDefaults;if(e.setAlign)e.setAlign(b.align||f.align);if(e.setVAlign)e.setVAlign(b.valign||f.valign);if(e.setBaseStyle)e.setBaseStyle(b.baseStyle||f.baseStyle);if(e.setOpacity)e.setOpacity(b.opacity||f.opacity);if(e.setWrap)e.setWrap(b.wrap!=null?b.wrap:f.wrap);this.$zg=b.moveWithMouse!=null?b.moveWithMouse:this.moveWithMouse;var g=isc.EH.getX(),h=isc.EH.getY();d=b.left;var i=b.top;a=b.width||(this.showingHoverComponent?e.width:f.defaultWidth);
b=b.height||(this.showingHoverComponent?e.height:f.defaultHeight);if(d!=null||i!=null){d=d?d:g+this.leftOffset;i=i?i:h+this.topOffset}else{e.setRect(null,-9999,a,b);e.isDrawn()||e.draw();e.isVisible()?e.redrawIfDirty("placing hover"):e.show();c=c?c:[g-this.leftOffset,h-this.topOffset,2*this.leftOffset,2*this.topOffset];d=e.getPeerRect();c=isc.Canvas.$t7(d[2],d[3],c,"bottom",false,"outside-right");d=c[0];i=c[1]}e.setRect(d,i,a,b);e.bringToFront();if(!e.isDrawn()||!e.isVisible())e.show();if(this.$zg)this.$zh=
isc.Page.setEvent("mouseMove",function(){isc.Hover.$zi()})}},isc.A.hoverCanvasHidden=function(){var a=this.lastHoverCanvas;delete this.lastHoverCanvas;a!=null&&a.$80l()},isc.A.hide=function(){var a=isc.Hover.hoverCanvas;if(a!=null){if(this.$zh){isc.Page.clearEvent("mouseMove",this.$zh);delete this.$zh}a.hide();if(this.showingHoverComponent){if(a){delete this.hoverCanvas;this.showingHoverComponent=false}}else a.setRect(0,-1E3)}},isc.A.$zf=function(){var a=isc.addProperties({hide:function(){this.Super("hide",
arguments);isc.Hover.hoverCanvasHidden()}},this.hoverCanvasDefaults);this.hoverCanvas=isc.Label.create(a)},isc.A.$zi=function(){var a=this.hoverCanvas.getPeerRect();a=isc.Canvas.$t7(a[2],a[3],this.getMousePointerRect(),"bottom",false,"outside-right");this.hoverCanvas.moveTo(a[0],a[1])},isc.A.getMousePointerRect=function(){return[isc.EH.getX()-this.leftOffset,isc.EH.getY()-this.topOffset,2*this.leftOffset,2*this.topOffset]},isc.A.setAction=function(a,b,c,d){if(d==null)d=this.delay;if(this.isActive||
d==0){b.apply(a?a:this,c?c:[]);this.isActive=true}else{if(this.timer!=null)this.timer=isc.Timer.clear(this.timer);this.actionTarget=a?a:this;this.action=b;this.actionArgs=c?c:[];this.timer=isc.Timer.setTimeout({target:isc.Hover,methodName:"$zj"},d)}},isc.A.$zj=function(){this.action&&!this.actionTarget.destroyed&&this.action.apply(this.actionTarget,this.actionArgs);this.actionTarget=this.action=this.actionArgs=null;this.isActive=true},isc.A.clear=function(){this.hide();if(this.timer!=null)this.timer=
isc.Timer.clear(this.timer);this.actionTarget=this.action=this.actionArgs=null;this.isActive=false});isc.B._maxIndex=isc.C+9;isc.Comm||isc.ClassFactory.defineClass("Comm");isc.A=isc.Comm;isc.A.$zk=/^[\$_a-zA-Z][\$\w]*$/;isc.A.BACKREF_PREFIX="$$BACKREF$$:";isc.A.indent="    ";isc.A=isc.Comm;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.serialize=function(a,b){var c={strictQuoting:false,dateFormat:"dateConstructor"};if(b!=null)c.prettyPrint=
b;return isc.JSON.encode(a,c)});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("JSON",null,null,true);isc.A=isc.JSON;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.encode=function(a,b){return isc.JSONEncoder.create(b).encode(a)},isc.A.decode=function(a){return eval("("+a+")")});isc.B._maxIndex=isc.C+2;isc.ClassFactory.defineClass("JSONEncoder");isc.A=isc.JSONEncoder;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=
isc.A.Class;isc.B.push(isc.A.$zm=function(a,b,c){a.obj.add(b);a.path.add(c)},isc.A.$42b=function(a){var b=a.$42c;if(b!=null)if((b=window[b])&&b.parentProperty&&a[b.parentProperty])a=b.getCleanNodeData(a);return a},isc.A.$zl=function(a,b){var c=a.obj.indexOf(b);if(c==-1)return null;return a.path[c]},isc.A.$zp=function(a,b){return isc.isA.Number(b)?a+"["+b+"]":isc.Comm.$zk.test(b)?a+"."+b:a+'["'+b+'"]'});isc.B._maxIndex=isc.C+4;isc.A=isc.JSONEncoder.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;
isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.serializeInstances=true;isc.A.dateFormat="xmlSchema";isc.A.strictQuoting=true;isc.A.circularReferenceMode="path";isc.A.circularReferenceMarker="$$BACKREF$$";isc.A.prettyPrint=true;isc.B.push(isc.A.encode=function(a){this.objRefs={obj:[],path:[]};a=this.$eu(a,this.prettyPrint?"":null,null);this.objRefs=null;return a},isc.A.encodeDate=function(a){return this.dateFormat=="dateConstructor"?a.$eu():'"'+a.toSchemaDate()+'"'},isc.A.$eu=function(a,b,c){c||
(c=a&&a.getID?a.getID():"");if(a==null)return null;if(isc.isA.String(a))return a.asSource!=null?a.asSource():String.asSource(a);if(isc.isA.Function(a))return null;if(isc.isA.Number(a)||isc.isA.SpecialNumber(a))return a;if(isc.isA.Boolean(a))return a;if(isc.isA.Date(a))return this.encodeDate(a);if(isc.isAn.Instance(a))if(this.serializeInstances=="skip")return null;else if(this.serializeInstances=="short")return isc.echoLeaf(a);var d=isc.JSONEncoder.$zl(this.objRefs,a);if(d!=null&&c.contains(d)){var e=
c.substring(d.length,d.length+1);if(e=="."||e=="["||e=="]"){a=this.circularReferenceMode;return a=="marker"?"'"+this.circularReferenceMarker+"'":a=="path"?"'"+this.circularReferenceMarker+":"+d+"'":null}}if(a==window){this.logWarn("Serializer encountered the window object at path: "+c+" - returning null for this slot.");return null}isc.JSONEncoder.$zm(this.objRefs,a,c);if(isc.isA.Function(a.$eu))return a.$eu(b,this.objRefs,c);if(isc.isAn.Array(a))return this.$zn(a,c,this.objRefs,b);return this.$zo(a.getSerializeableFields?
a.getSerializeableFields([],[]):a,c,this.objRefs,b)},isc.A.$zn=function(a,b,c,d){c=isc.SB.create();c.append("[");for(var e=0,f=a.length;e<f;e++){var g=a[e];d!=null&&c.append("\r",d,isc.Comm.indent);b=isc.JSONEncoder.$zp(b,e);g=this.$eu(g,d!=null?d+isc.Comm.indent:null,b);c.append(g+",");d!=null&&c.append(" ")}c=c.toString();a=c.lastIndexOf(",");if(a>-1)c=c.substring(0,a);if(d!=null)c+="\r"+d;c+="]";return c},isc.A.$zo=function(a,b,c,d){c=isc.SB.create();a=isc.JSONEncoder.$42b(a);for(var e in a)break;
c.append("{");for(e in a)if(e!=null)if(!(this.skipInternalProperties&&(isc.startsWith(e,isc.$ag)||isc.startsWith(e,isc.$75g)))){var f=a[e];if(!isc.isA.Function(f))if(!(e!=isc.gwtRef&&isc.isAn.Instance(f)&&this.serializeInstances=="skip")){var g=e.toString();if(!isc.Comm.$zk.test(g)||this.strictQuoting)g=g.contains('"')?g.contains("'")?'"'+this.convertToEncodedQuotes(g)+'"':"'"+g+"'":'"'+g+'"';b=isc.JSONEncoder.$zp(b,e);if(e==isc.gwtRef){if(!this.showDebugOutput)continue;f="{GWT Java Obj}"}else f=
this.$eu(f,d!=null?d+isc.Comm.indent:null,b);d!=null&&c.append("\r",d,isc.Comm.indent);c.append(g,":"+f,",");d!=null&&c.append(" ")}}c=c.toString();a=c.lastIndexOf(",");if(a>-1)c=c.substring(0,a);if(d!=null)c+="\r"+d;c+="}";return c},isc.A.convertToEncodedQuotes=function(a){return a.replace(String.$e0,"&quot;").replace(String.$ez,"&apos;")},isc.A.convertFromEncodedQuotes=function(a){return a.replace(RegExp("&quot;","g"),'"').replace(RegExp("&apos;","g"),"'")});isc.B._maxIndex=isc.C+7;isc.addGlobal("clone",
function(a){return isc.Comm.$360(a)});isc.addGlobal("shallowClone",function(a){return isc.Comm.$675(a)});isc.A=isc.Comm;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.clone=isc.clone;isc.A.shallowClone=isc.shallowClone;isc.B.push(isc.A.$360=function(a){if(a!==void 0){if(a==null)return null;if(isc.isA.String(a)||isc.isA.Boolean(a)||isc.isA.Number(a)||isc.isA.Function(a))return a;if(isc.isA.Date(a))return a.duplicate();if(isc.isAn.Array(a))return isc.Comm.$361(a);
if(isc.isA.Function(a.clone)){if(isc.isA.Class(a))return isc.echoLeaf(a);return a.clone()}return isc.Comm.$362(a)}},isc.A.$361=function(a){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=isc.Comm.$360(a[c]);return b},isc.A.$362=function(a){var b={},c;for(c in a)if(c!=isc.gwtRef)b[c]=isc.Comm.$360(a[c]);return b},isc.A.$675=function(a){if(a!==void 0){if(a==null)return null;if(isc.isA.String(a)||isc.isA.Boolean(a)||isc.isA.Number(a)||isc.isA.Function(a))return a;if(isc.isA.Date(a))return a.duplicate();if(isc.isAn.Array(a))return isc.Comm.$676(a);
return isc.addProperties({},a)}},isc.A.$676=function(a){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=isc.isAn.Array(a[c])?a[c]:isc.Comm.$675(a[c]);return b});isc.B._maxIndex=isc.C+5;isc.defineClass("AutoTest");isc.A=isc.AutoTest;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.fallback_valueOnlyField="$75w";isc.A.fallback_startMarker="[";isc.A.fallback_endMarker="]";isc.A.fallback_separator="||";isc.A.fallback_equalMarker="=";isc.A.slashMarker="$fs$";isc.A.robustLocatorWarning=
"If you are seeing unexpected results in recorded tests, it is likely that the application has been modified since the test was recorded. We would recommend re-recording your test script with the latest version of your application. Note that you may be able to avoid seeing this message in future by using the AutoChild subsystem or providing explicit global IDs to components whose function within the page is unlikely to change.";isc.B.push(isc.A.getLocator=function(a,b){var c;if(a==null){c=true;a=
isc.EH.lastEvent?isc.EH.lastEvent.nativeTarget:null}var d;c=(d=isc.isA.Canvas(a)?a:isc.AutoTest.locateCanvasFromDOMElement(a))?d.getLocator(a,c):"";if(b&&c&&c!=""&&d.checkLocatorForNativeElement(c,a))c="";return c},isc.A.locateCanvasFromDOMElement=function(a){return isc.EH.getEventTargetCanvas(null,a)},isc.A.getElement=function(a){if(!a)return null;if(a.startsWith("'")||a.startsWith('"'))a=a.substring(1);if(a.endsWith("'")||a.endsWith('"'))a=a.substring(0,a.length-1);if(!a.startsWith("//")){if(a.startsWith("ID=")||
a.startsWith("id="))a=a.substring(3);a='//*any*[ID="'+a+'"]'}a=a.split("/");var b=a[2];if(!b)return null;a=a.slice(3);return(b=this.getBaseComponentFromLocatorSubstring(b))?b.getElementFromSplitLocator(a):null},isc.A.getPageCoords=function(a){var b=this.getElement(a);if(b!=null){var c=this.locateCanvasFromDOMElement(b);return c?c.getAutoTestLocatorCoords(a,b):null}},isc.A.getBaseComponentFromLocatorSubstring=function(a){var b=a.match("(.*)\\["),c=b?b[1]:null;if(c=="autoID"){c=isc.AutoTest.parseLocatorFallbackPath(a).config;
return isc.Canvas.getCanvasFromFallbackLocator(a,c,isc.Canvas.$tw,"name","Class")}else{a=(b=a.match("ID=[\\\"'](.*)['\\\"]"))?b[1]:null;if(a==null)return null;a=window[a];if(!a)return null;if(a&&c!="*any*"&&(!isc.isA[c]||!isc.isA[c](a)))this.logWarn("AutoTest.getElement(): Component:"+a+" expected to be of class:"+c);return a}},isc.A.getLocatorCanvas=function(a){if(a==null||isc.isAn.emptyString(a))return null;a=a.split("/");for(var b=a[2],c=a.length,d=3;d<c;d++)a[d-3]=a[d];a.length=c-3;if(!b)return null;
if(b=this.getBaseComponentFromLocatorSubstring(b)){d=0;for(c=b.getChildFromLocatorSubstring(a[d],d,a);c!=null;){d++;b=c;c=b.getChildFromLocatorSubstring(a[d],d,a)}return b}return null},isc.A.getLocatorFormItem=function(a){if(a==null||isc.isAn.emptyString(a))return null;a=a.split("/");for(var b=a[2],c=a.length,d=3;d<c;d++)a[d-3]=a[d];a.length=c-3;if(!b)return null;if(b=this.getBaseComponentFromLocatorSubstring(b))for(c=b.getChildFromLocatorSubstring(a[0],0,a);c!=null;){a.removeAt(0);b=c;c=b.getChildFromLocatorSubstring(a[0],
0,a)}if(isc.isA.DynamicForm(b))return b.getItemFromSplitLocator(a);return null},isc.A.createLocatorFallbackPath=function(a,b){var c=[],d;for(d in b){var e=b[d];if(isc.isA.String(e)){e=e.replace("/",this.slashMarker);e=escape(e)}d==this.fallback_valueOnlyField?c.add(e):c.add(d+this.fallback_equalMarker+e)}return a+this.fallback_startMarker+c.join(this.fallback_separator)+this.fallback_endMarker},isc.A.parseLocatorFallbackPath=function(a){var b=a.split(this.fallback_startMarker);if(!(b==null||b.length<
2)){var c=b[0];a=b[1].substring(0,b[1].length-this.fallback_endMarker.length);var d=a.split(this.fallback_separator);a={};for(var e=0;e<d.length;e++){var f=d[e],g=f.indexOf(this.fallback_equalMarker),h;if(g==-1)h=this.fallback_valueOnlyField;else{h=f.substring(0,g);f=f.substring(g+1)}f=f.replace(this.slashMarker,"/");f=unescape(f);a[h]=f}if(b[2]!=null){f=b[2].substring(0,b[2].length-this.fallback_endMarker.length);g=f.indexOf(this.fallback_equalMarker);b=f.substring(0,g);f=f.substring(g+1);if(f.startsWith('"'))f=
f.substring(1,f.length-1);a[b]=f}return{name:c,config:a}}},isc.A.getObjectLocatorFallbackPath=function(a,b,c,d){if(c==null)c={};if(d==null)d={title:"title",Class:"ClassName"};if(isc.isAn.Array(d))for(var e=0;e<d.length;e++){var f=b.getProperty?b.getProperty(d[e]):b[d[e]];if(f!=null&&!isc.isAn.emptyString(f))c[d[e]]=f}else for(e in d){f=b.getProperty?b.getProperty(d[e]):b[d[e]];if(f!=null&&!isc.isAn.emptyString(f))c[e]=f}return isc.AutoTest.createLocatorFallbackPath(a,c)},isc.A.logRobustLocatorWarning=
function(){if(!this.$75z){this.logWarn(this.robustLocatorWarning,"AutoTest");this.$75z=true}});isc.B._maxIndex=isc.C+11;isc.ApplyAutoTestMethods=function(){isc.Canvas.addClassMethods({getCanvasLocatorFallbackPath:function(a,b,c,d,e){if(d==null)d={};if(e==null)e={};else if(isc.isAn.Array(e)){for(var f={},g=0;g<e.length;g++)f[e[g]]=e[g];e=f}if(e.title==null)e.title="title";if(e.scRole==null)e.scRole="waiRole";if(e.name==null)e.name="name";f=b.getClassName();g=b.getClass();d.Class=f;var h;if(!g.isFrameworkClass)h=
g.$750;if(h!=null)d.scClass=h;if(c!=null){d.index=c.indexOf(b);d.length=c.length;f=c.findAll("Class",f);d.classIndex=f.indexOf(b);d.classLength=f.length;if(h!=null){h=c.findAll("$75y",h);d.scClassIndex=h.indexOf(b);d.scClassLength=h.length}if(b.waiRole!=null){c=c.findAll("waiRole",b.waiRole);d.roleIndex=c.indexOf(b);d.roleLength=c.length}}return isc.AutoTest.getObjectLocatorFallbackPath(a,b,d,e)},getCanvasFromFallbackLocator:function(a,b,c,d,e){var f=b.name,g=b.Class,h=b.scClass||b.Class,i=b.scRole;
switch(d){case "name":if(f!=null)if(d=c.find("name",f))switch(e){case "Class":if(g&&isc.isA[g]&&isc.isA[g](d)){this.logIsDebugEnabled("AutoTest")&&this.logDebug("Locator string:"+a+" - returning widget with matching name and ClassName:"+d,"AutoTest");return d}case "scClass":if(h&&isc.isA[h]&&isc.isA[h](d)){this.logIsDebugEnabled("AutoTest")&&this.logDebug("Locator string:"+a+" - returning widget with matching name and scClassName:"+d,"AutoTest");return d}case "role":if(d.waiRole==b.scRole){this.logIsDebugEnabled("AutoTest")&&
this.logDebug("Locator string:"+a+" - returning widget with matching name and role:"+d,"AutoTest");return d}default:if(e!="none"){isc.AutoTest.logRobustLocatorWarning();this.logWarn("Locator string:"+a+". Returning closest match:"+d+". This has the same name as the recorded component but does not match class or role. ","AutoTest")}else this.logIsDebugEnabled("AutoTest")&&this.logDebug("Locator string:"+a+" - returning widget with matching name:"+d,"AutoTest");return d}case "title":d=b.title;if(d!=
null)if((d=c.findAll("title",d))&&d.length>0){var j;switch(e){case "Class":if(g){var k=d.findAll("Class",g);if(k!=null){j=k[0];if(k.length==1&&j){this.logIsDebugEnabled("AutoTest")&&this.logDebug("Locator string:"+a+" - returning widget with matching title and ClassName:"+j,"AutoTest");return j}}}case "scClass":if(h){k=d.findAll("$75y",h);if(k!=null){if(k.length==1||j==null)j=k[0];if(k.length==1&&j){this.logIsDebugEnabled("AutoTest")&&this.logDebug("Locator string:"+a+" - returning widget with matching name and scClassName:"+
j,"AutoTest");return j}}}case "role":if(i){k=d.findAll("waiRole",i);if(k!=null){if(k.length==1||j==null)j=k[0];if(k.length==1&&j){this.logIsDebugEnabled("AutoTest")&&this.logDebug("Locator string:"+a+" - returning widget with matching title and role:"+j,"AutoTest");return j}}}default:if(d.length==1){if(e!="none"){isc.AutoTest.logRobustLocatorWarning();this.logWarn("Locator string:"+a+". Returning closest match:"+d[0]+". This has the same title as the recorded component but does not match class or role.",
"AutoTest")}else this.logIsDebugEnabled("AutoTest")&&this.logDebug("Locator string:"+a+" - returning widget with matching title:"+j,"AutoTest");return d[0]}else this.logWarn("Locator string:"+a+", attempt to match by title failed -- multiple candidate components have this same title. Attempting to match by index instead.","AutoTest")}}default:var l,m,n;switch(e){case "Class":if(g&&b.classIndex)if((j=c.findAll("Class",g))&&j.length>0){l=j[parseInt(b.classIndex)];if(j.length==parseInt(b.classLength)){this.logIsInfoEnabled("AutoTest")&&
this.logInfo("Locator string:"+a+" - returning widget with matching ClassName / index by ClassName:"+l,"AutoTest");return l}}case "scClass":if(h&&b.scClassIndex)if((j=c.findAll("$75y",h))&&j.length>0){m=j[parseInt(b.scClassIndex)];if(j.length==parseInt(b.scClassLength)){this.logIsInfoEnabled("AutoTest")&&this.logInfo("Locator string:"+a+" - returning widget with matching SmartClient superclass / index by ClassName:"+m,"AutoTest");return m}}case "role":if(i&&b.roleIndex)if((j=c.findAll("waiRole",i))&&
j.length>0){n=j[parseInt(b.roleIndex)];if(j.length==parseInt(b.roleLength)){this.logIsInfoEnabled("AutoTest")&&this.logInfo("Locator string:"+a+" - returning widget with matching role / index by role:"+n,"AutoTest");return n}}default:if(e!="none"&&(g||h||i)||b.length!=null&&parseInt(b.length)!=c.length)isc.AutoTest.logRobustLocatorWarning();e=l||m||n;if(e==null){e=b[isc.AutoTest.fallback_valueOnlyField];if(e==null)e=b.index;e=parseInt(e);e=c[e]}if(e){this.logWarn("Locator string:"+a+" matching by index gave "+
e+". Reliability cannot be guaranteed for matching by index if the underlying application undergoes any changes.","AutoTest");return e}}}this.logDebug("AutoTest.getElement(): locator substring:"+a+" parsed to fallback locator name:"+f+", unable to find relevant child - may refer to inner element.","AutoTest")}});isc.Canvas.addMethods({getLocator:function(a,b){var c;if(this._generated||this.locatorParent||this.creator||this.$541)c=this.getLocatorParent();c=c?c.getLocator()+"/"+c.getChildLocator(this):
this.getLocatorRoot();if(a)return[c,this.getInteriorLocator(a,b)].join("/");return c},$549:["//",,'[ID="',,'"]'],getLocatorRoot:function(){if(!this.locatorRoot)if(this.$541&&this.parentElement==null)this.locatorRoot="//"+isc.Canvas.getCanvasLocatorFallbackPath("autoID",this,isc.Canvas.$tw);else{this.$549[1]=this.getClassName();this.$549[3]=this.getID();this.locatorRoot=this.$549.join(isc.emptyString)}return this.locatorRoot},containsLocatorChild:function(a){if(this.namedLocatorChildren!=null)for(var b=
0;b<this.namedLocatorChildren.length;b++){var c=this.namedLocatorChildren[b];if(isc.isAn.Object(c))c=c.attribute;if(a==this[c])return true}return false},getLocatorParent:function(){if(this.locatorParent&&this.locatorParent.containsLocatorChild(this))return this.locatorParent;if(this.creator&&isc.isA.Canvas(this.creator))if(this.creator.getAutoChildLocator(this)==null)this.logInfo("Locator code failed to find relationship between parent:"+this.creator.getID()+" and autoChild:"+this.getID(),"AutoTest");
else return this.creator;return this.masterElement||this.parentElement},$55a:[,"[",,'][Class="',,'"]'],getChildLocator:function(a){if(a==this.hscrollbar)return"hscrollbar";if(a==this.vscrollbar)return"vscrollbar";if(a.creator==this){var b=this.getAutoChildLocator(a);if(b)return b}return this.getStandardChildLocator(a)},checkLocatorForNativeElement:function(a,b){if(b==null||a==null)return false;return isc.EventHandler.eventHandledNatively("mousedown",b,true)&&isc.AutoTest.getElement(a)!=b},getCanvasLocatorFallbackPath:function(a,
b,c,d,e){return isc.Canvas.getCanvasLocatorFallbackPath(a,b,c,d,e)},getAutoChildLocator:function(a){if(this.$542){var b=a.getID(),c;for(c in this.$542){var d=this.$542[c];if(d.contains(b))if(a==this[c])return c;else{b=[];for(var e=0;e<d.length;e++)b[e]=window[d[e]];return this.getCanvasLocatorFallbackPath(c,a,b)}}}return null},getNamedLocatorChildString:function(a){if(a.locatorParent==this&&this.namedLocatorChildren)for(var b=0;b<this.namedLocatorChildren.length;b++){var c=this.namedLocatorChildren[b],
d=c;if(isc.isA.Object(c)){d=c.attribute;c=c.name}if(a==this[d])return c}},getStandardChildLocator:function(a){var b=this.getNamedLocatorChildString(a);if(b)return b;if(a.masterElement==this)return this.getCanvasLocatorFallbackPath("peer",a,this.peers);else if(a.parentElement==this)return this.getCanvasLocatorFallbackPath("child",a,this.children);else{this.logWarn("unexpected error - failed to find relationship between parent:"+this.getID()+" and child:"+a.getID());return a.getLocatorRoot()}},getInteriorLocator:function(a){if(a&&
this.useEventParts){a=this.getElementPart(a);if(a!=null&&a.part!=null)return a.partID&&a.partID!=isc.emptyString?a.part+"_"+a.partID:a.part}return isc.emptyString},getElementFromSplitLocator:function(a){var b=this.getChildFromLocatorSubstring(a[0],0,a);if(b){a.removeAt(0);return b.getElementFromSplitLocator(a)}return this.getInnerElementFromSplitLocator(a)},getChildFromLocatorSubstring:function(a){if(a==null||a=="")return null;if(isc.isA.Canvas(this[a]))return this[a];if(this.namedLocatorChildren!=
null){var b=this.namedLocatorChildren.find("name",a);if(b!=null){var c=this[b.attribute];if(isc.isA.Canvas(c))return c;this.logWarn("Locator substring:"+a+" remaps to attribute:"+b.attribute+" but no canvas exists under that attribute name.","AutoTest")}}b=isc.AutoTest.parseLocatorFallbackPath(a);if(b!=null)return this.getChildFromFallbackLocator(a,b);return null},getChildLocatorStrategy:function(a){if(isc.AutoTest.locStrategyNames==null)isc.AutoTest.locStrategyNames={};var b=isc.AutoTest.locStrategyNames[a];
if(b==null){b=a;if(isc.isA.String(this.$558[a]))b=this.$558[a];b=isc.AutoTest.locStrategyNames[a]="locate"+b.substring(0,1).toUpperCase()+b.substring(1)+"By"}return this[b]},getChildLocatorTypeStrategy:function(a){if(isc.AutoTest.locStrategyTypes==null)isc.AutoTest.locStrategyTypes={};var b=isc.AutoTest.locStrategyTypes[a];if(b==null){b=a;if(isc.isA.String(this.$558[a]))b=this.$558[a];b=isc.AutoTest.locStrategyTypes[a]="locate"+b.substring(0,1).toUpperCase()+b.substring(1)+"Type"}return this[b]},
getChildFromFallbackLocator:function(a,b){var c=b.name,d=b.config,e=this.getFallbackLocatorCandidates(c);if(e&&e.length>0){var f=this.getChildLocatorStrategy(c);if(f==null)f="name";var g=this.getChildLocatorTypeStrategy(c);if(g==null)g="Class";d=isc.Canvas.getCanvasFromFallbackLocator(a,d,e,f,g);if(d!=null)return d}this.logDebug("AutoTest.getElement(): locator substring:"+a+" parsed to fallback locator name:"+c+", unable to find relevant child - may refer to inner element.","AutoTest")},$558:{peer:"peers",
child:"children"},getFallbackLocatorCandidates:function(a){var b;if(this.$542!=null&&this.$542[a]!=null){a=this.$542[a];b=[];for(var c=0;c<a.length;c++)b[c]=window[a[c]]}else if(isc.isA.String(this.$558[a]))b=this[this.$558[a]];else if(this[a]&&isc.isAn.Array(this[a]))b=this[a];return b},emptyLocatorArray:function(a){return a==null||a.length==0||a.length==1&&a[0]==""},getInnerElementFromSplitLocator:function(a){if(!this.emptyLocatorArray(a))if(a.length==1){a=a[0].split("_");if(a=this.getPartElement({part:a[0],
partID:a[1]}))return a}return this.getHandle()},getAutoTestLocatorCoords:function(a,b){if(a==null||b==null)return null;var c=isc.Element.getElementRect(b),d=c[0];d+=Math.floor(c[2]/2);var e=c[1];e+=Math.floor(c[3]/2);return[d,e]}});isc.Layout&&isc.Layout.addProperties({getStandardChildLocator:function(a){var b=this.getNamedLocatorChildString(a);if(b)return b;if(this.members.contains(a))return this.getCanvasLocatorFallbackPath("member",a,this.members);return this.Super("getStandardChildLocator",arguments)},
$558:{member:"members",peer:"peers",child:"children"}});isc.Window&&isc.Window.addProperties({containsLocatorChild:function(a){if(this.items&&this.items.contains(a))return true;return this.Super("containsLocatorChild",arguments)},getStandardChildLocator:function(a){if(this.items&&this.items.contains(a)){var b=this.$55a;b[0]="item";b[2]=this.items.indexOf(a);b[4]=a.getClassName();return b.join(isc.emptyString)}return this.invokeSuper(isc.Window,"getStandardChildLocator",a)},$558:{item:"items",member:"members",
peer:"peers",child:"children"}});if(isc.SectionStack){isc.ImgSectionHeader.changeDefaults("$558",{item:"items"});isc.SectionHeader.changeDefaults("$558",{item:"items"});isc.SectionStack.changeDefaults("$558",{section:"sections"});isc.SectionStack.addProperties({getStandardChildLocator:function(a){for(var b=this.sections||[],c,d=0;d<b.length;d++){var e=b[d].items,f,g;if(a==b[d])f=a;else if(e&&e.contains(a)){f=b[d];g=a}if(f!=null)c=this.getCanvasLocatorFallbackPath("section",f,this.sections);if(g!=
null)c+="/"+this.getCanvasLocatorFallbackPath("item",g,f.items);if(c!=null)return c}return this.Super("getStandardChildLocator",arguments)}})}isc.StretchImg&&isc.StretchImg.addProperties({getInteriorLocator:function(a,b){for(var c=a,d=this.getHandle(),e=this.getCanvasName();a&&a!=d&&a.getAttribute;){var f=a.getAttribute("name");if(f&&f.startsWith(e))return f.substring(e.length);a=a.parentNode}return this.Super("getInteriorLocator",[c,b])},getInnerElementFromSplitLocator:function(a){if(!this.emptyLocatorArray(a)&&
a.length==1){var b=this.getImage(a[0]);if(b)return b}return this.Super("getInnerElementFromSplitLocator",arguments)}});if(isc.DynamicForm){isc.DynamicForm.addProperties({getInteriorLocator:function(a){var b=isc.DynamicForm.$mu(a,this);if(!b.item)return this.Super("getInteriorLocator",arguments);var c=[this.getItemLocator(b.item),"/"];if(b.overElement)c[c.length]="element";else if(b.overTitle)c[c.length]="title";else if(b.overTextBox)c[c.length]="textbox";else if(b.overControlTable)c[c.length]="controltable";
else if(b.overIcon)c[c.length]="[icon='"+b.overIcon+"']";return c.join(isc.emptyString)},getItemLocator:function(a){if(a.parentItem&&a.parentItem!=this)return this.getItemLocator(a.parentItem)+"/"+a.parentItem.getItemLocator(a);var b={};if(a.name!=null)b.name=a.name;var c=a.getTitle();if(c!=null)b.title=c;c=a.getValue();if(c!=null)b.value=c;b.index=this.getItems().indexOf(a);b.Class=a.getClassName();return isc.AutoTest.createLocatorFallbackPath("item",b)},containsLocatorChild:function(a){if(isc.isA.DateChooser(a)&&
a.callingForm==this)return true;return this.Super("containsLocatorChild",arguments)},getChildLocator:function(a){if(a.canvasItem){var b=a.canvasItem;return this.getItemLocator(b)+"/canvas"}if(isc.isA.PickListMenu(a)){b=a.formItem;return this.getItemLocator(b)+"/pickList"}if(isc.isA.DateChooser(a)){b=a.callingFormItem;return this.getItemLocator(b)+"/picker"}return this.Super("getChildLocator",arguments)},getItemFromSplitLocator:function(a){a=a[0];var b;if(a.contains("[Class=")){a=a.match('item\\[(.+)\'\\]\\[Class="(.+)"\\]');
a[1].substring(6,a[1].length-2);a=a[0]}if((b=isc.AutoTest.parseLocatorFallbackPath(a))&&b.name=="item"&&b.config!=null){var c=b.config;b=c.Class;var d;if(c.name!=null)d=this.getItem(c.name);else{for(var e=0;e<this.items.length;e++){var f=this.items[e],g=f.locateItemBy;if(g==null)g="title";if(g=="title"&&c.title!=null&&f.title==c.title)d=f;else if(g=="value"&&c.value!=null&&f.getValue()==c.value)d=f}if(d==null){d=c.index;if(isc.isA.String(d)){if(d.startsWith("'")||d.startsWith('"'))d=d.substring(1);
d=parseInt(d)}d=this.items[d]}}if(!d){this.logWarn("AutoTest.getElement(): Unable to find item from locator string:"+a);return null}if(!isc.isA[b]||!isc.isA[b](d))this.logWarn("AutoTest.getElement(): identifier:"+a+" returned an item of class:"+d.getClassName());return d}return null},getInnerElementFromSplitLocator:function(a){if(this.emptyLocatorArray(a))return this.getHandle();var b=this.getItemFromSplitLocator(a);if(b!=null){a.removeAt(0);return b.getInnerElementFromSplitLocator(a)}return this.getHandle()}});
isc.ContainerItem.addProperties({getItemLocator:isc.DynamicForm.getPrototype().getItemLocator,getItemFromSplitLocator:isc.DynamicForm.getPrototype().getItemFromSplitLocator,getInnerElementFromSplitLocator:function(a){if(!this.emptyLocatorArray(a)){var b=this.getItemFromSplitLocator(a);if(b!=null){a.removeAt(0);return b.getInnerElementFromSplitLocator(a)}}return this.Super("getInnerElementFromSplitLocator",arguments)}});isc.FormItem.addProperties({getInnerElementFromSplitLocator:function(a){if(!this.emptyLocatorArray(a)){var b=
a[0];if(b=="element")return this.getDataElement();if(b=="title")return this.form.getTitleCell(this);if(b=="textbox")return this.$15h();if(b=="controltable")return this.$56a();if(b=="canvas")if(this.canvas){a.removeAt(0);return this.canvas.getElementFromSplitLocator(a)}if(b=="picker")if(this.picker){a.removeAt(0);return this.picker.getElementFromSplitLocator(a)}if(b=="pickList"){this.pickList||this.makePickList(false);a.removeAt(0);return this.pickList.getElementFromSplitLocator(a)}if(a=(a=b.match("\\[icon='(.+)'\\]"))?
a[1]:null)return this.$16v(a)}},emptyLocatorArray:isc.Canvas.getPrototype().emptyLocatorArray});isc.HeaderItem.addProperties({locateItemBy:"value"});isc.PickListMenu&&isc.PickListMenu.addProperties({getLocatorParent:function(){if(this.formItem)return this.formItem.form;return this.Super("getLocatorParent",arguments)}})}isc.GridRenderer&&isc.GridRenderer.addProperties({getInteriorLocator:function(a,b){var c=this.getCellFromDomElement(a);if(c==null)return this.Super("getInteriorLocator",[a,b]);return this.getCellLocator(c[0],
c[1])},getCellFromDomElement:function(a){var b=this.getHandle(),c=this.getTableElement();if(!c)return null;for(var d=c.rows,e,f;a&&a!=c&&a!=b;){d=a.tagName;if(d=="td"||d=="TD")f=a;if(d=="tr"||d=="TR")e=a;a=a.parentNode}if(!e||!f)return null;d=c.rows;var g;for(a=0;a<d.length;a++)if(d[a]==e){g=a;break}e=e.cells;var h;for(a=0;a<e.length;a++)if(e[a]==f){h=a;break}return[g+(this.$252||0),h+(this.$254||0)]},getCellLocator:function(a,b){return"row["+a+"]/col["+b+"]"},getInnerElementFromSplitLocator:function(a){if(this.emptyLocatorArray(a))return this.getHandle();
if(a.length==2){var b=this.getCellFromLocator(a[0],a[1]),c=b[0];b=b[1];if(isc.isA.Number(c)&&isc.isA.Number(b)){if(this.$29p())return null;return this.getTableElement(c,b)}}return this.Super("getInnerElementFromSplitLocator",arguments)},getCellFromLocator:function(a,b){a.substring(4,a.length-1);b.substring(4,b.length-1);return[_80,_81]}});if(isc.ListGrid){isc.ListGrid.addProperties({namedLocatorChildren:["header","frozenHeader","body","frozenBody",{attribute:"$286",name:"editRowForm"}]});isc.GridBody.addProperties({getInteriorLocator:function(a,
b){if(b){var c=this.children;if(c!=null&&c.length>0)for(var d=0;d<c.length;d++){var e=c[d];if(e&&e.eventProxy==this){e=e.getHandle();if(e!=null)for(var f=a;f!=this.getHandle()&&f!=null;){if(f==e){c=this.getEventRow();d=this.getEventColumn();return this.getCellLocator(c,d)}f=f.parentNode}}}}return this.Super("getInteriorLocator",arguments)},getCellLocator:function(a,b){var c=this.grid;if(c==null)return this.Super("getCellLocator",arguments);return c.getCellLocator(this,a,b)}});isc.ListGrid.addProperties({getCellLocator:function(a,
b,c){var d=this.getRowLocatorOptions(a,b,c);a=this.getColLocatorOptions(a,b,c);return isc.AutoTest.createLocatorFallbackPath("row",d)+"/"+isc.AutoTest.createLocatorFallbackPath("col",a)},getRowLocatorOptions:function(a,b,c){var d={};c=this.getFieldNumFromLocal(c,a);a=this.getCellRecord(b,c);var e=this.getDataSource();if(a!=null){if(e!=null){e=e.getPrimaryKeyFieldName();if(e!=null&&a[e]!=null)d[e]=a[e]}e=this.getTitleField();if(e!=null&&a[e]!=null)d[e]=a[e];c=this.getFieldName(c);if(c!=null&&a[c]!=
null)d[c]=a[c]}d[isc.AutoTest.fallback_valueOnlyField]=b;return d},getColLocatorOptions:function(a,b,c){b={};a=this.getFieldNumFromLocal(c,a);if(this.isCheckboxField(this.getField(a)))b.isCheckboxField=true;else{a=this.getFieldName(a);if(a!=null)b.fieldName=a}b[isc.AutoTest.fallback_valueOnlyField]=c;return b},getChildFromLocatorSubstring:function(a,b,c){if(a=="frozenBody"||a=="body")if(c.length==b+3&&c[b+1].startsWith("row[")&&c[b+2].startsWith("col["))return null;return this.Super("getChildFromLocatorSubstring",
arguments)},getInnerElementFromSplitLocator:function(a){if(this.emptyLocatorArray(a))return this.getHandle();var b=a[0];if(a.length==3&&(b=="body"||b=="frozenBody")){var c=isc.AutoTest.parseLocatorFallbackPath(a[2]);if(c.name!="col"){this.logWarn("Error parsing locator:"+a.join("")+" returning ListGrid handle");return this.getHandle()}var d=this.getFieldFromColLocatorConfig(c.config);if(d==null){c=parseInt(c.config[isc.AutoTest.fallback_valueOnlyField]);if(b=="frozenBody"&&this.frozenBody==null)b=
"body";b=this[b]}else{c=this.getLocalFieldNum(this.getFieldNum(d));b=this.fieldIsFrozen(d)?this.frozenBody:this.body}if(b==null)return null;d=this.getRowNumFromLocatorConfig(isc.AutoTest.parseLocatorFallbackPath(a[1]).config);if(isc.isA.Number(d)&&isc.isA.Number(c)){if(b.$29p())return null;return b.getTableElement(d,c)}}return this.Super("getInnerElementFromSplitLocator",arguments)},getFieldFromColLocatorConfig:function(a){if(a.isCheckboxField!=null)for(;0<this.fields.length;){if(this.isCheckboxField(this.fields[0]))return this.fields[0];
this.logWarn("AutoTest stored a locator for interaction with checkbox field - but this grid is not showing a checkbox field - recorded test may be invalid.","AutoTest");return-1}else{var b=this.locateColumnsBy;if(b=="fieldName"||b==null){a=a.fieldName;if(a!=null)return this.getField(a)}}},getRowNumFromLocatorConfig:function(a){var b=this.locateRowsBy;if(b==null)b="primaryKey";switch(b){case "primaryKey":b=this.getDataSource();if(b!=null){var c=b.getPrimaryKeyFieldName();if(b!=null&&a[c]!=null)return this.findRowNum(a)}case "titleField":b=
this.getTitleField();if(b!=null&&a[b]!=null)return this.data.findIndex(b,a[b]);case "targetCellValue":for(var d in a)if(d!=isc.AutoTest.fallback_valueOnlyField)if(a[d]!=null)return this.data.findIndex(d,a[d]);default:return parseInt(a[isc.AutoTest.fallback_valueOnlyField])}}})}isc.TreeGrid&&isc.TreeGridBody.addProperties({getInteriorLocator:function(a){var b=a,c=this.getHandle(),d=this.getTableElement();if(!a||!c||!d)return isc.emptyString;d=this.grid.getCanvasName()+this.grid.$34l;for(var e=this.grid.getCanvasName()+
this.grid.$349;a!=this.tableElement&&a!=c&&a.getAttribute;){var f=a.getAttribute("name");if(f){if(f.startsWith(d)){a=parseInt(f.substring(d.length));b=this.grid.getTreeFieldNum();return this.getCellLocator(a,b)+"/open"}if(f.startsWith(e)){a=parseInt(f.substring(e.length));b=this.grid.getTreeFieldNum();return this.getCellLocator(a,b)+"/extra"}}a=a.parentNode}return this.Super("getInteriorLocator",[b])},getInnerElementFromSplitLocator:function(a){if(this.emptyLocatorArray(a))return this.getHandle();
if(a.length==3)if(a[2]=="open"){if(this.$29p())return null;var b=a[0];if(b.charAt(3)!="[")b=parseInt(b.substring(3));else{b=isc.AutoTest.parseLocatorFallbackPath(b);if(b==null||b.name!="row")this.logInfo("Locator appears to be click-in-open-area locator but doesn't contain row/col info? returning null.\n"+a.join("/"),"AutoTest");b=this.grid.getRowNumFromLocatorConfig(b.config)}b=this.grid.$34l+b;if(b=this.grid.getImage(b))return b}else if(a[2]=="extra"){if(this.$29p())return null;b=a[0];if(b.charAt(3)!=
"[")b=parseInt(b.substring(3));else{b=isc.AutoTest.parseLocatorFallbackPath(b);if(b==null||b.name!="row")this.logInfo("Locator appears to be click-in-open-area locator but doesn't contain row/col info? returning null.\n"+a.join("/"),"AutoTest");b=this.grid.getRowNumFromLocatorConfig(b.config)}b=this.grid.$349+b;if(b=this.grid.getImage(b))return b}return this.Super("getInnerElementFromSplitLocator",arguments)},getAutoTestLocatorCoords:function(a,b){var c=this.Super("getAutoTestLocatorCoords",arguments);
if(c==null)return c;var d=this.grid;if(d==null||a.endsWith("open")||a.endsWith("extra"))return c;var e=this.getEventRow(c[1]),f=this.getEventColumn(c[0]);e=d.getRecord(e);if(d.getTreeFieldNum()==d.getFieldNumFromLocal(f,this)&&d.data&&d.data.isFolder(e)){f=d.getOpenAreaWidth(e);d=isc.Element.getElementRect(b);f=d[0]+f;c[0]=f+Math.floor((d[2]-f)/2)}return c}});isc.TabSet&&isc.TabSet.addProperties({containsLocatorChild:function(a){if(this.Super("containsLocatorChild",arguments))return true;if(this.getTabNumber(a)!=
-1)return true;return false},getStandardChildLocator:function(a){var b=this.getTabNumber(a);if(b!=-1){var c=this.getTabObject(b),d={};if(c.ID!=null)d.ID=c.ID;if(c.title!=null)d.title=c.title;d.index=b;return isc.AutoTest.createLocatorFallbackPath("tab",d)}return this.Super("getStandardChildLocator",arguments)},getChildFromLocatorSubstring:function(a){if(a&&a.startsWith("tab[")){var b=isc.AutoTest.parseLocatorFallbackPath(a).config;if(b.ID!=null)return this.getTab(b.ID);var c=this.locateTabsBy;if(c==
null)c="title";if(b.title&&c=="title")return this.getTab(this.tabs.findIndex("title",b.title));return this.getTab(parseInt(b.index))}return this.Super("getChildFromLocatorSubstring",arguments)}});isc.StatefulCanvas&&isc.StatefulCanvas.addProperties({getInnerElementFromSplitLocator:function(a){if(!this.emptyLocatorArray(a)&&this.label)return this.label.getInnerElementFromSplitLocator(a);return this.Super("getInnerElementFromSplitLocator",arguments)}});isc.DateChooser&&isc.DateChooser.addMethods({getInteriorLocator:function(a){var b=
this.getHandle();if(!b||!a)return"";var c=a.$73l;if(c!=null&&c!="")return c;return a.$73l=this.$73m(a,b)},$73m:function(a,b){for(var c=a;c&&c!=null;){if(c==b){c=null;break}if(c.tagName&&c.tagName.toLowerCase()=="td")break;c=c.parentElement}if(c==null)return"";for(var d=b.childNodes,e=[],f=0;f<d.length;f++)!d[f].tagName||d[f].tagName.toLowerCase()!="table"||(e[e.length]=d[f]);f=e.length==2?e[0]:null;e=e.length==2?e[1]:e[0];if(f!=null&&c.offsetParent==f){c=(c=c.onclick)?c.toString():null;if(!c)return"";
if(c.contains("showPrevYear"))return"prevYearButton";else if(c.contains("showNextYear"))return"nextYearButton";else if(c.contains("showPrevMonth"))return"prevMonthButton";else if(c.contains("showNextMonth"))return"nextMonthButton";else if(c.contains("showMonthMenu"))return"monthMenuButton";else if(c.contains("showYearMenu"))return"yearMenuButton";return""}else if(e!=null&&c.offsetParent==e){c=(c=c.onclick)?c.toString():null;if(!c)return"";if(c.contains("cancelClick"))return"cancelButton";else if(c.contains("todayClick"))return"todayButton";
else if((c=c.match("dateClick\\((.*)\\)"))&&c[1]){c=c[1].split(",");for(f=0;f<c.length;f++)c[f]=c[f].trim();return c.join("/")}}return""},getInnerElementFromSplitLocator:function(a){if(this.emptyLocatorArray(a))return this.getHandle();var b=this.getHandle();if(b!=null){if(a.length==3){var c=a[0],d=a[1],e=a[2];if(c==this.year&&(this.month==d||this.month==d+1||this.month==d-1)){var f=new Date(c,d,e),g=f.getDay();if(this.showWeekends||!Date.getWeekendDays().contains(g)){var h=new Date(this.year,this.month,
1);g=h.getDay();g=g+this.firstDayOfWeek-(g<this.firstDayOfWeek?7:0);h.setDate(h.getDate()-g);if(Date.compareDates(f,h)!=1){h=new Date(this.year,this.month+1,1);h.setTime(h.getTime()-864E5);var i=h.getDay(),j=this.firstDayOfWeek+6;if(j>6)j-=7;i=j>i?j-i:j+7-i;i!=0&&h.setTime(h.getTime()+864E5*i);if(Date.compareDates(f,h)!=-1){c=Math.floor((parseInt(e)+g)/7);c+=1;d=this.firstDayOfWeek;if(!this.showWeekends)for(;Date.getWeekendDays().contains(d);){d+=1;if(d==7)d=0}e=f.getDay()-d;if(e<0)e+=7;f=b.childNodes;
for(d=f.length-1;d>=0;d--)if(f[d].tagName&&f[d].tagName.toLowerCase()=="table"){k=f[d];break}if(k)return k.rows[c].cells[e]}else this.logInfo("DateChooser Passed ID for a date after end. end date:"+[h.getFullYear(),h.getMonth(),h.getDay()]+" vs:"+[c,d,e],"AutoTest")}else this.logInfo("DateChooser Passed ID for a date before start date. startDate:"+[h.getFullYear(),h.getMonth(),h.getDay()]+" vs:"+[c,d,e],"AutoTest")}else this.logInfo("DateChooser Passed ID for a weekend - not showing weekends","AutoTest")}else this.logInfo("DateChooser passed ID for the wrong year or month - passed:"+
a+", showing:"+[this.year,this.month],"AutoTest");this.logWarn("DateChooser - passed inner locator for date ("+a.join("/")+") -- not currently showing this date.","AutoTest")}else{c=a[0];if(c=="")return b;d=c=="todayButton";g=!d?c=="cancelButton":false;f=b.childNodes;if(d||g){if(d&&!this.showTodayButton){this.logWarn("DateChooser attempting to locate element for 'todayButton' but showTodayButton is false. Returning handle.","AutoTest");return b}if(g&&!this.showCancelButton){this.logWarn("DateChooser attempting to locate element for 'cancelButton' but showCancelButton is false. Returning handle.",
"AutoTest");return b}var k;for(d=f.length-1;d>=0;d--)if(f[d].tagName&&f[d].tagName.toLowerCase()=="table"){k=f[d];break}k=k.rows[k.rows.length-1].cells}else{if(!this.showHeader){this.logWarn("DateChooser attempting to locate element for "+a+" but this.showHeader is false so this element will not be present. Returning handle.","AutoTest");return b}for(d=0;d<f.length;d++)if(f[d].tagName&&f[d].tagName.toLowerCase()=="table"){e=f[d];break}k=e.rows[0].cells}for(d=0;d<k.length;d++)if(this.getInteriorLocator(k[d])==
c)return k[d]}this.logWarn("DateChooser, unable to find element for inner locator:"+a+" returning handle");return b}}})};isc.AutoTest.customizeCalendar=function(){isc.$755={getRowLocatorOptions:function(a,b){var c=this.Super("getRowLocatorOptions",arguments);c.date=this.creator.chosenDate.toSchemaDate("date");c.minutes=b*30;return c},getRowNumFromLocatorConfig:function(a){var b=this.creator.locateCellsBy;if((b=="date"||b==null)&&a.date!=null){b=isc.Date.parseSchemaDate(a.date);if(!this.showingDate(b)){this.logWarn("Locator for cell in this calendar day-view grid has date stored as:"+
b.toUSShortDate()+", but we're currently showing "+this.creator.chosenDate.toUSShortDate()+". The stored date doesn't map to a visible cell so not returning a cell - if this is not the intended behavior in this test case you may need to set calendar.locateCellsBy to 'index'.","AutoTest");return-1}return parseInt(a.minutes)/30}this.locateRowsBy="index";return this.Super("getRowNumFromLocatorConfig",arguments)},showingDate:function(a){return isc.Date.compareLogicalDates(a,this.creator.chosenDate)==
0}};isc.DaySchedule.addProperties(isc.$755);isc.WeekSchedule.addProperties(isc.$755,{showingDate:function(a){for(var b=0;b<this.fields.length;b++){var c=this.fields[b];if(c.$66a!=null){if(Date.compareLogicalDates(new Date(c.$66a,c.$659,c.$658),a)==0){this.logWarn("does contain date"+a.toShortDate());return true}this.logWarn("date passed in:"+a.toShortDate()+"compared with:"+(new Date(c.$66a,c.$659,c.$658)).toShortDate())}}this.logWarn("doesn't contain date:"+a);return false},getColLocatorOptions:function(a,
b,c){var d=this.Super("getColLocatorOptions",arguments),e=this.getField(this.getFieldNumFromLocal(c,a));if(e&&e.$658!=null)d.date=[e.$66a,e.$659+1,e.$658].join("-");return d},getFieldFromColLocatorConfig:function(a){if((this.locateCellsBy=="date"||this.locateCellsBy==null)&&a.date!=null){var b=a.date.split("-");return this.getFields().find("$658",b[2])}return this.Super("getFieldFromColLocatorConfig",arguments)}});isc.MonthSchedule.addProperties({getRowLocatorOptions:function(a,b,c){var d=this.Super("getRowLocatorOptions",
arguments),e=this.getRecord(b);if(!e)return d;var f=this.getField(c).$66b;d.dayIndex=f;d.date=e["date"+f].toSchemaDate("date");d.isHeaderRow=e["event"+f]==null?true:false;return d},getRowNumFromLocatorConfig:function(a){var b=this.creator.locateCellsBy;if((b=="date"||b==null)&&a.date!=null){b=isc.Date.parseSchemaDate(a.date);for(var c=a.isHeaderRow=="true",d="date"+a.dayIndex,e="event"+a.dayIndex,f=0;f<this.data.length;f++)if(this.data[f][e]==null==c)if(Date.compareLogicalDates(this.data[f][d],b)==
0)return f;return-1}this.locateRowsBy="index";return this.Super("getRowNumFromLocatorConfig",arguments)},getColLocatorOptions:function(a,b,c){var d=this.Super("getColLocatorOptions",arguments);d.dayIndex=this.getField(c).$66b;return d},getColNumFromLocatorConfig:function(a){var b=this.locateCellsBy;if(b==null||b=="date")return this.fields.findIndex("$66b",parseInt(a.dayIndex));this.locateColsBy="index";return this.Super("getColNumFromLocatorConfig",arguments)}});isc.MonthScheduleBody.addProperties({getInteriorLocator:function(a){if(a.tagName.toLowerCase()==
"a"){var b=a.href;if(b!=null){var c=b.match("javascript:.*monthViewEventClick\\((\\d+),(\\d+),(\\d+)\\);");if(c){b=parseInt(c[1]);var d=parseInt(c[2]);c=parseInt(c[3]);b=this.grid.getEvents(b,d)[c];if(b==null){this.logWarn("Unable to determine event associated with apparent event link element -- returning cell");return this.Super("getInteriorLocator",arguments)}b=this.grid.creator.getEventLocatorConfig(b);return isc.AutoTest.createLocatorFallbackPath("eventLink",b)}}}return this.Super("getInteriorLocator",
arguments)},getInnerElementFromSplitLocator:function(a){if(this.emptyLocatorArray(a))return this.getHandle();if(a.length==1&&a[0].startsWith("eventLink")){var b=this.grid.creator.getEventFromLocatorConfig(isc.AutoTest.parseLocatorFallbackPath(a[0]).config),c=this.grid.getEventCell(b);if(c!=null){var d=this.grid.data,e=c[0],f=c[1];c=this.grid.getField(f).$66b;f=this.getTableElement(e,f).getElementsByTagName("A");if(f!=null)for(var g=0;g<f.length;g++){var h=f[g].href;if(h!=null)if((h=h.match("javascript:.*monthViewEventClick\\((\\d+),(\\d+),(\\d+)\\);"))&&
d[e]["event"+c][parseInt(h[3])]==b)return f[g]}}return this.Super("getInnerElementFromSplitLocator",arguments)}}});isc.Calendar.addProperties({getCanvasLocatorFallbackPath:function(a,b){if(a=="eventWindow"){var c=this.getEventLocatorConfig(b.event);return isc.AutoTest.createLocatorFallbackPath("eventWindow",c)}return this.Super("getCanvasLocatorFallbackPath",arguments)},getEventLocatorConfig:function(a){var b={};if(this.dataSource){var c=this.getDataSource().getPrimaryKeyFieldName();b[c]=a[c]}c=this.nameField;
b[c]=a[c];c=this.startDateField;b[c]=a[c].toSchemaDate();c=this.endDateField;b[c]=a[c].toSchemaDate();b.index=this.data.indexOf(a);return b},getChildFromFallbackLocator:function(a,b){var c=b.config;if(b.name=="eventWindow"){var d=this.mainView.getSelectedTab().viewName;if(d=="day")var e=this.dayView.body.children;else if(d=="week")e=this.weekView.body.children;if(e!=null){var f=this.getEventFromLocatorConfig(c);return e.find("event",f)}this.logWarn("unable to find event window associated with event:"+
this.echo(f)+" based on locator string:"+a+". It's possible that this event is not visible in the current view of this Calendar","AutoTest");return null}return this.Super("getChildFromFallbackLocator",arguments)},getEventFromLocatorConfig:function(a){var b=this.locateEventsBy;if(b==null)b="primaryKey";switch(b){case "primaryKey":if(b=this.getDataSource())if((b=b.getPrimaryKeyFieldName())&&a[b]!=null)return this.data[this.data.findByKey(a)];case "name":b=a[this.nameField];if(b!=null)return this.data.find(this.nameField,
b);case "date":b=a[this.startDateField];for(var c=a[this.endDateField],d=0;d<this.data.length;d++){var e=this.data.get(d);if(e!=null){if(e[this.startDateField].toSchemaDate()==b&&e[this.endDateField].toSchemaDate()==c)return e;this.logWarn("attempt to match calendar event by startDate / endDate unable to locate any events. Backing off to index within data array")}}default:return this.data.get(parseInt(a.index))}}})};isc.Calendar&&isc.AutoTest.customizeCalendar();isc.Page.isLoaded()?isc.ApplyAutoTestMethods():
isc.Page.setEvent("load","isc.ApplyAutoTestMethods()");isc.Page.logInfo("SmartClient Core ("+isc.version+" "+isc.buildDate+") initialized: "+(isc.timeStamp()-isc.$d)+"ms");isc.Page.logInfo("document.compatMode: "+document.compatMode);isc.Log.hasFireBug()&&isc.Log.logWarn("NOTE: Firebug is enabled. Firebug greatly slows the performance of applications that make heavy use of JavaScript. Isomorphic highly recommends Firebug for troubleshooting, but Firebug and other development tools should be disabled when assessing the real-world performance of SmartClient applications.");
isc._moduleEnd=isc._Core_end=isc.timestamp?isc.timestamp():(new Date).getTime();isc.Log&&isc.Log.logIsInfoEnabled("loadTime")&&isc.Log.logInfo("Core module init time: "+(isc._moduleEnd-isc._moduleStart)+"ms","loadTime");delete isc.definingFramework}else window.isc&&isc.Log&&isc.Log.logWarn&&isc.Log.logWarn("Duplicate load of module 'Core'.");if(window.isc&&window.isc.module_Core&&!window.isc.module_Foundation){isc.module_Foundation=1;isc._moduleStart=isc._Foundation_start=isc.timestamp?isc.timestamp():(new Date).getTime();if(isc._moduleEnd&&(!isc.Log||isc.Log&&isc.Log.logIsDebugEnabled("loadTime"))){isc._pTM={message:"Foundation load/parse time: "+(isc._moduleStart-isc._moduleEnd)+"ms",category:"loadTime"};if(isc.Log&&isc.Log.logDebug)isc.Log.logDebug(isc._pTM.message,"loadTime");else if(isc._preLog)isc._preLog[isc._preLog.length]=isc._pTM;
else isc._preLog=[isc._pTM]}isc.definingFramework=true;isc.ClassFactory.defineClass("Animation");isc.A=isc.Animation;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.interval=40;isc.A.registry=[];isc.A.animateTime=1E3;isc.B.push(isc.A.smoothStart=function(a){return Math.pow(a,2)},isc.A.smoothEnd=function(a){return 1-Math.abs(Math.pow(a-1,2))},isc.A.smoothStartEnd=function(a){return(-Math.cos(a*Math.PI)+1)/2});isc.B._maxIndex=isc.C+3;isc.A=isc.Animation;
isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$0c="ratio,ID,earlyFinish";isc.B.push(isc.A.generateAnimationID=function(){if(!this.$0d)this.$0d=0;return"_"+this.$0d++},isc.A.timeoutAction=function(){isc.Animation&&isc.Animation.fireTimer()},isc.A.registerAnimation=function(a,b,c,d){if(!this.$0e){this.$0e=isc.Timer.setTimeout(this.timeoutAction,this.interval);this.$0f=isc.timeStamp()}d||(d=this);if(!b)b=this.animateTime;if(isc.isA.String(c)){if(!isc.Animation.accelerationMap)isc.Animation.accelerationMap=
{smoothStart:isc.Animation.smoothStart,smoothEnd:isc.Animation.smoothEnd,smoothStartEnd:isc.Animation.smoothStartEnd};c=isc.Animation.accelerationMap[c]}var e=this.generateAnimationID();this.registry.add({ID:e,target:d,callback:a,duration:b,elapsed:0,totalFrames:Math.round(b/this.interval),currentFrame:0,maxDuration:b*3,acceleration:c});return e},isc.A.clearAnimation=function(a){for(var b=0;b<this.registry.length;b++)if(this.registry[b]&&this.registry[b].ID==a){this.registry.removeAt(b);break}},isc.A.finishAnimation=
function(a){for(var b=0;b<this.registry.length;b++)if(this.registry[b]&&this.registry[b].ID==a){var c=this.registry[b];break}this.clearAnimation(a);c&&this.fireAction(c,1,true)},isc.A.fireTimer=function(){var a=isc.timeStamp(),b=a-this.$0f;this.$0e=isc.Timer.setTimeout(this.timeoutAction,Math.max(0,this.interval-(b-this.interval)));this.$0f=a;for(a=0;a<this.registry.length;a++){var c=this.registry[a];if(c!=null){c.elapsed+=b;var d=c.currentFrame+1;if(!isc.Animation.timeBased&&c.elapsed/c.maxDuration>
d/c.totalFrames)d=Math.min(c.totalFrames,Math.ceil(c.elapsed/c.maxDuration*c.totalFrames));c.currentFrame=d;var e=d=isc.Animation.timeBased?c.elapsed/c.duration:c.currentFrame/c.totalFrames,f=c.acceleration;if(f&&isc.isA.Function(f))try{e=c.acceleration(e)}catch(g){this.logWarn("Custom ratio function for animation:"+isc.Log.echoAll(c)+"\nCaused an error:"+(g.message?g.message:g));c.acceleration=null}if(d>=1){e=1;this.registry[a]=null}f=null;try{f=this.fireAction(c,e)}catch(h){f=h}if(f!=null){this.logWarn("Attempt to fire registered animation:"+
isc.Log.echoAll(c)+"\nCaused an error:"+(f.message?f.message:f));this.registry[a]=null}d>=1&&this.logDebug("animation "+c.ID+" completed","animation")}}this.registry.removeEmpty();if(this.registry.length==0){isc.Timer.clearTimeout(this.$0e);this.$0e=null}},isc.A.fireAction=function(a,b,c){var d=a.target;if(!d||d.destroyed)return"No valid target. Target may have been destroyed since animation commenced";d.fireCallback(a.callback,this.$0c,[b,a.ID,c])},isc.A.isActive=function(){return this.registry&&
this.registry.length>0});isc.B._maxIndex=isc.C+8;isc.A=isc.Canvas.getPrototype();isc.A.animateTime=300;isc.A.animateAcceleration="smoothEnd";isc.A.$0g=["rect","fade","scroll","show","hide"];isc.A.animateShowEffect="wipe";isc.A.animateHideEffect="wipe";isc.A=isc.Canvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$0h={};isc.A.$0i={};isc.A.$0j={};isc.A.$747="Animation";isc.A.$0k={};isc.A.$0l={};isc.A.$743=0;isc.A.$0m="move";isc.A.$nx=
"resize";isc.A.$0n="rect";isc.A.$do="show";isc.A.$0o="slide";isc.A.$0p="wipe";isc.A.$0q="fade";isc.A.$0r="fly";isc.A.$0s="T";isc.A.$0t="L";isc.A.$0u={slide:"show",wipe:"show",fly:"move",fade:"fade"};isc.A.$zb="hide";isc.A.$0v={slide:"hide",wipe:"hide",fly:"move",fade:"fade"};isc.B.push(isc.A.registerAnimation=function(a,b,c){if(!c)c=this.animationAcceleration;if(!b)b=this.animateTime;return isc.Animation.registerAnimation(a,b,c,this)},isc.A.cancelAnimation=function(a){isc.Animation.clearAnimation(a)},
isc.A.getAnimateTime=function(a){if(!isc.isA.String(a)||isc.isAn.emptyString(a))return this.animateTime;this.$0h[a]||(this.$0h[a]="animate"+a.substring(0,1).toUpperCase()+a.substring(1)+"Time");return this[this.$0h[a]]||this.animateTime},isc.A.getAnimateAcceleration=function(a){if(!isc.isA.String(a)||isc.isAn.emptyString(a))return this.animateAcceleration;this.$0i[a]||(this.$0i[a]="animate"+a.substring(0,1).toUpperCase()+a.substring(1)+"Acceleration");return this[this.$0i[a]]||this.animateAcceleration},
isc.A.$0w=function(a){this.$0j[a]||(this.$0j[a]=a+this.$747);return this.$0j[a]},isc.A.$0x=function(a){this.$0k[a]||(this.$0k[a]="fireAnimation"+a.substring(0,1).toUpperCase()+a.substring(1));return this.$0k[a]},isc.A.$0y=function(a,b,c,d){var e=this.$0w(a);this[e]&&this.finishAnimation(a);this.$0l[a]||(this.$0l[a]="$"+a+"AnimationInfo");this[this.$0l[a]]=b;if(c==null)c=this.getAnimateTime(a);if(d==null)d=this.getAnimateAcceleration(a);b=this[e]=this.registerAnimation(this[this.$0x(a)],c,d);this.logIsInfoEnabled("animation")&&
this.logInfo("starting animation "+b+" of type: "+a+", duration: "+c+", acceleration: "+this.echoLeaf(d),"animation");this.$743++;return b},isc.A.$744=function(a){var b=this.$0w(a);if(this[b]){delete this[b];delete this[this.$0l[a]];this.$743--}},isc.A.animationComplete=function(){},isc.A.$0z=function(a,b,c){if(a){var d=this,e=function(){d.fireCallback(a,"earlyFinish",[b]);d.animationComplete(b)};b||c?e():isc.Timer.setTimeout(e,0)}},isc.A.finishAnimation=function(a){if(a==null)for(a=0;a<this.$0g.length;a++)this.finishAnimation(this.$0g[a]);
else{a=this.$0w(a);if(this[a]){if(this.logIsInfoEnabled("animation"))this.logInfo("manual finish for animations: "+this.echoAll(this[a])+(this.logIsDebugEnabled("animation")?this.getStackTrace():""),"animation");isc.Animation.finishAnimation(this[a])}}},isc.A.animateMove=function(a,b,c,d,e){return this.animateRect(a,b,null,null,c,d,e,this.$0m)},isc.A.fireAnimationMove=function(a,b,c){return this.fireAnimationRect(a,b,c,this.$0m)},isc.A.animateResize=function(a,b,c,d,e){return this.animateRect(null,
null,a,b,c,d,e,this.$nx)},isc.A.fireAnimationResize=function(a,b,c){return this.fireAnimationRect(a,b,c,this.$nx)},isc.A.animateRect=function(a,b,c,d,e,f,g,h){if(h==null){h=this.$0n;this.resizeAnimation!=null&&this.finishAnimation(this.$nx);this.moveAnimation!=null&&this.finishAnimation(this.$0m)}a={$00:this.getRect(),_left:a,_top:b,$02:c,$o8:d,$03:e};return this.$0y(h,a,f,g)},isc.A.fireAnimationRect=function(a,b,c,d){b=d==this.$nx?this.$resizeAnimationInfo:d==this.$0m?this.$moveAnimationInfo:this.$rectAnimationInfo;
var e=b.$00,f=b._left,g=b._top,h=b.$02,i=b.$o8,j=f!=null?this.$04(e[0],f,a):null,k=g!=null?this.$04(e[1],g,a):null,l,m;if(h!=null&&j!=null&&f-e[0]!=0){f=(h-e[2])/(f-e[0]);if(Math.floor(f)==f)l=e[2]+f*(j-e[0])}if(i!=null&&k!=null&&g-e[1]!=0){f=(i-e[3])/(g-e[1]);if(Math.floor(f)==f)m=e[3]+f*(k-e[1])}if(l==null&&h!=null)l=this.$04(e[2],h,a);if(m==null&&i!=null)m=this.$04(e[3],i,a);if(a==1){if(d==null)d="rect";this.$744(d)}this.setRect(j,k,l,m,a<1);this.isDirty()&&this.redraw("animated resize");a==1&&
this.$0z(b.$03,c)},isc.A.$04=function(a,b,c){if(b==null)return a;return a+Math.floor(c*(b-a))},isc.A.animateFade=function(a,b,c,d){if(this.isDrawn()){if(this.visibility==isc.Canvas.HIDDEN){this.setOpacity(0);this.show()}if(a==null)a=100;return this.$0y("fade",{$05:this.opacity!=null?this.opacity:100,$06:a,$03:b},c,d)}else{this.setOpacity(a);this.$0z(b,true)}},isc.A.fireAnimationFade=function(a,b,c){b=this.$fadeAnimationInfo;var d=this.$04(b.$05,b.$06,a);if(isc.Browser.isIE&&d>0&&!b.$07){var e=this.getStyleHandle();
if(e){e.visibility=isc.Canvas.VISIBLE;e.visibility=isc.Canvas.INHERIT}var f=this.peers;if(f&&f.length>0)for(var g=0;g<f.length;g++)if(f[g].$nt)if(e=f[g].getStyleHandle()){e.visibility=isc.Canvas.VISIBLE;e.visibility=isc.Canvas.INHERIT}b.$07=true}a==1&&this.$744("fade");this.setOpacity(d,a<1);a==1&&this.$0z(b.$03,c)},isc.A.animateScroll=function(a,b,c,d,e){if(this.overflow!=isc.Canvas.VISIBLE)return this.$0y("scroll",{$08:this.getScrollLeft(),$09:this.getScrollTop(),$1a:a,$1b:b,$03:c},d,e)},isc.A.fireAnimationScroll=
function(a,b,c){b=this.$scrollAnimationInfo;var d=b.$09,e=b.$1b,f=this.$04(b.$08,b.$1a,a);d=this.$04(d,e,a);a==1&&this.$744("scroll");this.scrollTo(f,d,null,a<1);a==1&&b.$03&&this.$0z(b.$03,c)},isc.A.animateShow=function(a,b,c,d){if(a==null)a=this.animateShowEffect;var e;if(isc.isAn.Object(a)){e=a;a=a.effect}this.$va!=null&&this.finishAnimation(this.$va);if(!(this.isDrawn()&&this.isVisible()))if(this.$vc==null){if(!this.isDrawn())if(this.parentElement&&!this.parentElement.isDrawn()){this.show();this.logInfo("not animating show, component not drawn",
"animation");this.animateShowComplete(true);return}else this.draw();this.$vc=this.$0u[a]||this.$do;this.$1c=b;if(!this.$1d)this.$1d={target:this,methodName:"animateShowComplete"};if(a==this.$0q){a=this.opacity;this.$1e=b;this.setOpacity(0);this.show();if(c==null)c=this.animateShowTime;if(d==null)d=this.animateShowAcceleration;return this.animateFade(a,this.$1d,c,d)}else if(a==this.$0r)if(this.parentElement!=null){this.logInfo("animateShow() called with 'fly' effect - not supported for child widgets defaulting to standard 'wipe' animation instead.",
"animation");a=this.$0p}else{if(c==null)c=this.animateShowTime;if(d==null)d=this.animateShowAcceleration;b=this.isRTL();a=this.getLeft();b=b?isc.Page.getWidth()+isc.Page.getScrollLeft():0-this.getVisibleWidth();this.$58w=this._percent_left;this.setLeft(b);this.show();return this.animateMove(a,null,this.$1d,c,d)}if(this.$1f(a)){this.isVisible()&&this.hide();b=this.getVisibleHeight();var f=this.getVisibleWidth();var g=(e=e?e.startFrom==this.$0s:true)?this.getScrollTop():this.getScrollLeft(),h=a=="slide";
a={$po:this.$po,$1g:this.getHeight(),$1h:b,$pn:this.$pn,$1i:this.getWidth(),$1j:f,$58x:this._percent_width,$58y:this._percent_height,$1k:this.overflow,$1l:e,$1m:g,$1n:h,$03:this.$1d};if(e){if(this.vscrollOn&&this.vscrollbar){a.$495=this.vscrollbar.thumb.getTop();a.$496=this.vscrollbar.thumb.getHeight();if(this.vscrollbar.thumb){this.vscrollbar.thumb.$jq=false;this.vscrollbar.thumb.$493=true}this.vscrollbar.$494=true;this.vscrollbar.$493=true;this.vscrollbar.setHeight(1)}if(this.hscrollOn&&this.hscrollbar){this.hscrollbar.$493=
true;if(this.hscrollbar.thumb)this.hscrollbar.thumb.$493=true;if(a.$1n){this.hscrollbar.setTop(this.getTop());this.hscrollbar.setHeight(1)}else this.hscrollbar.$jq=false}}else{if(this.hscrollOn&&this.hscrollbar){a.$495=this.hscrollbar.thumb.getLeft();a.$496=this.hscrollbar.thumb.getWidth();this.hscrollbar.$494=true;this.hscrollbar.$493=true;if(this.hscrollbar.thumb){this.hscrollbar.thumb.$jq=false;this.hscrollbar.thumb.$493=true}this.hscrollbar.setWidth(1)}if(this.vscrollOn&&this.vscrollbar){this.vscrollbar.$493=
true;if(this.vscrollbar.thumb)this.vscrollbar.thumb.$493=true;if(a.$1n){this.vscrollbar.setLeft(this.getLeft());this.vscrollbar.setWidth(1)}else this.vscrollbar.$jq=false}}if(this.showEdges&&this.$l0)this.$l0.$za=true;this.overflow==isc.Canvas.VISIBLE&&this.setOverflow(isc.Canvas.HIDDEN);if(this.overflow==isc.Canvas.AUTO||this.overflow==isc.Canvas.SCROLL)this.$417=true;this.resizeTo(e?f:1,e?1:b,true);if(h)this.scrollTo(e?null:g+(f-1),e?g+(b-1):null);if(this.showEdges&&this.$l0){e?this.$u9(this.$l0.getHandle().firstChild.style,
"height",b):this.$u9(this.$l0.getHandle().firstChild.style,"width",f);this.$l0.setOverflow(isc.Canvas.HIDDEN);if(h)if(e){b=this.$l0.$td;this.$u9(this.getStyleHandle(),"marginTop",this.getTopMargin()-b)}else{b=this.$l0.$tb;this.$u9(this.getStyleHandle(),"marginLeft",this.getLeftMargin()-b)}this.$l0.show()}else{b=e?this.hscrollOn?this.hscrollbar:null:this.vscrollOn?this.vscrollbar:null;f=e?this.vscrollOn?this.vscrollbar:null:this.hscrollOn?this.hscrollbar:null;if(b&&a.$1n){b.show();f&&f.show()}else this.show()}return this.$0y(this.$do,
a,c,d)}else{this.logInfo("not animating show, can't do clip animations","animation");this.show();this.animateShowComplete(true)}}},isc.A.fireAnimationShow=function(a,b,c){b=this.$showAnimationInfo;var d=b.$1l;if(a<1){var e=d?b.$1h:b.$1j,f=this.$04(1,e,a);c=e-f;a=this.showEdges&&this.$l0;var g,h;if(a){g=b.$1n?d?this.$l0.$te:this.$l0.$tc:d?this.$l0.$td:this.$l0.$tb;h=b.$1n?d?this.$l0.$td:this.$l0.$tb:d?this.$l0.$te:this.$l0.$tc;this.$l0.resizeTo(d?null:f,d?f:null,true);if(b.$1n)d?this.$l0.scrollToBottom():
this.$l0.scrollToRight();if(f<g)return;if(c<=h){if(b.$1n){h=d?"marginTop":"marginLeft";var i=d?this.getTopMargin()-c:this.getLeftMargin()-c;this.$u9(this.getStyleHandle(),h,i);this.scrollTo(d?null:b.$1m,d?b.$1o:null,null,true)}return}if(!this.isVisible()){this.$vd=true;this.show();delete this.$vd}}g=d?this.hscrollOn:this.vscrollOn;if(d?this.vscrollOn:this.hscrollOn){var j;if(d)(j=this.vscrollbar)&&j.resizeTo(null,f);else{j=this.hscrollbar;var k=f;if(this.vscrollOn)if(b.$1n)k-=this.scrollbarSize;else k=
Math.min(f,e-this.scrollbarSize);k>0&&j&&j.resizeTo(k,null)}if(b.$1n&&j)d?j.scrollToBottom():j.scrollToRight();if(j&&j.thumb){e=j.thumb;if(b.$1n){j=b.$495-c;k=j+Math.min(f,b.$496);var l=d?this.getTop():this.getLeft();if(!(k<=l)){j=Math.max(l,j);k=Math.min(k-j,f);e.resizeTo(d?null:k,d?k:null);d?e.scrollToBottom():e.scrollToRight();e.moveTo(d?null:j,d?j:null);e.isVisible()||e.show()}}else{j=b.$495;k=Math.min(j+b.$496,d?this.getTop()+f:this.getLeft()+f);if(!((d?this.getTop():this.getLeft())+f<=j)){d?
e.setHeight(k-j):e.setWidth(k-j);e.isVisible()||e.show()}}}}e=0;if(g&&i){i=d?this.hscrollbar:this.vscrollbar;if(b.$1n){g=d?this.getTop()+Math.max(0,f-this.scrollbarSize):this.getLeft()+Math.max(0,f-this.scrollbarSize);i.moveTo(d?null:g,d?g:null);g=Math.min(f,this.scrollbarSize);i.resizeTo(d?null:g,d?g:null);if(d){i.scrollToBottom();i.thumb&&i.thumb.scrollToBottom()}else{i.scrollToRight();i.thumb&&i.thumb.scrollToRight()}if(f>this.scrollbarSize&&!this.isVisible()){this.$vd=true;this.show();delete this.$vd}}else if(c<=
this.scrollbarSize){i.isVisible()||i.show();i.resizeTo(d?null:this.scrollbarSize-c,d?this.scrollbarSize-c:null)}e=i.isVisible()?this.scrollbarSize-(d?i.getHeight():i.getWidth()):this.scrollbarSize}i=f;if(a)i+=h;if(e)i+=e;this.resizeTo(d?null:i,d?i:null,true)||this.$5y();if(b.$1n)this.scrollTo(d?null:b.$1m+c,d?b.$1m+c:null,null,true)}else{this.isVisible()||this.show();this.$744("show");this.setOverflow(b.$1k);if(this.overflow==isc.Canvas.AUTO||this.overflow==isc.Canvas.SCROLL){delete this.$417;if(this.vscrollOn&&
this.vscrollbar){this.vscrollbar.visibility==isc.Canvas.HIDDEN&&this.vscrollbar.show();d&&delete this.vscrollbar.$494;delete this.vscrollbar.$493;this.vscrollbar.$jq=true;b.$1n&&this.vscrollbar.scrollTo(0,0);if(this.vscrollbar.thumb){delete this.vscrollbar.thumb.$493;this.vscrollbar.thumb.$jq=true;b.$497&&this.vscrollbar.thumb.scrollTo(0,0)}if(!d){this.vscrollbar.setWidth(this.getScrollbarSize());this.vscrollbar.setThumb()}}if(this.hscrollOn&&this.hscrollbar){this.hscrollbar.visibility==isc.Canvas.HIDDEN&&
this.hscrollbar.show();if(d){this.hscrollbar.setHeight(this.getScrollbarSize());this.hscrollbar.setThumb()}else delete this.hscrollbar.$494;delete this.hscrollbar.$493;this.hscrollbar.$jq=true;b.$1n&&this.hscrollbar.scrollTo(0,0);if(this.hscrollbar.thumb){delete this.hscrollbar.thumb.$493;this.hscrollbar.thumb.$jq=true;b.$1n&&this.hscrollbar.thumb.scrollTo(0,0)}}}if(this.showEdges&&this.$l0){if(b.$1n){h=d?"marginTop":"marginLeft";i=d?this.getTopMargin():this.getLeftMargin();this.$u9(this.getStyleHandle(),
h,i);this.$l0.scrollTo(d?null:0,d?0:null)}if(d)this.$l0.getHandle().firstChild.style.height="100%";else this.$l0.getHandle().firstChild.style.width="100%";this.$l0.setOverflow(isc.Canvas.VISIBLE);delete this.$l0.$za}this.resizeTo(b.$1i,b.$1g)||this.$5y();this.$pn=b.$pn;this.$po=b.$po;this._percent_width=b.$58x;this._percent_height=b.$58y;if(b.$1n)this.scrollTo(d?null:b.$1m,d?b.$1m:null);b.$03&&this.$0z(b.$03,c)}},isc.A.animateShowComplete=function(a){if(this.$58w!=null){this._percent_left=this.$58w;
delete this.$58w}this.$vc=null;var b=this.$1c;this.$1c=null;b&&this.$0z(b,a,true)},isc.A.$1f=function(){if(this.canAnimateClip!=null)return this.canAnimateClip;return this.scrollTo==isc.Canvas.getInstanceProperty("scrollTo")},isc.A.animateHide=function(a,b,c,d,e){if(a==null)a=this.animateHideEffect;var f;if(isc.isAn.Object(a)){f=a;a=f.effect}this.$vc!=null&&this.finishAnimation(this.$vc);if(this.isVisible())if(this.$va==null)if(!this.isDrawn()&&!isc.isA.LayoutSpacer(this)){this.hide();b&&this.$0z(b,
true)}else{this.$va=this.$0v[a]||this.$zb;this.$1p=b;if(!this.$1q)this.$1q={target:this,methodName:"$1r"};if(a==this.$0q){this.$1s=this.opacity;this.$1t=true;if(c==null)c=this.animateHideTime;if(d==null)d=this.animateHideAcceleration;return this.animateFade(0,this.$1q,c,d,e)}else if(a==this.$0r){this.$1u=this.getLeft();this.$58z=this._percent_left;if(this.parentElement!=null){this.logInfo("animateHide() called with 'fly' effect - not supported for child widgets defaulting to standard 'wipe' animation instead.",
"animation");a=this.$0p}else{if(c==null)c=this.animateShowTime;if(d==null)d=this.animateShowAcceleration;return this.animateMove(this.isRTL()?isc.Page.getWidth()+isc.Page.getScrollLeft():0-this.getVisibleWidth(),null,this.$1q,c,d,e)}}if((!this.$1f(a)||!this.isDrawn())&&!this.isA(isc.LayoutSpacer)){this.logInfo("not animating hide, can't do clip animations","animation");this.hide();this.$1r(true)}else{b=this.getVisibleHeight();var g=this.getVisibleWidth();f=f?f.endAt==this.$0s:true;a={$po:this.$po,
$1g:this.getHeight(),$1h:b,$pn:this.$pn,$1i:this.getWidth(),$1j:g,$1m:f?this.getScrollTop():this.getScrollLeft(),$1l:f,$1v:a=="slide",$1k:this.overflow,$03:this.$1q,$1w:e};if(a.$1v)if(f&&this.vscrollOn&&this.vscrollbar){a.$495=this.vscrollbar.thumb.getTop();a.$496=this.vscrollbar.thumb.getHeight()}else if(!f&&this.hscrollOn&&this.hscrollbar){a.$495=this.hscrollbar.thumb.getLeft();a.$496=this.hscrollbar.thumb.getWidth()}this.resizeTo(g,b,true);this.overflow==isc.Canvas.VISIBLE&&this.setOverflow(isc.Canvas.HIDDEN);
if(this.overflow==isc.Canvas.AUTO||this.overflow==isc.Canvas.SCROLL){this.$417=true;if(this.vscrollOn&&this.vscrollbar){this.vscrollbar.$jq=false;if(f)this.vscrollbar.$494=true;this.vscrollbar.$493=true;if(this.vscrollbar.thumb)this.vscrollbar.thumb.$493=true}if(this.hscrollOn&&this.hscrollbar){this.hscrollbar.$jq=false;if(!f)this.hscrollbar.$494=true;this.hscrollbar.$493=true;if(this.hscrollbar.thumb)this.hscrollbar.thumb.$493=true}}if(this.showEdges){this.$l0.setOverflow("hidden");this.$l0.$za=
true;this.$u9(this.$l0.getHandle().firstChild.style,f?"height":"width",f?this.$l0.getHeight():this.$l0.getWidth())}return this.$0y(this.$zb,a,c,d)}}},isc.A.fireAnimationHide=function(a,b,c){b=this.$hideAnimationInfo;var d=b.$1l;if(a<1){var e=d?b.$1h:b.$1j,f=this.$04(e,1,a);c=e-f;a=this.showEdges&&this.$l0;var g,h,i=this.hscrollOn&&this.hscrollbar,j=this.vscrollOn&&this.vscrollbar;if(a){g=b.$1v?d?this.$l0.$td:this.$l0.$tb:d?this.$l0.$te:this.$l0.$tc;h=b.$1v?d?this.$l0.$te:this.$1x.$tc:d?this.$l0.$td:
this.$l0.$tb;this.$l0.resizeTo(d?null:f,d?f:null,true);if(b.$1v)d?this.$l0.scrollToBottom():this.$l0.scrollToRight();if(c<g){if(b.$1v){var k=d?"marginTop":"marginLeft",l=d?this.getTopMargin():this.getLeftMargin();this.$u9(this.getStyleHandle(),k,l-c)}this.$5y();return}if(b.$1v&&!this.$1y){k=d?"marginTop":"marginLeft";l=d?this.getTopMargin():this.getLeftMargin();this.$u9(this.getStyleHandle(),k,l-g);this.$1y=true}if(a&&f<=h){this.$vb=true;this.getStyleHandle().visibility=isc.Canvas.HIDDEN;delete this.$vb}}if(k=
d?j?this.vscrollbar:null:i?this.hscrollbar:null){if(d)k.setHeight(f);else{l=f;if(this.vscrollOn)if(b.$1v)l-=this.scrollbarSize;else l=Math.min(f,e-this.scrollbarSize);l>0?k.setWidth(l):k.hide()}if(b.$1v)d?k.scrollToBottom():k.scrollToRight();if(k.thumb&&k.thumb.isVisible())if(b.$1v){e=b.$495-c;l=d?this.getTop():this.getLeft();if(e>=l)k.thumb.moveTo(d?null:e,d?e:null);else{k.thumb.moveTo(d?null:this.getLeft(),d?this.getTop():null);h=b.$496+(e-l);if(h>0){k.thumb.resizeTo(d?null:h,d?h:null);k.thumb.scrollTo(d?
null:l-e,d?l-e:null)}else k.thumb.hide()}}else if(d){e=this.getTop()+f;if(k.thumb.getBottom()>e){e=e-k.thumb.getTop();e>0?k.thumb.setHeight(e):k.thumb.hide()}}else{e=this.getLeft()+f;if(k.thumb.getRight()>e){e=e-k.thumb.getLeft();e>0?k.thumb.setWidth(e):k.thumb.hide()}}}i=d?i?this.hscrollbar:null:j?this.vscrollbar:null;j=0;if(i){j=this.scrollbarSize;if(b.$1v){if(f>=j){k=(d?this.getTop():this.getLeft())+f-j;i.moveTo(d?null:k,d?k:null)}else{i.moveTo(d?null:this.getLeft(),d?this.getTop():null);i.resizeTo(d?
null:f,d?f:null);d?i.scrollToBottom():i.scrollToRight();if(k=i.thumb){k.resizeTo(d?null:f,d?f:null);d?k.scrollToBottom():k.scrollToRight()}}if(f<=j){this.$vb=true;this.isVisible()&&this.hide();delete this.$vb;return}}else if(c<=j){i.resizeTo(d?null:j-c,d?j-c:null);if(i.thumb)i.thumb.resizeTo(d?null:j-c,d?j-c:null)}else i.isVisible()&&i.hide();j=i.isVisible()?this.scrollbarSize-(d?i.getHeight():i.getWidth()):this.scrollbarSize}f=f;if(a)f+=g;if(j)f+=j;this.resizeTo(d?null:f,d?f:null,true)||this.$5y();
if(b.$1v)this.scrollTo(d?null:b.$1m+c,d?b.$1m+c:null,null,true)}else{this.$744("hide");this.isVisible()&&this.hide();b.$1k&&this.setOverflow(b.$1k);if(this.showEdges&&this.$l0){delete this.$1y;this.$l0.setOverflow(isc.Canvas.VISIBLE);delete this.$l0.$za;if(d)this.$l0.getHandle().firstChild.style.height="100%";else this.$l0.getHandle().firstChild.style.width="100%";if(b.$1v){g=this.$sd();k=d?"marginTop":"marginLeft";l=d?g.top:g.left;this.$u9(this.getStyleHandle(),k,l)}}if(this.overflow==isc.Canvas.AUTO||
this.overflow==isc.Canvas.SCROLL){delete this.$417;if(d){if(this.vscrollOn&&this.vscrollbar){this.vscrollbar.isVisible()&&this.vscrollbar.hide();delete this.vscrollbar.$494;delete this.vscrollbar.$493;this.vscrollbar.$jq=true;this.vscrollbar.thumb&&delete this.vscrollbar.thumb.suppressImageResize;if(b.$1v){this.vscrollbar.scrollTo(0,0);this.vscrollbar.setHeight(this.getHeight());this.vscrollbar.thumb&&this.vscrollbar.thumb.scrollTo(0,0)}}if(this.hscrollOn&&this.hscrollbar){this.hscrollbar.isVisible()&&
this.hscrollbar.hide();this.hscrollbar.$jq=true;delete this.hscrollbar.$493;b.$1v&&this.hscrollbar.scrollTo(0,0);if(this.hscrollbar.thumb){delete this.hscrollbar.thumb.$493;b.$1v&&this.hscrollbar.thumb.scrollTo(0,0)}}}else{if(this.hscrollOn&&this.hscrollbar){this.hscrollbar.isVisible()&&this.hscrollbar.hide();delete this.hscrollbar.$494;delete this.hscrollbar.$493;this.hscrollbar.$jq=true;this.hscrollbar.thumb&&delete this.hscrollbar.$493;if(b.$1v){this.hscrollbar.scrollTo(0,0);this.hscrollbar.setWidth(this.getWidth());
this.hscrollbar.thumb&&this.hscrollbar.thumb.scrollTo(0,0)}}if(this.vscrollOn&&this.vscrollbar){this.vscrollbar.isVisible()&&this.vscrollbar.hide();this.vscrollbar.$jq=true;delete this.vscrollbar.$493;b.$1v&&this.vscrollbar.scrollTo(0,0);if(this.vscrollbar.thumb){b.$1v&&this.vscrollbar.thumb.scrollTo(0,0);delete this.vscrollbar.$493}}}}this.resizeTo(b.$1i,b.$1g);this.$po=b.$po;this.$pn=b.$pn;if(b.$1v)this.scrollTo(d?null:b.$1m,d?b.$1m:null);b.$03&&this.$0z(b.$03,c,true)}},isc.A.$1r=function(a){delete this.$va;
var b=this.$1p;delete this.$1p;this.isVisible()&&this.hide();if(this.$1t){this.setOpacity(this.$1s);delete this.$1s;delete this.$1t}if(this.$1u!=null){this.setLeft(this.$1u);delete this.$1u}if(this.$58z!=null){this._percent_left=this.$58z;delete this.$58z}b&&this.$0z(b,a,true)},isc.A.isAnimating=function(a){if(a==null)return this.$743>0;if(a&&!isc.isAn.Array(a)){if(!this.$745)this.$745=[];this.$745[0]=a;a=this.$745}if(!a)a=this.$0g;for(var b=0;b<a.length;b++)if(this[this.$0w(a[b])]!=null)return true;
return false});isc.B._maxIndex=isc.C+30;isc.ClassFactory.defineClass("StatefulCanvas","Canvas");isc.A=isc.StatefulCanvas;isc.A.STATE_UP="";isc.A.STATE_DOWN="Down";isc.A.STATE_OVER="Over";isc.A.STATE_DISABLED="Disabled";isc.A.BUTTON="button";isc.A.CHECKBOX="checkbox";isc.A.RADIO="radio";isc.A.FOCUSED="Focused";isc.A.SELECTED="Selected";isc.A.UNSELECTED="";isc.A.$1z={};isc.A=isc.StatefulCanvas.getPrototype();isc.A.state="";isc.A.showFocusedAsOver=true;isc.A.showDisabled=true;isc.A.actionType="button";
isc.A.cursor=isc.Canvas.ARROW;isc.A.capSize=0;isc.A.align=isc.Canvas.CENTER;isc.A.valign=isc.Canvas.CENTER;isc.A.autoFitDirection=isc.Canvas.BOTH;isc.A.iconSize=16;isc.A.iconOrientation="left";isc.A.iconSpacing=6;isc.A.showIconState=true;isc.A.showDisabledIcon=true;isc.A.overCanvasConstructor="Canvas";isc.A.overCanvasDefaults={mouseOut:function(){isc.EH.getTarget()!=this.creator&&this.clear();return this.Super("mouseOut",arguments)}};isc.A=isc.StatefulCanvas.getPrototype();isc.B=isc._allFuncs;isc.C=
isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$42d="visualState";isc.A.$54k="SelectedFocused";isc.A.labelDefaults={$kk:function(){return this.masterElement.$kk()},focusChanged:function(){this.hasFocus&&this.eventProxy.focus()},getContents:function(){return this.masterElement.getTitleHTML()},adjustOverflow:function(a,b,c,d){this.invokeSuper(null,"adjustOverflow",a,b,c,d);this.masterElement.$10()}};isc.A.$11="label";isc.A.$12="Label overflowed.";isc.A.$64x="$5y";isc.B.push(isc.A.initWidget=
function(){if(this.src==null)this.src=this.vertical?this.vSrc:this.hSrc;if(this.isDisabled()){this.$42e=this.state;if(this.showDisabled)this.state=isc.StatefulCanvas.STATE_DISABLED}this.baseStyle=this.baseStyle||this.className;this.className=this.styleName=this.suppressClassName?null:this.getStateName();if(this.radioGroup!=null){var a=this.radioGroup;this.radioGroup=null;this.addToRadioGroup(a)}this.setAutoFit(this.autoFit,true);this.shouldShowLabel()&&this.makeLabel()},isc.A.shouldShowLabel=function(){return this.showTitle},
isc.A.stateChanged=function(){if(!this.destroyed){this.logIsDebugEnabled(this.$42d)&&this.logDebug("state changed to: "+this.getStateName(),"visualState");this.redrawOnStateChange&&this.markForRedraw("state change");this.suppressClassName||this.setClassName(this.getStateName());var a=this.label;if(a!=null){a.setState(this.getState());a.setSelected(this.isSelected());a.setCustomState(this.getCustomState())}}},isc.A.setBaseStyle=function(a){this.baseStyle=a;this.label&&this.titleStyle==null&&this.label.setBaseStyle(a);
this.stateChanged()},isc.A.setTitleStyle=function(a){this.titleStyle=a;if(this.label)this.label.setBaseStyle(a||this.baseStyle);this.stateChanged()},isc.A.setState=function(a){if(this.state!=a){this.state=a;this.stateChanged()}},isc.A.$sn=function(){this.Super("$sn",arguments);this.setHandleDisabled(this.isDisabled())},isc.A.getState=function(){return this.state},isc.A.setSelected=function(a){if(this.selected!=a){if(a&&this.radioGroup!=null){var b=isc.StatefulCanvas.$1z[this.radioGroup];if(b==null)this.logWarn("'radioGroup' property set for this widget, but no corresponding group exists. To set up a new radioGroup containing this widget, or add this  widget to an existing radioGroup at runtime, call 'addToRadioGroup(groupID)'");
else for(var c=0;c<b.length;c++)b[c]!=this&&b[c].isSelected()&&b[c].setSelected(false)}this.selected=a;this.label&&this.label.setSelected(this.isSelected());this.stateChanged()}},isc.A.select=function(){this.setSelected(true)},isc.A.deselect=function(){this.setSelected(false)},isc.A.isSelected=function(){return this.selected},isc.A.getActionType=function(){return this.actionType},isc.A.setActionType=function(a){a==isc.StatefulCanvas.BUTTON&&this.isSelected()&&this.setSelected(false);this.actionType=
a},isc.A.addToRadioGroup=function(a){if(!(a==null||this.radioGroup==a)){this.radioGroup!=null&&this.removeFromRadioGroup();this.radioGroup=a;if(isc.StatefulCanvas.$1z[this.radioGroup]==null)isc.StatefulCanvas.$1z[this.radioGroup]=[this];else isc.StatefulCanvas.$1z[this.radioGroup].add(this)}},isc.A.removeFromRadioGroup=function(a){if(!(this.radioGroup==null||a!=null&&a!=this.radioGroup)){isc.StatefulCanvas.$1z[this.radioGroup].remove(this);delete this.radioGroup}},isc.A.setHandleDisabled=function(a,
b,c,d){this.invokeSuper(isc.StatefulCanvas,"setHandleDisabled",a,b,c,d);if(this.showDisabled)if(this.state==isc.StatefulCanvas.STATE_DISABLED!=a)if(a==false){this.$13&&this.setCursor(this.$13);this.setState(this.$42e||isc.StatefulCanvas.STATE_UP)}else{this.$13=this.cursor;this.setCursor(isc.StatefulCanvas.ARROW);this.$42e=this.state;this.setState(isc.StatefulCanvas.STATE_DISABLED)}},isc.A.getStateName=function(){var a=this.getStateSuffix();if(a)return this.baseStyle+a;return this.baseStyle},isc.A.getStateSuffix=
function(){var a=this.getState(),b=this.isSelected()?isc.StatefulCanvas.SELECTED:null,c=this.getFocusedState()?isc.StatefulCanvas.FOCUSED:null,d=this.getCustomState();return this.$61l(a,b,c,d)},isc.A.$61l=function(a,b,c,d){var e;if(b||c)e=b&&c?this.$54k:b?b:c;return d?e?a?e+a+d:e+d:a?a+d:d:e?a?e+a:e:a},isc.A.setCustomState=function(a){if(a!=this.customState){this.customState=a;this.stateChanged()}},isc.A.getCustomState=function(){return this.customState},isc.A.getPrintStyleName=function(){return this.printStyleName||
this.getStateName()},isc.A.makeLabel=function(){var a=this.label=this.getAutoChildClass(this.$11,null,isc.Label).createRaw();a.align=this.align;a.valign=this.valign;a.$jo=false;a.$jp=false;a._redrawWithParent=false;a.icon=this.icon;a.iconWidth=this.iconWidth;a.iconHeight=this.iconHeight;a.iconSize=this.iconSize;a.iconOrientation=this.iconOrientation;a.iconAlign=this.iconAlign;a.iconSpacing=this.iconSpacing;a.showDownIcon=this.showDownIcon;a.showSelectedIcon=this.showSelectedIcon;a.showRollOverIcon=
this.showRollOverIcon;a.showFocusedIcon=this.showFocusedIcon;a.showDisabledIcon=this.showDisabledIcon;if(this.showIconState!=null)a.showIconState=this.showIconState;a.getFocusedState=function(){var b=this.masterElement;if(b&&b.getFocusedState)return b.getFocusedState()};a.skinImgDir=this.labelSkinImgDir||this.skinImgDir;a.waiRole=this.waiRole;a.baseStyle=this.titleStyle||this.baseStyle;a.state=this.getState();a.customState=this.getCustomState();a.getPrintStyleName=function(){return this.masterElement.getPrintStyleName()};
a.overflow=this.overflow;a.width=this.$15();a.height=this.$16();a.left=this.$17();a.top=this.$18();a.wrap=this.wrap!=null?this.wrap:this.vertical;a.eventProxy=this;a.isMouseTransparent=true;a.zIndex=this.getZIndex(true)+1;a.tabIndex=-1;this.$d3(this.$11,a);this.label.setSelected(this.isSelected());this.addPeer(this.label,null,null,true)},isc.A.setLabelSkinImgDir=function(a){this.labelSkinImgDir=a;this.label!=null&&this.label.setSkinImgDir(a)},isc.A.setSkinImgDir=function(a){this.Super("setSkinImgDir",
arguments);this.labelSkinImgDir==null&&this.label!=null&&this.label.setSkinImgDir(a)},isc.A.setIconOrientation=function(a){this.iconOrientation=a;if(this.label){this.label.iconOrientation=a;this.label.markForRedraw()}else this.markForRedraw()},isc.A.setAutoFit=function(a,b){if(b){this.$19=true;if(!a)return}if(this.$19){a=!!a;if(!(!b&&!!this.autoFit==a)){this.$2a=true;this.autoFit=a;var c=this.autoFitDirection==isc.Canvas.BOTH||this.autoFitDirection==isc.Canvas.HORIZONTAL,d=this.autoFitDirection==
isc.Canvas.BOTH||this.autoFitDirection==isc.Canvas.VERTICAL;this.inherentWidth=a&&c;this.inherentHeight=a&&d;if(a){this.$2b=this.overflow;this.setOverflow(isc.Canvas.VISIBLE);if(c){this.$2c=this.width;this.setWidth(1)}if(d){this.$2d=this.height;this.setHeight(1)}}else{var e=this.$2c||this.defaultWidth,f=this.$2d||this.defaultHeight;c&&this.setWidth(e);d&&this.setHeight(f);if(this.parentElement&&isc.isA.Layout(this.parentElement)){if(c&&!this.$2c)this.$pn=null;if(d&&!this.$2d)this.$po=null}this.$2d=
this.$2c=null;this.$2b&&this.setOverflow(this.$2b);this.$2b=null}delete this.$2a}}},isc.A.resizeBy=function(a,b,c,d,e,f){if(this.autoFit&&this.$19&&!this.$2a){c=false;if(a!=null&&(this.autoFitDirection==isc.Canvas.BOTH||this.autoFitDirection==isc.Canvas.HORIZONTAL)){this.$2c=1+a;c=true}if(b!=null&&(this.autoFitDirection==isc.Canvas.BOTH||this.autoFitDirection==isc.Canvas.VERTICAL)){this.$2d=1+b;c=true}c&&this.setAutoFit(false)}else return this.invokeSuper(isc.StatefulCanvas,"resizeBy",a,b,c,d,e,f)},
isc.A.getLabelHPad=function(){if(this.labelHPad!=null)return this.labelHPad;return this.vertical?this.labelBreadthPad!=null?this.labelBreadthPad:0:this.labelLengthPad!=null?this.labelLengthPad:this.capSize},isc.A.getLabelVPad=function(){if(this.labelVPad!=null)return this.labelVPad;return this.vertical?this.labelLengthPad!=null?this.labelLengthPad:this.capSize:this.labelBreadthPad!=null?this.labelBreadthPad:0},isc.A.$17=function(){var a;a=this.isDrawn()?this.position==isc.Canvas.RELATIVE&&this.parentElement==
null?this.getPageLeft():this.getOffsetLeft():this.getLeft();a+=this.getLabelHPad();return a},isc.A.$18=function(){var a;a=this.isDrawn()?this.position==isc.Canvas.RELATIVE&&this.parentElement==null?this.getPageTop():this.getOffsetTop():this.getTop();a+=this.getLabelVPad();return a},isc.A.$15=function(){var a=this.getInnerWidth();a-=2*this.getLabelHPad();return Math.max(a,1)},isc.A.$16=function(){var a=this.getInnerHeight();a-=2*this.getLabelVPad();return Math.max(a,1)},isc.A.getImgBreadth=function(){if(this.overflow==
isc.Canvas.VISIBLE&&isc.isA.Canvas(this.label))return this.vertical?this.$2e():this.$2f();return this.vertical?this.getInnerWidth():this.getInnerHeight()},isc.A.getImgLength=function(){if(this.overflow==isc.Canvas.VISIBLE&&isc.isA.Canvas(this.label))return this.vertical?this.$2f():this.$2e();return this.vertical?this.getInnerHeight():this.getInnerWidth()},isc.A.$2f=function(){var a=this.getInnerHeight();if(!isc.isA.Canvas(this.label))return a;var b=this.getLabelVPad();b=this.label.getVisibleHeight()+
2*b;return Math.max(b,a)},isc.A.$2e=function(){var a=this.getInnerWidth();if(!isc.isA.Canvas(this.label))return a;var b=this.getLabelHPad();b=this.label.getVisibleWidth()+2*b;return Math.max(b,a)},isc.A.$10=function(){this.overflow==isc.Canvas.VISIBLE&&this.adjustOverflow(this.$12)},isc.A.getScrollWidth=function(a,b,c,d){if(this.overflow!=isc.Canvas.VISIBLE||!isc.isA.Canvas(this.label))return this.invokeSuper(isc.StatefulCanvas,"getScrollWidth",a,b,c,d);if(this.$qz){this.$qz=null;this.adjustOverflow("widthCheckWhileDeferred")}if(!a&&
this.$su!=null)return this.$su;return this.$su=this.$2e()},isc.A.getScrollHeight=function(a,b,c,d){if(this.overflow!=isc.Canvas.VISIBLE||!isc.isA.Canvas(this.label))return this.invokeSuper(isc.StatefulCanvas,"getScrollHeight",a,b,c,d);if(this.$qz){this.$qz=null;this.adjustOverflow("heightCheckWhileDeferred")}if(!a&&this.$sz!=null)return this.$sz;return this.$sz=this.$2f()},isc.A.setOverflow=function(a,b,c,d,e){if(this.autoFit&&this.$19&&!this.$2a&&a!=isc.Canvas.VISIBLE){this.$2b=a;this.setAutoFit(false)}else{this.invokeSuper(isc.StatefulCanvas,
"setOverflow",a,b,c,d,e);isc.isA.Canvas(this.label)&&this.label.setOverflow(a,b,c,d,e)}},isc.A.$5y=function(a,b,c,d,e){this.invokeSuper(isc.StatefulCanvas,this.$64x,a,b,c,d,e);this.label&&this.label.resizeTo(this.$15(),this.$16())},isc.A.draw=function(a,b,c){if(isc.$cv)arguments.$cw=this;var d=isc.Canvas.$b4.draw.call(this,a,b,c);if(this.position!=isc.Canvas.ABSOLUTE&&isc.isA.Canvas(this.label))isc.Page.isLoaded()?this.$42f():isc.Page.setEvent("load",this.getID()+".$42f()");return d},isc.A.$42f=function(){this.isDrawn()&&
this.label.moveTo(this.$17(),this.$18())},isc.A.setAlign=function(a){this.align=a;this.isDrawn()&&this.markForRedraw();this.label&&this.label.setAlign(a)},isc.A.setVAlign=function(a){this.valign=a;this.isDrawn()&&this.markForRedraw();this.label&&this.label.setVAlign(a)},isc.A.getPrintHTML=function(){if(this.label&&this.label.isDrawn()&&this.label.isVisible())return this.label.getPrintHTML();return this.Super("getPrintHTML",arguments)},isc.A.shouldHiliteAccessKey=function(){return this.hiliteAccessKey},
isc.A.getTitleHTML=function(){var a=this.getTitle();if(!this.shouldHiliteAccessKey()||!isc.isA.String(a)||this.accessKey==null)return a;return isc.Canvas.hiliteCharacter(a,this.accessKey)},isc.A.getTitle=function(){return this.title},isc.A.setTitle=function(a){this.title=a;a=this.getTitleHTML();if(this.label){this.label.setContents(a);this.label.setState(this.getState());this.label.setSelected(this.isSelected())}else this.title!=null&&this.shouldShowLabel()&&this.makeLabel();this.markForRedraw()},
isc.A.setZIndex=function(a,b,c){isc.Canvas.$b4.setZIndex.call(this,a,b,c);isc.isA.Canvas(this.label)&&this.label.moveAbove(this)},isc.A.$ur=function(){this.Super("$ur",arguments);this.label!=null&&this.label.$ur()},isc.A.setIcon=function(a){this.icon=a;if(this.label)this.label.setIcon(a);else a&&this.shouldShowLabel()&&this.makeLabel()},isc.A.mouseOver=function(){if(this.showDown&&this.ns.EH.mouseIsDown())this.setState(isc.StatefulCanvas.STATE_DOWN);else{this.showRollOver&&this.setState(isc.StatefulCanvas.STATE_OVER);
if(this.showOverCanvas){this.overCanvas||this.addAutoChild("overCanvas",{autoDraw:false});this.overCanvas.isDrawn()||this.overCanvas.draw()}}},isc.A.mouseOut=function(){if(this.showRollOver)this.setState(isc.StatefulCanvas.STATE_UP);else this.showDown&&this.ns.EH.mouseIsDown()&&this.setState(isc.StatefulCanvas.STATE_UP);this.showOverCanvas&&this.overCanvas&&this.overCanvas.isVisible()&&isc.EH.getTarget()!=this.overCanvas&&this.overCanvas.clear()},isc.A.$lf=function(a,b,c,d){b=this.invokeSuper(isc.StatefulCanvas,
"$lf",a,b,c,d);a&&isc.Browser.isIE&&this.getFocusHandle()!=this.getDocument().activeElement||this.updateStateForFocus(a);return b},isc.A.updateStateForFocus=function(a){if(this.showFocused)if(this.showFocusedAsOver){if(this.showRollOver){var b=this.getState();if(a&&!this.isDisabled())b==isc.StatefulCanvas.STATE_UP&&this.setState(isc.StatefulCanvas.STATE_OVER);else b==isc.StatefulCanvas.STATE_OVER&&this.setState(isc.StatefulCanvas.STATE_UP)}}else{this.stateChanged();this.label&&this.label.stateChanged()}},
isc.A.getFocusedState=function(){if(!this.showFocused||this.showFocusedAsOver||this.isDisabled())return false;return this.hasFocus},isc.A.handleMouseDown=function(a,b){if(a.target==this&&this.useEventParts)if(this.firePartEvent(a,isc.EH.MOUSE_DOWN)==false)return false;this.showDown&&this.setState(isc.StatefulCanvas.STATE_DOWN);if(this.mouseDown)return this.mouseDown(a,b)},isc.A.handleMouseUp=function(a,b){if(a.target==this&&this.useEventParts)if(this.firePartEvent(a,isc.EH.MOUSE_UP)==false)return false;
if(this.showDown)this.setState(this.showRollOver?isc.StatefulCanvas.STATE_OVER:isc.StatefulCanvas.STATE_UP);if(this.mouseUp)return this.mouseUp(a,b)},isc.A.handleActivate=function(a,b){var c=this.getActionType();if(c==isc.StatefulCanvas.RADIO)this.select();else c==isc.StatefulCanvas.CHECKBOX&&this.setSelected(!this.isSelected());if(this.activate)return this.activate(a,b);if(this.action)return this.action();if(this.click)return this.click(a,b)},isc.A.handleClick=function(a,b){if(isc.$cv)arguments.$cw=
this;if(a.target==this&&this.useEventParts)if(this.firePartEvent(a,isc.EH.CLICK)==false)return false;return this.handleActivate(a,b)},isc.A.handleKeyPress=function(a,b){if(isc.$cv)arguments.$cw=this;if(this.keyPress&&this.keyPress(a,b)==false)return false;if(a.keyName=="Space"||a.keyName=="Enter")if(this.handleActivate(a,b)==false)return false;return true},isc.A.destroy=function(){this.removeFromRadioGroup();return this.Super("destroy",arguments)});isc.B._maxIndex=isc.C+67;isc.StatefulCanvas.registerStringMethods({activate:isc.EH.$i3,
action:""});isc.ClassFactory.defineClass("Layout","Canvas");isc.A=isc.Layout;isc.A.FILL="fill";isc.A=isc.Layout.getPrototype();isc.A.orientation="horizontal";isc.A.vPolicy=isc.Layout.FILL;isc.A.hPolicy=isc.Layout.FILL;isc.A.minMemberSize=1;isc.A.enforcePolicy=true;isc.A.paddingAsLayoutMargin=true;isc.A.$415=true;isc.A.membersMargin=0;isc.A.defaultResizeBars="marked";isc.A.resizeBarClass="Splitbar";isc.A.resizeBarSize=7;isc.A.animateMemberEffect="slide";isc.A.canDropComponents=true;isc.A.dropLineThickness=
2;isc.A.membersAreChildren=true;isc.A=isc.Canvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.setShowResizeBar=function(a){this.showResizeBar=a;a=this.parentElement;a==null||!isc.isA.Layout(a)||a.reflow(this)});isc.B._maxIndex=isc.C+1;isc.A=isc.Layout.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.managePercentBreadth=true;isc.A.$2g="layout";isc.A.$2h=["show",
"hide","rect"];isc.A.$2i=["rect","move"];isc.A.$2j=[];isc.A.$2k="membersAdded";isc.A.$2l="membersRemoved";isc.A.placeHolderDefaults={styleName:"layoutPlaceHolder",overflow:isc.Canvas.HIDDEN};isc.A.dropLineDefaults={styleName:"layoutDropLine",overflow:"hidden",isMouseTransparent:true};isc.B.push(isc.A.getMemberLength=function(a){return this.vertical?a.getVisibleHeight():a.getVisibleWidth()},isc.A.getMemberBreadth=function(a){return this.vertical?a.getVisibleWidth():a.getVisibleHeight()},isc.A.setMemberBreadth=
function(a,b){this.logIsDebugEnabled(this.$2g)&&this.$42g(a,b);this.vertical?a.setWidth(b):a.setHeight(b)},isc.A.getLength=function(){if(this.vertical)return this.getInnerHeight();var a=this.getInnerWidth();if(this.leaveScrollbarGap&&!this.vscrollOn)a-=this.getScrollbarSize();return a},isc.A.getBreadth=function(){if(!this.vertical)return this.getInnerHeight();var a=this.getInnerWidth();if(this.leaveScrollbarGap&&!this.vscrollOn)a-=this.getScrollbarSize();return a},isc.A.getLengthPolicy=function(){return this.vertical?
this.vPolicy:this.hPolicy},isc.A.getBreadthPolicy=function(){return this.vertical?this.hPolicy:this.vPolicy},isc.A.memberHasInherentLength=function(a){if(!(this.vertical?a.hasInherentHeight():a.hasInherentWidth()))return false;a=this.$2m(a);if(isc.isA.String(a)&&(a.endsWith(this.$o9)||a==this.$pa))return false;return true},isc.A.memberHasInherentBreadth=function(a){return this.vertical?a.hasInherentWidth():a.hasInherentHeight()},isc.A.$2n=function(a){return this.vertical&&a.canOverflowHeight()||!this.vertical&&
a.canOverflowWidth()},isc.A.$2m=function(a){return this.vertical?a.$po:a.$pn},isc.A.$2o=function(a){return this.vertical?a.$pn:a.$po},isc.A.$2p=function(a){return this.vertical?a._percent_height:a._percent_width},isc.A.scrollingOnLength=function(){return this.vertical?this.vscrollOn:this.hscrollOn},isc.A.getMemberGap=function(a){return(a.extraSpace||0)-(this.memberOverlap||0)+(a.$22||0)},isc.A.initWidget=function(){if(isc.$cv)arguments.$cw=this;var a=isc.Layout;if(this.vertical==null)this.vertical=
this.orientation==a.VERTICAL;else this.orientation=this.vertical?a.VERTICAL:a.HORIZONTAL;if(this.isRTL()&&!this.vertical)this.reverseOrder=!this.reverseOrder;if(this.members==null)this.members=[];else if(!isc.isA.Array(this.members))this.members=[this.members];if(this.membersAreChildren)if(this.members.length==0&&this.children!=null&&!this.$2q())this.members=this.children=this.createMemberCanvii(this.children);else{this.members=this.createMemberCanvii(this.members);if(this.children==null)this.children=
[];this.children.addList(this.members)}else{this.logInfo("members are peers","layout");this.addMethods({draw:this.$2r});this.members=this.createMemberCanvii(this.members);if(this.peers==null)this.peers=[];this.peers.addList(this.members)}this.setLayoutMargin();this.members&&this.members.length>0&&this.$62s()},isc.A.createMemberCanvii=function(a){a=this.createCanvii(a);for(var b=a.length-1;b>=0;b--)if(a[b]!=null)if(!isc.isA.Canvas(a[b])){this.logWarn("Layout unable to resolve member:"+this.echo(a[b])+
" to a Canvas - ignoring this member");a.removeAt(b)}return a},isc.A.$2q=function(){for(var a=0;a<this.children.length;a++){var b=this.children[a];if(b!=null&&!b._generated)return false}return true},isc.A.setLayoutMargin=function(){var a=this.layoutHMargin,b=this.layoutVMargin,c=this.layoutMargin,d=this.reverseOrder?this.layoutEndMargin:this.layoutStartMargin,e=this.reverseOrder?this.layoutStartMargin:this.layoutEndMargin,f,g,h,i;if(this.paddingAsLayoutMargin){i=this.$tq();f=i.left;g=i.right;h=i.top;
i=i.bottom}this.$tb=this.$du(this.layoutLeftMargin,!this.vertical?d:null,a,c,f,0);this.$tc=this.$du(this.layoutRightMargin,!this.vertical?e:null,a,c,g,0);this.$td=this.$du(this.layoutTopMargin,this.vertical?d:null,b,c,h,0);this.$te=this.$du(this.layoutBottomMargin,this.vertical?e:null,b,c,i,0);this.$2s=true;this.reflow()},isc.A.$2t=function(a){this.$tb==null&&this.setLayoutMargin();return a?this.$tb+this.$tc:this.$td+this.$te},isc.A.$2u=function(){return this.$2t(this.vertical)},isc.A.$2v=function(){return this.$2t(!this.vertical)},
isc.A.$2r=function(){if(isc.$cv)arguments.$cw=this;if(this.membersAreChildren)isc.Canvas.$b4.draw.apply(this,arguments);else{this.$2w();this.layoutChildren(this.$od);this.drawPeers();this.$if=true}},isc.A.resizePeersBy=function(a,b,c){this.membersAreChildren&&isc.Canvas.$b4.resizePeersBy.call(this,a,b,c)},isc.A.markForRedraw=function(){if(this.membersAreChildren)return this.Super("markForRedraw",arguments);this.reflow("markedForRedraw")},isc.A.drawChildren=function(){if(this.membersAreChildren){this.$2w();
this.layoutChildren(this.$od);this.$2x()}},isc.A.$2y=function(){return true},isc.A.$2w=function(){if(this.members)for(var a=0;a<this.members.length;a++){var b=this.members[a];if(b==null){this.logWarn("members array: "+this.members+" includes null entry at position "+a+". Removing");this.members.removeAt(a);a-=1}else{if(this.$2y(b)&&(b.$sp||b.tabIndex==null))this.updateMemberTabIndex(b);this.autoSetBreadth(b)}}},isc.A.childCanFocusChanged=function(a){this.members.contains(a)&&this.updateMemberTabIndex(a)},
isc.A.$2x=function(){if(this.membersAreChildren&&this.children)for(var a=0;a<this.children.length;a++){var b=this.children[a];if(!this.members.contains(b)){if(!isc.isA.Canvas(b)){b.autoDraw=false;b=isc.Canvas.create(b)}b.isDrawn()||b.draw()}}},isc.A.$54l=function(a){var b=this.$2o(a);b=isc.isA.String(b)&&isc.endsWith(b,this.$o9)?b:null;var c=Math.max(this.getBreadth()-this.$2u(),1);if(this.$3a&&!this.leaveScrollbarGap)c-=this.getScrollbarSize();b=b==null?c:Math.floor(c*(parseInt(b)/100));if(this.getMemberDefaultBreadth==
null)return b;return this.getMemberDefaultBreadth(a,b)},isc.A.autoSetBreadth=function(a){if(!this.shouldAlterBreadth(a))return false;var b=this.$2z;this.$2z=true;this.setMemberBreadth(a,this.$54l(a));this.$2z=b;return true},isc.A.shouldAlterBreadth=function(a){var b=this.$2o(a);if(b!=null)return this.managePercentBreadth&&this.getBreadthPolicy()==isc.Layout.FILL&&isc.isA.String(b)&&isc.endsWith(b,this.$o9);if(this.vertical&&a.inherentWidth)return false;if(this.getBreadthPolicy()==isc.Layout.FILL)return true;
return false},isc.A.$20=function(a){a.isDrawn()||!(!isc.Browser.isWin&&isc.Browser.isMoz&&this.showCustomScrollbars==false&&this.overflow==isc.Canvas.AUTO)&&a.moveTo(null,-9999)},isc.A.getMarginSpace=function(){for(var a=this.$2v(),b=0;b<this.members.length;b++){var c=this.members[b];if(c.showResizeBar)a+=this.resizeBarSize;else if(b<this.members.length-1&&!this.$21(this.members[b+1]))a+=this.membersMargin;a+=this.getMemberGap(c)}if(this.members.length!=0&&this.$21(this.members[0]))a-=this.membersMargin;
if(this.memberOverlap!=null)a+=this.memberOverlap;return a},isc.A.getTotalMemberSpace=function(){return this.getLength()-this.getMarginSpace()},isc.A.$23=function(){for(var a=0,b=0;b<this.members.length;b++){var c=this.members[b];this.$21(c)||(a+=this.getMemberLength(c))}return a+this.getMarginSpace()},isc.A.ignoreMember=function(a){if(!(!a||!this.members||this.members.indexOf(a)==-1))a.$52f=true},isc.A.stopIgnoringMember=function(a){a.$52f=false;this.reflow()},isc.A.isIgnoringMember=function(a){if(a.$52f)return a.$52f;
return false},isc.A.$21=function(a){if(a.visibility==isc.Canvas.HIDDEN&&!(a.$l0&&a.$l0.isVisible()))return true;if(this.isIgnoringMember(a))return true;return false},isc.A.ignoreMemberZIndex=function(a){if(!(!a||!this.members||this.members.indexOf(a)==-1)){a.$52g=true;this.reflow()}},isc.A.stopIgnoringMemberZIndex=function(a){a.$52g=false;this.reflow()},isc.A.$52h=function(a){if(this.isIgnoringMember(a))return true;else if(a.$52g)return a.$52g;return false},isc.A.gatherSizes=function(a,b,c){if(!b){b=
this.$25;if(b==null)b=this.$25=[];else b.length=0}for(var d=this.getLengthPolicy(),e=this.logIsInfoEnabled(this.$2g),f=0;f<this.members.length;f++){var g=this.members[f],h=b[f];if(h==null)h=b[f]={};if(this.$21(g)&&!g.$26){h.$27=0;if(e)h.$28="hidden"}else if(this.memberHasInherentLength(g)||d==isc.Layout.NONE){h.$27=this.getMemberLength(g);if(e)h.$28=d==isc.Layout.NONE?"no length policy":"inherent size"}else if(a&&this.$2n(g)){var i=this.getMemberLength(g);if(i!=c[f]){e&&this.logInfo("member: "+g+
" overflowed.  set length: "+c[f]+" got length: "+i,"layout");h.$29=true;h.$27=i}}else if(this.$2m(g)!=null){h.$27=this.vertical?g.$po:g.$pn;if(e)h.$28="explicit size"}else{if(this.respectSizeLimits){i=this.vertical?g.minHeight:g.minWidth;g=this.vertical?g.maxHeight:g.maxWidth;if(i!=null&&c[f]!=null&&i>c[f]){h.$27=i;if(e)h.$28="minimum size";continue}if(g!=null&&c[f]!=null&&g<c[f]){h.$27=g;if(e)h.$28="maximum size";continue}}if(h.$27==null){h.$27=this.$pa;if(e)h.$28="no length specified"}}}return b},
isc.A.resizeMembers=function(a,b,c){for(var d=this.logIsInfoEnabled(this.$2g),e=0;e<this.members.length;e++){var f=this.members[e],g=b[e];if(!this.$21(f))if(!(c&&!this.$2n(f))){var h=null;if(this.shouldAlterBreadth(f)){if(d)g.$3b="breadth policy: "+this.getBreadthPolicy();h=g.$3c=this.$54l(f)}else{g.$3c=this.getMemberBreadth(f);if(d)g.$3b=this.getBreadthPolicy()==isc.Layout.NONE?"no breadth policy":"explicit size"}var i=null;if(this.getLengthPolicy()!=isc.Layout.NONE&&!this.memberHasInherentLength(f)&&
!g.$29)i=g.$3d=a[e];if(i!=null&&this.$2n(f)&&!f.isDirty()){g=this.vertical?f.getHeight():f.getWidth();var j=this.getMemberLength(f);if(j>g&&i<=j&&(h==null||h<=this.getMemberBreadth(f))){d&&this.logInfo("not applying "+this.getLengthAxis()+": "+i+" to overflowed member: "+f+" w/"+this.getLengthAxis()+": "+j,"layout");i=null}}this.logIsDebugEnabled(this.$2g)&&this.$42g(f,h,i);f.isAnimating(this.$2h)||(this.vertical?f.resizeTo(h,i):f.resizeTo(i,h));if(f.isDrawn())f.isDirty()&&f.redraw("Layout getting new size");
else if(!f.isDrawn())f.$3e=true}}},isc.A.$52i=function(){if(!(!this.stackZIndex||this.members.length<2)){for(var a=0;a<this.members.length;a++)if(!this.$52h(this.members[a]))break;for(var b=this.members[a],c=b.getZIndex(),d,e=a+1;e<this.members.length;e++)if(!this.$52h(this.members[e])){a=b;d=a.getZIndex();b=this.members[e];c=b.getZIndex();if(c<=d&&this.stackZIndex=="lastOnTop")b.moveAbove(a);else c>=d&&this.stackZIndex=="firstOnTop"&&b.moveBelow(a)}}},isc.A.stackMembers=function(a,b,c){if(c==null)c=
true;var d=this.membersAreChildren?0:this.getOffsetLeft(),e=this.membersAreChildren?0:this.getOffsetTop(),f=this.reverseOrder,g=f?-1:1,h=(this.vertical?this.getInnerWidth():this.getInnerHeight())-this.$2u();if(this.vertical&&this.canOverflowWidth()||!this.vertical&&this.canOverflowHeight())for(var i=0;i<this.members.length;i++){var j=this.members[i];if(!this.$21(j)){j=this.getMemberBreadth(j);if(j>h)h=j}}this.logIsDebugEnabled(this.$2g)&&this.logDebug("centering wrt visible breadth: "+h,this.$2g);
var k;if(f)k=this.isRTL()&&!this.vertical?this.getLength():Math.max(this.getLength(),this.$23());k=this.vertical?!f?e:e+k:!f?d:d+k;if(this.align!=null){i=this.$23();i=Math.max(this.getLength(),i)-i;if(!f&&(this.align==isc.Canvas.BOTTOM||this.align==isc.Canvas.RIGHT)||f&&(this.align==isc.Canvas.LEFT||this.align==isc.Canvas.TOP))k+=g*i;else if(this.align==isc.Canvas.CENTER)k+=Math.round(i/2)}var l=this.vertical?d+this.$tb:e+this.$td,m=false,n=false,o=0;for(i=0;i<a.length;i++){j=a[i];var s=b?b[i]:null;
if(i==0)k+=g*(this.vertical?f?this.$te:this.$td:f?this.$tc:this.$tb);else if(m)k+=g*this.resizeBarSize;else n||(k+=g*this.membersMargin);m=j.isAnimating(this.$2i);if(this.$21(j)){!this.isIgnoringMember(j)&&!m&&j.moveTo(d+this.$tb,e+this.$td);if(j.showResizeBar){m=this.getBreadth()-this.$2u();this.makeResizeBar(j,l,k,m);m=true}else{j.$3f!=null&&j.$3f.hide();m=false}n=true;o++}else{n=false;var r=l,t=isc.Canvas,p=this.getLayoutAlign(j);if(p==t.RIGHT||p==t.BOTTOM)r=h-this.getMemberBreadth(j)+(this.vertical?
this.$tb:this.$td);else if(p==t.CENTER)r=Math.floor((h-this.getMemberBreadth(j))/2)+(this.vertical?this.$tb:this.$td);if(this.getMemberOffset!=null)r=this.getMemberOffset(j,r,p);t=this.getMemberLength(j);if(!m)if(this.vertical)f?j.moveTo(r,k-t):j.moveTo(r,k);else f?j.moveTo(k-t,r):j.moveTo(k,r);k+=g*t;k+=g*this.getMemberGap(j);if(j.showResizeBar){m=this.getBreadth()-this.$2u();this.makeResizeBar(j,l,k,m)}else j.$3f!=null&&j.$3f.hide();m=j.showResizeBar;if(c)this.memberSizes[i-o]=t;if(b)s.$3g=t}}if(c)this.memberSizes.length=
i-o;this.overflow!=isc.Canvas.VISIBLE&&this.$3h();this.$52i()},isc.A.getLayoutAlign=function(a){if(a.layoutAlign!=null)return a.layoutAlign;if(this.defaultLayoutAlign!=null)return this.defaultLayoutAlign;return this.vertical?this.isRTL()?isc.Canvas.RIGHT:isc.Canvas.LEFT:isc.Canvas.TOP},isc.A.$3h=function(){var a,b,c=false,d=false,e,f,g,h,i=this.vertical;if(i){b=this.$te||0;a=this.$tc||0}else{b=this.$tc||0;a=this.$te||0}if(b>0||a>0)c=true;var j=this.getInnerWidth(),k=this.getInnerHeight();if(c){for(var l=
this.members.length-1;l>=0;l--){f=this.members[l];if(f.isVisible())if(i){if(e==null){e=f;g=f.getTop()+f.getVisibleHeight()}f=f.getLeft()+f.getVisibleWidth();if(h==null||h<f)h=f}else{if(e==null){e=f;h=f.getLeft()+f.getVisibleWidth()}f=f.getTop()+f.getVisibleHeight();if(g==null||g<f)g=f}}if(g==null)g=0;if(h==null)h=0}else{e=false;for(l=this.members.length-1;l>=0;l--){f=this.members[l];if(isc.isA.LayoutSpacer(f)&&f.isVisible()){var m=f.getWidth(),n=f.getHeight();if(l==this.members.length-1){d=true;if(i)g=
f.getTop()+n;else h=f.getLeft()+m}if(i){if(m>j&&(h==null||m>h)){e=true;h=m}}else if(n>k&&(g==null||n>g)){e=true;g=n}}}if(e&&!d){for(l=this.members.length-1;l>=0;l--){f=this.members[l];if(!isc.isA.LayoutSpacer(f))if(this.vertical){m=f.getVisibleWidth();if(m>=h){e=false;break}}else{n=f.getVisibleHeight();if(n>=g){e=false;break}}}if(e)d=true}if(d){if(h==null)h=1;if(g==null)g=1}}if(d||c){if(this.vertical){h+=a;g+=b}else{h+=b;g+=a}this.enforceScrollSize(h,g)}else this.stopEnforcingScrollSize()},isc.A.setOverflow=
function(a,b,c,d,e){var f=this.overflow;if(f==isc.Canvas.VISIBLE&&a!=isc.Canvas.VISIBLE)this.$3h();else f!=isc.Canvas.VISIBLE&&a==isc.Canvas.VISIBLE&&this.stopEnforcingScrollSize();return this.invokeSuper(isc.Layout,"setOverflow",a,b,c,d,e)},isc.A.layoutChildren=function(a,b,c){if(isc.$cv)arguments.$cw=this;if(!this.destroying){if(this.$3i==null)this.$3i=1;else this.$3i++;if(!this.members)this.members=[];if(this.children&&this.children.length)for(var d=0;d<this.children.length;d++)this.$60y(this.children[d]);
if(!(!this.isDrawn()&&a!=this.$od)){this.$2z=true;if(b!=null||c!=null)if(this.vertical&&isc.isA.Number(b)||!this.vertical&&isc.isA.Number(c))this.$2s=true;if(this.isDrawn()&&this.getLengthPolicy()==isc.Layout.NONE&&!this.$2s){this.logIsInfoEnabled(this.$2g)&&this.logInfo("Restacking, reason: "+a,this.$2g);this.stackMembers(this.members);this.$2s=false}else{this.$2s=false;var e=this.getTotalMemberSpace(),f=this.$3k(e),g=this.$25;if(!this.scrollingOnLength()&&this.overflow==isc.Canvas.AUTO&&f.sum()>
this.getLength()){this.logInfo("scrolling will be required on length axis",this.$2g);this.$3a=true}this.resizeMembers(f,g,true);if(this.manageChildOverflow)this.$qv=true;for(d=0;d<this.members.length;d++){var h=this.members[d],i=this.$2y(h);if(h.$3e){this.$20(h);h.draw();h.$3e=null;!i&&this.$2y(h)&&this.updateMemberTabIndex(h)}}this.manageChildOverflow&&this.$qx(this.members);d=this.memberSizes=this.$3k(e,true,f,g);if(!this.$3a&&!this.scrollingOnLength()&&this.overflow==isc.Canvas.AUTO&&d.sum()>this.getLength()){this.logInfo("scrolling will be required on length axis, after overflow",
this.$2g);this.$3a=true}this.resizeMembers(d,g,false);if(this.manageChildOverflow)this.$qv=true;for(d=0;d<this.members.length;d++){h=this.members[d];if(h.$3e){this.$20(h);h.draw();h.$3e=null}}this.manageChildOverflow&&this.$qx(this.members);this.stackMembers(this.members,g);this.reportSizes(g,a)}this.$3j(a)}}},isc.A.$60y=function(a){var b=a._percent_height,c=a._percent_width;if(a.snapTo)a.$qw();else{var d=this.getLengthPolicy()==isc.Layout.FILL;if(a._percent_left||a._percent_top||b||c){if(d&&this.vertical){if(b!=
null&&this.members.contains(a))b=null}else if(d&&!this.vertical)if(c!=null&&this.members.contains(a))c=null;a.setRect(a._percent_left,a._percent_top,c,b)}}},isc.A.$3k=function(a,b,c,d){if(!c){c=this.$3l;if(c==null)c=this.$3l=[];else c.length=this.members.length}d=this.gatherSizes(b,d,c);this.$3m(c,d);return this.getClass().applyStretchResizePolicy(c,a,this.minMemberSize,true,this)},isc.A.$3j=function(a){this.$2z=this.$3n=this.$3a=false;if(this.$rm&&this.isDrawn()&&!this.$uw&&(a!="resized"||this.shouldRedrawOnResize()))this.adjustOverflow();
if(!this.enforcePolicy)this.vertical?this.vPolicy=isc.Layout.NONE:this.hPolicy=isc.Layout.NONE},isc.A.$3m=function(a,b){for(var c=0;c<b.length;c++)a[c]=b[c].$27},isc.A.getMemberSizes=function(){if(this.memberSizes)return this.memberSizes.duplicate();return this.memberSizes},isc.A.getScrollWidth=function(a){if(isc.$cv)arguments.$cw=this;if(this.$qz){this.$qz=null;this.adjustOverflow("widthCheckWhileDeferred")}if(!a&&this.$su!=null)return this.$su;var b=this.children?this.$sy(this.children,true):0,
c=this.members?this.$sy(this.members,true):0;return this.$su=Math.max(b,c+this.$tc)},isc.A.getScrollHeight=function(a){if(isc.$cv)arguments.$cw=this;if(this.$qz){this.$qz=null;this.adjustOverflow("heightCheckWhileDeferred")}if(!a&&this.$sz!=null)return this.$sz;var b=this.children?this.$s3(this.children,true):0,c=this.children?this.$s3(this.members,true):0;return this.$sz=Math.max(b,c+this.$te)},isc.A.layoutIsDirty=function(){return this.$3n==true},isc.A.reflow=function(a){if(!this.$3n)if(this.isDrawn()){this.$3n=
true;if(this.instantRelayout)this.layoutChildren(a);else{var b=this,c=this.$3i;isc.EH.$ms(function(){b.destroyed||b.reflowNow(a,c)})}}},isc.A.reflowNow=function(a,b){b!=null&&b<this.$3i||this.layoutChildren(a)},isc.A.childResized=function(a,b,c,d){if(isc.$cv)arguments.$cw=this;if(this.suppressMemberAnimations){var e=false;if(a.isAnimating(this.$do)){e=true;a.finishAnimation(this.$do)}if(a.isAnimating(this.$zb)){e=true;a.finishAnimation(this.$zb)}if(a.isAnimating(this.$3o)){e=true;a.finishAnimation(this.$3o)}if(e)return}this.$t6("child resize");
if(!this.$2z)if(!a.$pp)if(this.members.contains(a)){if(d!="overflow"&&d!="overflow changed"){if(b!=null&&b!=0){var f=a.$pn;a.$pn=a._percent_width||a.getWidth();this.$3p(f,a,d,true)}if(c!=null&&c!=0){f=a.$po;a.$po=a._percent_height||a.getHeight();this.$3p(f,a,d)}}f=isc.SB.concat("memberResized: (",b,",",c,"): ",a.getID());e?this.reflowNow(f):this.reflow(f)}},isc.A.$3p=function(a,b,c,d){if(this.logIsDebugEnabled(this.$2g)){var e=d?b.$pn:b.$po;if(e!=a)this.logDebug("new user "+(d?"width: ":"height: ")+
e+" for member "+b+", oldSize: "+a+" reason: "+c+(this.logIsDebugEnabled("userSize")?this.getStackTrace():""),"layout")}},isc.A.childVisibilityChanged=function(a){if(this.members.contains(a)){if(!a.isDrawn())this.$2s=true;this.reflow("member changed visibility: "+a);a.$3f&&a.$3f.showGrip&&a.$3f.showClosedGrip&&a.$3f.label&&a.$3f.label.stateChanged();this.$t6("child visibility changed")}},isc.A.pageResize=function(){this.Super("pageResize",arguments);this.reflow("pageResize")},isc.A.sectionHeaderClick=
function(a){var b=a.section;if(b!=null){isc.isAn.Array(b)||(b=[b]);for(var c=false,d=0;d<b.length;d++){if(isc.isA.String(b[d]))b[d]=window[b[d]];if(b[d].visibility!="hidden")c=true}if(c){b.map("hide");a.setExpanded(false)}else{b.map("show");a.setExpanded(true)}}},isc.A.getMember=function(a){a=this.getMemberNumber(a);if(a==-1)return null;return this.members[a]},isc.A.getMemberNumber=function(a){if(isc.isA.String(a)){a=window[a];return this.members.indexOf(a)}else if(isc.isA.Canvas(a))return this.members.indexOf(a);
if(isc.isA.Number(a))return a;return-1},isc.A.hasMember=function(a){return this.members.contains(a)},isc.A.getMembers=function(){return this.members},isc.A.getPrintChildren=function(){var a=this.members;if(!(!a||a.length==0)){for(var b=[],c=0;c<a.length;c++)this.shouldPrintChild(a[c])&&b.add(a[c]);return b.length>0?b:null}},isc.A.getChildPrintHTML=function(a,b,c){b||(b={});if(b.inline==null&&!this.vertical&&!this.printVertical)b.inline=true;return this.Super("getChildPrintHTML",[a,b,c])},isc.A.getCompletePrintHTMLFunction=
function(a,b){var c=this;return function(d){c.isPrinting=false;var e=c.vertical||c.printVertical;if(isc.isAn.Array(d)&&d.length>0)d=e?d.join(isc.emptyString):"<TABLE WIDTH=100%><TR><TD valign=top>"+d.join("</TD><TD valign=top>")+"</TD></TR></TABLE>";if(d)a[2]=d;a=a.join(isc.emptyString);delete c.currentPrintProperties;if(b){c.fireCallback(b,"html, callback",[a,b]);return null}else return a}},isc.A.addMember=function(a,b,c){this.addMembers(a,b,c);return this},isc.A.addMembers=function(a,b,c){if(a){if(isc.$cv)arguments.$cw=
this;this.$3q();if(this.logIsInfoEnabled(this.$2g))this.logInfo("adding newMembers: "+a+(b!=null?" at position: "+b:""),"layout");if(!isc.isAn.Array(a)){this.$2j[0]=a;a=this.$2j}if(this.members==null)this.members=[];if(b>this.members.length)b=this.members.length;for(var d=this.isDrawn(),e=0;e<a.length;e++){var f=a[e];if(f){isc.isAn.Instance(f)||(f=this.createCanvas(f));if(isc.isA.Canvas(f))if(this.members.contains(f))b!=null&&this.members.slide(this.members.indexOf(f),b+e);else if(f.addAsPeer||f.snapEdge)this.addPeer(f,
null,false);else if(f.addAsChild||f.snapTo)this.addChild(f,null,false);else{f.parentElement&&f.deparent();f.isDrawn()&&f.clear();b!=null?this.members.addAt(f,b+e):this.members.add(f);this.$42h(f);this.autoSetBreadth(f);var g=d&&this.animateMembers&&!c&&a.length==1&&f.visibility!=isc.Canvas.HIDDEN;g&&f.hide();var h=d&&this.getLengthPolicy()==isc.Layout.NONE;this.membersAreChildren?this.addChild(f,null,h):this.addPeer(f,null,h);f.moveTo(0,0);this.isDrawn()&&this.updateMemberTabIndex(f);if(this.isDrawn()&&
this.memberHasInherentLength(f)){this.$20(f);f.isDrawn()||f.draw()}}else this.logWarn("addMembers() unable to resolve member:"+this.echo(f)+" to a Canvas - ignoring")}}this.$2j[0]=null;g?this.$3r(f):this.reflow(this.$2k);this.$62s()}},isc.A.$42h=function(a){if(a._percent_height)a.$po=a._percent_height;if(a._percent_width)a.$pn=a._percent_width;if(this.memberHasInherentLength(a)){!a.$po&&!a.$t9&&a.restoreDefaultSize(true);!a.$pn&&!a.$t8&&a.restoreDefaultSize()}},isc.A.$3s=function(a,b){var c=this.getMemberNumber(a);
if(c==this.members.length-1)a=this.getMember(c-1);if(a){var d=this.membersMargin+this.getMemberGap(a);if(b)a.$22=-(d+1);this.registerAnimation(function(e){var f=Math.floor(e*d);if(b)f=d-f;a.$22=-f;if(e==1)a.$22=null},this.animateMemberTime)}},isc.A.removeChild=function(a,b){isc.Canvas.$b4.removeChild.call(this,a,b);this.membersAreChildren&&this.members.contains(a)&&this.removeMember(a)},isc.A.removeMember=function(a,b){this.removeMembers(a,b)},isc.A.removeMembers=function(a,b){if(a){this.$3q();if(!isc.isAn.Array(a)){this.$2j[0]=
a;a=this.$2j}if(a===this.members)a=a.duplicate();for(var c=0;c<a.length;c++){var d=a[c];if(!isc.isA.Canvas(e)){a[c]=this.getMember(d);if(a[c]==null){this.logWarn("couldn't find member to remove: "+this.echoLeaf(d));a.removeAt(c);c-=1}}}var e=(c=this.animateMembers&&a.length==1&&!b)?a[0]:null;if(c)if(e.parentElement!=this||e.destroying||!e.isVisible())c=false;if(c){var f=this,g=a.duplicate();this.$3u(e,function(){f.$3t(g)})}else this.$3t(a);this.$2j[0]=null;this.$62s()}},isc.A.$3t=function(a){if(a){for(var b=
0;b<a.length;b++){var c=a[b];this.members.remove(c);this.membersAreChildren&&c.parentElement==this&&c.deparent();c.$t9=c.$t8=null;if(c.$3f){c.$3f.destroy();c.$3f=null}c.showTarget==this&&delete c.showTarget;c.$3v&&c.destroy()}this.reflow(this.$2l)}},isc.A.setMembers=function(a){if(!(a==this.members||!isc.isAn.Array(a))){for(var b=[],c=0;c<this.members.length;c++)a.contains(this.members[c])||b.add(this.members[c]);c=this.instantRelayout;this.instantRelayout=false;this.removeMembers(b,true);this.addMembers(a,
0,true);(this.instantRelayout=c)&&this.reflow("set members")}},isc.A.showMember=function(a,b){return this.showMembers([a],b)},isc.A.showMembers=function(a,b){if(this.isDrawn()&&this.animateMembers&&a.length==1)this.$3r(a[0],b);else{for(var c=0;c<a.length;c++)this.getMember(a[c]).show();b&&this.fireCallback(b)}},isc.A.$3r=function(a,b){a=this.getMember(a);this.setNewMemberLength(a);a.animateShow(this.animateMemberEffect,b,this.animateMemberTime);a.isAnimating()&&this.$3s(a,true)},isc.A.setNewMemberLength=
function(a){a.$26=true;var b=this.$3k(this.getTotalMemberSpace());delete a.$26;b=b[this.members.indexOf(a)];var c=this.$2z;this.$2z=true;this.vertical?a.setHeight(b):a.setWidth(b);this.$2z=c},isc.A.hideMember=function(a,b){return this.hideMembers([a],b)},isc.A.hideMembers=function(a,b){this.$3x=b;if(this.animateMembers&&a.length==1)this.$3u(a[0],b);else{for(var c=0;c<a.length;c++)this.getMember(a[c]).hide();this.fireCallback(b)}},isc.A.$3u=function(a,b){a=this.getMember(a);a.animateHide(this.animateMemberEffect,
b,this.animateMemberTime);a.isAnimating()&&this.$3s(a)},isc.A.setVisibleMember=function(a){a=this.getMember(a);if(a!=null){this.hideMembers(this.members);this.showMember(a)}},isc.A.reorderMember=function(a,b){this.reorderMembers(a,a+1,b)},isc.A.reorderMembers=function(a,b,c){this.members.slideRange(a,b,c);this.layoutChildren("membersReordered");this.$62s()},isc.A.replaceMember=function(a,b){var c=this.instantRelayout;this.instantRelayout=false;var d=this.getMemberNumber(a);this.removeMember(a,true);
this.addMember(b,d,true);(this.instantRelayout=c)&&this.reflowNow()},isc.A.$62s=function(){if(!this.destroying){var a=this.defaultResizeBars;if(a!=isc.Canvas.NONE)for(var b=this.members.length-1;b>=0;b--){var c=this.members[b];if(c!=null){var d=false;if(a==isc.Canvas.MARKED&&c.showResizeBar)d=true;else if(a==isc.Canvas.MIDDLE&&b<this.members.length-1&&c.showResizeBar!=false)d=true;else if(a==isc.Canvas.ALL&&c.showResizeBar!=false)d=true;c.setShowResizeBar(d)}}}this.membersChanged&&this.membersChanged()},
isc.A.updateMemberTabIndex=function(a){if(!(!this.$2y(a)||a.tabIndex!=null&&!a.$sp)){for(var b,c=this.members.indexOf(a);c>0&&b==null;){c-=1;b=this.members[c].$v5()}if(b==null&&(this.tabIndex==null||this.$sp))b=this;b&&a.$sq(b)}},isc.A.dragRepositionStart=function(){var a=isc.EH.dragTarget;if(!(!this.hasMember(a)||a.dragAppearance!="target")){var b=a.getPageLeft(),c=a.getPageTop();this.$3y(a,b,c)}},isc.A.$3y=function(a,b,c){this.$3z=a;var d=this.$30(a,"$31",this.showDragPlaceHolder);a.$32=d;var e=
this.instantRelayout;this.instantRelayout=false;this.addMember(d,this.getMemberNumber(a),true);a.deparent();a.eventParent=this;this.instantRelayout=e;a.moveTo(b,c);a.draw()},isc.A.dragRepositionStop=function(){var a=isc.EH.dragTarget;if(!(!this.members.contains(a)&&a!=this.$3z)){var b=a.dragAppearance,c=b==isc.EH.TARGET;if(!c&&b!=isc.EH.OUTLINE)return false;b=c?isc.EH.STOP_BUBBLING:false;this.$3z=null;if(a.eventParent==this)a.eventParent=null;if(a.dropSucceeded)return b;var d=a.$32;if(d!=null)if(a.parentElement!=
null||a.destroyed)this.$33(a);else{a.$32=null;this.getMemberNumber(d);c=d.getPageRect();var e=this,f=function(){e.replaceMember(d,a)};this.animateMembers?a.animateRect(c[0],c[1],c[2],c[3],f):f(true)}return b}},isc.A.$30=function(a,b,c){b=c?this.createAutoChild("placeHolder",void 0,isc.Canvas):isc.LayoutSpacer.create(void 0);b.setRect(a.getRect());b.$pn=b.getWidth();b.$po=b.getHeight();b.layoutAlign=a.layoutAlign;b.extraSpace=a.extraSpace||0;b.$3v=true;return b},isc.A.removePlaceHolder=function(a){if(this.animateMembers&&
!isc.isA.LayoutSpacer(a)){var b=this.$30(a);this.replaceMember(a,b);a.destroy();a=b}this.removeMember(a)},isc.A.willAcceptDrop=function(){if(!this.canAcceptDrop||!this.canDropComponents)return false;return this.invokeSuper(isc.Layout,"willAcceptDrop")},isc.A.dropOver=function(){if(this.willAcceptDrop()){this.showDropLine();isc.EventHandler.dragTarget.bringToFront();return true}},isc.A.dropMove=function(){this.willAcceptDrop()&&this.showDropLine()},isc.A.dropOut=function(){this.hideDropLine()},isc.A.dropStop=
function(){this.hideDropLine()});isc.B.push(isc.A.getDropComponent=function(a){if(!isc.isA.Palette(a))return a;a=a.transferDragData();return(isc.isAn.Array(a)?a[0]:a).liveObject},isc.A.drop=function(){if(this.willAcceptDrop()){var a=this.getDropPosition(),b=this.getDropComponent(isc.EventHandler.getDragTarget(),a);if(b){var c=this.members.indexOf(b);if(c==-1&&b.$32)c=this.members.indexOf(b.$32);if(c!=-1&&(c==a||c+1==a))return false;b.dropSucceeded=true;isc.Browser.isMoz?this.delayCall("$34",[b,a]):
this.$34(b,a);return isc.EH.STOP_BUBBLING}}},isc.A.$34=function(a,b){this.hideDropLine();var c=a.parentElement;c&&a.dragAppearance==isc.EH.OUTLINE&&this.animateMembers&&isc.isA.Layout(c)&&c.hasMember(a)&&c.$3y(a,isc.EH.dragOutline.getPageLeft(),isc.EH.dragOutline.getPageTop());c=false;if(this.members.contains(a)){if(this.members.indexOf(a)<b)c=true;this.removeMember(a,true)}else{var d=a.$32;if(d!=null){var e=this.getMemberNumber(d);if(e>=0&&e<b)c=true;d.parentElement.$33(a)}}var f=b-(c?1:0);if(!this.animateMembers||
a.dragAppearance!="target"&&a.dragAppearance!="outline"){this.addMember(a,f);delete a.dropSucceeded}else{var g=this.$30(a,"$35");this.addMember(g,b);this.reflowNow();this.$36=a;var h=this;d=g.getPageLeft();e=g.getPageTop();if(c){c=this.membersMargin+this.getMemberGap(a);if(this.vertical)e-=a.getVisibleHeight()+c;else d-=a.getVisibleWidth()+c}if(g==this.members.last()&&this.members.length>1){c=this.members[this.members.length-2].$22||0;if(this.vertical)e-=c;else d-=c}a.animateMove(d,e,function(){h.$36=
null;var i=h.instantRelayout;h.instantRelayout=false;g.destroy();a.dropSucceeded=null;h.addMember(a,f,true);(h.instantRelayout=i)&&h.reflowNow()},this.animateMemberTime)}},isc.A.$33=function(a){var b=a.$32;if(this.hasMember(b)){a.$32=null;this.removePlaceHolder(b)}},isc.A.$3q=function(){this.$36!=null&&this.$36.finishAnimation("move")},isc.A.getDropPosition=function(){var a=this.vertical?this.getOffsetY():this.getOffsetX();if(a<0)return 0;for(var b=this.vertical?this.$td:this.$tb,c=0;c<this.memberSizes.length;c++){var d=
this.memberSizes[c],e=this.members[c];if(a<b+d/2){if(e.canDropBefore===false)return false;return c}b+=d+this.membersMargin+this.getMemberGap(e)}return this.members.length},isc.A.$37=function(a){return a?this.getTopMargin()+this.getTopBorderSize():this.getLeftMargin()+this.getLeftBorderSize()},isc.A.getPositionOffset=function(a){if(this.members.length==0)return this.vertical?this.getPageTop()+this.$37(true)+this.$td:this.getPageLeft()+this.$37()+this.$tb;if(a<this.members.length){a=this.members[a];
return this.vertical?a.getPageTop():a.getPageLeft()}else{a=this.members[a-1];return this.vertical?a.getPageBottom():a.getPageRight()}},isc.A.showDropLine=function(){var a=this.getDropPosition();if(isc.isA.Number(a)){if(!(a<0)){this.$3n&&this.reflowNow();if(!this._dropLine)this._dropLine=this.makeDropLine();var b=this.dropLineThickness,c=this.getPositionOffset(a);this.$tb==null&&this.setLayoutMargin();c-=Math.round(((a==0?this.vertical?this.$td:this.$tb:a==this.members.length?-(this.vertical?this.$te:
this.$tc):this.membersMargin)+b)/2);a=this.vertical?this.$tb+this.$37():this.$td+this.$37(true);var d=this.vertical?this.getVisibleWidth()-this.getVMarginBorder()-this.$2u():this.getVisibleHeight()-this.getHMarginBorder()-this.$2v(),e=d+this.$2v();this._dropLine.setPageRect(this.vertical?this.getPageLeft()+a:c,this.vertical?c:this.getPageTop()+a,this.vertical?d:b,this.vertical?b:e);b=this.topElement||this;this._dropLine.getZIndex()<b.getZIndex()&&this._dropLine.moveAbove(b);this._dropLine.show()}}else this.hideDropLine()},
isc.A.hideDropLine=function(){this._dropLine&&this._dropLine.hide()},isc.A.makeDropLine=function(){var a=this.createAutoChild("dropLine",null,isc.Canvas);a.dropTarget=this;return a},isc.A.createResizeBar=function(a,b,c,d){b=isc.ClassFactory.getClass(this.resizeBarClass).createRaw();b.autoDraw=false;b.target=a;b.targetAfter=c;b.hideTarget=d;b.layout=this;b.vertical=!this.vertical;b.dragScrollDirection=this.vertical?isc.Canvas.VERTICAL:isc.Canvas.HORIZONTAL;b.dragScrollType="parentsOnly";b.init();return b},
isc.A.makeResizeBar=function(a,b,c,d){var e=a.$3f;if(e==null){e=a;var f,g=this.getMember(this.getMemberNumber(a)+1)||a;if(a.resizeBarTarget=="next"){e=g;f=true}e=this.createResizeBar(e,c,f,a.resizeBarHideTarget!=null?a.resizeBarHideTarget=="next"?g:a:e);a.$3f=e}if(this.vertical)e.setRect(b,c,d,this.resizeBarSize);else{if(this.isRTL())c-=this.resizeBarSize;e.setRect(c,b,this.resizeBarSize,d)}this.membersAreChildren?this.addChild(e):this.addPeer(e);e.isDrawn()||e.draw();e.isVisible()||e.show();return e},
isc.A.propertyChanged=function(a,b){this.invokeSuper(isc.Layout,"propertyChanged",a,b);isc.endsWith(a,"Margin")&&this.setLayoutMargin()},isc.A.getLengthAxis=function(){return this.vertical?"height":"width"},isc.A.$42g=function(a,b,c){var d=this.vertical?c:b,e=a.getDelta("width",this.vertical?b:c,a.getWidth());d=a.getDelta("height",d,a.getHeight());if(e!=null&&e!=0||d!=null&&d!=0)this.logDebug("resizing "+a+(a.isDrawn()?" (drawn): ":": ")+(b!=null?b+(this.vertical?"w ":"h "):"")+(c!=null?c+(this.vertical?
"h":"w"):""),"layout")},isc.A.reportSizes=function(a,b){if(this.logIsInfoEnabled(this.$2g)){for(var c="layoutChildren (reason: "+b+"):\nlayout specified size: "+this.getWidth()+"w x "+this.getHeight()+"h\ndrawn size: "+this.getVisibleWidth(true)+"w x "+this.getVisibleHeight(true)+"h\navailable size: "+this.getInnerWidth()+(!this.vertical?"w (length) x ":"w x ")+this.getInnerHeight()+(this.vertical?"h (length)\n":"h\n"),d=0;d<a.length;d++){var e=a[d];c+="   "+this.members[d]+"\n";c+="      "+e.$3g+
" drawn length"+(e.$3d?" (resizeLength: "+e.$3d+")":"")+" (policyLength: "+e.$27+") ("+e.$28+")\n";c+="      "+e.$3c+" drawn breadth ("+e.$3b+")\n"}if(a.length==0)c+="[No members]";this.logInfo(c,"layout")}});isc.B._maxIndex=isc.C+123;isc.defineClass("HLayout","Layout");isc.A=isc.HLayout.getPrototype();isc.A.orientation="horizontal";isc.A.animateMemberEffect={effect:"slide",startFrom:"L",endAt:"L"};isc.defineClass("VLayout","Layout");isc.A=isc.VLayout.getPrototype();isc.A.orientation="vertical";isc.defineClass("HStack",
"Layout");isc.A=isc.HStack.getPrototype();isc.A.orientation="horizontal";isc.A.hPolicy=isc.Layout.NONE;isc.A.animateMemberEffect={effect:"slide",startFrom:"L",endAt:"L"};isc.A.defaultWidth=20;isc.defineClass("VStack","Layout");isc.A=isc.VStack.getPrototype();isc.A.orientation="vertical";isc.A.vPolicy=isc.Layout.NONE;isc.A.defaultHeight=20;isc.defineClass("LayoutSpacer","Canvas");isc.A=isc.LayoutSpacer.getPrototype();isc.A.overflow="hidden";isc.A.draw=isc.Canvas.NO_OP;isc.A.redraw=isc.Canvas.NO_OP;
isc.A.$59d=true;isc.Layout.registerDupProperties("members");isc.defineClass("Button","StatefulCanvas");isc.A=isc.Button.getPrototype();isc.A.title="Untitled Button";isc.A.suppressClassName=true;isc.A.useEventParts=true;isc.A.autoFitDirection="horizontal";isc.A.baseStyle="button";isc.A.showDown=true;isc.A.showFocused=true;isc.A.showRollOver=true;isc.A.mozOutlineOffset="0px";isc.A.wrap=false;isc.A.height=20;isc.A.width=100;isc.A.overflow=isc.Canvas.HIDDEN;isc.A.redrawOnDisable=false;isc.A.redrawOnStateChange=
false;isc.A.cursor=isc.Canvas.HAND;isc.A.className=null;isc.A.canFocus=true;isc.A=isc.Button.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$38="px;";isc.A.$39=";";isc.A.$4a="border:";isc.A.$4b="padding-top:0px;padding-bottom:0px;";isc.A.$4c="padding:";isc.A.$4d="background-color:";isc.A.$4e="margin:0px;";isc.A.$4f=["' style='",,,,,,,,,,,,"'"];isc.A.$4g="</td></tr></tbody></table>";isc.A.$4h="<table cellspacing='0' cellpadding='0'><tbody><tr><td ";
isc.A.$4i="<table width='100%' cellspacing='0' cellpadding='0'><tbody><tr><td ";isc.A.$4j="font-size:1px;padding-right:";isc.A.$4k="font-size:1px;padding-left:";isc.A.$4l="px'>";isc.A.$4m="</td><td ";isc.A.$4n="class='";isc.A.$4p="'>";isc.A.$4q="' nowrap='true'>";isc.A.$4r="</td></tr></tbody></table>";isc.A.$o1="right";isc.A.$4s={align:"absmiddle",extraStuff:" style='vertical-align:middle' eventpart='icon'"};isc.A.$4t=[null,"$4u"];isc.B.push(isc.A.initWidget=function(){if(this.border!=null){this.$4v=
this.border;this.border=null}if(this.padding!=null){this.$4w=this.padding;this.padding=null}if(this.backgroundColor!=null){this.$4x=this.backgroundColor;this.backgroundColor=null}var a=isc.Button.$762;if(a==null)a=isc.Button.$762=isc.Browser.isIE||isc.Browser.isMoz&&!isc.Browser.isStrict&&isc.Canvas.getInstanceProperty("$ks")?false:true;this.redrawOnResize=a;return isc.StatefulCanvas.$b4.initWidget.call(this)},isc.A.getInnerHTML=function(){var a=isc.Button;if(!a.$4y){a._100Size=" width='100%' height='100%";
a._100Width=" width='100%";a.$xf="width='";a.$xg="' height='";a.$4z="' style='table-layout:fixed;overflow:hidden;";a.$40="'><tbody><tr><td class='";a.$41="'><tbody><tr><td nowrap='true' class='";var b=a.$4y=[];b[0]="<table cellspacing='0' cellpadding='0' ";b[9]="' align='";a.$42="' valign='center";a.$43="' valign='top";a.$44="' valign='bottom";a.$45="' tabindex='-1' onfocus='";a.$46=".$47()'>";a.$48="'>"}b=a.$4y;if(this.isPrinting||this.redrawOnResize==false){b[1]=this.isPrinting?a._100Width:a._100Size;
b[2]=null;b[3]=null;b[4]=null}else{b[1]=a.$xf;b[2]=this.getInnerWidth();b[3]=a.$xg;b[4]=this.getInnerHeight()}b[5]=this.overflow==isc.Canvas.VISIBLE?null:a.$4z;b[6]=this.wrap?a.$40:a.$41;b[7]=this.isPrinting?this.getPrintStyleName():this.getStateName();var c=this.cssText||this.$4v||this.$4w||this.$4x||this.margin||this.$49();b[8]=c?this.$5a():null;b[10]=this.$5b()?isc.Canvas.CENTER:this.align;b[11]=this.valign==isc.Canvas.TOP?a.$43:this.valign==isc.Canvas.BOTTOM?a.$44:a.$42;if(this.$kk()&&this._useNativeTabIndex){b[12]=
a.$45;b[13]=this.getID();b[14]=a.$46}else{b[12]=a.$48;b[13]=b[14]=null}this.fillInCell(b,15);return b.join(isc.emptyString)},isc.A.setOverflow=function(){var a=this.isDirty();this.Super("setOverflow",arguments);a||this.redraw()},isc.A.getPrintTagStart=function(){var a=this.currentPrintProperties;return[a.topLevelCanvas!=this&&a.inline?"<span ":"<div ",">"].join(isc.emptyString)},isc.A.$5a=function(){var a=this.$4f;a[1]=this.cssText?this.cssText:null;if(this.$4v!=null){a[2]=this.$4a;a[3]=this.$4v;
a[4]=this.$39}else{a[2]=null;a[3]=null;a[4]=null}var b=this.$4w;if(b!=null){a[5]=this.$4c;a[6]=b;a[7]=this.$39}else{a[5]=null;a[6]=null;a[7]=null}if(this.$49())a[7]=(a[7]||isc.emptyString)+this.$4b;if(this.$4x!=null){a[8]=this.$4d;a[9]=this.$4x;a[10]=this.$39}else{a[8]=null;a[9]=null;a[10]=null}a[11]=this.margin!=null?this.$4e:null;return a.join(isc.emptyString)},isc.A.$49=function(){return this.overflow==isc.Canvas.HIDDEN&&!this.isAnimating()&&(isc.Browser.isMoz||isc.Browser.isSafari||isc.Browser.isIE)},
isc.A.setBorder=function(a){this.$4v=a;this.markForRedraw()},isc.A.setPadding=function(a){this.$4w=a;this.markForRedraw()},isc.A.setBackgroundColor=function(a){this.$4x=a;this.markForRedraw()},isc.A.$5c=function(a,b){a[b]=this.$4g;a.length=b+1;return a},isc.A.$5b=function(){return this.icon!=null&&this.iconAlign!=null&&this.iconAlign==this.iconOrientation&&this.iconAlign!=this.align},isc.A.fillInCell=function(a,b){var c=this.isRTL(),d=this.getTitleHTML();if(this.icon){var e=this.iconOrientation!=
this.$o1,f=this.$5d();if(this.noIconSubtable){c=isc.Canvas.spacerHTML(this.iconSpacing,1);a[b]=e?isc.SB.concat(f,c,d):isc.SB.concat(d,c,f);this.$5c(a,b+1)}else{var g=this.$5b(),h;if(g)h=(this.iconWidth?this.iconWidth:this.iconSize)+(isc.Browser.isBorderBox?this.iconSpacing:0);a[b]=g?this.$4i:this.$4h;var i=this.isPrinting?this.getPrintStyleName():this.titleStyle?this.titleStyle+(this.isDisabled()?isc.StatefulCanvas.STATE_DISABLED:isc.emptyString):this.getStateName();if(e){a[++b]=this.$4n;a[++b]=i;
a[++b]=this.$4o;a[++b]=!c?this.$4j:this.$4k;a[++b]=this.iconSpacing;if(g){a[++b]="px;width:";a[++b]=h}a[++b]=this.$4l;a[++b]=f;a[++b]=this.$4m;a[++b]=this.$4n;a[++b]=i;a[++b]=this.$4o;if(g){a[++b]="' align='";a[++b]=this.align}a[++b]=this.wrap?this.$4p:this.$4q;a[++b]=d}else{a[++b]=this.$4n;a[++b]=i;a[++b]=this.$4o;if(g){a[++b]="' align='";a[++b]=this.align}a[++b]=this.wrap?this.$4p:this.$4q;a[++b]=d;a[++b]=this.$4m;a[++b]=this.$4n;a[++b]=i;a[++b]=this.$4o;a[++b]=!c?this.$4k:this.$4j;a[++b]=this.iconSpacing;
if(g){a[++b]="px;width:";a[++b]=h}a[++b]=this.$4l;a[++b]=f}a[++b]=this.$4r;this.$5c(a,b)}}else if(isc.Browser.isMoz){e=this.reliableMinHeight;a[b]=e?"<div>":null;a[b+1]=d;a[b+2]=e?"</div>":null;this.$5c(a,b+3)}else{a[b]=d;this.$5c(a,b+1)}},isc.A.$5d=function(){var a=this.$4s;if(this.$5e==null){this.$4t[0]=this.getID();this.$5e=this.$4t.join(isc.emptyString)}a.name=this.$5e;a.width=this.iconWidth||this.iconSize;a.height=this.iconHeight||this.iconSize;a.src=this.$5f();return this.imgHTML(a)},isc.A.$5f=
function(){var a=this.state,b=this.selected,c=this.getCustomState(),d=isc.StatefulCanvas;if(a==d.STATE_DISABLED&&!this.showDisabledIcon)a=null;else if(a==d.STATE_DOWN&&!this.showDownIcon)a=null;else if(a==d.STATE_OVER&&!this.showRollOverIcon)a=null;if(!this.showIconState)c=a=null;if(b&&!this.showSelectedIcon)b=false;d=this.showFocusedIcon?this.getFocusedState():null;var e=this.icon;if(isc.isAn.Object(e))e=e.src;return isc.Img.urlForState(e,b,d,a,null,c)},isc.A.getTitleHTML=function(a,b,c,d){a=this.invokeSuper(isc.Button,
"getTitleHTML",a,b,c,d);if(!this.padTitle||this.align==isc.Canvas.CENTER)return a;if(this.align==isc.Canvas.RIGHT)return a+isc.nbsp;else if(this.align==isc.Canvas.LEFT)return isc.nbsp+a},isc.A.setWrap=function(a){if(this.wrap!=a){this.wrap=a;this.markForRedraw("wrapChanged")}},isc.A.getTitleCell=function(){if(!this.getHandle())return null;return this.getHandle().firstChild.rows[0].cells[0]},isc.A.getButtonMinHeight=function(){var a=this.getTitleCell();if(!isc.Browser.isMoz)return a.scrollHeight+isc.Element.$ym(this.getStateName());
return a.firstChild.offsetHeight+isc.Element.$ym(this.getStateName())},isc.A.getPreferredWidth=function(){var a=this.wrap,b=this.overflow,c=this.width;this.setWrap(false);this.overflow=isc.Canvas.VISIBLE;this.setWidth(1);this.redrawIfDirty("getPreferredWidth");var d=this.getScrollWidth();this.setWrap(a);this.overflow=b;this.setWidth(c);return d},isc.A.getTitle=function(){if(this.useContents)return this.getContents();return this.title},isc.A.setTitle=function(a){this.title=a;this.markForRedraw("setTitle")},
isc.A.stateChanged=function(){if(this.redrawOnStateChange||!this.isDrawn())return this.Super("stateChanged");else{var a=this.isPrinting?this.getPrintStyleName():this.getStateName();this.suppressClassName?this.setTableClassName(a):this.setClassName(a);this.icon&&this.setImage(this.$5e,this.$5f())}},isc.A.setTableClassName=function(a){var b=this.getTitleCell();if(b){if(b.className!=a)b.className=a;if(this.icon&&!this.noIconSubtable&&!this.titleStyle)if((b=b.firstChild.rows[0].cells[this.iconOrientation==
this.$o1?0:1])&&b.className!=a)b.className=a;this.overflow==isc.Canvas.VISIBLE&&this.adjustOverflow()}},isc.A.setTitleStyle=function(a){this.titleStyle=a;if(!(!this.isDrawn()||!this.icon||this.noIconSubtable)){var b=this.getTitleCell();if(b)if((b=b.firstChild.rows[0].cells[1])&&b.className!=a)b.className=a}},isc.A.setIcon=function(a){var b=this.icon!=null;this.icon=a;b&&a!=null?this.setImage(this.$5e,this.$5f()):this.redraw()},isc.A.$47=function(){isc.EH.$h1("cFCS");this.focus();isc.EH.$h2()},isc.A.$ur=
function(){this.Super("$ur",arguments);this._useNativeTabIndex&&this.markForRedraw()});isc.B._maxIndex=isc.C+27;isc.Button.registerStringMethods({getTitle:null});isc.ClassFactory.defineClass("AutoFitButton","Button");isc.A=isc.AutoFitButton.getPrototype();isc.A.autoFit=true;isc.Button.registerStringMethods({iconClick:"element,ID,event"});isc.addGlobal("IButton",isc.Button);isc.defineClass("Img","StatefulCanvas");isc.A=isc.Img;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=
isc.A.Class;isc.A.$5g=[];isc.B.push(isc.A.urlForState=function(a,b,c,d,e,f){if(!a)return a;if(!d&&!e&&!b&&!c&&!f)return a;var g=a.lastIndexOf(isc.dot),h=a.substring(0,g);a=a.substring(g+1);g=this.$5g;g.length=1;g[0]=h;if(b){g[1]=isc.$ag;g[2]=isc.StatefulCanvas.SELECTED}if(c){g[3]=isc.$ag;g[4]=isc.StatefulCanvas.FOCUSED}if(d){g[5]=isc.$ag;g[6]=d}if(f){g[7]=isc.$ag;g[8]=f}if(e){g[9]=isc.$ag;g[10]=e}g[11]=isc.dot;g[12]=a;return g.join(isc.$ad)});isc.B._maxIndex=isc.C+1;isc.A=isc.Img.getPrototype();isc.A.name=
"main";isc.A.src="blank.gif";isc.A.imageType=isc.Img.STRETCH;isc.A.suppressClassName=false;isc.A.mozOutlineOffset="0px";isc.A.showTitle=false;isc.A.usePNGFix=true;isc.A=isc.Img.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$5h="<TABLE WIDTH=";isc.A.$5i=" HEIGHT=";isc.A.$5j=" BORDER=0 CELLSPACING=0 CELLPADDING=0><TR>";isc.A.$5k="<TD VALIGN=center ALIGN=center>";isc.A.$5l="<TD BACKGROUND=";isc.A.$5m="</TD></TR></TABLE>";isc.A.sizeImageToFitOverflow=
false;isc.B.push(isc.A.initWidget=function(){isc.StatefulCanvas.$b4.initWidget.call(this);this.redrawOnResize=this.imageType!=isc.Img.STRETCH},isc.A.setImageType=function(a){if(this.imageType!=a){this.imageType=a;this.markForRedraw();this.redrawOnResize=this.imageType!=isc.Img.STRETCH}},isc.A.getInnerHTML=function(){var a=this.sizeImageToFitOverflow?this.getOverflowedInnerWidth():this.getInnerWidth(),b=this.sizeImageToFitOverflow?this.getOverflowedInnerHeight():this.getInnerHeight(),c=this.imageType;
if(c==isc.Img.STRETCH||c==isc.Img.NORMAL){if(c==isc.Img.NORMAL){a=this.imageWidth;b=this.imageHeight}return this.imgHTML(this.getURL(),a,b,this.name,this.extraStuff,null,this.activeAreaHTML)}var d=isc.SB.create();d.append(this.$5h,a,this.$5i,b,this.$5j);c==isc.Img.TILE?d.append(this.$5l,this.getImgURL(this.getURL()),this.$oa,isc.Canvas.spacerHTML(a,b)):d.append(this.$5k,this.imgHTML(this.getURL(),this.imageWidth,this.imageHeight,this.name,this.extraStuff,null,this.activeAreaHTML));d.append(this.$5m);
return d.toString()},isc.A.getOverflowedInnerWidth=function(){return this.getVisibleWidth()-this.getHMarginBorder()},isc.A.getOverflowedInnerHeight=function(){return this.getVisibleHeight()-this.getVMarginBorder()},isc.A.$ub=function(){if(!(this.redrawOnResize!=false||!this.isDrawn())){var a=this.getImage(this.name).style,b=this.sizeImageToFitOverflow?this.getOverflowedInnerWidth():this.getInnerWidth(),c=this.sizeImageToFitOverflow?this.getOverflowedInnerHeight():this.getInnerHeight();this.$u9(a,
this.$o6,b);this.$u9(a,this.$o5,c)}},isc.A.$10=function(){this.Super("$10",arguments);if(!(this.overflow!=isc.Canvas.VISIBLE||!this.sizeImageToFitOverflow)){var a=this.getImage(this.name);a=a?a.style:null;if(a!=null){var b=this.getOverflowedInnerWidth(),c=this.getOverflowedInnerHeight();this.$u9(a,this.$o6,b);this.$u9(a,this.$o5,c)}}},isc.A.setSrc=function(a){if(!(a==null||this.src==a)){this.src=a;this.resetSrc()}},isc.A.resetSrc=function(){if(this.isDrawn())this.imageType!=isc.Img.TILE?this.setImage(this.name,
this.getURL()):this.markForRedraw("setSrc on tiled image")},isc.A.getURL=function(a,b,c,d){return isc.Img.urlForState(this.src,c!=null?c:this.selected,d!=null?d:this.getFocusedState(),b!=null?b:this.state,a,this.getCustomState())},isc.A.stateChanged=function(){this.Super("stateChanged");this.resetSrc()});isc.B._maxIndex=isc.C+11;isc.ClassFactory.defineClass("StretchImg","StatefulCanvas");isc.A=isc.StretchImg.getPrototype();isc.A.vertical=true;isc.A.capSize=2;isc.A.overflow=isc.Canvas.HIDDEN;isc.A.imageType=
isc.Img.STRETCH;isc.A.items=[{name:"start",width:"capSize",height:"capSize"},{name:"stretch",width:"*",height:"*"},{name:"end",width:"capSize",height:"capSize"}];isc.A.autoCalculateSizes=true;isc.A.cacheImageSizes=true;isc.A.suppressClassName=false;isc.A.mozOutlineOffset="0px";isc.A.gripImgSuffix="grip";isc.A.showTitle=false;isc.A=isc.StretchImg.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.getURL=isc.Img.getInstanceProperty("getURL");
isc.A.$5o="<NOBR>";isc.A.$5p="</NOBR>";isc.A.$5q="<BR>";isc.A.$5r=" STYLE='display:block'";isc.A.$5h="<TABLE style='font-size:1px;' CELLPADDING=0 CELLSPACING=0 BORDER=0>";isc.A.$5m="</TABLE>";isc.A.$5s="<TR><TD class='";isc.A.$5t="</TD></TR>";isc.A.$5u="<TD class='";isc.A.$61k="'>";isc.A.$5v="</TD>";isc.A.renderStretchImgInTable=isc.Browser.isMoz||isc.Browser.isIE8Strict;isc.A.oversizeStretchImg=isc.Browser.isMoz&&isc.Browser.isUnix;isc.A.$5w="blank";isc.B.push(isc.A.initWidget=function(){if(this.src==
null)this.src=this.vertical?this.vSrc:this.hSrc;if(this.showGrip){this.iconSpacing=this.labelHPad=this.labelVPad=0;this.align=isc.Canvas.CENTER;this.icon=this.getImgURL(this.getURL(this.gripImgSuffix));this.iconSize=this.gripSize;this.iconWidth=this.vertical?this.gripBreadth:this.gripLength;this.iconHeight=this.vertical?this.gripLength:this.gripBreadth;this.showRollOverIcon=this.showRollOverGrip;this.showDownIcon=this.showDownGrip}isc.StatefulCanvas.$b4.initWidget.call(this);this.redrawOnResize=this.imageType!=
isc.Img.STRETCH},isc.A.shouldShowLabel=function(){if(this.showGrip)return true;return this.Super("shouldShowLabel",arguments)},isc.A.getPart=function(a){for(var b=0,c=this.items.length,d;b<c;b++){d=this.items[b];if(d.name==a)return d}return null},isc.A.getPartNum=function(a){for(var b=0,c=this.items.length,d;b<c;b++){d=this.items[b];if(d.name==a)return b}return null},isc.A.getSize=function(a){if(!this.$5x||this.$64y)this.resizeImages();return this.$5x[a]},isc.A.$10=function(a,b,c,d){this.overflow==
isc.Canvas.VISIBLE&&this.$ub(null,null,true);this.invokeSuper(isc.StretchImg,"$10",a,b,c,d)},isc.A.setOverflow=function(a,b,c,d){var e=false;if(this.overflow==isc.Canvas.VISIBLE&&(this.getScrollWidth()>this.getWidth()||this.getScrollHeight()>this.getHeight()))e=true;this.invokeSuper(isc.StretchImg,"setOverflow",a,b,c,d);e&&this.$ub(null,null,true)},isc.A.$ub=function(a,b,c){if(this.redrawOnResize!=false||!this.isDrawn())this.$64y=true;else if(!this.$493){this.resizeImages();var d=this.items;a=c||
isc.isA.Number(a)&&a!=0;c=c||isc.isA.Number(b)&&b!=0;b=this.vertical&&a||!this.vertical&&c;a=this.vertical&&c||!this.vertical&&a;for(c=0;c<d.length;c++){var e=this.getImage(d[c].name);if(e!=null){var f=this.oversizeStretchImg&&(this.vertical?d[c].height==isc.star:d[c].width==isc.star),g=f?e.parentNode:null;if(b){var h=this.vertical?this.getWidth():this.getHeight();this.$u9(e.style,this.vertical?this.$o6:this.$o5,h);if(f&&g!=null)this.$u9(g.style,this.vertical?this.$o6:this.$o5,h)}if(a){h=this.$5x[c];
if(f&&g!=null){this.$u9(g.style,this.vertical?this.$o5:this.$o6,h);h+=2}this.$u9(e.style,this.vertical?this.$o5:this.$o6,h)}}}}},isc.A.resizeImages=function(){if(!this.$493){var a=this.vertical?this.$o5:this.$o6,b=this.items,c=this.$5x;if(c==null)c=this.$5x=[];c.length=b.length;for(var d=0;d<b.length;d++)c[d]=b[d][a];isc.Canvas.applyStretchResizePolicy(c,this.getImgLength(),1,true,this)}},isc.A.getInnerHTML=function(){var a=this.items,b=a.length,c=this.vertical;if(this.$64y||!this.$5x||this.autoCalculateSizes&&
!this.cacheImageSizes)this.resizeImages();delete this.$64y;var d=this.$5x,e=c?this.getImgBreadth():this.getImgLength(),f=c?this.getImgLength():this.getImgBreadth(),g=isc.SB.create();this.logIsDebugEnabled(this.$n3)&&this.logDebug("drawing with imageType: '"+this.imageType+"' and sizes "+this.$5x,"drawing");var h=!c&&this.isRTL();if(this.imageType==isc.Img.TILE){g.append("<TABLE CELLSPACING=0 CELLPADDING=0 BORDER=0 WIDTH=",e," HEIGHT=",f,"><TBODY>",c?"":"<TR>");for(var i=0;i<b;i++){var j=h?b-i-1:i,
k=d[j];if(k>0){var l=a[j],m=this.getImgURL(this.$5z(l));c?g.append("<TR><TD WIDTH=",e," HEIGHT=",k,l.name?' NAME="'+this.getCanvasName()+l.name+'"':null,' BACKGROUND="',m,'" class="',this.getItemStyleName(l),'">',isc.Canvas.spacerHTML(1,k),"</TD></TR>"):g.append("<TD WIDTH=",k," HEIGHT=",f,l.name?' NAME="'+this.getCanvasName()+l.name+'"':null,' BACKGROUND="',m,'" class="',this.getItemStyleName(l),'">',isc.Canvas.spacerHTML(k,1),"</TD>")}}g.append(c?"":"</TR>","</TABLE>")}else if(this.imageType==isc.Img.CENTER){g.append("<TABLE CELLSPACING=0 CELLPADDING=0 BORDER=0 WIDTH=",
e," HEIGHT=",f,"><TBODY>",c?"":"<TR VALIGN=center>");for(i=0;i<b;i++){j=h?b-i-1:i;k=d[j];if(k>0){l=a[j];m=this.$5z(l);c?g.append("<TR VALIGN=center><TD WIDTH=",e," HEIGHT=",k," ALIGN=center",' class="',this.getItemStyleName(l),'">',this.imgHTML(m,null,null,l.name),"</TD></TR>"):g.append("<TD WIDTH=",k," HEIGHT=",f," ALIGN=center",' class="',this.getItemStyleName(l),'">',this.imgHTML(m,null,null,l.name),"</TD>")}}g.append(c?"":"</TR>","</TABLE>")}else{var n=this.renderStretchImgInTable;if(n)g.append(this.$5h);
else c||g.append(this.$5o);var o=[" class=",null," "];for(i=0;i<b;i++){j=h?b-i-1:i;var s=i==0,r=i==b-1;k=d[j];if(k>0){l=a[j];m=this.$5z(l);var t;if(!n)if(t=this.getItemStyleName(l)){o[1]=t;t=o.join(isc.emptyString)}else t=isc.emptyString;if(c){if(n){g.append(this.$5s);g.append(this.getItemStyleName(l));g.append(this.$61k)}r=k;if(s=this.oversizeStretchImg&&l.width==isc.star){g.append("<div style='overflow:hidden;height:",k,"px;width:",e,"px;'>");r=k+2}g.append(this.imgHTML(m,e,r,l.name,isc.Browser.isDOM?
t+this.$5r:t));s&&g.append("</div>");if(n)g.append(this.$5t);else!isc.Browser.isDOM&&j<b-1&&g.append(this.$5q)}else{if(n){g.append(s?this.$5s:this.$5u);g.append(this.getItemStyleName(l));g.append(this.$61k)}j=k;if(s=this.oversizeStretchImg&&l.width==isc.star){g.append("<div style='overflow:hidden;width:",k,"px;height:",f,"px;'>");j=k+2}g.append(this.imgHTML(m,j,f,l.name,t));s&&g.append("</div>");if(n)g.append(r?this.$5t:this.$5v)}}}if(n)g.append(this.$5m);else c||g.append(this.$5p)}return g.toString()},
isc.A.getItemStyleName=function(a){var b=a.baseStyle||this.itemBaseStyle;if(!b)return null;var c=a.state?a.state:this.getState(),d=a.selected!=null?a.selected:this.selected;a=this.showFocused&&!this.showFocusedAsOver&&!this.isDisabled()?a.focused!=null?a.focused:this.focused:false;return b+this.$61l(c,d?isc.StatefulCanvas.SELECTED:null,a?isc.StatefulCanvas.FOCUSED:null)},isc.A.$5z=function(a){if(a.src)return a.src;if(a.name==this.$5w)return isc.Canvas.$wz;return this.getURL(a.name,a.state?a.state:
this.getState(),a.selected!=null?a.selected:this.selected,this.showFocused&&!this.showFocusedAsOver&&!this.isDisabled()?a.focused!=null?a.focused:this.focused:false)},isc.A.setState=function(a,b){if(b==null){var c=this.items.clearProperty("state"),d=this.state!=a;this.Super("setState",[a]);c&&!d&&this.stateChanged()}else{if(c=this.getPart(b)){if(c.state==a)return;c.state=a}this.stateChanged()}},isc.A.stateChanged=function(a){this.Super("stateChanged");if(this.isDrawn())if(this.imageType==isc.Img.TILE||
this.$5x==null)this.markForRedraw("setState (tiled images)");else if(isc.Browser.isWin2k&&isc.Browser.isIE)this.markForRedraw("Win2k IE image state change");else for(var b=0,c=0;c<this.items.length;c++)if(this.$5x[c]>0){var d=this.items[c];if((!a||d.name==a)&&d.name!=this.$5w){this.setImage(d.name,this.$5z(d));var e=this.getImage(d.name);if(e){if(isc.Browser.isMoz)e=e.parentNode;e.className=this.getItemStyleName(d)}}}else b++},isc.A.setSrc=function(a){if(!(a==null||this.src==a)){this.src=a;this.markForRedraw()}},
isc.A.inWhichPart=function(){var a=this.items[this.vertical?this.inWhichPosition(this.$5x,this.getOffsetY()):this.inWhichPosition(this.$5x,this.getOffsetX(),this.getTextDirection())];return a?a.name:null});isc.B._maxIndex=isc.C+16;isc.defineClass("Label","Button");isc.A=isc.Label.getPrototype();isc.A.align=isc.Canvas.LEFT;isc.A.wrap=true;isc.A.showTitle=false;isc.A.height=null;isc.A.width=null;isc.A.overflow="visible";isc.A.canFocus=false;isc.A.styleName="normal";isc.A.baseStyle=null;isc.A.cursor=
"default";isc.A.showRollOver=false;isc.A.showFocus=false;isc.A.showDown=false;isc.A.showDisabled=false;isc.A.useContents=true;isc.ClassFactory.defineClass("Progressbar","StretchImg");isc.A=isc.Progressbar.getPrototype();isc.A.percentDone=0;isc.A.length=100;isc.A.breadth=20;isc.A.vertical=false;isc.A.skinImgDir="images/Progressbar/";isc.A.src="[SKIN]progressbar.gif";isc.A.cacheImageSizes=false;isc.A.backgroundColor="CCCCCC";isc.A.verticalItems=[{name:"v_empty_end",size:3},{name:"v_empty_stretch",size:0},
{name:"v_empty_start",size:3},{name:"v_end",size:3},{name:"v_stretch",size:0},{name:"v_start",size:3}];isc.A.horizontalItems=[{name:"h_start",size:3},{name:"h_stretch",size:0},{name:"h_end",size:3},{name:"h_empty_start",size:3},{name:"h_empty_stretch",size:0},{name:"h_empty_end",size:3}];isc.A=isc.Progressbar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function(){if(this.vertical){this.setWidth(this.breadth);
this.setHeight(this.length);this.items=this.verticalItems}else{this.setWidth(this.length);this.setHeight(this.breadth);this.items=this.horizontalItems}this.Super(this.$oc)},isc.A.resizeImages=function(){var a=this.getLength(),b=this.items,c=this.$5x=[],d=this.percentDone;if(this.vertical){c[0]=d<100?b[0].size:0;c[2]=d<100?b[2].size:0;c[3]=d>0?b[3].size:0;c[5]=d>0?b[5].size:0}else{c[0]=d>0?b[0].size:0;c[2]=d>0?b[2].size:0;c[3]=d<100?b[3].size:0;c[5]=d<100?b[5].size:0}a-=c[0]+c[2]+c[3]+c[5];if(this.vertical){c[4]=
Math.ceil(a*d/100);c[1]=Math.floor(a*(100-d)/100)}else{c[1]=Math.ceil(a*d/100);c[4]=Math.floor(a*(100-d)/100)}},isc.A.setPercentDone=function(a){if(this.percentDone!=a){this.percentDone=a=Math.min(100,Math.max(0,a));this.isDrawn()&&this.markForRedraw("percentDone updated");this.percentChanged()}},isc.A.percentChanged=function(){},isc.A.getLength=function(){return this.vertical?this.getHeight():this.getWidth()},isc.A.getBreadth=function(){return this.vertical?this.getWidth():this.getHeight()},isc.A.setLength=
function(a){this.length=a;this.vertical?this.setHeight(a):this.setWidth(a)},isc.A.setBreadth=function(a){this.breadth=a;this.vertical?this.setWidth(a):this.setHeight(a)});isc.B._maxIndex=isc.C+8;isc.ClassFactory.defineClass("Rangebar","Progressbar");isc.A=isc.Rangebar.getPrototype();isc.A.value=0;isc.A.minValue=0;isc.A.maxValue=99;isc.A.title="";isc.A.vertical=true;isc.A.showTitle=true;isc.A.showRange=true;isc.A.showValue=true;isc.A.allLabelDefaults={width:50,height:20,spacing:5};isc.A.titleLabelDefaults=
{width:100,className:"rangebarTitle"};isc.A.rangeLabelDefaults={className:"rangebarRange"};isc.A.valueLabelDefaults={className:"rangebarValue"};isc.A.forceOverrides={$jo:false,autoDraw:false};isc.A.flipValues=false;isc.A=isc.Rangebar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function(){this.Super(this.$oc);this.titleLabelDefaults=isc.addProperties({},this.allLabelDefaults,this.titleLabelDefaults);this.valueLabelDefaults=
isc.addProperties({},this.allLabelDefaults,this.valueLabelDefaults);this.rangeLabelDefaults=isc.addProperties({},this.allLabelDefaults,this.rangeLabelDefaults);if(this.showRange){this.$50=this.addPeer(this.$51("min"));this.$52=this.addPeer(this.$51("max"))}if(this.showValue)this._valueLabel=this.addPeer(this.$53());if(this.showTitle)this._titleLabel=this.addPeer(this.$54());this.setValue(this.value)},isc.A.resized=function(){this.$55()},isc.A.$55=function(){if(this.showRange&&this.$50&&this.$52){var a=
this.$56("min"),b=this.$56("max");this.$50.moveTo(a.left,a.top);this.$52.moveTo(b.left,b.top)}if(this.showValue&&this._valueLabel){a=this.$57();this._valueLabel.moveTo(a.left,a.top)}if(this.showTitle&&this._titleLabel){a=this.$58();this._titleLabel.moveTo(a.left,a.top)}},isc.A.$51=function(a){var b=this.$56(a);return isc.Label.newInstance({ID:this.getID()+"_"+a+"Label",contents:a=="min"?this.minValueLabel?this.minValueLabel:this.minValue:this.maxValueLabel?this.maxValueLabel:this.maxValue},this.rangeLabelDefaults,
b,this.forceOverrides)},isc.A.$56=function(a){var b={},c=this.rangeLabelDefaults;a=a=="min"&&!this.flipValues||this.flipValues;if(this.vertical){b.left=this.left+this.width+c.spacing;b.align=isc.Canvas.LEFT;if(a){b.top=this.getTop()+this.getHeight()-c.height;b.valign=isc.Canvas.BOTTOM}else{b.top=this.getTop();b.valign=isc.Canvas.TOP}}else{b.top=this.getTop()+this.getHeight()+c.spacing;b.valign=isc.Canvas.TOP;if(a){b.left=this.getLeft();b.align=isc.Canvas.LEFT}else{b.left=this.getLeft()+this.getWidth()-
c.width;b.align=isc.Canvas.RIGHT}}return b},isc.A.$54=function(){var a=this.$58();return isc.Label.newInstance({ID:this.getID()+"_titleLabel",contents:this.title},this.titleLabelDefaults,a,this.forceOverrides)},isc.A.$58=function(){var a={},b=this.titleLabelDefaults;if(this.vertical){a.left=this.left+this.width/2-b.width/2;a.top=this.top-b.height-b.spacing;a.align=isc.Canvas.CENTER}else{a.left=this.left-b.width-b.spacing;a.top=this.top+this.getHeight()/2-b.height/2;a.align=isc.Canvas.RIGHT}return a},
isc.A.$53=function(){var a=this.$57();return isc.Label.newInstance({ID:this.getID()+"_valueLabel",contents:this.value,mouseUp:"return false;",observes:[{source:this,message:"valueChanged",action:"observer.setContents(this.getValue())"}]},this.valueLabelDefaults,a,this.forceOverrides)},isc.A.$57=function(){var a={},b=this.valueLabelDefaults;if(this.vertical){a.left=this.left-b.width-b.spacing;a.top=this.top+this.getHeight()/2-b.height/2;a.align=isc.Canvas.RIGHT;a.valign=isc.Canvas.CENTER}else{a.left=
this.left+this.width/2-b.width/2;a.top=this.top-b.height-b.spacing;a.align=isc.Canvas.CENTER;a.valign=isc.Canvas.BOTTOM}return a},isc.A.getValue=function(){return this.value},isc.A.setValue=function(a){if(this.value!=a){if(a>this.maxValue)a=this.maxValue;else if(a<this.minValue)a=this.minValue;this.value=a;this.percentDone=100*(this.value-this.minValue)/(this.maxValue-this.minValue);this.markForRedraw();this.valueChanged()}},isc.A.valueChanged=function(){});isc.B._maxIndex=isc.C+12;isc.ClassFactory.defineClass("Toolbar",
"Layout");isc.A=isc.Toolbar.getPrototype();isc.A.vertical=false;isc.A.overflow=isc.Canvas.HIDDEN;isc.A.height=20;isc.A.buttonConstructor="Button";isc.A.canReorderItems=false;isc.A.canResizeItems=false;isc.A.canRemoveItems=false;isc.A.reorderOnDrop=true;isc.A.tabWithinToolbar=true;isc.A.allowButtonReselect=false;isc.A.buttonDefaults={click:function(){this.Super("click",arguments);this.parentElement.itemClick(this,this.parentElement.getButtonNumber(this))},doubleClick:function(){this.Super("doubleClick",
arguments);this.parentElement.itemDoubleClick(this,this.parentElement.getButtonNumber(this))},setSelected:function(){var a=this.isSelected();this.Super("setSelected",arguments);if(this.parentElement.allowButtonReselect||a!=this.isSelected())this.isSelected()?this.parentElement.buttonSelected(this):this.parentElement.buttonDeselected(this)},dragAppearance:isc.EventHandler.NONE,setTabIndex:function(){this.Super("setTabIndex",arguments);this.$59=null},setAccessKey:function(a,b){if(!b)this.$6a=null;this.Super("setAccessKey",
[a])},focusChanged:function(){this.hasFocus&&this.parentElement.$6b&&this.parentElement.$6b(this)},$kf:function(a,b){this.parentElement.$kf&&this.parentElement.$kf(a,b,this)}};isc.A=isc.Toolbar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.draw=function(a,b,c,d){if(isc.$cv)arguments.$cw=this;if(!this.readyToDraw())return this;this.$6c||this.setButtons();this.invokeSuper(isc.Toolbar,"draw",a,b,c,d)},isc.A.keyPress=function(){var a=
this.ns.EH.lastEvent.keyName;if(!this.tabWithinToolbar)if(this.vertical&&a=="Arrow_Up"||!this.vertical&&a=="Arrow_Left"){this.$6d(false);return false}else if(this.vertical&&a=="Arrow_Down"||!this.vertical&&a=="Arrow_Right"){this.$6d();return false}return this.Super("keyPress",arguments)},isc.A.$6d=function(a,b){a=a!=false;var c=b!=null?b:this.getFocusButtonIndex();if(c==null)c=a?-1:this.buttons.length;for(c+=a?1:-1;c>=0&&c<this.buttons.length;){var d=this.getMembers()[c];if(d.$kk()){d.focus();return true}c+=
a?1:-1}return false},isc.A.getFocusButtonIndex=function(){for(var a=this.getButtons(),b,c=0;c<a.length;c++)if(a[c].hasFocus){b=c;break}return b},isc.A.$kf=function(a,b,c){if(!isc.EH.targetIsMasked(this,b)){var d=c?this.members.indexOf(c):null;if(this.tabWithinToolbar){if(this.$6d(a,d))return}else if(a&&d==null)if(this.$6g!=null)return this.fb.focus()}return this.Super("$kf",arguments)},isc.A.$kk=function(a,b,c,d){var e=this.members;if(e&&e.length>0)for(var f=0;f<e.length;f++)if(e[f].$kk())return true;
return this.invokeSuper(isc.Toolbar,"$kk",a,b,c,d)},isc.A.setFocus=function(a){if(this.$vl()){var b=this.getFocusButtonIndex();if(a){if(b==null)this.$6g?this.$6g.setFocus(true):this.$6d()}else b!=null&&this.members&&this.members[b].setFocus(false)}},isc.A.focusAtEnd=function(a){a=!!a;this.$6d(a,a?-1:this.buttons.length)},isc.A.$6e=function(a,b){if(!a.$59&&(a.$vy()!=null||a.$vz()!=null))a.$rp();a.$59=true;a.tabIndex!=b&&a.$vk(b,false)},isc.A.updateMemberTabIndex=function(){},isc.A.$v2=function(){},
isc.A.$6f=function(a,b){a.$6a=true;a.setAccessKey(b,true)},isc.A.setupButtonFocusProperties=function(){var a=this.$6g;if((!a||!isc.isA.Canvas(a)||a.visibility==isc.Canvas.HIDDEN)&&this.buttons.length>0){for(var b,c=0;c<this.members.length;c++)if(isc.isA.Canvas(this.members[c])&&this.members[c].visibility!=isc.Canvas.HIDDEN){b=this.members[c];break}this.$6b(b);a=this.$6g}b=this.tabWithinToolbar?this.getTabIndex():-1;var d=this.getButtons();for(c=0;c<d.length;c++){var e=d[c];if(e!=a&&(e.tabIndex==null||
e.$sp))this.$6e(e,b)}},isc.A.$6b=function(a){if(this.$6g!=a){if(a.accessKey!=this.accessKey&&(a.accessKey==null||a.$6a))this.$6f(a,this.accessKey);if(a.tabIndex==null||a.$sp||a.$59)this.$6e(a,this.getTabIndex());var b=this.$6g;if(b!=null&&(b.tabIndex==null||b.$sp||b.$59)){this.tabWithinToolbar||this.$6e(b,-1);b.accessKey!=null&&b.$6a&&this.$6f(b,null)}this.$6g=a}},isc.A.$vk=function(a,b,c,d){this.invokeSuper(isc.Toolbar,"$vk",a,b,c,d);if(this.tabWithinToolbar){a=this.getButtons();for(b=0;b<a.length;b++)if(a[b].tabIndex==
null||a[b].$sp||a[b].$59)this.$6e(a[b],this.getTabIndex())}else{a=this.$6g;if(a!=null){this.$6g=null;this.$6b(a)}}},isc.A.setAccessKey=function(){this.Super("setAccessKey",arguments);var a=this.$6g;if(a!=null){this.$6g=null;this.$6b(a)}},isc.A.getLength=function(a,b,c,d){if(this.innerWidth!=null)return this.innerWidth;return this.invokeSuper(isc.Toolbar,"getLength",a,b,c,d)},isc.A.setButtons=function(a){this.$6c=true;if(a)this.buttons=a;if(this.members==null)this.members=[];var b=this.members.duplicate();
for(a=0;a<b.length;a++)this.buttons.contains(b[a])||b[a].destroy();if(this.buttons==null)this.buttons=[];b=[];for(a=0;a<this.buttons.length;a++){var c=this.buttons[a];isc.isA.Canvas(c)||(c=this.makeButton(c));b[b.length]=c;if(isc.isA.StatefulCanvas(c))if(c.getActionType()==isc.StatefulCanvas.RADIO)if(c.selected)this.lastSelectedButton=c}this.addMembers(b,0);this.canResizeItems&&this.setResizeRules();this.setupButtonFocusProperties()},isc.A.buttonShouldHiliteAccessKey=function(){if(this.$6a)return false;
return this.hiliteAccessKey},isc.A.makeButton=function(a){a.width=a.width||null;a.height=a.height||null;a.canDrag=this.canReorderItems||this.canDragSelectItems||this.canRemoveItems;a.canDragResize=a.canDragResize!=null?a.canDragResize&&this.canResizeItems:this.canResizeItems;a.canAcceptDrop=this.canAcceptDrop;a.canDrop=this.canRemoveItems;a.shouldHiliteAccessKey=this.buttonShouldHiliteAccessKey;return this.$6h(a,null)},isc.A.$6h=function(a,b){var c=a.buttonConstructor?a.buttonConstructor:this.buttonConstructor;
c=this.ns.ClassFactory.getClass(c);c=c.newInstance({autoDraw:false},this.buttonDefaults,this.buttonProperties,a,b);if(!isc.isA.StatefulCanvas(c))return c;if(c.getActionType()==isc.StatefulCanvas.RADIO&&c.radioGroup===void 0||c.defaultRadioGroup!=null){var d=c.defaultRadioGroup!=null?c.defaultRadioGroup:this.getID();c.addToRadioGroup(d)}return c},isc.A.addButtons=function(a,b){if(a!=null){isc.isAn.Array(a)||(a=[a]);this.$6c||this.setButtons();a.removeEvery(null);this.buttons.addListAt(a,b);for(var c=
[],d=0;d<a.length;d++){var e=a[d];e=isc.isA.Canvas(e)?e:this.makeButton(e);c[d]=e}this.addMembers(c,b);this.canResizeItems&&this.setResizeRules();c.map("show")}},isc.A.removeButtons=function(a){if(a!=null){isc.isAn.Array(a)||(a=[a]);for(var b=[],c=0;c<a.length;c++){a[c]=this.buttons[this.getButtonNumber(a[c])];if(a[c]==null){this.logWarn("removeButtons(): unable to find button for item number "+c+" in the array passed in.  Skipping this item.");a.removeItem(c);c-=1}else b[c]=this.getButton(this.buttons.indexOf(a[c]))}this.buttons.removeList(a);
this.removeMembers(b)}},isc.A.getButton=function(a){a=this.getButtonNumber(a);return this.getMember(a)},isc.A.getButtonNumber=function(a){if(isc.isAn.Object(a)&&!isc.isA.Canvas(a))return this.buttons.indexOf(a);return this.getMemberNumber(a)},isc.A.getButtons=function(){return this.members},isc.A.setCanResizeItems=function(a){if(this.canResizeItems!=a){this.canResizeItems=a;var b=this.getButtons();if(b){for(var c=0;c<b.length;c++){var d=b[c];d.canDragResize=d.canDragResize!=null?d.canDragResize&&
a:a}this.setResizeRules()}}},isc.A.setResizeRules=function(){if(this.members){var a=this.isRTL(),b,c;if(this.vertical){b={T:isc.Canvas.ROW_RESIZE,B:isc.Canvas.ROW_RESIZE};c=["T","B"];a=["B"]}else{b={L:isc.Canvas.COL_RESIZE,R:isc.Canvas.COL_RESIZE};c=["L","R"];a=a?["L"]:["R"]}for(var d=false,e=0;e<this.members.length;e++){var f=this.members[e];if(f.canDragResize){f.resizeFrom=d||e==0?a:c;f.edgeCursorMap=b;d=false}else{f.resizeFrom=f.edgeCursorMap=null;d=true}}}},isc.A.getSelectedButton=function(){return this.lastSelectedButton},
isc.A.selectButton=function(a){if(this.members)(a=this.getButton(a))&&isc.isA.StatefulCanvas(a)&&a.select()},isc.A.deselectButton=function(a){(a=this.getButton(a))&&a.deselect()},isc.A.buttonSelected=function(a){if(a.getActionType()==isc.Button.RADIO)this.lastSelectedButton=a},isc.A.buttonDeselected=function(){},isc.A.itemClick=function(){},isc.A.itemDoubleClick=function(){},isc.A.getMouseOverButtonIndex=function(){return this.inWhichPosition(this.memberSizes,this.vertical?this.getOffsetY():this.getOffsetX(),
this.getTextDirection())},isc.A.prepareForDragging=function(){for(var a=this.ns.EH,b=a.lastEvent.target;b.dragTarget;)b=b.dragTarget;var c=a.dragOperation;if((this.canResizeItems&&c=="dragResize"||this.canReorderItems&&c=="drag")&&this.members.contains(b))if(c=="dragResize"){if(this.vertical&&["T","B"].contains(a.resizeEdge)||!this.vertical&&["L","R"].contains(a.resizeEdge)){a.dragOperation="dragResizeMember";return}}else if(c=="drag"){a.dragOperation="dragReorder";return}return this.Super("prepareForDragging",
arguments)},isc.A.getDropPosition=function(){var a=this.getMouseOverButtonIndex(),b=this.ns.EH,c=this.reorderStyle=="explorer"||b.dropTarget&&b.dropTarget.parentElement==this;if(c&&a>=0){var d=this.memberSizes[a],e=this.vertical?this.getOffsetY():this.getOffsetX();e-=this.memberSizes.slice(0,a).sum();e>d/2&&a++}d=this.members.length;c=c?d:d-1;if(a==-2&&this.containsEvent())return c;d=this.dragStartPosition||0;if(a<0||a>c)a=d;else if(b.dragTarget&&b.dragTarget.parentElement==this&&this.members[a]&&
this.members[a].canReorder==false)a=d;return a},isc.A.dragReorderStart=function(){var a=this.ns.EH,b=a.dragTarget;if(b.canReorder==false)return false;b.showDown&&b.setState(isc.StatefulCanvas.STATE_DOWN);this.dragStartPosition=this.getButtonNumber(b);return a.STOP_BUBBLING},isc.A.dragReorderMove=function(){var a=this.ns.EH,b=this.dragStartPosition,c=this.getDropPosition();this.dragCurrentPosition=c;var d=this.members.duplicate();d.slide(b,c);this.stackMembers(d,null,false);return a.STOP_BUBBLING},
isc.A.dragReorderStop=function(){var a=this.ns.EH,b=this.dragStartPosition,c=this.dragCurrentPosition;a.dragTarget.setState(isc.StatefulCanvas.STATE_UP);if(c==b)return false;this.reorderOnDrop&&this.reorderItem(c,b);this.itemDragReordered&&this.itemDragReordered(b,c);return a.STOP_BUBBLING},isc.A.dragStop=function(){var a=this.ns.EH;a.dragTarget.setState(isc.StatefulCanvas.STATE_UP);this.hideDropLine();return a.STOP_BUBBLING},isc.A.reorderItem=function(a,b){this.reorderItems(a,a+1,b)},isc.A.reorderItems=
function(a,b,c){this.buttons.slideRange(a,b,c);this.reorderMembers(a,b,c);this.setResizeRules()},isc.A.dragResizeMemberStart=function(){var a=this.ns.EH,b=a.dragTarget,c=this.getButtonNumber(b),d=this.isRTL(),e=false;if(!d&&a.resizeEdge=="L"||d&&a.resizeEdge=="R"){e=true;c--;a.resizeEdge=d?"L":"R"}else if(a.resizeEdge=="T"){e=true;c--;a.resizeEdge="B"}if(c<0||c>=this.members.length||b==null)return false;a.dragTarget=b=this.members[c];b.$6i=b.canDrop;b.canDrop=false;this.$6j=c;b.showDown&&b.setState(isc.StatefulCanvas.STATE_DOWN);
if(e)(b=this.members[c+1])&&b.setState(isc.StatefulCanvas.STATE_UP);return a.STOP_BUBBLING},isc.A.dragResizeMemberMove=function(){var a=this.ns.EH,b=a.dragTarget;b.resizeToEvent();b.redrawIfDirty("dragResize");return a.STOP_BUBBLING},isc.A.dragResizeMemberStop=function(){var a=this.ns.EH,b=a.dragTarget;b.canDrop=b.$6i;b.setState(isc.StatefulCanvas.STATE_UP);b.resizeToEvent();b=this.vertical?b.getHeight():b.getWidth();this.resizeItem(this.$6j,b);this.itemDragResized&&this.itemDragResized(this.$6j,
b);return a.STOP_BUBBLING},isc.A.resizeItem=function(a,b){var c=this.members[a];this.vertical?c.setHeight(b):c.setWidth(b)});isc.B._maxIndex=isc.C+48;isc.Toolbar.registerStringMethods({itemClick:"item,itemNum",itemDragResized:"itemNum,newSize",itemDragReordered:"itemNum,newPosition"});isc.defineClass("ImgButton","Img");isc.A=isc.ImgButton.getPrototype();isc.A.baseStyle="imgButton";isc.A.showDown=true;isc.A.showFocused=true;isc.A.showRollOver=true;isc.A.showTitle=false;isc.A.cursor=isc.Button.$b4.cursor;
isc.A.src="[SKIN]/ImgButton/button.png";isc.A.canFocus=true;isc.A.overflow=isc.Canvas.HIDDEN;isc.defineClass("StretchImgButton","StretchImg");isc.A=isc.StretchImgButton.getPrototype();isc.A.useEventParts=true;isc.A.baseStyle="stretchImgButton";isc.A.showDown=true;isc.A.showFocused=true;isc.A.showRollOver=true;isc.A.showTitle=true;isc.A.hiliteAccessKey=true;isc.A.src="[SKIN]/button/button.png";isc.A.vertical=false;isc.A.capSize=12;isc.A.autoFitDirection="horizontal";isc.A.cursor=isc.Button.$b4.cursor;
isc.A.canFocus=true;isc.StretchImgButton.registerStringMethods({iconClick:""});isc.defineClass("ToolStrip","Layout");isc.A=isc.ToolStrip.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.height=20;isc.A.defaultWidth=250;isc.A.styleName="toolStrip";isc.A.vertical=false;isc.A.resizeBarClass="ToolStripResizer";isc.A.resizeBarSize=14;isc.A.separatorClass="ToolStripSeparator";isc.A.separatorSize=8;isc.A.formWrapperConstructor="DynamicForm";isc.A.formWrapperDefaults=
{showTitle:false,numCols:1,overflow:"visible",width:1,height:1};isc.B.push(isc.A.initWidget=function(a,b,c,d,e,f){this.members=this.$62r(this.members);this.invokeSuper(isc.ToolStrip,this.$oc,a,b,c,d,e,f);this.vertical&&this.verticalStyleName!=null&&this.setStyleName(this.verticalStyleName)},isc.A.$62r=function(a){var b=isc.ClassFactory.getClass(this.separatorClass);if(a==null)return null;for(var c=[],d=0;d<a.length;d++){var e=a[d];if(e=="separator"){var f=b.createRaw();f.autoDraw=false;f.vertical=
!this.vertical;if(this.vertical)f.height=this.separatorSize;else f.width=this.separatorSize;f.completeCreation();c.add(f)}else if(e=="resizer"&&d>0)a[d-1].showResizeBar=true;else if(e=="starSpacer")c.add(isc.LayoutSpacer.create({width:"*"}));else if(isc.isA.ToolStripResizer(e)&&d>0){a[d-1].showResizeBar=true;e.destroy()}else{if(isc.isA.ToolStripSeparator(e)){f=e;f.vertical=!this.vertical;f.setSrc(this.vertical?f.hSrc:f.vSrc);this.vertical?f.setHeight(this.separatorSize):f.setWidth(this.separatorSize);
f.markForRedraw()}c.add(e)}}return c},isc.A.addMembers=function(a,b,c,d,e){if(a){isc.isAn.Array(a)||(a=[a]);var f=a[0],g=isc.isA.ToolStripResizer(f);if(f=="resizer"||g){b=b||this.members.length;f=Math.min(b,this.members.length)-1;if(f>0){f=this.getMember(f);if(f!=null){f.showResizeBar=true;this.reflow()}}f=a.shift();g&&f.destroy()}a=this.$62r(a);return this.invokeSuper(isc.ToolStrip,"addMembers",a,b,c,d,e)}},isc.A.addFormItem=function(a,b,c){if(isc.isA.Canvas(a)){this.addMember(a,c);return a}b=this.createAutoChild("formWrapper",
b);b.setItems([a]);this.addMember(b,c);return b});isc.B._maxIndex=isc.C+4;isc.defineClass("ToolStripSeparator","Img");isc.A=isc.ToolStripSeparator.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.skinImgDir="images/ToolStrip/";isc.A.vSrc="[SKIN]separator.png";isc.A.hSrc="[SKIN]hseparator.png";isc.A.layoutAlign="center";isc.B.push(isc.A.initWidget=function(){if(isc.isA.Img(this))this.src=this.vertical?this.vSrc:this.hSrc;this.Super("initWidget",
arguments)});isc.B._maxIndex=isc.C+1;isc.defineClass("ToolStripButton","StretchImgButton");isc.A=isc.ToolStripButton.getPrototype();isc.A.showTitle=true;isc.A.showRollOver=true;isc.A.showDown=true;isc.A.labelVPad=0;isc.A.labelHPad=7;isc.A.autoFit=true;isc.A.src="[SKIN]/ToolStrip/button/button.png";isc.A.capSize=3;isc.A.height=22;isc.defineClass("SectionStack","VLayout");isc.addGlobal("ListBar",isc.SectionStack);isc.A=isc.SectionStack.getPrototype();isc.A.overflow="hidden";isc.A.styleName="sectionStack";
isc.A.sectionHeaderClass="SectionHeader";isc.A.headerHeight=20;isc.A.printHeaderStyleName="printHeader";isc.A.canResizeSections=true;isc.A.canResizeStack=true;isc.A.canReorderSections=false;isc.A.scrollSectionIntoView=true;isc.A.useGlobalSectionIDs=false;isc.A.animateMemberEffect="wipe";isc.A.visibilityMode="mutex";isc.A.forceFill=true;isc.A.itemIndent=0;isc.A.showExpandControls=true;isc.A=isc.SectionStack.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=
isc.A.Class;isc.A.sectionNameIndex=0;isc.B.push(isc.A.initWidget=function(){this.Super(this.$oc);if(this.canReorderSections)this.canAcceptDrop=true;if(this.visibilityMode=="mutex")this.animateSections=false;if(this.animateSections!=null)this.animateMembers=this.animateSections;if(this.groups!=null&&this.sections==null)this.sections=this.groups;var a=this.sections;this.sections=[];this.addSections(a,null,true)},isc.A.$735=function(){if(this.canReorderSections){var a=this.ns.EH.dragTarget;return this.sections!=
null&&this.sections.contains(a)}return false},isc.A.willAcceptDrop=function(){if(this.$735())return this.ns.EH.dragTarget.canReorder!=false;return this.Super("willAcceptDrop",arguments)},isc.A.getDropPosition=function(a){if(!this.$735())return this.getEditModeDropPosition(a);a=this.vertical?this.getOffsetY():this.getOffsetX();if(a<0)return 0;for(var b=this.vertical?this.$td:this.$tb,c=this.sections[0],d=0,e=0,f=0;f<this.members.length;){for(var g=0,h=this.members[f],i=0;h!=null&&(h==c||c.items&&c.items.contains(h));){if(h.isVisible()){g+=
this.memberSizes[e];i=this.membersMargin+this.getMemberGap(h);g+=i;e++}f+=1;h=this.members[f]}if(a<b+(g-i)/2){if(c&&c.canDropBefore===false)return false;return this.members.indexOf(c)}b+=g;d+=1;c=this.sections[d]}return this.members.length},isc.A.drop=function(){if(this.willAcceptDrop()){var a=this.getDropPosition(),b=this.getDropComponent(isc.EventHandler.getDragTarget(),a);if(this.canReorderSections&&b!=null&&this.sections.contains(b)){var c=this.sections.indexOf(b),d,e=this.members[a];if(e==null)d=
this.sections.length;else for(var f=0;f<this.sections.length;f++)if(e==this.sections[f]||this.sections[f].items&&this.sections[f].items.contains(e))d=f;if(e=d>c)d-=1;if(d!=c){this.sections.slide(c,d);c=this.members.indexOf(b);var g=c+1,h=b.items||[];for(f=0;f<h.length;f++)if(this.members.contains(h[f]))g+=1;if(e)a-=g-c;this.logInfo("Drag reorder of sections - section:"+b+" moved to:"+d+" - reordering members from "+c+" to "+g+" target position:"+a);this.reorderMembers(c,g,a)}}}},isc.A.addItem=function(a,
b,c){var d=this.createCanvas(b);if(isc.isA.Canvas(d)){a=this.getSection(a);if(c==null)c=0;if(c>=a.items.length)c=a.items.length;a.items.addAt(d,c);if(this.isDrawn()&&a.expanded){c=1+this.members.indexOf(a)+c;this.addMember(d,c)}else if(d.isDrawn()){d.clear();d.deparent()}}else this.logWarn("addItem passed:"+this.echo(b)+" cannot be resolved to a Canvas - ignoring")},isc.A.removeItem=function(a,b){this.getSection(a).items.remove(b);this.members.contains(b)&&this.removeMember(b)},isc.A.setSectionProperties=
function(a,b){a=this.getSection(a);if(a!=null)isc.isA.Canvas(a)?a.setProperties(b):isc.addProperties(a,b)},isc.A.removeChild=function(a,b){isc.Layout.$b4.removeChild.call(this,a,b);var c=this.sections;if(c)for(var d=0;d<c.length;d++){var e=c[d];if(a==e){this.removeSection(a);break}else if(e.items&&e.items.contains(a)){this.removeItem(e,a);break}}},isc.A.addSections=function(a,b,c){if(a!=null){isc.isAn.Array(a)||(a=[a]);if(b==null||b>this.sections.length)b=this.sections.length;for(var d=0;d<a.length;d++){var e=
a[d];if(e){if(e.showHeader==null)e.showHeader=true;if(e.canHide==null)e.canHide=true;var f=e.expanded!=null?e.expanded:e.autoShow||e.showHeader==false;if(e.hidden==null)e.hidden=false;if(e.items==null)e.items=[];else if(!isc.isA.Array(e.items))e.items=[e.items];var g=isc.ClassFactory.getClass(this.sectionHeaderClass).createRaw();g.autoDraw=false;g._generated=true;g.expanded=f;g.isSectionHeader=true;if(!this.editingOn)g.noDoubleClicks=true;g.visibility=e.hidden||e.showHeader==false?isc.Canvas.HIDDEN:
isc.Canvas.INHERIT;g.dragScrollType="parentsOnly";g.dragScrollDirection=this.vertical?isc.Canvas.VERTICAL:isc.Canvas.HORIZONTAL;g.layout=this;if(this.vertical)g.height=this.headerHeight;else g.width=this.headerHeight;var h=null,i=null;if(e.name!=null)h=e.name;if(e.ID!=null){if(h==null)h=e.ID;if(this.useGlobalSectionIDs){var j=window[e.ID];if(j!=null)this.logWarn("Note: Section Stack Section has ID specified as '"+e.ID+"'. This collides with an existing "+(isc.isA.Canvas(j)?"SmartClient component ID.":
"object reference.")+" The existing object will be replaced by the generated header for this section. To avoid applying section IDs to their corresponding section headers, you can set sectionStack.useGlobalSectionIDs to false")}else{i=e.ID;delete e.ID}}if(h==null)h="section"+this.sectionNameIndex++;j=h;for(var k=this.sections.find("name",h);k!=e&&k!=null;){h="section"+this.sectionNameIndex++;k=this.sections.find("name",h)}j!=h&&this.logWarn("Specified name for section:"+j+" collided with name for existing section in this stack. Replacing with auto-generated name:"+
h);e.name=h;isc.addProperties(g,e);g.__ref=null;g.$75q=e;e.$75r=g;g.getSectionConfig=function(){return this.$75q};e.getSectionHeader=function(){return this.$75r};if(i!=null)e.ID=i;if(this.canReorderSections&&g.canReorder!=false){g.canDragReposition=true;g.canDrop=true}g.completeCreation();e=g;this.sections.addAt(e,b+d);this.addMember(e,this.$6k(e));if(f&&!e.hidden){this.expandSection(e);this.$6l=e}else for(f=0;f<e.items.length;f++){g=e.items[f];g.parentElement&&g.parentElement!=this&&g.deparent();
isc.isA.Canvas(g)&&g.isDrawn()&&g.clear()}if(e.items)if(this.canResizeSections)e.resizeable!=null&&e.items.setProperty("resizeable",e.resizeable);else e.items.setProperty("resizeable",false)}}if(c&&this.$6l==null)if(a.first().expanded!=false){a=this.sections.first();this.expandSection(a);this.$6l=a}}},isc.A.addSection=function(a,b){this.addSections(a,b)},isc.A.removeSection=function(a){isc.isAn.Array(a)||(a=[a]);for(var b=0;b<a.length;b++){var c=a[b];c=this.getSectionHeader(c);for(var d=0;d<c.items.length;d++){var e=
c.items[d];this.members.contains(e)&&this.removeMember(e)}this.sections.remove(c);!c.destroying&&!c.destroyed&&c.destroy()}},isc.A.getSections=function(){return this.sections.getProperty("name")},isc.A.reorderSection=function(a,b){this.moveSection(a,b)},isc.A.moveSection=function(a,b){isc.isAn.Array(a)||(a=[a]);for(var c=0;c<a.length;c++){var d=this.getSectionHeader(a[c]);if(!(d==null||b==null)){var e=this.sections.indexOf(d),f=this.members.indexOf(d),g=f+1;if(this.sectionIsExpanded(d)&&d.items)g+=
d.items.length;d=this.members.indexOf(this.sections[b]);this.sections.slide(e,b);this.reorderMembers(f,g,d)}}},isc.A.showSection=function(a,b){this.$6m(a,true,false,b)},isc.A.expandSection=function(a,b){isc.isAn.Array(a)||(a=[a]);this.visibilityMode=="mutex"&&this.collapseSection(this.$6l);this.$6m(a,false,true,b)},isc.A.$6m=function(a,b,c,d){if(a!=null){isc.isAn.Array(a)||(a=[a]);for(var e=[],f=0;f<a.length;f++){var g=this.getSectionHeader(a[f]);if(g==null)this.logWarn("showSection(): no such section ["+
f+"]: "+this.echo(a[f]));else{if(g.showHeader&&g.hidden&&(b||c)){e.add(g);g.hidden=false}if(c||g.expanded){if(g.setExpanded&&!g.setOpen)g.setExpanded(true);else g.setOpen&&g.setOpen(true);this.$6l=g;if(g.items){for(var h=g.items.length-1;h>=0;h--){var i=this.createCanvas(g.items[h]);if(isc.isA.Canvas(i))g.items[h]=i;else{this.logWarn("Section with title:"+g.title+" contains invalid item:"+g.items[h]+" - ignoring this item.");g.items.removeAt(h)}}h=this.$6k(g)+1;this.addMembers(g.items,h,true);e.addList(g.items)}}}}var j=
this;this.showMembers(e,function(){j.$6n(a,d)})}},isc.A.$6n=function(a,b){if(a.length!=0){if(this.isDrawn()){var c=this.getSectionHeader(a[0]);if(this.vscrollOn&&this.scrollSectionIntoView){var d=c.showHeader?c:c.items.first();c=c.items.last();this.delayCall("scrollIntoView",[d.getLeft(),d.getTop(),d.getVisibleWidth(),c.getVisibleHeight(),"left","top"],0)}}b!=null&&this.fireCallback(b)}},isc.A.hideSection=function(a,b){this.$6o(a,true,false,b)},isc.A.collapseSection=function(a,b){this.$6o(a,false,
true,b)},isc.A.$6o=function(a,b,c,d){if(a!=null){isc.isAn.Array(a)||(a=[a]);for(var e=[],f=0;f<a.length;f++){var g=this.getSectionHeader(a[f]);if(g==null)this.logWarn("hideSection(): no such section ["+f+"]: "+this.echo(a[f]));else{if(b&&!g.hidden){g.hidden=true;e.add(g)}if(c||g.expanded){if(c)if(g.setExpanded&&!g.setOpen)g.setExpanded(false);else g.setOpen&&g.setOpen(false);if(g.items)for(var h=0;h<g.items.length;h++)this.members.contains(g.items[h])&&e.add(g.items[h])}}}if(this.forceFill&&this.getVisibleHeight()<=
this.getHeight()){a=this.getMemberNumber(this.getSectionHeader(a[0]));var i;b=false;for(f=a-1;f>=0;f--){c=this.members[f];if(!e.contains(c))if(this.memberIsDragResizeable(c))if(this.memberHasAutoResizeableHeight(c)){b=true;break}else if(i==null)i=c}if(!b)for(f=a+1;f<this.members.length;f++){c=this.members[f];if(!e.contains(c))if(this.memberIsDragResizeable(c))if(this.memberHasAutoResizeableHeight(c)){b=true;break}else if(i==null)i=c}if(!b&&i!=null)i.$po=null}this.hideMembers(e,d)}},isc.A.sectionIsVisible=
function(a){a=this.getSectionHeader(a);if(!a)return false;if(a.showHeader&&a.isVisible())return true;a=a.items.first();if(a==null||!isc.isA.Canvas(a)||!a.isDrawn()||a.visibility==isc.Canvas.HIDDEN)return false;return true},isc.A.getVisibleSections=function(){for(var a=[],b=0;b<this.sections.length;b++)this.sectionIsVisible(this.sections[b])&&a.add(this.sections[b].name);return a},isc.A.sectionIsExpanded=function(a){return this.getSectionHeader(a).expanded},isc.A.getExpandedSections=function(){var a=
this.sections.findAll("expanded",true);return a==null?[]:a.getProperty("name")},isc.A.setSectionTitle=function(a,b){var c=this.getSectionHeader(a);c&&c.setTitle(b)},isc.A.getSectionHeader=function(a){return isc.Class.getArrayItem(a,this.sections,"name")},isc.A.getSection=function(a){return this.getSectionHeader(a)},isc.A.getSectionConfig=function(a){a=this.getSectionHeader(a);if(!isc.isA.Canvas(a))return a;return a.$75q},isc.A.getSectionNumber=function(a){return isc.isA.String(a)?this.sections.findIndex("name",
a):this.sections.indexOf(a)},isc.A.$6k=function(a){var b=this.getMemberNumber(a);if(b!=-1)return b;a=this.sections.indexOf(a);if(a<=0)return a;a=this.sections[a-1];b=a.items?a.items.last():null;return this.hasMember(b)?this.getMemberNumber(b)+1:this.getMemberNumber(a)+1},isc.A.sectionHeaderClick=function(a){if(this.onSectionHeaderClick&&this.onSectionHeaderClick(a)==false)return false;if(this.visibilityMode=="mutex"){if(this.sectionIsExpanded(a)){var b=this.sections.indexOf(a);if(b==this.sections.getLength()-
1)b=0;else b+=1;b=this.sections[b];this.collapseSection(a);this.expandSection(b);this.$6l=b;return false}this.collapseSection(this.$6l);this.expandSection(a)}else this.sectionIsExpanded(a)?this.collapseSection(a):this.expandSection(a);this.$6l=a;return false},isc.A.getSectionCursor=function(a){a=this.getSectionConfig(a);return a==null?isc.Canvas.DEFAULT:a.cursor?a.cursor:a.canCollapse!=false?isc.Canvas.HAND:this.canRorderSections&&a.canReorder!=false?"move":isc.Canvas.DEFAULT},isc.A.getDragResizeTarget=
function(a){var b=this.getMemberNumber(a),c;this.$6p=0;for(var d=b-1;d>=0;d--){a=this.getMember(d);if(this.memberIsDragResizeable(a)){c=a;break}if(a.isSectionHeader||!a.resizeable&&a.isVisible())this.$6p+=a.getVisibleHeight()}if(!c)return null;if(this.canResizeStack)return c;var e=this.getMembers().length;for(d=b+1;d<e;d++){a=this.getMember(d);if(this.memberIsDragResizeable(a))return c}return null},isc.A.memberIsDragResizeable=function(a){if(!a.isSectionHeader&&a.resizeable!==false&&a.isVisible()&&
(!this.memberHasInherentLength(a)||a.resizeable))return true},isc.A.memberHasAutoResizeableHeight=function(a){a=a.$po;return a==null||isc.isA.String(a)&&(a=="*"||isc.endsWith(a,"%"))},isc.A.getMemberDefaultBreadth=function(a,b){var c=b;a.isSectionHeader||(c-=this.itemStartIndent!=null||this.itemEndIndent!=null?this.itemStartIndent+this.itemEndIndent:this.itemIndent);return c},isc.A.getMemberOffset=function(a,b,c){var d=this.itemIndent;if(a.isSectionHeader)return b;if(this.itemStartIndent!=null)d=
this.itemStartIndent;if(c==isc.Canvas.RIGHT||c==isc.Canvas.BOTTOM)d*=-1;return b+d});isc.B._maxIndex=isc.C+39;isc.$6q={icon:"[SKIN]SectionHeader/opener.gif",overflow:"hidden",baseStyle:"sectionHeader",showDisabled:true,expanded:false,setExpanded:function(a){this.expanded=a;this.stateChanged()},setOpen:function(a){this.setExpanded(a)},getCustomState:function(){return this.expanded?"opened":"closed"}};isc.$6r={overflow:"hidden",wrap:false,height:20,expanded:false,canCollapse:true,getSectionStack:function(){var a=
this.layout;return a?isc.isA.String(a)?window[a]:a:null},keyPress:function(){var a=this.getSectionStack();if(a!=null){var b=isc.EH.getKey();if(b=="Enter"||b=="Space"){if(this.canCollapse)return a.sectionHeaderClick(this)}else if(b=="Arrow_Up"||b=="Arrow_Down"){a=a.getDragResizeTarget(this);if(a==null)return false;b=b=="Arrow_Up"?-5:5;this.bringToFront();this.resizeTarget(a,true,this.resizeInRealTime,0,0,this.getPageTop()+b);this.$6s=a}}},keyUp:function(){if(this.$6s){var a=isc.EH.getKey();if(a=="Arrow_Up"||
a=="Arrow_Down"){this.finishTargetResize(this.$6s,true,this.resizeInRealTime);this.$6s=null}}},$kk:function(){var a=this.getSectionStack();return a?a.canTabToHeaders==true:true},$71i:function(){return this.getSectionStack()?true:false},schemaName:"SectionStackSection",addItem:function(a,b){if(this.$71i()){var c=this.getSectionStack();c.addItem(this,a,b);c.expandSection(this)}},removeItem:function(a){this.$71i()&&this.getSectionStack().removeItem(this,a)},canDrag:true,dragAppearance:"none",isSectionHeader:true,
dragStart:function(){if(this.$71i()){var a=this.getSectionStack().getDragResizeTarget(this);this.$6t=a;if(a==null)return false;this.bringToFront()}},dragMove:function(){if(this.$71i()){var a=this.getSectionStack().$6p;this.resizeTarget(this.$6t,true,this.resizeInRealTime,0-isc.EH.dragOffsetY,a)}},dragStop:function(){this.finishTargetResize(this.$6t,true,this.resizeInRealTime)},destroy:function(){if(!this.expanded&&this.items)for(var a=this.items,b=0;b<a.length;b++)isc.isA.Canvas(a[b])&&a[b].parentElement!=
this.parentElement&&a[b].destroy();return this.Super("destroy",arguments)},controlsLayoutDefaults:{_constructor:isc.HStack,defaultLayoutAlign:"center",snapTo:"R",membersMargin:5,layoutEndMargin:5,addAsChild:true},addControls:function(){if(this.controls){this.addAutoChild("controlsLayout",{height:this.getInnerHeight(),align:this.isRTL()?"left":"right",members:this.controls});this.allowContentAndChildren=true}},refreshControls:function(){if(this.controls){this.controlsLayout||this.addControls();this.controlsLayout.addMembers(this.controls);
this.allowContentAndChildren=true}},getPrintStyleName:function(){var a=this.parentElement;if(a&&a.printHeaderStyleName!=null)this.printStyleName=a.printHeaderStyleName;return this.Super("getPrintStyleName",arguments)},shouldPrint:true};isc.defineClass("SectionHeader","Label");isc.A=isc.SectionHeader.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.useContents=false;isc.B.push(isc.A.click=function(){if(!this.contains(isc.EH.lastTarget))if(this.canCollapse&&
this.$71i())return this.getSectionStack().sectionHeaderClick(this)},isc.A.draw=function(a,b,c,d){if(isc.$cv)arguments.$cw=this;if(this.readyToDraw()){this.align=this.isRTL()?"right":"left";if(!this.canCollapse||this.$71i()&&this.getSectionStack()&&this.getSectionStack().showExpandControls==false){this.icon=null;this.showIconState=false}this.setCursor(this.getCurrentCursor());this.invokeSuper(isc.SectionHeader,"draw",a,b,c,d);this.addControls();if(this.headerControls!=null){this.headerLayout=isc.HLayout.create({autoDraw:false,
width:this.getInnerWidth(),height:this.getInnerHeight(),members:this.headerControls});this.addChild(this.headerLayout);this.allowContentAndChildren=true}}},isc.A.getCurrentCursor=function(){var a=this.cursor;if(this.getSectionStack()&&this.getSectionStack().getSectionCursor!=null)a=this.getSectionStack().getSectionCursor(this);return a});isc.B._maxIndex=isc.C+3;isc.SectionHeader.addMethods(isc.$6r,isc.$6q);isc.defineClass("ImgSectionHeader","HLayout");isc.A=isc.ImgSectionHeader.getPrototype();isc.B=
isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.backgroundDefaults=isc.addProperties({titleStyle:"sectionHeaderTitle",src:"[SKIN]SectionStack/header.gif",backgroundColor:"#a0a0a0",click:function(){if(this.parentElement&&this.parentElement.editingOn)return this.Super("click",arguments);if(this.parentElement.canCollapse)if(this.parentElement.getSectionStack())return this.parentElement.getSectionStack().sectionHeaderClick(this.parentElement)},width:"100%",height:"100%",
addAsChild:true,getPrintStyleName:function(){if(this.parentElement)return this.parentElement.getPrintStyleName();return this.Super("getPrintStyleName",arguments)}},isc.$6q);isc.B.push(isc.A.setExpanded=function(a){this.expanded=a;this.background&&this.background.setExpanded(a)},isc.A.setOpen=function(a){this.setExpanded(a)},isc.A.setTitle=function(a){this.title=a;this.background&&this.background.setTitle(a)},isc.A.draw=function(a,b,c,d){if(isc.$cv)arguments.$cw=this;if(this.readyToDraw()){var e={title:this.title,
expanded:this.expanded,canFocus:false};if(this.icon)e.icon=this.icon;if(!this.canCollapse||this.$71i()&&this.getSectionStack()&&this.getSectionStack().showExpandControls==false){e.icon=null;e.showIconState=false}e.align=this.isRTL()?"right":"left";e.canDragReposition=this.canDragReposition;e.canDrop=this.canDrop;e.dragTarget=this;var f=this.getCurrentCursor();this.setCursor(f);e.cursor=f;this.addAutoChild("background",e,isc.StretchImgButton);this.addControls();this.addAutoChildren(this.headerControls);
this.background.sendToBack();this.invokeSuper(isc.ImgSectionHeader,"draw",a,b,c,d)}},isc.A.getCurrentCursor=function(){var a=this.cursor;if(this.getSectionStack()&&this.getSectionStack().getSectionCursor!=null)a=this.getSectionStack().getSectionCursor(this);return a},isc.A.getPrintHTML=function(a){if(this.background)return this.background.getPrintHTML(a);return this.Super("getPrintHTML",arguments)});isc.B._maxIndex=isc.C+6;isc.ImgSectionHeader.addMethods(isc.$6r);isc.SectionStack.registerStringMethods({onSectionHeaderClick:"sectionHeader"});
isc.SectionStack.registerDupProperties("sections",["items"]);isc.ClassFactory.defineClass("Scrollbar","StretchImg");isc.defineClass("ScrollThumb","StretchImg");isc.A=isc.ScrollThumb.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoDraw=false;isc.A._generated=true;isc.A.$jp=false;isc.A.$jo=false;isc.A._redrawWithParent=false;isc.A.showDisabled=false;isc.A.capSize=2;isc.A.backgroundColor="#EEEEEE";isc.A.textDirection="ltr";isc.A.skinImgDir=
"images/Scrollbar/";isc.A.hSrc="[SKIN]hthumb.gif";isc.A.vSrc="[SKIN]vthumb.gif";isc.A.canDrag=true;isc.A.dragAppearance=isc.EventHandler.NONE;isc.A.dragStartDistance=0;isc.A.dragScrollType="parentsOnly";isc.A.click=isc.EventHandler.stopBubbling;isc.A.doubleClick=isc.EventHandler.stopBubbling;isc.A.mouseMove=isc.EventHandler.stopBubbling;isc.B.push(isc.A.mouseOver=function(){return this.scrollbar.thumbOver()},isc.A.mouseOut=function(){return this.scrollbar.thumbOut()},isc.A.mouseDown=function(){return this.scrollbar.thumbDown()},
isc.A.dragStart=function(){return this.scrollbar.thumbDragStart()},isc.A.dragMove=function(){return this.scrollbar.thumbMove()},isc.A.dragStop=function(){return this.scrollbar.thumbDragStop()},isc.A.mouseUp=function(){return this.scrollbar.thumbUp()},isc.A.keyPress=function(){return this.ns.EH.bubbleEvent(this.scrollbar,this.ns.EH.eventTypes.KEY_PRESS)},isc.A.keyDown=function(){return this.ns.EH.bubbleEvent(this.scrollbar,this.ns.EH.eventTypes.KEY_DOWN)},isc.A.keyUp=function(){return this.ns.EH.bubbleEvent(this.scrollbar,
this.ns.EH.eventTypes.KEY_UP)},isc.A.mouseWheel=function(){return this.ns.EH.bubbleEvent(this.scrollbar,this.ns.EH.eventTypes.MOUSE_WHEEL)},isc.A.masterMoved=function(){var a=this.masterElement;a&&a.$ss||this.Super("masterMoved",arguments)});isc.B._maxIndex=isc.C+12;isc.defineClass("HScrollThumb",isc.ScrollThumb);isc.A=isc.HScrollThumb.getPrototype();isc.A.vertical=false;isc.defineClass("VScrollThumb",isc.ScrollThumb);isc.A=isc.Scrollbar.getPrototype();isc.A.btnSize=16;isc.A.state=isc.StatefulCanvas.STATE_UP;
isc.A.autoEnable=true;isc.A.allowThumbDownState=false;isc.A.allowThumbOverState=false;isc.A.showTrackEnds=false;isc.A.thumbMinSize=12;isc.A.trackEndWidth=12;isc.A.trackEndHeight=12;isc.A.thumbOverlap=1;isc.A.thumbInset=0;isc.A.overflow=isc.Canvas.HIDDEN;isc.A.skinImgDir="images/Scrollbar/";isc.A.cornerSrc="[SKIN]corner.gif";isc.A.hSrc="[SKIN]hscroll.gif";isc.A.vSrc="[SKIN]vscroll.gif";isc.A.hThumbClass=isc.HScrollThumb;isc.A.vThumbClass=isc.VScrollThumb;isc.A.startImg={name:"start",width:"btnSize",
height:"btnSize"};isc.A.trackStartImg={name:"track_start",width:"trackStartSize",height:"trackStartSize"};isc.A.trackImg={name:"track",width:"*",height:"*"};isc.A.trackEndImg={name:"track_end",width:"trackEndSize",height:"trackEndSize"};isc.A.endImg={name:"end",width:"btnSize",height:"btnSize"};isc.A.textDirection="ltr";isc.A.$u3=true;isc.A.showThumb=true;isc.A=isc.Scrollbar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$61m="start";
isc.A.$61n="end";isc.A.$50x="track";isc.A.$52j="track_start";isc.A.$52k="track_end";isc.A.$52l="thumb";isc.A.$52m="corner";isc.A.$52m="corner";isc.A.click=isc.EventHandler.stopBubbling;isc.A.mouseOver=isc.EH.stopBubbling;isc.B.push(isc.A.initWidget=function(){this.invokeSuper(isc.Scrollbar,"initWidget");var a=this.cornerSize||this.getID()+".btnSize-1";this.$6x={name:"corner",width:a,height:a};if(null==this.startThumbOverlap)this.startThumbOverlap=this.thumbOverlap;if(null==this.endThumbOverlap)this.endThumbOverlap=
this.thumbOverlap;this.setItems();this.vertical?this.setWidth(this.btnSize):this.setHeight(this.btnSize);this.makeThumb();this.addPeer(this.thumb);this.setScrollTarget();this.setThumb()},isc.A.setItems=function(){this.items=this.showTrackEnds==true?[this.startImg,this.trackStartImg,this.trackImg,this.trackEndImg,this.endImg]:[this.startImg,this.trackImg,this.endImg];this.showCorner&&this.items.add(this.$6x)},isc.A.setShowCorner=function(a){a=a!=false;if(this.showCorner!=a){this.showCorner=a;this.setItems();
this.resizeImages();this.markForRedraw("showCorner")}return a},isc.A.setScrollTarget=function(a){this.$u3&&this.scrollTarget!=null&&this.isObserving(this.scrollTarget,"scrollTo")&&this.ignore(this.scrollTarget,"scrollTo");if(a!=null)this.scrollTarget=a;if(this.scrollTarget==null)this.scrollTarget=this;this.$u3&&this.scrollTarget!=this&&this.scrollTarget!=a&&this.observe(this.scrollTarget,"scrollTo","observer.setThumb()")},isc.A.setHandleDisabled=function(a){this.Super("setHandleDisabled",arguments);
if(this.thumb){if(this.scrollTarget&&this.scrollTarget.$61c)a?this.thumb.delayCall("setVisibility",[isc.Canvas.HIDDEN]):this.thumb.delayCall("setVisibility",[this.visibility]);else a?this.thumb.setVisibility(isc.Canvas.HIDDEN):this.thumb.setVisibility(this.visibility);this.thumb.$jq=!a}if(a==(this.state==isc.StatefulCanvas.STATE_UP))this.setState(a?isc.StatefulCanvas.STATE_DISABLED:isc.StatefulCanvas.STATE_UP)},isc.A.setVisibility=function(a,b,c,d){this.invokeSuper(isc.Scrollbar,"setVisibility",a,
b,c,d);this.isVisible()&&this.setThumb()},isc.A.parentVisibilityChanged=function(a,b,c,d){this.invokeSuper(isc.Scrollbar,"parentVisibilityChanged",a,b,c,d);this.isVisible()&&this.setThumb()},isc.A.drawPeers=function(a,b,c,d){this.setThumb();this.invokeSuper(isc.Scrollbar,"drawPeers",a,b,c,d)},isc.A.resizePeersBy=function(){this.setThumb()},isc.A.makeThumb=function(){if(this.showThumb){this.thumb=(this.vertical?this.vThumbClass:this.hThumbClass).create({ID:this.getID()+"_thumb",scrollbar:this,state:this.state,
visibility:this.visibility,width:this.vertical?this.getWidth():1,height:!this.vertical?this.getHeight():1,dragScrollDirection:this.vertical?isc.Canvas.VERTICAL:isc.Canvas.HORIZONTAL});if(this.thumb.showRollOver){this.allowThumbOverState=true;this.thumb.showRollOver=false}if(this.thumb.showDown){this.allowThumbDownState=true;this.thumb.showDown=false}}},isc.A.updateButtonsOnEdges=function(){if(this.disableButtonsOnEdges){var a=this.scrollTarget.getScrollRatio(this.vertical),b=this.scrollTarget.getViewportRatio(this.vertical);
a==0?this.setState(isc.StatefulCanvas.STATE_DISABLED,this.$61m):this.setState(isc.StatefulCanvas.STATE_UP,this.$61m);a==1||b>=1?this.setState(isc.StatefulCanvas.STATE_DISABLED,this.$61n):this.setState(isc.StatefulCanvas.STATE_UP,this.$61n)}},isc.A.setThumb=function(){this.updateButtonsOnEdges();if(!(this.thumb==null||this.$494)){var a=this.thumb,b=this.trackSize();this.isDrawn()&&a.isDrawn()&&a.moveAbove(this);var c=Math.round(this.scrollTarget.getViewportRatio(this.vertical)*b);if(!isc.isA.Number(c)||
c<this.thumbMinSize)c=this.thumbMinSize;if(c>b)c=b;b=Math.max(1,(this.vertical?this.getWidth():this.getHeight())-2*this.thumbInset);this.vertical?a.resizeTo(b,c):a.resizeTo(c,b);this.moveThumb()}},isc.A.setZIndex=function(){this.Super("setZIndex",arguments);this.thumb&&this.thumb.moveAbove(this)},isc.A.moveThumbTo=function(a){if(this.thumb)return this.vertical?this.thumb.moveTo(this.getLeft()+this.thumbInset,a):this.thumb.moveTo(a,this.getTop()+this.thumbInset)},isc.A.thumbSize=function(){if(this.thumb)return this.vertical?
this.thumb.getHeight():this.thumb.getWidth()},isc.A.moveThumb=function(){if(this.$u3||this.scrollTarget.canScroll(this.vertical)){this.autoEnable&&!this.scrollTarget.isDisabled()&&this.enable();var a=this.scrollTarget.getScrollRatio(this.vertical),b=this.trackSize()-this.thumbSize();this.moveThumbTo(Math.round(a*b)+this.trackStart());a=isc.EH;a.mouseIsDown()&&a.mouseDownTarget()==this&&this.thumb.containsEvent()&&this.doneTrackScrolling()}else{this.autoEnable&&this.disable();this.moveThumbTo(this.trackStart())}},
isc.A.trackSize=function(){return this.showTrackEnds==true?this.getSize(this.getPartNum(this.$50x))+this.getSize(this.getPartNum(this.$52j))+this.getSize(this.getPartNum(this.$52k))+this.startThumbOverlap+this.endThumbOverlap:this.getSize(this.getPartNum(this.$50x))+this.startThumbOverlap+this.endThumbOverlap},isc.A.trackStart=function(){return this.vertical?this.getTop()+this.btnSize-this.startThumbOverlap:this.getLeft()+this.btnSize-this.startThumbOverlap},isc.A.directionRelativeToThumb=function(){if(!this.thumb)return this.clickPart==
this.$61m?-1:1;var a,b=this.thumb,c;if(this.vertical){a=isc.EH.getY();c=b.getPageTop();b=b.getHeight()}else{a=isc.EH.getX();c=b.getPageLeft();b=b.getWidth()}if(a<c)return-1;else if(a>c+b)return 1;return 0},isc.A.mouseDown=function(){this.clickPart=this.inWhichPart();if(this.clickPart==this.$52m){this.clickPart=null;return isc.EH.STOP_BUBBLING}this.$615(isc.StatefulCanvas.STATE_DOWN,this.clickPart);this.startDirection=this.directionRelativeToThumb();return isc.EH.STOP_BUBBLING},isc.A.mouseStillDown=
function(){if(this.clickPart==this.$50x||this.showTrackEnds==true&&(this.clickPart==this.$52j||this.clickPart==this.$52k)){var a=this.directionRelativeToThumb();if(a!=0&&a==this.startDirection){if(this.$50y){delete this.$50y;this.$50o=true}else if(!this.$50o)this.$50y=true;this.scrollTarget.scrollByPage(this.vertical,this.startDirection)}}else this.scrollTarget.scrollByDelta(this.vertical,this.startDirection);return true},isc.A.doubleClick=function(){if(isc.Browser.isIE)return this.mouseStillDown();
return isc.EH.STOP_BUBBLING},isc.A.$615=function(a,b){if(b==null)return this.setState(a);var c=isc.StatefulCanvas.STATE_UP,d=b==this.$50x||b==this.$52j||b==this.$52k,e=!d&&b==this.$61m,f=!d&&!e&&b==this.$61n,g=!d&&!e&&!f;d=d?a:c;this.setState(e?a:c,this.$61m);this.setState(d,this.$50x);this.showTrackEnds&&this.setState(d,this.$52j);this.showTrackEnds&&this.setState(d,this.$52k);this.setState(f?a:c,this.$61n);if(this.showCorner)this.setState(g?a:c,this.$52m)},isc.A.mouseUp=function(){if(this.clickPart)this.$615(this.showRollOver?
isc.StatefulCanvas.STATE_OVER:isc.StatefulCanvas.STATE_UP,this.clickPart);this.clickPart=null;this.doneTrackScrolling();this.updateButtonsOnEdges();return isc.EventHandler.STOP_BUBBLING},isc.A.mouseMove=function(){this.ns.EH.mouseIsDown()&&this.clickPart||this.showRollOver&&this.$615(isc.StatefulCanvas.STATE_OVER,this.inWhichPart());return isc.EH.STOP_BUBBLING},isc.A.mouseOut=function(){if(this.ns.EH.mouseIsDown())return isc.EH.STOP_BUBBLING;this.showRollOver&&this.setState(isc.StatefulCanvas.STATE_UP);
return isc.EH.STOP_BUBBLING},isc.A.prepareForDragging=function(){return false},isc.A.isDragScrolling=function(){return this.$50p},isc.A.isRepeatTrackScrolling=function(){return this.$50o},isc.A.doneTrackScrolling=function(){delete this.$50y;if(this.isRepeatTrackScrolling()){delete this.$50o;this.scrollTarget&&this.scrollTarget.doneFastScrolling&&this.scrollTarget.doneFastScrolling()}},isc.A.thumbOver=function(){this.allowThumbOverState&&this.thumb.setState(isc.StatefulCanvas.STATE_OVER)},isc.A.thumbOut=
function(){isc.EH.mouseIsDown()||this.thumb.setState(isc.StatefulCanvas.STATE_UP)},isc.A.thumbDown=function(){this.clickPart=this.$52l;this.allowThumbDownState&&this.thumb.setState(isc.StatefulCanvas.STATE_DOWN);return isc.EventHandler.STOP_BUBBLING},isc.A.thumbDragStart=function(){var a=isc.EH;a.dragOffsetX=this.thumb.getOffsetX(a.mouseDownEvent);a.dragOffsetY=this.thumb.getOffsetY(a.mouseDownEvent);this.$50p=true;return a.STOP_BUBBLING},isc.A.getEventCoord=function(){var a=isc.EH;return this.vertical?
a.getY()-this.getPageTop()-this.btnSize+this.startThumbOverlap-a.dragOffsetY:a.getX()-this.getPageLeft()-this.btnSize+this.startThumbOverlap-a.dragOffsetX},isc.A.masterMoved=function(a,b,c,d,e,f){if(!this.masterElement.$ss)return this.invokeSuper(isc.Scrollbar,"masterMoved",a,b,c,d,e,f)},isc.A.thumbMove=function(){var a=this.trackSize()-this.thumbSize();a=this.getEventCoord()/a;a=Math.max(0,Math.min(a,1));this.scrollTarget.scrollToRatio(this.vertical,a);return isc.EventHandler.STOP_BUBBLING},isc.A.thumbUp=
function(){if(this.clickPart!=this.$52l)return this.mouseUp();this.thumb.setState(this.allowThumbOverState&&this.thumb.containsEvent()?isc.StatefulCanvas.STATE_OVER:isc.StatefulCanvas.STATE_UP);return isc.EventHandler.STOP_BUBBLING},isc.A.thumbDragStop=function(){delete this.$50p;this.scrollTarget&&this.scrollTarget.doneFastScrolling&&this.scrollTarget.doneFastScrolling();return this.thumbUp()},isc.A.keyPress=function(){return this.ns.EH.bubbleEvent(this.scrollTarget,this.ns.EH.eventTypes.KEY_PRESS)},
isc.A.keyDown=function(){return this.ns.EH.bubbleEvent(this.scrollTarget,this.ns.EH.eventTypes.KEY_DOWN)},isc.A.keyUp=function(){return this.ns.EH.bubbleEvent(this.scrollTarget,this.ns.EH.eventTypes.KEY_UP)},isc.A.mouseWheel=function(){return this.ns.EH.bubbleEvent(this.scrollTarget,this.ns.EH.eventTypes.MOUSE_WHEEL)},isc.A.hide=function(a,b,c,d){this.invokeSuper("Scrollbar","hide",a,b,c,d);if(!this.$u3&&this.scrollTarget!=null){this.moveTo(this.scrollTarget.getLeft(),this.scrollTarget.getTop());
this.resizeTo(1,1)}});isc.B._maxIndex=isc.C+44;isc.ClassFactory.defineClass("NativeScrollbar","Canvas");isc.A=isc.NativeScrollbar;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getScrollbarSize=function(){return isc.Element.getNativeScrollbarSize()});isc.B._maxIndex=isc.C+1;isc.A=isc.NativeScrollbar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.vertical=true;isc.A.showCustomScrollbars=
false;isc.A.overflow="hidden";isc.A.autoEnable=true;isc.A.scrollbarCanvasDefaults={overflow:"scroll",showCustomScrollbars:false,$lh:function(a,b,c,d,e){this.invokeSuper(isc.Canvas,"$lh",a,b,c,d,e);isc.Browser.isMoz&&!a&&(b||isc.Browser.geckoVersion<20030312)||this.$u7||this.creator.scrollbarCanvasScrolled()},parentResized:function(){this.creator.sizeScrollbarCanvas();this.creator.adjustOverflow()}};isc.A.scrollbarCanvasThickness=100;isc.B.push(isc.A.initWidget=function(){var a=isc.NativeScrollbar.getScrollbarSize();
this.vertical?this.setWidth(a):this.setHeight(a);this.setOverflow(isc.Canvas.HIDDEN);this.addAutoChild("scrollbarCanvas");this.sizeScrollbarCanvas();this.setScrollTarget();this.setThumb()},isc.A.sizeScrollbarCanvas=function(){var a=isc.Element.getNativeScrollbarSize(),b=this.vertical?this.scrollbarCanvasThickness:this.getInnerWidth()+(this.showCorner?0:a);a=!this.vertical?this.scrollbarCanvasThickness:this.getInnerHeight()+(this.showCorner?0:a);this.scrollbarCanvas.resizeTo(b,a)},isc.A.$ut=function(){this.Super("$ut",
arguments);if(this.vertical){this.scrollToTop();this.scrollToRight()}else{this.scrollToLeft();this.scrollToBottom()}},isc.A.setScrollTarget=function(a){this.$u3&&this.scrollTarget!=null&&this.isObserving(this.scrollTarget,"scrollTo")&&this.ignore(this.scrollTarget,"scrollTo");if(a!=null)this.scrollTarget=a;if(this.scrollTarget==null)this.scrollTarget=this;this.$u3&&this.scrollTarget!=this&&this.scrollTarget!=a&&this.observe(this.scrollTarget,"scrollTo","observer.setThumb()")},isc.A.setThumb=function(){if(!this.$494){var a=
this.scrollbarCanvas,b=1,c=1;if(this.$u3||this.scrollTarget.canScroll(this.vertical)){var d=this.scrollTarget.getViewportRatio(this.vertical),e=this.vertical?a.getViewportHeight():a.getViewportWidth();d=Math.round(e/d);if(this.vertical)c=d;else b=d}if(a.spacerLength!=d){a.setContents(isc.Canvas.spacerHTML(b,c));a.spacerLength=d}this.moveThumb()}},isc.A.setVisibility=function(a,b,c,d){this.invokeSuper(isc.Scrollbar,"setVisibility",a,b,c,d);this.isVisible()&&this.setThumb()},isc.A.parentVisibilityChanged=
function(a,b,c,d){this.invokeSuper(isc.Scrollbar,"parentVisibilityChanged",a,b,c,d);this.isVisible()&&this.setThumb()},isc.A.moveThumb=function(){var a=this.scrollTarget.getScrollRatio(this.vertical),b=this.scrollbarCanvas,c=this.vertical?b.getScrollHeight()-b.getViewportHeight():b.getScrollWidth()-b.getViewportWidth();a=Math.round(a*c);b.scrollTo(this.vertical?0:a,this.vertical?a:0)},isc.A.scrollbarCanvasScrolled=function(){var a=this.scrollbarCanvas;this.scrollTarget.scrollToRatio(this.vertical,
this.vertical?a.getScrollTop()/(a.getScrollHeight()-a.getViewportHeight()):a.getScrollLeft()/(a.getScrollWidth()-a.getViewportWidth()))},isc.A.setShowCorner=function(a){this.showCorner=a;this.sizeScrollbarCanvas()});isc.B._maxIndex=isc.C+10;isc.$6y={canDrag:true,dragAppearance:"none",dragStartDistance:1,canCollapse:true,cursor:"hand",vResizeCursor:"row-resize",hResizeCursor:"col-resize",resizeInRealTime:false,$jp:false,$jo:false,overflow:"hidden",isMouseTransparent:true};isc.$6z={initWidget:function(){if(isc.isA.Img(this))this.src=
this.vertical?this.vSrc:this.hSrc;if(this.vertical){this.defaultWidth=this.defaultWidth||10;this.cursor=this.hResizeCursor;this.baseStyle=this.vBaseStyle||this.baseStyle}else{this.defaultHeight=this.defaultHeight||10;this.cursor=this.vResizeCursor;this.baseStyle=this.hBaseStyle||this.baseStyle}this.Super("initWidget",arguments);isc.Browser.isMoz&&this.bringToFront()},makeLabel:function(){this.Super("makeLabel",arguments);this.label.addMethods({getCustomState:function(){var a=this.masterElement;if(a.showClosedGrip){var b=
a.target.visibility==isc.Canvas.HIDDEN;if(!a.targetAfter&&b||a.targetAfter&&!b)return"closed"}}})},dragStart:function(){this.showDown&&this.setState("Down");this.bringToFront()},dragMove:function(){this.resizeTarget(this.target,!this.vertical,this.resizeInRealTime,this.vertical?0-isc.EH.dragOffsetX:0-isc.EH.dragOffsetY,null,null,this.targetAfter)},dragStop:function(){this.showDown&&this.setState("");this.finishTargetResize(this.target,!this.vertical,this.resizeInRealTime)},click:function(){if(this.canCollapse==
true){var a=this.hideTarget||this.target;if(this.target){if(a.visibility=="hidden"){isc.isA.Layout(a.parentElement)?a.parentElement.showMember(a):a.show();if(this.$81h!=null){this.canDrag=this.$81h;this.$81h=null}}else{isc.isA.Layout(a.parentElement)?a.parentElement.hideMember(a):a.hide();this.$81h=this.canDrag;this.canDrag=false}this.setState("")}}}};isc.defineClass("Splitbar","StretchImg");isc.A=isc.Splitbar.getPrototype();isc.A.skinImgDir="images/Splitbar/";isc.A.imageType="stretch";isc.A.capSize=
3;isc.A.vSrc="[SKIN]vsplit.gif";isc.A.hSrc="[SKIN]hsplit.gif";isc.Splitbar.addMethods(isc.$6y,isc.$6z);isc.defineClass("ImgSplitbar","Img");isc.A=isc.ImgSplitbar.getPrototype();isc.A.skinImgDir="images/Splitbar/";isc.A.imageType="center";isc.A.hSrc="[SKIN]hgrip.png";isc.A.vSrc="[SKIN]vgrip.png";isc.A.styleName="splitbar";isc.A.showDown=true;isc.ImgSplitbar.addMethods(isc.$6y,isc.$6z);isc.addGlobal("StretchImgSplitbar",isc.Splitbar);isc.addGlobal("LayoutResizeBar",isc.Splitbar);isc.defineClass("HSplitbar",
"Splitbar");isc.A=isc.HSplitbar.getPrototype();isc.A.vertical=false;isc.defineClass("VSplitbar","Splitbar");isc.defineClass("Stretchbar","Splitbar");isc.A=isc.Stretchbar.getPrototype();isc.A.canResize=false;isc.A.skinImgDir="images/Stretchbar/";isc.A.showRollOver=true;isc.defineClass("HStretchbar","Stretchbar");isc.A=isc.HStretchbar.getPrototype();isc.A.vertical=false;isc.A.src="[SKIN]hsplit.gif";isc.A.defaultHeight=10;isc.defineClass("VStretchbar","Stretchbar");isc.A=isc.VStretchbar.getPrototype();
isc.A.src="[SKIN]vsplit.gif";isc.A.defaultWidth=10;isc.defineClass("Snapbar","Splitbar");isc.A=isc.Snapbar.getPrototype();isc.A.showRollOver=true;isc.A.showDown=true;isc.A.showGrip=true;isc.A.showDownGrip=true;isc.A.showRollOverGrip=true;isc.A.showClosedGrip=true;isc.A.gripImgSuffix="snap";isc.defineClass("ToolStripResizer","ImgSplitbar");isc.A=isc.ToolStripResizer.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.skinImgDir="images/ToolStrip/";
isc.A.vSrc="[SKIN]resizer.png";isc.A.hSrc="[SKIN]hresizer.png";isc.A.layoutAlign="center";isc.A.resizeInRealTime=true;isc.A.showDown=false;isc.A.imageLength=20;isc.A.imageBreadth=14;isc.A.imageType="center";isc.B.push(isc.A.initWidget=function(){this.imageWidth=this.vertical?this.imageBreadth:this.imageLength;this.imageHeight=this.vertical?this.imageLength:this.imageBreadth;this.Super("initWidget",arguments)});isc.B._maxIndex=isc.C+1;isc.A=isc.Canvas;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=
isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$o9="%";isc.A.$60="listPolicy";isc.B.push(isc.A.applyStretchResizePolicy=function(a,b,c,d,e){if(a){var f=0,g=0,h=0,i=0,j=d?a:[],k=this.logIsDebugEnabled(this.$60);c=c||1;if(k&&d)a=a.duplicate();for(d=0;d<a.length;d++){i=a[d];if(i==null||isc.is.emptyString(i))a[d]=i=isc.star;if(isc.isA.Number(i))j[d]=i;else if(i==isc.star){g++;i=0}else if(i.indexOf(this.$o9)>=0)if(e!=null&&e.fixedPercents){i=parseInt(i);i=j[d]=Math.round(i/100*b)}else{f+=parseInt(i);
i=0}else if(e&&isc.isA.Number(e[i]))i=j[d]=e[i];else{var l=parseInt(i);if(isc.isA.Number(l)&&l>=0)j[d]=i=l;else{try{i=isc.eval(i)}catch(m){(e&&e.logWarn?e:this).logWarn("StretchResizePolicy:  unable to convert size:"+i+" to a valid size - reported error: '"+m+"'\n Complete set of sizes:"+a);i=null}isc.isA.Number(i)||(i=0);j[d]=i}}i=Math.max(i,0);h+=i}l=0;if(g)if(f>=100)h+=g*c;else{l=(100-f)/g;f=100}if(f>0){g=b-h;f=Math.max(0,g/f);h=null;for(d=0;d<a.length;d++){i=a[d];if(isc.isA.String(i)){if(i==isc.star)i=
l*f;else if(i.indexOf(this.$o9)>=0)i=parseInt(i)*f;else continue;i=Math.max(Math.floor(i),c);g-=i;h=d;j[d]=i}}if(g>0)j[h]+=g}if(k)this.logDebug("stretchResize"+(e?" for "+e.ID:"")+" with totalSize: "+b+",  desired sizes: "+a+",  calculated sizes: "+j,"listPolicy");return j}});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("GroupingMessages");isc.A=isc.GroupingMessages;isc.A.upcomingTodayTitle="Today";isc.A.upcomingTomorrowTitle="Tomorrow";isc.A.upcomingThisWeekTitle="This Week";isc.A.upcomingNextWeekTitle=
"Next Week";isc.A.upcomingNextMonthTitle="Next Month";isc.A.upcomingBeforeTitle="Before";isc.A.upcomingLaterTitle="Later";isc.A.byDayTitle="by Day";isc.A.byWeekTitle="by Week";isc.A.byMonthTitle="by Month";isc.A.byQuarterTitle="by Quarter";isc.A.byYearTitle="by Year";isc.A.byDayOfMonthTitle="by Day of Month";isc.A.byUpcomingTitle="by Upcoming";isc.A.byHoursTitle="by Hours";isc.A.byMinutesTitle="by Minutes";isc.A.bySecondsTitle="by Seconds";isc.A.byMillisecondsTitle="by Milliseconds";isc.builtinTypes=
{text:{validators:{type:"isString",typeCastValidator:true}},"boolean":{validators:{type:"isBoolean",typeCastValidator:true}},integer:{validators:{type:"isInteger",typeCastValidator:true},normalDisplayFormatter:function(a){if(isc.isA.Number(a))return a.toFormattedString();return a},getGroupValue:function(a,b,c){return(b=c.groupGranularity)?Math.ceil(a/b):a},getGroupTitle:function(a,b,c){return(b=c.groupGranularity)?(a-1)*b+" - "+a*b:a}},"float":{validators:{type:"isFloat",typeCastValidator:true},normalDisplayFormatter:function(a){if(isc.isA.Number(a))return a.toFormattedString();
return a},getGroupValue:function(a,b,c){c.groupPrecision=parseInt(c.groupPrecision);if(c.groupPrecision<0)c.groupPrecision*=-1;return(b=c.groupPrecision?Math.pow(10,c.groupPrecision):null)?Math.floor(a*b)/b:a},getGroupTitle:function(a,b,c){return c.groupPrecision?a+"*":a}},date:{validators:{type:"isDate",typeCastValidator:true},normalDisplayFormatter:function(a){if(isc.isA.Date(a))return a.toNormalDate();return a},groupingModes:{day:isc.GroupingMessages.byDayTitle,week:isc.GroupingMessages.byWeekTitle,
month:isc.GroupingMessages.byMonthTitle,quarter:isc.GroupingMessages.byQuarterTitle,year:isc.GroupingMessages.byYearTitle,dayOfMonth:isc.GroupingMessages.byDayOfMonthTitle,upcoming:isc.GroupingMessages.byUpcomingTitle},defaultGroupingMode:"day",groupingMode:this.defaultGroupingMode,getGroupValue:function(a,b,c){b=a;c=c.groupingMode=c.groupingMode||c.$62.defaultGroupingMode||null;if(isc.isA.Date(a)&&c)switch(c){case "year":b=a.getFullYear();break;case "quarter":b=Math.floor(a.getMonth()/3)+1;break;
case "month":b=a.getMonth();break;case "week":b=a.getWeek();break;case "day":case "dayOfWeek":b=a.getDay();break;case "dayOfMonth":b=a.getDate();break;case "timezoneHours":b=a.getTimezoneOffset()/60;break;case "timezoneMinutes":b=a.getTimezoneOffset();break;case "timezoneSeconds":b=a.getTimezoneOffset()*60;break;case "upcoming":c=new Date;return c.isToday(a)?1:c.isTomorrow(a)?2:c.isThisWeek(a)?3:c.isNextWeek(a)?4:c.isNextMonth(a)?5:c.isBeforeToday(a)?7:6}return b},getGroupTitle:function(a,b,c){b=
a;if((c=c.groupingMode=c.groupingMode||c.$62.defaultGroupingMode||null)&&a!="-none-")switch(c){case "month":b=Date.getShortMonthNames()[a];break;case "quarter":b="Q"+a;break;case "week":b="Week #"+a;break;case "day":case "dayOfWeek":b=Date.getShortDayNames()[a];break;case "dayOfMonth":b=a;break;case "timezoneHours":b="GMT+"+a;break;case "timezoneMinutes":b="GMT+"+a+" minutes";break;case "timezoneSeconds":b="GMT+"+a+" seconds";break;case "upcoming":return a==1?isc.GroupingMessages.upcomingTodayTitle:
a==2?isc.GroupingMessages.upcomingTomorrowTitle:a==3?isc.GroupingMessages.upcomingThisWeekTitle:a==4?isc.GroupingMessages.upcomingNextWeekTitle:a==5?isc.GroupingMessages.upcomingNextMonthTitle:a==7?isc.GroupingMessages.upcomingBeforeTitle:isc.GroupingMessages.upcomingLaterTitle}return b}},time:{validators:{type:"isTime",typeCastValidator:true},normalDisplayFormatter:function(a){if(isc.isA.Date(a))return isc.Time.toTime(a);return a},groupingModes:{hours:isc.GroupingMessages.byHoursTitle,minutes:isc.GroupingMessages.byMinutesTitle,
seconds:isc.GroupingMessages.bySecondsTitle,milliseconds:isc.GroupingMessages.byMillisecondsTitle},defaultGroupingMode:"hours",groupingMode:this.defaultGroupingMode,getGroupValue:function(a,b,c){b=a;c=c.groupingMode=c.groupingMode||c.$62.defaultGroupingMode||null;if(isc.isA.Date(a)&&c)switch(c){case "hours":b=a.getHours();break;case "minutes":b=a.getMinutes();break;case "seconds":b=a.getSeconds();break;case "milliseconds":b=a.getMilliseconds()}return b},getGroupTitle:function(a,b,c){b=a;if((c=c.groupingMode||
c.$62.defaultGroupingMode||null)&&a!="-none-")switch(c){case "hours":case "minutes":case "seconds":case "milliseconds":b=a}return b}},string:{inheritsFrom:"text"},"int":{inheritsFrom:"integer"},"long":{inheritsFrom:"integer"},number:{inheritsFrom:"integer"},decimal:{inheritsFrom:"float"},"double":{inheritsFrom:"float"},datetime:{inheritsFrom:"date",normalDisplayFormatter:function(a){if(isc.isA.Date(a))return a.toShortDateTime(null,true);return a}},dateTime:{inheritsFrom:"datetime"},positiveInteger:{inheritsFrom:"integer",
validators:{type:"integerRange",min:0}},integerPercent:{inheritsFrom:"integer",validators:{type:"integerRange",min:0,max:100}},percent:{inheritsFrom:"integerPercent"},sequence:{inheritsFrom:"integer"},"enum":{validators:"isOneOf"},intEnum:{inheritsFrom:"integer",validators:"isOneOf"},regexp:{inheritsFrom:"text",validators:"isRegexp"},identifier:{inheritsFrom:"text",validators:"isIdentifier"},URL:{inheritsFrom:"text"},image:{inheritsFrom:"text"},HTML:{inheritsFrom:"text"},measure:{validators:"isMeasure"},
integerOrAuto:{validators:"integerOrAuto"},expression:{inheritsFrom:"text"},method:{inheritsFrom:"text"},"function":{inheritsFrom:"text"},alignEnum:{inheritsFrom:"enum",valueMap:{left:"left",center:"center",right:"right"}},valignEnum:{inheritsFrom:"enum",valueMap:{top:"top",bottom:"bottom",center:"center"}},sideEnum:{inheritsFrom:"enum",valueMap:{left:"left",right:"right",top:"top",bottom:"bottom"}},color:{inheritsFrom:"string",validators:"isColor"},modifier:{inheritsFrom:"text",hidden:true,canEdit:false},
modifierTimestamp:{inheritsFrom:"datetime",hidden:true,canEdit:false},creator:{inheritsFrom:"text",hidden:true,canEdit:false},creatorTimestamp:{inheritsFrom:"datetime",hidden:true,canEdit:false},password:{inheritsFrom:"text",normalDisplayFormatter:function(a){return Array(a&&a.length>0?a.length+1:0).join("*")},shortDisplayFormatter:function(a){return Array(a&&a.length>0?a.length+1:0).join("*")}}};(function(){for(var a in isc.builtinTypes)isc.builtinTypes[a].name=a})();isc.defineClass("SimpleType").addClassMethods({getType:function(a,
b){if(b)return b.getType(a);return isc.builtinTypes[a]},getBaseType:function(a,b){if(isc.isA.String(a))a=this.getType(a,b);if(a==null)return null;for(;a.inheritsFrom;){var c=this.getType(a.inheritsFrom,b);if(c==null)return null;a=c}return a.name},inheritsFrom:function(a,b,c){if(isc.isA.String(a))a=this.getType(a,c);if(a==null)return false;if(a.name==b)return true;for(;a.inheritsFrom;){a=this.getType(a.inheritsFrom,c);if(a==null)return null;if(a.name==b)return true;a=a}return false},validateValue:function(a,
b,c){a={name:"$42j",type:a};isc.SimpleType.addTypeDefaults(a);c=c||isc.DS.get("Object");return c.validateFieldValue(a,b)},addTypeDefaults:function(a,b){if(!(a==null||a.$61)){a.$61=true;var c=this.getType(a.type,b);if(c!=null){a.$62=c;if(a.valueMap==null){var d=this.getInheritedProperty(c,"valueMap",b);if(d!=null)c.valueMap=a.valueMap=d}if(a.editorType==null){d=this.getInheritedProperty(c,"editorType",b);if(d!=null)c.editorType=a.editorType=d}d=this.getInheritedProperty(c,"shortDisplayFormatter",b);
if(d!=null)c.shortDisplayFormatter=a.$63=d;d=this.getInheritedProperty(c,"normalDisplayFormatter",b);if(d!=null)c.normalDisplayFormatter=a.$64=d;d=this.getInheritedProperty(c,"editFormatter",b);if(d!=null)c.editFormatter=a.$65=d;d=this.getInheritedProperty(c,"parseInput",b);if(d!=null)c.parseInput=a.$66=d;c=this.getValidators(c,b);if(c!=null)if(a.validators){if(!isc.isAn.Array(a.validators))a.validators=[a.validators];a.validators.addAsList(c);this.$67(a.validators)}else a.validators=c}}},getInheritedProperty:function(a,
b,c){for(;a!=null;){if(a[b]!=null)return a[b];a=this.getType(a.inheritsFrom,c)}},getValidators:function(a,b){if(isc.isA.String(a))a=this.getType(a,b);if(a.$68)return a.validators;var c=a.validators;if(c!=null){isc.isAn.Array(c)||(c=[c]);for(var d=[],e=0;e<c.length;e++){var f=c[e];if(isc.isA.String(f))f={type:f};else if(f.type==null&&isc.isAn.emptyObject(f))continue;f._generated=true;d.add(f)}c=d}d=a.inheritsFrom;if(d!=null){d=this.getType(d,b);if(d!=null){d=this.getValidators(d,b);if(d!=null){c=c||
[];c.addAsList(d);this.$67(c)}}}if(c)c.$69=true;a.validators=c;a.$68=true;return c},$7a:"typeCastValidator",$67:function(a){var b=a.find(this.$7a,true);if(b){b=b.type;for(var c=0;c<a.length;c++)if(a[c].type==b)break;c!=0&&a.unshift(a[c]);a[0].stopIfFalse=true}},$71g:{sum:function(a,b){var c=b.name;if(c){for(var d=0,e=0;e<a.length;e++){var f=a[e][c],g=parseFloat(f);if(!(f==null||f==isc.emptyString))if(isc.isA.Number(g)&&g==f)d+=g;else return null}return d}},avg:function(a,b){var c=b.name;if(c){for(var d=
0,e=0,f=0;f<a.length;f++){var g=a[f][c],h=parseFloat(g);if(!(g==null||g==isc.emptyString))if(isc.isA.Number(h)&&h==g){e+=1;d+=h}else return null}return e>0?d/e:null}},max:function(a,b){var c=b?b.name:null;if(c){for(var d=b&&b.type=="date",e,f=0;f<a.length;f++){var g=a[f][c];if(!(g==null||g==isc.emptyString))if(d){if(!isc.isA.Date(g))return null;if(e==null||g.getTime()>e.getTime())e=g.duplicate()}else{var h=parseFloat(g);if(isc.isA.Number(h)&&h==g)if(e==null)e=h;else{if(e<g)e=h}else return null}}return e}},
min:function(a,b){var c=b?b.name:null;if(c){for(var d=b.type=="date",e,f=0;f<a.length;f++){var g=a[f][c];if(!(g==null||g==isc.emptyString))if(d){if(!isc.isA.Date(g))return null;if(e==null||g.getTime()<e.getTime())e=g.duplicate()}else{var h=parseFloat(g);if(isc.isA.Number(h)&&h==g)if(e==null)e=h;else{if(e>g)e=h}else return null}}return e}},multiplier:function(a,b){var c=b?b.name:null;if(c){for(var d=0,e=0;e<a.length;e++){var f=a[e][c],g=parseFloat(f);if(isc.isA.Number(g)&&g==f)if(e==0)d=g;else d*=
g;else return null}return d}},count:function(a){return a.length}},registerSummaryFunction:function(a,b){if(a!=null){if(isc.isA.String(b))b=isc.Func.expressionToFunction("records,field",a);this.$71g[a]=b}},setDefaultSummaryFunction:function(a,b){var c=this.getType(a);if(c)c.$71h=b},getDefaultSummaryFunction:function(a){var b=this.getType(a);if(b){if(b.$71h!=null)return b.$71h;if(b.inheritsFrom!=null&&b.inheritsFrom!=a)return this.getDefaultSummaryFunction(b.inheritsFrom)}},applySummaryFunction:function(a,
b,c){if(!(!c||!b||!a)){if(isc.isA.String(c))c=this.$71g[c]?this.$71g[c]:isc.Func.expressionToFunction("records,field",c);if(isc.isA.Function(c))return c(a,b)}}});isc.SimpleType.setDefaultSummaryFunction("integer","sum");isc.SimpleType.setDefaultSummaryFunction("float","sum");isc.A=isc.SimpleType.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function(){if(!this.name)this.name=isc.ClassFactory.getNextGlobalID(this);if(isc.builtinTypes[this.name]!=
null){if(!this.xmlSource){this.logWarn("SimpleType '"+this.name+"' defined twice: "+this.getStackTrace());isc.builtinTypes[this.name]=this}}else isc.builtinTypes[this.name]=this;this.validOperators!=null&&isc.DataSource.setTypeOperators(this.name,this.validOperators)});isc.B._maxIndex=isc.C+1;isc.SimpleType.getPrototype().toString=function(){return"["+this.Class+" name="+this.name+(this.inheritsFrom?" inheritsFrom="+this.inheritsFrom:"")+"]"};isc.defineClass("NavigationButton","Button");isc.A=isc.NavigationButton.getPrototype();
isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.height=30;isc.A.autoFit=true;isc.A.baseStyle="navButton";isc.A.backBaseStyle="navBackButton";isc.A.forwardBaseStyle="navForwardButton";isc.A.direction="none";isc.B.push(isc.A.initWidget=function(){this.setBaseStyle(this.getBaseStyleName())},isc.A.setNavigationDirection=function(a){this.direction=a;this.setBaseStyle(this.getBaseStyleName())},isc.A.getNavigationDirection=function(){return this.direction},
isc.A.getBaseStyleName=function(){if(this.direction=="back")return this.backBaseStyle;if(this.direction=="forward")return this.forwardBaseStyle;return this.baseStyle});isc.B._maxIndex=isc.C+4;isc.defineClass("NavigationBar","HLayout");isc.A=isc.NavigationBar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.width="100%";isc.A.height=44;isc.A.styleName="navToolbar";isc.A.leftButtonTitle="&nbsp;";isc.A.leftButtonDefaults={_constructor:"NavigationButton",
direction:"back",layoutAlign:"center"};isc.A.titleLabelDefaults={_constructor:"Label",width:"*",styleName:"navBarHeader",align:"center",valign:"center"};isc.A.rightButtonTitle="&nbsp;";isc.A.rightButtonDefaults={_constructor:"NavigationButton",direction:"forward",layoutAlign:"center"};isc.A.showRightButton=false;isc.A.autoChildren=["leftButton","titleLabel","rightButton"];isc.A.controls=["leftButton","titleLabel","rightButton"];isc.B.push(isc.A.setControls=function(a){this.controls=a;for(var b=[],
c=0;c<a.length;c++){var d=a[c];if(isc.isA.String(d))d=this[d];b[c]=d}this.setMembers(b)},isc.A.initWidget=function(){this.Super("initWidget",arguments);var a={click:function(){this.creator.navigationClick&&this.creator.navigationClick(this.direction)}};if(this.leftButtonTitle!=null)a.title=this.leftButtonTitle;if(this.leftButtonIcon!=null)a.icon=this.leftButtonIcon;this.leftButton=this.createAutoChild("leftButton",a);this.titleLabel=this.createAutoChild("titleLabel",{contents:this.title});a={click:function(){this.creator.navigationClick&&
this.creator.navigationClick(this.direction)}};if(this.rightButtonTitle!=null)a.title=this.rightButtonTitle;if(this.rightButtonIcon!=null)a.icon=this.rightButtonIcon;this.rightButton=this.createAutoChild("rightButton",a);this.setControls(this.controls)},isc.A.setTitle=function(a){this.title=a;this.titleLabel.setContents(this.title)},isc.A.setLeftButtonTitle=function(a){this.leftButtonTitle=a;this.leftButton&&this.leftButton.setTitle(a)},isc.A.setLeftButtonIcon=function(a){this.leftButtonIcon=a;this.leftButton&&
this.leftButton.setIcon(a)},isc.A.setShowLeftButton=function(a){if(this.leftButton!=null)if(a!=(this.leftButton.visibility!=isc.Canvas.HIDDEN))this.leftButton.setVisibility(a?isc.Canvas.INHERIT:isc.Canvas.HIDDEN)},isc.A.setRightButtonTitle=function(a){this.rightButton&&this.rightButton.setTitle(a)},isc.A.setRightButtonIcon=function(a){this.rightButtonIcon=a;this.rightButton&&this.rightButton.setIcon(a)},isc.A.setShowRightButton=function(a){if(this.rightButton!=null)if(a!=(this.rightButton.visibility!=
isc.Canvas.HIDDEN))this.rightButton.setVisibility(a?isc.Canvas.INHERIT:isc.Canvas.HIDDEN)});isc.B._maxIndex=isc.C+9;isc.NavigationBar.registerStringMethods({navigationClick:"direction"});isc.defineClass("SplitPane","VLayout");isc.A=isc.SplitPane.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.mainLayoutDefaults={_constructor:"HLayout",width:"100%",height:"100%"};isc.A.leftLayoutDefaults={_constructor:"VLayout",width:320,height:"100%"};
isc.A.rightLayoutDefaults={_constructor:"VLayout",width:"*",height:"100%"};isc.A.navigationLayoutDefaults={_constructor:"VLayout",width:"100%",height:"100%"};isc.A.listLayoutDefaults={_constructor:"VLayout",width:"100%",height:"100%"};isc.A.detailLayoutDefaults={_constructor:"VLayout",width:"100%",height:"100%"};isc.A.navigationBarDefaults={_constructor:"NavigationBar",hieght:44,navigationClick:function(a){this.creator.navigationClick(a)}};isc.A.detailToolStripDefaults={_constructor:"NavigationBar",
hieght:44};isc.A.autoChildren=["mainLayout","leftLayout","rightLayout","navigationLayout","navigationBar","listLayout","detailLayout","detailToolStrip"];isc.A.showLeftButton=true;isc.A.showRightButton=true;isc.B.push(isc.A.setDetailToolButtons=function(a){this.detailToolButtons=a;this.updateDetailToolStrip()},isc.A.isHandset=function(){return this.layoutMode=="handset"||isc.Browser.isHandset},isc.A.isTablet=function(){return this.layoutMode=="tablet"||isc.Browser.isTablet},isc.A.getPageOrientation=
function(){return this.pageOrientation||isc.Page.getOrientation()},isc.A.initWidget=function(){this.Super("initWidget",arguments);this.addAutoChildren(this.autoChildren,"none");this.addMember(this.mainLayout);this.navigationPane!=null&&this.$79k(this.navigationPane);this.detailPane!=null&&this.$79l(this.detailPane);isc.Page.setEvent("orientationChange",this.getID()+".pageOrientationChanged()");this.currentPane=this.initialPane!=null?this.initialPane:this.isHandset()?this.listPane!=null?"list":"navigation":
"detail";this.pageOrientationChanged()},isc.A.pageOrientationChanged=function(){this.updateUI()},isc.A.updateUI=function(a){var b=this.currentUIConfig,c=this.$79m,d=this.currentUIConfig=this.getUIConfiguration(),e=this.$79m=this.currentPane;if(!(!a&&d==b&&e==c))if(d=="handset"){this.updateNavigationBar();if(e=="navigation"){this.navigationLayout.setMembers([this.navigationBar,this.navigationPane]);this.mainLayout.setMembers([this.navigationLayout])}else if(e=="detail"){a=[this.navigationBar,this.detailPane];
if(this.detailToolButtons!=null){this.updateDetailToolStrip();a.add(this.detailToolStrip)}this.detailLayout.setMembers(a);this.mainLayout.setMembers([this.detailLayout])}else{a=[this.navigationBar,this.listPane];this.listLayout.setMembers(a);this.mainLayout.setMembers([this.listLayout])}}else if(d=="portrait"){this.updateDetailToolStrip();this.detailLayout.setMembers([this.detailToolStrip,this.detailPane]);this.mainLayout.setMembers([this.detailLayout]);if(this.currentPane=="navigation"){this.listPopUp!=
null&&this.listPopUp.isVisible()&&this.listPopUp.hide();this.updateNavigationBar();if(this.navigationPopUp==null){a=isc.PopupWindow||isc.Window;this.navigationPopUp=this.createAutoChild("navigationPopUp",{_constructor:a,headerControls:[this.navigationBar],items:[this.navigationPane],width:"50%",height:"80%",isModal:true,showModalMask:true,dismissOnOutsideClick:true,closeClick:function(){this.creator.showDetailPane()}})}else{this.navigationPopUp.setHeaderControls([this.navigationBar]);if(!this.navigationPopUp.items||
!this.navigationPopUp.items.contains(this.navigationPane))this.navigationPopUp.addItem(this.navigationPane)}this.delayCall("$79n")}else if(this.currentPane=="list"){this.navigationPopUp!=null&&this.navigationPopUp.isVisible()&&this.navigationPopUp.hide();if(this.listPopUp==null){a=isc.PopupWindow||isc.Window;this.listPopUp=this.createAutoChild("listPopUp",{_constructor:a,headerControls:[this.navigationBar],items:[this.listPane],width:"50%",height:"80%",isModal:true,showModalMask:true,dismissOnOutsideClick:true,
closeClick:function(){this.creator.showDetailPane()}})}else{this.listPopUp.setHeaderControls([this.navigationBar]);if(!this.listPopUp.items||!this.listPopUp.items.contains(this.listPane))this.listPopUp.addItem(this.listPane)}this.delayCall("$80y")}else{this.navigationPopUp!=null&&this.navigationPopUp.isVisible()&&this.navigationPopUp.hide();this.listPopUp!=null&&this.listPopUp.isVisible()&&this.listPopUp.hide()}}else if(d=="landscape"){if(this.navigationPopUp!=null){this.navigationPopUp.isVisible()&&
this.navigationPopUp.hide();this.navigationPopUp.items&&this.navigationPopUp.items.contains(this.navigationPane)&&this.navigationPopUp.removeItem(this.navigationPane)}this.updateNavigationBar();this.navigationLayout.setMembers([this.navigationBar,this.navigationPane]);this.updateDetailToolStrip();this.detailLayout.setMembers([this.detailToolStrip,this.detailPane]);if(this.listPane!=null)if(e!="navigation"){this.listLayout.setMembers([this.navigationBar,this.listPane]);this.leftLayout.setMembers([this.listLayout])}else this.leftLayout.setMembers([this.navigationLayout]);
else this.leftLayout.setMembers([this.navigationLayout]);this.rightLayout.setMembers([this.detailLayout]);if(this.spacer==null)this.spacer=isc.Canvas.create({backgroundColor:"black",overflow:"hidden",height:"100%",width:1,autoDraw:false});this.mainLayout.setMembers([this.leftLayout,this.spacer,this.rightLayout])}else{this.updateNavigationBar();this.navigationLayout.setMembers([this.navigationBar,this.navigationPane]);this.updateDetailToolStrip();if(this.listPane!=null){this.listLayout.setMembers([this.detailToolStrip,
this.listPane]);this.detailLayout.setMembers([this.detailPane])}else this.detailLayout.setMembers([this.detailToolStrip,this.detailPane]);this.leftLayout.setMembers([this.navigationLayout]);a=this.listPane!=null?[this.listLayout]:[];a.add(this.detailLayout);this.rightLayout.setMembers(a);this.mainLayout.setMembers([this.leftLayout,this.rightLayout])}},isc.A.$79n=function(){if(!(!this.navigationPopUp||this.navigationPopUp.isVisible()&&this.navigationPopUp.isDrawn())){this.navigationPopUp.setPageTop(this.navigationPopUpButton.getPageBottom());
this.navigationPopUp.setPageLeft(this.navigationPopUpButton.getPageLeft());this.navigationPopUp.show()}},isc.A.$80y=function(){if(!(!this.listPopUp||this.listPopUp.isVisible()&&this.listPopUp.isDrawn())){this.listPopUp.setPageTop(this.listPopUpButton.getPageBottom());this.listPopUp.setPageLeft(this.listPopUpButton.getPageLeft());this.listPopUp.show()}},isc.A.updateDetailToolStrip=function(){if(this.currentUIConfig=="handset"){var a=[isc.LayoutSpacer.create({width:"*"})];a.addList(this.detailToolButtons);
a.add(isc.LayoutSpacer.create({width:"*"}));this.detailTitleLabel&&this.detailTitleLabel.isDrawn()&&this.detailTitleLabel.deparent()}else if(this.currentUIConfig=="portrait"){if(this.navigationPopUpButton==null)this.navigationPopUpButton=this.createAutoChild("navigationPopUpButton",{_constructor:"IButton",title:this.navigationTitle,click:function(){this.creator.showNavigationPane()}});else this.navigationPopUpButton.setTitle(this.navigationTitle);if(this.listPopUpButton==null)this.listPopUpButton=
this.createAutoChild("listPopUpButton",{_constructor:"IButton",title:this.listTitle,click:function(){this.creator.showListPane()}});else this.listPopUpButton.setTitle(this.listTitle);this.updateDetailTitleLabel();a=[this.currentPane!="navigation"?this.listPopUpButton:this.navigationPopUpButton,this.detailNavigationControl,this.detailTitleLabel];this.detailToolButtons!=null&&a.addList(this.detailToolButtons);a.removeEmpty()}else{this.updateDetailTitleLabel();a=[this.detailTitleLabel];this.detailToolButtons!=
null&&a.addList(this.detailToolButtons)}this.detailToolStrip.setMembers(a)},isc.A.updateDetailTitleLabel=function(){if(this.detailTitleLabel==null)this.detailTitleLabel=isc.Label.create({autoDraw:false,align:"center",valign:"center",width:"*",height:this.detailToolStrip.getHeight()});this.detailTitleLabel.setContents(this.detailTitle)},isc.A.updateNavigationBar=function(){this.logInfo("updateNavigationBar, currentPane: "+this.currentPane+", currentUI: "+this.currentUIConfig);if(this.currentUIConfig==
"handset"&&this.currentPane!="navigation"||this.currentUIConfig=="portrait"&&this.currentPane=="list"||this.currentUIConfig=="landscape"&&this.currentPane!="navigation"){var a;a=this.currentUIConfig=="landscape"?this.listPane!=null&&this.listPane.isVisible()?this.listTitle:this.navigationTitle:this.currentPane=="detail"?this.detailTitle:this.currentPane=="list"?this.listTitle:this.navigationTitle;if(a==null)a="&nbsp;";this.navigationBar.setTitle(a);if(this.showNavigationPaneButton==null)this.showNavigationPaneButton=
this.createAutoChild("showNavigationPaneButton",{_constructor:isc.NavigationButton,direction:"back",title:this.currentPane=="detail"&&this.listPane!=null?this.listTitle:this.navigationTitle,click:function(){this.creator.currentPane=="detail"&&this.creator.listPane!=null&&!(this.creator.listPane.isVisible()&&this.creator.listPane.isDrawn())?this.creator.showListPane():this.creator.showNavigationPane()}});else this.showNavigationPaneButton.setTitle(this.currentPane=="detail"&&this.listPane!=null&&!(this.listPane.isVisible()&&
this.listPane.isDrawn())?this.listTitle:this.navigationTitle);a=[this.showNavigationPaneButton,"titleLabel"];this.detailNavigationControl!=null&&a.add(this.detailNavigationControl);this.navigationBar.setControls(a)}else{this.navigationBar.setTitle(this.navigationTitle);this.navigationBar.setLeftButtonTitle(this.leftButtonTitle);this.navigationBar.setRightButtonTitle(this.rightButtonTitle);this.navigationBar.setControls(["leftButton","titleLabel","rightButton"]);this.navigationBar.setShowLeftButton(this.showLeftButton);
this.navigationBar.setShowRightButton(this.showRightButton)}},isc.A.$80z=function(a){if(this.showNavigationPaneButton==null)this.showNavigationPaneButton=this.createAutoChild("showNavigationPaneButton",{_constructor:isc.NavigationButton,direction:"back",title:a,click:function(){this.creator.showNavigationPane()}});else this.showNavigationPaneButton.setTitle(a);return this.showNavigationPaneButton},isc.A.getUIConfiguration=function(){if(this.uiConfiguration!=null)return this.uiConfiguration;return this.isHandset()?
"handset":this.isTablet()&&this.getPageOrientation()=="portrait"?"portrait":this.isTablet()&&this.getPageOrientation()=="landscape"?"landscape":"desktop"},isc.A.setShowLeftButton=function(a){this.showLeftButton=a;this.updateNavigationBar()},isc.A.setLeftButtonTitle=function(a){this.leftButtonTitle=a;this.updateNavigationBar()},isc.A.setLeftButtonIcon=function(a){this.leftButtonIcon=a;this.updateNavigationBar()},isc.A.setShowRightButton=function(a){this.showRightButton=a;this.updateNavigationBar()},
isc.A.setRightButtonTitle=function(a){this.rightButtonTitle=a;this.updateNavigationBar()},isc.A.setRightButtonIcon=function(a){this.rightButtonIcon=a;this.updateNavigationBar()},isc.A.$79k=function(a){this.navigationPane=a;this.navigationPane.setWidth("100%");this.navigationPane.setHeight("100%");this.navigationPane.splitPane=this},isc.A.setNavigationPane=function(a){this.$79k(a);this.currentView=="navigation"&&this.updateUI(true)},isc.A.setNavigationTitle=function(a){this.navigationTitle=a;this.updateNavigationBar()},
isc.A.showNavigationPane=function(){var a=this.currentPane!=null&&this.currentPane!="navigation";this.currentPane="navigation";this.updateUI();a&&this.paneChanged!=null&&this.paneChanged("navigation")},isc.A.$800=function(a){this.listPane=a;this.listPane.setWidth("100%");this.listPane.setHeight("100%");this.listPane.splitPane=this},isc.A.setListPane=function(a){this.$800(a);this.updateUI(true)},isc.A.showListPane=function(){var a=this.listPane!=null?"list":"detail",b=a!=this.currentPane;this.currentPane=
a;this.updateUI();b&&this.paneChanged!=null&&this.paneChanged(a)},isc.A.setListTitle=function(a){this.listTitle=a;this.updateNavigationBar();this.updateDetailToolStrip()},isc.A.$79l=function(a){this.detailPane=a;this.detailPane.setWidth("100%");this.detailPane.setHeight("100%");this.detailPane.splitPane=this},isc.A.setDetailPane=function(a){this.$79l(a);this.updateUI(true)},isc.A.showDetailPane=function(){var a=this.currentPane!="detail";this.currentPane="detail";this.updateUI();a&&this.paneChanged!=
null&&this.paneChanged("detail")},isc.A.setDetailTitle=function(a){this.detailTitle=a;if(this.currentUIConfig=="handset")this.currentPane=="detail"&&this.updateNavigationBar();else this.updateDetailToolStrip()},isc.A.navigationClick=function(){},isc.A.setDetailNavigationControl=function(a){this.detailNavigationControl=a;this.currentUIConfig!="landscape"&&this.currentPane=="detail"&&this.updateUI(true)});isc.B._maxIndex=isc.C+34;isc.SplitPane.registerStringMethods({paneChanged:"pane"});isc._moduleEnd=
isc._Foundation_end=isc.timestamp?isc.timestamp():(new Date).getTime();isc.Log&&isc.Log.logIsInfoEnabled("loadTime")&&isc.Log.logInfo("Foundation module init time: "+(isc._moduleEnd-isc._moduleStart)+"ms","loadTime");delete isc.definingFramework}else window.isc&&isc.Log&&isc.Log.logWarn&&isc.Log.logWarn("Duplicate load of module 'Foundation'.");if(window.isc&&window.isc.module_Core&&!window.isc.module_Containers){isc.module_Containers=1;isc._moduleStart=isc._Containers_start=isc.timestamp?isc.timestamp():(new Date).getTime();if(isc._moduleEnd&&(!isc.Log||isc.Log&&isc.Log.logIsDebugEnabled("loadTime"))){isc._pTM={message:"Containers load/parse time: "+(isc._moduleStart-isc._moduleEnd)+"ms",category:"loadTime"};if(isc.Log&&isc.Log.logDebug)isc.Log.logDebug(isc._pTM.message,"loadTime");else if(isc._preLog)isc._preLog[isc._preLog.length]=isc._pTM;
else isc._preLog=[isc._pTM]}isc.definingFramework=true;isc.ClassFactory.defineClass("ImgTab","StretchImgButton");isc.A=isc.ImgTab.getPrototype();isc.A.capSize=2;isc.A.skinImgDir="images/Tab/";isc.A.labelSkinImgDir="images/";isc.A.baseStyle="tab";isc.A.src="[SKIN]tab.gif";isc.A.showRollOver=false;isc.A.showFocused=true;isc.A.actionType=isc.Button.RADIO;isc.A.mozOutlineOffset="0px";isc.A=isc.ImgTab.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;
isc.B.push(isc.A.setPane=function(a){this.parentElement.parentElement.updateTab(this,a)},isc.A.selectTab=function(){this.parentElement.parentElement.selectTab(this)},isc.A.initWidget=function(a,b,c,d,e,f){if(this.vertical&&this.titleStyle)this.titleStyle="v"+this.titleStyle;return this.invokeSuper(isc.ImgTab,this.$oc,a,b,c,d,e,f)});isc.B._maxIndex=isc.C+3;isc.ClassFactory.defineClass("TabBar","Toolbar");isc.A=isc.TabBar.getPrototype();isc.A.breadth=21;isc.A.buttonConstructor=isc.ImgTab;isc.A.tabWithinToolbar=
false;isc.A.skinImgDir="images/Tab/";isc.A.moreTabCount=5;isc.A.baseLineThickness=1;isc.A.baseLineSrc="[SKIN]baseline.gif";isc.A.baseLineCapSize=2;isc.A.tabBarPosition=isc.Canvas.TOP;isc.A.selectedTab=0;isc.A.defaultTabSize=80;isc.A=isc.TabBar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function(){for(var a=0;a<this.tabs.length;a++){var b=this.tabs[a].pane;if(isc.isA.String(b)&&isc.isA.Canvas(window[b]))this.tabs[a].pane=
window[b]}this.buttons=this.tabs;if(this.moreTab){this.$79t=this.buttons.length;this.buttons[this.$79t]=this.moreTab}this.skinImgDir=this.skinImgDir+this.tabBarPosition+"/";a=this.tabDefaults;if(a==null)a=this.tabDefaults={};a=this.buttonDefaults=isc.addProperties({},this.buttonDefaults,a);a.actionType=isc.StatefulCanvas.RADIO;if(this.vertical)a.defaultHeight=this.defaultTabSize;else a.defaultWidth=this.defaultTabSize;a.overflow=isc.Canvas.VISIBLE;a.vertical=this.tabBarPosition==isc.Canvas.LEFT||
this.tabBarPosition==isc.Canvas.RIGHT;if((b=isc.ClassFactory.getClass(this.buttonConstructor))&&b.isA("ImgTab"))a.skinImgDir=b.getInstanceProperty("skinImgDir")+this.tabBarPosition+"/";a.iconClick=this.$42k;a.handleDoubleClick=function(){var c=this.parentElement.parentElement;if(!(c&&c.titleEditEvent=="doubleClick"&&c.$798(this)))return this.Super("handleDoubleClick",arguments)};a.handleClick=function(){var c=this.parentElement.parentElement;if(!(c&&c.titleEditEvent=="click"&&c.$798(this)))return this.Super("handleClick",
arguments)};a._generated=true;a=this.tabBarPosition+"StyleName";this[a]&&this.setStyleName(this[a]);this.Super(this.$oc);this._baseLine==null&&this.makeBaseLine()},isc.A.isShowingMoreTab=function(){return this.showMoreTab&&this.moreTab&&this.$79t>=0&&this.getMembers(this.$79t).isVisible&&this.getMembers(this.$79t).isVisible()},isc.A.$42k=function(){return this.parentElement.tabIconClick(this)},isc.A.tabIconClick=function(a){return this.parentElement.$52a(a)},isc.A.setButtons=function(){this.Super("setButtons",
arguments);if(this.showMoreTab&&this.buttons.length-1>this.moreTabCount){for(var a=this.moreTabCount-1;a<this.buttons.length;a++)this.getMember(a).hide();this.getMember(this.$79t).show()}else this.showMoreTab&&this.moreTab&&this.getMember(this.$79t).hide()},isc.A.makeButton=function(a,b,c,d,e){this.parentElement.canCloseTab(a);isc.addProperties(a,this.getCloseIconProperties(a));a.locatorParent=this.parentElement;return this.invokeSuper("TabBar","makeButton",a,b,c,d,e)},isc.A.getCloseIconProperties=
function(a){var b={};if(a.canClose){b.icon=a.closeIcon||this.parentElement.closeTabIcon;b.iconSize=a.closeIconSize||this.parentElement.closeTabIconSize;b.iconOrientation=isc.Page.isRTL()?"left":"right";b.iconAlign=b.iconOrientation}else{b.icon=a.icon;b.iconSize=a.iconSize;b.iconOrientation=a.iconOrientation;b.iconAlign=a.iconAlign}return b},isc.A.addTabs=function(a,b){if(!b&&this.tabBarPosition==isc.Canvas.LEFT)b=0;this.addButtons(a,b);if(this.showMoreTab&&this.moreTab){var c=this.getMembers();if(c.length-
1>this.moreTabCount){for(var d=this.moreTabCount-1;d<c.length;d++)c[d].hide();this.$79t=c.length-1;c[this.$79t].show()}}if(this._baseLine!=null){this._baseLine.bringToFront();(c=this.getButton(this.getSelectedTab()))&&c.bringToFront()}},isc.A.removeTabs=function(a){if(a!=null){isc.isAn.Array(a)||(a=[a]);var b=this.map("getButton",a);this.removeButtons(a);if(this.showMoreTab&&this.moreTab&&this.$79t>0){a=this.getMembers();for(var c=0;c<a.length;c++)c<this.moreTabCount?a[c].show():a[c].hide();if(a.length-
1<=this.moreTabCount){this.$79t=null;a[a.length-1].hide()}else this.$79t=a.length-1}for(c=0;c<b.length;c++)b[c]!=null&&b[c].destroy()}},isc.A.draw=function(a,b,c,d){arguments.$cw=this;this.fixLayout();this.invokeSuper(isc.TabBar,"draw",a,b,c,d);this.bringToFront();var e=this.getButton(this.selectedTab);e&&e.setSelected(true)},isc.A.makeBaseLine=function(){this._baseLine=this.addAutoChild("baseLine",{ID:this.getID()+"_baseLine",vertical:this.tabBarPosition==isc.Canvas.LEFT||this.tabBarPosition==isc.Canvas.RIGHT,
skinImgDir:this.skinImgDir,src:this.baseLineSrc,capSize:this.baseLineCapSize,imageType:isc.Img.STRETCH,addAsChild:true,autoDraw:false},isc.StretchImg);this.ignoreMemberZIndex(this._baseline)},isc.A.scrollTo=function(a,b,c,d,e,f){this.invokeSuper(isc.TabBar,"scrollTo",a,b,c,d,e,f);this._baseLine&&this.fixLayout()},isc.A.fixLayout=function(){var a=this._baseLine;if(a!=null)if(this.tabBarPosition==isc.Canvas.TOP)a.setRect(this.getScrollLeft(),this.getHeight()-this.baseLineThickness,this.parentElement.getWidth()-
0,this.baseLineThickness);else if(this.tabBarPosition==isc.Canvas.BOTTOM)a.setRect(this.getScrollLeft(),0,this.parentElement.getWidth()-0,this.baseLineThickness);else if(this.tabBarPosition==isc.Canvas.LEFT)a.setRect(this.getWidth()-this.baseLineThickness,this.getScrollTop(),this.baseLineThickness,this.parentElement.getHeight()-0);else this.tabBarPosition==isc.Canvas.RIGHT&&a.setRect(0,this.getScrollTop(),this.baseLineThickness,this.parentElement.getHeight()-0)},isc.A.layoutChildren=function(a,b,
c,d){this.invokeSuper(isc.TabBar,"layoutChildren",a,b,c,d);this.fixLayout()},isc.A.buttonSelected=function(a){this.ignoreMemberZIndex(a);a.bringToFront();this.lastSelectedButton=a;this.$6b(this.lastSelectedButton)},isc.A.buttonDeselected=function(a){a.sendToBack();this.stopIgnoringMemberZIndex(a)},isc.A.getSelectedTab=function(){return this.getButtonNumber(this.getSelectedButton())},isc.A.selectTab=function(a){this.selectedTab=a;this.selectButton(a)},isc.A.setupButtonFocusProperties=function(){this.$6b(this.getButton(this.selectedTab));
return this.Super("setupButtonFocusProperties",arguments)},isc.A.$6b=function(a){if(!this.selectTabOnContextClick&&isc.EH.rightButtonDown()){if(this.$6g!=null&&this.getButton(a)!=this.$6g){var b=this.getButtonNumber(this.$6g);this.$6g.focus();var c=this;isc.Timer.setTimeout(function(){var e=c.getButton(b);if(e)isc.EH.targetIsMasked(e)?c.selectTab(b):e.focus()},0)}}else{var d=this.getButton(a);d&&d.focus();this.Super("$6b",arguments);this.$6g!=null&&!this.$6g.selected&&this.selectTab(this.$6g)}},isc.A.$7b=
function(a,b){if(!(this.overflow==isc.Canvas.VISIBLE||!this.members||this.members.length==0)){var c,d;if(this.$7c!=null){c=this.members[this.$7c+(a?-1:1)];if(c==null)return;a?this.vertical?c.getTop():c.getLeft():this.vertical?c.getBottom():c.getRight()}else{if((this.vertical?this.getScrollHeight():this.getScrollWidth())<=(this.vertical?this.getViewportHeight():this.getViewportWidth()))return;for(var e=this.vertical?this.getScrollTop():this.getScrollLeft(),f=this.vertical?this.getViewportHeight():
this.getViewportWidth(),g=0;g<this.members.length;g++){c=a?this.members[this.members.length-(g+1)]:this.members[g];d=a?this.vertical?c.getTop():c.getLeft():this.vertical?c.getBottom():c.getRight();if(a?d+5<e:d-5>e+f)break}}if(b){this.$7c=this.members.indexOf(c);this.scrollTabIntoView(c,a,true,"this.$7d("+this.$7c+")")}else this.scrollTabIntoView(c,a)}},isc.A.$7d=function(a){this.$7c==a&&delete this.$7c},isc.A.scrollTabIntoView=function(a,b,c,d){var e;if(isc.isA.Number(a)){e=a;a=this.members[a]}else e=
this.members.indexOf(a);if(a)if(this.$3n||this.$2z)this.$67y=[a,b,c,d];else{a=a.getRect();var f;f=this.vertical;if(b==null)b=e==0?true:e==this.members.getLength()-1?false:f?this.getScrollTop()>a[1]?true:false:this.getScrollLeft()>a[0]?true:false;if(f){f=b?"top":"bottom";b="left";a[2]=0}else{b=b?"left":"right";f="top";a[3]=0}if(e==0)a[0]=a[1]=0;this.scrollIntoView(a[0],a[1],a[2],a[3],b,f,c,d)}},isc.A.$3j=function(a,b,c,d,e){this.invokeSuper(isc.TabBar,"$3j",a,b,c,d,e);if(this.$67y!=null){a=this.$67y;
this.scrollTabIntoView(a[0],a[1],a[2],a[3]);delete this.$67y}},isc.A.scrollForward=function(a){this.$7b(false,a)},isc.A.scrollBack=function(a){this.$7b(true,a)});isc.B._maxIndex=isc.C+26;isc.ClassFactory.defineClass("Window","Layout");isc.A=isc.Window.getPrototype();isc.A.styleName="windowBackground";isc.A.skinImgDir="images/Window/";isc.A.backgroundColor="#DDDDDD";isc.A.layoutMargin=2;isc.A.membersMargin=2;isc.A.orientation="vertical";isc.A.dragStartDistance=1;isc.A.canDragReposition=true;isc.A.dragAppearance=
isc.EventHandler.OUTLINE;isc.A.canDragResize=false;isc.A.resizeFrom=["R","B","BR"];isc.A.minWidth=100;isc.A.minHeight=100;isc.A.useBackMask=isc.Browser.isIE&&isc.Browser.minorVersion>=5.5;isc.A.isModal=false;isc.A.modalMaskOpacity=50;isc.A.modalMaskStyle="modalMask";isc.A.modalMaskConstructor="ScreenSpan";isc.A.dismissOnOutsideClick=false;isc.A.showBody=true;isc.A.bodyStyle="windowBody";isc.A.bodyColor="#FFFFFF";isc.A.hiliteBodyColor="#EEEEEE";isc.A.contentsType="page";isc.A.bodyDefaults={layoutMargin:0};
isc.A.contentLayout="vertical";isc.A.autoSize=false;isc.A.showHeader=true;isc.A.headerConstructor="HLayout";isc.A.showHeaderBackground=!(isc.Browser.isIE&&!isc.Browser.isStrict&&isc.Browser.minorVersion>=5.5);isc.A.headerBackgroundConstructor="Img";isc.A.headerBackgroundDefaults={width:"100%",height:"100%",addAsChild:true,vertical:false,capSize:10};isc.A.headerStyle="windowHeader";isc.A.headerSrc=!(isc.Browser.isIE&&!isc.Browser.isStrict&&isc.Browser.minorVersion>=5.5)?"[SKIN]Window/headerGradient.gif":
null;isc.A.headerDefaults={height:18,layoutMargin:1,membersMargin:2,overflow:isc.Canvas.HIDDEN};isc.A.headerControls=["headerIcon","headerLabel","minimizeButton","maximizeButton","closeButton"];isc.A.hiliteHeaderStyle="windowHeaderHilite";isc.A.hiliteHeaderSrc=!(isc.Browser.isIE&&isc.Browser.minorVersion>=5.5)?"[SKIN]Window/headerGradient_hilite.gif":null;isc.A.showTitle=true;isc.A.title="Untitled Window";isc.A.headerLabelConstructor="Label";isc.A.headerLabelDefaults={wrap:false,align:isc.Canvas.LEFT,
styleName:"windowHeaderText",width:10,inherentWidth:true};isc.A.showHeaderIcon=true;isc.A.headerIconConstructor="Img";isc.A.headerIconDefaults={width:16,height:16,layoutAlign:"center",src:"[SKIN]/Window/headerIcon.gif"};isc.A.canFocusInHeaderButtons=false;isc.A.showCloseButton=true;isc.A.closeButtonConstructor="ImgButton";isc.A.closeButtonDefaults={width:16,height:14,layoutAlign:"center",src:"[SKIN]/Window/close.gif",click:function(){return this.creator.$7e()}};isc.A.showMinimizeButton=true;isc.A.minimizeButtonConstructor=
"ImgButton";isc.A.minimizeButtonDefaults={width:16,height:14,layoutAlign:"center",src:"[SKIN]/Window/minimize.gif",click:function(){if(!this.creator.onMinimizeClick||this.creator.onMinimizeClick()!=false)this.creator.minimize();return false}};isc.A.minimized=false;isc.A.defaultMinimizeHeight=16;isc.A.restoreButtonDefaults={width:16,height:14,src:"[SKIN]/Window/restore.gif",layoutAlign:"center",click:function(){if(!this.creator.onRestoreClick||this.creator.onRestoreClick()!=false)this.creator.restore();
return false}};isc.A.minimized=false;isc.A.showMaximizeButton=false;isc.A.maximizeButtonConstructor="ImgButton";isc.A.maximizeButtonDefaults={width:16,height:14,src:"[SKIN]/Window/maximize.gif",layoutAlign:"center",click:function(){if(!this.creator.onMaximizeClick||this.creator.onMaximizeClick()!=false)this.creator.maximize();return false}};isc.A.showFooter=true;isc.A.footerConstructor="HLayout";isc.A.footerHeight=18;isc.A.footerControls=["spacer","resizer"];isc.A.showStatusBar=true;isc.A.statusBarConstructor=
"Canvas";isc.A.statusBarDefaults={overflow:isc.Canvas.HIDDEN,styleName:"windowStatusBar",addAsChild:true,width:"100%",wrap:false,leftPadding:5};isc.A.showResizer=true;isc.A.resizerConstructor="Img";isc.A.resizerDefaults={canDragResize:true,getEventEdge:function(){return"BR"},src:"[SKIN]/Window/resizer.gif",width:16,height:16};isc.A.showToolbar=false;isc.A.toolbarConstructor="Toolbar";isc.A.toolbarDefaults={height:40,layoutMargin:10,membersMargin:5,overflow:"visible"};isc.A.customEdges=["T","B"];isc.A.overflow=
"hidden";isc.A=isc.Window.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoChildParentMap={resizer:"footer",statusBar:"footer",headerBackground:"header",headerIcon:"header",headerLabel:"header",minimizeButton:"header",maximizeButton:"header",closeButton:"header",toolbar:"body"};isc.B.push(isc.A.initWidget=function(){if(this.minimized&&this.maximized){this.logWarn("Window initialized with maximized and minimized both set to true. This is unsupported. The Window will be rendered minimized.");
this.maximized=false}if(this.minimized){this.minimized=null;this.minimize()}else if(this.maximized){this.maximized=null;this.maximize()}if(this.autoSize){this.vPolicy="none";this.overflow="visible"}this.Super(this.$oc);if(!this.$7f&&this.items!=null)for(var a=0;a<this.items.length;a++)isc.isA.Canvas(this.items[a])&&this.items[a].isDrawn()&&this.items[a].clear()},isc.A.createChildren=function(){this.makeHeader();this.makeBody();this.makeToolbar();this.makeFooter();this.$7f=true},isc.A.makeToolbar=
function(){this.addAutoChild("toolbar",{buttons:this.toolbarButtons,visibility:this.minimized?isc.Canvas.HIDDEN:isc.Canvas.INHERIT})},isc.A.draw=function(a,b,c,d){if(isc.$cv)arguments.$cw=this;if(!this.readyToDraw())return this;this.$7f||this.createChildren();return this.invokeSuper(isc.Window,"draw",a,b,c,d)},isc.A.destroy=function(){if(!this.$7f){var a=this.items;isc.isAn.Array(a)||(a=[a]);for(var b=0;b<a.length;b++)isc.isA.Canvas(a[b])&&a[b].destroy()}this.items=null;this.destroyModalMask();return this.Super("destroy",
arguments)},isc.A.mouseUp=function(){this.bringToFront();this.Super("mouseUp",arguments)},isc.A.makeHeader=function(){var a=this.addAutoChild("header",{styleName:this.headerStyle});if(a!=null)if(a!=null){(a=this.addAutoChild("headerBackground",{src:this.headerSrc}))&&a.sendToBack();if(this.minimized){this.$42l=this.minimizeButtonDefaults;this.$42m=this.minimizeButtonProperties;this.minimizeButtonDefaults=this.restoreButtonDefaults;this.minimizeButtonProperties=this.restoreButtonProperties}else if(this.maximized){this.$42n=
this.maximizeButtonDefaults;this.$42o=this.maximizeButtonProperties;this.maximizeButtonDefaults=this.restoreButtonDefaults;this.maximizeButtonProperties=this.restoreButtonProperties}this.addAutoChildren(this.headerControls,this.header);if(this.minimized){this.minimizeButtonDefaults=this.$42l;this.minimizeButtonProperties=this.$42m;this.$42l=this.$42p=null}else if(this.maximized){this.maximizeButtonDefaults=this.$42n;this.maximizeButtonProperties=this.$42o;this.$42n=this.$42q=null}}},isc.A.setHeaderControls=
function(a){if(this.headerControls!=a){var b=this.headerControls,c=[];this.headerControls=a;if(this.header!=null){for(var d=d;d<b.length;d++)c[d]=isc.isA.String(b[d])?this[b[d]]:b[d];this.header.removeMembers(c);this.header.addMembers(a)}}},isc.A.setShowHeaderControl=function(a,b,c){var d=this.headerControls;if(d.contains(a)){c||(c="show"+a.substring(0,1).toUpperCase()+a.substring(1));if(this[c]!=b){this[c]=b;if(this.header!=null)if(this[a])b?this[a].show():this[a].hide();else if(b){for(c=b=0;c<d.length;c++){if(d[c]==
a)break;this[d[c]]&&b++}this.addAutoChild(a,null,null,this.header,b);this[a].show()}}}else this.logWarn("request to show/hide header control with name:"+a+". No such control is present in this.headerControls - ignoring.")},isc.A.setShowCloseButton=function(a){this.setShowHeaderControl("closeButton",a,"showCloseButton")},isc.A.setShowMinimizeButton=function(a){this.setShowHeaderControl("minimizeButton",a,"showMinimizeButton")},isc.A.setShowMaximizeButton=function(a){this.setShowHeaderControl("maximizeButton",
a,"showMaximizeButton")},isc.A.setShowHeaderIcon=function(a){this.setShowHeaderControl("headerIcon",a,"showHeaderIcon")},isc.A.getDynamicDefaults=function(a){if(isc.endsWith(a,isc.Button.Class))return{canFocus:this.canFocusInHeaderButtons}},isc.A.headerLabel_autoMaker=function(){if(this.showTitle){var a=isc.Canvas.create({autoDraw:false,_generated:true,contents:isc.Canvas.blankImgHTML(1E3,100),overflow:"hidden"});if(this.canDragReposition){a.canDragReposition=true;a.dragTarget=this;this.canDragReposition=
false}var b=this.headerLabel=this.createAutoChild("headerLabel",{height:"100%",contents:this.title,dragTarget:this,getCurrentCursor:function(){if(this.parentElement)return this.parentElement.getCurrentCursor();return this.Super("getCurrentCursor",arguments)}});a.addChild(b);this.header.addMember(a)}else this.headerLabel=null},isc.A.setTitle=function(a){if(a)this.title=a;if(this.header)this.headerLabel?this.headerLabel.setContents(this.title):this.header.setContents(this.title)},isc.A.setButtons=function(a){this.logWarn("Window.setButtons() method called. This has been deprecated in favor of Window.setToolbarButtons()",
"deprecated");return this.setToolbarButtons(a)},isc.A.setToolbarButtons=function(a){this.toolbarButtons=a;this.toolbar&&this.toolbar.setButtons(a)},isc.A.makeFooter=function(){if(this.showFooter){this.addAutoChild("footer",{height:this.footerHeight});if(this.footer){for(var a=0;a<this.footerControls.length;a++){var b=this.footerControls[a],c={};if(b=="spacer")b=isc.LayoutSpacer.create();if(b=="resizer"){if(!this.canDragResize)continue;c.dragTarget=this}c.visibility=this.minimized?isc.Canvas.HIDDEN:
isc.Canvas.INHERIT;if(isc.isA.String(b))this.addAutoChild(b,c,null,this.footer);else{isc.isA.Canvas(b)?b.setProperties(c):isc.addProperties(b,c);this.footer.addMember(b)}}this.addAutoChild("statusBar",{height:this.footer.getHeight(),visibility:this.minimized?isc.Canvas.HIDDEN:isc.Canvas.INHERIT});this.status!=null&&this.setStatus(this.status);this.statusBar.sendToBack()}}},isc.A.setStatus=function(a){this.status=a;if(this.statusBar!=null){if(a==null)a="";this.statusBar.setContents((this.statusBar.leftPadding?
isc.Canvas.spacerHTML(this.statusBar.leftPadding,1):"")+a)}},isc.A.setSrc=function(a){this.src=a;this.body&&this.body.setContentsURL(a)},isc.A.makeBody=function(){if(this.showBody){var a,b,c;if(this.src)c=this.src;else{var d=this.items;if(isc.isA.Array(d))a=d.duplicate();else if(isc.isA.Canvas(d))a=d;else b=d;isc.isAn.Array(d)||(d=[d]);for(var e=0;e<d.length;e++)if(isc.isAn.Object(d[e]))d[e].locatorParent=this}if(!this.bodyConstructor)if(c)this.bodyConstructor="HTMLFlow";else if(b)this.bodyConstructor=
"Canvas";else if(this.autoSize){this.bodyConstructor="Layout";d={vPolicy:"none",hPolicy:"none"};if(this.bodyProperties)isc.addProperties(this.bodyProperties,d);else this.bodyProperties=d}else this.bodyConstructor=this.contentLayout!="none"?"Layout":"Canvas";this.createCanvii(a);if(isc.Browser.isMoz&&c!=null){if(!this.body)this.body={};this.body.useClipDiv=false}b={contents:b||"&nbsp;",_generated:false,defaultHeight:this.autoSize?50:100,contentsURL:c,contentsType:this.contentsType,hideUsingDisplayNone:isc.Browser.isMoz&&
c?true:false,styleName:this.bodyStyle,backgroundColor:this.bodyColor,visibility:this.minimized?isc.Canvas.HIDDEN:isc.Canvas.INHERIT,vertical:this.contentLayout==isc.Canvas.VERTICAL,overflow:this.autoSize?"visible":"auto"};if((c=isc.ClassFactory.getClass(this.bodyConstructor))&&c.isA("Layout"))b.members=a;else b.children=a;this.addAutoChild("body",b)}},isc.A.setBodyColor=function(a){this.bodyColor=a;this.body&&this.body.setBackgroundColor(a)},isc.A.hasInherentHeight=function(){return this.autoSize},
isc.A.hasInherentWidth=function(){return this.autoSize},isc.A.addItem=function(a,b){return this.addItems([a],b)},isc.A.removeItem=function(a){return this.removeItems([a])},isc.A.addItems=function(a,b){isc.isAn.Array(a)||(a=[a]);if(!this.items)this.items=[];for(var c=0;c<a.length;c++)if(!this.items.contains(a[c])){b!=null?this.items.addAt(a[c],b+c):this.items.add(a[c]);a[c].locatorParent=this;if(this.$7f)this.body.addMember?this.body.addMember(a[c],b!=null?b+c:null):this.body.addChild(a[c]);else isc.isA.Canvas(a[c])&&
a[c].isDrawn()&&a[c].clear()}return a},isc.A.removeItems=function(a){isc.isAn.Array(a)||(a=[a]);for(var b=0;b<a.length;b++)delete a[b].locatorParent;if(this.$7f)if(this.body.removeMembers)this.body.removeMembers(a);else for(b=0;b<a.length;b++)a[b].parentElement==this.body&&a[b].deparent();this.items.removeList(a);return a},isc.A.locatorChildDestroyed=function(a){this.items&&this.items.contains(a)&&this.items.remove(a)},isc.A.replaceItem=function(a,b){if(a==b)return a;if(b==null)return this.removeItem(a);
if(a==null)return this.addItem(b);for(var c=0;c<this.items.length;c++)if(this.items[c]==a){this.items[c]=b;if(this.$7f)if(this.body.addMember){c=this.body.getMemberNumber(a);this.body.removeMember(a);this.body.addMember(b,c)}else{this.body.removeChild(a);this.body.addChild(b)}else isc.isA.Canvas(b)&&b.isDrawn()&&b.clear();break}},isc.A.layoutChildren=function(a,b,c,d){if(this.body!=null){if(this.$7g){this.$7g=null;this.disableAutoSize()}this.autoSize&&this.$7h();this.invokeSuper(isc.Window,"layoutChildren",
a,b,c,d);(a=this.edgesAsChild?this.$l0:null)&&a.setHeight(this.getVisibleHeight(true))}},isc.A.$7h=function(){if(!this.minimized)if(!this.$7i){this.$7i=true;var a=this.edgesAsChild?this.$l0:null;this.body.isDrawn()||this.body.draw();this.body.inherentWidth=true;var b=this.getWidth()-this.getInnerWidth()+this.$tb+this.$tc;if(a)b+=a.$tb+a.$tc;a=this.body.getVisibleWidth()+b;this.logInfo("edgeWidth is: "+b+", setting window width to: "+a,"layout");this.getWidth()!=a&&this.setWidth(a);this.$7i=null}},
isc.A.disableAutoSize=function(){this.setAutoSize(false)},isc.A.setAutoSize=function(a){if(this.autoSize=a){if(this.body){if(isc.isA.Layout(this.body))this.body.vPolicy=this.body.hPolicy="none";this.body.setOverflow("visible")}this.vPolicy="none";this.setOverflow("visible")}else{if(this.body){if(isc.isA.Layout(this.body))this.body.vPolicy=this.body.hPolicy="fill";this.body.setOverflow("auto");this.body.inherentWidth=false}this.vPolicy="fill";this.setOverflow("hidden")}},isc.A.dragResizeStart=function(){if(this.Super("dragResizeStart",
arguments)!=false)if(this.autoSize&&isc.EH.dragTarget==this){this.autoSize=false;this.$7g=true}},isc.A.returnValue=function(a){this.isVisible()&&this.hide();this.callback&&this.delayCall("fireCallback",[this.callback,"value",[a]],50);return a},isc.A.show=function(a,b,c,d){if(isc.$cv)arguments.$cw=this;if(this.isModal)if(this.modalTarget)if(!isc.isA.Canvas(this.modalTarget)||this.modalTarget.contains(this)){this.logWarn("Invalid modalTarget:"+this.modalTarget+". Should be a canvas, and not an ancestor of this Window.");
delete this.modalTarget;this.isModal=false}else{this.modalTarget.showComponentMask(this.showModalMask?{styleName:this.modalMaskStyle,opacity:this.modalMaskOpacity}:null);this.observeModalTarget()}else if(this.topElement!=null){this.logWarn("Window specified with 'isModal' set to true, but this window has a parentElement. Only top level Windows can be shown modally.");this.isModal=false}else{this.showClickMask(this.getID()+(this.dismissOnOutsideClick?".handleCloseClick()":".flash()"),false,[this]);
this.makeModalMask()}if(this.autoCenter&&!this.parentElement){this.$7j=true;this.moveTo(0,-1E3);this.$7j=false}this.invokeSuper(isc.Window,"show",a,b,c,d);if(this.autoCenter){this.centerInPage();this.parentElement||isc.Page.setEvent(this.$nx,this,null,"parentResized")}this.bringToFront()},isc.A.makeModalMask=function(){if(this.showModalMask){if(!this.modalMask)this.modalMask=this.createAutoChild("modalMask",{styleName:this.modalMaskStyle,opacity:this.modalMaskOpacity});this.modalMask.show()}},isc.A.hideModalMask=
function(){this.modalMask&&this.modalMask.hide()},isc.A.destroyModalMask=function(){if(this.modalMask){this.modalMask.destroy();this.modalMask=null}},isc.A.observeModalTarget=function(){if(!this.$550){this.observe(this.modalTarget,"show","observer.modalTargetVisibilityChanged(observed)");this.observe(this.modalTarget,"hide","observer.modalTargetVisibilityChanged(observed)");this.observe(this.modalTarget,"clear","observer.modalTargetVisibilityChanged(observed)");this.observe(this.modalTarget,"draw",
"observer.modalTargetVisibilityChanged(observed)");this.observe(this.modalTarget,"parentVisibilityChanged","observer.modalTargetVisibilityChanged(observed)")}},isc.A.ignoreModalTarget=function(){if(!this.$550){this.ignore(this.modalTarget,"show");this.ignore(this.modalTarget,"hide");this.ignore(this.modalTarget,"draw");this.ignore(this.modalTarget,"clear");this.ignore(this.modalTarget,"parentVisibilityChanged")}},isc.A.modalTargetVisibilityChanged=function(a){this.$550=true;a.isVisible()&&a.isDrawn()?
this.show():this.hide();delete this.$550},isc.A.shouldDismissOnEscape=function(){if(this.dismissOnEscape!=null)return this.dismissOnEscape;return this.showHeader&&this.headerControls&&this.showCloseButton&&this.headerControls.contains("closeButton")},isc.A.handleKeyPress=function(){if(isc.EH.getKey()=="Escape"&&this.shouldDismissOnEscape()){this.handleEscape();return false}return this.Super("handleKeyPress",arguments)},isc.A.handleEscape=function(){this.isMasked()||this.handleCloseClick()},isc.A.resized=
function(a,b,c,d){this.invokeSuper(isc.Window,"resized",a,b,c,d);this.autoCenter&&this.centerInPage()},isc.A.hide=function(a,b,c,d){this.$7k&&isc.Animation.finishAnimation(this.$7k);this.invokeSuper(isc.Window,"hide",a,b,c,d);if(this.isDrawn()&&this.isModal)if(this.modalTarget){this.modalTarget.hideComponentMask();this.ignoreModalTarget()}else{this.hideClickMask();this.hideModalMask()}},isc.A.clear=function(a,b,c,d){this.$7k&&isc.Animation.finishAnimation(this.$7k);this.invokeSuper(isc.Window,"clear",
a,b,c,d);if(!this.clearingWithModalTarget&&this.isVisible()&&this.isModal)if(this.modalTarget){this.ignoreModalTarget();this.modalTarget.hideComponentMask()}else{this.hideClickMask();this.hideModalMask()}},isc.A.parentResized=function(){this.Super("parentResized",arguments);this.autoCenter&&this.centerInPage()},isc.A.moved=function(){this.Super("moved",arguments);if(this.isDrawn()&&!this.$7j)this.autoCenter=false},isc.A.centerInPage=function(){var a=this.getVisibleWidth(),b=this.getVisibleHeight(),
c=this.parentElement?this.parentElement:isc.Page;a=(c.getWidth()-a)/2+c.getScrollLeft();b=(c.getHeight()-b)/2+c.getScrollTop();a=Math.round(a);b=Math.max(Math.round(b),0);this.$7j=true;this.moveTo(a,b);this.$7j=null},isc.A.flash=function(a){var b=this.showHeader;if(a==null){if(this.$7l)return false;this.$7l=true;a=0;if(b){this.$7m=this.header.getStateName();if(this.headerBackground){this.$7n=this.headerBackground.getStateName();this.$7o=this.headerBackground.src}}else this.$7p=this.body.backgroundColor}if(b){b=
a%2==0?this.hiliteHeaderSrc:this.$7o;var c=a%2==0?this.hiliteHeaderStyle:this.$7n;this.header.setStyleName(a%2==0?this.hiliteHeaderStyle:this.$7m);var d=this.headerBackground;if(d){this.headerBackground.setStyleName(c);d.setSrc&&d.setSrc(b)}}else this.body.setBackgroundColor(a%2==0?this.hiliteBodyColor:this.$7p);a++;if(a<4)this.delayCall("flash",[a],100);else this.$7l=false;return false},isc.A.minimize=function(){this.$7k&&isc.Animation.finishAnimation(this.$7k);if(!this.minimized){if(this.maximized){if(this.maximizeButton){this.maximizeButton.addProperties(this.maximizeButtonDefaults);
this.maximizeButton.redraw()}}else{this.$7q=this.getHeight();this.$7r=this.getVisibleHeight();this.$7s=this.$po;this.$7t=this.canDragResize;this.canDragResize=false}var a;if(this.minimizeHeight)a=this.minimizeHeight;else if(this.showHeader){if(this.header)a=this.header.getHeight();else{a=this.headerDefaults;a=a.height||a.defaultHeight}a=a+this.layoutMargin*2+this.getVMarginBorderPad()}else a=this.defaultMinimizeHeight;this.overflow==isc.Canvas.VISIBLE&&this.setHeight(this.getVisibleHeight());this.$7u=
this.overflow;this.setOverflow("hidden");var b=this.minimizeButton;if(b){b.addProperties(this.restoreButtonDefaults);b.markForRedraw()}this.$7v=a;if(this.animateMinimize&&this.isDrawn()&&this.isVisible()){if(b){b.disable();b.redraw()}this.$7w();this.$7k=isc.Animation.registerAnimation(this.animateMinimizeStep,this.minimizeTime||this.animateTime,this.minimizeAcceleration||this.animateAcceleration,this)}else this.completeMinimize(a)}},isc.A.$7w=function(){if(this.body){this.$7x=this.body.getScrollTop();
this.$7y=this.body.overflow;this.$7z=this.body.getHeight();this.$70=this.body.getWidth();this.$71=this.body.$po;this.$72=this.body.$pn;this.$7y==isc.Canvas.VISIBLE&&this.body.resizeTo(this.body.getVisibleWidth(),this.body.getVisibleHeight());this.body.setOverflow(isc.Canvas.HIDDEN)}if(this.footer){this.$73=this.footer.overflow;this.$73==isc.Canvas.VISIBLE&&this.footer.setHeight(this.footer.getVisibleHeight());this.footer.setOverflow(isc.Canvas.HIDDEN)}},isc.A.$74=function(){if(this.body){this.body.scrollTo(null,
this.$7x);this.body.resizeTo(this.$70,this.$7z);this.body.$po=this.$71;this.body.$pn=this.$72;this.body.setOverflow(this.$7y)}if(this.footer){this.footer.scrollTo(null,0);this.footer.setHeight(this.footerHeight);this.footer.setOverflow(this.$73)}delete this.$7x;delete this.$7z;delete this.$71;delete this.$70;delete this.$72;delete this.$7y;delete this.$73},isc.A.animateMinimizeStep=function(a,b,c,d,e){if(this.maximized&&!this.$42u){this.$42v=this.parentElement?this.parentElement.getInnerHeight():
isc.Page.getHeight();this.$42w=this.parentElement?this.parentElement.getInnerWidth():isc.Page.getWidth();this.$42u=true}b=this.minimized?this.$7v:this.maximized?this.$42v:this.$7r;c=this.maximized?this.$42w:this.$42x;var f=e?this.$42w:this.$42x;b=Math.round(b+a*((d?this.$7r:e?this.$42v:this.$7v)-b));c=f==c?f:Math.round(c+a*(f-c));var g=b-this.getVMarginBorder()-2*this.layoutMargin-(this.showHeader?this.header.getHeight()+this.membersMargin:0);f=this.showBody?this.body:null;var h=this.showFooter?this.footer:
null,i=0,j=0,k=h?this.footerHeight:0,l=this.membersMargin||0;if(h!=null)i=g<=k?g:k;k=h?k+l:0;if(f!=null&&g>k)j=g-k;if(h)if(i>0){if(h.getHeight()!=i){g=h.getScrollTop()+h.getViewportHeight();h.resizeTo(null,i);h.scrollTo(null,g-h.getViewportHeight())}h.isVisible()||h.show()}else h.isVisible()&&h.hide();if(f)if(j>0){if(f.getHeight()!=j){g=f.getScrollTop()+f.getViewportHeight();f.resizeTo(null,j);f.scrollTo(null,g-f.getViewportHeight())}f.isVisible()||f.show()}else f.isVisible()&&f.hide();if(e||this.maximized){f=
e?this.$42y:0;h=e?this.$42z:0;this.moveTo(Math.round(f+a*((e?0:this.$42y)-f)),Math.round(h+a*((e?0:this.$42z)-h)),true)}this.resizeBy(c-this.getWidth(),b-this.getHeight(),null,null,true);if(a==1){delete this.$42u;this.$74();delete this.$7k;if(d)this.completeRestore(true);else e?this.completeMaximize(true):this.completeMinimize(this.$7v,true)}},isc.A.animateRestoreStep=function(a,b,c){this.animateMinimizeStep(a,b,c,true)},isc.A.animateMaximizeStep=function(a,b,c){this.animateMinimizeStep(a,b,c,null,
true)},isc.A.isAnimating=function(a,b,c,d,e){if(this.invokeSuper(isc.Window,"isAnimating",a,b,c,d,e))return true;if(a&&!isc.isAn.Array(a))a=[a];if(this.$7k&&(a==null||a.contains("minimize")||a.contains("rect")))return true;return false},isc.A.completeMinimize=function(a,b){this.minimized=true;this.maximized=false;this.body&&this.body.isVisible()&&this.body.hide();this.footer&&this.footer.isVisible()&&this.footer.hide();this.$po=a;if(this.$420!=null){b||this.setWidth(this.$420);this.$pn=this.$420}if(!b){this.setHeight(a);
this.$42y!=null&&this.setLeft(this.$42y);this.$42z!=null&&this.setTop(this.$42z)}this.$421!=null&&this.setShowShadow(this.$421);if(this.$422!=null&&this.headerLabel)this.headerLabel.parentElement.canDragReposition=this.$422;delete this.$422;delete this.$42z;delete this.$42y;delete this.$421;delete this.$420;this.minimizeButton&&this.minimizeButton.enable()},isc.A.restore=function(){this.$7k&&isc.Animation.finishAnimation(this.$7k);if(this.minimized||this.maximized){if(!this.$7r)this.$7r=this.getVisibleHeight();
var a=this.minimized?this.minimizeButton:this.maximizeButton;if(a){a.addProperties(this.minimized?this.minimizeButtonDefaults:this.maximizeButtonDefaults);a.markForRedraw()}if(this.animateMinimize&&this.isDrawn()&&this.isVisible()){if(a){a.disable();a.redraw()}this.$7w();this.$7k=isc.Animation.registerAnimation(this.animateRestoreStep,this.minimizeTime||this.animateTime,this.minimizeAcceleration||this.animateAcceleration,this)}else this.completeRestore()}},isc.A.completeRestore=function(a){this.$7u!=
null&&this.setOverflow(this.$7u);this.$7q!=null&&this.setHeight(this.$7q);this.$420!=null&&this.setWidth(this.$420);if(!a){this.$42y!=null&&this.setLeft(this.$42y);this.$42z!=null&&this.setTop(this.$42z)}if(this.$po!=null)this.$po=this.$7s;if(this.$pn!=null)this.$pn=this.$423;this.$421!=null&&this.setShowShadow(this.$421);if(this.$7t!=null)this.canDragResize=this.$7t;if(this.$422!=null&&this.headerLabel)this.headerLabel.parentElement.canDragReposition=this.$422;a=this.minimized?this.minimizeButton:
this.maximizeButton;this.maximized=this.minimized=false;this.$75();if(this.$424){this.reflowNow();this.setAutoSize(true)}delete this.$7q;delete this.$7s;delete this.$7r;delete this.$7t;delete this.$422;delete this.$7u;delete this.$420;delete this.$423;delete this.$421;delete this.$42y;delete this.$42z;delete this.$424;a&&a.enable()},isc.A.$75=function(){this.body&&!this.body.isVisible()&&this.body.show();this.footer&&!this.footer.isVisible()&&this.footer.show()},isc.A.maximize=function(){this.$7k&&
isc.Animation.finishAnimation(this.$7k);if(!this.maximized){if(this.minimized){if(this.minimizeButton){this.minimizeButton.addProperties(this.minimizeButtonDefaults);this.minimizeButton.redraw()}}else{this.$7q=this.getHeight();this.$7r=this.getVisibleHeight();this.$7s=this.$po;this.$7t=this.canDragResize;this.canDragResize=false}this.$42y=this.getLeft();this.$42z=this.getTop();this.$420=this.getWidth();this.$42x=this.getVisibleWidth();this.$423=this.$pn;if(this.headerLabel){this.$422=this.headerLabel.parentElement.canDragReposition;
this.headerLabel.parentElement.canDragReposition=false}this.$421=this.showShadow;this.setShowShadow(false);if(this.autoSize){this.$424=true;this.setAutoSize(false)}var a=this.maximizeButton;if(a){a.addProperties(this.restoreButtonDefaults);a.markForRedraw()}if(this.animateMinimize&&this.isDrawn()&&this.isVisible()){if(a){a.disable();a.redraw()}this.$42v=this.parentElement?this.parentElement.getInnerHeight():isc.Page.getHeight();this.$42w=this.parentElement?this.parentElement.getInnerWidth():isc.Page.getWidth();
this.$7w();this.$7k=isc.Animation.registerAnimation(this.animateMaximizeStep,this.minimizeTime||this.animateTime,this.minimizeAcceleration||this.animateAcceleration,this)}else this.completeMaximize()}},isc.A.completeMaximize=function(a){a||this.moveTo(0,0);this.resizeTo("100%","100%");this.$75();this.minimized=false;this.maximized=true;this.maximizeButton&&this.maximizeButton.enable()},isc.A.resizeTo=function(a,b,c,d,e){!e&&this.$7k&&isc.Animation.finishAnimation(this.$7k);return this.invokeSuper(isc.Window,
"resizeTo",a,b,c,d,e)},isc.A.resizeBy=function(a,b,c,d,e){!e&&this.$7k&&isc.Animation.finishAnimation(this.$7k);return this.invokeSuper(isc.Window,"resizeBy",a,b,c,d,e)},isc.A.$7e=function(){return this.handleCloseClick()},isc.A.handleCloseClick=function(){if(!(this.onCloseClick&&this.onCloseClick()==false))return this.closeClick()},isc.A.closeClick=function(){this.returnValue(null);this.hide();return false});isc.B._maxIndex=isc.C+72;isc.Window.registerStringMethods({onMaximizeClick:"",onMinimizeClick:"",
onRestoreClick:"",onCloseClick:""});isc.definePrintWindow&&isc.definePrintWindow();isc.Window.registerDupProperties("items");isc.defineClass("Portlet","Window");isc.A=isc.Portlet.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.showShadow=false;isc.A.animateMinimize=true;isc.A.dragAppearance="outline";isc.A.canDrop=true;isc.A.dragType="Portlet";isc.A.resizeFrom=null;isc.A.showMaximizeButton=true;isc.A.headerControls=["headerLabel","minimizeButton",
"maximizeButton","closeButton"];isc.A.dragOpacity=30;isc.A.showCloseConfirmationMessage=true;isc.A.closeConfirmationMessage="Close portlet?";isc.B.push(isc.A.closeClick=function(){this.showCloseConfirmationMessage?isc.confirm(this.closeConfirmationMessage,{target:this,methodName:"confirmedClosePortlet"}):this.confirmedClosePortlet(true)},isc.A.confirmedClosePortlet=function(a){if(a){a=(a=(a=this.parentElement)?a.parentElement:null)?a.parentElement:null;isc.isA.PortalLayout(a)?a.removePortlet(this):
this.clear()}},isc.A.maximize=function(){var a=this.getVisibleWidth(),b=this.getVisibleHeight(),c=this.getPageLeft(),d=this.getPageTop();this.$55d=isc.Canvas.create({width:this.getVisibleWidth(),height:this.getVisibleHeight()});this.masterLayout=this.parentElement;this.masterLayout.portletMaximizing=true;this.masterLayout.replaceMember(this,this.$55d,false);this.masterLayout.portletMaximizing=false;this.setWidth(a);this.setHeight(b);this.moveTo(c,d);this.bringToFront();this.draw();this.delayCall("doMaximize")},
isc.A.completeRestore=function(){this.Super("completeRestore",arguments);this.masterLayout.portletMaximizing=true;this.masterLayout.replaceMember(this.$55d,this);this.masterLayout.portletMaximizing=false;this.$55d.destroy();delete this.$55e;delete this.masterLayout},isc.A.doMaximize=function(){this.Super("maximize",arguments)});isc.B._maxIndex=isc.C+5;isc.defineClass("PortalColumnHeader","HLayout");isc.A=isc.PortalColumnHeader.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;
isc.D[isc.C]=isc.A.Class;isc.A.height=20;isc.A.noResizer=true;isc.A.border="1px solid #CCCCCC";isc.A.canDragReposition=true;isc.B.push(isc.A.initWidget=function(){this.Super("initWidget",arguments);this.dragTarget=this.portalColumn;this.addMember(isc.LayoutSpacer.create());this.menu=this.getMenuConstructor().create({width:150,portalColumn:this.portalColumn,data:[{title:"Remove Column",click:"menu.portalColumn.destroy()"},{title:"Add Column",click:"menu.portalColumn.addNewColumn()"}]});this.addMember(isc.MenuButton.create({title:"Column Properties",
width:150,menu:this.menu}));this.addMember(isc.LayoutSpacer.create())});isc.B._maxIndex=isc.C+1;isc.defineClass("PortalRow","Layout");isc.A=isc.PortalRow.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.defaultResizeBars="marked";isc.A.vertical=false;isc.A.overflow="hidden";isc.A.layoutMargin=3;isc.A.canAcceptDrop=true;isc.A.dropTypes=["Portlet"];isc.A.dropLineThickness=2;isc.A.dropLineProperties={backgroundColor:"blue"};isc.A.hDropOffset=
15;isc.B.push(isc.A.isHDrop=function(){var a=this.getDropPosition(),b=this.getMember(a==0?0:a-1);if(!b.containsEvent()&&a<this.members.length)b=this.getMember(a);a=b.getOffsetX();return a<this.hDropOffset||a>b.getVisibleWidth()-this.hDropOffset?true:false},isc.A.dropMove=function(){if(this.isHDrop()){this.Super("dropMove",arguments);this.parentElement.hideDropLine();return isc.EH.STOP_BUBBLING}else this.hideDropLine()},isc.A.dropOver=function(){if(this.isHDrop()){this.Super("dropOver",arguments);
this.parentElement.hideDropLine();return isc.EH.STOP_BUBBLING}else this.hideDropLine()},isc.A.drop=function(){if(this.isHDrop()){this.Super("drop",arguments);this.parentElement.hideDropLine();this.hideDropLine();return isc.EH.STOP_BUBBLING}else this.hideDropLine()},isc.A.membersChanged=function(){this.members.length==0&&!this.portletMaximizing&&this.destroy()});isc.B._maxIndex=isc.C+5;isc.defineClass("PortalColumn","Layout");isc.A=isc.PortalColumn.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;
isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.vertical=true;isc.A.defaultResizeBars="marked";isc.A.layoutMargin=3;isc.A.dragAppearance="outline";isc.A.canAcceptDrop=true;isc.A.canDrop=true;isc.A.dragType="PortalColumn";isc.A.dropTypes=["Portlet"];isc.A.dropLineThickness=2;isc.A.dropLineProperties={backgroundColor:"blue"};isc.A.showColumnHeader=true;isc.A.rowConstructor="PortalRow";isc.B.push(isc.A.initWidget=function(){this.Super("initWidget",arguments);if(this.showColumnHeader){this.columnHeader=
isc.PortalColumnHeader.create({title:"Column",portalColumn:this});this.addMember(this.columnHeader)}},isc.A.addNewColumn=function(){this.portalLayout.addColumnAfter(this)},isc.A.getDropComponent=function(a){this.addPortlet(a,this.getDropPosition())},isc.A.addPortlet=function(a,b){if(this.showColumnHeader)b+=1;var c=this.getMembers();if(c==null)b=0;else if(b>c.length)b=c.length;c=a.$po;c!=null&&a.setHeight("100%");var d={showResizeBar:this.canResizeRows};if(c!=null)d.height=c;c=this.createAutoChild("row",
d);this.addMember(c,b);c.addMember(a)},isc.A.addPortletToExistingRow=function(a,b,c){if(this.showColumnHeader)b+=1;var d=this.getMembers();d==null||d.length<=b?this.addPortlet(a):this.getMember(b).addMember(a,c)},isc.A.getDropPosition=function(){var a=this.Super("getDropPosition",arguments);if(a==0)a=1;return a});isc.B._maxIndex=isc.C+6;isc.defineClass("PortalLayout","Layout");isc.A=isc.PortalLayout.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;
isc.A.vertical=false;isc.A.numColumns=2;isc.A.showColumnMenus=true;isc.A.columnBorder="1px solid gray";isc.A.canResizeColumns=false;isc.A.canResizeRows=false;isc.A.canAcceptDrop=true;isc.A.dropTypes=["PortalColumn"];isc.A.dropLineThickness=2;isc.A.dropLineProperties={backgroundColor:"blue"};isc.A.columnConstructor="PortalColumn";isc.B.push(isc.A.getNumColumns=function(){return this.getMembers().length},isc.A.setColumnBorder=function(a){this.columnBorder=a;for(var b=this.members||[],c=0;c<b.length;c++)b[c].setBorder(a)},
isc.A.initWidget=function(){this.Super("initWidget",arguments);for(var a=0;a<this.numColumns;a++)this.addMember(this.makePortalColumn())},isc.A.makePortalColumn=function(a){if(a==null)a={};isc.addProperties(a,{portalLayout:this,showColumnHeader:this.showColumnMenus,border:this.columnBorder,showResizeBar:this.canResizeColumns,canResizeRows:this.canResizeRows});return this.createAutoChild("column",a)},isc.A.addColumn=function(a){this.addMember(this.makePortalColumn({}),a)},isc.A.removeColumn=function(a){a=
this.members[a];a!=null&&a.destroy()},isc.A.addColumnAfter=function(a){this.addColumn(this.getMemberNumber(a)+1)},isc.A.addPortlet=function(a,b,c){if(c==null)c=0;if(b==null)b=0;b=this.getMember(b);b!=null&&b.addPortlet(a,c)},isc.A.getColumn=function(a){return this.getMember(a)},isc.A.removePortlet=function(a){this.contains(a)&&a.deparent()});isc.B._maxIndex=isc.C+10;isc.defineClass("EditModePortalRow","PortalRow");isc.ClassFactory.mixInInterface("EditModePortalRow","EditContext");isc.A=isc.EditModePortalRow.getPrototype();
isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getDropComponent=function(a){if(!isc.isA.Palette(a))return a;a=a.transferDragData();a=isc.isAn.Array(a)?a[0]:a;return isc.Portlet.create({autoDraw:false,title:a.title,items:[a.liveObject],confirmedClosePortlet:function(b){this.Super("closePortlet",arguments);b&&this.destroy()}})});isc.B._maxIndex=isc.C+1;isc.defineClass("EditModePortalColumn","PortalColumn");isc.ClassFactory.mixInInterface("EditModePortalColumn",
"EditContext");isc.A=isc.EditModePortalColumn.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.rowConstructor="EditModePortalRow";isc.B.push(isc.A.getDropComponent=function(a){if(isc.isA.Palette(a)){a=a.transferDragData();a=isc.isAn.Array(a)?a[0]:a;a=isc.Portlet.create({autoDraw:false,title:a.title,items:[a.liveObject],confirmedClosePortlet:function(b){this.Super("closePortlet",arguments);b&&this.destroy()}})}else a=a;this.addPortlet(a,
this.getDropPosition())});isc.B._maxIndex=isc.C+1;isc.A=isc.PortalLayout.getPrototype();isc.A.columnConstructor="EditModePortalColumn";isc.ClassFactory.defineClass("Dialog","Window");isc.A=isc.Dialog;isc.A.$76=[];isc.A.OK_BUTTON_TITLE="OK";isc.A.APPLY_BUTTON_TITLE="Apply";isc.A.YES_BUTTON_TITLE="Yes";isc.A.NO_BUTTON_TITLE="No";isc.A.CANCEL_BUTTON_TITLE="Cancel";isc.A.DONE_BUTTON_TITLE="Done";isc.A.CONFIRM_TITLE="Confirm";isc.A.SAY_TITLE="Note";isc.A.WARN_TITLE="Note";isc.A.ASK_TITLE="Question";isc.A.ASK_FOR_VALUE_TITLE=
"Please enter a value";isc.A.LOGIN_TITLE="Please log in";isc.A.USERNAME_TITLE="Username";isc.A.PASSWORD_TITLE="Password";isc.A.LOGIN_BUTTON_TITLE="Log in";isc.A.LOGIN_ERROR_MESSAGE="Invalid username or password";isc.A.OK={getTitle:function(){return isc.Dialog.OK_BUTTON_TITLE},width:75,click:function(){this.topElement.okClick()}};isc.A.APPLY={getTitle:function(){return isc.Dialog.APPLY_BUTTON_TITLE},width:75,click:function(){this.topElement.applyClick()}};isc.A.YES={getTitle:function(){return isc.Dialog.YES_BUTTON_TITLE},
width:75,click:function(){this.topElement.yesClick()}};isc.A.NO={getTitle:function(){return isc.Dialog.NO_BUTTON_TITLE},width:75,click:function(){this.topElement.noClick()}};isc.A.CANCEL={getTitle:function(){return isc.Dialog.CANCEL_BUTTON_TITLE},width:75,click:function(){this.topElement.cancelClick()}};isc.A.DONE={getTitle:function(){return isc.Dialog.DONE_BUTTON_TITLE},width:75,click:function(){this.topElement.doneClick()}};isc.A=isc.Dialog.getPrototype();isc.A.styleName="dialogBackground";isc.A.skinImgDir=
"images/Dialog/";isc.A.canDragReposition=false;isc.A.canDragResize=false;isc.A.autoCenter=true;isc.A.bodyStyle="dialogBody";isc.A.bodyColor="#DDDDDD";isc.A.hiliteBodyColor="#FFFFFF";isc.A.messageStyle="normal";isc.A.headerStyle="dialogHeader";isc.A.hiliteHeaderStyle="dialogHeaderHilite";isc.A.headerLabelDefaults=isc.addProperties({},isc.Window.getInstanceProperty("headerLabelDefaults"),{styleName:"dialogHeaderText"});isc.A.showHeaderIcon=false;isc.A.showMinimizeButton=false;isc.A.showMaximizeButton=
false;isc.A.showFooter=false;isc.A.showToolbar=true;isc.A.askIcon="[SKIN]ask.png";isc.A.sayIcon="[SKIN]say.png";isc.A.warnIcon="[SKIN]warn.png";isc.A.confirmIcon="[SKIN]confirm.png";isc.A.notifyIcon="[SKIN]notify.png";isc.A.errorIcon="[SKIN]error.png";isc.A.stopIcon="[SKIN]stop.png";isc.A=isc.Dialog.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.namedLocatorChildren=["okButton","applyButton","yesButton","noButton","cancelButton","doneButton"];
isc.B.push(isc.A.saveData=function(){},isc.A.cancelClick=function(){return this.closeClick()},isc.A.$7e=function(){return this.cancelClick()},isc.A.okClick=function(){this.saveData();this.clear();this.returnValue(true)},isc.A.applyClick=function(){this.saveData()},isc.A.yesClick=function(){this.returnValue(true)},isc.A.noClick=function(){this.returnValue(false)},isc.A.doneClick=function(){this.clear();this.returnValue(true)});isc.B._maxIndex=isc.C+8;isc.Dialog.changeDefaults("toolbarDefaults",{makeButton:function(a){var b=
a;a=this.Super("makeButton",arguments);switch(b){case isc.Dialog.OK:this.creator.okButton=a;a.locatorParent=this.creator;break;case isc.Dialog.APPLY:this.creator.applyButton=a;a.locatorParent=this.creator;break;case isc.Dialog.YES:this.creator.yesButton=a;a.locatorParent=this.creator;break;case isc.Dialog.NO:this.creator.noButton=a;a.locatorParent=this.creator;break;case isc.Dialog.CANCEL:this.creator.cancelButton=a;a.locatorParent=this.creator;break;case isc.Dialog.DONE:this.creator.doneButton=a;
a.locatorParent=this.creator}return a}});isc.Dialog.Prompt={ID:"isc_globalPrompt",_generated:true,width:400,height:90,autoDraw:false,autoSize:true,isModal:true,autoCenter:true,showHeader:false,showFooter:false,showToolbar:false,dismissOnEscape:false,bodyStyle:"promptBody",message:"Loading...&nbsp;${loadingImage}",blurbDefaults:{width:390,align:isc.Canvas.CENTER,valign:isc.Canvas.CENTER,canSelectText:true},layoutMargin:0,showMessage:function(a,b){this.setProperties(b);this.message=a.evalDynamicString(this,
{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)});this.$7f||this.createChildren();this.addAutoChild("blurb",null,isc.Label,this.body);this.messageStyle!=null&&this.blurb.setBaseStyle(this.messageStyle);this.blurb.setContents(this.message==null?"&nbsp;":this.message);this.show()},clearMessage:function(){this.clear()},destroy:function(){isc.Dialog.Prompt=this.$77;return this.Super("destroy",arguments)}};isc.addGlobal("showPrompt",function(a,
b){var c=isc.Dialog.Prompt;if(!isc.isA.Dialog(c)){var d=c;c=isc.Dialog.Prompt=isc.Dialog.create(c);c.$77=d}isc.Dialog.Prompt.showMessage(a,b)});isc.addGlobal("clearPrompt",function(){isc.isA.Dialog(isc.Dialog.Prompt)&&isc.Dialog.Prompt.clearMessage()});isc.Dialog.Warn={ID:"isc_globalWarn",_generated:true,width:400,height:60,isModal:true,canDragReposition:true,keepInParentRect:true,autoDraw:false,autoSize:true,autoCenter:true,toolbarButtons:[isc.Dialog.OK],message:"Your message here!",blurbDefaults:{canSelectText:true},
contentLayout:"horizontal",autoChildParentMap:isc.addProperties({},isc.Window.getInstanceProperty("autoChildParentMap"),{stack:"body",iconImg:"body",blurb:"stack",toolbar:"stack"}),stackDefaults:{height:1},bodyDefaults:isc.addProperties({},isc.Window.getInstanceProperty("bodyDefaults"),{layoutMargin:15,membersMargin:10}),toolbarDefaults:isc.addProperties({},isc.Dialog.getInstanceProperty("toolbarDefaults"),{width:20,layoutAlign:"center"}),iconImgDefaults:{width:32,height:32},createChildren:function(){this.showToolbar=
false;this.Super("createChildren");this.addAutoChild("iconImg",null,isc.Img);this.addAutoChild("stack",null,isc.VStack);this.addAutoChild("blurb",{height:10},isc.Label);this.showToolbar=true;this.makeToolbar();this.body.hPolicy="fill"},showMessage:function(a,b){this.message=a;this.setProperties(b);b.callback==null&&delete this.callback;this.$7f||this.createChildren();this.messageStyle!=null&&this.blurb.setBaseStyle(this.messageStyle);this.blurb.setContents(this.message==null?"&nbsp;":this.message);
if(this.icon){this.iconImg.setSrc(this.getImgURL(this.icon));this.iconImg.show()}else this.iconImg.hide();this.toolbar.layoutChildren();this.blurb.isDirty()&&this.blurb.redraw();if(this.isDrawn()){this.stack.layoutChildren();this.body.layoutChildren();this.layoutChildren()}this.show();this.toolbar&&this.toolbar.getMember(0).focus()}};isc.addGlobal("showMessage",function(a,b,c,d){if(isc.isA.String(d)||isc.isA.Function(d)||d==null&&isc.isAn.Object(c)&&c.methodName==null&&c.action==null&&c.method==null){var e=
d;d=c;c=e}if(!isc.isA.Dialog(isc.Dialog.Warn))isc.Dialog.Warn=isc.Dialog.create(isc.Dialog.Warn);d||(d={});if(d.buttons!=null){this.logWarn("isc.showMessage() called with 'buttons' attribute specified on the properties object. This usage has been deprecated in favor of specifying properties.toolbarButtons. Copying the buttons attribute value across to toolbarButtons","deprecated");d.toolbarButtons=d.buttons;delete d.buttons}if(!d.toolbarButtons)d.toolbarButtons=b=="confirm"?[isc.Dialog.OK,isc.Dialog.CANCEL]:
b=="ask"?[isc.Dialog.YES,isc.Dialog.NO]:[isc.Dialog.OK];if(!d.title)d.title=b=="confirm"?isc.Dialog.CONFIRM_TITLE:b=="ask"?isc.Dialog.ASK_TITLE:b=="warn"?isc.Dialog.WARN_TITLE:isc.Dialog.SAY_TITLE;isc.$78(d);if(!d.icon)d.icon=isc.Dialog.getInstanceProperty(b+"Icon");if(c)d.callback=c;isc.Dialog.Warn.showMessage(a,d)});isc.addGlobal("getLastDialog",function(){return isc.Dialog.Warn});isc.addGlobal("dismissLastDialog",function(){isc.Dialog.Warn&&isc.Dialog.Warn.hide()});isc.$78=function(a){for(var b=
this.$79=this.$79||["okClick","yesClick","noClick","cancelClick","closeClick","applyClick"],c=0;c<b.length;c++){var d=b[c];a[d]||(a[d]=isc.Dialog.getInstanceProperty(d))}};isc.addGlobal("warn",function(a,b,c){isc.showMessage(a,"warn",b,c)});isc.addGlobal("say",function(a,b,c){isc.showMessage(a,"say",b,c)});isc.addGlobal("ask",function(a,b,c){isc.showMessage(a,"ask",b,c)});isc.confirm=function(a,b,c){isc.showMessage(a,"confirm",b,c)};isc.askForValue=function(a,b,c){c=c||isc.emptyObject;var d=isc.Dialog.Ask;
if(!d){var e=isc.DynamicForm.create({numCols:1,padding:3,items:[{name:"message",type:"blurb"},{name:"value",showTitle:false,width:"*"}],saveOnEnter:true,submit:function(){this.askDialog.okClick()}});d=isc.Dialog.Ask=isc.Dialog.create({items:[e],askForm:e,canDragReposition:true,isModal:true,bodyProperties:{overflow:"visible"},overflow:"visible"});e.askDialog=d;d.$8a=function(){this.clear();this.returnValue(this.askForm.getValue("value"))}}e=c.left!=null||c.top!=null;if(c.buttons!=null){this.logWarn("isc.askForValue() called with 'buttons' attribute specified on the properties object. This usage has been deprecated in favor of specifying properties.toolbarButtons. Copying the buttons attribute value across to toolbarButtons",
"deprecated");c.toolbarButtons=c.buttons;delete c.buttons}c=isc.addProperties({callback:b,title:c.title||isc.Dialog.ASK_FOR_VALUE_TITLE,autoCenter:!e,left:e?c.left||"10%":null,top:e?c.top||"20%":null,width:c.width||"80%",height:c.height||20,toolbarButtons:c.toolbarButtons||[isc.Dialog.OK,isc.Dialog.CANCEL],okClick:c.okClick||d.$8a},c);isc.$78(c);d.setProperties(c);d.askForm.setValues({message:a||"Please enter a value:",value:c.defaultValue||""});d.show();d.askForm.focusInItem("value")};isc.ClassFactory.defineClass("LoginDialog",
"Window");isc.LoginDialog.registerStringMethods({register:"values, form",lostPassword:"values, form"});isc.A=isc.LoginDialog;isc.A.firstTimeInit=true;isc.A=isc.LoginDialog.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.dismissable=false;isc.A.allowBlankPassword=false;isc.A.showLostPasswordLink=false;isc.A.showRegistrationLink=false;isc.A.errorStyle="formCellError";isc.A.lostPasswordItemTitle="Lost Password?";isc.A.registrationItemTitle=
"Register";isc.A.autoCenter=true;isc.A.autoSize=true;isc.A.isModal=true;isc.A.showMinimizeButton=false;isc.A.items=["autoChild:loginForm"];isc.A.loginFormConstructor="DynamicForm";isc.A.loginFormDefaults={numCols:2,padding:4,autoDraw:false,saveOnEnter:true,submit:function(){var a=this,b=[{username:this.getValue("usernameItem"),password:this.getValue("passwordItem")}];b[1]=function(c,d){if(c)a.complete();else{d!=null&&a.setValue("loginFailureItem",d);a.showItem("loginFailureItem");a.focusInItem("passwordItem")}};
this.fireCallback(this.loginDialog.loginFunc,"credentials,dialogCallback",b)},complete:function(a){this.loginDialog.hide();this.setValue("loginFailureItem",this.loginDialog.errorMessage);this.setValue("usernameItem","");this.setValue("passwordItem","");this.hideItem("loginFailureItem");if(a)this.fireCallback(this.loginFunc,"credentials,dialogCallback");else(a=isc.Cookie.get("loginRedirect"))&&window.location.replace(a)}};isc.A.formDSDefaults={clientOnly:true,useAllDataSourceFields:true};isc.A.formDefaultFields=
[{name:"loginFailureItem",type:"blurb",colSpan:2,visible:false},{name:"usernameItem",required:true,browserSpellCheck:false,browserAutoCorrect:false,browserAutoCapitalize:false,keyPress:function(a,b,c){if(c=="Enter"){b.focusInItem("passwordItem");return false}}},{name:"passwordItem",type:"password",required:true},{name:"loginButton",type:"button",type:"submit"},{name:"lostPasswordItem",type:"link",target:"javascript",canEdit:false,endRow:true,numCols:2,colSpan:2,showTitle:false,click:"form.loginDialog.lostPassword(form.getValues(), form)"},
{name:"registrationItem",type:"link",target:"javascript",canEdit:false,endRow:true,numCols:2,colSpan:2,showTitle:false,click:"form.loginDialog.register(form.getValues(), form)"}];isc.B.push(isc.A.getDynamicDefaults=function(a){switch(a){case "loginForm":a={loginDialog:this,values:{usernameItem:this.username||"",passwordItem:this.password||"",loginFailureItem:this.errorMessage},fields:this.formFields};for(var b=isc.clone(this.formDefaultFields),c=0;c<b.length;c++){var d=b[c],e=d.name;isc.addProperties(d,
this[e+"Defaults"],this[e+"Properties"]);if(null!=this[e+"Title"]){d.title=this[e+"Title"];if(d.type=="link"&&!d.showTitle)d.linkTitle=this[e+"Title"]}var f=this["show"+e.substr(0,1).toUpperCase()+e.substr(1)];if(null!=f)d.visible=f;switch(e){case "registrationItem":d.visible=this.showRegistrationLink;break;case "lostPasswordItem":d.visible=this.showLostPasswordLink;break;case "loginFailureItem":d.cellStyle=this.errorStyle;break;case "passwordItem":d.required=!this.allowBlankPassword}b[c]=d}a.dataSource=
isc.DataSource.create(this.formDSDefaults,{fields:b});return a}return null},isc.A.cancelClick=function(){this.loginForm.complete(true)},isc.A.init=function(){if(isc.LoginDialog.firstTimeInit){isc.LoginDialog.firstTimeInit=false;isc.LoginDialog.addProperties({title:isc.Dialog.LOGIN_TITLE,usernameItemTitle:isc.Dialog.USERNAME_TITLE,passwordItemTitle:isc.Dialog.PASSWORD_TITLE,loginButtonTitle:isc.Dialog.LOGIN_BUTTON_TITLE,errorMessage:isc.Dialog.LOGIN_ERROR_MESSAGE})}this.dismissOnEscape=this.showCloseButton=
this.dismissable;this.Super("init",arguments);this.loginForm.focusInItem("usernameItem");this.username&&this.loginForm.setValue("usernameItem",this.username);this.password&&this.loginForm.setValue("passwordItem",this.password)});isc.B._maxIndex=isc.C+3;isc.showLoginDialog=function(a,b){return isc.LoginDialog.create(isc.addProperties({},b,{autoDraw:true,loginFunc:a}))};isc.defineClass("MultiSortPanel","Layout");isc.A=isc.MultiSortPanel.getPrototype();isc.A.vertical=true;isc.A.overflow="visible";isc.A.addLevelButtonTitle=
"Add Level";isc.A.deleteLevelButtonTitle="Delete Level";isc.A.copyLevelButtonTitle="Copy Level";isc.A.invalidListPrompt="Columns may only be used once: '${title}' is used multiple times.";isc.A.propertyFieldTitle="Column";isc.A.directionFieldTitle="Order";isc.A.ascendingTitle="Ascending";isc.A.descendingTitle="Descending";isc.A.firstSortLevelTitle="Sort by";isc.A.otherSortLevelTitle="Then by";isc.A.topLayoutDefaults={_constructor:"HLayout",overflow:"visible",height:22,align:"left",membersMargin:5,
extraSpace:5};isc.A.addLevelButtonDefaults={_constructor:"IButton",icon:"[SKINIMG]actions/add.png",autoFit:true,height:22,showDisabled:false,autoParent:"topLayout",click:"this.creator.addLevel()"};isc.A.deleteLevelButtonDefaults={_constructor:"IButton",icon:"[SKINIMG]actions/remove.png",autoFit:true,height:22,showDisabled:false,autoParent:"topLayout",click:"this.creator.deleteSelectedLevel()"};isc.A.copyLevelButtonDefaults={_constructor:"IButton",icon:"[SKINIMG]RichTextEditor/copy.png",autoFit:true,
height:22,showDisabled:false,autoParent:"topLayout",click:"this.creator.copySelectedLevel()"};isc.A.levelUpButtonDefaults={_constructor:"ImgButton",src:"[SKINIMG]common/arrow_up.gif",prompt:"Move Level Up",height:22,width:20,imageType:"center",showDisabled:false,showRollOver:false,showDown:false,showFocused:false,autoParent:"topLayout",click:"this.creator.moveSelectedLevelUp()"};isc.A.levelDownButtonDefaults={_constructor:"ImgButton",prompt:"Move Level Down",src:"[SKINIMG]common/arrow_down.gif",height:22,
width:20,imageType:"center",showDisabled:false,showRollOver:false,showDown:false,showFocused:false,autoParent:"topLayout",click:"this.creator.moveSelectedLevelDown()"};isc.A.optionsGridDefaults={_constructor:"ListGrid",width:"100%",height:"*",canSort:false,canReorderFields:false,canResizeFields:false,canEdit:true,canEditNew:true,selectionType:"single",selectionProperty:"$73s",fields:[{name:"sortSequence",title:"&nbsp;",showTitle:false,canEdit:false,width:80,canHide:false,showHeaderContextMenuButton:false,
formatCellValue:function(a,b,c,d,e){return c==0?e.creator.firstSortLevelTitle:e.creator.otherSortLevelTitle}},{name:"property",title:" ",type:"select",defaultToFirstOption:true,showHeaderContextMenuButton:false,changed:"item.grid.creator.fireChangeEvent()"},{name:"direction",title:" ",type:"select",showHeaderContextMenuButton:false,defaultToFirstOption:true,changed:"item.grid.creator.fireChangeEvent()"}],recordClick:function(){this.creator.setButtonStates()},bodyKeyPress:function(a){a.keyName=="Delete"&&
this.anySelected()?this.removeSelectedData():this.Super("bodyKeyPress",arguments)},extraSpace:5};isc.A.propertyFieldNum=1;isc.A.directionFieldNum=2;isc.A.topAutoChildren=["topLayout","addLevelButton","deleteLevelButton","copyLevelButton","levelUpButton","levelDownButton"];isc.A=isc.MultiSortPanel.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getNumLevels=function(){return this.optionsGrid.data.length},isc.A.getSortLevel=function(a){return this.getSortSpecifier(this.data.get(a))},
isc.A.getSort=function(){var a=this.optionsGrid,b=a.data.duplicate(),c=a.getEditRow();if(a=isc.isA.Number(c)?a.getEditValues(c):null)b[c]=isc.addProperties(b[c],a);return this.getSortSpecifiers(b)},isc.A.setSort=function(a){this.optionsGrid.setData(a)},isc.A.validate=function(){for(var a=this.optionsGrid.data,b=[],c=0;c<a.length;c++){var d=a.get(c);if(b.contains(d.property)){var e=this;a=this.invalidListPrompt.evalDynamicString(this,{title:this.optionsGrid.getField("property").valueMap[d.property]});
isc.warn(a,function(){e.recordFailedValidation(d,c)});return false}b.add(d.property)}return true},isc.A.recordFailedValidation=function(a){var b=this.optionsGrid,c=isc.isA.Number(a)?a:b.getRecordIndex(a);a=!isc.isA.Number(a)?a:b.data.get(a);b.selectSingleRecord(a);b.startEditing(c,1)},isc.A.getSortSpecifier=function(a){if(isc.isA.Number(a))a=this.optionsGrid.data.get(a);return this.optionsGrid.removeSelectionMarkers(a)},isc.A.getSortSpecifiers=function(a){return this.optionsGrid.removeSelectionMarkers(a)},
isc.A.setSortSpecifiers=function(a){this.optionsGrid.setData(a)},isc.A.initWidget=function(){this.Super("initWidget",arguments);this.$74x=this.maxLevels;this.addAutoChildren(this.topAutoChildren);this.addAutoChild("optionsGrid");this.setSortFields();this.setSortDirections();this.setButtonTitles();this.addMember(this.topLayout);this.addMember(this.optionsGrid);this.setButtonStates();this.initialSort?this.setSortSpecifiers(this.initialSort):this.addLevel()},isc.A.setButtonTitles=function(){this.addLevelButton&&
this.addLevelButton.setTitle(this.addLevelButtonTitle);this.deleteLevelButton&&this.deleteLevelButton.setTitle(this.deleteLevelButtonTitle);this.copyLevelButton&&this.copyLevelButton.setTitle(this.copyLevelButtonTitle)},isc.A.setButtonStates=function(){var a=this.getNumLevels(),b=this.maxLevels,c=this.optionsGrid,d=c.anySelected();c=c.getRecordIndex(c.getSelectedRecord());this.addLevelButton&&this.addLevelButton.setDisabled(a>=b);this.deleteLevelButton&&this.deleteLevelButton.setDisabled(!d);if(this.copyLevelButton)this.copyLevelButton.setDisabled(!d||
a>=b);if(this.levelUpButton)this.levelUpButton.setDisabled(!d||c==0);if(this.levelDownButton)this.levelDownButton.setDisabled(!d||c==a-1)},isc.A.setFields=function(a){if(isc.DataSource&&isc.isA.DataSource(a))a=isc.getValues(a.getFields());this.fields=a;this.setSortFields();this.optionsGrid.refreshFields();this.setButtonStates()},isc.A.setSortFields=function(){var a=[];this.optionsGrid.getField("property").title=this.propertyFieldTitle;if(this.fields){for(var b=0;b<this.fields.length;b++){var c=this.fields[b];
c.canSort!=false&&a.add(c)}this.fields=a;a=this.optionsGrid;a=this.fields?this.fields.getValueMap(a.fieldIdProperty,"title"):{none:"No fields"};b=isc.getKeys(a).length;for(var d in a)if(isc.DataSource&&(!a[d]||isc.isAn.emptyString(a[d])))a[d]=isc.DataSource.getAutoTitle(d);this.optionsGrid.setValueMap("property",a);if(!this.$74x||this.maxLevels>b)this.maxLevels=b}},isc.A.setSortDirections=function(){this.optionsGrid.getField("direction").title=this.directionFieldTitle;this.optionsGrid.getField("direction").valueMap=
{ascending:this.ascendingTitle,descending:this.descendingTitle}},isc.A.addLevel=function(){var a=this.optionsGrid,b=a.getRecordIndex(a.getSelectedRecord()),c=a.getField("property"),d=a.getField("direction");b=b>=0?b+1:a.data.length;c={property:isc.firstKey(c.valueMap),direction:isc.firstKey(d.valueMap)};a.data.addAt(c,b);this.editRecord(b);this.setButtonStates();this.fireChangeEvent()},isc.A.deleteSelectedLevel=function(){var a=this.optionsGrid,b=a.getRecordIndex(a.getSelectedRecord());if(b>=0){a.data.removeAt(b);
this.setButtonStates();this.fireChangeEvent()}},isc.A.copySelectedLevel=function(){var a=this.optionsGrid,b=a.getRecordIndex(a.getSelectedRecord()),c=isc.shallowClone(a.getRecord(b));if(b>=0){a.data.addAt(c,b+1);this.editRecord(b+1);this.setButtonStates();this.fireChangeEvent()}},isc.A.editRecord=function(a){this.optionsGrid.selectSingleRecord(a);this.optionsGrid.startEditing(a,this.propertyFieldNum)},isc.A.moveSelectedLevelUp=function(){var a=this.optionsGrid,b=a.getRecordIndex(a.getSelectedRecord());
if(b>0){a.data.slide(b,b-1);this.setButtonStates();this.fireChangeEvent();this.optionsGrid.selectSingleRecord(b-1)}},isc.A.moveSelectedLevelDown=function(){var a=this.optionsGrid,b=a.getRecordIndex(a.getSelectedRecord());if(b>=0&&b<a.data.length-1){a.data.slide(b,b+1);this.setButtonStates();this.fireChangeEvent();this.optionsGrid.selectSingleRecord(b+1)}},isc.A.fireChangeEvent=function(){this.sortChanged(isc.shallowClone(this.getSort()))},isc.A.sortChanged=function(){});isc.B._maxIndex=isc.C+23;isc.defineClass("MultiSortDialog",
"Window");isc.A=isc.MultiSortDialog;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.askForSort=function(a,b,c){(a=isc.isAn.Array(a)?a:isc.DataSource&&isc.isA.DataSource(a)?isc.getValues(a.getFields()):isc.isA.DataBoundComponent(a)?a.getFields():null)&&isc.MultiSortDialog.create({autoDraw:true,fields:a,initialSort:b,callback:c})});isc.B._maxIndex=isc.C+1;isc.A=isc.MultiSortDialog.getPrototype();isc.A.isModal=true;isc.A.width=500;isc.A.height=
250;isc.A.vertical=true;isc.A.autoCenter=true;isc.A.showMinimizeButton=false;isc.A.mainLayoutDefaults={_constructor:"VLayout",width:"100%",height:"100%",layoutMargin:5};isc.A.multiSortPanelDefaults={_constructor:"MultiSortPanel",width:"100%",height:"*",autoParent:"mainLayout"};isc.A.title="Sort";isc.A.applyButtonTitle="Apply";isc.A.cancelButtonTitle="Cancel";isc.A.bottomLayoutDefaults={_constructor:"HLayout",width:"100%",height:22,align:"right",membersMargin:5,autoParent:"mainLayout"};isc.A.applyButtonDefaults=
{_constructor:"IButton",autoFit:true,height:22,autoParent:"bottomLayout",click:"this.creator.apply()"};isc.A.cancelButtonDefaults={_constructor:"IButton",autoFit:true,height:22,autoParent:"bottomLayout",click:"this.creator.cancel()"};isc.A.bottomAutoChildren=["bottomLayout","applyButton","cancelButton"];isc.A=isc.MultiSortDialog.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$783=["fields","initialSort","maxLevels","invalidListPrompt",
"addLevelButtonTitle","addLevelButtonDefaults","addLevelButtonProperties","deleteLevelButtonTitle","deleteLevelButtonDefaults","deleteLevelButtonProperties","copyLevelButtonTitle","copyLevelButtonDefaults","copyLevelButtonProperties","optionsGridDefaults","optionsGridProperties","firstSortLevelTitle","propertyFieldTitle","directionFieldTitle","descendingTitle","ascendingTitle","otherSortLevelTitle"];isc.B.push(isc.A.initWidget=function(){this.Super("initWidget",arguments);this.addAutoChild("mainLayout");
this.addAutoChild("multiSortPanel",this.getPassthroughProperties());this.addAutoChildren(this.bottomAutoChildren);this.addItem(this.mainLayout);this.optionsGrid=this.multiSortPanel.optionsGrid;this.setButtonStates()},isc.A.getPassthroughProperties=function(){for(var a=this.$783,b={},c=0;c<a.length;c++){var d=a[c];if(this[d]!=null)b[d]=this[d]}return b},isc.A.setButtonStates=function(){this.multiSortPanel.setButtonStates();this.applyButton.setTitle(this.applyButtonTitle);this.cancelButton.setTitle(this.cancelButtonTitle)},
isc.A.getNumLevels=function(){return this.multiSortPanel.getNumLevels()},isc.A.getSortLevel=function(a){return this.multiSortPanel.getSortLevel(a)},isc.A.getSort=function(){return this.multiSortPanel.getSort()},isc.A.validate=function(){return this.multiSortPanel.validate()},isc.A.closeClick=function(){this.cancel();return false},isc.A.cancel=function(){this.callback&&this.fireCallback(this.callback,["sortLevels"],[null]);this.hide();this.markForDestroy()},isc.A.apply=function(){this.optionsGrid.getEditRow()!=
null&&this.optionsGrid.endEditing();if(this.validate()){this.callback&&this.fireCallback(this.callback,["sortLevels"],[isc.shallowClone(this.getSort())]);this.hide();this.markForDestroy()}});isc.B._maxIndex=isc.C+10;isc.ClassFactory.defineClass("TabSet","Canvas");isc.A=isc.TabSet.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.overflow="hidden";isc.A.tabProperties={};isc.A.simpleTabBaseStyle="tabButton";isc.A.tabBarPosition=isc.Canvas.TOP;
isc.A.tabBarThickness=21;isc.A.selectedTab=0;isc.A.closeTabIcon="[SKIN]/TabSet/close.png";isc.A.closeTabIconSize=16;isc.A.moreTabCount=5;isc.A.moreTabTitle="More";isc.A.moreTabImage="[SKINIMG]/iOS/more.png";isc.A.moreTabProperties={};isc.A.moreTabPaneProperties={};isc.A.moreTabPaneDefaults={_constructor:"VLayout",width:"100%",height:"100%",setData:function(a){this.creator.moreTabPaneTable.setData(a)}};isc.A.moreTabPaneNavBarDefaults={_constructor:"NavigationBar",controls:["titleLabel"],autoParent:"moreTabPane"};
isc.A.moreTabPaneTableDefaults={_constructor:"TableView",width:"100%",height:"100%",recordNavigationClick:function(a){this.creator.$8c(a.button)},autoParent:"moreTabPane"};isc.A.tabBarControls=["tabScroller","tabPicker"];isc.A.showTabScroller=true;isc.A.showTabPicker=true;isc.A.tabBarControlLayoutConstructor="Layout";isc.A.tabBarControlLayoutDefaults={};isc.A.animateTabScrolling=true;isc.A.scrollerButtonSize=16;isc.A.pickerButtonSize=16;isc.A.skinImgDir="images/TabSet/";isc.A.symmetricScroller=true;
isc.A.scrollerSrc="[SKIN]/scroll.gif";isc.A.scrollerHSrc="[SKIN]hscroll.gif";isc.A.scrollerVSrc="[SKIN]vscroll.gif";isc.A.symmetricPickerButton=true;isc.A.pickerButtonSrc="[SKIN]/picker.gif";isc.A.pickerButtonHSrc="[SKIN]hpicker.gif";isc.A.pickerButtonVSrc="[SKIN]vpicker.gif";isc.A.paneContainerConstructor="PaneContainer";isc.A.paneContainerClassName="tabSetContainer";isc.A.paneContainerOverflow=isc.Canvas.AUTO;isc.A.symmetricEdges=true;isc.A.titleEditorDefaults={name:"title",type:"text",showTitle:false};
isc.B.push(isc.A.setPaneContainerOverflow=function(a){this.paneContainerOverflow=a;this.paneContainer&&this.paneContainer.setOverflow(a)});isc.B._maxIndex=isc.C+1;isc.A=isc.TabSet.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.simpleTabButtonConstructor=isc.Button;isc.A.tabBarConstructor=isc.TabBar;isc.A.disablePaneWithTab=true;isc.A.$537={top:"topEdgeSizes",bottom:"bottomEdgeSizes",left:"leftEdgeSizes",right:"rightEdgeSizes"};isc.A.$538=
{top:"topEdgeOffsets",bottom:"bottomEdgeOffsets",left:"leftEdgeOffsets",right:"rightEdgeOffsets"};isc.A.namedLocatorChildren=["tabBarControlLayout"];isc.B.push(isc.A.initWidget=function(){this.showEdges=false;this.Super("initWidget",arguments);if(this.tabs==null)this.tabs=[];if(this.tabBarDefaults==null)this.tabBarDefaults={};this.tabProperties=this.tabProperties||this.tabInstanceDefaults||{};var a=this.tabBarPosition;if(this.tabBarAlign==null)this.tabBarAlign=a=="left"||a=="right"?"top":"left";if(this.useSimpleTabs){this.tabBarDefaults.buttonConstructor=
this.simpleTabButtonConstructor;this.tabProperties.baseStyle=this.simpleTabBaseStyle+a.substring(0,1).toUpperCase()+a.substring(1)}this.makeTabBar();this.makePaneContainer();this.createPanes()},isc.A.makeTabBar=function(){if(this.tabs!=null){for(var a=this.tabBarPosition==isc.Canvas.LEFT||this.tabBarPosition==isc.Canvas.RIGHT,b=this.tabs.duplicate(),c=0;c<b.length;c++)for(var d in this.tabProperties)if(b[c][d]===void 0)b[c][d]=this.tabProperties[d];a=isc.addProperties({selectTabOnContextClick:this.selectTabOnContextClick,
ID:this.getID()+"_tabBar",width:a?this.tabBarThickness:"100%",height:a?"100%":this.tabBarThickness,accessKey:this.accessKey,tabIndex:this.tabIndex,tabs:b,align:this.tabBarAlign,vertical:a?true:false,selectedTab:this.selectedTab,showMoreTab:this.showMoreTab,moreTabCount:this.moreTabCount,moreTab:this.createMoreTab(),allowButtonReselect:this.showMoreTab?true:false,buttonSelected:function(e){this.Super("buttonSelected",arguments);this.parentElement!=null&&this.parentElement.$8c(e)},childResized:function(){this.Super("childResized",
arguments);this.parentElement!=null&&this.parentElement.$54m()},tabBarPosition:this.tabBarPosition,tabBarAlign:this.tabBarAlign,autoDraw:false},this.tabBarDefaults,this.tabBarProperties);a.creator=this;this.tabBar=this._tabBar=this.tabBarConstructor.create(a);this.addChild(this._tabBar)}},isc.A.createMoreTab=function(){if(!this.showMoreTab)return null;this.moreTabPane=this.createAutoChild("moreTabPane",this.moreTabPaneProperties);this.addAutoChild("moreTabPaneNavBar",{title:this.moreTabTitle});this.moreTabPaneTable=
this.addAutoChild("moreTabPaneTable");var a=isc.addProperties({title:this.moreTabTitle,icon:this.moreTabImage,pane:this.moreTabPane,moreTab:true},this.moreTabDefaults,this.moreTabProperties),b;for(b in this.tabProperties)if(a[b]===void 0)a[b]=this.tabProperties[b];return this.moreTab=a},isc.A.rebuildMorePane=function(){this.moreTabPane.setData(this.getMorePaneRecords())},isc.A.getMorePaneRecords=function(){for(var a=[],b=0;b<this.tabs.length;b++){var c=this.getTab(this.tabs[b]);if(!c.isVisible()){var d=
this.getTabObject(c),e=d.icon!=null?isc.Page.getImgURL(d.icon):null;a[a.length]={icon:e,title:d.title,pane:d.pane,button:c}}}return a},isc.A.setTabIndex=function(a){this.Super("setTabIndex",arguments);this._tabBar!=null&&this._tabBar.setTabIndex(a)},isc.A.setAccessKey=function(a){this.Super("setAccessKey",arguments);this._tabBar!=null&&this._tabBar.setAccessKey(a)},isc.A.createPanes=function(){for(var a=0;a<this.tabs.length;a++){var b=this.tabs[a],c=b.pane;if(c!=null)b.pane=this.createPane(c,b)}},
isc.A.createPane=function(a,b){if(a==null)return a;isc.isA.Canvas(a)||(a=this.createCanvas(a));if(a==null)return a;a.hide();this.disablePaneWithTab&&b&&b.disabled&&a.setDisabled(b.disabled);this.paneContainer.addMember(a);return a},isc.A.makePaneContainer=function(){var a={ID:this.getID()+"_paneContainer",_generated:false,className:this.paneContainerClassName,layoutMargin:this.paneMargin||0,overflow:this.paneContainerOverflow,$wn:function(){var c=this.Super("$wn",arguments);c.addMethods({$539:{top:"_top",
left:"_left",bottom:"_bottom",right:"_right"},getEdgePrefix:function(){var d=this.eventProxy;if((d=d?d.creator:null)&&!d.symmetricEdges)return this.$539[d.tabBarPosition]}});return c}};if(this.showPaneContainerEdges!=null)a.showEdges=this.showPaneContainerEdges;if(this.getPaneContainerEdges&&this.getPaneContainerEdges()!=null)a.customEdges=this.getPaneContainerEdges();if(!this.symmetricEdges){var b=this[this.$537[this.tabBarPosition]];if(b&&b.defaultSize!=null)a.edgeSize=b.defaultSize;if(b&&b.bottom!=
null)a.edgeBottom=b.bottom;if(b&&b.top!=null)a.edgeTop=b.top;if(b&&b.left!=null)a.edgeLeft=b.left;if(b&&b.right!=null)a.edgeRight=b.right;if((b=this[this.$538[this.tabBarPosition]])&&b.defaultSize!=null)a.edgeOffset=b.defaultSize;if(b&&b.bottom!=null)a.edgeOffsetBottom=b.bottom;if(b&&b.top!=null)a.edgeOffsetTop=b.top;if(b&&b.left!=null)a.edgeOffsetLeft=b.left;if(b&&b.right!=null)a.edgeOffsetRight=b.right}this.addAutoChild("paneContainer",a)},isc.A.getPaneContainerEdges=function(){if(this.showPartialEdges)return this.tabBarPosition==
"bottom"?["T","L","R"]:this.tabBarPosition=="left"?["T","B","R"]:this.tabBarPosition=="right"?["T","B","L"]:["B","L","R"];return null},isc.A.draw=function(a,b,c,d){if(this.tabs&&this.tabs.length>0){var e=this.getSelectedTabNumber();if(!isc.isA.Number(e)||e<0)e=this.selectedTab=0;this._tabBar.selectTab(e)}this.invokeSuper(isc.TabSet,"draw",a,b,c,d);this.fixLayout()},isc.A.setTabTitle=function(a,b){this.getTabObject(a).title=b;this.getTab(a).setTitle(b);this.resetTabPickerMenu()},isc.A.setTabIcon=function(a,
b){this.setTabProperties(a,{icon:b})},isc.A.enableTab=function(a){this.setTabDisabled(a,false)},isc.A.disableTab=function(a){this.setTabDisabled(a,true)},isc.A.setTabProperties=function(a,b){if(b){if(b.ID!=null){this.logWarn("setTabProperties(): Unable to modify ID for an existing tab - ignoring this property");delete b.ID}if(b.pane!=null){this.updateTab(a,b.pane);delete b.pane}if(b.disabled!=null){this.setTabDisabled(a,b.disabled);delete b.disabled}var c=this.getTabObject(a);a=this.getTab(a);if(c){isc.addProperties(c,
b);a&&a.setProperties(b);this.resetTabPickerMenu()}}},isc.A.setTabDisabled=function(a,b){var c=this.getTabObject(a);if(c)c.disabled=b;if(a=this.getTab(a)){a.setDisabled(b);if((c=a.pane)&&this.disablePaneWithTab)if(isc.isA.Canvas(c))c.setDisabled(b);else c.disabled=b}this.resetTabPickerMenu()},isc.A.addTab=function(a,b){return this.addTabs(a,b)},isc.A.addTabs=function(a,b){isc.isAn.Array(a)||(a=[a]);var c=this.getTabObject(this.getSelectedTabNumber()),d=this.getSelectedTabNumber()==-1;if(b==null||
b>this.tabs.length)b=this.tabs.length;for(var e=0;e<a.length;e++){a[e].pane=this.createPane(a[e].pane,a[e]);for(var f in this.tabProperties)if(a[e][f]===void 0)a[e][f]=this.tabProperties[f];this.tabs.addAt(a[e],b+e)}this._tabBar.addTabs(a,b);this.resetTabPickerMenu();this.delayCall("fixLayout");if(d)this.selectTab(0);else this.selectedTab=this.getTabNumber(c);this.addTabsEditModeExtras(a);return b},isc.A.setTabPane=function(a,b){return this.updateTab(a,b)},isc.A.removeTab=function(a,b){return this.removeTabs(a,
b)},isc.A.removeTabs=function(a,b){isc.isAn.Array(a)||(a=[a]);a=this.map("getTab",a);for(var c=false,d=this.getSelectedTab(),e=0,f=0;f<a.length;f++){var g=a[f],h=this.getTabNumber(g),i=this.tabs[h];if(i==d){c=true;if(h>0)e=h-1;else if(h<this.tabs.length+1)e=h}else if(h<this.selectedTab)this.selectedTab-=1;this.tabs.removeAt(h);if((h=i.pane)&&h.parentElement==this.paneContainer){this.paneContainer.removeChild(h);!b&&this.destroyPanes!==false&&h.destroy()}this._tabBar.removeTabs(g)}if(c&&this.tabs.length>
0){if(e>=this.tabs.length)e=this.tabs.length-1;this.selectTab(e)}this.resetTabPickerMenu();this.delayCall("fixLayout",0);this.removeTabsEditModeExtras()},isc.A.canCloseTab=function(a){if((a=this.getTabObject(a))&&a.canClose!=null)return a.canClose;return this.canCloseTabs},isc.A.setCanCloseTab=function(a,b){a=this.getTabObject(a);var c=this.getTab(a);a.canClose=b;var d=isc.addProperties({},a,{canClose:b});c&&c.setProperties(this.getTabBar().getCloseIconProperties(d))},isc.A.$52a=function(a){if(this.canCloseTab(a)){this.closeClick(a);
return false}else return this.tabIconClick(a)},isc.A.closeClick=function(a){this.onCloseClick&&this.onCloseClick(a)==false||this.removeTab(a)},isc.A.tabIconClick=function(a){var b=a.icon;if(b&&b.click)return this.fireCallback(b.click,"tab,tabSet",[a,this])},isc.A.getTabObject=function(a){a=this.getTabNumber(a);if(a>=this.tabs.length){var b=this.tabBar.getButton(a);if(b&&b.moreTab)return this.moreTab}return this.tabs[a]},isc.A.getTab=function(a){if(isc.isAn.Canvas(a))return a;if(!this.tabs)return null;
if(this.tabs.contains(a))a=this.tabs.indexOf(a);return a=this.getTabBar().getButton(a)},isc.A.getTabPane=function(a){return this.getTabObject(a).pane},isc.A.findTabObject=function(a,b){return this.tabs.find(a,b)},isc.A.getTabNumber=function(a){if(isc.isA.Number(a))return a;if(!this.tabs)return null;var b=this.tabs.indexOf(a);if(b!=-1)return b;if(isc.isA.String(a))return this.tabs.findIndex("ID",a);return this.getTabBar().getButtonNumber(this.getTab(a))},isc.A.updateTab=function(a,b){if(isc.isAn.Object(a)&&
!isc.isA.Canvas(a)&&this.tabs.indexOf(a)==-1){if(b!=null)a.pane=b;return this.addTabs(a)}var c=this.getTabNumber(a);if(c==-1)this.logWarn("no such tab: "+this.echo(a));else{var d=this.getTabObject(c),e=d.pane;if(d.pane!=b){if(e!=null){e.hide();e.deparent()}e=this.getTab(a);if(b==null)return d.pane=e.pane=null;b=d.pane=this.createPane(b,d);if(e!=null)e.pane=b;if(this.getSelectedTabNumber()==c){this.paneContainer.hasMember(b)||this.paneContainer.addMember(b);b.setVisibility(isc.Canvas.INHERIT)}}}},
isc.A.fixLayout=function(){var a=this._tabBar,b=this.$l0||this.paneContainer;if(!(a==null||b==null)){b.getZIndex(true)>=a.getZIndex(true)&&b.moveBelow(a);var c=this.$du(this.tabBarOverlap,a.borderThickness,a.baseLineThickness),d;switch(this.tabBarPosition){case isc.Canvas.TOP:d=false;b.setRect(0,a.getHeight()-c,this.getWidth(),this.getHeight()-a.getHeight()+c);break;case isc.Canvas.BOTTOM:d=false;a.setTop(this.getHeight()-a.getHeight());b.setRect(0,0,this.getWidth(),this.getHeight()-a.getHeight()+
c);break;case isc.Canvas.LEFT:d=true;b.setRect(a.getWidth()-c,0,this.getWidth()-a.getWidth()+c,this.getHeight());break;case isc.Canvas.RIGHT:d=true;a.setLeft(this.getWidth()-a.getWidth());b.setRect(0,0,this.getWidth()-a.getWidth()+c,this.getHeight())}if(this.showControls()){d?a.setHeight(this.getViewportHeight()-this.tabBarControlLayout.getHeight()):a.setWidth(this.getViewportWidth()-this.tabBarControlLayout.getWidth());this.tabBarControlLayout.bringToFront()}else a.resizeTo(d?null:"100%",d?"100%":
null);b=this.$8f();if(d)a.getScrollTop()>0&&b<=a.getViewportHeight()&&a.scrollTo(null,0);else a.getScrollLeft()>0&&b<=a.getViewportWidth()&&a.scrollTo(0,null)}},isc.A.shouldShowControl=function(a){if(a=="tabScroller"||a=="tabPicker"){if(this.showMoreTab)return false;if(!this.showTabScroller&&a=="tabScroller")return false;if(!this.showTabPicker&&a=="tabPicker")return false;a=this.$8f();if(a==0)return;for(var b=0,c=0;c<this.tabBarControls.length;c++){var d=this.tabBarControls[c];if(!(d=="tabScroller"||
d=="tabPicker"))if(this.shouldShowControl(d)){isc.isA.Canvas(d)||(d=this.getControl(d));b+=e?d.getVisibleHeight():d.getVisibleWidth()}}var e=this._tabBar.orientation==isc.Layout.VERTICAL;return a>(e?this.getViewportHeight()-b:this.getViewportWidth()-b)}a=this.getControl(a);if(isc.isA.Canvas(a))return a.showIf?a.fireCallback(a.showIf,[a]):true},isc.A.$8f=function(){if(!this._tabBar)return 0;var a=this._tabBar.getMemberSizes(),b=this._tabBar.vertical;if(a==null||a.length==0)return 0;a=a.sum();return a+
(b?(this._tabBar.$td||0)+(this._tabBar.$te||0):(this._tabBar.$tb||0)+(this._tabBar.$tc||0))},isc.A.getControl=function(a){if(isc.isA.Canvas(a))return a;var b=this._tabBar.orientation==isc.Layout.VERTICAL;if(a=="tabScroller"){if(!this.scroller){a=this.scrollerButtonSize;var c=this.symmetricScroller?"back":this.tabBarPosition+"_back",d=this.symmetricScroller?"forward":this.tabBarPosition+"_forward";this.scroller=isc.StretchImgButton.create({noDoubleClicks:true,tabSet:this,vertical:b,width:b?this.tabBarThickness-
this._tabBar.baseLineThickness:2*a,height:b?2*a:this.tabBarThickness-this._tabBar.baseLineThickness,items:[{name:c,width:b?null:a,height:b?a:null},{name:d,width:b?null:a,height:b?a:null}],skinImgDir:this.skinImgDir,src:this.symmetricScroller?b?this.scrollerVSrc:this.scrollerHSrc:this.scrollerSrc,showRollOver:false,showDown:false,backPartName:c,forwardPartName:d,mouseMove:function(){if(this.tabSet.showScrollerRollOver){var e=this.inWhichPart();this.setState(isc.StatefulCanvas.STATE_UP,e==this.backPartName?
this.forwardPartName:this.backPartName);this.setState(isc.StatefulCanvas.STATE_OVER,e)}},mouseOut:function(){if(this.tabSet.showScrollerRollOver){this.setState(isc.StatefulCanvas.STATE_UP,this.forwardPartName);this.setState(isc.StatefulCanvas.STATE_UP,this.backPartName)}},mouseDown:function(){this.clickPart=this.inWhichPart();this.setState(isc.StatefulCanvas.STATE_DOWN,this.clickPart)},mouseUp:function(){this.setState(isc.StatefulCanvas.STATE_UP,this.clickPart)},mouseStillDown:function(){this.click()},
click:function(){this.clickPart==this.backPartName?this.tabSet.scrollBack():this.tabSet.scrollForward();return false}},this.scrollerProperties)}return this.scroller}else if(a=="tabPicker"){a=this.pickerButtonSize;if(!this.tabPicker)this.tabPicker=isc.ImgButton.create({customState:this.symmetricPickerButton?null:this.tabBarPosition,tabSet:this,showRollOver:false,skinImgDir:this.skinImgDir,src:this.symmetricPickerButton?b?this.pickerButtonVSrc:this.pickerButtonHSrc:this.pickerButtonSrc,height:b?a:this.tabBarThickness-
this._tabBar.baseLineThickness,width:b?this.tabBarThickness-this._tabBar.baseLineThickness:a,click:function(){this.tabSet.showTabPickerMenu()}},this.tabPickerProperties);return this.tabPicker}if(isc.isA.String(a)&&isc.isA.Canvas(window[a]))return window[a];this.logWarn("Unable to resolve specified tabBarControl:"+isc.Log.echo(a)+" to a valid control. Not displaying.");return null},isc.A.showControls=function(){for(var a=this.tabBarControls,b=0,c=this.tabBarPosition,d=c==isc.Canvas.RIGHT||c==isc.Canvas.LEFT,
e=0,f=0;f<a.length;f++){var g=a[f];if(this.shouldShowControl(g))if(g=this.getControl(g)){var h=this.tabBarControlLayout;if(!h)this.tabBarControlLayout=h=this.createAutoChild("tabBarControlLayout",{styleName:this.tabBarControlLayoutDefaults.styleName||this.tabBar.styleName,childResized:function(){this.Super("childResized",arguments);this.creator.$510()},vertical:d,locatorParent:this});h.getMemberNumber(g)!=e&&h.addMember(g,e);e++;b+=d?g.getVisibleHeight():g.getVisibleWidth()}}if(h&&h.members){a=[];
for(f=e;f<h.members.length;f++)a.add(f);h.removeMembers(a)}if(e==0){this.hideControls();return false}this.placeControlLayout(b);if(!this.$8g){b=this._tabBar;this.$8g=this._tabBar.createAutoChild("baseLine",{vertical:c==isc.Canvas.LEFT||c==isc.Canvas.RIGHT,_generated:true,skinImgDir:b.skinImgDir,src:b.baseLineSrc,capSize:b.baseLineCapSize,imageType:isc.Img.STRETCH,autoDraw:false});this.addChild(this.$8g)}b=this._tabBar;e=this.tabBarThickness-b.baseLineThickness;if(c==isc.Canvas.LEFT)this.$8g.setRect(e,
0,b.baseLineThickness,this.getHeight());else if(c==isc.Canvas.RIGHT)this.$8g.setRect(this.getWidth()-this.tabBarThickness,0,b.baseLineThickness,this.getHeight());else if(c==isc.Canvas.TOP)this.$8g.setRect(0,e,this.getWidth(),b.baseLineThickness);else c==isc.Canvas.BOTTOM&&this.$8g.setRect(0,this.getHeight()-this.tabBarThickness,this.getWidth(),b.baseLineThickness);h.isVisible()||h.show();this.$8g.moveBelow(b);this.$8g.isVisible()||this.$8g.show();return true},isc.A.placeControlLayout=function(a){var b,
c,d,e=this.tabBarThickness-this._tabBar.baseLineThickness;b=this.tabBarPosition;if(b==isc.Canvas.LEFT){b=0;c=this.getHeight()-a;d=e;a=a}else if(b==isc.Canvas.RIGHT){b=this.getWidth()-e;c=this.getHeight()-a;d=e;a=a}else{if(b==isc.Canvas.BOTTOM){d=a;b=this.getWidth()-a;c=this.getHeight()-e}else{d=a;b=this.getWidth()-a;c=0}a=e}this.tabBarControlLayout.setRect(b,c,d,a);this.children.contains(this.tabBarControlLayout)||this.addChild(this.tabBarControlLayout)},isc.A.$510=function(){var a=this.tabBarControlLayout;
if(!(!a||!a.isDrawn()||!a.isVisible())){for(var b=0,c=0;c<a.members.length;c++)b+=a.vertical?a.members[c].getVisibleHeight():a.members[c].getVisibleWidth();this.placeControlLayout(b);if(a=this.tabBar)this.tabBarPosition==isc.Canvas.LEFT||this.tabBarPosition==isc.Canvas.RIGHT?a.setHeight(this.getViewportHeight()-this.tabBarControlLayout.getVisibleHeight()):a.setWidth(this.getViewportWidth()-this.tabBarControlLayout.getVisibleWidth())}},isc.A.hideControls=function(){this.tabBarControlLayout&&this.tabBarControlLayout.isVisible()&&
this.tabBarControlLayout.hide();this.$8g&&this.$8g.isVisible()&&this.$8g.hide()},isc.A.scrollForward=function(){this._tabBar.scrollForward(this.animateTabScrolling)},isc.A.scrollBack=function(){this._tabBar.scrollBack(this.animateTabScrolling)},isc.A.showTabPickerMenu=function(){if(!this.$8d){for(var a=this.tabs,b=[],c=0;c<a.length;c++)b[c]={index:c,enabled:!this.tabs[c].disabled,checkIf:"this.tabSet.getSelectedTabNumber() == "+c,title:a[c].pickerTitle||a[c].title,icon:this.canCloseTab(a[c])?null:
a[c].icon,click:"menu.tabSet.selectTab(item.index)"};this.$8d=this.getMenuConstructor().create({tabSet:this,data:b})}this.$8d.$8h();this.$8d.placeNear(this.tabPicker.getPageLeft(),this.tabPicker.getPageBottom());this.$8d.show()},isc.A.resetTabPickerMenu=function(){if(this.$8d){this.$8d.destroy();delete this.$8d}},isc.A.layoutChildren=function(a,b,c,d){this.invokeSuper(isc.TabSet,"layoutChildren",a,b,c,d);this.fixLayout()},isc.A.$54m=function(){this.fixLayout()},isc.A.$8i=function(a){if(isc.isA.Canvas(a))a=
this.getTabObject(a);a==this.moreTab&&this.rebuildMorePane();this.paneContainer.scrollTo(0,0);if(a&&a.pane){this.paneContainer.hasMember(a.pane)||this.paneContainer.addMember(a.pane);a.pane.show()}this.paneContainer.adjustOverflow()},isc.A.$8c=function(a){var b,c=this.getSelectedTab();this.getSelectedTabNumber();var d=this._tabBar.getButtonNumber(a),e=this.getTabObject(d),f=c!=null&&e!=c;if(!(this.showMoreTab&&this.tabBar.isShowingMoreTab()&&e==this.moreTab)){if(e==this.$80n)return;this.$80n=e}if(f&&
!this.$767){if(c.tabDeselected!=null)if(this.fireCallback(c.tabDeselected,"tabSet,tabNum, tabPane, ID, tab, newTab",[this,this.selectedTab,c.pane,c.ID,c,e])==false)b=true;if(!b&&this.tabDeselected!=null)b=this.tabDeselected(this.selectedTab,c.pane,c.ID,c,e)==false;!b&&c.pane&&c.pane.hide()}if(b){this.$767=true;this.selectTab(this.getSelectedTab());delete this.$767}else{this.selectedTab=d;if(!this.$767){if(e.tabSelected!=null){this.fireCallback(e.tabSelected,"tabSet,tabNum,tabPane,ID,tab",[this,d,
e.pane,e.ID,e]);if(this.getSelectedTabNumber()!=d)return}if(this.tabSelected){this.tabSelected(d,e.pane,e.ID,e);if(this.getSelectedTabNumber()!=d)return}}this.$8i(a);var g=this;this._tabBar.scrollTabIntoView(d,null,this.animateTabScrolling,function(){g.titleEditorForm!=null&&g.titleEditorForm.$799&&g.placeTitleEditor(g.titleEditorForm.targetTab);isc.isA.Function(g.tabScrolledIntoView)&&g.tabScrolledIntoView()})}},isc.A.getSelectedTab=function(){if(this.selectedTab>=this.tabs.length)return this.moreTab;
return this.tabs[this.selectedTab]},isc.A.getSelectedTabNumber=function(){if(!isc.isA.Number(this.selectedTab))this.selectedTab=this.getTabNumber(this.selectedTab);if(!this.tabs||!this.tabs[this.selectedTab])return-1;return this.selectedTab},isc.A.selectTab=function(a){a=this.getTabNumber(a);if(a!=-1){this._tabBar&&this._tabBar.selectTab(a);if(this._tabBar==null||!this._tabBar.$6c)this.selectedTab=a}},isc.A.getTabBar=function(){return this._tabBar},isc.A.$798=function(a){a=this.getTab(a);var b;if(this.canEditTabTitles){if(a.canEditTitle!==
false)b=true}else if(a.canEditTitle===true)b=true;b&&this.editTabTitle(a);return b},isc.A.editTabTitle=function(a){a=this.getTab(a);if(!isc.isA.DynamicForm(this.titleEditorForm)){var b=isc.addProperties({},this.titleEditorDefaults,this.titleEditorProperties,{handleKeyPress:function(c){var d=this.Super("handleKeyPress",arguments),e=c.keyName;if(e=="Escape")this.form.targetTabSet.cancelTabTitleEditing();else e=="Enter"&&this.form.targetTabSet.saveTabTitle();return d}});b.name="title";this.titleEditorForm=
isc.DynamicForm.create({autoDraw:false,margin:0,padding:0,cellPadding:0,fields:[b]});this.titleEditor=this.titleEditorForm.getItem("title")}b=this.titleEditorForm;b.setProperties({targetTabSet:this,targetTab:a});b.getItem("title").setValue(a.title);this.placeTitleEditor(a);if(this.tabBar.$743==0)this.showTitleEditor();else b.$799=true},isc.A.cancelTabTitleEditing=function(){this.titleEditorForm!=null&&this.clearTitleEditorForm()},isc.A.saveTabTitle=function(){if(this.titleEditorForm!=null&&this.titleEditorForm.isVisible()&&
this.titleEditorForm.isDrawn()){var a=false;form=this.titleEditorForm;tab=form.targetTab;newTitle=form.getValue("title");if(newTitle!=tab.title&&this.titleChanged!=null)if(this.fireCallback(this.titleChanged,"newTitle, oldTitle, tab",[newTitle,tab.title,tab])==false)a=true;a||this.setTabTitle(form.targetTab,newTitle)}this.clearTitleEditorForm()},isc.A.clearTitleEditorForm=function(){if(this.titleEditorForm!=null){this.titleEditorForm.clear();if(this.titleEditorForm.$803!=null){isc.Page.clearEvent(this.$803);
delete this.$803}}},isc.A.placeTitleEditor=function(a){var b=this.titleEditorForm;if(b){var c=this.tabBar.getLeft()+this.tabBar.getLeftMargin()-this.tabBar.getScrollLeft()+this.tabBar.getLeftBorderSize()+a.getLeft()+a.capSize,d=a.getVisibleWidth()-a.capSize*2;if(this.titleEditorLeftOffset){c+=this.titleEditorLeftOffset;d-=this.titleEditorLeftOffset}if(this.titleEditorRightOffset)d-=this.titleEditorRightOffset;b.getItem("title").setWidth(d);a=this.tabBar.getTop()+this.tabBar.getTopMargin()-this.tabBar.getScrollTop()+
this.tabBar.getTopBorderSize()+a.getTop();if(this.titleEditorTopOffset)a+=this.titleEditorTopOffset;b.setTop(a);b.setLeft(c);if(b.$799){this.showTitleEditor();b.$799=false}}},isc.A.showTitleEditor=function(){var a=this.titleEditorForm,b=a.getItem("title");if(a.masterElement!=this){a.$ns=true;a.$jo=false;a.$jq=false;this.addPeer(a)}else a.draw();b.focusInItem();b.delayCall("selectValue",[],100);if(this.$803==null){var c=this;this.$803=isc.Page.setEvent("mouseDown",function(){c.destroyed||c.$804()})}},
isc.A.$804=function(){isc.EH.getTarget()!=this.titleEditorForm&&this.saveTabTitle()},isc.A.clear=function(a,b,c,d){this.titleEditorForm!=null&&this.titleEditorForm.isDrawn()&&this.cancelTitleEditing();this.invokeSuper("TabSet","clear",a,b,c,d)},isc.A.setVisibility=function(a,b,c,d,e){this.invokeSuper("TabSet","setVisibility",a,b,c,d,e);!this.isVisible()&&this.titleEditorForm!=null&&this.titleEditorForm.isDrawn()&&this.cancelTitleEditing()},isc.A.parentVisibilityChanged=function(a,b,c,d,e){this.invokeSuper("TabSet",
"parentVisibilityChanged",a,b,c,d,e);!this.isVisible()&&this.titleEditorForm!=null&&this.titleEditorForm.isDrawn()&&this.cancelTitleEditing()});isc.B._maxIndex=isc.C+65;isc.TabSet.registerStringMethods({tabSelected:"tabNum,tabPane,ID,tab",tabDeselected:"tabNum,tabPane,ID,tab,newTab",getPaneContainerEdges:"",onCloseClick:"tab",titleChanged:"newTitle,oldTitle,tab"});isc.defineClass("PaneContainer","VLayout");isc.A=isc.PaneContainer.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;
isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.handleKeyPress=function(a,b){if(a.keyName=="Tab"&&a.ctrlKey){var c=this.parentElement,d=c.tabs.length-1,e=c.getSelectedTabNumber();if(a.shiftKey)if(e>0)e-=1;else e=d;else if(e<d)e+=1;else e=0;c.selectTab(e);c.getTabBar().getButton(e).focus();return false}if(this.convertToMethod("keyPress"))return this.keyPress(a,b)});isc.B._maxIndex=isc.C+1;isc.TabSet.registerDupProperties("tabs",["pane"]);isc._moduleEnd=isc._Containers_end=isc.timestamp?isc.timestamp():(new Date).getTime();
isc.Log&&isc.Log.logIsInfoEnabled("loadTime")&&isc.Log.logInfo("Containers module init time: "+(isc._moduleEnd-isc._moduleStart)+"ms","loadTime");delete isc.definingFramework}else window.isc&&isc.Log&&isc.Log.logWarn&&isc.Log.logWarn("Duplicate load of module 'Containers'.");if(window.isc&&window.isc.module_Core&&!window.isc.module_Grids){isc.module_Grids=1;isc._moduleStart=isc._Grids_start=isc.timestamp?isc.timestamp():(new Date).getTime();if(isc._moduleEnd&&(!isc.Log||isc.Log&&isc.Log.logIsDebugEnabled("loadTime"))){isc._pTM={message:"Grids load/parse time: "+(isc._moduleStart-isc._moduleEnd)+"ms",category:"loadTime"};if(isc.Log&&isc.Log.logDebug)isc.Log.logDebug(isc._pTM.message,"loadTime");else if(isc._preLog)isc._preLog[isc._preLog.length]=isc._pTM;else isc._preLog=
[isc._pTM]}isc.definingFramework=true;isc.ClassFactory.defineInterface("List");isc.List.addInterfaceMethods({init:function(){if(!this.data)this.data=[]},first:function(){return this.get(0)},last:function(){return this.get(this.getLength()-1)},indexOf:function(a,b,c){if(b==null)b=0;if(c==null)c=this.getLength()-1;for(b=b;b<=c;b++)if(this.get(b)==a)return b;return-1},lastIndexOf:function(a,b,c){if(b==null)b=this.getLength()-1;if(c==null)c=0;for(b=b;b>=c;b--)if(this.get(b)==a)return b;return-1},findNextIndex:function(a,
b,c,d){var e=this.getLength();if(a==null)a=0;else if(a>=e)return-1;if(d==null)d=e-1;if(b==null)return-1;if(isc.isA.String(b)){for(a=a;a<=d;a++)if((e=this.get(a))&&e[b]==c)return a;return-1}else return this.findNextMatch(b,a,d)},findAll:function(a,b){if(a==null)return null;if(isc.isA.String(a)){for(var c=null,d=this.getLength(),e=0;e<d;e++){var f=this.get(e);if(f&&f[a]==b){if(c==null)c=[];c.add(f)}}return c}else return this.findAllMatches(a)},getRange:function(a,b){if(b==null)b=this.getLength()-1;
for(var c=[],d=a;d<b;d++)c[c.length]=this.get(d);return c},duplicate:function(){return this.newInstance().addList(this)},add:function(a,b){if(b!==void 0)return this.addAt(a,b);this.addAt(a,this.getLength());return a},setLength:function(a){this.$ed();if(a>this.getLength())for(;a>this.getLength();)this.add(void 0);else for(;a<this.getLength();)this.removeAt(this.getLength()-1);this.$ee()},addListAt:function(a,b){this.$ed();for(var c=a.getLength(),d=0;d<c;d++)this.addAt(a.get(d),b+d);this.$ee();return a},
remove:function(a){var b=this.indexOf(a);if(b==-1)return false;this.$ed();a=this.getLength();for(b=b;b<a;b++)this.set(b,this.get(b+1));this.setLength(a-1);this.$ee();return true},removeList:function(a){if(a==null)return null;this.$ed();for(var b=0;b<this.getLength();b++){var c=this.get(b);if(a.contains(c)){this.removeAt(b);b--}}this.$ee();return a},sort:function(a){var b=this.getRange(0,this.getLength());b.sort(a);for(a=0;a<b.length;a++)this.set(a,b[a]);return this},getProperty:function(a){for(var b=
[],c=0;c<this.getLength();c++){var d=this.get(c);b[c]=d!=null?d[a]:null}return b},sortByProperty:function(a,b,c,d){var e=this.getRange(0,this.getLength());e.sortByProperty(a,b,c,d);for(a=0;a<e.length;a++)this.set(a,e[a]);return this},dataChanged:function(){this.onDataChanged&&this.onDataChanged()}});isc.$27b=function(){for(var a=["isEmpty","contains","containsAll","intersect","equals","getItems","addList","getValueMap","removeEvery","$ed","$ee","$52z","getItem","setItem","removeItem","clearAll","find",
"findIndex","findNextMatch","findAllMatches","findByKeys","size","subList","addAll","removeAll","clear"],b={},c=0;c<a.length;c++){var d=a[c];b[d]=Array.prototype[d]}isc.List.addInterfaceMethods(b)};isc.$27b();isc.A=isc.isA;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$27c="List";isc.B.push(isc.A.List=function(a){if(a==null)return false;if(isc.isA.Array(a))return true;return a.isA&&a.isA(this.$27c)});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("Tree",
null,"List");isc.A=isc.Tree.getPrototype();isc.A.getProperty=isc.List.getInstanceProperty("getProperty");isc.A=isc.Tree;isc.A.FOLDERS_AND_LEAVES=null;isc.A.FOLDERS_ONLY="folders";isc.A.LEAVES_ONLY="leaves";isc.A.UNLOADED=null;isc.A.LOADING="loading";isc.A.FOLDERS_LOADED="foldersLoaded";isc.A.LOADED="loaded";isc.A.PARENT="parent";isc.A.CHILDREN="children";isc.A.autoID=0;isc.A=isc.Tree.getPrototype();isc.A.modelType="children";isc.A.isFolderProperty="isFolder";isc.A.reportCollisions=true;isc.A.autoSetupParentLinks=
true;isc.A.pathDelim="/";isc.A.treeProperty="$42c";isc.A.nameProperty="name";isc.A.titleProperty="title";isc.A.childrenProperty="children";isc.A.cacheOpenList=true;isc.A.discardParentlessNodes=false;isc.A.indexByLevel=false;isc.A.showOpenIcon=false;isc.A.showDropIcon=false;isc.A.sortDirection=Array.ASCENDING;isc.A.showRoot=false;isc.A.autoOpenRoot=true;isc.A.separateFolders=false;isc.A.sortFoldersBeforeLeaves=true;isc.A.defaultNodeTitle="Untitled";isc.A.defaultLoadState=isc.Tree.UNLOADED;isc.A=isc.Tree.getPrototype();
isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$64z="treeLinking";isc.A.$27d=0;isc.A.loadBatchSize=50;isc.B.push(isc.A.init=function(){this.setupProperties();this.setRoot(this.root||this.makeRoot());this.loadOnInit&&this.loadBatchSize>=0&&this.loadSubtree(null,null,true)},isc.A.setupProperties=function(){if(this.ID==null||window[this.ID]!=this)isc.ClassFactory.addGlobalID(this);if(!this.parentProperty)this.parentProperty="_parent_"+this.ID;if(!this.isFolderProperty)this.isFolderProperty=
"_isFolder_"+this.ID;if(this.idField==null)this.idField="id";if(this.parentIdField==null)this.parentIdField="parentId";if(!this.openProperty)this.openProperty="_isOpen_"+this.ID;if(this.indexByLevel)this.$76h=[]},isc.A.destroy=function(){if(window[this.ID]==this)window[this.ID]=null},isc.A.makeRoot=function(){var a={};if(this.idField!==void 0)a[this.idField]=this.rootValue;a[this.treeProperty]=this.ID;return a},isc.A.convertToFolder=function(a){a[this.isFolderProperty]=true},isc.A.makeNode=function(a,
b){var c=this.find(a);if(c){b&&this.convertToFolder(c);return c}var d=a.split(this.pathDelim),e=this.getRoot()[this.nameProperty];if(e.endsWith(this.pathDelim))e=e.substring(0,e.length-this.pathDelim.length);d[0]!=e&&d.addAt(e,0);e=d[d.length-1];var f=e!=isc.emptyString;if(!f){d.length-=1;e=d[d.length-1]}c=d.slice(0,d.length-1).join(this.pathDelim)+this.pathDelim;d=this.find(c);if(d==null)d=this.find(c.substring(0,c.length-this.pathDelim.length));if(d)this.isFolder(d)||this.convertToFolder(d);else d=
this.makeNode(c,b);c={};c[this.nameProperty]=e;f||this.convertToFolder(c);return this.add(c,d)},isc.A.isRoot=function(a){return this.root==a},isc.A.setupParentLinks=function(a){if(!a)a=this.root;if(a[this.idField]!=null)this.nodeIndex[a[this.idField]]=a;var b=a[this.childrenProperty];if(b){this.setLoadState(a,isc.Tree.LOADED);isc.isAn.Array(b)||(b=a[this.childrenProperty]=[b])}if(!(!b||b.length==0))for(var c=0,d=b.length,e;c<d;c++)if(e=b[c]){if(e[this.parentIdField]==null&&a[this.idField]!=null)e[this.parentIdField]=
a[this.idField];e[this.parentProperty]=a;this.$76i(e,a);if(this.isFolder(e))this.setupParentLinks(e);else if(e[this.idField]!=null)this.nodeIndex[e[this.idField]]=e}},isc.A.linkNodes=function(a,b,c,d,e,f){if(this.modelType=="fields")this.connectByFields(a);else{a=a||this.data;b=b!=null?b:this.idField;c=c!=null?c:this.parentIdField;d=d!=null?d:this.rootValue;e=[];e.addList(a);a={};for(var g=0;g<e.length;g++){var h=e[g][b];if(h!=null)a[h]=e[g]}for(g=0;g<e.length;g++){h=e[g];if(this.nodeIndex[h[b]]!=
h)if(h!=null){var i=h[c];i=i!=null?a[i]:null;for(var j=[];i!=null;){i&&j.add(i);i=i[c];i=i!=null&&i!=h[c]?a[i]:null}if(j.length>0)for(i=j.length-1;i>=0;i--){this.logIsDebugEnabled(this.$64z)&&this.logDebug("linkNodes running - adding interlinked parents to the tree in  reverse hierarchical order -- currently adding node with id:"+j[i][b],this.$64z);this.$640(j[i],b,c,f,d);delete a[j[i][b]]}this.$640(h,b,c,f,d);delete a[h[b]]}}this.$736(true);this.dataChanged()}},isc.A.connectByParentID=function(a,
b,c,d,e){this.linkNodes(a,b,c,d,e)},isc.A.connectByParentId=function(a,b,c,d,e){this.linkNodes(a,b,c,d,e)},isc.A.$640=function(a,b,c,d,e){var f=this.logIsDebugEnabled(this.$64z),g=a[b];c=a[c];var h=e==null,i=c==null||c==-1||c===isc.emptyString,j=this.nodeIndex[c];if(j){f&&this.logDebug("found parent "+j[b]+" for child "+a[b],this.$64z);this.$27e(a,j)}else if(!h&&c==e){f&&this.logDebug("root node: "+a[b],this.$64z);this.$27e(a,this.root)}else if(!i&&this.discardParentlessNodes)this.logWarn("Couldn't find parent: "+
c+" for node with id:"+g,this.$64z);else{d=d||this.root;if(f)this.logDebug("child:"+a[b]+(i?" has no explicit parent ":" unable to find specified parent:"+c)+"- linking to default node "+d[b],this.$64z);this.$27e(a,d)}},isc.A.connectByFields=function(a){if(!a)a=this.data;for(var b=0;b<a.length;b++)this.addNodeByFields(a[b])},isc.A.addNodeByFields=function(a){for(var b=this.root,c=0;c<this.fieldOrder.length;c++){var d=a[this.fieldOrder[c]];d=isc.isA.String(d)?d:d+isc.emptyString;var e=this.findChildNum(b,
d);if(e!=-1)e=this.getChildren(b).get(e);else{e={};e[this.nameProperty]=d;this.add(e,b);this.convertToFolder(e)}b=e}this.add(a,b)},isc.A.getRoot=function(){return this.root},isc.A.setRoot=function(a,b){if((this.root=a)&&isc.endsWith(this.parentProperty,this.ID))a[this.parentProperty]=null;this.root[this.treeProperty]=this.ID;if(this.rootValue==null)this.rootValue=this.root[this.idField];var c=this.root[this.nameProperty];if(c==null||c==isc.emptyString)this.root[this.nameProperty]=this.pathDelim;this.isFolder(this.root)||
this.convertToFolder(this.root);this.nodeIndex={};if("parent"==this.modelType)this.data&&this.linkNodes();else if("fields"==this.modelType)this.data&&this.connectByFields();else if("children"==this.modelType){this.autoSetupParentLinks&&this.setupParentLinks();if(this.data){c=this.data;this.data=null;this.addList(c,this.root)}}else this.logWarn("Unsupported modelType: "+this.modelType);if(b!==false&&(this.autoOpenRoot||b))this.openFolder(a);this.setupParentLinks();this.$736();this.dataChanged()},isc.A.getCleanNodeData=
function(a,b,c){if(a==null)return null;var d=[],e=false;if(!isc.isAn.Array(a)){a=[a];e=true}for(var f=0;f<a.length;f++){var g=a[f],h={},i;for(i in g)if(!(i==this.parentProperty||i=="$27g"||i=="$42c"||i=="__ref"||i.startsWith("_isOpen_")||i.startsWith("_isFolder_")||i.startsWith("$399")||i=="$40a"||i.startsWith("_selection_")||b==false&&i==this.childrenProperty)){h[i]=g[i];if(c&&i==this.childrenProperty&&isc.isAn.Array(h[i]))h[i]=this.getCleanNodeData(h[i])}d.add(h)}if(e)return d[0];return d},isc.A.getName=
function(a){var b=isc.$ad;if(!a)return b;var c=a[this.nameProperty];if(c==null)c=a[this.idField];if(c==null){if(!this.isDescendantOf(a,this.root)&&a!=this.root)return null;if(!this.$27h)this.$27h=isc.Tree.autoID++ +"_";c=this.$27h+this.$27d++}isc.isA.String(c)||(c=b+c);return a[this.nameProperty]=c},isc.A.getTitle=function(a){if(!a)return null;if(a[this.titleProperty]!=null)return a[this.titleProperty];a=a[this.nameProperty];if(a==null)a=this.defaultNodeTitle;return isc.endsWith(a,this.pathDelim)?
a.substring(0,a.length-this.pathDelim.length):a},isc.A.getPath=function(a){var b=this.getParent(a);if(b==null)return this.getName(a);var c=this.getName(b);return this.getPath(b)+(c==this.pathDelim?isc.emptyString:this.pathDelim)+this.getName(a)},isc.A.getParentPath=function(a){var b=this.getName(a);a=this.getPath(a);return a.substring(0,a.length-b.length-this.pathDelim.length)},isc.A.getParent=function(a){if(a==null)return null;return a[this.parentProperty]},isc.A.getParents=function(a){var b=[];
for(a=this.getParent(a);a;){b.add(a);if(a==this.root)break;a=this.getParent(a)}return b},isc.A.getLevel=function(a){return this.getParents(a).length},isc.A.$59a=function(a){for(var b=[],c=this.getParents(a),d=c.length,e=0;e<d;e++){var f=this.getChildren(c[e]);f.indexOf(a)!=f.length-1&&b.add(d-e);a=c[e]}return b},isc.A.isFolder=function(a){if(a==null)return false;var b=a[this.isFolderProperty];if(b!=null)return b;if(a[this.childrenProperty])return true;a=this.getName(a);if(a==null)return false;return isc.endsWith(a,
this.pathDelim)},isc.A.isLeaf=function(a){return!this.isFolder(a)},isc.A.isFirst=function(a){var b=this.getParent(a);if(!b)return true;return this.getChildren(b,this.opendisplayNodeType,this.$27i,this.sortDirection,null,this.$45g)[0]==a},isc.A.isLast=function(a){var b=this.getParent(a);if(!b)return true;b=this.getChildren(b,this.opendisplayNodeType,this.$27i,this.sortDirection,null,this.$45g);return b[b.length-1]==a},isc.A.findById=function(a){return this.find(this.idField,a)},isc.A.find=function(a,
b){if(b===void 0&&isc.isA.String(a))return this.$27j(a);if(b!==void 0){if(a==this.idField)return this.nodeIndex[b];if(this.root[a]==b)return this.root;return this.getDescendants().find(a,b)}else{var c=this.getDescendants();c.add(this.root);return c.find(a)}},isc.A.findAll=function(a,b){return this.getDescendants().findAll(a,b)},isc.A.$27j=function(a){if(a==this.pathDelim)return this.root;var b=this.getPath(this.root);if(a==b)return this.root;var c=this.root,d=0,e=this.pathDelim.length;if(isc.startsWith(a,
b))d=b.length;else if(isc.startsWith(a,this.pathDelim))d+=e;for(;;){b=a.indexOf(this.pathDelim,d);if(b==d)d++;else{var f=b!=-1;d=a.substring(d,f?b:a.length);d=this.findChildNum(c,d);if(d==-1)return null;c=c[this.childrenProperty][d];if(!f)return c;d=b+e;if(d==a.length)return c}}},isc.A.findChildNum=function(a,b){var c=this.getChildren(a);if(c==null)return-1;if(b==null)return-1;for(var d=c.getLength(),e=isc.endsWith(b,this.pathDelim),f=this.pathDelim.length,g=0;g<d;g++){var h=this.getName(c.get(g)),
i=h.length-b.length;if(i==0&&h==b)return g;if(i==f){if(isc.startsWith(h,b)&&isc.endsWith(h,this.pathDelim)&&!e)return g}else if(e&&i==-f)if(isc.startsWith(b,h))return g}return-1},isc.A.getChildren=function(a,b,c,d,e,f){c==null&&this.$27i==null&&this.separateFolders&&this.sortByProperty();if(a==null)a=this.root;if(this.isLeaf(a))return null;if(a[this.childrenProperty]==null){b=[];return a[this.childrenProperty]=b}var g=a[this.childrenProperty],h;if(e){h=[];for(var i=0,j=g.length;i<j;i++){var k=g[i];
if(this.fireCallback(e,"node,parent,tree",[k,a,this]))h[h.length]=k}g=h}if(b==isc.Tree.FOLDERS_ONLY){h=[];i=0;for(j=g.length;i<j;i++)if(this.isFolder(g[i]))h[h.length]=g[i]}else if(b==isc.Tree.LEAVES_ONLY){h=[];i=0;for(j=g.length;i<j;i++)if(this.isLeaf(g[i]))h[h.length]=g[i]}else h=g;if(c)if(!this.$684||this.$684!=this.sortProp&&a!=this.getRoot()||this.$684==this.sortProp&&a==this.getRoot())h.sortByProperty(this.sortProp,d,c,f);return h},isc.A.getFolders=function(a,b,c,d,e){return this.getChildren(a,
isc.Tree.FOLDERS_ONLY,b,c,d,e)},isc.A.getLeaves=function(a,b,c,d,e){return this.getChildren(a,isc.Tree.LEAVES_ONLY,b,c,d,e)},isc.A.getLevelNodes=function(a,b){if(this.indexByLevel&&(b==null||b==this.getRoot()))return this.$76h[a]||[];else{b||(b=this.getRoot());var c=this.getChildren(b);if(a==0)return c;var d=[];if(!c)return d;for(var e=0;e<c.length;e++){var f=this.getLevelNodes(a-1,c[e]);f&&d.addList(f)}return d}},isc.A.getDepth=function(){if(this.$76h)return this.$76h.length;return null},isc.A.hasChildren=
function(a,b){var c=this.getChildren(a,b);return c!=null&&c.length>0},isc.A.hasFolders=function(a){return this.hasChildren(a,isc.Tree.FOLDERS_ONLY)},isc.A.hasLeaves=function(a){return this.hasChildren(a,isc.Tree.LEAVES_ONLY)},isc.A.isDescendantOf=function(a,b){if(a==b)return false;for(var c=a;c!=null;){if(c==b)return true;c=c[this.parentProperty]}return false},isc.A.getDescendants=function(a,b,c){if(!a)a=this.root;var d=[];c||(c=function(){return true});if(this.isLeaf(a))return d;a=this.getChildren(a);
if(!a)return d;for(var e=0,f=a.length,g;e<f;e++){g=a[e];if(this.isFolder(g)){if(b!=isc.Tree.LEAVES_ONLY&&c(g))d[d.length]=g;d=d.concat(this.getDescendants(g,b,c))}else if(b!=isc.Tree.FOLDERS_ONLY&&c(g))d[d.length]=g}return d},isc.A.getDescendantFolders=function(a,b){return this.getDescendants(a,isc.Tree.FOLDERS_ONLY,b)},isc.A.getDescendantLeaves=function(a,b){return this.getDescendants(a,isc.Tree.LEAVES_ONLY,b)},isc.A.dataChanged=function(){},isc.A.add=function(a,b,c){if(b==null&&this.modelType==
isc.Tree.PARENT){var d=a[this.parentIdField];if(d!=null)b=this.findById(d)}if(isc.isA.String(b))b=this.find(b);else if(!this.getParent(b)&&b!==this.getRoot()){isc.logWarn("Tree.add(): specified parent node:"+this.echo(b)+" is not in the tree, returning");return null}if(!b){if(d=this.getParentPath(a))b=this.find(d);if(!b)return null}this.$27e(a,b,c);this.$736(true);this.dataChanged();return a},isc.A.$580=function(a){this.reportCollisions&&this.logWarn("Adding node to tree with id property set to:"+
a+". A node with this ID is already present in this Tree - that node will be replaced. Note that this warning may be disabled by setting the reportCollisions attribute to false.")},isc.A.$27e=function(a,b,c){var d=a[this.idField];if(d!=null&&this.modelType==isc.Tree.PARENT){var e=this.findById(d);if(e){this.$580(d);this.remove(e)}}this.getName(a);this.convertToFolder(b);(d=b[this.childrenProperty])||(d=b[this.childrenProperty]=[]);if(d!=null&&!isc.isAn.Array(d))b[this.childrenProperty]=d=[d];c==null||
c>d.length?d.add(a):d.addAt(a,c);d=this.idField;a[this.parentIdField]=b[d];a[this.parentProperty]=b;a[this.treeProperty]=this.ID;if(a[d]!=null)this.nodeIndex[a[d]]=a;this.setLoadState(b,isc.Tree.LOADED);this.$76i(a,b,c);b=a[this.childrenProperty];if(b!=null){a[this.childrenProperty]=[];if(isc.isAn.Array(b))b.length>0&&this.$27k(b,a);else this.$27e(b,a);this.setLoadState(a,isc.Tree.LOADED)}else{b=a[this.isFolderProperty];if(b!=null&&!isc.isA.Boolean(b))b=isc.booleanValue(b,true);if(b==null&&this.defaultIsFolder)b=
true;a[this.isFolderProperty]=b}},isc.A.$76i=function(a,b,c){if(this.indexByLevel){var d=this.getLevel(b);this.$76h[d]||(this.$76h[d]=[]);var e=this.$76h[d];if(e.length==0)isc.isAn.Array(a)?e.concat(a):e.push(a);else{if(isc.isAn.Array(a))for(var f=[],g=0;g<a.length;g++)e.contains(a[g])||f.push(a[g]);else if(e.contains(a))return;g=false;for(var h=0,i=0;i<e.length;i++){if(this.getParent(e[i])==b)g=true;else if(g)break;else continue;if(h===c)break;h++}if(isc.isAn.Array(a))this.$76h[d]=i==0?f.concat(e):
i==e.length?e.concat(f):e.slice(0,i).concat(f,e.slice(i));else e.splice(i,0,a)}}},isc.A.addList=function(a,b,c){if(isc.isA.String(b))b=this.find(b);if(!b)return false;this.$27k(a,b,c);this.$736(true);this.dataChanged();return a},isc.A.$27k=function(a,b,c){for(var d=0,e=a.length;d<e;d++)this.$27e(a[d],b,c!=null?c++:null)},isc.A.move=function(a,b,c){this.moveList([a],b,c)},isc.A.moveList=function(a,b,c){var d=a[0],e=this.getParent(d);d=this.getChildren(e).indexOf(d);this.removeList(a);if(b==e&&a.length==
1)c>d&&c--;else if((e=this.getChildren(b))&&c>e.length)c=e.length;this.addList(a,b,c);this.dataChanged()},isc.A.remove=function(a,b){var c=this.getParent(a);if(!c)return false;c=this.getChildren(c);if(!c)return false;if(c.remove(a)){delete this.nodeIndex[a[this.idField]];if(!b){this.$736(true);this.dataChanged()}this.removeChildrenFromNodeIndex(a);this.$76j(a);return true}return false},isc.A.removeChildrenFromNodeIndex=function(a){if(a=this.getChildren(a))for(var b=0;b<a.length;b++){this.getChildren(a[b])&&
this.removeChildrenFromNodeIndex(a[b]);delete this.nodeIndex[a[b][this.idField]]}},isc.A.removeList=function(a){for(var b=false,c=a.length-1;c>=0;c--)if(this.remove(a[c],true))b=true;if(b){this.$736(true);this.dataChanged()}return b},isc.A.$76j=function(a,b){if(this.indexByLevel){b=b||this.getLevel(a)-1;var c=this.getChildren(a);if(c)for(var d=0;d<c.length;d++)this.$76j(c[d],b+1);if(this.$76h[b]){c=this.$76h[b];for(d=0;d<c.length;d++)if(c[d]==a){c.splice(d,1);break}}}},isc.A.getLoadState=function(a){if(!a)return null;
if(!a.$27g)return this.defaultLoadState;return a.$27g},isc.A.isLoaded=function(a){a=this.getLoadState(a);return a==isc.Tree.LOADED||a==isc.Tree.LOADING},isc.A.setLoadState=function(a,b){a.$27g=b},isc.A.loadRootChildren=function(a){this.loadChildren(this.root,a)},isc.A.loadChildren=function(a,b){if(!a)a=this.root;this.setLoadState(a,isc.Tree.LOADED);b&&this.fireCallback(b,"node",[a],this)},isc.A.unloadChildren=function(a,b){if(!this.isLeaf(a)){var c;if(b==isc.Tree.LEAVES_ONLY){c=this.getLeaves(a);
a[this.childrenProperty]=this.getFolders(a);this.setLoadState(a,isc.Tree.FOLDERS_LOADED)}else{c=a[this.childrenProperty];a[this.childrenProperty]=[];this.setLoadState(a,isc.Tree.UNLOADED)}if(c)for(var d=0;d<c.length;d++){a=c[d];delete this.nodeIndex[a[this.idField]]}this.$736(true);this.dataChanged()}},isc.A.reloadChildren=function(a,b){this.unloadChildren(a,b);this.loadChildren(a,b)},isc.A.$736=function(a){if(a)this.$737=null;this.$27m=null},isc.A.isOpen=function(a){return a!=null&&!!a[this.openProperty]},
isc.A.getOpenFolders=function(a){if(a==null)a=this.root;var b=this.getDescendantFolders(a,new Function("node","return node."+this.openProperty));this.isOpen(a)&&b.add(a);return b},isc.A.getOpenFolderPaths=function(a){a=this.getOpenFolders(a);for(var b=0;b<a.length;b++)a[b]=this.getPath(a[b]);return a},isc.A.changeDataVisibility=function(a,b,c){if(this.isLeaf(a))return false;a[this.openProperty]=b;this.$736();b&&!this.isLoaded(a)&&this.loadChildren(a,c)},isc.A.toggleFolder=function(a){this.changeDataVisibility(a,
!this.isOpen(a))},isc.A.openFolder=function(a,b){if(a==null)a=this.root;this.isOpen(a)||this.changeDataVisibility(a,true,b)},isc.A.openFolders=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c!=null){if(isc.isA.String(c))c=this.find(c);c!=null&&this.openFolder(c)}}},isc.A.closeFolder=function(a){this.isOpen(a)&&this.changeDataVisibility(a,false)},isc.A.closeFolders=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c!=null){if(isc.isA.String(c))c=this.find(c);c!=null&&this.closeFolder(c)}}},
isc.A.openAll=function(a){if(!a)a=this.root;for(var b=this.getDescendants(a,isc.Tree.FOLDERS_ONLY),c=0,d=b.length;c<d;c++)this.isOpen(b[c])||this.changeDataVisibility(b[c],true);this.changeDataVisibility(a,true)},isc.A.closeAll=function(a){if(!a)a=this.root;for(var b=this.getDescendants(a,isc.Tree.FOLDERS_ONLY),c=0,d=b.length;c<d;c++)this.isOpen(b[c])&&this.changeDataVisibility(b[c],false);a==this.root&&this.showRoot==false||this.changeDataVisibility(a,false)},isc.A.getOpenList=function(a,b,c,d,e,
f,g){if(!a)a=this.root;if(c==null)c=this.$27i;if(d==null)d=this.sortDirection;if(f==null)f=this.$45g;if(this.isLeaf(a)){if(a==this.root)return[];return null}var h=[];if(b!=isc.Tree.LEAVES_ONLY)h[h.length]=a;if(!g&&!this.isOpen(a))return h;a=this.getChildren(a,b,c,d,e,f);for(var i=0,j=a.length,k;i<j;i++)if(k=a[i]){var l=k[this.childrenProperty];if(l&&l.length)h=h.concat(this.getOpenList(k,b,c,d,e,f,g));else if(b!=isc.Tree.FOLDERS_ONLY)h[h.length]=k}if(!this.showRoot&&h[0]==this.root)h=h.slice(1,h.length);
return h},isc.A.$27l=function(){if(!this.$27m||!this.cacheOpenList)this.$27m=this.getOpenList(this.root,this.openDisplayNodeType,this.$27i,this.sortDirection,this.openListCriteria);return this.$27m},isc.A.getNodeList=function(){if(!this.$737||!this.cacheAllList)this.$737=this.getAllNodes(this.root);return this.$737},isc.A.getAllNodes=function(a){return this.getOpenList(a,null,null,null,null,null,true)},isc.A.getLength=function(){return this.$27l().length},isc.A.get=function(a){return this.$27l()[a]},
isc.A.getRange=function(a,b){return this.$27l().slice(a,b)},isc.A.indexOf=function(a,b,c){return this.$27l().indexOf(a,b,c)},isc.A.lastIndexOf=function(a,b,c){return this.$27l().lastIndexOf(a,b,c)},isc.A.getAllItems=function(){return this.$27l()},isc.A.sortByProperty=function(a,b,c,d){if(a!=null)this.sortProp=a;if(b!=null)this.sortDirection=b;if(c&&isc.isA.Function(c))this.$27i=c;else this.$27n();this.$45g=d;this.$736(true);this.dataChanged()},isc.A.$27n=function(){var a=this.sortProp,b=this.separateFolders!=
false,c=isc.SB.create();c.append("var __tree__ = ",this.getID(),";\rvar value = '';");if(b){var d;if(this.sortFoldersBeforeLeaves){b="0:";d="1:"}else{b="1:";d="0:"}c.append("value+=(__tree__.isFolder(obj) ? '"+b+"' : '"+d+"');")}a&&a!="title"&&c.append("var prop = obj['",a,"'];","if (isc.isA.Number(prop)) prop = prop.stringify(12,true);","else if (isc.isA.Date(prop)) prop = prop.getTime();","if (prop != null) value += prop + ':';");a&&c.append("var title = __tree__.getTitle(obj);","if (isc.isA.Number(title)) title = title.stringify(12,true);",
"else if (isc.isA.Date(title)) title = title.getTime();","if (title != null) {title = title + ''; value += title.toLowerCase()}");c.append("return value;");this.addMethods({$27i:new Function("obj,property",c.toString())})},isc.A.loadSubtree=function(a,b,c){a||(a=this.getRoot());if(b==null)b=this.loadBatchSize;this.$27o=c?2:1;c=0;for(var d=1;c<b;){var e=this.$27p(b,a,c,d++);if(e==0)break;c+=e}this.$27o=null;c>0&&this.$736(true)},isc.A.loadingBatch=function(a){return a?this.$27o==2:this.$27o},isc.A.$27p=
function(a,b,c,d){var e=0;if(!this.isOpen(b)){this.isLoaded(b)||this.loadChildren(b);if(this.isLoaded(b))if(this.openFolder(b)===false)return e;if(b.children){e+=b.children.length;c+=b.children.length}}b=b.children;if(c>=a||d==0||b==null)return e;for(var f=0;f<b.length;f++){var g=this.$27p(a,b[f],c,d-1);e+=g;c+=g;if(c>=a)break}return e});isc.B._maxIndex=isc.C+93;isc.A=isc.Tree;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.findChildrenProperty=
function(a,b){if(isc.isAn.Object(a)){b||(b="any");var c=b=="any",d=b=="object",e=b=="objectArray",f;for(f in a){var g=a[f];if(isc.isAn.Object(g)){if(c)return f;if(isc.isAn.Array(g)){if(isc.isAn.Object(g[0]))return f;if(!d&&!e)return f}else if(d)return f}}}},isc.A.discoverTree=function(a,b){b||(b={});var c=b.childrenMode||"any",d=b.scanMode||"branch",e=b.tieMode||"node",f=b.newChildrenProperty||isc.Tree.getInstanceProperty("childrenProperty"),g=b.typeProperty||"nodeType";isc.isAn.Array(a)||(a=[a]);
var h;if(d=="level"||d=="branch"){for(var i={},j=0;j<a.length;j++){var k=a[j],l=null;if(!k.$72r){l=this.findChildrenProperty(k,c);if(l!=null){i[l]=i[l]||0;i[l]++}}}j=isc.getValues(i);k=isc.getKeys(i);if(k.length==0)return;else if(k.length==1)h=k[0];else if(e!="node")if(e=="stop")return;else{h=j.max();h=j.indexOf(h);h=k[h]}}e=[];for(j=0;j<a.length;j++){k=a[j];i=h;if(!k.$72r){i||(i=this.findChildrenProperty(k,c));if(i!=null){l=k[i];if(l!=null&&!isc.isAn.Array(l))l=[l];else if(l==null)l=[];k[f]=l;for(k=
0;k<l.length;k++){var m=l[k];if(isc.isA.String(m))l[k]=m={name:m,$72r:true};m[g]=i}d=="level"?e.addAll(l):this.discoverTree(l,b,i)}}}d=="level"&&e.length>0&&this.discoverTree(e,b)});isc.B._maxIndex=isc.C+2;isc.ClassFactory.defineClass("Selection");isc.A=isc.Selection.getPrototype();isc.A.enabledProperty="enabled";isc.A.canSelectProperty="canSelect";isc.A.cascadeSelection=false;isc.A.$q7=true;isc.A=isc.Selection;isc.A.NONE="none";isc.A.SINGLE="single";isc.A.MULTIPLE="multiple";isc.A.SIMPLE="simple";
isc.A.$24e=0;isc.A=isc.Selection.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$74f="up";isc.A.$74g="down";isc.A.selectionRangeNotLoadedMessage="Can't select that many records at once.<br><br>Please try working in smaller batches.";isc.B.push(isc.A.init=function(){if(!this.selectionProperty)this.selectionProperty="_selection_"+isc.Selection.$24e++;this.partialSelectionProperty="$74h"+this.selectionProperty;this.setData(this.data?this.data:
[])},isc.A.destroy=function(){this.data&&this.ignoreData(this.data);delete this.data},isc.A.setData=function(a){this.data!=null&&this.ignoreData(this.data);this.data=a;this.data!=null&&this.observeData(this.data)},isc.A.observeData=function(a){this.observe(a,"dataChanged","observer.dataChanged()");a.dataArrived&&this.observe(a,"dataArrived","observer.dataChanged()")},isc.A.ignoreData=function(a){if(a){this.isObserving(a,"dataChanged")&&this.ignore(a,"dataChanged");this.isObserving(a,"dataArrived")&&
this.ignore(a,"dataArrived")}},isc.A.dataChanged=function(){this.markForRedraw()},isc.A.markForRedraw=function(){this.$q7=true},isc.A.isSelected=function(a){if(a==null)return false;if(isc.isAn.XMLNode(a))return"true"==a.getAttribute(this.selectionProperty);return!!a[this.selectionProperty]},isc.A.isPartiallySelected=function(a){if(a==null)return false;if(isc.isAn.XMLNode(a))return"true"==a.getAttribute(this.partialSelectionProperty);return!!a[this.partialSelectionProperty]},isc.A.anySelected=function(){return this.getSelection().length>
0},isc.A.multipleSelected=function(){return this.getSelection().length>1},isc.A.getSelection=function(a){this.$q7&&this.cacheSelection();var b=this.$27q;if(a==true&&b!=null&&b.length>0){a=this.$27q;b=[];for(var c=0;c<a.length;c++){var d=a[c];this.isPartiallySelected(d)||(b[b.length]=d)}}return b},isc.A.getSelectedRecord=function(){var a=this.getSelection();if(a&&a.length>0)return a[0]},isc.A.cacheSelection=function(){this.$27q=[];var a=this.getItemList(),b=isc.isA.ResultSet!=null&&isc.isA.ResultSet(a),
c=a.getLength();if(!(b&&!a.lengthIsKnown()))for(var d=0;d<c;d++)if(!(b&&!a.rowIsLoaded(d))){var e=a.get(d);if(e!=null&&this.isSelected(e))this.$27q[this.$27q.length]=e}this.$q7=false},isc.A.setSelected=function(a,b,c){if(a==null)return false;if(a[this.enabledProperty]==false)return false;if(a[this.canSelectProperty]==false)return false;var d=this.selectionProperty,e=this.partialSelectionProperty,f=isc.isAn.XMLNode(a),g=f?a.getAttribute(e):a[e];if(b==null)b=true;if(this.cascadeSelection&&!this.useRemoteSelection)if(c==
this.$74f){for(var h=false,i=a.children.length,j=0;j<i;j++){var k=a.children.get(j);if((isc.isAn.XMLNode(k)?k.getAttribute(e):k[e])||b&&!this.isSelected(k)||!b&&this.isSelected(k)){h=true;break}}if(f)a.setAttribute(e,h+"");else a[e]=h;if(b!=h)b=true}else if(a.children&&a.children.length>0)if(f)a.removeAttribute(e);else delete a[e];h=f?a.getAttribute(d):a[d];if(h==null)h=false;if(f)a.setAttribute(d,(b==true)+"");else a[d]=b;this.lastSelectionItem=a;this.lastSelectionState=b;d=f?a.getAttribute(e):a[e];
if(b==h&&d==g)return false;this.markForRedraw();this.target&&this.target.selectionChange&&this.target.selectionChange(a,b);if(this.cascadeSelection&&!this.useRemoteSelection){g=b;c!=this.$74f&&!f&&a.children&&a.children.length>0&&this.selectList(a.children,b,this.$74g);c!=this.$74g&&isc.isA.Tree(this.data)&&this.data.getParent(a)&&this.setSelected(this.data.getParent(a),b,this.$74f);this.lastSelectionItem=a;this.lastSelectionState=g}return true},isc.A.select=function(a){return this.setSelected(a,
true)},isc.A.deselect=function(a){return this.setSelected(a,false)},isc.A.selectSingle=function(a){this.deselectAll();return this.select(a)},isc.A.selectList=function(a,b){if(b==null)b=true;if(!a)return false;for(var c=false,d=a.getLength(),e=0;e<d;e++){var f=a.get(e);if(this.isSelected(f)!=b)c=this.setSelected(f,b)||c}return c},isc.A.deselectList=function(a){this.selectList(a,false)},isc.A.selectAll=function(){return this.selectRange(0,this.getItemList().getLength())},isc.A.deselectAll=function(){return this.deselectList(this.getSelection())},
isc.A.selectItem=function(a){return this.selectRange(a,a+1)},isc.A.deselectItem=function(a){return this.deselectRange(a,a+1)},isc.A.selectRange=function(a,b,c){if(c==null)c=true;var d=this.data;if(isc.isA.ResultSet!=null&&isc.isA.ResultSet(d)&&!d.rangeIsLoaded(a,b)){isc.warn(this.selectionRangeNotLoadedMessage);return false}return this.selectList(d.getRange(a,b),c)},isc.A.deselectRange=function(a,b){return this.selectRange(a,b,false)},isc.A.selectOnMouseDown=function(a,b){var c=a.selectionType||isc.Selection.MULTIPLE;
if(c==isc.Selection.NONE)return false;this.startRow=this.lastRow=b;this.logDebug("selectOnMouseDown: recordNum: "+b);var d=this.data.get(b),e=this.isSelected(d),f=this.getSelection();if(Array.isLoading(d))return false;this.deselectOthersOnMouseUp=this.deselectRecordOnMouseUp=false;var g=isc.Browser.isMac?isc.EventHandler.metaKeyDown():isc.EventHandler.ctrlKeyDown(),h=isc.EH.shiftKeyDown();if(c==isc.Selection.SINGLE){if(g&&e)this.deselect(d);else e||this.selectSingle(d);return true}else if(h){if(f.length==
0)this.select(d);else{d=this.data;c=d.indexOf(f[0]);f=d.indexOf(f.last());if(b>=f)this.selectRange(c,b+1);else if(b<=c)this.selectRange(b,f+1);else{this.selectRange(c,b+1);this.deselectRange(b+1,f+1)}}return true}else if(c==isc.Selection.SIMPLE)if(e){this.deselectRecordOnMouseUp=true;return false}else{this.select(d);return true}else if(g){this.setSelected(d,!e);return true}else if(e)if(isc.EventHandler.rightButtonDown()){this.deselectOnDragMove=true;return false}else if(this.dragSelection){if(this.simpleDeselect){this.deselectAll();
return this.selectOriginOnDragMove=true}this.selectSingle(d);return true}else{if(this.simpleDeselect)this.deselectAllOnMouseUp=true;else this.deselectOthersOnMouseUp=f.length>1;return false}else{this.selectSingle(d);return true}},isc.A.selectOnDragMove=function(a,b){var c=this.startRow,d=this.lastRow;if(b<0)this.logWarn("selectOnDragMove: got negative coordinate: "+b);else if(b!=d){if(this.selectOriginOnDragMove){this.select(this.data.getItem(c));this.selectOriginOnDragMove=false}else if(this.deselectOnDragMove||
this.deselectAllOnMouseUp||this.deselectOthersOnMouseUp){this.selectSingle(this.data.getItem(c));this.deselectAllOnMouseUp=this.deselectOthersOnMouseUp=this.deselectOnDragMove=false}if(b>c&&c>d||d>c&&c>b){this.deselectAll();c>b?this.selectRange(b,c+1):this.selectRange(c,b+1)}else if(c>=d&&d>b)this.selectRange(b,d);else if(c>=b&&b>d)this.deselectRange(d,b);else if(c<=b&&b<d)this.deselectRange(b+1,d+1);else c<=d&&d<b?this.selectRange(d,b+1):this.logWarn("dragMove case not handled: lastRow: "+d+", currRow: "+
b+", startRow "+c);this.lastRow=b}},isc.A.selectOnMouseUp=function(a,b){if(a.selectionType==isc.Selection.NONE)return false;this.logDebug("selectOnMouseUp: recordNum: "+b);if(this.deselectOthersOnMouseUp){this.selectSingle(this.data.getItem(b));this.deselectOthersOnMouseUp=false;return true}else if(this.deselectRecordOnMouseUp){this.deselect(this.data.getItem(b));this.deselectRecordOnMouseUp=false;return true}else if(this.deselectAllOnMouseUp){this.deselectAll();this.deselectAllOnMouseUp=false;return true}else return false},
isc.A.getItemList=function(){if(this.data&&isc.isA.Tree(this.data))return this.data.getNodeList();return this.data?this.data:[]});isc.B._maxIndex=isc.C+30;isc.ClassFactory.defineClass("DetailViewer","Canvas","DataBoundComponent");isc.A=isc.DetailViewer.getPrototype();isc.A.dataFetchMode="basic";isc.A.dataArity="either";isc.A.fieldIdProperty="name";isc.A.recordsPerBlock=1;isc.A.blockSeparator="<BR><BR>";isc.A.showEmptyField=true;isc.A.emptyCellValue="&nbsp;";isc.A.labelPrefix="";isc.A.labelSuffix=
":";isc.A.valueAlign="left";isc.A.wrapValues=true;isc.A.useInnerWidth=true;isc.A.clipValues=false;isc.A.styleName="detailViewer";isc.A.blockStyle="detailBlock";isc.A.labelStyle="detailLabel";isc.A.cellStyle="detail";isc.A.headerStyle="detailHeader";isc.A.separatorStyle="detail";isc.A.cellPadding=3;isc.A.showEmptyMessage=true;isc.A.emptyMessage="No items to display.";isc.A.emptyMessageStyle="normal";isc.A.loadingMessage="&nbsp;${loadingImage}";isc.A.loadingMessageStyle="normal";isc.A.defaultHeight=
35;isc.A.showLabel=true;isc.A=isc.DetailViewer.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$g4="date";isc.B.push(isc.A.initWidget=function(){this.Super("initWidget",arguments);this.fieldState!=null?this.setFieldState(this.fieldState):this.setFields(this.fields)},isc.A.setData=function(a){this.data&&this.ignore(this.data,"dataChanged");(this.data=a)&&this.data.dataChanged&&this.observe(this.data,"dataChanged","observer.dataChanged()");
this.markForRedraw("new data")},isc.A.dataChanged=function(){this.applyHilites();this.markForRedraw()},isc.A.getData=function(){return this.data},isc.A.getFields=function(){return this.fields},isc.A.getInnerHTML=function(){var a=this.getData();if(this.fields==null||this.fields.length==0)return"Note: you must define detailViewer.fields to specify what to display!";if(isc.ResultSet!=null&&isc.isA.ResultSet(a)&&!a.lengthIsKnown()){a.get(0);return this.loadingMessageHTML()}if(a==null||a.getLength&&a.getLength()==
0)return this.emptyMessageHTML();isc.isA.List(a)||(a=[a]);if(Array.isLoading(a.get(0))&&this.isOffline())return this.emptyMessageHTML();if(a.getLength()==1||this.recordsPerBlock=="*")return this.getBlockHTML(a);else{for(var b=isc.StringBuffer.newInstance(),c=0;c<a.getLength();c+=this.recordsPerBlock)b.append(this.getBlockHTML(a.getRange(c,c+this.recordsPerBlock)),this.blockSeparator);return b.toString()}},isc.A.getBlockHTML=function(a){a.getLength();var b="<TABLE BORDER=0 CELLSPACING=0 CLASS="+this.blockStyle+
" WIDTH="+(this.useInnerWidth&&!this.isPrinting?this.getInnerWidth():"'100%'")+" CELLPADDING="+this.cellPadding+(this.clipValues?" STYLE='table-layout:fixed'":"");b+=">";for(var c=this.fields,d=0,e=c.length;d<e;d++){var f=c[d];if(!(!f||f.hidden||f.visible==false)){if(f.showIf){isc.isA.Function(f.showIf)||isc.Func.replaceWithMethod(f,"showIf","viewer,valueList");if(f.showIf(this,a)==false)continue}var g=f.type?f.type:"";if(g!="separator"&&g!="header"&&!this.showEmptyField){g=true;for(var h=0;h<a.getLength();h++){var i=
a.get(h)[f[this.fieldIdProperty]];if(!(i==null||i=="")){g=false;break}}if(g)continue}if(f.output){isc.isA.Function(f.output)||isc.Func.replaceWithMethod(f,"output","fieldNum,field,valueList");b+=f.output(d,f,a)}else b+=this.outputItem(d,f,a)}}b+="</TABLE>";return b},isc.A.outputItem=function(a,b,c){var d="output_"+(b.type?b.type:"value"),e="";this[d]||(d="output_value");e+="<TR"+(this.rowClass!=null?" CLASS='"+this.rowClass+"'":"")+">";e+=this[d](a,b,c);e+="</TR>\r";return e},isc.A.output_blob=function(a,
b,c){return this.output_binary(a,b,c)},isc.A.output_upload=function(a,b,c){return this.output_binary(a,b,c)},isc.A.output_binary=function(a,b,c){a="<TD WIDTH=10% CLASS='"+(this.isPrinting?this.printLabelStyle||this.labelStyle:this.labelStyle)+"' ALIGN=RIGHT"+(this.wrapLabel?">":" NOWRAP><NOBR>")+this.labelPrefix+(b.title?b.title:b[this.fieldIdProperty])+this.labelSuffix+"</NOBR></TD>";for(var d=0;d<c.getLength();d++){var e=c.get(d),f=this.getData().indexOf(e),g=e[b.name+"_filename"],h=isc.Canvas.imgHTML("[SKIN]actions/view.png",
16,16,null,"style='cursor:"+isc.Canvas.HAND+"' onclick='"+this.getID()+".viewRow("+f+")'");f=isc.Canvas.imgHTML("[SKIN]actions/download.png",16,16,null,"style='cursor:"+isc.Canvas.HAND+"' onclick='"+this.getID()+".downloadRow("+f+")'");g=h+"&nbsp;"+f+"&nbsp;"+g;a+="<TD CLASS='"+this.getCellStyle(g,b,e,this)+"'>"+g+"</TD>"}return a},isc.A.viewRow=function(a){isc.DS.get(this.dataSource).viewFile(this.getData().get(a))},isc.A.downloadRow=function(a){isc.DS.get(this.dataSource).downloadFile(this.getData().get(a))},
isc.A.output_value=function(a,b,c){a=this.showLabel?"<TD WIDTH=10% CLASS='"+(this.isPrinting?this.printLabelStyle||this.labelStyle:this.labelStyle)+"' ALIGN=RIGHT"+(this.wrapLabel?">":" NOWRAP><NOBR>")+this.labelPrefix+(b.title?b.title:b[this.fieldIdProperty])+this.labelSuffix+"</NOBR></TD>":"";if(b.valueMap&&isc.isA.String(b.valueMap))b.valueMap=this.getGlobalReference(b.valueMap);for(var d=0;d<c.getLength();d++){var e=c.get(d),f;if(b.type=="image"){f=isc.Canvas.getFieldImageDimensions(b,e);f=this.imgHTML(this.getCellValue(e,
b),f.width,f.height,null,b.extraStuff,b.imageURLPrefix||b.baseURL||b.imgDir,b.activeAreaHTML)}else f=this.getCellValue(e,b);var g=this.getRawValue(e,b),h;h=b.getCellStyle?b.getCellStyle(g,b,e,this):this.getCellStyle(g,b,e,this)||this.cellStyle;var i=" style='";if(this.clipValues)i+="overflow:hidden;";i+="text-align:"+this.valueAlign;if(this.getCellCSSText){e=this.getCellCSSText(g,b,e,this);if(e!=null)i+=isc.semi+e}i+="'";a+="<TD CLASS='"+h+"'"+i+(this.wrapValues?">":" NOWRAP><NOBR>")+f+(this.wrapValues?
"</NOBR>":"")+"</TD>"}return a},isc.A.getRawValue=function(a,b){if(!a||!b)return null;if(b.dataPath)return isc.Canvas.$70o(b.dataPath,a);return a[b.name]},isc.A.getCellCSSText=function(a,b,c){return this.getRecordHiliteCSSText(c,"",b)},isc.A.getCellStyle=function(a,b,c,d){if(b&&b.getCellStyle)return b.getCellStyle(a,b,c,d);return this.isPrinting&&this.printCellStyle!=null?this.printCellStyle:this.cellStyle},isc.A.getSelectedRecord=function(){return this.data.get(0)},isc.A.getCellValue=function(a,
b){var c=this.getRawValue(a,b);if(isc.isA.String(b.formatCellValue))b.formatCellValue=isc.Func.expressionToFunction("value,record,field,viewer",b.formatCellValue);if(b.getCellValue!=null){if(isc.isA.String(b.getCellValue))b.getCellValue=isc.Func.expressionToFunction("value,record,field,viewer",b.getCellValue);c=b.getCellValue(c,a,b,this);if(b.formatCellValue)c=b.formatCellValue(c,a,b,this)}else{if(b.valueMap!=null)c=isc.getValueForKey(c,b.valueMap);if(b.formatCellValue)c=b.formatCellValue(c,a,b,this);
if(c==null||isc.is.emptyString(c))c=this.emptyCellValue}if(b.formatCellValue==null&&this.formatCellValue)c=this.formatCellValue(c,a,b);else{c=this.$17c(a,b,c);if(b.asHTML)c=c.asHTML()}if(b)if(b.userFormula)c=this.getFormulaFieldValue(b,a);else if(b.userSummary)c=this.getSummaryFieldValue(b,a);else if(b.type=="imageFile")if(b.showFileInline!=false)if(a[b[this.fieldIdProperty]+"$68c"])c=a[b[this.fieldIdProperty]+"$68c"];else{c=isc.Canvas.getFieldImageDimensions(b,a);var d=this.getDataSource().streamFile(a);
c=a[b[this.fieldIdProperty]+"$68c"]=this.imgHTML(d,c.width,c.height)}else c=this.getViewDownloadHTML(b,a);else b.showFileInline==true&&this.logWarn("getCellValue(): Unsupported field-type for showFileInline: "+b.type);d=this.getFieldHilites(a,b);if(d!=null)c=this.applyHiliteHTML(d,c);return c},isc.A.getViewDownloadHTML=function(a,b){if(b==null)return null;var c=b[a.name+"_filename"];if(c==null||isc.isA.emptyString(c))return"&nbsp;";var d=isc.Canvas.imgHTML("[SKIN]actions/view.png",16,16,null,"style='cursor:"+
isc.Canvas.HAND+"' onclick='"+this.getID()+".viewFile("+b+","+a+")'"),e=isc.Canvas.imgHTML("[SKIN]actions/download.png",16,16,null,"style='cursor:"+isc.Canvas.HAND+"' onclick='alert('running');"+this.getID()+".downloadFile("+b+","+a+")'");return"<nobr>"+d+"&nbsp;"+e+"&nbsp;"+c+"</nobr>"},isc.A.viewFile=function(a,b){isc.DS.get(this.dataSource).viewFile(a,b.name)},isc.A.downloadFile=function(a,b){isc.DS.get(this.dataSource).downloadFile(a,b.name)},isc.A.$17c=function(a,b,c){var d=b.type,e=d!=null?
isc.SimpleType.getBaseType(d):null;d=d&&d.toLowerCase()=="datetime";var f;if(e==this.$g4)f=d?b.formatter||this.datetimeFormatter:b.dateFormatter||b.formatter||this.dateFormatter;if(f!=null){if(isc.isA.Date(c))c=d?c.toShortDateTime(f,true):c.toNormalDate(f)}else if(b.$64!=null)c=b.$62.normalDisplayFormatter(c,b,this,a);else if(b.type==null&&isc.isA.Date(c))c=c.toNormalDate();return isc.iscToLocaleString(c)},isc.A.getRecordIndex=function(){var a=this.Super("getRecordIndex",arguments);if(a==-1)a=0;return a},
isc.A.output_header=function(a,b,c){return"<TD COLSPAN="+(c.getLength()+1)+" CLASS='"+(this.isPrinting&&this.printHeaderStyle?this.printHeaderStyle:this.headerStyle)+"'>"+b.value+"</TD>"},isc.A.output_separator=function(a,b,c){a=b.width==null?b.defaultSeparatorWidth:b.width;b=b.height==null?b.defaultSeparatorHeight:b.height;return"<TD COLSPAN="+(c.getLength()+1)+" CLASS='"+this.separatorStyle+"'>"+isc.Canvas.spacerHTML(a,b)+"</TD>"},isc.A.getEmptyMessage=function(){return this.emptyMessage},isc.A.getLoadingMessage=
function(){return this.loadingMessage.evalDynamicString(this,{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)})},isc.A.emptyMessageHTML=function(){if(this.isOffline()){if(!this.showOfflineMessage)return"&nbsp;"}else if(!this.showEmptyMessage)return"&nbsp;";return"<TABLE WIDTH=100%><TR><TD CLASS='"+this.emptyMessageStyle+"' ALIGN=CENTER><BR><BR>"+(this.isOffline()?this.offlineMessage:this.getEmptyMessage())+"</TD></TR></TABLE>"},isc.A.loadingMessageHTML=
function(){return"<TABLE WIDTH=100%><TR><TD CLASS='"+this.loadingMessageStyle+"' ALIGN=CENTER><BR><BR>"+this.getLoadingMessage()+"</TD></TR></TABLE>"},isc.A.setFieldState=function(a){if(a==null&&this.fieldState!=null){if(isc.isA.String(this.fieldState))a=this.evalViewState(this.fieldState,"fieldState")}else a=this.evalViewState(a,"fieldState");this.completeFields=this.$31y(a,true);this.setFields(this.completeFields);this.markForRedraw();this.fieldStateChanged()},isc.A.setFields=function(a){if(this.completeFields==
null||this.fields==null)this.fields=[];this.completeFields=this.bindToDataSource(a);if(this.completeFields==null)this.completeFields=[];this.deriveVisibleFields()},isc.A.deriveVisibleFields=function(){this.fields.setArray(this.getVisibleFields(this.completeFields))},isc.A.getVisibleFields=function(a){for(var b=a.duplicate(),c=0;c<a.length;c++){var d=a.get(c);if(!this.fieldShouldBeVisible(d)||d.visible==false)b.remove(d)}return b},isc.A.getTitleFieldValue=function(a){var b=this.getDataSource().getTitleField();
return this.getCellValue(a,this.getDataSource().getField(b))},isc.A.getStandaloneFieldValue=function(a,b){return this.getCellValue(a,this.getField(b))},isc.A.hideField=function(a){this.toggleField(a,false)},isc.A.showField=function(a){this.toggleField(a,true)},isc.A.toggleField=function(a,b){var c=this.getField(a);c.showIf=b?"true":"false";c.visible=b;this.setFields(this.getAllFields());this.markForRedraw();this.fieldStateChanged()},isc.A.getField=function(a){var b=this.getAllFields(),c=this.fields;
return isc.isA.Number(a)?b[a]||c[a]:b.find(this.fieldIdProperty,a)||c.find(this.fieldIdProperty,a)},isc.A.getFormattedValue=function(a,b){return this.getCellValue(a,this.getSpecifiedField(b))},isc.A.getPivotedExportData=function(a){var b=[],c=this.getAllFields(),d=this.data,e,f,g;if(isc.isA.Object(a)){e=a.includeHiddenFields;f=a.allowedProperties;g=a.alwaysExportExpandedStyles}if(isc.isA.ResultSet(d))d=d.getAllLoadedRows();isc.isA.Array(d)||(d=[d]);for(a=0;a<c.length;a++){var h=c[a],i={},j=this.recordsPerBlock;
i.title=h.title||h.name;if(isc.isA.String(i.title))i.title=this.htmlUnescapeExportFieldTitle(i.title);if(j==null)j=1;if(j=="*")j=1E5;if(this.fields.contains(h)||e){for(var k=0;k<j&&k<d.getLength();k++){var l=d[k],m=this.getFieldNum(h.name),n="value"+(k+1),o=n+"$style",s=this.getExportFieldValue(l,h.name,m);s==null||s=="&nbsp;"||(i[n]=s);this.addDetailedExportFieldValue(i,o,l,h,m,f,g);if(i[o]==null||i[o]=="&nbsp;")delete i[o]}b.push(i)}}return b});isc.B._maxIndex=isc.C+42;isc.DetailViewer.registerStringMethods({getCellValue:"record,field",
getCellStyle:"value,field,record,viewer",getCellCSSText:"value,field,record,viewer",formatCellValue:"value,record,field,viewer",fieldStateChanged:""});isc.ClassFactory.defineClass("GridRenderer","Canvas");isc.A=isc.GridRenderer;isc.A.SELECTED="Selected";isc.A.DISABLED="Disabled";isc.A.OVER="Over";isc.A.standardStyleSuffixes=["","Over","Selected","SelectedOver","Disabled","DisabledOver","DisabledSelected","DisabledSelectedOver","Dark","OverDark","SelectedDark","SelectedOverDark","DisabledDark"];isc.A=
isc.GridRenderer.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.totalRows=0;isc.A.drawAllMaxCells=250;isc.A.recordCanSelectProperty="canSelect";isc.A.isSeparatorProperty="isSeparator";isc.A.singleCellValueProperty="singleCellValue";isc.A.scrollRedrawDelay=75;isc.A.drawAheadRatio=1.3;isc.A.quickDrawAheadRatio=1;isc.A.cellHeight=20;isc.A.fixedRowHeights=true;isc.A.fixedColumnWidths=true;isc.A.cellSpacing=0;isc.A.cellPadding=2;isc.A.canSelectOnRightMouse=
true;isc.A.hoverByCell=true;isc.A.backgroundColor="white";isc.A.tableStyle="listTable";isc.A.baseStyle="cell";isc.A.alternateRowFrequency=1;isc.A.emptyCellValue="&nbsp;";isc.A.fastCellUpdates=true;isc.A.overflow="auto";isc.A.$r9=true;isc.A.canFocus=true;isc.A.animateRowsMaxTime=1E3;isc.A.snapToCells=false;isc.A.snapInsideBorder=false;isc.A.snapHDirection=isc.Canvas.BEFORE;isc.A.snapVDirection=isc.Canvas.BEFORE;isc.B.push(isc.A.setFastCellUpdates=function(a){if(a&&!isc.Browser.isIE)this.fastCellUpdates=
false;else if(a!=this.fastCellUpdates){this.fastCellUpdates=a;this.markForRedraw()}});isc.B._maxIndex=isc.C+1;isc.A=isc.GridRenderer.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$57k=["<DIV style='position:"+(isc.Page.isRTL()?"inline":"relative")+";z-index:",,";'>",,"</DIV>"];isc.A.$623="<table style='position:absolute;top:0px;font-size:1px;height:100%;width:100%;z-index:1;overflow:hidden;visibility:hidden;'><tr><td>&nbsp;</td></tr></table>";
isc.A.maxAnimateSlideInRows=100;isc.A.$27r="none";isc.A.$77c={};isc.A.$27s="<DIV cellClipDiv=true style='overflow:hidden;";isc.A.$80q="<div>";isc.A.$80r="</div>";isc.A.$57l="within";isc.A.$57m="expand";isc.A.$14k="cell";isc.A.alignSnapToMap={left:{top:"TL",center:"L",bottom:"BL"},right:{top:"TR",center:"R",bottom:"BR"},center:{top:"T",center:"C",bottom:"B"}};isc.A.recordCustomStyleProperty="customStyle";isc.A.showSelectedStyle=true;isc.A.$27t="NOBR";isc.A.$27u="cellClipDiv";isc.A.$o5="height";isc.A.$27v=
"minHeight";isc.A.$39=";";isc.A.$721="padding-top:0px;padding-bottom:0px;";isc.A.$722="overflow:hidden;";isc.A.avgRowHeight=60;isc.B.push(isc.A.initWidget=function(){this.$26a||this.setColumnWidths([]);this.selection&&this.setSelection(this.selection);if(this.overflow==isc.Canvas.VISIBLE)this.showAllColumns=this.showAllRows=true;if(!this.fixedRowHeights&&this.virtualScrolling==null)this.virtualScrolling=true;if(!this.fixedRowHeights&&!this.showAllRows){if(this.showCustomScrollbars==false){this.logInfo("Variable height records cannot be used with native scrollbars; setting showCustomScrollbars:true on this GridRenderer and using the special 'NativeScrollbar' class as a scrollbarConstructor.");
this.showCustomScrollbars=true;this.scrollbarConstructor="NativeScrollbar"}this.showAllColumns=true}this.setFastCellUpdates(this.fastCellUpdates)},isc.A.isEmpty=function(){return false},isc.A.$27w=function(a,b){return this.getEmptyMessageHTML(a,b,this.grid.isOffline())},isc.A.getEmptyMessageHTML=function(a,b,c){if(c){if(!this.showOfflineMessage)return"&nbsp;"}else if(!this.showEmptyMessage)return"&nbsp;";if(this.isPrinting){if(a==null)a=0;if(b==null)b=this.fields?this.fields.getLength()-1:0;return"<TABLE cellspacing=0 style='width:100%' class='"+
this.emptyMessageTableStyle+"'>"+this.grid.getPrintHeaders(a,b)+"<TR><TD  ALIGN=CENTER VALIGN=TOP class='"+(c?this.offlineMessageStyle:this.emptyMessageStyle)+"' colspan='"+(b-a+1)+"'>"+(c?this.getOfflineMessage():this.getEmptyMessage())+"</TD></TR></TABLE>"}a=this.getInnerWidth();b=0;if(this.expandEmptyMessageToMatchFields&&this.$26a){b=this.$26a.sum()-a;if(b<0)b=0}var d=b&&this.overflow!=isc.Canvas.VISIBLE,e=isc.StringBuffer.create();e.append("<TABLE BORDER=0 MARGIN=0 CELLSPACING=0 CLASS='",this.emptyMessageTableStyle,
"' style='width:",a+b,"px;",isc.Browser.isSafari?"height"+this.getInnerHeight()+":px;'":"' HEIGHT=100%","><TR><TD ALIGN=CENTER VALIGN=TOP CLASS='",c?this.offlineMessageStyle:this.emptyMessageStyle,"' style='padding-left:0px;padding-right:0px;'>",c?this.getOfflineMessage():this.getEmptyMessage(),b&&d?"<br>"+isc.Canvas.spacerHTML(a,1):null,"</TD>");b&&d&&e.append("<TD style='padding-left:0px;padding-right:0px;'>",isc.Canvas.spacerHTML(b,1),"</TD>");e.append("</TR></TABLE>");return e.release()},isc.A.getEmptyMessage=
function(){return this.emptyMessage},isc.A.getOfflineMessage=function(){return this.grid.offlineMessage},isc.A.getInnerHTML=function(){var a=this.getTableHTML(),b=this.$57k;b[1]=this.getTableZIndex();b[3]=a;if(isc.Browser.isMoz)b[5]=this.$623;return b.join(isc.emptyString)},isc.A.shouldUseQuickDrawAheadRatio=function(){return this.useQuickDrawAheadRatio||this.isDragScrolling()||this.isRepeatTrackScrolling()},isc.A.doneFastScrolling=function(){if(this.$50z){this.$50v=true;this.markForRedraw("Done Fast scrolling.")}},
isc.A.addDrawAhead=function(a,b,c,d){var e=this.shouldUseQuickDrawAheadRatio(),f=Math.ceil((b-a)*(e&&this.quickDrawAheadRatio!=null?this.quickDrawAheadRatio:this.drawAheadRatio));if(this.$50v)d=null;if(d!=null)if(d)b=a+f;else a=b-f;else if(a==0)b=f;else{d=Math.ceil((f-(b-a))/2);a-=d;b+=d}if(a<0){b-=a;a=0}if(b>=c){a=Math.max(0,a-(b-(c-1)));b=Math.max(0,c-1)}if(e)this.$50z=true;else delete this.$50z;return[a,b]},isc.A.getExtraRowHeight=function(a,b){for(var c=0,d=a;d<b;d++){var e=this.getRowHeight(this.getCellRecord(d,
0),d)-this.cellHeight;if(e>0)c+=e}return c},isc.A.getDrawArea=function(a){var b=this.getTotalRows(),c,d=b*this.fields.length<=this.drawAllMaxCells&&!isc.EH.dragging&&!this.isAnimating()&&!(this.parentElement&&this.parentElement.isAnimating());if(this.showAllRows||d){c=0;b=Math.max(b-1,0)}else{b=this.$80e();c=b[0];b=b[1]}var e=this.fields.length;if(a!=null){d=a;a=a+1}else if(this.showAllColumns||d){d=0;a=e-1}else{d=this.getVisibleColumns();a=this.lastScrollLeft==null?null:this.lastScrollLeft<this.getScrollLeft();
a=this.addDrawAhead(d[0],d[1],e,a);d=a[0];a=a[1]}if(this.cacheDOM&&!this.$508){this.$508=b-c;this.$509=a-d}return[c,b,d,a]},isc.A.$80e=function(){var a=this.$27x(),b=this.lastScrollTop==null?null:this.lastScrollTop<this.getScrollTop(),c=this.getTotalRows();a=this.addDrawAhead(a[0],a[1],c,b,true);a[2]=b;return a},isc.A.getRowCoordinate=function(a){var b=this.getEventRow(a),c=this.getRowTop(b);a=a-c;c=this.getRowSize(b);return b+a/c},isc.A.scrollToRatio=function(a,b,c,d){if(!a||!this.$60s)return this.invokeSuper(isc.GridRenderer,
"scrollToRatio",a,b,c,d);a=this.getTotalRows()-1;c=b*a;a=Math.floor(c);c=Math.round((c-a)*this.getRowSize(a));this.$27y=a;this.$27z=c;this.$270();if(this.isDirty()){this.$271=b;this.$27y=a;this.$27z=c}},isc.A.getScrollRatio=function(a,b,c,d){if(!a||!this.$60s)return this.invokeSuper(isc.GridRenderer,"getScrollRatio",a,b,c,d);if(this.isDirty()&&this.$271!=null)return this.$271;a=this.getTotalRows()-1;if(a<=0)return 0;a=this.getRowCoordinate(this.getScrollTop())/a;return Math.min(1,a)},isc.A.getViewportRatio=
function(a,b,c,d){if(!a||!this.$60s)return this.invokeSuper(isc.GridRenderer,"getViewportRatio",a,b,c,d);a=this.$272||this.getAvgRowHeight();return Math.min(1,this.getViewportHeight()/a/this.getTotalRows())},isc.A.$273=function(a,b){if(!this.$274)if(!this.isEmpty()){var c=this.getEventRow(b>0?a+this.getViewportHeight():a),d=this.getTotalRows()-1,e=a;if(c<0||c>d){this.$27y=d;this.$27z=0;e=this.getRowTop(d)}else{this.$27y=c;this.$27z=a-this.getRowTop(this.$27y)+b;if(Math.abs(this.$27z)>this.getViewportHeight()){this.logInfo("storeTargetRow: targetRow: "+
c+" with offset: "+this.$27z+", clearing","virtualScrolling");this.$27z=this.$27y=null}}return e}},isc.A.$270=function(){var a=this.$27z;a=this.getRowTop(this.$27y)+a;this.$274=true;this.$sz=null;this.scrollTo(null,a);this.$274=false;this.$271=null},isc.A.scrollTo=function(a,b,c,d){if(isc.$cv)arguments.$cw=this;if(this.$60s&&b!=null&&!c){var e=this.getScrollTop(),f=b-e;if(f!=0){this.$273(e,f);b=Math.min(b,this.getRowTop(this.getTotalRows()-1))}}this.invokeSuper(isc.GridRenderer,"scrollTo",a,b,c,d);
if(!(this.isDirty()||this.$80f))if(this.$276()||this.$277()){if(this.scrollRedrawDelay==0)this.markForRedraw("scrolled");else{var g=this;this.fireOnPause("scrollRedraw",function(){g.markForRedraw("scrolled")},this.scrollRedrawDelay)}this.$250=true}},isc.A.$276=function(){if(this.showAllRows)return false;var a=this.getVisibleRows(),b=a[0];a=a[1];var c=this.getTotalRows();if(a>c-1)a=c-1;return b<this.$252||a>this.$253},isc.A.$277=function(){if(this.showAllColumns)return false;var a=this.getVisibleColumns(),
b=a[1];return a[0]<this.$254||b>this.$255},isc.A.setOverflow=function(a){if(a==isc.Canvas.VISIBLE)this.showAllColumns=this.showAllRows=true;return this.Super("setOverflow",arguments)},isc.A.getRowChunkNum=function(a){return Math.round(a/this.$508)},isc.A.getColChunkNum=function(a){return Math.round(a/this.$509)},isc.A.getTableChunk=function(a,b){var c=this.$51a;if(c){a=a||0;b=b||0;return(c=c[a])?c[b]:null}},isc.A.getTableChunkAt=function(a,b){var c=this.getRowChunkNum(a),d=this.getColChunkNum(b),
e=this.getTableChunk(c,d);if(e!=null){this.$51b=c*this.$508;this.$254=d*this.$509;return e}},isc.A.$rd=function(a,b,c,d){if(this.cacheDOM)this.drawVisibleChunks();else{this.$29j();this.$756=true;this.invokeSuper(isc.GridRenderer,"$rd",a,b,c,d);delete this.$756}},isc.A.$p9=function(a,b,c,d){this.$29j();this.$756=true;this.invokeSuper(isc.GridRenderer,"$p9",a,b,c,d);delete this.$756},isc.A.drawVisibleChunks=function(){var a=this.getVisibleRows(),b=this.getVisibleColumns(),c=this.getRowChunkNum(a[0]),
d=this.getColChunkNum(b[0]);a=this.getRowChunkNum(a[1]);b=this.getColChunkNum(b[1]);for(c=c;c<a;c++)for(var e=d;e<b;e++)if(this.getTableChunk(c,e)==null){this.logWarn("drawing chunk: "+[c,e]);this.renderTableChunk(c,e)}this.getTableHTML()},isc.A.renderTableChunk=function(a,b){var c=a*this.$508,d=b*this.$509;c=this.getTableHTML([d,d+this.$509],c,c+this.$508);c=isc.Element.insertAdjacentHTML(this.getHandle(),"beforeEnd",c,true);d=this.$51a=this.$51a||[];(d[a]=d[a]||[])[b]=c},isc.A.getDrawnRows=function(){return this.getVisibleRows()},
isc.A.startRowAnimation=function(a,b,c,d,e,f,g,h,i){this.finishRowAnimation();if(!this.isDrawn()||!this.isVisible()){if(d!=null)(i?this.parentElement:this).fireCallback(d)}else{if(a==null)a=true;if(b==null)b=0;if(c==null)c=this.getTotalRows()-1;if(b==c)this.logWarn("startRowAnimation passed empty row range, aborting: "+[b,c]);else if(this.readyToRedraw("animating show / hide of rows",false)){if(c-b>this.maxAnimateSlideInRows)h=false;this.$73q=h;b=this.$28b(a,b,c,d,i);this.animateRowHeight(this.$28c,
a?b:0,{target:this,methodName:"$28d"},e,f,g,h)}else{this.$278=[a,b,c,d,e,f,g,h,i];this.$279=isc.Timer.setTimeout({target:this,methodName:"$28a"},0)}}},isc.A.$28a=function(){if(this.$278==null)this.logWarn("Unable to perform delayed row animation - bailing");else{var a=this.$278,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7];a=a[8];this.$279=this.$278=null;this.startRowAnimation(b,c,d,e,f,g,h,i,a,true)}},isc.A.$28b=function(a,b,c,d,e){var f=0;if(this.$28c==b&&this.$28e==c){f=this.getTableElement(this.$28c,
0);f=(f=this.$28g(f))?f.scrollHeight:(c-b)*this.cellHeight}else{this.$28c=b;this.$28e=c;if(a){this.$28f=1;this.redraw("initializing animated show row");f=this.getTableElement(this.$28c,0);f=(f=this.$28g(f))?f.scrollHeight:(c-b)*this.cellHeight}else{a=this.$26b();for(b=b;b<c;b++)f+=a[b];this.$28f=f;this.redraw("initializing animated hide row")}this.isDirty()&&this.redraw("Initializing row animation requires second redraw")}this.$28h={callback:d,target:e?this.parentElement:this};return f},isc.A.finishRowAnimation=
function(){if(this.$28c!=null)this.finishAnimateRowHeight();else if(this.$279!=null){isc.Timer.clearTimeout(this.$279);var a=this.$278,b=a[0],c=a[1],d=a[2],e=a[3];a=a[5];delete this.$278;delete this.$279;if(this.readyToRedraw()){e=this.$28b(b,c,d,e,a);this.setRowHeight(c,b?e:1);this.$28d()}else{this.logWarn("Finish row animation called while Grid is not ready to redraw. GridRenderer HTML will not be updated when callback fires.","animation");b=a?this.parentElement:this;e&&b.fireCallback(e)}}},isc.A.$28d=
function(){var a=this.$28h;delete this.$28h;delete this.$28c;delete this.$28e;delete this.$28f;a&&a.callback&&a.target.fireCallback(a.callback)},isc.A.animateRowHeight=function(a,b,c,d,e,f,g,h){if(this.isDrawn()){if(this.$28i!=null){this.logInfo("early finish of row animation, because new animation started","animation");this.finishAnimateRowHeight()}var i=this.getRowSize(a);if(d!=null){e=b-i;if(e<0)e=0-e;e=Math.round(e/d*1E3);if(e>this.animateRowsMaxTime)e=this.animateRowsMaxTime}this.$28j={$24t:a,
$28k:i,$28l:b,$03:c,$1n:g,$28m:h};f=f||this.$27r;this.logIsInfoEnabled("animation")&&this.logInfo("starting row animation, duration: "+e+", effect: "+f,"animation");this.$28i=this.registerAnimation({target:this,method:this.$28n},e,f);if(this.overflow==isc.Canvas.AUTO||this.overflow==isc.Canvas.SCROLL)this.$417=true}else if(c)(h?this.parentElement:this).fireCallback(c)},isc.A.$28n=function(a){var b=this.$28j,c=b.$24t,d=this.$04(b.$28k,b.$28l,a);if(isc.Browser.isSafari&&b.$28k>b.$28l)this.$28o=true;
this.setRowHeight(c,d,null,isc.emptyString,true,true,true);isc.Browser.isSafari&&delete this.$28o;if(b.$1n)if(b=this.$28g(this.getTableElement(c,0))){c=b.scrollHeight;d=b.offsetHeight;b.scrollTop=c>d?c-d:0}a==1&&isc.Timer.setTimeout({target:this,methodName:"$28p"},0)},isc.A.$28p=function(){delete this.$417;this.adjustOverflow("row animation complete");var a=this.$28j;delete this.$28i;delete this.$28j;if(a&&a.$03)(a.$28m?this.parentElement:this).fireCallback(a.$03)},isc.A.finishAnimateRowHeight=function(){if(this.$28i){this.cancelAnimation(this.$28i);
this.$28n(1)}},isc.A.$80s=function(){return this.$29a},isc.A.getTablePrintHTML=function(a,b,c,d,e){return this.getTableHTML(a,b,c,d,e)},isc.A.getTableHTML=function(a,b,c,d,e,f){if(isc.$cv)arguments.$cw=this;var g=isc.timeStamp();if(this.isEmpty()){this.$252=this.$253=this.$254=this.$255=null;if(this.isPrinting)return this.grid.getPrintHeaders(n,o)+this.$27w();return this.$27w()}if(this.isPrinting&&(!this.$568||b==0)){var h=this.$80s();if(h!=null&&h.length>0)for(var i=0;i<h.length;i++){n=h[i];if(n.$80t==
null){o={component:n,colNum:a,startRow:b,endRow:c,descreteCols:d,asyncCallback:e};o=h[i].getPrintHTML(this.printProperties,e==null?null:{target:this,methodName:"gotComponentPrintHTML",context:o});if(o!=null)n.$80t=o;else return null}}}h=b!=null&&c!=null;var j=b!=null?b:0,k=c!=null?c:this.getTotalRows();n=this.getDrawArea();o=this.grid;var l;if(o){if(o.$30d)l=o.$30d==null?0:isc.isAn.Array(o.$30d)?o.$30d[0]:o.$30d;else if(o.data&&o.data.getFirstUsedIndex&&n[0]==0)l=o.data.getFirstUsedIndex();if(l){o=
l+(n[1]-n[0]);var m=this.getTotalRows();if(o>=m){l-=o-(m-1);o=m-1}if(l<0)l=0;n[0]=l;n[1]=o}}if(h){o=n[0];l=n[1]+1;if(this.$28q)if(o>c||l<b)b=c;else if(!this.$73q){b=Math.max(b,o);c=Math.min(c,l)}}else{this.$252=n[0];this.$253=n[1];if(this.$28c!=null){this.$253+=this.$28e-this.$28c;m=this.getTotalRows();if(this.$253>=m)this.$253=m-1}b=this.$252;c=this.$253+1;o=b==0&&c==this.getTotalRows();if(this.virtualScrolling)this.$60s=!o&&!this.fixedRowHeights;if(!this.$60s){delete this.$27y;delete this.$60t;
delete this.$271;delete this.$60u}}this.$254=n[2];this.$255=n[3];n=a!=null&&isc.isAn.Array(a);var n,o;n||(d=false);if(a!=null)if(n){n=a[0];o=a[1]+1}else{n=a;o=a+1}else{n=this.$254;o=this.$255+1}if(d)l=a;else{l=[];for(i=n;i<o;i++)l[l.length]=i}var s=l.length;i=this.showAllColumns||a!=null;m=isc.StringBuffer.create();var r=this.fields,t=this.$26a;this.$28r=l[0]!=0?null:this.$26a[0];var p,q,u;if(!i){p=this.$26a.slice(0,n).sum();q=this.$26a.slice(o,this.$26a.length).sum();this.$26a.sum();u=this.cacheDOM||
isc.Browser.isIE&&!isc.Browser.isIE8?"margin":"padding"}var w=this.autoFit,v="";if(a!=null){if(!w&&this.fixedColumnWidths)v=" WIDTH=100%"}else if(this.isPrinting&&this.autoFit)v=" WIDTH=100%";else if((isc.Browser.isIE8Strict||isc.Browser.isMoz||isc.Browser.isSafari)&&!w)v=" WIDTH="+this.$26a.slice(n,o).sum();var z=this.startSpace||0;if(b!=j){var A=(b-j)*this.getAvgRowHeight();this.$514=A;z+=A}else this.$514=0;A=true;var B=(k-j)*this.getAvgRowHeight();if(isc.Browser.isIE)if(B>13E5)A=false;if(!h)this.$79b=
A;B>1E7&&this.logWarn("This grid is showing "+(k-j).toLocalizedString()+" rows. Due to native rendering limitations, grids with this many rows may not appear correctly on all browsers. Consider filtering the data displayed to the user to reduce the total number of rows displayed at a time. This will improve usability as well as avoiding unpredictable behavior.");if(!this.cacheDOM&&!this.isPrinting){m.append("<DIV style='width:1px;");A&&m.append("height:",z,"px;overflow:hidden;");z==0&&m.append("display:none;");
m.append("' ");h||this.isPrinting?m.append(">"):m.append(" ID="+this.getID()+"$28s>");m.append(isc.Canvas.spacerHTML(1,z),"</DIV>")}if(!this.$568||b==0){m.append("<TABLE BORDER=0",v,!h&&!this.isPrinting?" ID="+this.getTableElementId():null,this.tableStyle&&isc.Browser.isDOM?" CLASS='"+this.tableStyle+this.$ob:isc.$ad," CELLSPACING=",this.cellSpacing," CELLPADDING=",this.cellPadding," STYLE='",isc.Browser.isDOM&&!w&&this.fixedColumnWidths?"table-layout:fixed;overflow:hidden;wrap:false;":"",!i?u+(this.isRTL()?
"-right: ":"-left:")+p+"px;"+u+(this.isRTL()?"-left:":"-right:")+q+"px;":"",this.cacheDOM&&this.$514>0?"margin-top:"+this.$514+"px;":"",this.$27y!=null&&!(isc.Browser.isIE&&this.$r9)?"visibility:hidden;":"","'>",isc.Browser.isMoz?"<TBODY>":"");var C=0,x=0;u=this.$54p();if(isc.Browser.isStrict&&(isc.Browser.isSafari||isc.Browser.isIE)){if(isc.Browser.isIE&&!isc.Browser.isIE8||isc.Browser.isSafari&&isc.Browser.safariVersion<530)x=this.$54q();C=this.fixedRowHeights?0:this.cellPadding*2;C+=this.fixedRowHeights?
isc.Element.$ym(u):isc.Element.$yo(u)}this.$28t=C;this.$28u=x;if(!w&&isc.Browser.isDOM)for(i=0;i<l.length;i++)m.append("<COL WIDTH=",t[l[i]]-x,">");m.append("<TBODY>")}j=this.cellHeight;i=this.wrapCells?"":"<NOBR>";B=this.wrapCells?"":"</NOBR>";u=0;if(isc.Browser.isDOM){t=this.$28v(j);v=[];v[0]="<TD";v[3]=" ALIGN=";v[17]=this.fastCellUpdates?"' ":"' CLASS=";if(!h&&!this.isPrinting&&this.getCellElementId)v[19]=" ID=";v[23]=">"+i;v[30]=B+(t?"</DIV></TD>":"</TD>");B="<TR";if(isc.Browser.isMobileWebkit)B+=
' onmousedown="return true;"';if(isc.screenReader)B+=" tabIndex=-1";var D=[],F=0,L=[];this.$50d(l,w,x,t);if(this.isPrinting&&(!this.$568||b==0))m.append(this.grid.getPrintHeaders(n,o));for(x=b;x<c;x++){w=!h&&this.$28c==x;var E=this.getCellRecord(x),J=w||this.$282(x,E);m.append(B);!h&&!this.isPrinting&&this.getRowElementId&&m.append(" ID=",this.getRowElementId(x,x-b));m.append(">");var M=w?this.$28f:this.getRowHeight!=null?this.getRowHeight(E,x):j;if(w)i=true;else if((i=this.fixedRowHeights)&&this.shouldFixRowHeight!=
null)i=this.shouldFixRowHeight(E,x)!=false;if(i){v[1]=" HEIGHT=";v[2]=M-C;v[10]=null}else{v[1]=null;v[2]=null;v[10]=M==this.cellHeight&&!this.fixedRowHeights?null:this.$281(E,x)}if(t)v[21]=">"+this.$27s+this.$283(M,E,x,w);var K=J?this.$67p(E,x,n,o):null;for(i=0;i<l.length;i++){a=l[i];var G=r[a],I=E;if(I==null)I=this.getCellRecord(x,a);if(D[a]>0){G.$28w[x]=L[a];D[a]--;if(D[a]==0){F--;L[a]=null}}else{v[4]=this.getCellAlign(E,G,x,a);var H=this.getCellVAlign(E,G,x,a);if(H!=null){v[5]=" VALIGN=";v[6]=
H}if(K!=null&&a==K[0]){u++;v[7]=this.$67q(K[1]-K[0]);if(t)v[22]=this.$ob}else{v[7]=G.$28x;if(this.getRowSpan){H=this.getRowSpan(E,x,a);if(H>1){var N=" ROWSPAN="+H;if(v[4]!=null)v[4]+=N;else v[4]=N;D[a]=H-1;F++;L[a]=x;if(G.$28w==null)G.$28w={};G.$28w[x]=x}}v[22]=t?G.$28y:null}H=this.getCellStyle(E,x,a);G=this.getCellCSSText?this.getCellCSSText(E,x,a):null;if(w)if(G)G+=";padding:0px;border:0px;";else G="padding:0px;border:0px;";if(this.fastCellUpdates){H=this.$77d(H);v[11]=H;v[12]=G}else{v[11]=G;v[18]=
H}if(w){this.$28q=true;G=this.getTableHTML(null,this.$28c,this.$28e);delete this.$28q;v[24]=t?G:isc.SB.concat(this.$27s,this.$283(M,E,x,w),this.$ob,this.$oa,G,"</DIV>")}else v[24]=this.$22k(E,x,a);if(!h&&this.getCellElementId)v[20]=this.getCellElementId(x,x-b,a,a-n);m.append(v);!h&&I!=null&&I.$29a!=null&&I.$29a[0]&&I.$29a[0].rowNum==null&&this.updateEmbeddedComponentCoords(I.$29a,I,x,a);if(J&&a==K[0])i+=K[1]-K[0]}}m.append("</TR>");if(this.isPrinting&&E.$29a!=null){i=E.$29a;for(E=0;E<i.length;E++){J=
i[E];if(J.$57n==null&&J.$80t!=null){m.append(B,">",'<td colspan="',s,'">',J.$80t,"</td>","</TR>");delete J.$80t}}}if(w)x=this.$28e-1}}if(!this.$568||c==this.getTotalRows())m.append("</TABLE>");r=k-c;i=!h&&this.$60s;C=this.cacheDOM?0:this.endSpace||0;this.$515=0;if(!this.showAllRows&&(r!=0||i)){k=r*this.getAvgRowHeight();if(i&&r==0){r=this.getViewportHeight();if(k<r)k=r}this.$515=k;C+=this.$515}if(!this.cacheDOM&&!this.isPrinting){m.append("<DIV style='width:1px;");A&&m.append("height:",C,"px;overflow:hidden;");
C==0&&m.append("display:none;");m.append("' ");h||this.isPrinting?m.append(">"):m.append(" ID="+this.getID()+"$284>");m.append(isc.Canvas.spacerHTML(1,C),"</DIV>")}if(this.logIsDebugEnabled("gridHTML")){g=isc.timeStamp()-g;h=s*(c-b);k=g/h;s=1E3/k;if(k.toFixed!=null)k=k.toFixed(2);if(s.toFixed!=null)s=s.toFixed(2);this.logDebug("getTableHTML: columns "+(d?l:n+"->"+(o-1))+", rows "+b+"->"+(c-1)+", time: "+g+"ms ("+h+" cells at "+k+"ms per cell, "+s+" cells per second), spacerHeights: ["+[z,C]+"], left/right pad: ["+
[p,q]+"], "+u+" single cell rows","gridHTML")}p=m.release();if(f){e!=null&&this.fireCallback(e,"HTML,callback",[p,e]);return null}return p},isc.A.gotComponentPrintHTML=function(a,b){var c=b.context;if(c.asyncCallback!=null){c.component.$80t=a;return this.getTableHTML(c.colNum,c.startRow,c.endRow,c.discreteCols,c.asyncCallback,true)}},isc.A.$77d=function(a){if(this.$77c[a]!=null)return this.$77c[a];var b=isc.Element.getStyleText(a,true);this.$77c[a]=b.replaceAll("'",'"');return this.$77c[a]},isc.A.getCellVAlign=
function(){return null},isc.A.getCellAlign=function(a,b){return b.cellAlign||b.align},isc.A.$67p=function(a,b,c,d){return[c,d]},isc.A.$67q=function(a){if(!isc.GridRenderer.$67r)isc.GridRenderer.$67r={$67s:{},$67t:{}};var b=this.fixedRowHeights?isc.GridRenderer.$67r.$67s:isc.GridRenderer.$67r.$67t;return b[a]?b[a]:b[a]=" COLSPAN="+a+" STYLE='"+(this.fixedRowHeights?"padding-top:0px;padding-bottom:0px;":"")},isc.A.$54p=function(){var a=this.grid,b=0;if(a)if(a.$30d)b=a.$30d==null?0:isc.isAn.Array(a.$30d)?
a.$30d[0]:a.$30d;else if(a.data&&a.data.getFirstUsedIndex)b=a.data.getFirstUsedIndex();return this.getBaseStyle!=null?this.getBaseStyle(this.getCellRecord(b,0),0,0):this.baseStyle},isc.A.$50d=function(a,b,c,d){for(var e=this.fields,f=this.$26a,g=0;g<a.length;g++){var h=a[g],i=e[h];i.$28w=null;if(b){i.$28x=isc.Browser.isIE&&!isc.Browser.isIEStrict?" STYLE='":" STYLE='OVERFLOW:hidden;";i.$28y=this.$ob}else{var j=isc.Browser.isIE8Strict?" STYLE='overflow:hidden;":" STYLE='";i.$28x=isc.Browser.isIE?" WIDTH="+
(f[h]-c)+j:" STYLE='"+this.$28z(h);if(d)i.$28y=this.$280(h)+this.$ob}this.fixedRowHeights||(i.$28x+=this.$281());if(this.fixedRowHeights)i.$28x+="padding-top:0px;padding-bottom:0px;"}},isc.A.$28v=function(){return isc.Browser.isSafari||isc.Browser.isOpera&&!this.autoFit&&(this.fixedColumnWidths||this.fixedRowHeights)||isc.Browser.isMoz&&isc.Browser.geckoVersion>=20040113&&this.fixedColumnWidths&&!this.autoFit||this.fixedRowHeights&&(this.wrapCells||this.enforceVClipping)&&(isc.Browser.isMoz||isc.Browser.isStrict&&
isc.Browser.isIE)},isc.A.$282=function(a,b){return b&&(b[this.singleCellValueProperty]!=null||b[this.isSeparatorProperty]||Array.isLoading(b)&&!(isc.Browser.isSafari&&(a==0||a==this.$252)))},isc.A.$283=function(a,b,c,d){if(d||this.fixedRowHeights&&(this.enforceVClipping||this.wrapCells)&&(this.shouldFixRowHeight==null||this.shouldFixRowHeight(b,c)!=false)){a=a-2*this.cellSpacing-(d?0:2);if(c==this.$285)for(c=0;c<this.$286.getItems().length;c++)a=Math.max(this.$286.getItems()[c].getHeight(),this.$286.getItems()[c].iconHeight);
if(a<1)a=1;return(isc.Browser.isMoz||isc.Browser.isSafari?"MAX-HEIGHT:":"HEIGHT:")+a+"px;"}return isc.$ad},isc.A.$280=function(a){if(!this.fixedColumnWidths||this.autoFit)return isc.emptyString;return"WIDTH:"+this.getInnerColumnWidth(a)+"px;"},isc.A.$281=function(a,b){var c=b!=null?this.getRowHeight(a,b):this.cellHeight,d=isc.Browser.isIE,e=isc.Browser.isStrict;if(e&&(d||isc.Browser.isSafari))c-=this.$28t;if(d&&!e&&!(this.autoFit||!this.fixedColumnWidths))return"MIN-HEIGHT:"+c+"px;";return"HEIGHT:"+
c+"px;"},isc.A.$28z=function(a){if(isc.Browser.isIE||this.autoFit)return isc.$ad;if(this.$287==null){this.$287=[];for(var b=0;b<this.$26a.length;b++)this.$287[b]="WIDTH:"+this.$26a[b]+(this.fixedColumnWidths?"px;OVERFLOW:hidden;":"px;")}return this.$287[a]},isc.A.getCellRecord=function(){return null},isc.A.findRowNum=function(){return-1},isc.A.findColNum=function(){return-1},isc.A.$22k=function(a,b,c){b=this.getCellValue(a,b,c,this);if(!this.isPrinting&&this.$80g(a)){a=this.$667(a);if(a.allWithin){if(a.extraHeight&&
a.extraHeight>this.cellHeight)b=[b,this.$80q,isc.Canvas.spacerHTML(1,a.extraHeight-this.cellHeight),this.$80r].join(isc.emptyString)}else if(a.extraHeight&&a.extraHeight>0)b=[b,this.$80q,isc.Canvas.spacerHTML(1,a.extraHeight),this.$80r].join(isc.emptyString)}else if(a&&a.$29a!=null)for(var d=a.$29a||[],e=0;e<d.length;e++){var f=a.$29a[e];if(f!=null)if(f.$57n==c){var g=f.embeddedPosition==this.$57l,h=f.$80t;if(h!=null){b+=g?this.$80q+h+this.$80r:h;delete f.$80t}}}return b},isc.A.$80g=function(a){return(a&&
a.$29a)!=null},isc.A.getCellValue=function(){return this.emptyCellValue},isc.A.getTotalRows=function(){return this.totalRows},isc.A.setColumnWidth=function(a,b){this.fields[a].width=this.$26a[a]=b;this.$287=null;this.markForRedraw("setColumnWidth")},isc.A.setColumnWidths=function(a){var b=this.$26a;this.$26a=a.duplicate();this.$287=null;if(b!=null&&a!=null&&b.length==a.length){if(b==a)return;for(var c=false,d=0;d<b.length;d++)if(b[d]!=a[d])c=true;if(!c)return;if(!this.fixedColumnWidths&&!this.wrapCells&&
this.isDrawn()&&a.length==1){b=this.$28r||b[0];a=a[0];c=this.getColumnSize(0);if(b==a||c>b&&c>=a)return}}this.markForRedraw("setColumnWidths")},isc.A.shouldRedrawOnResize=function(){if(this.redrawOnResize!=null)return this.redrawOnResize;if(isc.isA.ListGrid(this.parentElement)&&isc.isA.Layout(this.parentElement.parentElement)){var a=this.parentElement.parentElement.getMembers();if(a&&a.map("isAnimating").or())return false}if(this.$276()||this.$277())return true;if(this.isEmpty())return true;return false},
isc.A.getRowHeight=function(a,b){return this.updateHeightForEmbeddedComponents(a,b,this.cellHeight)},isc.A.updateHeightForEmbeddedComponents=function(a,b,c){if(a&&a.$29a){a=this.$667(a,b);if(a.allWithin&&a.extraHeight>0)c=Math.max(c,a.extraHeight);else c+=a.extraHeight}return c},isc.A.$667=function(a,b){for(var c=a.$29a||[],d=0,e=true,f=this.isPrinting,g=0;g<c.length;g++){var h=a.$29a[g];if(!f){if(b!=null)h.$289=b;var i=h.embeddedPosition==this.$57l;i||(e=false);var j=h.getVisibleHeight();j=i?j>this.cellHeight?
j:0:j;if(h._percent_height!=null){h.height=h._percent_height;j=this.cellHeight}h=h.specifiedHeight;if(i&&h&&isc.isA.String(h)&&h.contains("%"))j=0;if(j>d)d=j}}return{allWithin:e,extraHeight:d}},isc.A.getCellStartRow=function(a,b){var c=this.fields[b].$28w;if(c==null||c[a]==null)return a;return c[a]},isc.A.getCellRowSpan=function(a,b){var c=this.fields[b].$28w,d=this.getCellStartRow(a,b);if(d==a)return 1;for(var e=a+1,f=a-d+1;e<=this.$253&&c[e]==d;){e++;f++}return f},isc.A.addEmbeddedComponent=function(a,
b,c,d,e){if(e==null)e=this.$57m;var f=e==this.$57m||!this.fixedRowHeights;if(!isc.isA.Canvas(a)){a.autoDraw=false;var g=isc.ClassFactory.getClass(a._constructor);if(g==null)g=isc.Canvas;a=g.create(a)}g=false;if(this.$29a&&this.$29a.contains(a)){if(b.$29a&&b.$29a.contains(a)&&a.embeddedPosition==e&&a.$289==c&&a.$57n==d)return;if(e==a.embeddedPosition&&!f)g=!this.isDirty();this.removeEmbeddedComponent(a.embeddedRecord,a,true)}else f||(g=!this.isDirty());if(!b.$29a)b.$29a=[];b.$29a.add(a);if(this.$29a==
null)this.$29a=[];this.$29a.add(a);a.embeddedPosition=e;a.embeddedRecord=b;a.$289=c;a.$57n=d;a.$669=this.getID();a.percentBox="custom";if(a.parentElement!=this){b=this.$417;this.$417=true;a.hide();this.addChild(a);b==null&&delete this.$417}this.observe(a,"resized","observer.$80d(observed, deltaX, deltaY)");a.$29b=a._redrawWithParent;a._redrawWithParent=false;a.$668=a.bubbleMouseEvents;if(!a.bubbleMouseEvents)a.bubbleMouseEvents=["mouseDown","mouseUp","click","doubleClick","contextClick"];if(g&&(c==
-1||d==-1))g=false;g?this.placeEmbeddedComponent(a):this.markForRedraw("added embedded component");return a});isc.B.push(isc.A.$80d=function(a,b,c){if(a.embeddedPosition!=this.$57l)c!=null&&c!=0&&this.markForRedraw("embedded component resized");else this.placeEmbeddedComponent(a)},isc.A.updateEmbeddedComponentCoords=function(a,b,c){a.setProperty("$289",c)},isc.A.placeEmbeddedComponent=function(a){var b=a.$289;if(b==null||b<this.$252||b>this.$253)a.isDrawn()&&a.clear();else{var c=a.embeddedRecord,
d=a.embeddedPosition,e=a.$57n,f=this.getRowTop(b),g=e!=null?this.getColumnLeft(e):0,h=e!=null&&e>=0?this.getColumnWidth(e):Math.min(this.getInnerWidth()+this.getScrollLeft(),this.$26a.sum());if(d==this.$57l){e=this.getEmbeddedComponentSnapTo(a,c,b,e);var i=a.snapEdge||e,j=this.getRowSize(b),k=a._percent_width,l=a._percent_height,m,n;if(a.snapOffsetLeft)h-=a.snapOffsetLeft;if(isc.isA.String(k)&&k.endsWith("%"))m=Math.round(parseInt(k)*h/100);if(isc.isA.String(l)&&l.endsWith("%"))n=Math.round(parseInt(l)*
j/100);n!=null||a.getHeight();m!=null||a.getWidth();if(n||m){a.resizeTo(m,n);a._percent_width=k;a._percent_height=l}isc.Canvas.snapToEdge([g,f,h,j],e,a,i)}else{a.moveTo(g,f);a.setWidth(h)}(f=this.isDrawn())&&!a.isDrawn()&&a.draw();g=this.isDirty();h=this.getRowHeight(c,b);if(g&&h!=this.getRowSize(b)){this.setRowHeight(b,h,c);this.refreshRow(b)}if(f){if(d!=this.$57l){c=this.getDrawnRowHeight(b)-a.getVisibleHeight()-1;a.moveTo(null,this.getRowTop(b)+c)}a.isVisible()||(this.shouldAnimateEmbeddedComponent(a)?
a.animateShow():a.show())}this.updateEmbeddedComponentZIndex(a)}},isc.A.getEmbeddedComponentSnapTo=function(a,b,c,d){if(a.snapTo!=null)return a.snapTo;if(d==null)return"TL";a=this.getCellAlign(b,this.fields[d],c,d)||"center";b=this.getCellVAlign(b,this.fields[d],c,d)||"center";return this.alignSnapToMap[a][b]},isc.A.shouldAnimateEmbeddedComponent=function(){return false},isc.A.updateEmbeddedComponentZIndex=function(){},isc.A.getEmbeddedComponent=function(a,b){if(isc.isA.Number(a))a=this.getCellRecord(a,
0);var c=a.$29a;if(c!=null){var d=null;if(isc.isA.Number(b))d=c.find({$57n:b,$669:this.getID()});return d}},isc.A.removeEmbeddedComponent=function(a,b,c){if(isc.isA.Number(a))a=this.getCellRecord(a,0);var d=a.$29a;if(d!=null){if(isc.isA.Number(b))b=d.find({$57n:b,$669:this.getID()});b||(b=d.find({$669:this.getID()}));if(d.contains(b)){this.isObserving(b,"resized")&&this.ignore(b,"resized");a.$29a.remove(b);if(a.$29a.length==0)a.$29a=null;this.$29a&&this.$29a.remove(b);b._redrawWithParent=b.$29b;b.$29b=
null;b.bubbleMouseEvents=b.$668;a=b.embeddedPosition==this.$57m;b.embeddedPosition=null;b.$289=null;b.$57n=null;b.$669=null;if(c)b.hide();else{b.destroyOnUnEmbed?b.destroy():this.removeChild(b);a&&this.markForRedraw("removed embedded component")}}}},isc.A.$29c=function(){var a=this.$29a;a!=null&&a.setProperty("$289",null)},isc.A.$29d=function(){var a=this.$29a;if(a!=null){a.sortByProperty("$289",true);for(var b=0;b<a.length;b++)this.placeEmbeddedComponent(a[b])}},isc.A.getTableZIndex=function(){return 1E3},
isc.A.getCellStyle=function(a,b,c){if(a&&a[this.recordCustomStyleProperty]!=null)return a[this.recordCustomStyleProperty];return this.getCellStyleName(this.getCellStyleIndex(a,b,c),a,b,c)},isc.A.getCellStyleName=function(a,b,c,d){var e=isc.GridRenderer.standardStyleSuffixes;if(this.getBaseStyle){b=this.getBaseStyle(b,c,d);if(b!==this.baseStyle){if(a==0)return b;return b+e[a]}}if(!this.$29e){this.$29e=[];for(b=0;b<e.length;b++)this.$29e[b]=this.baseStyle+e[b]}return this.$29e[a]},isc.A.getCellStyleIndex=
function(a,b,c){var d=0,e=true;if(this.grid!=null){e=this.grid.getField(this.grid.getFieldNumFromLocal(c,this));e=!e?true:e.showAlternateStyle!=false}if(this.alternateRowStyles&&e)if(Math.floor(b/this.alternateRowFrequency)%2==1)d+=8;if(this.cellIsEnabled(b,c)){if(this.shouldShowRollOver(b,c)&&!this.isPrinting&&b==this.lastOverRow&&(!this.useCellRollOvers||c==this.lastOverCol))d+=1;if(this.showSelectedStyle&&this.selectionEnabled())if(this.canSelectCells?this.selection.cellIsSelected(b,c):this.selection.isSelected(a))d+=
2}else d+=4;return d},isc.A.cellIsEnabled=function(){return true},isc.A.getTableElementId=function(){return this.getCanvasName()+"table"},isc.A.getDOMTable=function(a,b){if(this.cacheDOM)return this.getTableChunkAt(a,b);if(a!=null&&(a-this.$252<0||a>this.$253)||b!=null&&(b-this.$254<0||b>this.$255))return null;var c=this.$29f;if(c==null){c=this.getTableElementId();c=isc.Element.get(c);if(c==null)return null;if(this.$756){this.logInfo("getTableElement() called while updating table HTML. This call may be invalid as the table is being rewritten in the DOM. Suppressing caching of the current element.",
"redrawing");return c}}return this.$29f=c},isc.A.getTableElement=function(a,b){var c=this.getDOMTable(a,b);if(a==null)return c;if(!c)return null;var d=a-(this.$252>0?this.$252:0);if(d<0)return null;var e;if(this.$29g!=null)e=this.$29g[d];if(e==null)e=c.rows[d];if(e==null)return null;if(this.$29g==null)this.$29g=[];this.$29g[d]=e;if(b==null)return e;c=b-this.$254;if(c<0)return null;if(this.getRowSpan){var f=this.getCellStartRow(a,c);if(f!=d){d=f;e=this.getTableElement(f)}if(e.cells.length<this.$255-
this.$254+1){for(var g=f=0;g<c;g++)this.fields[g].$28w!=null&&this.fields[g].$28w[d]!=null&&this.fields[g].$28w[d]!=d&&f++;c-=f}}return e.cells[c]},isc.A.$29h=function(a,b,c,d,e){if(d==null)d=this.getTableElement(b,c);if(d!=null){if(a==null)a=this.getCellRecord(b,c);if(e==null)e=this.getCellStyle(a,b,c);if(this.fastCellUpdates)d.style.cssText=this.$29i(a,b,c,e);else{if(d.className!=e)d.className=e;if(this.getCellCSSText)d.style.cssText=this.$29i(a,b,c,e)}this.shouldRefreshCellHTML(a,b,c)&&this.refreshCellValue(b,
c);if(this.isDrawn()){c=this.fixedRowHeights&&(this.shouldFixRowHeight==null||this.shouldFixRowHeight(a,b)!=false);d=this.getRowHeight!=null?this.getRowHeight(a,b):this.cellHeight;this.setRowHeight(b,d,a,e,c)}}},isc.A.$28g=function(a){if(a==null)return null;a=a.childNodes[0];if(!a)return null;if(a.tagName==this.$27t)a=a.childNodes[0];if(a&&(a.cellClipDiv||a.getAttribute&&a.getAttribute(this.$27u)))return a;return null},isc.A.setRowHeight=function(a,b,c,d,e,f){var g=this.$254,h=this.$255;if(e==null){if(c==
null)c=this.getCellRecord(a,g);e=this.fixedRowHeights&&(this.shouldFixRowHeight==null||this.shouldFixRowHeight(c,a)!=false)}var i=this.getTableElement(a,g);i=i?parseInt(i.height):null;var j;isc.isA.Number(i)||(i=null);if((isc.Browser.isSafari||isc.Browser.isIE)&&isc.Browser.isStrict){if(c==null)c=this.getCellRecord(a,g);d=d;if(d==null)d=this.getCellStyle(c,a,g);b-=this.fixedRowHeights?isc.Element.$ym(d):isc.Element.$yo(d);this.fixedRowHeights||(b-=this.cellPadding*2)}if(!e&&i!=null||i!=b&&!(i==null&&
b==isc.emptyString))j=true;if(j){if((c=isc.isA.Number(b))&&b<=0)b=e?0:1;j=this.getTableElement(a);if(b==0&&e)j.style.display="none";else{j.style.display=isc.emptyString;for(g=g;g<=h;g++)if(j=this.getTableElement(a,g)){d=!isc.Browser.isIE||isc.Browser.isStrict?this.$o5:this.$27v;if(e){j.height=b;j.style[d]=isc.emptyString}else{j.height=isc.emptyString;j.style[d]=b}j=this.$28g(j);d=e?c?b+isc.px:b:isc.emptyString;if(j)if(isc.Browser.isMoz||isc.Browser.isSafari)j.style.maxHeight=d;else j.style.height=
d}}if(isc.Browser.isSafari&&this.$28o){a=this.getTableElement(a);if(a!=null)a.innerHTML=a.innerHTML}this.$29j();f?this.adjustOverflow("cell height changed"):this.$t6("cell height changed")}},isc.A.$29i=function(a,b,c,d){var e=null;e=this.fixedRowHeights?this.$721:this.$281(a,b);if(isc.Browser.isIE8Strict)if(e==null)e=this.$722;else e+=this.$722;if(isc.Browser.isMoz||isc.Browser.isSafari)if(e==null)e=this.$28z(c);else e+=this.$28z(c);if(this.fastCellUpdates){if(d==null)d=this.getCellStyle(a,b,c);d=
isc.Element.getStyleText(d,true);if(d==null&&isc.Page.$29k){this.logInfo("fastCellUpdates set to true but this page loads styles from a remote stylesheet. This is unsupported - disabling fastCellUpdates.");this.fastCellUpdates=false;this.redraw()}if(e!=null)e+=d;else e=d}if(this.getCellCSSText){a=this.getCellCSSText(a,b,c);if(a!=null){a.endsWith(this.$39)||(a+=this.$39);if(e!=null)e+=a;else e=a}}return e},isc.A.shouldRefreshCellHTML=function(){return this.showHiliteInCells},isc.A.$29l=function(a,
b){if((isc.EH.$ku||isc.EH.$km)&&isc.EH.lastEvent.target==this){if(this.getEventRow()!=a)return true;if(b!=null){var c=this.getEventColumn();if(b!=c)return true}return false}return true},isc.A.refreshCellValue=function(a,b){var c=this.getTableElement(a,b);if(c)if(this.$29l(a,b)){var d=this.getCellRecord(a,b);if(this.fields[b]){var e="";this.getCellStyle(d,a,b);var f=this.$28v(g);if(f){e+=this.$27s;var g=this.getRowHeight!=null?this.getRowHeight(d,a):this.cellHeight;e+=this.$283(g,d,a);this.$282(a,
d)||(e+=this.$280(b));e+="'>"}this.wrapCells||(e+="<NOBR>");e+=this.$22k(d,a,b);this.wrapCells||(e+="</NOBR>");if(f)e+="</DIV>";c.innerHTML=e}else this.logDebug("refreshCell called for invalid field "+b)}else this.delayCall("refreshCellValue",[a,b])},isc.A.setCellStyle=function(a,b,c){return this.setRowStyle(a,c,b)},isc.A.setRowStyle=function(a,b,c){if(isc.$cv)arguments.$cw=this;if(a==null||a<0){this.logWarn("setRowStyle: bad rowNum: "+a);return false}var d=this.getTableElement(a,c);if(d==null)return false;
var e=this.getCellRecord(a,c);if(!(e&&e.$29m)){if(c!=null)this.$29h(e,a,c,d,b);else{var f=this.getTableElement(a);if(f!=null)for(var g=!this.showAllColumns?this.$255:this.fields.length-1,h=0,i=!this.showAllColumns?this.$254:0;i<=g;i++,h++){d=this.showColumnsSeparately||this.cacheDOM?this.getTableElement(a,i):f.cells[h];d!=null&&this.$29h(e,a,i,d,b)}}return true}},isc.A.refreshCellStyle=function(a,b,c){return this.setCellStyle(a,b,c)},isc.A.refreshCell=function(a,b){this.refreshCellStyle(a,b);this.shouldRefreshCellHTML()||
this.refreshCellValue(a,b)},isc.A.refreshRow=function(a){this.$29l(a)||this.delayCall("refreshRow",[a]);for(var b=0;b<this.fields.length;b++)this.refreshCell(a,b)},isc.A.refreshCellStyles=function(a,b){this.logDebug("refreshing cell styles: "+a.length+" cells");for(var c=0;c<a.length;c++){var d=a[c][0],e=a[c][1],f=this.getTableElement(d,e);f!=null&&this.$29h(null,d,e,f,b)}return true},isc.A.getCellPageRect=function(a,b){return[this.getColumnPageLeft(b),this.getRowPageTop(a),this.getColumnSize(b),
this.getRowSize(a)]},isc.A.getColumnLeft=function(a){return this.isRTL()?this.getScrollWidth()-this.$26a.sum(0,a+1)-(this.vscrollOn?this.getScrollbarSize():0):this.$26a.sum(0,a)},isc.A.getColumnPageLeft=function(a){return this.getPageLeft()-this.getScrollLeft()+this.getColumnLeft(a)+(this.isRTL()&&this.vscrollOn?this.getScrollbarSize():0)},isc.A.getColumnWidth=function(a){return this.$26a[a]},isc.A.getInnerColumnWidth=function(a){a=this.getColumnWidth(a);if(a==null)return null;return a-(2*this.cellSpacing+
this.$54q())},isc.A.$54q=function(a){if(!a&&this.$54r!=null)return this.$54r;var b=this.$54p();a=isc.Element.$tr(b,true);var c=isc.Element.$ts(b,true);b=isc.Element.$yn(b);if(a==null)a=this.cellPadding;if(c==null)c=this.cellPadding;return this.$54r=a+c+b},isc.A.getRowTop=function(a){if(a<this.$252)return this.getAvgRowHeight()*a;var b=this.$29n(),c=this.$26b();if(a>this.$253)return b+c.sum()+(a-1-this.$253)*this.getAvgRowHeight();return b+c.sum(0,a-this.$252)},isc.A.getRowPageTop=function(a){return this.getPageTop()+
this.getTopBorderSize()+(this.getRowTop(a)-this.getScrollTop())},isc.A.getRowSize=function(a){return this.getDrawnRowHeight(a)},isc.A.getDrawnRowHeight=function(a){if(a<this.$252||a>this.$253)return this.getAvgRowHeight();a=a-this.$252;return this.$26b()[a]},isc.A.getColumnSize=function(a){if(this.fixedFieldWidths&&!this.autoSize||a<this.$254||a>this.$255)return this.getColumnWidth(a);a=a-this.$254;return this.getColumnSizes()[a]},isc.A.$29n=function(){return this.$252*this.getAvgRowHeight()},isc.A.$26b=
function(){if(this.$8s!=null)return this.$8s;var a=this.$8s=[],b=this.getTableElement();if(!b||!b.rows){delete this.$8s;return a}var c=this.getDrawnRows();c=c[1]-c[0]+1;for(var d=false,e=0;e<=c;e++){var f=this.cacheDOM?this.getTableElement(e+this.$252):b.rows[e];if(f){var g=isc.Browser.isSafari&&isc.Browser.safariVersion<500;if(this.getRowSpan&&this.fullRowSpans){a[e]=f.offsetHeight;d=true;continue}var h=g&&(this.fixedRowHeights==false||this.shouldFixRowHeight!=null&&this.shouldFixRowHeight(this.getCellRecord(e),
e)==false),i,j=[];if(!g||!h)i=f.cells[f.cells.length-1];else for(var k=0;k<f.cells.length;k++)j[k]=f.cells[k];if(h){for(f=a[e]=0;f<j.length;f++){g=j[f];h=g.offsetHeight;k=parseInt(g.style?g.style.height:null);if(isc.Browser.isStrict){if(this.cellPadding)k+=this.cellPadding;k+=isc.Element.$yo(g.className)}if(isc.isA.Number(k)&&k>h)h=k;if(h>a[e])a[e]=h}a[e]+=this.cellSpacing}else if(i){if(g){j=parseInt(i.height);if(j!=null&&isc.isA.Number(j)){if(isc.Browser.isStrict)j+=isc.Element.$ym(i.className)}else j=
i.offsetHeight||0;a[e]=j}else a[e]=i.offsetHeight;a[e]+=this.cellSpacing}}h=a[e];if(h!=0&&h!=null)d=true}a[0]+=this.cellSpacing;if(!d){this.logWarn("row heights not yet available; returning all zeroes");this.$8s=null}if(isc.Browser.isSafari&&!isc.Page.isLoaded())this.$8s=null;return a},isc.A.getColumnSizes=function(){if(this.$29o!=null)return this.$29o;if(this.fixedColumnWidths&&isc.Browser.version>=5)return this.$29o=this.$26a.duplicate();else{var a=this.$29o=[],b=this.getTableElement(this.$252);
if(b==null)return this.$29o=a.concat(this.$26a);for(var c=isc.Browser.isMac?this.cellSpacing:0,d=0;d<this.fields.length;d++){var e;if(this.showColumnsSeparately)e=this.getTableElement(this.$252,d);else isc.Browser.isSafari&&isc.Browser.safariVersion<125||(e=b.cells[d]);a[d]=e?e.offsetWidth+c:this.$26a[d]}this.innerWidth=this.getTableElement().offsetWidth;return a}},isc.A.getEventRow=function(a){if(this.isEmpty())return-2;if(a==null)a=this.getOffsetY();if(this.startSpace)a-=this.startSpace;var b=this.$29n();
if(a<=b)return Math.floor(a/this.getAvgRowHeight());a=a-b;b=this.$26b();var c=this.inWhichPosition(b,a);if(c>=0)a=this.$252+c;else{a=a-b.sum();a=this.$253+1+Math.floor(a/this.getAvgRowHeight());if(a>=this.getTotalRows())a=-2}return a},isc.A.getEventColumn=function(a){var b=this.getColumnSizes();if(a==null)a=this.getOffsetX();return this.inWhichPosition(b,a,this.getTextDirection())},isc.A.getNearestRowToEvent=function(){var a=this.getEventRow();if(a<0){var b=this.getVisibleRows();if(a==-1)return b[0];
if(a==-2)return b[1]}return a},isc.A.getNearestColToEvent=function(){var a=this.getEventColumn();if(a<0){var b=this.getVisibleColumns();if(a==-1)return b[0];if(a==-2)return b[1]}return a},isc.A.$27x=function(){var a=Math.floor(this.getScrollTop()/this.getAvgRowHeight()),b=a+Math.ceil(this.getViewportHeight()/this.cellHeight);if(this.startSpace){var c=Math.floor(this.startSpace/this.getAvgRowHeight());a=Math.max(0,a-c);b=Math.max(0,b-c)}if(c=this.virtualScrolling&&!this.fixedRowHeights&&this.$27y!=
null)if(a==0&&b>=this.getTotalRows()-1)c=false;if(!c)return[a,b];a=this.$27y;if(this.$27z<0)a+=Math.floor(this.$27z/this.cellHeight);if(a<0)a=0;b=a+Math.ceil(this.getViewportHeight()/this.cellHeight);return[a,b]},isc.A.getAvgRowHeight=function(){return this.fixedRowHeights?this.cellHeight:Math.max(this.cellHeight,this.avgRowHeight)},isc.A.getVisibleRows=function(){var a=this.getScrollTop();a=[this.getEventRow(a),this.getEventRow(a+this.getInnerHeight())];if(a[1]==-2)if(this.getTotalRows()==0){a[0]=
-1;a[1]=-1}else a[1]=this.getTotalRows()-1;return a},isc.A.getVisibleColumns=function(){var a=this.$26a;if(this.overflow==isc.Canvas.VISIBLE)return[0,a.length-1];var b=this.getScrollLeft();if(this.isRTL())b=this.getScrollWidth()-this.getInnerWidth()-b;var c=this.inWhichPosition(a,b);a=this.inWhichPosition(a,b+this.getInnerWidth());if(a==-2)a=this.$26a.length-1;return[c,a]},isc.A.getDrawnRows=function(){if(this.cacheDOM)return this.getVisibleRows();return[this.$252,this.$253]},isc.A.shouldShowRollOver=
function(){return this.showRollOver&&!this.$28j},isc.A.updateRollOver=function(a,b){this.setRowStyle(a,null,this.useCellRollOvers?b:null)},isc.A.startHover=function(){},isc.A.mouseMove=function(){if(!this.$29p()){var a=this.getEventRow(),b=this.getEventColumn();if(!(a<0||b<0)){if(!(a==this.lastOverRow&&b==this.lastOverCol)){var c=a!=this.lastOverRow||b<0,d=a>=0&&b>=0&&this.cellIsEnabled(a,b);if(this.lastOverRow!=null&&this.lastOverCol!=null){var e=this.lastOverRow,f=this.lastOverCol,g=this.getCellRecord(e,
f);this.lastOverCol=this.lastOverRow=null;if((this.hoverByCell||c)&&this.shouldShowRollOver(e,f)){this.updateRollOver(e,f,d);this.getCanHover()&&!this.keepHoverActive&&this.stopHover()}this.cellOut&&this.cellOut(g,e,f);c&&this.rowOut&&this.rowOut(g,e,f)}if(d){this.lastOverRow=a;this.lastOverCol=b;if(this.hoverByCell||c){this.shouldShowRollOver(a,b)&&this.updateRollOver(a,b);this.getCanHover()&&isc.Hover.setAction(this,this.$29q,[a,b],this.hoverDelay)}this.cellOver&&this.cellOver(this.getCellRecord(a,
b),a,b);c&&this.rowOver&&this.rowOver(this.getCellRecord(a,b),a,b)}}this.cellMove&&this.cellMove(this.getCellRecord(a,b),a,b);this.rowMove&&this.rowMove(this.getCellRecord(a,b),a,b)}}},isc.A.$29p=function(){if(this.$28j!=null)return true;return false},isc.A.mouseOut=function(){var a=isc.EH.getTarget();if(this.$29a)for(var b=this.$29a,c=0;c<b.length;c++)if(b[c].contains(a,true))return;if(!(a==this&&!isc.EH.getDragTarget())){this.getCanHover()&&this.stopHover();if(this.lastOverRow!=null&&this.lastOverCol!=
null){a=this.lastOverRow;b=this.lastOverCol;c=this.getCellRecord(a,b);this.lastOverCol=this.lastOverRow=null;this.shouldShowRollOver(a,b)&&this.updateRollOver(a,b);this.cellOut&&this.cellOut(c,a,b);this.rowOut&&this.rowOut(c,a,b)}}},isc.A.$29q=function(a,b){var c=this.getCellRecord(a,b),d;if(this.cellHover&&this.cellHover(c,a,b)==false)d=false;if(this.rowHover&&this.rowHover(c,a,b)==false)d=false;d!=false&&this.showHover&&this.$29r(c,a,b)},isc.A.$29r=function(a,b,c){var d=this.$wc(),e=this.$784(a,
b,c);e||(e=this.cellHoverHTML(a,b,c));isc.Hover.show(e,d,this.cellHoverBoundary(b,c),this.getHoverTarget())},isc.A.$784=function(a,b,c){return this.grid.$784(a,b,c)},isc.A.getHoverTarget=function(){return this},isc.A.cellHoverHTML=function(){return null},isc.A.getCellHoverComponent=function(){return null},isc.A.cellHoverBoundary=function(){return null},isc.A.showContextMenu=function(){if(this.$29p())return false;var a=this.getEventRow(),b=this.getEventColumn();if(a>=0&&b>=0&&this.cellIsEnabled(a,
b)){var c=this.getCellRecord(a,b),d;if(this.cellContextClick)if(this.cellContextClick(c,a,b)==false)d=false;if(this.rowContextClick)if(this.rowContextClick(c,a,b)==false)d=false;if(this.recordContextClick)if(this.recordContextClick(c,a,b)==false)d=false;if(d==false)return false}return this.Super("showContextMenu")},isc.A.setSelection=function(a){this.selection=a;this.selection.isA("CellSelection")?this.observe(this.selection,"selectionChanged","observer.$29s(observed.changedCells)"):this.observe(this.selection,
"setSelected","observer.$29t(observed.lastSelectionItem,!!observed.lastSelectionState)")},isc.A.clearSelection=function(){if(this.selection){this.isObserving(this.selection,"selectionChanged")&&this.ignore(this.selection,"selectionChanged");this.isObserving(this.selection,"setSelected")&&this.ignore(this.selection,"setSelected");delete this.selection}},isc.A.$29s=function(a){if(this.cellSelectionChanged)if(this.cellSelectionChanged(a)==false)return false;this.refreshCellStyles(a)},isc.A.$29t=function(a,
b){if(this.selectionChanged&&this.selectionChanged(a,b)==false)return false;var c=this.selection,d=c.lastSelectionItem,e=c.data.indexOf(d,this.$252,this.$253);if(e==-1)e=c.data.indexOf(d);e!=-1&&this.updateRowSelection(e)},isc.A.updateRowSelection=function(a){this.setRowStyle(a)},isc.A.selectionEnabled=function(){return this.selection!=null},isc.A.canSelectRecord=function(a){return a!=null&&a[this.recordCanSelectProperty]!==false},isc.A.mouseDown=function(){if(!this.$29p()){var a=this.getEventRow(),
b=this.getEventColumn();if(a>=0&&b>=0){if(!this.cellIsEnabled(a,b))return false;this.$29u=a;this.$29v=b;this.$723=isc.EH.getX();this.$724=isc.EH.getY();var c=this.getCellRecord(a,b);return isc.EH.rightButtonDown()?this.$29x(c,a,b):this.$29w(c,a,b)}}},isc.A.rightMouseDown=function(){return this.mouseDown()},isc.A.$29w=function(a,b,c){var d;if(this.cellMouseDown&&this.cellMouseDown(a,b,c)==false)d=false;if(this.rowMouseDown&&this.rowMouseDown(a,b,c)==false)d=false;if(this.recordMouseDown&&this.recordMouseDown(b,
c)==false)d=false;if(d==false)return false;this.selectOnMouseDown(a,b,c)},isc.A.selectOnMouseDown=function(a,b,c){if(!this.selectionEnabled())return true;b>=0&&c>=0&&this.canSelectRecord(a)&&this.selection.selectOnMouseDown(this,b,c)},isc.A.$29x=function(a,b,c){this.canSelectOnRightMouse&&this.selectOnRightMouseDown(a,b,c)},isc.A.selectOnRightMouseDown=function(a,b,c){this.selectOnMouseDown(a,b,c)},isc.A.mouseUp=function(){if(!this.$29p()){var a=this.getEventRow(),b=this.getEventColumn();if(a>=0&&
b>=0)if(this.cellIsEnabled(a,b)){var c=this.getCellRecord(a,b),d;if(this.cellMouseUp&&this.cellMouseUp(c,a,b)==false)d=false;if(this.rowMouseUp&&this.rowMouseUp(c,a,b)==false)d=false;if(this.recordMouseUp&&this.recordMouseUp(a,b)==false)d=false;if(d==false)return d;this.selectOnMouseUp(c,a,b)}}},isc.A.selectOnMouseUp=function(a,b,c){if(!this.selectionEnabled())return true;b>=0&&c>=0&&this.selection.selectOnMouseUp(this,b,c)},isc.A.click=function(){if(!this.$29p()){var a=this.getEventRow(),b=this.getEventColumn();
return this.$29y(a,b)}},isc.A.$29y=function(a,b){this.$29z=this.$290=null;if(a!=this.$29u)if(isc.EH.getX()==this.$723)a=this.$29u;else return false;if(isc.EH.getY()==this.$724)b=this.$29v;if(a>=0&&b>=0){if(!this.cellIsEnabled(a,b))return false;this.$29z=a;var c=this.getCellRecord(a,b),d;this.$22n(c,a,b)||(d=false);if(this.rowClick&&this.rowClick(c,a,b)==false)d=false;this.$29u=null;return d}},isc.A.$22n=function(a,b,c){if(this.$29v!=c)this.$290=null;else{this.$290=c;this.$291=null;return!(this.cellClick&&
this.cellClick(a,b,c)==false)}},isc.A.doubleClick=function(){if(!this.$29p()){var a=this.getEventRow(),b=this.getEventColumn();if(a>=0&&b>=0){if(!this.cellIsEnabled(a,b))return false;if(a!=this.$29z)return this.$29y(a,b);var c=this.getCellRecord(a,b),d;if(b!=this.$290)d=this.$22n(c,a,b);else if(this.cellDoubleClick&&this.cellDoubleClick(c,a,b)==false)d=false;if(this.rowDoubleClick&&this.rowDoubleClick(c,a,b)==false)d=false;this.$29z=this.$290=this.$29u=this.$29v=null;if(d==false)return false}}},isc.A.dragMove=
function(){if(this.$29p()||!this.selectionEnabled()||!this.canDragSelect)return true;var a=this.getNearestRowToEvent(),b=this.getNearestColToEvent();this.selection.selectOnDragMove(this,a,b)},isc.A.dragStop=function(){this.fireSelectionUpdated()},isc.A.noSnapDragOffset=function(){return this.snapToCells},isc.A.getHSnapPosition=function(a,b){if(!this.snapToCells)return this.Super("getHSnapPosition",arguments);var c=this.ns.EH,d=b||this.snapHDirection,e=this.snapHGap?Math.floor(a/this.snapHGap):this.getEventColumn(a),
f=this.snapHGap?e*this.snapHGap:this.getColumnLeft(e),g=this.snapHGap?f+this.snapHGap:this.getColumnLeft(e)+this.getColumnSize(e),h=this.snapHGap?e+1:this.getEventColumn(g+1);h=h>=0?this.snapHGap?h*this.snapHGap:this.getColumnLeft(h):f;e=f+(this.snapHGap?this.snapHGap:this.getColumnSize(e))/2;if(this.snapInsideBorder){var i=isc.Element.$tl(this.baseStyle),j=isc.Element.$tm(this.baseStyle);f+=i;g-=j;h+=i}return c.dragOperation==c.DRAG_RESIZE?isc.EH.resizeEdge.contains("L")?f:g:d==isc.Canvas.BEFORE?
f:d==isc.Canvas.AFTER?h:a<=e?f:h},isc.A.getVSnapPosition=function(a,b){if(!this.snapToCells)return this.Super("getVSnapPosition",arguments);var c=this.ns.EH,d=b||this.snapVDirection,e=this.snapVGap?Math.floor(a/this.snapVGap):this.getEventRow(a),f=this.snapVGap?e*this.snapVGap:this.getRowTop(e),g=this.snapVGap?f+this.snapVGap:this.getRowTop(e)+this.getRowSize(e),h=this.snapVGap?e+1:this.getEventRow(g+1);h=h>=0?this.snapVGap?h*this.snapVGap:this.getRowTop(h):f;e=f+(this.snapVGap?this.snapVGap:this.getRowSize(e))/
2;if(this.snapInsideBorder){var i=isc.Element.$tn(this.baseStyle),j=isc.Element.$to(this.baseStyle);f+=i;g-=j;h+=i}return c.dragOperation==c.DRAG_RESIZE?isc.EH.resizeEdge.contains("T")?f:g:d==isc.Canvas.BEFORE?f:d==isc.Canvas.AFTER?h:a<=e?f:h},isc.A.getColumnAutoSize=function(a,b,c){var d=this.$292=this.$292||isc.Canvas.create({top:-1E3,width:1,height:1,autoDraw:false,_generated:true}),e=this.autoFit,f=this.wrapCells;this.autoFit=true;this.wrapCells=false;if(b==null||c==null){c=this.getDrawArea();
b=c[0];c=c[1]+1}d.contents=this.getTableHTML(a,b,c,true);this.autoFit=e;this.wrapCells=f;d.draw();var g;if(isc.isA.Array(a)){var h;b=d.getHandle().childNodes;for(a=0;a<b.length;a++)if(b[a].tagName.toLowerCase()=="table"){h=b[a];break}if(h&&h.rows[0]){h=h.rows[0].cells;g=[];for(a=0;a<h.length;a++)g[a]=h[a].clientWidth}}else g=d.getScrollWidth();d.clear();return g},isc.A.redraw=function(a,b,c,d){this.$29c();this.invokeSuper(isc.GridRenderer,"redraw",a,b,c,d);delete this.$50v},isc.A.modifyContent=function(){this.$28c||
this.$29d();if(this.$27y!=null){this.$80f=true;this.$270();this.$80f=null;var a=this.getTableElement();if(a)a.style.visibility="inherit"}if(this.$60s){if(this.$26b().sum()<this.getViewportHeight()){this.$515=0;a=isc.Element.get(this.getID()+"$284");var b=this.$515+(this.endSpace||0);if(a){a.style.display=b==0?"none":"";a.style.height=b+"px"}}a=this.getVisibleRows();a=Math.max(1,a[1]-a[0]);b=a/this.getTotalRows();var c=this.getViewportRatio(true);if(isc.isA.Number(b)&&(c==1&&b<1||c/b>1.25))this.$272=
Math.max(this.cellHeight,Math.round(this.getViewportHeight()/a))}},isc.A.setStartSpace=function(a){if(!(!isc.isA.Number(a)||a==this.startSpace)){var b=this.startSpace&&this.startSpace>a;this.startSpace=a;if(this.isDrawn()){a=a+this.$514;var c=isc.Element.get(this.getID()+"$28s");if(c){c.style.display=a==0?"none":"";if(this.$79b)c.style.height=a+"px";if(!b||!this.$79b)c.innerHTML=isc.Canvas.spacerHTML(1,a);this.$t6()}}}},isc.A.setEndSpace=function(a){if(!(!isc.isA.Number(a)||a==this.endSpace)){var b=
this.endSpace&&this.endSpace>a;this.endSpace=a;if(this.isDrawn()){a=a+this.$515;var c=isc.Element.get(this.getID()+"$284");if(c){c.style.display=a==0?"none":"";if(this.$79b)c.style.height=a+"px";if(!b||!this.$79b)c.innerHTML=isc.Canvas.spacerHTML(1,a);this.$t6()}}}},isc.A.clear=function(){this.Super("clear",arguments);this.$29j();delete this.$50v},isc.A.$29j=function(){this.$29f=this.$29g=null;delete this.$29o;delete this.$293;delete this.$8s;this.$250=false});isc.B._maxIndex=isc.C+173;isc.GridRenderer.$294=
{getCellRecord:"rowNum,colNum",getCellValue:"record,rowNum,colNum,gridBody",findRowNum:"record",findColNum:"record",getBaseStyle:"record,rowNum,colNum",getCellStyle:"record,rowNum,colNum",getCellCSSText:"record,rowNum,colNum",cellIsEnabled:"rowNum,colNum",getRowHeight:"record,rowNum",getRowSpan:"record,rowNum,colNum",cellOut:"record,rowNum,colNum",cellOver:"record,rowNum,colNum",rowOut:"record,rowNum,colNum",rowOver:"record,rowNum,colNum",cellMove:"record,rowNum,colNum",rowMove:"record,rowNum,colNum",
cellContextClick:"record,rowNum,colNum",rowContextClick:"record,rowNum,colNum",recordContextClick:"record,recordNum,fieldNum",cellMouseDown:"record,rowNum,colNum",rowMouseDown:"record,rowNum,colNum",recordMouseDown:"recordNum,fieldNum",cellMouseUp:"record,rowNum,colNum",rowMouseUp:"record,rowNum,colNum",recordMouseUp:"recordNum,fieldNum",selectOnMouseDown:"record,rowNum,colNum",selectOnRightMouseDown:"record,rowNum,colNum",selectOnMouseUp:"record,rowNum,colNum",cellClick:"record,rowNum,colNum",cellDoubleClick:"record,rowNum,colNum",
rowClick:"record,rowNum,colNum",rowDoubleClick:"record,rowNum,colNum",cellHover:"record,rowNum,colNum",rowHover:"record,rowNum,colNum",cellHoverHTML:"record,rowNum,colNum",getCellHoverComponent:"record,rowNum,colNum",selectionChanged:"record,state",cellSelectionChanged:"cellList",getRowElementId:"rowNum,physicalRowNum",getCellElementId:"rowNum,physicalRowNum,colNum,physicalColNum",shouldFixRowHeight:"record,rowNum",updateEmbeddedComponentZIndex:"component",updateEmbeddedComponentCoords:"component,record,rowNum,colNum"};
isc.GridRenderer.registerStringMethods(isc.GridRenderer.$294);isc.ClassFactory.defineClass("ListGrid","Canvas","DataBoundComponent");isc.addGlobal("ListViewer",isc.ListGrid);isc.defineClass("GridBody",isc.GridRenderer);isc.A=isc.GridBody.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.adjustOverflowWhileDirty=false;isc.A.expandEmptyMessageToMatchFields=true;isc.B.push(isc.A.adjustOverflow=function(a,b,c,d,e){if(!this.$80o){var f=this.grid;
if(f&&f.data&&f.data.getLength()>0&&isc.isA.ResultSet(f.data)&&!f.data.lengthIsKnown())return this.invokeSuper(isc.GridBody,"adjustOverflow",a,b,c,d,e);var g=this.autoFitData=="both",h=g,i=f&&f.frozenFields!=null;f=i&&f&&f.frozenBody==this;g||(g=this.autoFitData=="vertical");h||(h=this.autoFitData=="horizontal");if(h||g){var j,k,l,m,n,o;if(g){j=this.grid.getAutoFitMinBodyHeight();var s=m=this.getTotalRows();l=0;if(this.autoFitMaxRecords)s=Math.min(s,this.autoFitMaxRecords);if(s>0){n=this.$26b();var r=
this.$252,t=this.$253;if(this.$252==null)t=r=s;if(r>0){r=Math.min(r,s);for(var p=0;p<r;p++)l+=this.getRowHeight?this.getRowHeight(p):this.cellHeight}if(t<s-1)for(p=t+1;p<s;p++)l+=this.getRowHeight?this.getRowHeight(p):this.cellHeight;t=Math.min(t,s-1);for(p=0;p<=t-r;p++)l+=n[p];n=m>s;if((m=this.getAutoFitMaxHeight())&&l>m){l=m;n=true}}if(this.autoFitExtraRecords&&this.autoFitExtraRecords>0)l+=Math.round(this.autoFitExtraRecords*this.cellHeight)}else n=this.getScrollHeight()>this.getHeight();if(h&&
!f){k=this.grid.getInnerWidth();if(i){o=this.grid.getFrozenSlots(this.grid.$26a).sum();k-=o}var q=this.getColumnSizes();m=q.sum();if(this.autoFitMaxColumns){s=this.autoFitMaxColumns;if(i)s=Math.max(1,s-this.grid.frozenFields.length);if(s<q.length)q=q.slice(0,this.autoFitMaxColumns)}q=q.sum();if(this.autoFitMaxWidth){s=this.autoFitMaxWidth;if(i)s=Math.max(20,s-o);q=Math.min(s,q)}m=m>Math.max(k,q)}else m=this.getScrollWidth()>this.getWidth();if(g&&l!=null){l+=this.getVBorderPad()+this.getVMarginSize();
if(m){l+=this.getScrollbarSize();if((m=this.getAutoFitMaxHeight())&&l>m)l=m}if(l>j){j=l;this.$70u=true}else this.$70u&&delete this.$70u}if(h&&!f&&q!=null){q+=this.getHBorderPad()+this.getHMarginSize();if(n||this.alwaysShowVScrollbar){q+=this.getScrollbarSize();if(this.autoFitMaxWidth){s=this.autoFitMaxWidth;if(i)s=Math.max(20,s-o);q=Math.min(s,q)}}if(q>k){k=q;this.$70v=true}else this.$70v&&delete this.$70v}this.$80o=true;o=this.getDelta(this.$o5,j,this.getHeight());l=this.getDelta(this.$o6,k,this.getWidth());
delete this.$80o;if(o!=null||l!=null)this.resizeBy(l,o,null,null,true);if(l!=null||f&&h){l=this.grid;n=o=k-(n?l.getScrollbarSize():0);if(i&&l.headerLayout){if(f){n=this.getWidth()+l.body.getWidth();if(l.autoFitMaxWidth!=null&&n+l.getHBorderPad()+l.getHMarginSize()>l.autoFitMaxWidth)return l.body.adjustOverflow();n-=l.body.vscrollOn?l.getScrollbarSize():0}else n=o+l.frozenBody.getWidth();l.headerLayout.setWidth(n)}if(!f)(f=l.header)&&f.isDrawn()&&f.setWidth(o);if(l.sorter&&l.$313()&&!l.isRTL()){l.sorter.moveTo(n);
l.sorter.isVisible()||l.sorter.show()}else l.sorter&&l.sorter.setLeft(0-l.sorter.getWidth())}}g=!g&&this.$70u;h=!h&&this.$70v;if(g||h){delete this.$70u;delete this.$70v;g&&this.grid.getAutoFitMinBodyHeight();h&&(!i?this.grid.getInnerWidth():(this.grid.getInnerWidth(),this.grid.frozenBody.getWidth()));this.resizeTo(k,j);this.grid.$45m("autoFitData mode changed")}return this.invokeSuper(isc.GridBody,"adjustOverflow",a,b,c,d,e)}},isc.A.getAutoFitMaxHeight=function(){return this.grid?this.grid.getAutoFitMaxBodyHeight():
null},isc.A.resizeBy=function(a,b,c,d,e){if(!e)this.$1i=this.getWidth()+(a!=null?a:0);return this.invokeSuper(isc.GridBody,"resizeBy",a,b,c,d,e)},isc.A.cellContextClick=function(a,b,c){c=this.grid.getFieldNumFromLocal(c,this);return this.grid.$298(a,b,c)},isc.A.getInnerHTML=function(){this.grid.bodyDrawing(this);return this.Super("getInnerHTML",arguments)},isc.A.getTablePrintHTML=function(a){var b=a.startRow,c=a.endRow,d=c!=null?c-b:this.getTotalRows(),e=this.printMaxRows,f=a.printWidths,g=a.printProps,
h={target:this,methodName:"gotTablePrintHTML",printContext:a,printCallback:a.callback};a.callback=h;if(e<d){this.logDebug("get table print html - breaking HTML into chunks","printing");if(b==null)a.startRow=0;if(c==null)a.endRow=this.getTotalRows();this.getPrintHTMLChunk(a);return null}a=this.grid.$569(f,g);b=this.getTableHTML(null,b,c,null,h);this.grid.$57a(a);return b},isc.A.gotTablePrintHTML=function(a,b){var c=b.printCallback;c&&this.fireCallback(c,"HTML,callback",[a,c])},isc.A.getPrintHTMLChunk=
function(a){var b=this.grid.$569(a.printWidths);this.$80u=this.$568=true;var c=a.startRow,d=a.endRow,e=this.printMaxRows;this.currentPrintProperties=a.printProps;if(!a.html)a.html=[];d=a.chunkEndRow=Math.min(d,c+e);c=this.getTableHTML(null,c,d,null,{target:this,methodName:"gotPrintChunkHTML",printContext:a,printCallback:a.callback});this.grid.$57a(b);this.$568=false;if(c!=null){delete this.$80u;this.gotPrintChunkHTML(c,{printContext:a})}},isc.A.gotPrintChunkHTML=function(a,b){var c=b.printContext,
d=c.endRow,e=c.chunkEndRow,f=c.callback;c.html.add(a);if(e<d){c.startRow=e;return this.delayCall("getPrintHTMLChunk",[c],0)}if(f!=null){c=c.html.join(isc.emptyString);this.fireCallback(f,"HTML,callback",[c,f])}},isc.A.gotComponentPrintHTML=function(a,b){var c=this.grid.$569(b.context.asyncCallback.printContext.printWidths);if(this.$80u)this.$568=true;a=this.Super("gotComponentPrintHTML",arguments);this.$568&&delete this.$568;if(a!=null)delete this.$80u;else this.grid.$57a(c)},isc.A.getCellVAlign=
function(a,b,c,d){if(this.grid&&this.grid.getCellVAlign){b=this.grid.getFieldNumFromLocal(d,this);return this.grid.getCellVAlign(a,c,b)}},isc.A.getCellAlign=function(a,b,c,d){if(this.grid&&this.grid.getCellAlign!=null){b=this.grid.getFieldNumFromLocal(d,this);return this.grid.getCellAlign(a,c,b)}else return b.cellAlign||b.align},isc.A.$282=function(a,b,c){var d=this.grid;if(d.showNewRecordRow&&d.$299(a))return true;return isc.GridRenderer.$b4.$282.call(this,a,b,c)},isc.A.showSingleCellCheckboxField=
function(a){var b=this.grid;return b&&b.showSingleCellCheckboxField(a)},isc.A.$67p=function(a,b,c,d){if(b==this.$28c||!this.showSingleCellCheckboxField(a)||this.grid&&this.grid.frozenBody!=null&&this.grid.frozenBody!=this)return[c,d];return[Math.max(c,1),d]},isc.A.mouseWheel=function(){if(this.frozen&&this.grid!=null){this.grid.body.scrollTo(null,this.scrollTop+Math.round(this.ns.EH.lastEvent.wheelDelta*isc.Canvas.scrollWheelDelta));return false}return this.Super("mouseWheel",arguments)},isc.A.$80e=
function(){if(this.frozen&&this.grid)return this.grid.body.$80e();return this.Super("$80e",arguments)},isc.A.doneFastScrolling=function(){if(!this.frozen&&this.grid!=null&&this.grid.frozenBody!=null){var a=this.$50z;this.Super("doneFastScrolling",arguments);if(a){this.grid.frozenBody.$50v=true;this.grid.frozenBody.markForRedraw("Done fast scrolling on unfrozen body")}}},isc.A.scrollTo=function(a,b,c){if(isc.$cv)arguments.$cw=this;if(a!=null){var d=this.getScrollWidth()-this.getViewportWidth();a=Math.max(0,
Math.min(d,a))}if(b!=null){d=this.getScrollHeight()-this.getViewportHeight();b=Math.max(0,Math.min(d,b))}d=this.grid;this.$80h||d.bodyScrolled(a,b,this.frozen);this.invokeSuper(null,"scrollTo",a,b,c);!this.isDirty()&&d.$30a&&d.$286.itemsMoved()},isc.A.addEmbeddedComponent=function(a,b,c,d,e){this.invokeSuper(isc.GridBody,"addEmbeddedComponent",a,b,c,d,e);if(a.$57n!=null&&a.$57n!=-1){d=a.$57n;a.$81k=this.fields[d].name}return a},isc.A.updateHeightForEmbeddedComponents=function(a,b,c){if(a&&!a.$29a&&
this.grid.showRecordComponents&&this.grid.recordComponentHeight!=null){a=this.$667(a,b);if(a.allWithin&&a.extraHeight>0)c=Math.max(c,a.extraHeight);else c+=a.extraHeight;return c}return this.invokeSuper(isc.GridBody,"updateHeightForEmbeddedComponents",a,b,c)},isc.A.$667=function(a,b){var c=this.invokeSuper(isc.GridBody,"$667",a,b);if(this.grid.showRecordComponents&&this.grid.recordComponentHeight!=null)c.extraHeight=Math.max(c.extraHeight,this.grid.recordComponentHeight);return c},isc.A.$80g=function(a){if(a&&
this.grid&&this.grid.showRecordComponents&&this.grid.recordComponentHeight!=null)return true;return this.invokeSuper(isc.GridBody,"$80g",a)},isc.A.getAvgRowHeight=function(){if(this.grid)return this.grid.getAvgRowHeight(this);return this.Super("getAvgRowHeight",arguments)},isc.A.redraw=function(a,b,c,d){this.$58p=true;var e=this.grid,f=e.$286,g=e.$30a,h,i;e.$69l();if(!e.leaveScrollbarGap&&e.predictScrollbarGap&&this.overflow==isc.Canvas.AUTO){var j=this.vscrollOn,k=!e.isEmpty()&&e.getTotalRows()*
e.cellHeight>this.getInnerHeight();if(j!=k){delete this.$773;e.$45m("body redrawing with changed vertical scroll-state")}}if(g){this.logInfo("redraw with editors showing, editForm.hasFocus: "+f.hasFocus,"gridEdit");h=e.getEditCol();this.$516();i=this.$517()}if(this.$773!=null){delete this.$773;e.$45m(this.$773)}j=this.getDrawArea();k=this.grid;var l=this.$74k;if(!l)l=this.$74k=[0,0,0,0];k=this.grid;var m=k.getRecord(j[0]),n=k.getRecord(j[1]);if(m&&m!=Array.LOADING&&n&&n!=Array.LOADING&&!l.equals(j))if(!this.frozen){k.$74l(l[0],
l[1],l[2],l[3],this);this.$74k=j}this.frozen&&(a==this.$81l||a=="scrolled")||k.updateRecordComponents();this.invokeSuper(null,"redraw",a,b,c,d);delete this.$58p;if(g){i!=null&&i.length>0&&f.removeItems(i);e.$30b(null,true,this);e.updateEditRow(e.getEditRow());if(f.hasFocus||this.$519&&isc.EH.getFocusCanvas()==null)this.$518(h);else delete this.$519}else f!=null&&e.$30b(null,null,this)},isc.A.setHandleDisabled=function(){var a=this.grid;this.isDrawn()&&a&&a.$30a&&this.markForRedraw("Grid body disabled while editing");
return this.Super("setHandleDisabled",arguments)},isc.A.$517=function(){var a=this.grid,b=a.getEditForm(),c=[],d=b.getItems();if(!a.editByCell){var e=a.getEditRow(),f=a.getRecord(e),g=a.getEditFormItemFieldWidths(f);d=b.getItems();for(var h=d.getProperty(this.fieldIdProperty),i=a.getDrawnFields(),j=i.getProperty(this.fieldIdProperty),k=d.length==i.length,l=false,m=0;m<d.length;m++)if(j.indexOf(h[m])==-1){l=true;c.add(d[m])}else{d[m].width=g[d[m].colNum];d[m].redrawing()}if(!k||l){d=a.getEditedRecord(e,
0);for(m=0;m<i.length;m++)if(!h.contains(j[m])){k=a.fields.indexOf(i[m]);k=a.getEditItem(i[m],f,d,e,k,g[k]);b.addItem(k)}}}return c},isc.A.$516=function(){var a=this.grid,b=a.getEditForm(),c=a.getEditCol();if(b.hasFocus){var d=b.getFocusSubItem();if(d){for(d.updateValue();d.parentItem!=null;)d=d.parentItem;if(!a.canEditCell(d.rowNum,d.colNum)||c!=d.colNum)b.blur();else{if(d.hasFocus){d.rememberSelection();this.$519=[d.$17r,d.$17s]}b.$106()}}}b.$10u=true},isc.A.$518=function(a){var b=this.grid,c=b.getEditForm();
a=c.getItem(b.getEditorName(b.getEditRow(),a));if(a!=null&&a.isDrawn()){var d=b.body.getScrollLeft(),e=b.body.getScrollTop(),f=b.body.getViewportWidth();b=b.body.getViewportHeight();var g=a.getRect();if(!(g[0]<d||g[1]<e||g[0]+g[2]>d+f||g[1]+g[3]>e+b)){c.$11b(a);this.$519&&this.$519[0]!=null&&a.setSelectionRange(this.$519[0],this.$519[1]);delete this.$519}}},isc.A.isDirty=function(a,b,c){return this.invokeSuper(null,"isDirty",a,b,c)||this.grid.isDirty()},isc.A.cellMove=function(a,b,c){if((a=isc.EH.lastEvent?
isc.EH.lastEvent.nativeTarget:null)&&a.getAttribute!=null&&a.getAttribute("isErrorIcon")=="true"){if(this.grid.$79y!=null){a=this.grid.$79y[1];if(this.grid.$79y[0]!=b||a!=c)this.grid.handleErrorIconOut()}this.grid.$79y==null&&this.grid.$79z(b,c)}else this.grid.$79y!=null&&this.grid.$790()},isc.A.shouldShowRollOver=function(a){if(!this.grid.showRollOver||this.$28j)return false;var b=this.grid;if(b.$30a&&!b.editByCell&&a==b.$285)return false;return true},isc.A.updateRollOver=function(a,b,c){var d=this.grid;
if(d.showRollOverCanvas)c||d.updateRollOverCanvas(a,b,!(this.lastOverRow==a&&this.lastOverCol==b));this.setRowStyle(a,null,this.useCellRollOvers?b:null);if(c=this==d.body?d.frozenBody:d.body){c.lastOverRow=this.lastOverRow;c.lastOverCol=this.lastOverCol;c.setRowStyle(a,null,this.useCellRollOvers?b:null)}},isc.A.selectOnMouseDown=function(a,b,c){var d=true;if(this.grid.selectionAppearance=="checkbox")if(this.grid.frozenFields!=null&&this.grid.frozenBody!=this||this.grid.getCheckboxFieldPosition()!=
c)d=false;d&&this.invokeSuper(isc.GridBody,"selectOnMouseDown",a,b,c)},isc.A.selectOnMouseUp=function(a,b,c){var d=this.grid.getCheckboxFieldPosition(),e=this.grid.selectionAppearance;if(e!="checkbox"||e=="checkbox"&&d==c)this.invokeSuper(isc.GridBody,"selectOnMouseUp",a,b,c)},isc.A.$29h=function(a,b,c,d,e,f,g,h){this.invokeSuper(isc.GridBody,"$29h",a,b,c,d,e,f,g,h);if((f=this.grid)&&f.getEditRow()==b){d=f.getFieldName(f.getFieldNumFromLocal(c,this));if((d=(f=f.getEditForm())?f.getItem(d):null)&&
d.gridCellStyleChanged){if(e==null)e=this.getCellStyle(a,b,c);d.gridCellStyleChanged(a,b,c,e)}}},isc.A.getHoverTarget=function(){return this.grid},isc.A.keyPress=function(a,b){return this.grid.bodyKeyPress(a,b)},isc.A.$lf=function(a){var b=this.Super("$lf",arguments);if(a&&this.grid.isEditable()){var c=this.grid,d=isc.EH.lastEvent;if(c.editOnFocus&&c.isEditable()&&c.getEditRow()==null&&!(d.target==this&&(d.eventType==isc.EH.MOUSE_DOWN||d.eventType==isc.EH.MOUSE_UP||d.eventType==isc.EH.CLICK||d.eventType==
isc.EH.DOUBLE_CLICK)))if(c.$30c)delete c.$30c;else{d=c.findNextEditCell(0,0,true,true);d!=null&&c.handleEditCellEvent(d[0],d[1],isc.ListGrid.FOCUS)}}return b},isc.A.updateRowSelection=function(a){var b=this.grid;if(b){b.showSelectionCanvas&&b.updateSelectionCanvas();b.$67j||this.invokeSuper(isc.GridBody,"updateRowSelection",a);if(b.getCurrentCheckboxField()!=null){var c=b.getCheckboxFieldPosition();b&&!b.$67j&&b.refreshCell(a,c);a=isc.isAn.Array(b.data)||isc.isA.ResultSet(b.data)&&b.data.allMatchingRowsCached();
c=b.getSelection()||[];if(a)c.length==b.data.getLength()?b.$63m(true):b.$63m(false)}else if(b.getTreeFieldNum&&b.selectionAppearance=="checkbox"){c=b.getTreeFieldNum();b.$67j||b.refreshCell(a,c)}}},isc.A.$29s=function(a,b,c,d){var e=this.grid;e&&e.showSelectionCanvas&&e.updateSelectionCanvas();return this.invokeSuper(isc.GridBody,"$29s",a,b,c,d)},isc.A.shouldAnimateEmbeddedComponent=function(a){var b=this.grid;if(a==b.selectionCanvas)return b.animateSelection;if(a==b.selectionUnderCanvas)return b.animateSelectionUnder;
if(a==b.rollOverCanvas)return b.animateRollOver;if(a==b.rollUnderCanvas)return b.animateRollUnder;return false},isc.A.$80d=function(a,b,c){this.Super("$80d",arguments);this.grid.$80d(this,a,b,c)},isc.A.draw=function(a,b,c,d){var e=this.grid;if(e.getEditRow()!=null){var f=e.getEditRow(),g=e.getRecord(f),h=e.getEditCol(),i=e.$286;f=e.getEditRowItems(g,f,h,e.editByCell);h=i.getItems();g=h==null||f.length!=h.length;if(!g){h=h.getProperty("name");for(var j=0;j<f.length;j++)if(!h.contains(f[j].name)){g=
true;break}}if(g){this.logDebug("calling setItems on form from body draw","gridEdit");i.setItems(f)}else this.logDebug("Skipping setItems() on form from body draw","gridEdit");i.$10u=true}this.invokeSuper(null,"draw",a,b,c,d);e.$286&&e.$30b(null,null,this);e.updateEditRow(e.getEditRow());if(e.$30d!=null){a=isc.isAn.Array(e.$30d)?e.$30d[0]:e.$30d;b=isc.isAn.Array(e.$30d)?e.$30d[1]||0:0;e.scrollCellIntoView(a,b);delete e.$30d}this.grid.updateRecordComponents()},isc.A.layoutChildren=function(a,b,c,d){this.invokeSuper(null,
"layoutChildren",a,b,c,d);if(!(!this.isDrawn()||this.grid.frozenFields&&!this.grid.bodyLayout.isDrawn()))if(a=="scrolling state changed")if(this.$28i==null){this.grid.layoutChildren("body scroll changed");delete this.$30e}else this.$30e=true},isc.A.$28p=function(){this.Super("$28p",arguments);if(this.$30e){this.grid.layoutChildren("body scroll changed during animation");delete this.$30e}},isc.A.moved=function(a,b,c,d){this.invokeSuper(null,"moved",a,b,c,d);a=this.grid;a.$30a&&a.$286.itemsMoved()},
isc.A.parentMoved=function(a,b,c,d){this.invokeSuper(null,"parentMoved",a,b,c,d);a=this.grid;a.$30a&&a.$286.itemsMoved()},isc.A.setVisibility=function(a,b,c,d){this.invokeSuper(null,"setVisibility",a,b,c,d);a=this.grid;a.$30a&&a.$286.itemsVisibilityChanged()},isc.A.parentVisibilityChanged=function(a,b,c,d){this.invokeSuper(null,"parentVisibilityChanged",a,b,c,d);a=this.grid;a.$30a&&a.$286.itemsVisibilityChanged()},isc.A.clear=function(){var a=this.grid;a.$69l();this.Super("clear",arguments);if(a.$30a){a.$30b(null,
null,this);a.$286.itemsVisibilityChanged()}},isc.A.$vy=function(a){return this.grid.$vy(a)},isc.A.$vv=function(){},isc.A.zIndexChanged=function(){this.Super("zIndexChanged",arguments);var a=this.grid;a&&a.$30a&&a.$286.itemsZIndexChanged()},isc.A.parentZIndexChanged=function(a,b,c,d){this.invokeSuper(null,"zIndexChanged",a,b,c,d);a=this.grid;a.$30a&&a.$286.itemsZIndexChanged()},isc.A.redrawFormItem=function(a,b){var c=this.grid;if(c&&a.form==c.$286){var d=c.getEditRow(),e=c.getColNum(a.getFieldName());
c.refreshCell(d,e,false,true)}else return this.markForRedraw("Form Item Redraw "+(b?b:isc.emptyString))},isc.A.startRowAnimation=function(a,b,c,d,e,f,g,h,i){this.finishRowAnimation();var j=i&&this.$34y!=null,k=this.grid;if(j){k.$34v=true;k.data.openFolder(this.$34y);k.$34v=null}this.Super("startRowAnimation",arguments);if(j){k.$34v=true;k.data.closeFolder(this.$34y);k.$34v=null}delete this.$34y});isc.B._maxIndex=isc.C+57;isc.A=isc.ListGrid;isc.A.CORNER="corner";isc.A.FIELD="field";isc.A.BEFORE="before";
isc.A.AFTER="after";isc.A.OVER="over";isc.A.CLICK_OUTSIDE="click_outside";isc.A.CLICK="click";isc.A.DOUBLE_CLICK="doubleClick";isc.A.ENTER_KEYPRESS="enter";isc.A.ESCAPE_KEYPRESS="escape";isc.A.UP_ARROW_KEYPRESS="arrow_up";isc.A.DOWN_ARROW_KEYPRESS="arrow_down";isc.A.LEFT_ARROW_KEYPRESS="arrow_left";isc.A.RIGHT_ARROW_KEYPRESS="arrow_right";isc.A.TAB_KEYPRESS="tab";isc.A.SHIFT_TAB_KEYPRESS="shift_tab";isc.A.EDIT_FIELD_CHANGE="field_change";isc.A.EDIT_ROW_CHANGE="row_change";isc.A.PROGRAMMATIC="programmatic";
isc.A.FOCUS="focus";isc.A.$295=["selection","selectionType","canSelectCells","canDragSelect","canSelectOnRightMouse","recordCanSelectProperty","canDrag","canAcceptDrop","canDrop","autoFit","wrapCells","cellSpacing","cellPadding","cellHeight","enforceVClipping","autoFitData","autoFitMaxRecords","autoFitMaxWidth","autoFitMaxColumns","autoFitMaxHeight","autoFitExtraRecords","showAllColumns","drawAllMaxCells","drawAheadRatio","quickDrawAheadRatio","scrollRedrawDelay","printMaxRows","animateRowsMaxTime",
"fastCellUpdates","showRollOver","useCellRollOvers","canHover","showHover","hoverDelay","hoverWidth","hoverHeight","hoverAlign","hoverVAlign","hoverStyle","hoverOpacity","hoverMoveWithMouse","hoverByCell","keepHoverActive","cellHoverOutset","showEmptyMessage","emptyMessageStyle","emptyMessageTableStyle","showOfflineMessage","offlineMessageStyle","singleCellValueProperty","isSeparatorProperty","accessKey","canFocus","_useNativeTabIndex","tableStyle","baseStyle","recordCustomStyleProperty","showSelectedStyle",
"fullRowSpans","showFocusOutline"];isc.A.$296=["getCellStyleName","getCellStyleIndex","getRowTop","getRowPageTop","getRowSize","getDrawnRowHeight","getCellPageRect","getVisibleRows","getDrawnRows"];isc.A.$297=["getTotalRows","isEmpty","cellIsEnabled","willAcceptDrop","scrolled","getTableElementId","getRowElementId","getCellElementId","shouldFixRowHeight","getEmptyMessage","getCanHover","stopHover","updateEmbeddedComponentZIndex"];isc.A=isc.ListGrid;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=
isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.makeBodyMethods=function(a){var b=this.$cf;if(b==null)b=this.$cf=[,"this.grid.$81e = this;var returnVal = this.grid.",,"(",,");this.grid.$81e=null;return returnVal;"];for(var c={},d=0;d<a.length;d++){var e=a[d],f=isc.GridRenderer.getArgString(e);if(isc.contains(f,"colNum"))b[0]="if (this.fields[colNum]) colNum = this.fields[colNum].masterIndex;";else if(isc.isAn.emptyString(f)){f="body";b[0]="body = this;"}else b[0]=null;b[2]=e;b[4]=f;var g=
b.join(isc.emptyString);c[e]=new Function(f,g)}return c},isc.A.classInit=function(){this.addMethods(isc.ClassFactory.makePassthroughMethods(this.$296,"body"));var a={},b=isc.getKeys(isc.GridRenderer.$294);a=isc.ListGrid.makeBodyMethods(b);isc.addProperties(a,isc.ListGrid.makeBodyMethods(this.$297));this.$30f=a;a={};for(var c=[,"var $81e = this.$81e || this.body;if($81e.__orig_",,")return $81e.__orig_",,"(",,")"],d=isc.GridRenderer.getPrototype(),e=0;e<b.length;e++){var f=b[e],g=isc.GridRenderer.getArgString(f);
if(isc.ListGrid.getInstanceProperty(f)==null){c[0]=isc.contains(g,"colNum")?"if (colNum != null && colNum >= 0) colNum = this.getLocalFieldNum(colNum);":null;c[2]=c[4]=f;c[6]=g;a[f]=new Function(g,c.join(isc.emptyString))}d["__orig_"+f]=d[f]}this.$30g=a;this.addMethods(a)});isc.B._maxIndex=isc.C+2;isc.A=isc.ListGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.styleName="listGrid";isc.A.useCellRecords=false;isc.A.recordEnabledProperty=
"enabled";isc.A.canExpandRecordProperty="canExpand";isc.A.animateFolders=true;isc.A.animateFolderTime=100;isc.A.animateFolderSpeed=3E3;isc.A.animateRowsMaxTime=1E3;isc.A.autoFetchDisplayMap=true;isc.A.showDetailFields=true;isc.A.groupStartOpen="first";isc.A.canCollapseGroup=true;isc.A.groupNodeStyle="groupNode";isc.A.groupIcon="[SKINIMG]/TreeGrid/opener.gif";isc.A.groupIconSize=16;isc.A.groupIndentSize=20;isc.A.groupLeadingIndent=10;isc.A.canGroupBy=true;isc.A.groupByMaxRecords=1E3;isc.A.nullGroupTitle=
"-none-";isc.A.valueIconSize=16;isc.A.valueIconLeftPadding=2;isc.A.valueIconRightPadding=2;isc.A.imageSize=16;isc.A.headerSpanVAlign="center";isc.A.showTreeColumnPicker=true;isc.A.fetchDelay=300;isc.A.uniqueMatch=true;isc.A.overflow=isc.Canvas.HIDDEN;isc.A.backgroundColor="white";isc.A.minHeight=50;isc.A.defaultWidth=200;isc.A.drawAllMaxCells=250;isc.A.drawAheadRatio=1.3;isc.A.quickDrawAheadRatio=1;isc.A.scrollRedrawDelay=75;isc.A.dataFetchDelay=300;isc.A.bodyConstructor="GridBody";isc.A.bodyOverflow=
isc.Canvas.AUTO;isc.A.bodyBackgroundColor="white";isc.A.allowMismatchedHeaderBodyBorder=true;isc.A.emptyCellValue="&nbsp;";isc.A.cellHeight=20;isc.A.normalCellHeight=20;isc.A.fixedRecordHeights=true;isc.A.fixedFieldWidths=true;isc.A.autoFitMaxRecords=50;isc.A.autoFitMaxColumns=50;isc.A.canAutoFitFields=true;isc.A.headerAutoFitEvent="doubleClick";isc.A.autoFitFieldsFillViewport=true;isc.A.autoFitWidthApproach="value";isc.A.autoFitIconFields="title";isc.A.leaveScrollbarGap=true;isc.A.resizeFieldsForScrollbar=
true;isc.A.cellSpacing=0;isc.A.cellPadding=2;isc.A.$68j={datetime:true,dateTime:true};isc.A.timeFormatter="toShortPaddedTime";isc.A.$30h=["<a href='",,"' target='",,"' onclick='if(window.",,") return ",,".$30i(event,",,",",,");'>",,"</a>"];isc.A.$30j="\\'";isc.A.$30k="_blank";isc.A.linkTextProperty="linkText";isc.A.fastCellUpdates=isc.Browser.isIE;isc.A.normalBaseStyle="cell";isc.A.tallBaseStyle="cell";isc.A.editFailedBaseStyle=null;isc.A.editFailedCSSText="color:red;border:1px solid red;";isc.A.editPendingBaseStyle=
null;isc.A.editPendingCSSText="color:#0066CC;";isc.A.recordCustomStyleProperty="customStyle";isc.A.recordBaseStyleProperty="_baseStyle";isc.A.shrinkForFreeze=false;isc.A.alternateRecordFrequency=1;isc.A.recordCSSTextProperty="cssText";isc.A.showSelectedStyle=true;isc.A.generateClickOnSpace=true;isc.A.generateDoubleClickOnEnter=true;isc.A.arrowKeyAction="select";isc.A.recordComponentPoolingMode="viewport";isc.A.showRollOver=!isc.Browser.isTouch;isc.A.backgroundComponentDefaults={snapTo:"TL",autoDraw:false,
opacity:"50%"};isc.A.showHover=true;isc.A.cellHoverOutset=5;isc.A.hoverStyle="gridHover";isc.A.selectionAppearance="rowStyle";isc.A.recordCanSelectProperty="canSelect";isc.A.showEmptyMessage=true;isc.A.emptyMessage="No items to show.";isc.A.emptyMessageStyle="emptyMessage";isc.A.loadingDataMessage="${loadingImage}&nbsp;Loading data...";isc.A.loadingDataMessageStyle="loadingDataMessage";isc.A.loadingMessage="&nbsp;";isc.A.singleCellValueProperty="singleCellValue";isc.A.isSeparatorProperty="isSeparator";
isc.A.filterEditorDefaults={shouldPrint:false};isc.A.filterEditorHeight=22;isc.A.autoFetchTextMatchStyle="substring";isc.A.canEditNew=false;isc.A.recordEditProperty="_canEdit";isc.A.editValuesTestedProperty="$30l";isc.A.autoValidate=true;isc.A.removeIcon="[SKIN]/actions/remove.png";isc.A.removeIconSize=16;isc.A.animateRemoveRecord=true;isc.A.animateRemoveTime=100;isc.A.animateRemoveSpeed=200;isc.A.removeFieldTitle="[Remove record]";isc.A.removeFieldDefaults={type:"icon",width:21,showHeaderContextMenuButton:false,
showDefaultContextMenu:false,showTitle:false,canEdit:false,canSort:false,canGroupBy:false,canFilter:false,recordClick:function(a,b,c,d,e){a.getAllEditRows().contains(c)&&a.discardEdits(c,e);a.$609(c,b);return false}};isc.A.autoSaveEdits=true;isc.A.showErrorIcons=true;isc.A.errorIconHeight=16;isc.A.errorIconWidth=16;isc.A.errorIconSrc="[SKIN]/validation_error_icon.png";isc.A.cancelEditingConfirmationMessage="Cancelling this edit will clear unsaved edit values for this record. Continue?";isc.A.confirmDiscardEdits=
true;isc.A.confirmDiscardEditsMessage="This action will discard all unsaved edited values for this list.";isc.A.discardEditsSaveButtonTitle="Save";isc.A.newRecordRowMessage="-- Add New Row --";isc.A.enterKeyEditAction="done";isc.A.escapeKeyEditAction="cancel";isc.A.editEvent=isc.EH.DOUBLE_CLICK;isc.A.selectOnEdit=true;isc.A.enumCriteriaAsInitialValues=true;isc.A.autoSelectEditors=true;isc.A.editFormDefaults={canSelectText:true,autoDraw:false,errorOrientation:"left",showErrorText:false,showErrorStyle:false,
itemKeyPress:function(a,b,c){return this.grid.editorKeyPress(a,b,c)}};isc.A.longTextEditorThreshold=255;isc.A.longTextEditorType="PopUpTextAreaItem";isc.A.headerHeight=22;isc.A.minFieldWidth=15;isc.A.showHeader=true;isc.A.headerBackgroundColor="#CCCCCC";isc.A.headerDefaults={instantRelayout:true,enforcePolicy:false,itemClick:function(a,b){this.Super("itemClick",arguments);this.grid.$666(b,this)},itemDoubleClick:function(a,b){this.Super("itemDoubleClick",arguments);this.grid.$774(b,this)},showContextMenu:function(){return this.grid.headerBarContextClick(this)},
backgroundRepeat:isc.Canvas.NO_REPEAT,shouldPrint:false};isc.A.headerButtonDefaults={getCurrentCursor:function(){var a=this.parentElement?this.parentElement.grid:null;if(a&&this.masterIndex!=null){var b=a.getField(this.masterIndex);a=a.canSort!=false&&a.$66c(b)!=false?isc.Canvas.HAND:isc.Canvas.DEFAULT}else a=this.getClass().getPrototype().cursor;this.cursor=a;return this.Super("getCurrentCursor",arguments)},dragScrollType:"parentsOnly",minWidth:20};isc.A.sorterConstructor=isc.Button;isc.A.sorterDefaults=
{_redrawWithParent:false,getTitle:function(){return this.parentElement.getSortArrowImage()},click:function(){return this.parentElement.sorterClick()},showContextMenu:function(){return this.parentElement.sorterContextClick()},canFocus:false};isc.A.canSort=true;isc.A.canUnsort=false;isc.A.invalidateCacheOnUnsort=false;isc.A.sortDirection=Array.ASCENDING;isc.A.canPickFields=true;isc.A.canPickOmittedFields=false;isc.A.openRecordEditorContextMenuItemTitle="Edit";isc.A.dismissEmbeddedComponentContextMenuItemTitle=
"Dismiss";isc.A.deleteRecordContextMenuItemTitle="Delete";isc.A.canOpenRecordDetailGrid=true;isc.A.canOpenRecordEditor=true;isc.A.recordEditorSaveButtonTitle="Save";isc.A.recordEditorCancelButtonTitle="Cancel";isc.A.headerMenuButtonIcon="[SKIN]/ListGrid/headerMenuButton_icon.gif";isc.A.headerMenuButtonIconWidth=7;isc.A.headerMenuButtonIconHeight=7;isc.A.headerMenuButtonWidth=16;isc.A.headerMenuButtonHeight="100%";isc.A.canDragRecordsOut=false;isc.A.canReorderFields=true;isc.A.canResizeFields=true;
isc.A.dragAppearance=isc.EH.TRACKER;isc.A.dragTrackerMode="title";isc.A.resizeFieldsInRealTime=isc.Browser.isIE&&isc.Browser.isWin||isc.Browser.isFirefox&&isc.Browser.geckoVersion>=20080529||isc.Browser.isSafari&&isc.Browser.safariVersion>=500;isc.A.embeddedComponentIndent=25;isc.A.nestedGridDefaults={height:150};isc.A.skinImgDir="images/ListGrid/";isc.A.sortAscendingImage={src:"[SKIN]sort_ascending.gif",width:7,height:7};isc.A.sortDescendingImage={src:"[SKIN]sort_descending.gif",width:7,height:7};
isc.A.trackerImage={src:"[SKIN]tracker.gif",width:16,height:16};isc.A.booleanTrueImage=null;isc.A.booleanFalseImage=null;isc.A.booleanPartialImage=null;isc.A.booleanImageWidth=16;isc.A.booleanImageHeight=16;isc.A.mozBodyOutlineColor="white";isc.A.mozBodyNoHeaderOutlineColor="red";isc.A.rowNumberStyle="specialCol";isc.A.rowNumberStart=1;isc.A.rowNumberFieldDefaults={name:"$74y",canEdit:false,canFilter:false,canGroupBy:false,canSort:false,canExport:false,canHide:false,canReorder:false,canDragResize:false,
showAlternateStyle:false,$74z:true,showHeaderContextMenuButton:false,showDefaultContextMenu:false,keyboardFiresRecordClick:false,formatCellValue:function(a,b,c,d,e){return e.isGrouped?e.rowNumberStart+e.getGroupedRecordIndex(b):this.rowNumberStart+c},autoFreeze:true};isc.A.$740=30;isc.A.canExpandMultipleRecords=true;isc.A.maxExpandedRecordsPrompt="This grid is limited to ${count} simultaneously expanded records.  Please collapse some expanded records and retry.";isc.A.expansionFieldDefaults={name:"$72v",
canEdit:false,canFilter:false,canGroupBy:false,canSort:false,canExport:false,canHide:false,canReorder:false,canDragResize:false,$72w:true,showHeaderContextMenuButton:false,showDefaultContextMenu:false,keyboardFiresRecordClick:false,cellAlign:"center",recordClick:function(a,b,c,d){if(a.canExpandRecords&&d.$72w)if(a.$811(b,c))b.expanded?a.collapseRecord(b):a.expandRecord(b)},formatCellValue:function(a,b,c,d,e){b=e.getCellRecord(c,d);if(!e.$811(b,c))return null;return e.getValueIconHTML(b.expanded?e.expansionFieldTrueImage:
e.expansionFieldFalseImage,this)},autoFreeze:true};isc.A.expansionFieldTrueImage="[SKINIMG]/ListGrid/group_opened.gif";isc.A.expansionFieldFalseImage="[SKINIMG]/ListGrid/group_opening.gif";isc.A.expansionFieldExtraWidth=16;isc.A.$74a=0;isc.A.expansionDetailFieldDefaults={_constructor:isc.HTMLFlow,autoDraw:false,width:"100%",height:"100%"};isc.A.expansionDetailsDefaults={_constructor:isc.DetailViewer,autoDraw:false,width:"100%"};isc.A.expansionRelatedDefaults={_constructor:isc.ListGrid,autoDraw:false,
width:"100%",autoFitData:"vertical",autoFitMaxRecords:4};isc.A.expansionEditorDefaults={_constructor:"DynamicForm",autoDraw:false,numCols:4,width:"100%"};isc.A.expansionDetailRelatedDefaults={_constructor:isc.HLayout,autoDraw:false,width:"100%",height:"100%"};isc.A.expansionLayoutDefaults={_constructor:isc.VLayout,autoDraw:false,width:"100%",height:10,overflow:"visible"};isc.A.recordDetailDSProperty="detailDS";isc.A.expansionCanEdit=false;isc.B.push(isc.A.shouldAnimateFolder=function(a){if(!this.animateFolders||
!this.isDrawn())return false;a=this.data.isFolder(a)?this.data.getOpenList(a):null;if(a==null||a.length==0)return false;return a.length<=this.getAnimateFolderMaxRows()},isc.A.getAnimateFolderMaxRows=function(){var a=this.animateFolderMaxRows;if(a==null){a=this.body?this.body.$27x():[0,0];a=Math.min(75,(a[1]-a[0])*3)}return a},isc.A.$30m=function(a,b,c){if(isc.isA.Date(a)){var d=b&&c.$68j[b.type];b=c.$45i(b);if(d)return a.toShortDateTime(b,true);return a.toShortDate(b)}return a},isc.A.$45i=function(a){var b;
if(a)b=a.displayFormat||a.dateFormatter||a.formatter;b||(b=a&&this.$68j[a.type]&&this.datetimeFormatter?this.datetimeFormatter:this.dateFormatter);return b},isc.A.$45j=function(a){var b;if(a)b=a.inputFormat;if(!b)b=this.dateInputFormat;return b},isc.A.$30n=function(a,b,c){if(isc.isA.Number(a))return a.toFormattedString(b.numberFormatter||b.formatter||c.numberFormatter);return a},isc.A.$30o=function(a){var b;if(a)b=a.displayFormat||a.timeFormatter||a.formatter;if(!b)b=this.timeFormatter;return b},
isc.A.$30p=function(a,b,c){var d=a;if(isc.isA.String(d))d=isc.Time.parseInput(d,true);if(d!=null){a=c.$30o(b);return isc.Time.toTime(d,a)}return a},isc.A.$30q=function(a,b,c,d,e){if(isc.isA.String(a))return a;if(d==null)return null;var f=b.name;a=d[f+"_filename"];if(b.type=="imageFile"&&b.showFileInline==true){e=f+"$68c";if(d[e])a=d[e];else{a=isc.Canvas.getFieldImageDimensions(b,d);b=c.getDataSource().streamFile(d,b.name);a.width=a.width||c.imageSize;a.height=a.height||c.imageSize;a=d[e]=isc.Canvas.imgHTML(b,
a.width,a.height)}}else{b.showFileInline==true&&this.logWarn("$30q(): Unsupported field-type for showFileInline: "+b.type);if(a==null||isc.isA.emptyString(a))return this.emptyCellValue;d=isc.Canvas.imgHTML("[SKIN]actions/view.png",16,16,null,"style='cursor:"+isc.Canvas.HAND+"' onclick='"+c.getID()+".viewRow("+e+")'");c=isc.Canvas.imgHTML("[SKIN]actions/download.png",16,16,null,"style='cursor:"+isc.Canvas.HAND+"' onclick='"+c.getID()+".downloadRow("+e+")'");a=d+"&nbsp;"+c+"&nbsp;"+a}return a},isc.A.$30r=
function(a,b,c,d,e,f){if(a==null||isc.is.emptyString(a))return a;var g=b.target?b.target.replaceAll(c.$ob,c.$30j):c.$30k;d=d&&d[c.linkTextProperty]?d[c.linkTextProperty]:b[c.linkTextProperty]||a;a=a;if(b.linkURLPrefix)a=b.linkURLPrefix+a;if(b.linkURLSuffix)a+=b.linkURLSuffix;a=a.replaceAll(c.$ob,c.$30j);if(g=="javascript")a="javascript:void";b=c.$30h;b[1]=a;b[3]=g;c=c.getID();b[5]=c;b[7]=c;b[9]=e;b[11]=f;b[13]=d;return b.join(isc.emptyString)},isc.A.$30i=function(a,b,c){var d=this.destroyed||!this.isDrawn()||
!this.isVisible()||isc.EH.targetIsMasked(this.body)||!this.recordIsEnabled(b,c),e=this.getRecord(b),f=this.getField(c);if(a.target=="javascript"||f.target=="javascript"){d=true;this.cellClick(e,b,c)}if(d){isc.Browser.isIE||a.preventDefault();return false}return true},isc.A.$30s=function(a,b,c,d){if(a==null||a==isc.emptyString)return isc.emptyString;d=isc.Canvas.getFieldImageDimensions(b,d);d.width=d.width||c.imageSize;d.height=d.height||c.imageSize;a=a;c=b.imageURLPrefix||b.baseURL||b.imgDir;if(b.imageURLSuffix!=
null)a+=b.imageURLSuffix;return isc.Canvas.imgHTML(a,d.width,d.height,null,b.extraStuff,c,b.activeAreaHTML)},isc.A.$59e=function(a,b,c){if(isc.isA.RecordEditor(c)&&c.isAFilterEditor()&&b.canFilter==false)return null;if(b.$59f)return b.$59f;b.$59f=isc.Canvas.imgHTML(b.cellIcon||b.icon,b.iconWidth||b.iconSize||c.imageSize,b.iconHeight||b.iconSize||c.imageSize);return b.$59f},isc.A.setFastCellUpdates=function(a){if(this.body!=null){this.body.setFastCellUpdates(a);a=this.body.fastCellUpdates}this.frozenBody!=
null&&this.frozenBody.setFastCellUpdates(a);this.fastCellUpdates=a},isc.A.editorKeyDown=function(a,b){if(isc.Browser.isMoz&&a&&a.multiple&&isc.isA.NativeSelectItem(a)&&b=="Enter")a.$695=a.getValue();if(isc.Browser.isSafari&&isc.Browser.safariVersion>=525.13&&b=="Tab")return false},isc.A.editorKeyPress=function(a,b){var c=isc.EH,d,e;if(b=="Tab"){d=c.shiftKeyDown();if(this.ns.isA.ContainerItem(a)||a.icons!=null&&a.icons.length>0&&!this.ns.isA.PopUpTextAreaItem(a))if(!this.$11s(a,d))return false;e=d?
isc.ListGrid.SHIFT_TAB_KEYPRESS:isc.ListGrid.TAB_KEYPRESS;d=false}else if(b=="Enter"){if(a.getFocusIconIndex()!=null)return;if((isc.isA.PopUpTextAreaItem(a)||isc.isA.TextAreaItem(a))&&isc.EH.altKeyDown()==false)return d;if(a.$695!=null){d=a.$695;delete a.$695;a.setValue(d)}e=isc.ListGrid.ENTER_KEYPRESS;d=false}else if(b=="Escape"){e=isc.ListGrid.ESCAPE_KEYPRESS;d=false}else if(b=="Arrow_Up"){if((c=isc.isA.PopUpTextAreaItem(a)||isc.isA.TextAreaItem(a))&&!isc.EH.altKeyDown())return d;if(isc.isA.SelectItem(a)&&
!isc.EH.ctrlKeyDown())return d;if(isc.EH.ctrlKeyDown()&&isc.EH.shiftKeyDown())return d;e=isc.ListGrid.UP_ARROW_KEYPRESS;d=false}else if(b=="Arrow_Down"){if((c=isc.isA.PopUpTextAreaItem(a)||isc.isA.TextAreaItem(a))&&!isc.EH.altKeyDown())return d;if(isc.isA.SelectItem(a)&&!isc.EH.ctrlKeyDown())return d;if(isc.EH.ctrlKeyDown&&isc.EH.shiftKeyDown())return d;e=isc.ListGrid.DOWN_ARROW_KEYPRESS;d=false}else if(this.moveEditorOnArrow&&this.$51k)if(b=="Arrow_Left"){e=isc.ListGrid.LEFT_ARROW_KEYPRESS;d=false}else if(b==
"Arrow_Right"){e=isc.ListGrid.RIGHT_ARROW_KEYPRESS;d=false}if(e!=null){isc.EH.clickMaskUp()&&isc.EH.setMaskedFocusCanvas(null,isc.EH.clickMaskRegistry.last());this.cellEditEnd(e)}return d},isc.A.$11s=function(a,b){if(!a)return true;return!a.$11s(!b)},isc.A.$30t=function(a){var b=this.form.grid,c,d,e,f;if(b.$30a){c=b.$285;if(b.editByCell)d=b.$30u;else{c=b.$285;e=this.getFieldName();d=b.fields.findIndex(b.fieldIdProperty,e);if(!a)if(f=b.$30u!=d){b.setNewEditCell(c,d);b.cellEditEnd(isc.ListGrid.EDIT_FIELD_CHANGE)}}}this.Super("elementFocus",
arguments);if(b.$30a){f=this.$30v;e=this.$30w;delete this.$30v;delete this.$30w;var g=isc.addProperties({},b.getCellRecord(c,d),b.$300(c,d));if(e){e=b.getFieldName(d);b.$30x(this,c,d,g[e])}f&&b.$30z(this,c,g)}else b.logWarn("suppressing editorEnter handlers on focus as listGrid.$30a is null")},isc.A.getParentGroupIndex=function(a){if(!this.isGrouped)return 0;var b=this.groupTree;a=b.getParent(a);b=b.getChildren(b.getParent(a));for(var c=0,d=0;d<b.length;d++)if(b[d].groupValue==a.groupValue){c=d;break}return c},
isc.A.getGroupedRecordIndex=function(a){if(!this.isGrouped)return-1;for(var b=this.groupTree,c=b.getParent(a),d=b.getChildren(b.getParent(c)),e=0,f=0;f<d.length;f++){var g=d[f];if(g.groupValue==c.groupValue)for(var h=b.getChildren(g),i=0;i<h.length;i++)if(this.objectsAreEqual(h[i],a))return e+i;e+=b.getChildren(g).length}return e},isc.A.objectsAreEqual=function(a,b){for(var c in a)if(a[c]!=b[c])return false;return true},isc.A.getRowNumberField=function(){var a=this,b={width:this.$740,baseStyle:this.rowNumberStyle,
rowNumberStart:this.rowNumberStart,getAutoFreezePosition:function(){return a.getRowNumberFieldPosition()}};isc.addProperties(b,this.rowNumberFieldDefaults,this.rowNumberFieldProperties);b.title="&nbsp;";return b},isc.A.getCurrentRowNumberField=function(){var a=this.getFields().find(this.fieldIdProperty,"$74y");return!a?null:isc.isAn.Array(a)?a[0]:a},isc.A.isRowNumberField=function(a){return!a||!a.$74z?false:true},isc.A.getRowNumberFieldPosition=function(){if(!this.showRowNumbers)return-1;return 0},
isc.A.shouldShowRowNumberField=function(){return this.showRowNumbers==true},isc.A.shouldShowExpansionField=function(){return this.canExpandRecords==true},isc.A.getExpansionField=function(){var a=this,b={width:this.$72y()+this.expansionFieldExtraWidth,getAutoFreezePosition:function(){return a.getExpansionFieldPosition()}};b.valueIconWidth=this.$72y();b.valueIconHeight=this.$72z();isc.addProperties(b,this.expansionFieldDefaults,this.expansionFieldProperties);b.title="&nbsp;";return b},isc.A.getCurrentExpansionField=
function(){var a=this.getFields().find(this.fieldIdProperty,"$72v");return!a?null:isc.isAn.Array(a)?a[0]:a},isc.A.$72y=function(){return this.expansionFieldImageWidth||this.booleanImageWidth||(isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("valueIconWidth"):null)},isc.A.$72z=function(){return this.expansionFieldImageHeight||this.booleanImageHeight||(isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("valueIconHeight"):null)},isc.A.isExpansionField=function(a){return!a||!a.$72w?false:true},
isc.A.getExpansionFieldPosition=function(){if(!this.canExpandRecords)return-1;return this.isRTL()?this.showRowNumbers?this.fields.length-1:this.fields.length:this.showRowNumbers?1:0},isc.A.$811=function(a,b){if(a==null)a=this.getRecord(b);if(a==null)return false;return this.canExpandRecord(a,b)},isc.A.canExpandRecord=function(a){return a[this.canExpandRecordProperty]==false?false:this.canExpandRecords!=false},isc.A.expandRecord=function(a){var b,c=this.getRecordIndex(a);if(!a.expanded){if(this.onExpandRecord!=
null&&!this.onExpandRecord(a))return;if(this.canExpandMultipleRecords){if(this.maxExpandedRecords)if(this.$74a==this.maxExpandedRecords){a=this.maxExpandedRecordsPrompt.evalDynamicString(this,{count:this.maxExpandedRecords});isc.say(a);return}}else{this.$74b&&this.collapseRecord(this.$74b);this.$74b=a}b=this.getExpansionComponent(a);b=this.createAutoChild("expansionLayout",{layoutLeftMargin:this.embeddedComponentIndent,members:[b]});b.isExpansionComponent=true;this.addEmbeddedComponent(b,a,this.data.indexOf(a));
a.expanded=true;a.hasExpansionComponent=true;this.$74a++;if(!this.canExpandMultipleRecords)this.$74b=a}this.delayCall("markForRedraw");this.refreshRow(c)},isc.A.collapseRecord=function(a){if(a.expanded){if(this.onCollapseRecord!=null&&!this.onCollapseRecord(a))return;this.$74b&&this.$74b==a&&delete this.$74b;var b=a.$29a.find("isExpansionComponent",true);this.removeEmbeddedComponent(a,b?b:this.frozenFields?this.frozenFields.length:0);this.$74a--}a.expanded=false;this.$74c();this.markForRedraw()},
isc.A.getExpansionComponent=function(a){for(var b=this.getFields(),c=this.dataSource?isc.getValues(this.getDataSource().getFields()):b,d=[],e,f=0;f<c.length;f++){var g=c.get(f);if(this.dataSource)b.find("name",g.name)||d.add(g);else this.isExpansionField(g)||d.add(g)}if(this.expansionMode=="detailField"){e=this.createAutoChild("expansionDetailField",{contents:a[this.detailField]});e=isc.VLayout.create({width:"100%",height:"100%",members:[e]})}else if(this.expansionMode=="details"){e=this.createAutoChild("expansionDetails",
{dataSource:this.dataSource,fields:d});e.setData(a)}else if(this.expansionMode=="related"){e=this.createAutoChild("expansionRelated",{dataSource:this.getRelatedDataSource(a),canExpandRecords:this.childExpansionMode?true:false,expansionMode:this.childExpansionMode,canEdit:this.expansionCanEdit});if(this.expansionCanEdit)e.autoSaveEdits=true;e.fetchRelatedData(a,this.dataSource)}else if(this.expansionMode=="editor"){e=this.createAutoChild("expansionEditor",{dataSource:this.dataSource,fields:d});e.editRecord(a)}else if(this.expansionMode==
"detailRelated"){b=this.createAutoChild("expansionDetails",{dataSource:this.dataSource,fields:d});b.setData(a);a=this.createAutoChild("expansionRelated",{dataSource:this.getRelatedDataSource(a),canExpandRecords:this.childExpansionMode?true:false,expansionMode:this.childExpansionMode,canEdit:this.expansionCanEdit,height:"100%"});e=this.createAutoChild("expansionDetailRelated",{members:[b,a]})}return e},isc.A.getRelatedDataSource=function(a){return isc.DS.getDataSource(a[this.recordDetailDSProperty])||
isc.DS.get(this.detailDS)});isc.B._maxIndex=isc.C+39;isc.A=isc.ListGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.warnOnReusedFields=true;isc.A.autoFitExpandLengthThreshold=10;isc.A.$81l="dataChanged";isc.A.$70q=0;isc.A.$g2="boolean";isc.A.$604="set fields";isc.A.$12c="checkbox";isc.A.checkboxFieldDefaults={name:"_checkboxField",canEdit:false,canFilter:false,canGroupBy:false,canSort:false,canExport:false,canHide:false,canReorder:false,
canDragResize:false,$63f:true,type:"boolean",showDefaultContextMenu:false,showHeaderContextMenuButton:false,hoverHTML:"return null;",autoFreeze:true};isc.A.$63g=15;isc.A.$812="Getting listGrid fieldWidths. ";isc.A.iconPadding=2;isc.A.$71t="summary";isc.A.$302="<HR>";isc.A.$303=["style='margin-left:",,"px;margin-right:",,"px;'"];isc.A.$g2="boolean";isc.A.$gx="text";isc.A.$54y={" ":true,"\n":true,"\r":true,"\r\n":true};isc.A.$54t="&nbsp;";isc.A.$687={text:true,TextItem:true,select:true,SelectItem:true,
combobox:true,ComboBoxItem:true,comboBox:true,checkbox:true,CheckboxItem:true,date:true,DateItem:true,spinner:true,SpinnerItem:true,popUpTextArea:true,PopUpTextAreaItem:true};isc.A.$18r="false";isc.A.$18q="true";isc.A.$81m="$81n";isc.A.$81o=0;isc.A.$57m="expand";isc.A.printAutoFit=true;isc.A.printWrapCells=true;isc.A.printHeaderStyle="printHeader";isc.A.printMaxRows=100;isc.A.defaultCellHoverComponentWidth=300;isc.A.defaultCellHoverComponentHeight=150;isc.A.$20s="Arrow_Up";isc.A.$20t="Arrow_Down";
isc.A.$304="Space";isc.A.$10j="Enter";isc.A.$51g="f2";isc.A.$20w="Escape";isc.A.$51h="Backspace";isc.A.$51i="Delete";isc.A.$51l="keyPress";isc.A.$27r="none";isc.A.$305="focus";isc.A.$12b="select";isc.A.$306="activate";isc.A.$kn=false;isc.A.showGridSummary=false;isc.A.invalidSummaryValue="&nbsp;";isc.A.includeInSummaryProperty="includeInSummary";isc.A.gridSummaryRecordProperty="isGridSummary";isc.A.groupSummaryRecordProperty="isGroupSummary";isc.A.$71t="summary";isc.A.recordSummaryBaseStyle="recordSummaryCell";
isc.A.summaryRowConstructor="ListGrid";isc.A.summaryRowDefaults={showRollOver:false};isc.A.summaryRowHeight=20;isc.A.summaryRowStyle="gridSummaryCell";isc.A.$18q="true";isc.A.updateEditorItemsInPlace=true;isc.A.$307={time:true,TimeItem:true};isc.A.$g5="time";isc.A.$308={date:true,DateItem:true};isc.A.$68k={datetime:true,dateTime:true,DatetimeItem:true,DateTimeItem:true};isc.A.$g4="date";isc.A.$68l="datetime";isc.A.$309={popUpTextArea:true,PopUpTextAreaItem:true};isc.A.$31a={checkbox:true,CheckboxItem:true};
isc.A.$g2="boolean";isc.A.$12c="checkbox";isc.A.$12i="CycleItem";isc.A.$31b={select:true,SelectItem:true};isc.A.$45k=["change","changed","defaultDynamicValue"];isc.A.$31c=["change","changed","defaultDynamicValue","keyPress","click","showIf","enableIf"];isc.A.$31d={};isc.A.$81p="column remap";isc.A.$31e=0;isc.A.$31f="rowNum,colNum,editCompletionEvent,success";isc.A.$60m="toggle frozen fields";isc.A.$81q="rebuilding body";isc.A.selectionCanvasDefaults={opacity:20};isc.A.selectionUnderCanvasDefaults=
{};isc.A.rollOverCanvasDefaults={snapTo:"TL",width:"100%",height:"100%"};isc.A.rollUnderCanvasDefaults={snapTo:"TL",width:"100%",height:"100%"};isc.A.$616="header height changed";isc.A.$617="header visibility changed";isc.A.headerMenuButtonDefaults={snapTo:"R",canFocus:false,resizeFrom:"R",title:null,iconSpacing:0,click:function(){this.parentElement.grid.headerMenuButtonClick()},mouseOut:function(){var a=isc.EH.getTarget();if(!a||!this.parentElement.contains(a))this.hide();this.Super("mouseOut",arguments)}};
isc.A.predictScrollbarGap=true;isc.A.sortFieldAscendingText="Sort Ascending";isc.A.sortFieldDescendingText="Sort Descending";isc.A.clearSortFieldText="Clear Sort";isc.A.clearAllSortingText="Clear All Sorting";isc.A.clearFilterText="Clear Filter";isc.A.configureSortText="Configure Sort";isc.A.autoFitFieldText="Auto Fit";isc.A.autoFitAllText="Auto Fit All Columns";isc.A.fieldVisibilitySubmenuTitle="Columns";isc.A.freezeFieldText="Freeze ${title}";isc.A.unfreezeFieldText="Unfreeze ${title}";isc.A.groupByText=
"Group by ${title}";isc.A.ungroupText="Ungroup";isc.A.headerContextMenuConstructor="Menu";isc.A.headerContextMenuDefaults={hide:function(){this.Super("hide",arguments);this.grid&&this.grid.headerMenuButton&&this.grid.headerMenuButton.isVisible()&&this.grid.headerMenuButton.hide()},doSort:function(a,b){b=="unsort"?this.grid.toggleSort(this.grid.getFieldName(a),b):this.grid.sort(a,b)},canHover:true,showHover:true,cellHoverHTML:function(a){return a.prompt},groupField:function(a){var b=this.grid;if(a.targetField&&
a.targetField.groupingMode||!b.groupByField||!b.groupByField.contains(a.fieldName))b.groupBy(a.fieldName)},ungroup:function(){this.grid.ungroup()}};isc.A.$31g="sort";isc.A.canMultiSort=true;isc.A.sortNumeralStyle="sortNumeral";isc.A.$73y="setSort";isc.A.chartConstructor="FacetChart";isc.A.chartType="Column";isc.A.groupIdField="groupId";isc.A.groupParentIdField="groupParentId";isc.A.retainOpenStateOnRegroup=true;isc.A.groupIconPadding=5;isc.A.showGroupSummary=false;isc.A.groupSummaryStyle="gridSummaryCell";
isc.A.$31h={canDragSelect:true,canDragSelectText:true,canDragRecordsOut:true,canReorderRecords:true,canAcceptDroppedRecords:true};isc.A.$45l={bodyBackgroundColor:"backgroundColor",bodyStyleName:"styleName",fixedRecordHeights:"fixedRowHeights",fixedFieldWidths:"fixedColumnWidths",alternateRecordStyles:"alternateRowStyles",alternateRecordFrequency:"alternateRowFrequency",showAllRecords:"showAllRows",canSelectText:"canDragSelectText"};isc.B.push(isc.A.initWidget=function(){if(this.showRecordComponents){delete this.showRecordComponents;
this.setShowRecordComponents(true)}if(this.fields==null&&this.defaultFields!=null)this.fields=isc.shallowClone(this.defaultFields);else if(this.warnOnReusedFields&&this.fields!=null)if(this.fields.$696)this.logWarn("ListGrid initialized with this.fields attribute set to an array which is already being displayed in another ListGrid instance. To reuse standard field configuration across multiple ListGrids, use listGrid.defaultFields rather than assigning directly to listGrid.fields.");else{var a;if(isc.isAn.Array(this.fields))a=
this.fields.findIndex("$697",true)!=-1;else if(isc.isAn.Object(this.fields))for(var b in this.fields){var c=this.fields[b];if(c&&c.$697){a=true;break}}a&&this.logWarn("ListGrid initialized with this.fields attribute set to an array containing fields which are already being displayed in another ListGrid instance. To reuse standard field configuration across multiple ListGrids, use listGrid.defaultFields rather than assigning directly to listGrid.fields.")}if(this.canEditNew)this.listEndEditAction=
this.rowEndEditAction="next";if(this.alwaysShowEditors){this.editByCell=false;this.selectionType="none";this.selectOnEdit=false;if(this.canGroup!=false){this.logInfo("grouping functionality is not supported when alwaysShowEditors is true. Explicitly disabling this.canGroup","inactiveEditorHTML");this.canGroup=false}if(this.modalEditing){this.logInfo("modalEditing is not supported when alwaysShowEditors is true. Explicitly setting this.modalEditing to fales","inactiveEditorHTML");this.modalEditing=
false}this.editEvent="click";if(!this.isEditable()){this.logInfo("alwaysShowEditors has been set for this grid but canEdit is unset and no fields are explicitly marked as editable. Defaulting this.canEdit to true. Note that to avoid this override developers can explicitly specify canEdit at the grid or field level","inactiveEditorHTML");this.canEdit=true}}if(this.canExpandRecords||this.fixedRecordHeights==false&&this.virtualScrolling==null){this.fixedRecordHeights=false;this.virtualScrolling=true}if(this.canAddFormulaFields&&
isc.FormulaBuilder==null){this.logInfo("Required modules for adding formula fields not present - setting canAddFormulaFields to false.");this.canAddFormulaFields=false}if(this.canAddSummaryFields&&isc.SummaryBuilder==null){this.logInfo("Required modules for adding summary fields not present - setting canAddSummaryFields to false.");this.canAddSummaryFields=false}if(this.loadingMessage==null||this.loadingMessage==isc.emptyString)this.loadingMessage="&nbsp;";if(this.autoFitData!=null){this.$58o=this.overflow;
this.setOverflow("visible")}if(this.canCollapseGroup==false)this.groupStartOpen="all";this.$765=this.sortDirection;this.setData(this.data?null:this.getDefaultData());this.setSelectionAppearance(this.selectionAppearance,true);this.$31i()},isc.A.getDefaultData=function(){return[]},isc.A.$31i=function(){this.canDrag=!this.canDragSelectText&&(this.canDrag||this.canDragRecordsOut||this.canReorderRecords||this.canDragSelect);this.canDrop=this.canDrop||this.canDragRecordsOut||this.canReorderRecords;this.canAcceptDrop=
this.canAcceptDrop||this.canAcceptDroppedRecords||this.canReorderRecords},isc.A.getEmptyMessage=function(){if(isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown()){if(isc.Offline&&isc.Offline.isOffline())return this.offlineMessage;return this.loadingDataMessage.evalDynamicString(this,{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)})}if(this.isOffline())return this.offlineMessage;return this.emptyMessage.evalDynamicString(this,
{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)})},isc.A.isEmpty=function(){if(!this.data)return true;if(!this.fields||this.fields.length==0)return true;if(isc.ResultSet&&isc.isA.ResultSet(this.data))if(this.data.isPaged()){if(!this.data.isEmpty())return false;var a=this.getAllEditRows();if(a&&a.length>0)for(var b=0;b<a.length;b++)if(a[b]>=0)return false;return true}else return this.data.lengthIsKnown()?this.getTotalRows()<=0:true;else return this.getTotalRows()<=
0},isc.A.setData=function(a){if(this.data!=a){this.preserveEditsOnSetData||this.discardAllEdits();this.clearLastHilite();if(this.data){this.$31j(this.data);this.data.$31k&&isc.isA.Function(this.data.destroy)&&this.data.destroy()}if(a)this.data=a;if(this.data){this.$31m(this.data);this.regroup(true);if(!this.selection||this.data!=this.selection.data)this.createSelectionModel();this.preserveEditsOnSetData&&this.$31n();!(isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown())&&this.$686()&&
!this.$30a&&this.startEditing();if(this.data.setSort){if(this.getDataSource()&&this.canMultiSort!=false)this.canMultiSort=this.getDataSource().canMultiSort}else this.canMultiSort=false;(a=this.getSort())&&this.setSort(a);if(isc.ResultSet&&isc.isA.ResultSet(this.data)&&this.body&&this.body.overflow=="visible")this.body.showAllRows=false;this.summaryRow&&this.showGridSummary&&this.summaryRow.recalculateSummaries();this.$74a=0;!this.canExpandMultipleRecords&&this.$74b&&delete this.$74b;if(this.$75p){this.setSelectedState(this.$75p);
delete this.$75p}this.updateFieldWidthsForAutoFitValue("setData called.");this.$25a("setData")}}},isc.A.getAutoFitExpandField=function(){if(!this.autoFitFieldsFillViewport)return null;if(this.autoFitExpandField!=null){var a=this.getField(this.autoFitExpandField);if(a!=null&&this.fields&&this.fields.contains(a)&&(!this.frozenFields||!this.frozenFields.contains(a)))return a}var b=[],c=[];if(this.fields)for(var d=0;d<this.fields.length;d++){a=this.fields[d];if(!a.showValueIconOnly&&(a.type=="text"||
a.type==null))if(!a.frozen){b.add(a);b[d]!=null&&b[d].length!=null&&c.add(b[d])}}if(c.length>0){c.sortByProperty("length",Array.DESCENDING);if(c.last().length>=this.autoFitExpandLengthThreshold||c.length==b.length)return c[0]}if(b.length>0){d=0;for(a=b[d];a!=null&&a.length!=null&&a.length<this.autoFitExpandLengthThreshold;){d++;a=b[d]}return a}return null},isc.A.updateFieldWidthsForAutoFitValue=function(a){if(!(!this.body||this.body.$773))for(var b=this.fields||[],c=0;c<b.length;c++)if(this.shouldAutoFitField(b[c])){var d=
this.getAutoFitWidthApproach(b[c]);if(d=="value"||d=="both"){this.fields.$775=false;this.body.$773="Updating field widths for field auto-fit"+(a?":"+a:".");break}}},isc.A.invalidateCache=function(){if(this.getCheckboxFieldPosition()!=-1){this.deselectAllRecords();this.$63m(false)}this.body&&this.body.$74k&&delete this.body.$74k;return this.Super("invalidateCache",arguments)},isc.A.$66c=function(a){var b=a.canSort==false?false:true;if(!a.canSortClientOnly||isc.isAn.Array(this.data))return b;if(isc.isA.ResultSet(this.data))return!this.data.lengthIsKnown()||
!this.data.canSortOnClient()?false:b;return b},isc.A.$766=function(a){a=a.sortDirection;return a!=null?Array.shouldSortAscending(a)?"ascending":"descending":this.sortDirection!=null?Array.shouldSortAscending(this.sortDirection)?"ascending":"descending":"ascending"},isc.A.createSelectionModel=function(){this.invokeSuper(isc.ListGrid,"createSelectionModel",arguments);if(isc.isA.Canvas(this.body)){this.body.setSelection(this.selection);this.frozenBody&&this.frozenBody.setSelection(this.selection)}},
isc.A.destroySelectionModel=function(){this.body&&this.body.clearSelection();this.frozenBody&&this.frozenBody.clearSelection();return this.Super("destroySelectionModel",arguments)},isc.A.setSelectionType=function(a){this.selectionType=a;if(this.body)this.body.selectionType=a},isc.A.setSelectionAppearance=function(a,b){if(!(this.selectionAppearance==a&&!b)){this.selectionAppearance=a;if(b&&this.selectionType==null)this.selectionType=a=="checkbox"?isc.Selection.SIMPLE:isc.Selection.MULTIPLE;if(this.completeFields!=
null){for(var c=[],d=0;d<this.completeFields.length;d++){var e=this.completeFields[d];this.isCheckboxField(e)||c.add(e)}this.setFields(c)}}},isc.A.setBodyOverflow=function(a){this.bodyOverflow=a;this.body&&this.body.setOverflow(this.bodyOverflow)},isc.A.setBodyStyleName=function(a){this.bodyStyleName=a;if(this.body&&(!this.alternateBodyStyleName||!this.alternateRecordStyles))this.body.setStyleName(a)},isc.A.setAlternateBodyStyleName=function(a){this.alternateBodyStyleName=a;if(this.body&&this.alternateRecordStyles)this.body.setStyleName(a||
this.bodyStyleName)},isc.A.setAlternateRecordStyles=function(a){if(this.alternateRecordStyles!=a){this.alternateRecordStyles=a;if(this.body&&this.alternateBodyStyleName!=null)a?this.body.setStyleName(this.alternateBodyStyleName):this.body.setStyleName(this.bodyStyleName)}},isc.A.hasInherentHeight=function(a,b,c,d){if(this.inherentHeight!=null)return this.inherentHeight;if(this.autoFitData==isc.Canvas.VERTICAL||this.autoFitData==isc.Canvas.BOTH)return true;return this.invokeSuper(isc.ListGrid,"hasInherentHeight",
a,b,c,d)},isc.A.hasInherentWidth=function(a,b,c,d){if(this.inherentWidth!=null)return this.inherentWidth;if(this.autoFitData==isc.Canvas.HORIZONTAL||this.autoFitData==isc.Canvas.BOTH)return true;return this.invokeSuper(isc.ListGrid,"hasInherentWidth",a,b,c,d)},isc.A.setAutoFitData=function(a){this.autoFitData=a;if(this.$60v&&(a=="both"||a=="horizontal"||a=="vertical")){delete this.$60v;delete this.canFreezeFields}if(a==null&&this.$58o)this.setOverflow(this.$58o);else if(this.overflow!="visible"){this.$58o=
this.overflow;this.setOverflow("visible")}if(this.body){this.body.autoFitData=this.autoFitData;this.body.adjustOverflow()}},isc.A.setAutoFitExtraRecords=function(a){this.autoFitExtraRecords=a;if(this.body){this.body.autoFitExtraRecords=a;this.body.adjustOverflow()}},isc.A.setAutoFitMaxRecords=function(a){this.autoFitMaxRecords=a;if(this.body){this.body.autoFitMaxRecords=a;this.body.adjustOverflow()}},isc.A.setAutoFitMaxHeight=function(a){this.autoFitMaxHeight=a;this.body&&this.body.adjustOverflow()},
isc.A.getAutoFitMaxBodyHeight=function(){if(this.autoFitMaxHeight==null)return null;var a=this.getVBorderPad();if(this.showHeader)a+=this.headerHeight;if(this.showFilterEditor)a+=this.filterEditorHeight;return this.autoFitMaxHeight-a},isc.A.getAutoFitMinBodyHeight=function(){var a=this.getHeight(),b=this.getVBorderPad();if(this.showHeader)b+=this.headerHeight;if(this.showFilterEditor)b+=this.filterEditorHeight;return a-b},isc.A.setAutoFitMaxColumns=function(a){this.autoFitMaxColumns=a;if(this.body){this.body.autoFitMaxColumns=
a;this.body.adjustOverflow()}},isc.A.setAutoFitMaxWidth=function(a){this.autoFitMaxWidth=a;if(this.body){this.body.autoFitMaxWidth=a;this.body.adjustOverflow()}},isc.A.autoFitField=function(a,b){var c=this.getField(a),d=this.getFieldNum(c);if(!(c==null||d==-1)){var e=this.getFieldAutoFitWidth(c);if(!(e==null||e==this.$26a[d])){var f=this.shouldAutoFitField(c);this.resizeField(a,e,!f);if(f)c.$776=this.$26a[d];b&&this.scrollColumnIntoView(d,false);return e}}},isc.A.autoFitFields=function(a){if(a==null)a=
this.fields;for(var b=0;b<a.length;b++)this.autoFitField(a[b])},isc.A.shouldAutoFitField=function(a){if(a.autoFitWidth!=null)return a.autoFitWidth;return this.autoFitFieldWidths},isc.A.getFieldAutoFitWidth=function(a,b){if(this.body!=null){var c=this.getAutoFitWidthApproach(a),d=c!="value",e=c!="title",f;c=this.getColNum(a);if(d){d=this.getFieldHeaderButton(c);if(d!=null){var g=d.getWidth();d.getOverflow();d.setWidth(b||this.minFieldWidth||1);d.setOverflow("visible");d.label&&d.label.isDirty()&&d.label.redraw();
d.parentElement.reflow();f=d.getVisibleWidth();d.setWidth(g);f=f}}if(e){c=(e=this.getAutoFitValueWidths([this.fields[c]]))?e[c]:null;if(c!=null&&(f==null||f<c))f=c}if(f!=null){if(b==null||b<this.minFieldWidth)b=this.minFieldWidth;if(b!=null&&f<b)f=b}return f}},isc.A.setAutoFitWidth=function(a,b){var c=this.getField(a);if(c!=null)if(c.autoFitWidth!=b)(c.autoFitWidth=b)&&this.autoFitField(c)},isc.A.$25a=function(a){this.bodies?this.bodies.map("markForRedraw",a):this.markForRedraw(a)},isc.A.redraw=function(a,
b,c,d){if(this.body)if(this.body.$30e){this.$45m("scrollbar change during animation");delete this.body.$30e}this.invokeSuper(isc.ListGrid,"redraw",a,b,c,d)},isc.A.$31m=function(a){this.isObserving(a,"dataChanged")||this.observe(a,"dataChanged","observer.dataChanged("+(isc.ResultSet&&isc.isA.ResultSet(a)?"arguments[0],arguments[1],arguments[2],arguments[3],arguments[4])":")"));if(!this.isObserving(a,"dataArrived"))if(isc.ResultSet&&isc.isA.ResultSet(a))this.observe(a,"dataArrived","observer.$66d(arguments[0],arguments[1])");
else isc.ResultTree&&isc.isA.ResultTree(a)&&this.observe(a,"dataArrived","observer.$66d(arguments[0])");isc.isA.Tree(a)&&this.observe(a,"changeDataVisibility","observer.$34u()")},isc.A.groupTreeChanged=function(){if(!this.$67i){this.$31o||this.$31n();var a=this.getTotalRows()-1;if(this.body){this.body.lastOverRow>a&&delete this.body.lastOverRow;this.body.$31p>a&&delete this.body.$31p}this.$31q>a&&delete this.$31q;this.hilites&&this.applyHilites();this.$50w||this.$25a(this.$81l)}},isc.A.$606=function(a){this.observe(a,
"dataChanged","observer.groupTreeChanged()");this.observe(a,"changeDataVisibility","observer.$34u()")},isc.A.$34u=function(){if(this.$34v)this.$31n();else{this.body&&this.body.finishRowAnimation();this.$31n();this.$25a("folderToggled")}},isc.A.toggleFolder=function(a){if(this.data.isOpen(a))this.closeFolder(a);else{this.openFolder(a);this.frozenBody&&this.frozenBody.markForRedraw()}},isc.A.openFolder=function(a){if(this.folderOpened!=null){this.convertToMethod("folderOpened");if(this.folderOpened(a)==
false)return false}this.animateFolders?this.animateOpen(a):this.data.openFolder(a)},isc.A.animateOpen=function(a){var b=this.data;if(!b.isOpen(a)){this.$34v=true;b.openFolder(a);delete this.$34v;var c=b.getParent(a);if(!(c&&!b.isOpen(c)))if(b.getLoadState(a)!=isc.Tree.LOADED)this.$34z=a;else this.$340(a)}},isc.A.closeFolder=function(a){if(this.folderClosed!=null){this.convertToMethod("folderClosed");if(this.folderClosed(a)==false)return false}this.getEditRow()!=null&&this.data.isDescendantOf(this.getRecord(this.getEditRow()),
a)&&this.endEditing();this.shouldAnimateFolder(a)?this.animateClose(a):this.data.closeFolder(a)},isc.A.animateClose=function(a){if(this.data.isOpen(a)){var b=this.data.getParent(a);if(b&&!this.data.isOpen(b))return this.closeFolder(a);var c=this.data;b=c.indexOf(a);c=c.getOpenList(a).getLength()-1;this.startRowAnimation(false,b+1,b+c+1,{target:this,methodName:"redraw"},this.animateFolderSpeed,this.animateFolderTime,this.animateFolderEffect,true);this.$34v=true;this.data.closeFolder(a);delete this.$34v;
if(this.body&&this.body.$279!=null)this.body.$34y=a}},isc.A.$340=function(a){if(this.shouldAnimateFolder(a)){var b=this.data,c=b.indexOf(a);a=b.getOpenList(a).getLength()-1;c<0||a<=0||this.startRowAnimation(true,c+1,c+a+1,{target:this.bodyLayout||this.body,methodName:"redraw"},this.animateFolderSpeed,this.animateFolderTime,this.animateFolderEffect,true)}else this.markForRedraw()},isc.A.$45q=function(a,b,c,d){if(!a.isOpen(b)||!a.isLoaded(b))return false;var e=a.getFolders(b),f=false;if(e!=null)for(var g=
0;g<e.length;g++)f=this.$45q(a,e[g],c,d)||f;if(d){a={};a[b.groupName]=b.groupValue;c.add(a)}else c[c.length]=a.getPath(b);return true},isc.A.dataChanged=function(a,b,c,d,e){if(isc.$cv)arguments.$cw=this;this.$67i=true;var f=e||a=="add"||a=="remove";if(!f&&a=="replace")if(b==null||c==null)f=true;else{j=j.get(c);if(j==null)f=true;else for(var g=0;g<this.fields.length;g++)if(this.shouldAutoFitField(this.fields[g])){var h=this.getFieldName(this.fields[g]);if(j[h]!=d[h]){f=true;break}}}this.calculateRecordSummaries();
var i=this.groupByField;if(i!=null&&!this.$52y)if(a=="add"||a=="remove"||a=="replace"||a=="update"&&(b==null||c==null))this.$52y=true;else if(a=="update"){var j=this.data;if(this.data.isGroupedOutput&&this.originalData)j=this.originalData;j=j.get(c);if(j==null)this.$52y=true;if(!this.$52y){h=this.dataSource!=null?this.getDataSource().getPrimaryKeyFieldNames():[];for(g=0;g<h.length;g++)if(b[h[g]]!=j[h[g]]){this.$52y=true;break}}if(!this.$52y)for(g=0;g<i.length;g++){h=i[g];if(b[h]!==void 0&&!this.fieldValuesAreEqual(h,
b[h],j[h])){this.$52y=true;break}}if(!this.$52y){i=this.getDataSource().getPrimaryKeyFieldNames()[0];i=this.data.find(i,j[i]);isc.addProperties(i,j)}}if(this.$52y&&!this.$31o){this.$52y=false;this.$75p=this.getSelectedState(true);this.regroup();if(this.$75p){this.setSelectedState(this.$75p);delete this.$75p}}this.body&&this.body.finishRowAnimation();this.$31o||this.$31n();this.$74c();this.$686()&&!this.$30a&&this.startEditing();j=this.getTotalRows()-1;if(this.body){this.body.lastOverRow>j&&delete this.body.lastOverRow;
this.body.$31p>j&&delete this.body.$31p}this.$31q>j&&delete this.$31q;this.hilites&&this.applyHilites();if(!this.$50w){f&&this.updateFieldWidthsForAutoFitValue(this.$81l);this.$25a(this.$81l);this.summaryRow&&this.showGridSummary&&this.summaryRow.recalculateSummaries()}if(this.$75p){this.setSelectedState(this.$75p);delete this.$75p}delete this.$67i},isc.A.$66d=function(a,b){var c=this.$60z();if(c!=null&&c!=-1){var d=this.getField(this.getFieldNum(c));if(d&&d.canSortClientOnly&&!this.$66c(d)){this.$600(null);
if(c!=null&&this.header&&isc.isA.Toolbar(this.header)){this.header.deselectButton(c);(d=this.header.getButton(c))&&d.setTitle(this.getHeaderButtonTitle(d))}this.sorter&&this.sorter.setTitle(this.sorter.getTitle())}}if(this.getCurrentCheckboxField()){c=this.getCheckboxFieldPosition();d=this.getField(c);var e=this.checkboxFieldFalseImage||this.booleanFalseImage;d=isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.allMatchingRowsCached()?{disabled:true,showHover:true,prompt:this.selection.selectionRangeNotLoadedMessage,
title:this.getValueIconHTML(e.replace(".","_Disabled."),d)}:{disabled:false,showHover:false,prompt:null,title:this.getValueIconHTML(e,d)};this.setFieldProperties(c,d)}this.dataArrived(a,b)},isc.A.dataArrived=function(){},isc.A.$31j=function(a){this.body&&this.body.finishRowAnimation();isc.isA.Tree(this.data)&&this.ignore(a,"changeDataVisibility");this.ignore(a,"dataChanged");this.isObserving(a,"dataArrived")&&this.ignore(a,"dataArrived");this.selection&&this.selection.deselectAll()},isc.A.applyFieldDefaults=
function(a){if(a!=null)for(var b=0;b<a.length;b++){var c=a[b];if(c!=null){if(!this.allowNamelessFields&&c[this.fieldIdProperty]==null){if(c.dataPath==null){this.logWarn("unable to process field with no name / dataPath:"+this.echo(c));continue}c[this.fieldIdProperty]="field"+this.$70q++}var d=this.isRTL()?isc.Canvas.RIGHT:isc.Canvas.LEFT,e=c.type,f=e!=null?isc.SimpleType.getBaseType(e):null;if(isc.SimpleType.inheritsFrom(c.type,"image"))c.$31r=this.$30s;else if(f==this.$gx){if(c.width==null&&c.length!=
null)if(c.length<15&&!c.valueMap)c.width=c.length*7}else if(f=="integer"||f=="float"){d=isc.Canvas.RIGHT;c.$31r=this.$30n}else if(f=="date"){d=this.canEdit==true&&c.canEdit!=false||this.canEdit!=false&&c.canEdit==true;c.width=c.width||(d?100:80);d=isc.Canvas.RIGHT;c.$31r=this.$30m}else if(f=="time"){c.width=c.width||80;c.$31r=this.$30p;d=isc.Canvas.RIGHT}else if(e=="binary"||e=="blob"||e=="upload"||e=="imageFile")c.$31r=this.$30q;else if(e=="link")c.$31r=this.$30r;else if(e=="icon"){if(c.width==null&&
c.autoFitWidth==null)if(this.autoFitIconFields!="none"){c.autoFitWidth=true;c.autoFitWidthApproach=this.autoFitIconFields=="title"?"both":"value"}if(c.width==null&&c.autoFitWidth==null)if(this.autoFitIconFields!="none"){c.autoFitWidth=true;c.autoFitWidthApproach=this.autoFitIconFields=="title"?"both":"value";c.width=this.getDefaultFieldWidth(c)}c.align=c.align||"center";c.$31r=this.$59e;c.title=c.title||"&nbsp;"}else if(e=="boolean"||e=="checkbox")if(c.canToggle==null)c.canToggle=true;if(this.getGridSummaryFunction(c)==
"count"){if(c.formatGridSummary==null)c.formatGridSummary=function(g){var h=this.pluralTitle;if(h==null)h=this.title;if(h!=null)g+=" "+h;return g};if(c.formatGroupSummary==null)c.formatGroupSummary=function(g){var h=this.pluralTitle;if(h==null)h=c.title;if(h!=null)g+=" "+h;return g}}c.formatCellValue!=null&&!isc.isA.Function(c.formatCellValue)&&isc.Func.replaceWithMethod(c,"formatCellValue","value,record,rowNum,colNum,grid");if(this.showValueIconOnly(c)){d=isc.Canvas.CENTER;if(c.width==null&&c.autoFitWidth==
null)if(this.autoFitIconFields!="none"){c.autoFitWidth=true;c.autoFitWidthApproach=this.autoFitIconFields=="title"?"both":"value";c.width=this.getDefaultFieldWidth(c)}}if(!c.align)c.align=d}}},isc.A.$31s=function(a){if(this.booleanTrueImage==null&&this.booleanFalseImage==null)return false;var b=a.type;if((b!=null?isc.SimpleType.getBaseType(b):null)!=this.$g2)return false;return!a.suppressValueIcons&&a.showValueIconOnly==null&&a.valueIcons==null&&a.formatCellValue==null},isc.A.setFieldProperties=function(a,
b){var c;c=this.getAllFields();if(isc.isA.Number(a))c=this.getField(a);else{var d=isc.Class.getArrayItemIndex(a,c,this.fieldIdProperty);c=c[d];a=this.getFieldNum(c)}if(c){isc.addProperties(c,b);if(this.header!=null&&this.header.isDrawn())(c=this.getFieldHeader(a).getMember(this.getLocalFieldNum(a)))&&c.setProperties(b)}},isc.A.setFieldTitle=function(a,b){this.setFieldProperties(a,{title:b})},isc.A.setAutoComplete=function(a){this.autoComplete=a},isc.A.setFieldAutoComplete=function(a,b){if(a=this.getField(a))a.autoComplete=
b},isc.A.showField=function(a,b){arguments.$cw=this;var c=a;c=this.getSpecifiedField(c);if(c==null)this.logWarn("showField(): unable to find field object for field: "+a+". Taking no action. Call setFields() to add new fields.");else{if(c.showIf!=null)c.showIf=null;if(this.completeFields==null||this.frozenFields||c.frozen||this.$54d){this.setFields(this.completeFields||this.fields);this.fieldStateChanged()}else if(!this.fields.contains(c)){this.deriveVisibleFields();var d=this.fields.indexOf(c),e=
this.$60z();e!=null&&e>=d&&this.$600(e+1);if(this.header!=null){if(!b)this.header.hPolicy="fill";this.header.addButtons([c],d)}if(this.body){if(this.getEditCol()!=null&&this.getEditCol()>=d)this.$30u+=1;if(this.$30a&&!this.editByCell||this.getEditCol()==d){e=this.getEditRow();var f=this.getRecord(e),g=this.getEditedRecord(e),h=this.getEditFormItemFieldWidths(f)[d];c=this.getEditItem(c,f,g,e,d,h);if(c!=null){var i;if(this.editByCell)i=0;else{e=this.$286.getItems();for(f=0;f<e.length;f++)if(e[f].colNum>=
d){if(i==null)i=f;e[f].colNum+=1}}e=this.body.getDrawArea();if(this.editByCell||d>=e[2]&&d<=e[3])this.$286.addItems([c],i)}}this.body.fields=this.normalFields||this.fields;this.setBodyFieldWidths(this.getFieldWidths());this.$75n(this.body);this.body.isDrawn()&&this.body.redraw("show field")}this.filterEditor!=null&&this.filterEditor.showField(a,b);if(this.summaryRow!=null&&this.showGridSummary){this.summaryRow.recalculateSummaries();this.summaryRow.showField(a,b)}this.markForRedraw("showField");this.fieldStateChanged()}}},
isc.A.hideField=function(a,b){arguments.$cw=this;var c=a;c=this.getSpecifiedField(c);if(c==null)this.logWarn("hideField(): unable to find field object for field: "+a+". Taking no action. To add this field use the setFields() method.");else{c.showIf=this.$18r;if(this.fields.contains(c)){c=this.fields.indexOf(c);var d=this.getFieldName(c);if(this.completeFields==null||this.frozenFields)this.setFields(this.completeFields||this.fields);else{var e=this.$30a;if(e){var f=this.getEditRow(),g=this.getEditCol();
if(this.editByCell){g==c&&this.cancelEditing(isc.ListGrid.PROGRAMMATIC);e=false}else{var h=this.getEditFormItem(c);h&&h.blurItem();this.clearEditValue(f,g,true);if(g==c){h=this.findNextEditCell(f,g,-1,true,false,false,true);if(h==null||h[0]!=f)h=this.findNextEditCell(f,g,1,true,false,false,true);if(h==null||h[0]!=f){this.cancelEditing(isc.ListGrid.PROGRAMMATIC);e=false}else this.$31u(h[0],h[1],!this.getEditForm().hasFocus)}else if(this.getEditCol()>c)this.$30u-=1}}this.deriveVisibleFields();if(this.header!=
null){if(!b)this.header.hPolicy="fill";f=this.header.getButton(c);this.header.removeButtons([f]);this.headerMenuButton&&this.headerMenuButton.masterElement==f&&this.headerMenuButton.depeer();f.destroy()}if(e){f=this.$286.getItems();for(g=f.length-1;g>=0;g--){if(f[g].colNum<=c)break;f[g].colNum-=1}}if(this.body){this.body.fields=this.normalFields||this.fields;this.setBodyFieldWidths(this.getFieldWidths());this.$75n(this.body);this.body.isDrawn()&&this.body.redraw("hide field")}if(e)if(!this.editByCell){c=
this.$286.getItem(d);c!=null&&this.$286.removeItems([c])}this.filterEditor!=null&&this.filterEditor.hideField(a,b);if(this.summaryRow&&this.showGridSummary){this.summaryRow.recalculateSummaries();this.summaryRow.hideField(a,b)}this.$74c()}this.fieldStateChanged()}}},isc.A.fieldIsVisible=function(a){var b=a;isc.isAn.Object(b)||(b=this.getSpecifiedField(a));return this.fields.contains(b)},isc.A.showActionInPanel=function(a){if(a.name=="editNew")return true;return this.Super("showActionInPanel",arguments)},
isc.A.setFields=function(a){if(isc.$cv)arguments.$cw=this;a!=null&&this.fields!=null&&this.fields!=a&&this.completeFields!=a&&delete this.fields.$775;!a&&this.getDataSource()&&!this.getDataSource().hasFields()&&this.logWarn("ListGrid.setFields() : neither this ListGrid nor its dataSource have fields");if(!this.booleanFalseImage&&!this.booleanTrueImage&&!this.booleanPartialImage){this.booleanTrueImage=isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("checkedImage"):null;this.booleanFalseImage=
isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("uncheckedImage"):null;this.booleanPartialImage=isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("partialSelectedImage"):null;this.booleanImageWidth=isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("valueIconWidth"):null;this.booleanImageHeight=isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("valueIconHeight"):null}var b=this.$60z(),c=b!=null&&this.fields?this.fields[b]:null;b=this.$30a;var d=this.getEditRow();this.getEditCol();
var e=this.$286,f=this.fields?this.getEditFieldName():null;if(this.completeFields==null)this.fields=[];this.completeFields=this.bindToDataSource(a,this.canPickOmittedFields);if(this.completeFields==null)this.completeFields=[];if(this.shouldShowRowNumberField()){var g=this.getCurrentRowNumberField(),h=this.getRowNumberFieldPosition(),i=!g;if(i)g=this.getRowNumberField();i?this.completeFields.addAt(g,h):this.completeFields.slideList([g],h)}if(this.shouldShowExpansionField()){g=this.getCurrentExpansionField();
h=this.getExpansionFieldPosition();if(i=!g)g=this.getExpansionField();i?this.completeFields.addAt(g,h):this.completeFields.slideList([g],h)}if(this.shouldShowCheckboxField()){g=this.getCurrentCheckboxField();h=this.getCheckboxFieldPosition();if(i=!g)g=this.getCheckboxField();i?this.completeFields.addAt(g,h):this.completeFields.slideList([g],h)}if(this.canRemoveRecords){i=this.completeFields.findIndex("isRemoveField",true);g=i>=0?this.completeFields[i]:{isRemoveField:true};if(!g.$61a){isc.addProperties(g,
this.removeFieldDefaults,this.removeFieldProperties);if(g.name==null)g.name="$61b";if(g.title==null)g.title=this.removeFieldTitle;if(g.cellIcon==null)g.cellIcon=this.removeIcon;if(g.iconSize==null)g.iconSize=this.removeIconSize;i==-1&&this.completeFields.add(g);g.$61a=true}}isc.DataSource&&this.$45n();this.fieldState!=null&&this.setFieldState();this.applyFieldDefaults(this.completeFields);this.completeFields.$696=true;this.completeFields.setProperty("$697",true);this.deriveVisibleFields();this.fields.length==
0&&this.completeFields.length>0&&this.logWarn("All specified fields for this component are hidden. Note that fields may be hidden via 'showIf' or 'detail' attribute values. In order to display data this grid must have some visible fields.");this.$26a=null;var j,k,l;if(b){this.storeUpdatedEditorValue();j=this.fields.findIndex(this.fieldIdProperty,f);if(j!=-1&&!this.canEditCell(d,j))j=-1;if(j==-1){var m;this.editByCell||(m=this.findNextEditCell(d,0,1,true,true,false,true));if(m!=null&&m[0]==d)j=m[1];
if(j==-1){this.cancelEditing(isc.ListGrid.PROGRAMMATIC);b=false}}else{if(k=e.getItem(f))(l=k.hasFocus)&&e.$106();k=true}b&&this.hideInlineEditor(false,true)}if(m=(this.canFreezeFields==null||this.$60v)&&this.fixedRecordHeights!=false&&this.fixedFieldWidths!=false&&this.autoFitData!="horizontal"&&this.autoFitData!="both"&&this.bodyOverflow!="visible")if(this.completeFields.getProperty("overflow").contains("visible"))m=false;if(m)this.canFreezeFields=this.$60v=true;else if(this.$60v){delete this.$60v;
this.canFreezeFields=null}if(this.canSelectCells)this.selection.numCols=this.fields.length;if(c){c=this.fields.indexOf(c);if(c==-1)c=null;this.$600(c)}if(this.showHeader&&this.headerHeight>0&&this.header!=null){this.updateHeader();this.body!=null&&this.syncHeaderScrolling(this.body.getScrollLeft())}this.updateBody();this.layoutChildren(this.$604);if(this.$52b!=null){c={};for(var n in this.$52b)if(this.$52b[n]!=null){m=this.$52b[n].$31x;i=this.dataSource!=null?this.getDataSource().getPrimaryKeyFieldNames():
[];for(var o in m)if(!this.fields.containsProperty(this.fieldIdProperty,o)&&!i.contains(o)){c[o]=true;this.clearEditValue(m,o,true)}}c=isc.getKeys(c);c.length>0&&this.logInfo("'setFields()' removed the following fields which had pending edit values for some row[s]: '"+c.join("', '")+"'.\nEdit values for these fields have been dropped.","gridEdit")}if(b){if(k){this.showInlineEditor(d,j,false,false,true);l&&e.$11b(s)}else this.$31u(d,j,!l);if(l){var s=this.getEditFieldName();s==f?e.$11b(s):e.focusInItem(s)}}this.$60z()!=
null&&this.canSort&&this.resort();this.filterEditor!=null&&this.filterEditor.setFields(this.completeFields.duplicate());if(this.summaryRow&&this.showGridSummary){this.summaryRow.setFields(this.completeFields.duplicate());this.summaryRow.recalculateSummaries()}});isc.B.push(isc.A.addField=function(a,b){return this.Super("addField",[a,b,this.completeFields],arguments)},isc.A.removeField=function(a){return this.Super("removeField",[a,this.completeFields],arguments)},isc.A.shouldShowCheckboxField=function(){return this.selectionAppearance==
this.$12c&&this.selectionType!=this.$27r&&!isc.isA.TreeGrid(this)},isc.A.focusInFilterEditor=function(a){if(this.filterEditor!=null)this.filterEditor.startEditing(0,a!=null?this.getColNum(a):null)},isc.A.filterByEditor=function(){this.filterEditor!=null&&this.filterEditor.performAction()},isc.A.bindToDataSource=function(a,b,c,d,e,f){var g=false;a=this.invokeSuper(isc.ListGrid,"bindToDataSource",a,b,c,d,e,f);if(this.showDetailFields&&a!=null)for(b=0;b<a.length;b++){c=a[b];if(c.showIf==null&&c.detail==
true)c.showIf=this.$18r;if(isc.isA.Number(parseInt(c.name))&&parseInt(c.name).toString()==c.name)g=true;c.$81f=true}this.$81g=!g;return a},isc.A.setFieldState=function(a){this.completeFields==null&&this.setFields(this.fields);if(a==null&&this.fieldState!=null){isc.isA.String(this.fieldState)&&this.evalViewState(this.fieldState,"fieldState");this.completeFields=this.$31y(this.fieldState);this.fieldState=null}else if(a=this.evalViewState(a,"fieldState")){this.completeFields=this.$31y(a);this.refreshFields()}},
isc.A.getCheckboxField=function(){var a=this,b={width:this.$63g+this.$65a(),getAutoFreezePosition:function(){return a.getCheckboxFieldPosition()}};isc.addProperties(b,this.checkboxFieldDefaults,this.checkboxFieldProperties);var c=this.checkboxFieldFalseImage||this.booleanFalseImage;b.title=this.canSelectAll==false||this.selectionType=="single"?" ":this.getValueIconHTML(c,b);return b},isc.A.getCurrentCheckboxField=function(){var a=this.getFields();if(!a)return null;a=a.find(this.fieldIdProperty,"_checkboxField");
return!a?null:isc.isAn.Array(a)?a[0]:a},isc.A.$65a=function(){return this.checkboxFieldImageWidth||this.booleanImageWidth||(isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("valueIconWidth"):null)},isc.A.$65b=function(){return this.checkboxFieldImageHeight||this.booleanImageHeight||(isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("valueIconWidth"):null)},isc.A.isCheckboxField=function(a){return!a||!a.$63f?false:true},isc.A.getCheckboxFieldPosition=function(){if(this.selectionAppearance!=
"checkbox"||isc.isA.TreeGrid(this))return-1;return this.showRowNumbers&&this.canExpandRecords?2:this.showRowNumbers||this.canExpandRecords?1:0},isc.A.getSelectedState=function(a){if(!this.selection)return null;if(!this.dataSource||isc.isAn.emptyObject(this.getDataSource().getPrimaryKeyFields())){a||this.logWarn("can't getSelectedState without a DataSource with a primary key field set");return null}a=this.selection.getSelection()||[];for(var b=[],c=0;c<a.length;c++)b[c]=this.getPrimaryKeys(a[c]);return isc.Comm.serialize(b,
false)},isc.A.setSelectedState=function(a){if(a=this.evalViewState(a,"selectedState")){var b=this.selection,c=this.originalData||this.data;if(c&&b){b.deselectAll();b=[];for(var d=0;d<a.length;d++){var e=c.findByKeys(a[d],this.getDataSource());e!=-1&&b.add(c.get(e))}this.selection.selectList(b)}}},isc.A.getSortState=function(){this.logIsInfoEnabled("sorting")&&this.logInfo("\ngrid.sortFieldNum is: "+this.sortFieldNum+"\ngrid.sortField is: "+this.sortField+"\ngrid.getField(grid.sortFieldNum) is:\n"+
isc.echoAll(this.getField(this.sortFieldNum))+"\n-----------------------------------------\ngrid.$60z() is: "+this.$60z()+"\ngrid.getField(grid.$60z()) is:\n"+isc.echoAll(this.getField(this.$60z()))+"\n","sorting");var a=this.$60z();a=a!=null?this.getField(a):null;a={fieldName:a!=null?this.getFieldName(a):null,sortDir:a&&a.sortDirection!=null?a.sortDirection:this.sortDirection};if(this.$73p&&this.$73p.length>0){var b=isc.shallowClone(this.$73p);b.clearProperty("primarySort");b.clearProperty("sortIndex");
b.clearProperty("normalizer");b.clearProperty("context");a.sortSpecifiers=b}return"("+isc.Comm.serialize(a,false)+")"},isc.A.setSortState=function(a){if(a=this.evalViewState(a,"sortState"))if(a.sortSpecifiers)this.setSort(isc.shallowClone(a.sortSpecifiers));else if(a.fieldName==null)this.clearSort();else{var b=this.getFieldNum(a.fieldName);b!=-1&&this.sort(b,a.sortDir)}},isc.A.getViewState=function(a){var b={selected:this.getSelectedState(true),field:this.getFieldState(),sort:this.getSortState()};
if(a)return b;return"("+isc.Comm.serialize(b,false)+")"},isc.A.setViewState=function(a){if(a=this.evalViewState(a,"viewState")){a.field&&this.setFieldState(a.field);a.sort&&this.setSortState(a.sort);a.selected&&this.setSelectedState(a.selected)}},isc.A.setDataSource=function(a){this.Super("setDataSource",arguments);this.clearFilterValues();this.discardAllEdits();if(this.data.setSort){if(this.canMultiSort!=false)this.canMultiSort=(a=this.getDataSource())&&a.canMultiSort!=null?a.canMultiSort:true}else this.canMultiSort=
false},isc.A.deriveVisibleFields=function(){this.fields.setArray(this.getVisibleFields(this.completeFields));this.deriveFrozenFields();this.refreshMasterIndex()},isc.A.refreshFields=function(){this.setFields(this.completeFields)},isc.A.getFieldWidths=function(a){var b=this.$78q();if(this.autoFitFieldWidths&&!this.$813){this.$813=true;var c=b.duplicate(),d=null;if(this.frozenFields!=null)if(this.freezeLeft){d=c.slice(0,this.frozenFields.length);c=c.slice(this.frozenFields.length)}else{d=c.slice(this.frozenFields.length);
c=c.slice(0,this.frozenFields.length)}var e=this.getAvailableFieldWidth();c=c.sum();e=e;if(d!=null)e-=d.sum();d=true;if(this.autoFitWidthApproach!="title"){var f=this.getDrawArea();if(!this.data||Array.isLoading(this.data.get(f[0])))d=false}if(c<e&&d){if(a=this.getAutoFitExpandField()){a=this.getFieldNum(a);b[a]+=e-c;(c=this.getFieldHeaderButton(a))&&c.isDrawn()&&c.setWidth(b[a])}}else if(c>e&&this.autoFitClipFields!=null){var g;if(this.header&&this.header.isDrawn()){g=this.header.hPolicy;this.header.hPolicy=
"fill"}b=this.autoFitClipFields;for(e=0;e<b.length;e++){d=this.getField(b[e]);c=this.getFieldNum(d);if(!(d==null||c<0))if(d.frozen)this.logInfo("auto-fitting field:"+d.name+" is present in the autoFitClipFields array for this grid, but is currently frozen. This is not supported - the field will not be clipped.","frozenFields");else{delete d.$776;if((f=this.getFieldHeader(c))&&f.isDrawn()){c=f.getMember(this.getLocalFieldNum(c));c.setWidth(d.width||"*");c.setOverflow("hidden")}}}if(this.header&&this.header.isDrawn()){b=
this.$812;if(a!=null)b+=a;this.header.reflowNow(b);this.header.hPolicy=g;if(this.frozenHeader){this.frozenHeader.hPolicy="fill";this.frozenHeader.reflowNow(b);this.frozenHeader.hPolicy=g}}b=this.$78q()}this.$813=false}return b},isc.A.$78q=function(){var a=this.header;if(isc.isA.Layout(a)&&a.isDrawn()){for(var b=a.members,c=0;c<b.length;c++){b[c].isDirty()&&b[c].redraw();b[c].label!=null&&b[c].label.isDirty()&&b[c].label.redraw()}b=a.getMemberSizes();if(b.length>0){if(this.allowMismatchedHeaderBodyBorder){c=
a.getLeftBorderSize()+a.getLeftMargin();var d=a.getRightBorderSize()+a.getRightMargin();if(c!=0)b[0]+=c}c=b.sum();a=a.getInnerWidth();if(this.allowMismatchedHeaderBodyBorder){a=c-a;if(a>0)b[b.length-1]+=Math.min(a,d)}}if(this.frozenFields){d=this.frozenHeader.getMemberSizes();b.addListAt(d,this.freezeLeft()?0:b.length)}}else b=this.getStretchResizeWidths();return b},isc.A.getStretchResizeWidths=function(){if(this.fields==null)return[];for(var a=this.fields.getProperty("width"),b=this.fields.getProperty("$776"),
c=0;c<a.length;c++)if(b[c]!=null)a[c]=b[c];return isc.Canvas.applyStretchResizePolicy(a,this.innerWidth!=null?this.innerWidth:this.getAvailableFieldWidth(),this.minFieldSize)},isc.A.getAvailableFieldWidth=function(){var a=(this.autoFitData=="both"||this.autoFitData=="horizontal"?this.getVisibleWidth():this.getWidth())-this.getHMarginBorder();if(this.$54u())a-=this.body?this.body.getScrollbarSize():this.getScrollbarSize();return a},isc.A.getFieldWidth=function(a){a=this.getFieldNum(a);if(a==-1||!this.fields||
a>=this.fields.length)return null;if(this.body!=null)return this.getColumnWidth(a);return this.getFieldWidths()[a]},isc.A.$310=function(a,b){if(b==null)b=false;if(a==null||a.length==0)return a;if(!this.body)return a;a[a.length-1]=this.$311(a[a.length-1],a.sum(),b);a[0]=this.$312(a[0],b);return a},isc.A.$312=function(a,b){if(!this.body)return a;var c=b?this.body.getTopBorderSize()+this.body.getTopMargin():this.body.getLeftBorderSize()+this.body.getLeftMargin();if(c!=0)a-=c;return Math.max(0,a)},isc.A.$311=
function(a,b,c){if(!this.body)return a;var d=c?this.body.getBottomBorderSize()+this.body.getBottomMargin():this.body.getRightBorderSize()+this.body.getRightMargin();if(d!=0){b=b-(c?this.body.getInnerHeight():this.body.getInnerWidth());if(b>0)a-=Math.min(b,d)}return Math.max(a,1)},isc.A.setBodyFieldWidths=function(a){this.$26a=a;if(this.allowMismatchedHeaderBodyBorder)if(isc.isAn.Array(a))a=this.$310(a.duplicate());if(this.frozenFields){var b=this.getFrozenSlots(a);a=this.getUnfrozenSlots(a);this.frozenBody.setColumnWidths(b);
b=b.sum();this.frozenBody.setWidth(b);this.frozenBody.$pn=b;this.frozenHeader&&this.frozenHeader.setWidth(b)}this.body!=null&&this.body.setColumnWidths(a);if(this.$30a){a=this.$286.getItems();b=this.getEditFormItemFieldWidths(this.getRecord(this.getEditRow()));for(var c=0;c<a.length;c++){var d=a[c].colNum;a[c].width!=b[d]&&a[c].setWidth(b[d])}}},isc.A.createChildren=function(){this.showHeader&&this.headerHeight>0&&!this.header&&this.makeHeader();this.showFilterEditor&&!this.filterEditor&&this.makeFilterEditor();
this.createBodies();this.header&&this.body.moveAbove(this.header);if(isc.Browser.isMoz&&isc.Browser.geckoVersion>=20051111)if(this.header){this.body.mozOutlineOffset="0px";if(this.body.mozOutlineColor==null)this.body.mozOutlineColor=this.mozBodyOutlineColor}else{if(this.body.mozOutlineColor==null)this.body.mozOutlineColor=this.mozBodyNoHeaderOutlineColor;this.body.mozOutlineOffset="-1px"}if(this.showGridSummary&&(!this.summaryRow||this.summaryRow.masterElement!=this))this.showSummaryRow();this._useNativeTabIndex=
false},isc.A.layoutChildren=function(a,b,c){isc.Canvas.$b4.layoutChildren.call(this,a,b,c);if(this.body!=null){this.$45m(a,b,c);if(this.frozenBody){a=this.shrinkForFreeze&&this.body.hscrollOn;b=this.bodyLayout.getInnerHeight();if(a)b-=this.body.getScrollbarSize();this.frozenBody.setHeight(b);this.frozenBody.$po=b}}},isc.A.$45m=function(a){if(this.body!=null){this.$26a=null;if(this.fields&&!this.fields.$775){var b=this.getAutoFitValueWidths(null,true);if(b!=null){for(var c=0;c<this.fields.length;c++)if(b[c]!=
null){var d=this.fields[c],e=d.width||this.minFieldWidth;if(e<b[c]){d.$776=b[c];d=this.getFieldHeaderButton(c);if(d!=null){d.setWidth(b[c]);d.parentElement.reflow()}}else if(d.$776!=null){d.$776=null;d=this.getFieldHeaderButton(c);if(d!=null){d.setWidth(e);d.parentElement.reflow()}}}this.fields.$775=true}}c=this.getAvailableFieldWidth();b=c!=this.innerWidth;this.innerWidth=c;e=this.header;c=this.showHeader?this.headerHeight:0;if(e!=null){d=this.isRTL()&&this.$54u()?this.body.getScrollbarSize():0;
e.hPolicy="fill";if(this.frozenHeader)this.frozenHeader.hPolicy="fill";var f=this.innerWidth;if(!this.leaveScrollbarGap&&e.isDrawn()&&f!=e.getWidth()&&a=="body scroll changed")if(this.$54e||!this.resizeFieldsForScrollbar)e.hPolicy="none";(this.headerLayout||e).setRect(d,0,f,c);if(!e.isDrawn()&&(a=="initial draw"||this.isDrawn()))if(this.frozenFields){d=this.getFieldWidths(a);this.frozenHeader.setWidth(this.getFrozenSlots(d).sum());this.headerLayout.draw()}else e.draw();e.hPolicy="none";if(this.frozenHeader)this.frozenHeader.hPolicy=
"none";if(this.sorter){this.sorter.setLeft(this.getSorterLeft());this.$313();this.sorter.setVisibility(this.$313()?isc.Canvas.INHERIT:isc.Canvas.HIDDEN)}}if((!this.$26a||b)&&(e&&e.isDrawn()||c==0)){d=this.getFieldWidths(a);this.setBodyFieldWidths(d);this.filterEditor&&this.filterEditor.body!=null&&this.filterEditor.setBodyFieldWidths(d.duplicate());this.summaryRow&&this.showGridSummary&&this.summaryRow.body!=null&&this.summaryRow.setBodyFieldWidths(d.duplicate());this.logIsDebugEnabled("layout")&&
this.logDebug("new field widths: "+this.$26a,"layout")}if(!this.$618){this.$618={};this.$618[this.$pc]=true;this.$618[this.$60m]=true;this.$618[this.$604]=true;this.$618[this.$616]=true;this.$618[this.$617]=true}if(this.autoFitData==null||!this.body.isDrawn()||this.$618[a]){this.bodyHeight=Math.max(1,this.getInnerHeight()-c);this.bodyWidth=Math.max(1,this.getInnerWidth());a=this.bodyLayout||this.body;a.setRect(0,c,this.bodyWidth,this.bodyHeight);this.body.isDirty()&&!this.body.$58p&&!a.$58p&&a.redraw()}}},
isc.A.getAutoFitValueWidths=function(a,b){if(this.data!=null){if(isc.isA.ResultSet(this.data)){var c=this.body.getDrawArea();if(!this.data.rangeIsLoaded(c[0],c[1])){a==null&&this.updateFieldWidthsForAutoFitValue("Delayed resize pending data load");return}}var d=a==null;if(a==null){a=[];for(c=0;c<this.fields.length;c++){var e=this.fields[c];if(this.shouldAutoFitField(e))if(!b||this.getAutoFitWidthApproach(e)!="title"){a.add(e);d=false}}}if(!d){d=[];var f=[];for(c=0;c<a.length;c++){e=a[c];var g=this.getFieldNum(e);
e.frozen?d.add(g):f.add(g)}e=[];for(c=0;c<this.fields.length;c++)if(a.contains(this.fields[c]))e[c]=this.getDefaultFieldWidth(this.fields[c]);return e}}},isc.A.getDefaultFieldWidth=function(a){if(a.type=="icon")return(a.iconWidth||a.iconSize)+2*this.cellPadding+2*this.iconPadding;else if(this.showValueIconOnly(a))return this.getValueIconWidth(a)+2*this.cellPadding+this.getValueIconRightPadding(a)+this.getValueIconLeftPadding(a);var b=this.getLocalFieldNum(this.getFieldNum(a));return a.frozen?this.frozenBody.getColumnAutoSize(b):
this.body.getColumnAutoSize(b)},isc.A.getAutoFitWidthApproach=function(a){if(a.autoFitWidthApproach!=null)return a.autoFitWidthApproach;return this.autoFitWidthApproach},isc.A.resizePeersBy=function(a,b,c,d){this.invokeSuper(isc.ListGrid,"resizePeersBy",a,b,c,d);this.filterEditor!=null&&this.filterEditor.resizeBy(a,0)},isc.A.draw=function(a,b,c,d){if(isc.$cv)arguments.$cw=this;if(!this.readyToDraw())return this;this.prepareForDraw();this.invokeSuper(isc.ListGrid,"draw",a,b,c,d);this.body.getColumnSizes();
for(var e=0;e<this.bodies.length;e++)this.bodies[e].$29a&&this.markForRedraw();e=this.$60z();this.header&&e!=null&&this.header.selectButton(e);this.bodyScrolled();return this},isc.A.$686=function(a,b){if(!b&&this.getTotalRows()==0)return false;if(this.alwaysShowEditors)return true;var c=a?[a]:this.fields;if(c)for(var d=0;d<c.length;d++)if(c[d].alwaysShowEditors)return true;return false},isc.A.prepareForDraw=function(){this.completeFields==null&&this.setFields(this.fields);this.getEditRow()==null&&
this.$686()&&this.startEditing();if(this.groupByField){var a;a=isc.isA.Array(this.groupByField)?this.groupByField:[this.groupByField];this.groupByField=null;this.groupBy(a)}this.createChildren()},isc.A.destroy=function(){if(this._dragLine){this._dragLine.destroy();this._dragLine=null}this.$314&&this.$314.destroy();this.$58q&&this.$58q.destroy();this.cellContextMenu&&this.cellContextMenu.destroy();if(this.$286){this.$286.destroy();delete this.$286;delete this.$30a}if(this.data)if(this.data.$31k&&isc.isA.Function(this.data.destroy))this.data.destroy();
else{this.$31j(this.data);delete this.data}this.selection&&this.destroySelectionModel();this.selectionCanvas&&this.selectionCanvas.destroy();this.selectionUnderCanvas&&this.selectionUnderCanvas.destroy();this.rollOverCanvas&&this.rollOverCanvas.destroy();this.rollUnderCanvas&&this.rollUnderCanvas.destroy();this.$67a();this.Super("destroy",arguments)},isc.A.redrawHeader=function(){this.header&&this.header.markForRedraw()},isc.A.getBaseStyle=function(a,b,c){if(this.canEdit==true&&!this.isPrinting){if(this.editFailedBaseStyle&&
this.cellHasErrors(b,c))return this.editFailedBaseStyle;if(this.editPendingBaseStyle&&this.cellHasChanges(b,c,false))return this.editPendingBaseStyle}if(a&&this.recordBaseStyleProperty&&a[this.recordBaseStyleProperty])return a[this.recordBaseStyleProperty];if((c=this.getField(c))&&c.baseStyle)return c.baseStyle;if(c&&c.type=="summary"&&this.recordSummaryBaseStyle)return this.recordSummaryBaseStyle;if(c&&c.frozen&&this.frozenBaseStyle)return this.frozenBaseStyle;if(this.isPrinting&&this.printBaseStyle!=
null)return this.printBaseStyle;c=this.baseStyle;if(c==null)c=this.cellHeight!=this.normalCellHeight||this.fastCellUpdates||!this.shouldFixRowHeight(a,b)||a!=null&&a.$29a?this.tallBaseStyle:this.normalBaseStyle;return c},isc.A.getCellCSSText=function(a,b,c){if(a){var d=a[this.recordCSSTextProperty];if(d!=null)return d}if(this.isEditable())if(this.editFailedBaseStyle==null&&this.editFailedCSSText&&this.cellHasErrors(b,c))d=this.editFailedCSSText;else if(this.editPendingBaseStyle==null&&this.editPendingCSSText&&
this.cellHasChanges(b,c,false))d=this.editPendingCSSText;return d=this.getRecordHiliteCSSText(a,d,this.getField(c))},isc.A.getRawCellValue=function(a,b,c,d){var e,f;if(d){e=c;d=this.completeFields?isc.Class.getArrayItem(e,this.completeFields,this.fieldIdProperty):this.getField(e)}else{d=this.fields[c];e=d[this.fieldIdProperty]}f=d?d.dataPath:null;if(e==null&&f==null)return this.emptyCellValue;var g;if(this.rowEditNotComplete(b))g=this.$30y(b,c);if(g!==void 0)return g;else{if(a==null)return this.emptyCellValue;
g=this.data.getFieldValue&&d?this.data.getFieldValue(a,e,d):a.ownerDocument&&d?isc.xml.getFieldValue(a,e,d):f!=null?isc.Canvas.$70o(f,a):a[e]}if(this.shouldShowRecordSummary(d,a)&&!this.shouldApplyRecordSummaryToRecord(d))g=this.getRecordSummary(b,d);if(d&&d.getRawCellValue){isc.Func.replaceWithMethod(d,"getRawCellValue","viewer,record,recordNum,field,fieldNum,value");g=d.getRawCellValue(this,a,b,d,c,g)}if(d){if(d.userFormula)g=this.getFormulaFieldValue(d,a);d.userSummary&&this.getSummaryFunction(d)}return g},
isc.A.shouldShowRecordSummary=function(a,b){if(a&&a.type==this.$71t){if(b[this.groupSummaryRecordProperty])return a.summaryFunction==null&&a.getGroupSummary==null;else if(b[this.gridSummaryRecordProperty])return a.summaryFunction==null&&a.getGridSummary==null;return true}return false},isc.A.getCellValue=function(a,b,c,d){if(a==null){if(this.showNewRecordRow&&this.$299(b))return this.getNewRecordRowCellValue();a=this.$300(b,c)}else{if(a[this.isSeparatorProperty])return this.$302;if(a.$52e)return this.groupTitleField&&
this.fields[c].name!=this.groupTitleField?" ":this.getGroupNodeHTML(a,d)}d=this.fields[c];var e=null;if(d==null)return"";if(this.isCheckboxField(d)){var f;f=this.body.canSelectRecord(a)?(this.selection.isSelected(a)?true:false)?this.checkboxFieldTrueImage||this.booleanTrueImage:this.checkboxFieldFalseImage||this.booleanFalseImage:"[SKINIMG]/blank.gif";if(a[this.recordEnabledProperty]==false)f=f.replace(".","_Disabled.");return this.getValueIconHTML(f,d)}var g=this.showValueIconOnly(d),h;if(a!=null){if(a[this.singleCellValueProperty]!=
null)return a[this.singleCellValueProperty];if(Array.isLoading(a)){if(!isc.Browser.isSafari||c==0)return this.loadingMessage;return"&nbsp;"}if(h=this.$30a&&this.$285==b&&(!this.editByCell||this.$30u==c)&&this.canEditCell(b,c))e=this.getEditItemCellValue(a,b,c);else if(this.$68z(c)&&this.canEditCell(b,c)){e=this.getInactiveEditorCellValue(a,b,c);h=true}else{d=this.fields[c];var i,j;if(d.displayField!=null)if(j=!d.valueMap&&!d.getCellValue&&this.$425(d))i=this.getRawCellValue(a,b,d.displayField,true);
e=this.getRawCellValue(a,b,c);if(d.getCellValue){isc.Func.replaceWithMethod(d,"getCellValue","viewer,record,recordNum,field,fieldNum,value");e=d.getCellValue(this,a,b,d,c,e)}f=this.getValueIcon(d,e,a,b);if(!g){var k=d.valueMap;if(k){if(isc.isA.String(k))k=this.getGlobalReference(k);isc.isAn.Array(k)||(e=isc.getValueForKey(e,k))}}if(j)e=i}}if(!h){h=null;if(f!=null)h=this.getValueIconHTML(f,d);if(g){if(!h||isc.isAn.emptyString(h))h=this.emptyCellValue;e=h}else{e=this.$315(e,a,d,b,c);if(a=this.getFieldHilites(a,
d))e=this.applyHiliteHTML(a,e);if(h)if(d.valueIconOrientation!=isc.Canvas.RIGHT)e=h+e;else e+=h}if(this.isEditable()&&this.showErrorIcons&&this.cellHasErrors(b,c))e=this.getErrorIconHTML(b,c)+e}if(this.groupTitleField&&this.fields[c].name==this.groupTitleField)e=isc.Canvas.spacerHTML(this.groupIndentSize+this.groupLeadingIndent,1)+e;return e},isc.A.getTitleFieldValue=function(a){var b=this.getDataSource().getTitleField(),c=this.getCellValue(a,this.getRecordIndex(a),this.getFieldNum(b),this.body);
if(!c||c=="")c=this.getRawCellValue(a,this.getRecordIndex(a),b,true);return c},isc.A.getRawValue=function(a,b){var c=this.getRecordIndex(a),d=this.getSpecifiedField(b);if(c<0)return a[b];return a[d[this.fieldIdProperty]]!=null?a[d[this.fieldIdProperty]]:this.getRawCellValue(a,c,b,true)},isc.A.getFormattedValue=function(a,b,c){var d=this.getRecordIndex(a),e=this.getSpecifiedField(b),f=this.getFieldNum(b);if(d<0)return c==null?a[b]:c;if(this.fieldIsVisible(e)&&c==null)return this.getCellValue(a,d,f,
this.body);if(c==null)c=this.getRawValue(a,b);return this.$315(c,a,e,d,f)},isc.A.getSpecifiedFieldWidth=function(a){a=this.getField(a);a=a[this.fieldIdProperty];var b=this.header?this.header.members:null,c=this.frozenFields&&this.frozenHeader?this.frozenHeader.members:null,d;if(b||c){var e;if(b)e=b.find(this.fieldIdProperty,a);if(!e&&c)e=c.find(this.fieldIdProperty,a);if(e&&e.$pn&&isc.isA.Number(e.$pn))d=e.$pn}return d},isc.A.getValueIconHTML=function(a,b){var c=b.imageURLPrefix||b.baseURL||b.imgDir,
d=b.imageURLSuffix,e=this.getValueIconWidth(b),f=this.getValueIconHeight(b),g=this.getValueIconLeftPadding(b),h=this.getValueIconRightPadding(b);if(d!=null)a+=d;return isc.Canvas.$xq(a,c,e,f,g,h,null,this)},isc.A.getCellAlign=function(a,b,c){if(a&&a[this.singleCellValueProperty]!=null&&(!this.showSingleCellCheckboxField(a)||!this.isCheckboxField(this.getField(c))))return this.isRTL()?isc.Canvas.RIGHT:isc.Canvas.LEFT;a=this.fields[c];if(!a)return isc.Canvas.LEFT;if(a.userFormula||a.userSummary)return this.isRTL()?
isc.Canvas.LEFT:isc.Canvas.RIGHT;return a.cellAlign||a.align},isc.A.showSingleCellCheckboxField=function(a){return this.getCurrentCheckboxField()!=null&&a&&!a.$52e&&!a[this.isSeparatorProperty]},isc.A.$425=function(a){return a&&a.displayField&&a.displayField!=a.name&&(!a.optionDataSource||isc.DS.get(a.optionDataSource)==this.getDataSource())},isc.A.getValueIcon=function(a,b,c,d){if(!a.valueIcons||a.suppressValueIcon){if(this.$31s(a)){b=b?this.booleanTrueImage:this.booleanFalseImage;d=d!=null?d:this.findRowNum(c);
if(!this.canEditCell(d,a.masterIndex)&&a.canToggle)b=isc.Img.urlForState(b,false,false,"Disabled");if(b==null)b=isc.Canvas.getImgURL(isc.Canvas.$wz);return b}return null}return a.valueIcons[b]},isc.A.getValueIconLeftPadding=function(a){return a&&a.valueIconLeftPadding!=null?a.valueIconLeftPadding:this.valueIconLeftPadding||0},isc.A.getValueIconRightPadding=function(a){return a&&a.valueIconRightPadding!=null?a.valueIconRightPadding:this.valueIconRightPadding||0},isc.A.showValueIconOnly=function(a){if(a.showValueIconOnly!=
null)return a.showValueIconOnly;if(a.valueIcons!=null&&a.valueMap!=null)return true;return this.$31s(a)},isc.A.getValueIconWidth=function(a){if(this.isCheckboxField(a))return this.$65a();if(this.$31s(a))return this.booleanImageWidth;return a.valueIconWidth!=null?a.valueIconWidth:a.valueIconSize!=null?a.valueIconSize:this.valueIconWidth!=null?this.valueIconWidth:this.valueIconSize},isc.A.getValueIconHeight=function(a){if(this.isCheckboxField(a))return this.$65b();if(this.isExpansionField(a))return this.$72z();
if(this.$31s(a))return this.booleanImageHeight;return a.valueIconHeight!=null?a.valueIconHeight:a.valueIconSize!=null?a.valueIconSize:this.valueIconHeight!=null?this.valueIconHeight:this.valueIconSize},isc.A.$299=function(a){return this.showNewRecordRow&&a==this.getTotalRows()-1},isc.A.getNewRecordRowCellValue=function(){return'<div align="center">'+this.newRecordRowMessage+"</div>"},isc.A.getErrorIconHTML=function(a,b){if(this.getCellErrors(a,b)==null)return isc.$ad;var c=this.imgHTML(this.errorIconSrc,
this.errorIconWidth,this.errorIconHeight,null," isErrorIcon='true'");c+=isc.Browser.isIE&&this.$30a&&this.getEditRow()==a&&(!this.editByCell||this.getEditCol()==b)?" ":isc.Canvas.spacerHTML(this.cellPadding,"auto");return c},isc.A.$79z=function(a,b){this.$79y=[a,b];isc.Hover.setAction(this,this.$79v)},isc.A.$79v=function(){if(this.$79y!=null){var a=this.getCellErrors(this.$79y[0],this.$79y[1]);if(a!=null){a=isc.FormItem.getErrorPromptString(a);isc.Hover.show(a,this.$wc())}}},isc.A.$790=function(){delete this.$79y;
isc.Hover.isActive&&isc.Hover.clear()},isc.A.$315=function(a,b,c,d,e){if(c&&c.formatCellValue!=null)a=c.formatCellValue(a,b,d,e,this);else if(c&&c.cellValueTemplate)a=c.cellValueTemplate.evalDynamicString(this,{value:a,record:b,field:c});else if(this.formatCellValue!=null)a=this.formatCellValue(a,b,d,e);else if(c&&c.$63!=null)a=c.$62.shortDisplayFormatter(a,c,this,b,d,e);else if(c&&c.$31r!=null)a=c.$31r(a,c,this,b,d,e);if(c.userSummary)a=this.getSummaryFieldValue(c,b);if(a==null||isc.is.emptyString(a))a=
c.emptyCellValue!=null?c.emptyCellValue:c.type=="summary"?this.invalidSummaryValue:this.emptyCellValue;else if(this.$54y[a]==true)a=this.$54t;else isc.isA.String(a)||(a=isc.iscToLocaleString(a));if(this.formatDisplayValue)a=this.formatDisplayValue(a,b,d,e);return a},isc.A.getEditItemCellValue=function(a,b,c){a=this.getEditorName(b,c);if(!this.$286||!this.$286.getItem(a))return"&nbsp;";var d=this.getCellErrors(b,c);d&&this.$286.setFieldErrors(a,d);b=this.$286.getItem(a);c=b.getStandaloneItemHTML(b.getValue(),
false,true);d&&this.$286.setFieldErrors(a,null);a=b.containerWidget;if(!a.$316)a.$316=[];a.$316.contains(b)||a.$316.add(b);return c},isc.A.$68z=function(a){return this.$686(a)},isc.A.getInactiveEditorCellValue=function(a,b,c){var d=this.$286.getItem(this.getEditorName(b,c)),e=isc.DynamicForm.getEditorType(d,this.$286),f=this.getRawCellValue(a,b,c);if(this.shouldShowEditorPlaceholder(this.getField(c),e))d=this.getEditorPlaceholderHTML(e,f,a,b,c);else{a={grid:this.getID(),record:a,rowNum:b,colNum:c};
d=d.getInactiveEditorHTML(f,false,true,a);if(!this.$69m)this.$69m={};b="_"+b+"_"+c;this.$69m[b]&&this.logWarn("creating new inactiveEditor context for a cell without having cleared the previous one."+this.getStackTrace(),"inactiveEditorHTML");this.$69m[b]=a}return d},isc.A.shouldShowEditorPlaceholder=function(a,b){if(a.showEditorPlaceholder!=null)return a.showEditorPlaceholder;return!this.$687[b]},isc.A.getEditorPlaceholderHTML=function(a,b){return b},isc.A.$30b=function(a,b,c){if(a)a=[a];else{a=
[];for(var d=this.$286.getItems(),e=0;e<d.length;e++)d[e].containerWidget==c&&a.add(d[e])}d=c.$316;for(e=0;e<a.length;e++){var f=a[e],g=f.isDrawn(),h=d?d.contains(f):false,i=isc.CanvasItem&&isc.isA.CanvasItem(f);if(g)if(h){f.redrawn();b&&f.moved()}else f.cleared();else if(h){i&&f.placeCanvas();f.drawn()}}delete c.$316});isc.B.push(isc.A.$69l=function(a,b){if(this.$286&&this.$686(b!=null?this.getField(b):null,true))if(a!=null){var c="_"+a+"_"+b,d=this.$69m[c];if(d){d.formItem.clearInactiveEditorContext(d);
delete this.$69m[c]}}else{c=this.getEditForm().getItems();for(d=0;d<c.length;d++)c[d].clearAllInactiveEditorContexts();delete this.$69m}},isc.A.setRecordValues=function(a,b){if(this.shouldSaveLocally()){if(this.data){var c=this.data.indexOf(a),d=this.data.get(c);isc.combineObjects(d,b);this.calculateRecordSummaries([d]);if(this.useCellRecords){c=this.findRowNum(d);var e=this.findColNum(d);this.refreshCell(c,e)}else this.refreshRow(c);this.valuesManager!=null&&this.valuesManager.$71e(c,null,d,this)}}else this.logWarn("setRecordValues() not supported for grids where saveLocally is false")},
isc.A.setRawCellValue=function(a,b,c,d){var e=this.fields[c];if(a&&e){if(e.setRawCellValue){isc.Func.replaceWithMethod(e,"setRawCellValue","viewer,record,recordNum,field,fieldNum,value");e.setRawCellValue(this,a,b,e,c,d)}else if(e.dataPath)isc.Canvas.$70n(e.dataPath,d,a);else a[e[this.fieldIdProperty]]=d;this.data.dataChanged()}},isc.A.getCellBooleanProperty=function(a,b,c,d){var e=this[a];if(e==false||e==this.$18r)return false;a=this.fields[c][a];if(a==false||a==this.$18r)return false;if(d!=null){b=
this.getRecord(b,c);d=b!=null?b[d]:false;if(d==false||d==this.$18r)return false;if(d==true||d==this.$18q)return true}return e==true||a==true||e==this.$18q||a==this.$18q},isc.A.setShowRecordComponents=function(a){if(this.showRecordComponents!=a){if(a){if(this.animateFolders){this.$805=true;this.animateFolders=false}}else if(this.$805){this.animateFolders=true;delete this.$805}this.showRecordComponents=a;this.$80i();if(a){this.$74p=this.drawAllMaxCells;this.drawAllMaxCells=0;if(this.body!=null)this.body.drawAllMaxCells=
0}else if(this.$74p!=null){this.drawAllMaxCells=this.$74p;if(this.body!=null)this.body.drawAllMaxCells=this.$74p;delete this.$74p}this.invalidateRecordComponents()}},isc.A.$80i=function(){if(this.showRecordComponents){if(this.virtualScrolling==null||this.$80j)if(this.frozenFields==null)this.$80j=this.virtualScrolling=true;else{this.recordComponentHeight==null&&this.logWarn("This grid has frozen fields and is showing recordComponents. This may lead to unpredictable row heights which are not supported with frozen fields. Setting listGrid.recordComponentHeight will avoid this issue.",
"recordComponents");if(this.$80j){delete this.virtualScrolling;delete this.$80j}}}else if(this.$80j){delete this.virtualScrolling;delete this.$80j}if(this.body&&this.virtualScrolling!=this.body.virtualScrolling){this.body.virtualScrolling=this.virtualScrolling;if(this.frozenBody)this.frozenBody.virtualScrolling=this.virtualScrolling}},isc.A.getDrawArea=function(){if(this.body){var a=this.body.getDrawArea();if(this.frozenFields&&this.freezeLeft()){a[2]+=this.frozenFields.length;a[3]+=this.frozenFields.length}return a}return null},
isc.A.$74l=function(a,b,c,d){if(this.frozenFields&&this.freezeLeft()){c+=this.frozenFields.length;d+=this.frozenFields.length}[a,b,c,d].equals(this.getDrawArea())||this.drawAreaChanged(a,b,c,d)},isc.A.drawAreaChanged=function(){},isc.A.updateRecordComponents=function(){var a=this.logIsDebugEnabled("recordComponents");if(this.$81r)a&&this.logDebug("updateRecordComponents called recursively - returning","recordComponents");else{var b=this.body,c=this.frozenBody;if(b!=null)if(b.$28c==null)if(!(b.$26a==
null||b.$26a.length==0&&b.fields.length>0||c&&(c.$26a==null||c.$26a.length==0&&c.fields.length>0))){this.$81r=true;c=this.$81s||[];var d=this.$81t||{};this.$81t={};this.$81s=[];if(this.showRecordComponents||this.showBackgroundComponents){var e=this.body.getDrawArea(),f=this.showRecordComponentsByCell,g=this.body.getID(),h=this.frozenBody?this.frozenBody.getID():null;a&&this.logDebug("updating to potentially show recordComponents for drawArea:"+e,"recordComponents");for(a=e[0];a<=e[1];a++){var i=this.getRecord(a);
if(!(i==null||Array.isLoading(i))){if(this.showRecordComponents)if(f){if(this.frozenBody!=null)for(var j=0;j<this.frozenBody.fields.length;j++){var k=this.frozenBody.fields[j],l=k.name;m=this.shouldShowRecordComponent(i,k.masterIndex);k=null;if(m){k=this.$81u(i,l,h);if(k!=null)if(k.isNullMarker)k=null;else{l=k.getID();d[l]=null}else k=this.$81v(i,l,this.frozenBody,a,j)}if(k!=null){l=k.getID();this.$81t[l]=true;this.$81s[this.$81s.length]=k}}for(j=e[2];j<=e[3];j++){k=this.body.fields[j];l=k.name;m=
this.shouldShowRecordComponent(i,k.masterIndex);k=null;if(m){k=this.$81u(i,l,g);if(k!=null)if(k.isNullMarker)k=null;else{l=k.getID();d[l]=null}else k=this.$81v(i,l,this.body,a,j)}if(k!=null){l=k.getID();this.$81t[l]=true;this.$81s[this.$81s.length]=k}}}else{var m=this.shouldShowRecordComponent(i);k=null;if(m){k=this.$81u(i,null,g);if(k!=null)if(k.isNullMarker)k=null;else{l=k.getID();d[l]=null}else k=this.$81v(i,null,this.body,a)}if(k!=null){l=k.getID();this.$81t[l]=true;this.$81s[this.$81s.length]=
k}}if(this.showBackgroundComponents)if(i&&i.backgroundComponent)if(!(i.$29a?i.$29a.find("isBackgroundComponent",true):null)){j=isc.isA.Canvas(i.backgroundComponent)?i.backgroundComponent.addProperties(this.backgroundComponentProperties,{isBackgroundComponent:true}):this.createAutoChild("backgroundComponent",isc.addProperties({isBackgroundComponent:true},this.backgroundComponentProperties,i.backgroundComponent));l=b.getTableZIndex();j.setZIndex(l-49);j.setWidth("100%");j.setHeight("100%");j.setOverflow("hidden");
this.addEmbeddedComponent(i.backgroundComponent,i,a,null,"within")}}}}this.logIsInfoEnabled("recordComponents")&&this.logInfo("updateRecordComponents - new recordComponents:"+this.echo(this.$81t)+", old record components (will be cleaned up if value is 'true'):"+this.echo(d),"recordComponents");for(b=0;b<c.length;b++){l=c[b].getID();d[l]==true&&this.$81w(c[b])}delete this.$81r}}},isc.A.$81v=function(a,b,c,d,e){this.logIsDebugEnabled("recordComponents")&&this.logDebug("getting record component for row/field:"+
[d,b],"recordComponents");var f=c.getID(),g=this.recordComponentPoolingMode=="recycle",h,i,j=b==null?null:this.getColNum(b);if(g){h=(i=this.getFromRecordComponentPool(a,b))?i[0]:null;i=i?i[1]:null}if(h){if(this.updateRecordComponent&&isc.isA.Function(this.updateRecordComponent)){h=this.updateRecordComponent(a,j,h,!i);h==null&&this.logIsInfoEnabled("recordComponents")&&this.logInfo("showRecordComponents: updateRecordComponent() method failed to return an updated component.","recordComponents");this.logDebug("updated record component from pool:"+
h,"recordComponents")}}else if(this.createRecordComponent&&isc.isA.Function(this.createRecordComponent)){h=this.createRecordComponent(a,this.getColNum(b));if(h!=null)h.isRecordComponent=true;this.logDebug("created new record component:"+h,"recordComponents")}if(j=h==null)h={isNullMarker:true,$669:f,$81x:this.$81o};if(a.$81y==null)a.$81y={};if(b==null)b=this.$81m;a.$81y[b]=h;if(g&&!j){h.currentFieldName=b;h.currentRecord=a}if(!j)return c.addEmbeddedComponent(h,a,d,e,this.getRecordComponentPosition())},
isc.A.$81w=function(a,b){this.logIsDebugEnabled("recordComponents")&&this.logDebug("cleaning up recordComponent:"+a,"recordComponents");var c=this.recordComponentPoolingMode;if(b)c="viewport";if(c!="data"){var d=isc.Canvas.getById(a.$669);delete a.embeddedRecord.$81y[a.$81k];d!=null&&d.removeEmbeddedComponent(a.embeddedRecord,a);if(c=="viewport")a.markForDestroy();else a.destroying||a.destroyed||a.$65i||this.addToRecordComponentPool(a)}},isc.A.$81u=function(a,b,c){if(b==null)b=this.$81m;a=a.$81y;
if(a==null||a[b]==null)return null;var d=a[b];if(d.$669!=c)return null;if(d.isNullMarker&&d.$81x!=this.$81z)return null;if(d.destroyed||d.destroying||d.$65i){this.logWarn("Destroyed or Destroying record component:"+d+" present on record. Ignoring","recordComponents");return a[b]=null}return d},isc.A.invalidateRecordComponents=function(){this.dropRecordComponents(true);this.showRecordComponents&&this.isDrawn()&&this.updateRecordComponents()},isc.A.dropRecordComponents=function(a){this.$81o++;var b=
this.$81s||[];delete this.$81s;delete this.$81t;for(var c=0;c<b.length;c++)this.$81w(b[c],a)},isc.A.getRecordComponentPosition=function(){if(this.recordComponentPosition!=null)return this.recordComponentPosition;return this.showRecordComponentsByCell?"within":"expand"},isc.A.getRecordComponentPool=function(){if(!this.$74m)this.$74m=[];return this.$74m},isc.A.getFromRecordComponentPool=function(a,b){var c=this.getRecordComponentPool(),d=[],e;if(!c||c.length==0)return null;d=this.poolComponentsPerColumn==
true?c.findAll("currentFieldName",b):c;if(!d||d.length==0)return null;for(var f=0;f<d.length;f++){e=d[f];if(this.comparePrimaryKeys(e.currentRecord,a)){c.remove(e);return[e,true]}}c.length-=1;return[e,false]},isc.A.addToRecordComponentPool=function(a){this.getRecordComponentPool().add(a)},isc.A.shouldShowRecordComponent=function(a,b){if(a==null||a.$52e||a[this.isSeparatorProperty]||Array.isLoading(a))return false;return this.showRecordComponent(a,b)},isc.A.showRecordComponent=function(){return true},
isc.A.bodyDrawing=function(a){if(isc.$cv)arguments.$cw=this;if(a==this.body){var b;if(this.$31v){b=!isc.RPCManager.startQueue();this.$67b()}this.requestVisibleRows();b&&isc.RPCManager.sendQueue();this.$31v=null}},isc.A.setRecordComponentHeight=function(a){this.recordComponentHeight=a;this.isDrawn()&&this.markForRedraw()},isc.A.getAvgRowHeight=function(a){if(this.showRecordComponents&&this.recordComponentHeight!=null)return this.getRecordComponentRowHeight();return a.fixedRowHeights?a.cellHeight:Math.max(a.cellHeight,
a.avgRowHeight)},isc.A.getRecordComponentRowHeight=function(){if(this.recordComponentHeight==null)return null;return this.getRecordComponentPosition()==this.$57m?this.cellHeight+this.recordComponentHeight:Math.max(this.recordComponentHeight,this.cellHeight)},isc.A.$45n=function(){this.$31v=null;var a=this.$45o;this.$45o=[];this.getDataSource();for(var b=0;b<this.completeFields.length;b++){var c=this.completeFields[b];if(c==null)this.logWarn("Fields array contains an empty entry");else if(!(c.optionDataSource==
null||c.displayField==null||c.displayField==c.valueField||c.valueField==null&&c.displayField==c[this.fieldIdProperty]||c.autoFetchDisplayMap==false||this.autoFetchDisplayMap==false&&c.autoFetchDisplayMap==null)){var d=isc.DS.get(c.optionDataSource);if(d==null)this.logWarn(c.optionDataSource+" dataSource not found, check value of optionDataSource property on the "+c[this.fieldIdProperty]+" field");else{d=d.ID;var e=c.optionCriteria,f=false;if(a&&!c.optionFilterContext)for(var g=0;g<a.length;g++){var h=
a[g];if(h!=null)if(this.$68m(c,h)){h.$51u=[c];this.$45o.add(h);a[g]=null;f=true;break}}if(!f&&!c.optionFilterContext)for(g=0;g<this.$45o.length;g++){h=this.$45o[g];if(this.$68m(c,h)){h.$51u.add(c);f=true;break}}if(!f){this.$45o.add({$68n:d,$51u:[c],$51w:c.optionTextMatchStyle,$68o:e,$68p:c.optionFilterContext,$68r:c.optionOperationId});this.$31v=true}}}}for(b=0;b<this.$45o.length;b++)this.$45o[b].$68q!=null&&this.$67c(this.$45o[b]);if(a!=null)for(b=0;b<a.length;b++)a[b]&&a[b].$68q&&a[b].$68q.destroy()},
isc.A.$68m=function(a,b){return b.$68n==a.optionDataSource&&a.optionTextMatchStyle==b.$51w&&a.optionOperationId==b.$68r&&isc.DataSource.getDataSource(b.$68n).compareCriteria(a.optionCriteria||{},b.$68o||{})==0},isc.A.$67c=function(a){var b=a.$68n,c=a.$51u;if(c==null||c.length==0)this.logWarn("$67c fired for dataSource:"+b+" which no longer applies to any fields in this ListGrid");else{a=a.$68q;if(!(a==null||isc.isA.ResultSet(a)&&!a.lengthIsKnown()))for(b=0;b<c.length;b++){var d=c[b],e=a.getValueMap(d.valueField||
d[this.fieldIdProperty],d.displayField);if(this.getField(d[this.fieldIdProperty])==null)d.valueMap=e;else this.setValueMap(d[this.fieldIdProperty],e)}}},isc.A.$67b=function(){for(var a,b=0;b<this.$45o.length;b++){var c=this.$45o[b];if(c.$68q==null){if(a==null)a=!isc.RPCManager.startQueue();var d=c.$68n,e,f=c.$51u;if(f&&f.length>0){e="";for(var g=0;g<f.length;g++){e+=f[g].name;if(g<f.length-1)e+=","}}f=c.$68p||{};isc.addProperties(f,{showPrompt:false,clientContext:{ODSConfig:c},componentContext:e,
textMatchStyle:c.$51w});if(c.$68r!=null)f.operationId=c.$68r;isc.DataSource.getDataSource(d).fetchData(c.$68o,{target:this,methodName:"$317"},f)}}a&&isc.RPCManager.sendQueue()},isc.A.$317=function(a,b,c){a=c.clientContext.ODSConfig;if(!(!a||a.$68q!=null||!this.$45o||!this.$45o.contains(a))){a.$68q=isc.ResultSet.create({dataSource:a.$68n,ODSConfig:a,targetGrid:this,dataChanged:"this.targetGrid.$67c(this.ODSConfig)",initialData:b});this.$67c(a);return true}},isc.A.$67a=function(){if(this.$45o!=null){for(var a=
0;a<this.$45o.length;a++){var b=this.$45o[a].$68q;b&&b.destroy()}delete this.$45o}},isc.A.requestVisibleRows=function(){if(isc.ResultSet&&isc.isA.ResultSet(this.data)){if(this.body==null)return this.data.getRange(0,this.dataPageSize);if(this.data.lengthIsKnown()&&this.data.getLength()==0)return;this.body.showAllRows=this.data.lengthIsKnown()?this.body.overflow==isc.Canvas.VISIBLE?true:this.showAllRecords:false;var a=this.body.getDrawArea();if(this.$30d&&isc.isAn.Array(this.$30d)){var b=a[1]-a[0];
a[0]=this.$30d[0];a[1]=a[0]+b}return this.isGrouped?this.data.getRange(0,this.groupByMaxRecords):this.data.getRange(a[0],a[1])}return null},isc.A.getPrintHeaders=function(a,b){for(var c=isc.SB.create(),d=this.isRTL()?isc.Canvas.LEFT:isc.Canvas.RIGHT,e,f,g=this.headerSpans==null?null:[],h=[],i=["<TD CLASS=",this.printHeaderStyle||this.headerBaseStyle," ALIGN="].join(""),j=a;j<b;j++){var k=this.body.fields[j];if(this.headerSpans!=null)if(e==null){e=this.headerSpans[0];f=1}else if(e.fields.contains(k[this.fieldIdProperty]))f++;
else{g.addList([i,"center colspan=",f,">",e.title,"</TD>"]);e=this.headerSpans[this.headerSpans.indexOf(e)+1];f=1}h.addList([i,k.align||d,">",this.getHeaderButtonTitle(k.masterIndex),"</TD>"])}if(e!=null){g.addList([i,"center colspan=",f,">",e.title,"</TD>"]);c.append("<TR>",g.join(""),"</TR>")}c.append("<TR>",h.join(""),"</TR>");return c.toString()},isc.A.getPrintHTML=function(a,b){var c=this.body;if(c==null){this.createChildren();c=this.body}if(this.isDirty()||c.isDirty())this.redraw("updating HTML for printing");
var d=isc.addProperties({},a,this.printProperties),e,f;if(isc.isA.ResultSet(this.data)&&!this.data.allMatchingRowsCached()){var g=this.body.getVisibleRows();g=this.data.getCachedRange(g?g[0]:null);if(g!=null){e=g[0];f=g[1]}}g=isc.Canvas.applyStretchResizePolicy(this.fields.getProperty("width"),d.width||isc.Page.getWidth());return c.getTablePrintHTML({startRow:e,endRow:f,callback:b,printWidths:g,printProps:d})},isc.A.$569=function(a,b){this.isPrinting=this.body.isPrinting=true;this.currentPrintProperties=
b;var c=this.body,d=this.$30a,e=isc.getProperties(c,["autoFit","wrapCells","showAllRows","showAllColumns","fixedRowHeights","$26a","fields"]);c.showAllRows=true;c.showAllColumns=true;this.$30a=false;c.autoFit=this.printAutoFit;c.wrapCells=this.printWrapCells;c.fixedRowHeights=!this.printWrapCells;var f=this.fields.duplicate();f.removeAll(f.findAll("shouldPrint",false));c.fields=f;f=this.frozenFields;delete this.frozenFields;c.$26a=a;return{oldEditorShowing:d,oldFrozenFields:f,origProps:e}},isc.A.$57a=
function(a){var b=this.body,c=a.origProps,d=a.oldEditorShowing;isc.addProperties(b,c);if(c.showAllRows==null)b.showAllRows=null;this.$30a=d;this.frozenFields=a.oldFrozenFields;delete this.currentPrintProperties;this.isPrinting=this.body.isPrinting=false;this.body.redraw()},isc.A.rowClick=function(a,b,c,d){this.$31q=b;a=this.getCellRecord(b,c);var e=this.fields[c];if(!Array.isLoading(a)){var f=this.getCellValue(a,b,c),g=this.getRawCellValue(a,b,c);if(a!=null&&a.$52e){if(this.canCollapseGroup!=false){var h=
this,i=a;this.getEditRow()!=null?this.saveAllEdits(null,function(){h.toggleFolder(i)}):this.toggleFolder(a)}}else{if(e.recordClick&&!(d&&e.keyboardFiresRecordClick==false)){isc.Func.replaceWithMethod(e,"recordClick","viewer,record,recordNum,field,fieldNum,value,rawValue");var j=e.recordClick(this,a,b,e,c,f,g);if(j==false)return false}if(this.recordClick){j=this.recordClick(this,a,b,e,c,f,g);if(j==false)return false}a=this.isEditable()&&(this.editEvent==isc.EH.CLICK||this.editOnFocus);if(e.canToggle&&
this.canEditCell(b,c)&&this.shouldToggle(e)){f=this.getEditorValueMap(e,this.getEditedRecord(b,c));if(f==null&&isc.SimpleType.getBaseType(e.type)==this.$g2)f=[true,false];if(f!=null){isc.isAn.Array(f)||(f=isc.getKeys(f));if(f.length>1){this.getFieldName(c);g=this.getEditedCell(b,c);j=f.indexOf(g);j+=1;if(j>=f.length)j=0;var k=g;g=f[j];var l;if(e.change!=null){this.logInfo("canToggle firing specified field.change() event directly");l=this.fireCallback(e.change,"form,item,value,oldValue",[null,null,
g,k])==false}if(!l){!a&&this.autoSaveEdits?this.setEditValue(b,c,g,true,false):this.setEditValue(b,c,g);if(e.changed!=null){this.logInfo("canToggle firing specified field.changed() event directly");this.fireCallback(e.changed,"form,item,value",[null,null,g])}this.autoSaveEdits&&this.saveEdits(null,null,b,c)}}}}if(a){if(this.handleEditCellEvent(b,c,isc.ListGrid.CLICK)==true)return true;if(d)for(d=0;d<this.fields.length;d++)if(d!=c)if(this.handleEditCellEvent(b,d,isc.ListGrid.CLICK)==true)return true}}}},
isc.A.shouldToggle=function(a){if(!this.$31s(a))return true;return(a=this.getEventPart())&&a.part=="valueicon"},isc.A.rowDoubleClick=function(a,b,c,d){var e=this.fields[c],f=this.getCellValue(a,b,c),g=this.getRawCellValue(a,b,c);if(!(a!=null&&a.$52e)){if(e.recordDoubleClick){isc.Func.replaceWithMethod(e,"recordDoubleClick","viewer,record,recordNum,field,fieldNum,value,rawValue");var h=e.recordDoubleClick(this,a,b,e,c,f,g);if(h==false)return h}if(this.recordDoubleClick!=null){h=this.recordDoubleClick(this,
a,b,e,c,f,g);if(h==false)return h}if(this.isEditable()&&this.editEvent==isc.EH.DOUBLE_CLICK){if(this.handleEditCellEvent(b,c,isc.ListGrid.DOUBLE_CLICK)==true)return true;if(d)for(a=0;a<this.fields.length;a++)if(a!=c)if(this.handleEditCellEvent(b,a,isc.ListGrid.DOUBLE_CLICK)==true)return true}}},isc.A.$298=function(a,b,c){this.cellContextItems=null;if(this.cellContextClick){a=this.getCellRecord(b,c);if(this.cellContextClick(a,b,c)==false)return false}if(this.showCellContextMenus){if(!this.cellContextMenu)this.cellContextMenu=
this.getMenuConstructor().create(this.contextMenuProperties);if(!this.cellContextItems)this.cellContextItems=this.makeCellContextItems(this.getCellRecord(b,c),b,c);if(isc.isAn.Array(this.cellContextItems)&&this.cellContextItems.length>0){this.cellContextMenu.setData(this.cellContextItems);this.cellContextMenu.showContextMenu(this)}return false}else return true},isc.A.getShowChildDataSourceContextMenuItemTitle=function(a){return"Show "+a.getPluralTitle()},isc.A.makeCellContextItems=function(a){if(this.dataSource!=
null){var b=[];if(this.canOpenRecordDetailGrid){var c=isc.DS.get(this.getRecordDataSource(a)).getChildDataSources();if(c!=null)for(var d=0;d<c.length;d++){var e=c[d];b.add({title:this.getShowChildDataSourceContextMenuItemTitle(e),record:a,dataSource:e,click:"target.openRecordDetailGrid(item.record, item.dataSource)"})}}this.canOpenRecordEditor&&b.add({title:this.openRecordEditorContextMenuItemTitle,record:a,click:"target.endEditing();target.openRecordEditor(item.record)"});a!=null&&this.$32o==a&&
b.add({title:this.dismissEmbeddedComponentContextMenuItemTitle,click:"target.closeRecord()"});b.add({title:this.deleteRecordContextMenuItemTitle,click:"target.removeSelectedData()"});return b.length>0?b:null}return null},isc.A.getCanHover=function(){if(this.canHover!=null)return this.canHover;var a=this.getFields();if(a!=null)for(var b=0;b<a.length;b++)if(a[b].showHover)return true;return this.canHover},isc.A.cellHoverHTML=function(a,b,c){if(this.$30a&&this.getEditRow()==b&&(!this.editByCell||this.getEditCol()==
c))return null;var d=this.getField(c);if(d.showHover==false)return null;if(d.showHover==null&&!this.canHover)return null;var e=this.getCellValue(a,b,c);if(d.hoverHTML){isc.Func.replaceWithMethod(d,"hoverHTML","record,value,rowNum,colNum,grid");return d.hoverHTML(a,e,b,c,this)}if(e!=null&&!isc.isAn.emptyString(e)&&e!=this.emptyCellValue)return e},isc.A.$784=function(a,b,c){if(!this.showHoverComponents)return null;if(this.$30a&&this.getEditRow()==b&&(!this.editByCell||this.getEditCol()==c))return null;
var d=this.getField(c);if(d.showHover==false)return null;if(d.showHover==null&&!this.canHover)return null;return this.getCellHoverComponent&&isc.isA.Function(this.getCellHoverComponent)?this.getCellHoverComponent(a,b,c):null},isc.A.getCellHoverComponent=function(a){for(var b=this.getFields(),c=this.dataSource?isc.getValues(this.getDataSource().getFields()):b,d=this.hoverWidth||this.hoverSize||this.defaultCellHoverComponentWidth,e=this.hoverHeight||this.hoverSize||this.defaultCellHoverComponentHeight,
f=[],g,h=0;h<c.length;h++){var i=c.get(h);if(this.dataSource)b.find("name",i.name)||f.add(i);else this.isExpansionField(i)||f.add(i)}if(this.hoverMode=="detailField"){g=this.createAutoChild("expansionDetailField",{contents:a[this.detailField]});g=isc.VLayout.create({width:d,height:e,overflow:"auto",members:[g],hoverAutoDestroy:this.hoverAutoDestroy})}else if(this.hoverMode=="details"){g=this.createAutoChild("expansionDetails",{dataSource:this.dataSource,fields:f,width:d,height:e,hoverAutoDestroy:this.hoverAutoDestroy});
g.setData(a)}else if(this.hoverMode=="related"){g=this.createAutoChild("expansionRelated",{dataSource:this.getRelatedDataSource(a),canEdit:false,width:d,height:e,dataProperties:{context:{showPrompt:false}},hoverAutoDestroy:this.hoverAutoDestroy});g.fetchRelatedData(a,this.dataSource)}else if(this.hoverMode=="detailRelated"){b=this.createAutoChild("expansionDetails",{dataSource:this.dataSource,fields:f,dataProperties:{context:{showPrompt:false}},hoverAutoDestroy:this.hoverAutoDestroy});b.setData(a);
a=this.createAutoChild("expansionRelated",{dataSource:this.getRelatedDataSource(a),canEdit:false,height:"100%",dataProperties:{context:{showPrompt:false}},hoverAutoDestroy:this.hoverAutoDestroy});g=this.createAutoChild("expansionDetailRelated",{members:[b,a],width:d,height:e,hoverAutoDestroy:this.hoverAutoDestroy})}return g},isc.A.selectAllRecords=function(){this.$67j=true;this.selection.selectAll();this.$67j=null;this.$25a("select all")},isc.A.deselectAllRecords=function(){this.$67j=true;this.selection.deselectAll();
this.$67j=null;this.$25a("deselect all")},isc.A.bodyKeyPress=function(a,b){if(this.data.getLength()>0){var c=a.keyName;if(this.editOnKeyPress&&this.isEditable()&&this.$51j(a,b))return false;if(c==this.$20s)return this.$318(-1);else if(c==this.$20t)return this.$318(1);else if(c==this.$304){if(this.generateClickOnSpace)if(this.$240()==false)return false;if(this.generateDoubleClickOnSpace)return this.$241()}else if(c==this.$10j){if(this.generateClickOnEnter)if(this.$240()==false)return false;if(this.generateDoubleClickOnEnter)return this.$241()}}return true},
isc.A.$51j=function(a,b){var c=b.keyName,d=isc.EH.getKeyEventCharacter(a);if(c!=this.$51g&&c!=this.$51i&&c!=this.$51h&&(c==this.$20w||isc.EH.$i8[c]||d==null||d==isc.emptyString))return false;var e=this.getFocusCell(),f=e[0]||0,g=e[1]||0;if(this.$30a)return false;if(c==this.$10j||c==this.$51g)d=null;var h;if(d!=null){h=c==this.$51i||c==this.$51h?null:this.autoSelectEditors?d:this.getEditedCell(f,g)+d;this.$51m=true}return this.handleEditCellEvent(e[0],e[1],this.$51l,h)},isc.A.getArrowKeyAction=function(){var a=
this.arrowKeyAction;if(a==this.$27r)return this.$27r;if(isc.EH.ctrlKeyDown())return this.$305;return a},isc.A.$318=function(a){var b=this.getArrowKeyAction();if(b==this.$27r)return true;if(a==null)a=1;var c;c=this.getFocusRow(a>0);if(c==null)c=this.$31q;var d=isc.isA.Number(c)?c:0;if(isc.isA.Number(c))c+=a;else c=0;var e=this.getTotalRows()-1;if(c<0||c>e){if(e<0)return true;c=d}for(;!this.recordIsEnabled(c,0);){c+=a;if(c<0||c>e){c=d;break}}isc.screenReader&&this.body.getTableElement(c).focus();if(b==
this.$305)this.$88(c);else if(c==d){a=this.$32b();if(this.body.selectionEnabled()&&this.recordIsEnabled(c,a)){this.selection.selectOnMouseDown(this,c,a);this.selection.selectOnMouseUp(this,c,a)}}else if(b==this.$12b)this.$319(c);else b==this.$306&&this.$32a(c);this.scrollRecordIntoView(c);return false},isc.A.$32b=function(){var a=this.keyboardClickField;if(a==null)return 0;if(isc.isA.Number(a)&&a>0&&a<this.fields.length)return a;return(a=this.fields.find(this.fieldIdProperty,a))?this.fields.indexOf(a):
0},isc.A.$319=function(a){this.clearLastHilite();if(isc.isAn.Object(a))a=this.getRecordIndex(a);if(!isc.isA.Number(a)||a<0)a=0;if(a>=this.data.getLength())a=this.data.getLength()-1;this.body.$31p=a;var b=this.$32b(),c=this.body.selectionEnabled()&&this.recordIsEnabled(a,b);c&&this.selection.selectOnMouseDown(this,a,b);this.rowClick(this.getCellRecord(a,b),a,b,true);c&&this.selection.selectOnMouseUp(this,a,b);return false},isc.A.getFocusRow=function(a){if(this.body.$31p!=null&&(this.body.$31p==this.body.lastOverRow||
this.body.$31p==this.$31q))return this.body.$31p;delete this.body.$31p;var b=this.getSelection();if(b.length==0)return null;b=b[a?b.length-1:0];return this.getRecordIndex(b)},isc.A.getFocusCell=function(){return[this.getFocusRow(),this.$32b()]},isc.A.$240=function(){var a=this.getFocusRow();if(a!=null){this.$319(a);return false}return true},isc.A.$32a=function(a){var b=this.$32b();this.rowDoubleClick(this.getCellRecord(a,b),a,b,true)},isc.A.$241=function(){this.$32b();var a=this.getFocusRow();if(a!=
null){this.$32a(a);return false}return true},isc.A.scrollRecordToTop=function(a){return this.scrollRecordIntoView(a,false)},isc.A.scrollRecordIntoView=function(a,b){return this.scrollCellIntoView(a,null,b)},isc.A.scrollColumnIntoView=function(a,b){return this.scrollCellIntoView(null,a,b)},isc.A.scrollToRow=function(a){this.scrollCellIntoView(a,0);return this},isc.A.scrollCellCallback=function(a,b,c,d,e){if(e==this.$77o){this.$77o=null;this.scrollCellIntoView(a,b,c,d)}},isc.A.scrollCellIntoView=function(a,
b,c,d){if(isc.isAn.Array(this.data)&&this.data.length==0&&this.dataSource||isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown()){if(this.$77o)this.$77o+=1;else this.$77o=1;isc.Page.waitFor(this,"dataArrived",{method:this.scrollCellCallback,args:[a,b,c,d,this.$77o],target:this})}else if(!this.body||!this.body.isDrawn()){this.logInfo("scrollCellIntoView() called before the body has been drawn.  Cell "+a+","+b+" will scrolled into view on draw().");this.$30d=[a,b]}else{if(c==null)c=
true;var e,f,g,h,i=this.body;if(a!=null)if(i.$60s){if(d=!(i.$252==null||a<i.$252||a>i.$253)){e=i.getRowTop(a);f=i.getRowHeight?i.getRowHeight(this.getCellRecord(a),a):i.cellHeight;g=i.getScrollTop();if(g>e||i.getViewportHeight()+g<e+f)d=false}if(!d){i.$27y=a;i.$27z=c?-1*(i.getViewportHeight()/2-i.cellHeight):0;i.$270()}return}else{f=i.getRowTop(a);h=i.getRowSize(a)}if(b!=null){e=this.getColumnLeft(b);g=this.getColumnWidth(b)}if(this.isDirty()||this.body.isDirty()){var j;if(a!=null){a=i.getScrollHeight();
if(f+h>a)j=true}if(!j&&b!=null){a=i.getScrollWidth();if(e+g>a)j=true}j&&this.redraw("scrollIntoView")}i.scrollIntoView(e,f,g,h,c?"center":"left",c?"center":"top",null,null,d)}},isc.A.bodyScrolled=function(a,b,c){if(c){this.body.$80h=true;c=this.frozenBody;if(c.$274){this.body.$27y=c.$27y;this.body.$27z=c.$27z;this.body.$271=c.$271;this.body.$270()}else this.body.scrollTo(null,b);delete this.body.$80h}else{if(this.frozenBody!=null){this.frozenBody.$80h=true;var d=this.body;c=this.frozenBody;if(d.$274){c.$27y=
d.$27y;c.$27z=d.$27z;c.$271=d.$271;c.$270()}else c.scrollTo(null,b);delete this.frozenBody.$80h}this.syncHeaderScrolling(a,b);this.syncFilterEditorScrolling(a,b);this.syncSummaryRowScrolling(a,b);if(this.$30a&&this.$519){a=this.getEditForm();c=this.getEditRow();b=this.getEditCol();if(c=a.getItem(this.getEditorName(c,b)))if(!c.hasFocus&&(a.hasFocus||isc.EH.getFocusCanvas()==null))this.$518(b);else delete this.$519}}},isc.A.syncHeaderScrolling=function(a){if(a!=null&&this.header)if(this.isRTL()){var b=
this.header,c=this.body,d=b.getScrollWidth()-b.getViewportWidth(),e=d-b.getScrollLeft();a=c.getScrollWidth()-c.getViewportWidth()-a;a!=e&&b.scrollTo(d-a)}else a!=this.header.getScrollLeft()&&this.header.scrollTo(a)},isc.A.headerScrolled=function(){if(!this.$32c)this.$32c=this.delayCall("syncBodyScrolling")},isc.A.syncBodyScrolling=function(){delete this.$32c;var a=this.header.getScrollLeft();if(this.body)if(this.isRTL()){var b=this.header,c=this.body;b=b.getScrollWidth()-b.getViewportWidth()-b.getScrollLeft();
var d=c.getScrollWidth()-c.getViewportWidth();d-a!=b&&c.scrollTo(d-b)}else a!=this.body.getScrollLeft()&&this.body.scrollTo(a)});isc.B.push(isc.A.syncFilterEditorScrolling=function(a){this.filterEditor!=null&&this.filterEditor.body!=null&&this.filterEditor.body.getScrollLeft()!=a&&this.filterEditor.body.scrollTo(a)},isc.A.syncSummaryRowScrolling=function(a){this.summaryRow!=null&&this.showGridSummary&&this.summaryRow.body!=null&&this.summaryRow.body.getScrollLeft()!=a&&this.summaryRow.body.scrollTo(a)},
isc.A.$88=function(a){isc.isA.Number(a)||(a=this.getRecordIndex(a));if(!isc.isA.Number(a)||a<0)a=0;if(a>=this.data.getLength())a=this.data.getLength()-1;this.clearLastHilite();this.body.$31p=a;this.body.lastOverRow=a;this.body.lastOverCol=0;this.bodies.map("setRowStyle",a)},isc.A.clearLastHilite=function(){if(this.body){this.body.$31p=null;var a=this.body.lastOverRow;if(isc.isA.Number(a)){delete this.body.lastOverRow;this.showRollOver&&this.body.updateRollOver(a)}}},isc.A.$vk=function(a,b,c,d){this.invokeSuper(isc.ListGrid,
"$vk",a,b,c,d);this.header!=null&&this.canTabToHeader&&this.header.$vk(a,false);this.body!=null&&this.body.$vk(a,false)},isc.A.setAccessKey=function(a){this.Super("setAccessKey",arguments);this.body!=null&&this.body.setAccessKey(a)},isc.A.setFocus=function(a){this.body!=null&&this.body.setFocus(a)},isc.A.$kk=function(){if(this.body)return this.body.$kk();return false},isc.A.recordClick=function(){},isc.A.recordDoubleClick=function(){},isc.A.setShowGridSummary=function(a){if(this.showGridSummary!=
a)(this.showGridSummary=a)?this.showSummaryRow():this.clearSummaryRow()},isc.A.recalculateSummaries=function(){this.showGridSummary&&this.summaryRow!=null&&this.summaryRow.recalculateSummaries();this.showGroupSummary&&this.refreshGroupSummary()},isc.A.shouldShowGridSummary=function(a){if(a.showGridSummary!=null)return a.showGridSummary;return a.getGridSummary!=null||this.getGridSummaryFunction(a)!=null},isc.A.getGridSummaryFunction=function(a){if(a)return a.summaryFunction||isc.SimpleType.getDefaultSummaryFunction(a.type)},
isc.A.getGridSummary=function(a){if(!(!a||!this.data||isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown())){var b=this.getOriginalData(),c=isc.ResultSet&&isc.isA.ResultSet(b);if(isc.isA.Tree(b)){b=b.getDescendants(b.getRoot());c=isc.ResultSet&&isc.isA.ResultSet(b)}if(c&&!b.allMatchingRowsCached())this.logWarn("Unable to show summary values - dataset not completely loaded");else{b=c?b.getRange(0,b.getLength()):b;c=this.getAllEditRows();if(c!=null&&c.length>0){b=b.duplicate();for(c=0;c<b.length;c++){var d=
this.getEditSessionRowNum(b[c]);if(d!=null)b[c]=this.getEditedRecord(d,null,true)}}if(a.getGridSummary){var e;if(this.isGrouped&&this.showGroupSummary&&this.groupTree!=null)e=this.assembleGroupSummaries();return a.getGridSummary(b,a,e)}return this.getSummaryValue(b,a)}}},isc.A.getSummaryRowDataSource=function(){return this.summaryRowDataSource},isc.A.getSummaryRowCriteria=function(){if(this.summaryRowCriteria!=null)return this.summaryRowCriteria;var a=this.getOriginalData();if(isc.ResultSet&&isc.isA.ResultSet(a))return this.data.getCriteria();
return this.getInitialCriteria()},isc.A.getSummaryRowFetchRequestConfig=function(){return isc.addProperties({textMatchStyle:this.autoFetchTextMatchStyle,showPrompt:false,startRow:0,endRow:1},this.summaryRowFetchRequestDefaults,this.summaryRowFetchRequestProperties)},isc.A.assembleGroupSummaries=function(a,b){var c=this.groupTree;a||(a=c.getRoot());b||(b=[]);for(var d=c.getFolders(a),e=0;e<d.length;e++){var f=c.getChildren(d[e]).last();f=isc.addProperties({groupName:d[e].groupName,groupValue:d[e].groupValue},
f);delete f.customStyle;delete f[this.recordEnabledProperty];delete f[this.includeInSummaryProperty];b.add(f);f=c.getFolders(d[e]);for(var g=0;g<f.length;g++)this.assembleGroupSummaries(f[g],b)}return b},isc.A.getSummaryValue=function(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d];!e||e[this.includeInSummaryProperty]==false||(c[c.length]=e)}d=this.getGridSummaryFunction(b);return isc.SimpleType.applySummaryFunction(c,b,d)},isc.A.shouldShowGroupSummary=function(a){if(a.showGroupSummary!=null)return a.showGroupSummary;
return a.getGroupSummary!=null||this.getGridSummaryFunction(a)!=null},isc.A.getGroupSummary=function(a,b,c){return b.getGroupSummary!=null?b.getGroupSummary(a,b,c):this.getSummaryValue(a,b)},isc.A.getRecordSummary=function(a,b){var c=isc.isAn.Object(a)?a:this.getEditedRecord(a);if(b.getRecordSummary!=null)return b.getRecordSummary(c,b);for(var d=[],e=this.fields,f=0;f<e.length;f++){var g=e[f];if(g.name==b.name){if(b.partialSummary)break}else{var h=g.includeInRecordSummary;if(h==null&&(g.type=="integer"||
g.type=="float"))h=true;if(h&&g.includeInRecordSummaryFields!=null)if(isc.isA.String(g.includeInRecordSummaryFields)&&g.includeInRecordSummaryFields!=b.name||isc.isAn.Array(g.includeInRecordSummaryFields)&&!g.includeInRecordSummaryFields.contains(b.name))h=false;h&&d.add(g)}}return isc.DataSource.applyRecordSummaryFunction(b.recordSummaryFunction||"sum",c,d,b)},isc.A.shouldApplyRecordSummaryToRecord=function(a){return a&&a.type==this.$71t&&(a.summaryFunction!=null||a.getGroupSummary!=null)},isc.A.calculateRecordSummaries=
function(a){if(this.fields){if(a==null)a=this.getOriginalData();if(!(a==null||isc.isA.ResultSet(a)&&!a.lengthIsKnown())){for(var b=[],c=0;c<this.fields.length;c++){var d=this.getField(c);this.shouldApplyRecordSummaryToRecord(d)&&b.add(d)}if(b.length>0){for(c=0;c<a.getLength();c++){var e=a.get(c);var f=(d=this.getEditValues(e))?isc.addProperties({},e,d):e;if(e!=null)for(var g=0;g<b.length;g++){d=b[g];var h=this.getRecordSummary(f,d);e[d.name]=h}}this.isDirty()||this.markForRedraw()}this.showGridSummary&&
this.summaryRow&&this.summaryRow.recalculateSummaries()}}},isc.A.clearSummaryRow=function(){if(this.summaryRow&&this.summaryRow.masterElement==this){this.summaryRow.clear();this.removePeer(this.summaryRow);this.$wj(this.summaryRow,isc.Canvas.BOTTOM);if(this.isDrawn()){this.clear();this.draw()}}},isc.A.showSummaryRow=function(){if(!(this.summaryRow&&this.summaryRow.masterElement==this)){if(this.summaryRow){this.summaryRow.setDataSource(this.getSummaryRowDataSource());this.summaryRow.setFields(this.completeFields.duplicate());
this.summaryRow.moveTo(this.getBottom()-this.summaryRowHeight);this.summaryRow.setLeft(this.getLeft()+this.getLeftMargin());this.summaryRow.setWidth(this.getWidth());this.summaryRow.recalculateSummaries();this.addPeer(this.summaryRow);this.summaryRow.setBodyFieldWidths(this.$26a.duplicate());this.syncSummaryRowScrolling(this.body.getScrollLeft(),this.body.getScrollTop)}else{var a;if(this.completeFields)a=this.completeFields.duplicate();else if(this.fields)a=this.fields.duplicate();this.summaryRow=
this.createAutoChild("summaryRow",{warnOnReusedFields:false,autoDraw:false,top:this.getBottom()-this.summaryRowHeight,left:this.getLeft()+this.getLeftMargin(),showHeader:false,height:this.summaryRowHeight,getBaseStyle:function(){return this.creator.summaryRowStyle},disabled:this.disabled,width:this.getWidth(),bodyOverflow:"hidden",$67b:function(){},$31s:function(b){if(!this.creator.shouldShowGridSummary(b))return false;return this.Super("$31s",arguments)},dataSource:this.getSummaryRowDataSource(),
getTotalRows:function(){return 1},recalculateSummaries:function(){if(this.dataSource!=null){var b=this.creator.getSummaryRowCriteria(),c=isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.willFetchData(b);this.fetchData(b,null,this.creator.getSummaryRowFetchRequestConfig());c&&this.invalidateCache()}else{delete this.$71q;this.markForRedraw();return this.getRecord(0)}},getCellRecord:function(b){if(this.dataSource!=null)return this.Super("getCellRecord",arguments);if(b!=0)return null;if(this.$71q)return this.$71q;
this.$71q={};this.$71q[this.creator.gridSummaryRecordProperty]=true;this.$71q[this.recordCanSelectProperty]=false;for(var c=this.completeFields||this.fields,d=0;d<c.length;d++){var e=c[d],f=c[d].name;if(this.creator.shouldShowGridSummary(e))this.$71q[f]=this.creator.getGridSummary(e)}return this.$71q},fields:a,getFieldWidths:function(){return this.creator.getFieldWidths()},$315:function(b,c,d){if(this.creator.shouldShowGridSummary(d)){if(b==null)return this.invalidSummaryValue;if(d.formatGridSummary){if(!isc.isA.Function(d.formatGridSummary))d.formatGridSummary=
isc.Func.expressionToFunction("value",d.formatGridSummary);if(isc.isA.Function(d.formatGridSummary))return d.formatGridSummary(b)}return this.Super("$315",arguments)}return d.emptyCellValue!=null?d.emptyCellValue:this.emptyCellValue},$jo:false,$ns:true,masterResized:function(b,c){b!=null&&this.setWidth(this.masterElement.getWidth());c!=null&&this.setTop(this.masterElement.getBottom()-this.masterElement.summaryRowHeight)}});this.addPeer(this.summaryRow)}this.summaryRow.moveAbove(this);this.$wi(this.summaryRow,
isc.Canvas.BOTTOM);if(this.isDrawn()){this.clear();this.draw()}}},isc.A.setShowFilterEditor=function(a){if(this.showFilterEditor!=a){if(this.showFilterEditor=a)this.isDrawn()&&this.makeFilterEditor();else if(this.filterEditor){this.filterEditor.destroy();this.filterEditor=null}if(this.isDrawn()){this.clear();this.draw()}}},isc.A.makeFilterEditor=function(){this.filterEditor=isc.RecordEditor.create({autoDraw:false,warnOnReusedFields:false,$67b:function(){},top:this.getTop()+this.getTopMargin(),left:this.getLeft()+
this.getLeftMargin(),height:this.filterEditorHeight,disabled:this.disabled,sourceWidget:this,ID:this.getID()+"filterEditor",actionType:"filter",destroy:function(){this.sourceWidget.$wj(this,isc.Canvas.TOP);this.Super("destroy",arguments)},fetchDelay:this.fetchDelay},this.filterEditorDefaults,this.filterEditorProperties);this.addPeer(this.filterEditor);this.filterEditor.moveAbove(this);this.$wi(this.filterEditor,isc.Canvas.TOP)},isc.A.getFilterEditorValueMap=function(a){return a.filterEditorValueMap||
a.valueMap},isc.A.getFilterEditorType=function(a){if(a.filterEditorType!=null)return a.filterEditorType;if(isc.SimpleType.inheritsFrom(a.type,"date"))return"MiniDateRangeItem";var b=isc.addProperties({},a,{canEdit:a.canFilter!==false,length:null});b._constructor!=null&&delete b._constructor;if(a.filterEditorType!=null)b.editorType=a.filterEditorType;isc.addProperties(b,a.filterEditorProperties);return isc.DynamicForm.getEditorType(b,this)},isc.A.getFilterEditorProperties=function(a){var b=a.filterEditorProperties||
{};if(a.filterOperator)b.operator=a.filterOperator;return b},isc.A.getFilterEditor=function(){return this.filterEditor},isc.A.setFilterEditorCriteria=function(a){this.filterEditor&&this.setFilterValues(a)},isc.A.getFilterEditorCriteria=function(){if(this.filterEditor)return this.filterEditor.getValuesAsCriteria(this.autoFetchTextMatchStyle)},isc.A.setCriteria=function(a){this.filterEditor!=null&&this.setFilterValues(a);return this.Super("setCriteria",arguments)},isc.A.setFilterValues=function(a){this.$32d=
a||{};this.updateFilterEditor()},isc.A.updateFilterEditor=function(){this.filterEditor&&this.filterEditor.setValuesAsCriteria(this.$32e(),true)},isc.A.$32e=function(){var a=this.$32d;if(this.updateFilterEditorValues!=null)a=this.updateFilterEditorValues(a,this.autoFetchTextMatchStyle);if(a==null){a={};for(var b=0;b<this.completeFields.length;b++)a[this.completeFields[b].name]=this.completeFields[b].defaultFilterValue}return a},isc.A.clearFilterValues=function(){this.$32d=null;this.updateFilterEditor()},
isc.A.handleFilterEditorSubmit=function(a,b){this.filterEditorSubmit!=null&&this.filterEditorSubmit(a)==false||this.filterData(a,null,b)},isc.A.getInitialCriteria=function(){for(var a={},b,c=this.getFields(),d=0;d<c.length;d++)if(c[d].defaultFilterValue!==void 0){b=true;var e=this.getFieldName(c[d]);a[e]=c[d].defaultFilterValue}if(b)isc.addProperties(a,this.initialCriteria);else a=this.initialCriteria;return a},isc.A.$v6=function(a){this.filterEditor!=null&&this.filterEditor.setZIndex(a-1);return this.Super("$v6",
arguments)},isc.A.canEditCell=function(a,b){if(b<0||b>=this.fields.length)return false;var c=this.getCellRecord(a,b);if(c!=null){if(!this.recordIsEnabled(a,b))return false;if(this.$32o==c)return false}var d=this.getField(b);if(d&&d.disabled)return false;if(d&&d.type=="summary")return false;if(!this.isEditable()||this.getCellBooleanProperty("canEdit",a,b,c!=null?this.recordEditProperty:null)==false)return false;return true},isc.A.isEditable=function(){if(this.canEdit==false)return false;if(this.canEdit==
true||this.canEdit==this.$18q)for(var a=this.getFields()||[],b=0;b<a.length;b++){if(a[b].canEdit!=false)return true}else{a=this.getFields()||[];for(b=0;b<a.length;b++)if(a[b].canEdit==true)return true}return false},isc.A.setCanEdit=function(a){if(a==false){this.getEditRow()!=null&&this.cancelEditing(isc.ListGrid.PROGRAMMATIC);this.canEdit=false}else this.canEdit=a},isc.A.setFieldCanEdit=function(a,b){if(isc.isA.String(a))a=this.getField(a);if(!(a==null||!this.completeFields.contains(a)||a.canEdit==
b)){a.canEdit=b;if(this.$30a){var c=this.getEditRow(),d=a[this.fieldIdProperty],e=this.getColNum(a);if(this.editByCell)!b&&e==this.getEditCol()&&this.cancelEditing(isc.ListGrid.PROGRAMMATIC);else if(e>=0){if(!b&&e==this.getEditCol()){d=this.$286.getItem(d).hasFocus;var f=this.findNextEditCell(c,e,-1,true,false,false,true);if(f==null||f[0]!=c)f=this.findNextEditCell(c,e,1,true,false,false,true);if(f==null||f[0]!=c){this.cancelEditing(isc.ListGrid.PROGRAMMATIC);return}this.startEditing(f[0],f[1],!d)}this.refreshCell(this.getEditRow(),
e)}}}},isc.A.handleEditCellEvent=function(a,b,c,d){if(c==this.$51l)this.$51k=true;else delete this.$51k;if(a<0||b<0)return false;if(this.editByCell){if(!this.canEditCell(a,b))return false}else{var e=this.findNextEditCell(a,b,-1,true,true,false,true);if(e==null||e[0]!=a)e=this.findNextEditCell(a,b,1,true,false,false,true);if(e==null||e[0]!=a)return false;b=e[1]}d!==void 0&&this.setEditValue(a,b,d);return this.startEditing(a,b,null,c)},isc.A.startEditing=function(a,b,c,d){if(!this.canEdit&&!(this.completeFields||
this.fields).getProperty("canEdit").or())this.canEdit=true;this.completeFields==null&&this.setFields(this.fields);var e=a==null,f=b==null;if(e||f){e=this.findNextEditCell(e?0:a,f?0:b,1,f,true);if(e==null)this.logInfo("startEditing() passed bad cell coordinates:"+[a,b]);else{this.logInfo("startEditing() using derived coordinates:"+e);a=e[0];b=e[1]}}if(a==null||a<0||a>this.getTotalRows()){this.logWarn("startEditing() passed bad cell coordinates:"+[a,b]+", can't edit","gridEdit");return false}if(!this.canEditCell(a,
b)){this.logInfo("startEditing(): cell "+[a,b]+" is non editable. Returning.","gridEdit");return false}this.$30a?this.$32f(d||isc.ListGrid.PROGRAMMATIC,this.getEditRow(),this.getEditCol(),a,b):this.$31u(a,b,c);return true},isc.A.$32f=function(a,b,c,d,e){var f=this.getEditValue(b,c),g=this.getFieldName(c),h=this.$286,i=h?h.getItem(g):null,j=i?!i.$30w:true;if(i){delete i.$30w;delete i.$30v;this.$32g(i,b,d,e)&&this.$32h(i,c)}g=d!=b;var k=this.$300(b,c);if(j){f=!this.$32i(a,b,c,f);if(g&&!f)f=!this.$32j(a,
b,k);if(f){if(a==isc.ListGrid.EDIT_FIELD_CHANGE){a=this.getFieldName(e);i&&h.getItem(a).hasFocus&&i.focusInItem()}return false}}h=this.autoSaveEdits&&(g&&this.shouldSaveOnRowExit(b,c,a)||this.shouldSaveOnCellExit(b,c,a));if(!h&&this.$32k()){var l;if((i=g&&this.shouldValidateByRow(b,c,a))&&!this.usingCellRecords)l=!this.validateRow(b);else if(i||this.shouldValidateByCell(b,c,a))l=!this.validateCell(b,c);if(this.stopOnErrors&&l)return false}if(h)return this.$32l(d,e,a);else this.$31u(d,e);if(g&&this.isGrouped&&
(!h||!this.shouldSaveLocally()))this.$75i(b)},isc.A.$75i=function(a){if(this.isGrouped&&isc.isA.Tree(this.data)){var b=this.data.get(a),c=b,d=false;if(b!=null){b=this.groupByField;isc.isAn.Array(b)||(b=[b]);a=this.getEditedRecord(a);for(var e=b.length-1;e>=0;e--){var f=b[e];c=this.data.getParent(c);if(c==null||c.groupName!=f){this.logWarn("error updating group for edit value change - unexpected group tree structure. Regrouping.");d=true;break}if(c.groupValue!=a[f]){d=true;break}}if(d){this.regroup();
this.$31n();this.markForRedraw()}return d}}},isc.A.$32g=function(a,b,c,d){if(!isc.Browser.isIE)return false;isc.isA.PopUpTextAreaItem(a)&&a.$32m&&a.$21t.hasFocus||a.hasFocus&&isc.FormItem.$12r(a);if(!this.editByCell&&c==b)return false;a=this.getEditorType(this.getField(d),this.getCellRecord(c,d));return!(a==null||isc.FormItem.$12r(a,true))},isc.A.$31u=function(a,b,c){if(a=="delayed"){c=this.$32n;if(c==null)return;a=c[0];b=c[1];c=c[2]}else if(this.isDrawn()&&(!this.body.readyToRedraw()||this.frozenBody&&
!this.frozenBody.readyToRedraw())){this.$32n||this.delayCall("$31u",["delayed"],0);this.$32n=[a,b,c];return}delete this.$32n;var d=this.getEditRow()!=a;if(!d&&!c&&this.getEditCol()==b)this.getEditForm().focusInItem(this.getEditorName(a,b));else{this.logInfo("Starting editing at row "+a+", colNum "+b,"gridEdit");this.$32o!=null&&this.closeRecord();if(this.$30a)if(this.editByCell||d)this.hideInlineEditor(false,true);if(this.$32p==null||d||this.saveByCell)this.$32p=this.$32q();var e=this.$30a&&this.getEditRow()==
a;this.initializeEditValues(a,b,e);e=this.getCellRecord(a,b);this.selectOnEdit&&e!=null&&this.selectRecordForEdit(e);this.modalEditing&&this.clearLastHilite();if(e==null&&this.addNewBeforeEditing){this.$285=a;this.$30u=b;a=this.shouldWaitForSave();this.saveEdits(isc.ListGrid.PROGRAMMATIC,"this.$32r("+a+","+c+")");if(a)return;else{a=this.$285;b=this.$30u}}this.showInlineEditor(a,b,true,d,c);return true}},isc.A.selectRecordForEdit=function(a){if(!this.editByCell)a.$29m=true;if(this.canSelectCells){var b=
this.getRecordCellIndex(a);this.selection.selectSingleCell(b[0],b[1])}else if(this.selection!=null&&(!this.selection.isSelected(a)||this.selection.multipleSelected()))if(this.selectionType==isc.Selection.NONE)this.logInfo("selectOnEdit is true, but this.selectionType is set to 'none'. Unable to perform a selection on edit.","gridEdit");else this.selectionType==isc.Selection.SIMPLE?this.selection.select(a):this.selection.selectSingle(a);delete a.$29m},isc.A.$51n=function(a){if(!(!isc.isA.TextItem(a)&&
!isc.isA.TextAreaItem(a)&&!(isc.isA.DateItem(a)&&a.useTextField))){var b=isc.isA.DateItem(a)?a.dateTextField.getDataElement():a.getDataElement();if(b)if(this.$51m||!this.autoSelectEditors){b=a.getDataElement().value||"";a.setSelectionRange(b.length,b.length);delete this.$51m}else b.select()}},isc.A.$32r=function(a,b){var c=this.$285,d=this.$30u,e=this.getCellRecord(c,d);if(e!=null&&e!="loading"){var f=this.getEditValues(c,d),g;for(g in e)if(e[g]!=null&&f[g]==null)f[g]=e[g]}a?this.showInlineEditor(c,
d,true,true,b):this.updateEditRow(c)},isc.A.editField=function(a,b){this.completeFields==null&&this.setFields(this.fields);var c;c=isc.isA.Number(a)?a:this.fields.findIndex(this.fieldIdProperty,a);if(b==null){b=this.getEditRow();if(b==null){this.logWarn("editField(): unable to determine which row to edit - returning.","gridEdit");return}}return this.startEditing(b,c)},isc.A.showInlineEditor=function(a,b,c,d,e){if(this.$30a)if(a!=this.getEditRow()||this.editByCell&&b!=this.getEditCol()){this.logWarn("Unexpected call to 'showInlineEditor' during another edit - cancelling previous edit",
"gridEdit");this.cancelEditing();this.startEditing(a,b);return}this.logDebug("showing inline editor at: "+[a,b]+", will focus: "+!e,"gridEdit");var f=this.body&&(!this.body.showAllColumns||!this.body.showAllRows);if(f&&!this.suppressEditScrollIntoView){var g=this.body.scrollRedrawDelay;this.body.scrollRedrawDelay=0;this.scrollCellIntoView(a,b,false);this.body.scrollRedrawDelay=g}this.rollOverCanvas&&this.rollOverCanvas.$289==a&&this.updateRollOverCanvas(this.rollOverCanvas.$289,this.rollOverCanvas.$57n,
true);var h;if(!this.$30a){g=this.makeEditForm(a,b);if(this.$686()&&g){this.logInfo("Edit Form rebuilt with alwaysShowEditors:true, requires full redraw","inactiveEditorHTML");h=true}}this.$285=a;this.$30u=b;this.$31q=a;this.$32s(a,b,h);if(this.body){if(f){var i=this.body;f=i.getRowTop(a);h=i.getRowSize(a);g=i.getScrollTop();i=i.getViewportHeight();f=f<g||f+h>g+i}else f=true;f&&!this.suppressEditScrollIntoView&&this.scrollCellIntoView(a,b,false)}if(this.isDrawn()){this.$32t();a=this.getEditorName(a,
b);b=this.$286.getItem(a);if(b==null)this.logWarn("ListGrid showing inline editor. Unable to get a pointer to the edit form item for field:"+a);else{if(c)b.$30w=true;if(d)b.$30v=true;if(!e){isc.Browser.isMoz&&this.body.getClipHandle();c=isc.EH.lastEvent;c=isc.Browser.isIE&&c.eventType==isc.EH.MOUSE_DOWN&&c.target!=this.$286;if(isc.Browser.isIE)if((d=isc.ListGrid.$32u)&&(d.hasFocus||d.itemHasFocus()))c=true;if(c)this.$32v=isc.Timer.setTimeout(this.$286.getID()+".focusInItem('"+a+"');",0);else{isc.Browser.isMoz&&
this.body.overflow==isc.Canvas.VISIBLE&&this.adjustOverflow();this.$286.focusInItem(a)}}}}},isc.A.$32s=function(a,b,c){var d=this.$30a;this.$30a=true;if(this.isDrawn()&&this.body){var e=this.isEmpty()||!d&&a>=this.data.getLength()&&(this.showNewRecordRow||this.body.getTableElement(a)==null);this.$686();var f=this.getCellRecord(a,b);if(f&&f.$29a!=null&&f.$29a.length>0)c=true;if(c||e||this.body.isDirty()||this.frozenBody&&this.frozenBody.isDirty()){f=this.bodyLayout?this.bodyLayout:this.body;f.redraw("Showing editor")}else if(this.editByCell)this.frozenFields!=
null||this.baseStyle==null?this.refreshRow(a):this.refreshCell(a,b);else{c=this.getDrawnFields();for(e=0;e<c.length;e++)if(!this.isCheckboxField(c[e])){f=c[e];var g=this.$286.getItem(c[e][this.fieldIdProperty]);b=g.colNum;g=!!(d&&g.isDrawn());var h=this.canEditCell(a,b);if(g!=h)this.refreshCell(a,b);else if(this.selectOnEdit||this.lastOverRow){f=f.frozen?this.frozenBody:this.body;f.$29h(this.getCellRecord(a,b),a,b)}}}}},isc.A.$32t=function(){if(this.modalEditing){if(!this.$286.clickMaskUp()){if(!this.$32w)this.$32w=
new Function(this.getID()+".$32x()");this.$286.showClickMask(this.$32w,this.stopOnErrors?isc.EH.SOFT_CANCEL:isc.EH.SOFT,this.$286)}}else this.canHover&&this.stopHover()},isc.A.shouldWaitForSave=function(){if(this.stopOnErrors&&!this.waitForSave){this.waitForSave==false?this.logWarn("Note: ListGrid initialized with 'waitForSave' false, and 'stopOnErrors' true. In this case user input will be be blocked during save, to allow server side  errors to be determined before the editor is hidden. Setting 'waitForSave' to true.",
"gridEdit"):this.logInfo("Note: ListGrid initialized with 'waitForSave' false, and 'stopOnErrors' true. In this case user input will be be blocked during save, to allow server side  errors to be determined before the editor is hidden. Setting 'waitForSave' to true.","gridEdit");this.waitForSave=true}return!!(this.waitForSave||this.stopOnErrors)},isc.A.hideInlineEditor=function(a,b){a=a&&(this.hasFocus||this.body&&this.body.hasFocus||this.getEditForm()&&this.getEditForm().hasFocus||isc.ListGrid.$32u&&
isc.ListGrid.$32u.hasFocus);if(!this.$30a)return false;this.$519=this.$30a=null;var c=this.$285,d=this.$30u;this.$285=this.$30u=null;b||this.$286.hideClickMask();if(this.getEditValues(c,d)!=null&&(!this.$31o||!this.$31o[this.getEditValuesID(c,d)])&&!this.recordHasChanges(c,d,false)){this.logInfo("hideInlineEditor for row with no edits - dropping edit values","gridEdit");this.$321(c,d)}if(!this.body)return true;var e=this.$286;e.hasFocus&&e.blur();if(isc.Browser.isIE){var f=e.getFocusSubItem(),g=isc.EH.$ld;
if(e.hasFocus||g&&(g==e||isc.EH.$ld.form==e)){f.elementBlur();this.$32h(f,d)}}e=this.getCellRecord(c,d);f=false;if(e&&e.$29a!=null&&e.$29a.length>0)f=true;if(!this.body.isDirty()&&(!this.bodyLayout||!this.bodyLayout.isDirty())&&!this.isDirty())if(f||c>=this.getTotalRows())(this.bodyLayout||this.body).markForRedraw("Editor Hidden");else{if(this.editByCell)this.frozenFields!=null||this.baseStyle==null?this.refreshRow(c):this.refreshCell(c,d);else this.refreshRow(c);this.refreshGroupSummary(c)}if(a){this.$30c=
true;this.body.focus()}return true},isc.A.$32h=function(a,b){if(isc.isA.TextItem(a)||isc.isA.TextAreaItem(a)||isc.isA.PopUpTextAreaItem(a)){var c=isc.ListGrid.$32u;if(!c)c=isc.ListGrid.$32u=isc.DynamicForm.create({pointersToThis:[{object:isc.ListGrid,property:"$32u"}],getFocusParkItem:function(){return this.getItem(0)},autoDraw:false,_redrawWithParent:false,ID:"$322",_generated:true,selectOnFocus:true,tabIndex:-1,items:[{name:"textItem",type:"text",handleKeyPress:function(){return false}}],width:1,
height:1,overflow:isc.Canvas.HIDDEN,itemHasFocus:function(){if(this.getFocusParkItem().hasFocus)return true;if(isc.Browser.isIE&&this.isDrawn()&&this.isVisible()&&this.getActiveElement()==this.getFocusParkItem().getFocusElement())return true;return false},redraw:function(){var d=false;if(this.itemHasFocus())d=true;this.Super("redraw",arguments);d&&this.focusInItem(this.getFocusParkItem())}});if(c.parentElement!=this){c.isVisible()&&c.hide();this.addChild(c)}c.moveTo(this.getColumnLeft(b)-this.body.getScrollLeft(),
Math.min((this.showHeader?this.headerHeight:0)+this.getRowTop(this.getEditRow())-this.body.getScrollTop(),this.getScrollHeight()-1));c.moveBelow(this.body);c.show();this.$286.clickMaskUp()&&c.unmask(this.$286.getID());c.getFocusParkItem().focusInItem();a.form.hasFocus=false}},isc.A.makeEditForm=function(a,b){var c=this.getCellRecord(a,b),d=this.getEditDisplayValues(a,b),e;if(this.updateEditorItemsInPlace&&this.$286!=null){e=true;var f=this.editByCell?[this.getField(b)]:this.getDrawnFields();if(f)if(f.length!=
this.$286.getItems().length)e=false;else for(var g=0;g<f.length;g++){var h=f[g],i=this.getEditorName(a,h);i=this.$286.getItem(i);if(i==null||this.getEditorType(h,d)!=this.$286.getEditorType(i)){e=false;break}}if(e&&f){var j=this.getDrawnFieldWidths(c,f);for(g=0;g<f.length;g++){h=f[g];var k=this.getColNum(h);i=this.getEditorName(a,h);i=this.$286.getItem(i);c=this.getRecord(a);var l=this.getEditedRecord(a);c=this.getEditItem(h,c,l,a,k,j[g],true);i.setProperties(c);i.containerWidget=h.frozen?this.frozenBody:
this.body}}else{f=this.getEditRowItems(c,a,b,this.editByCell);this.$286.setItems(f)}this.$286.setValues(d)}else{f=this.getEditRowItems(c,a,b,this.editByCell);this.$286=isc.DynamicForm.create(this.editFormDefaults,{grid:this,locatorParent:this,showErrorIcons:this.showErrorIcons,tabIndex:this.getTabIndex(),dataSource:this.dataSource,autoComplete:this.autoComplete,uniqueMatch:this.uniqueMatch,autoFocus:false,items:f,values:d})}this.logIsDebugEnabled()&&this.logDebug("editRowForm created with values: "+
this.echo(this.$286.getValues()),"gridEdit");return!e},isc.A.getEditForm=function(){return this.$286},isc.A.getEditFormItem=function(a){var b=this.getEditForm();if(!b)return null;var c=this.getEditorName(this.getEditRow(),a);if((b=b.getItem(c))&&b.colNum==a)return b},isc.A.getEditFormValue=function(a){return(a=this.getEditFormItem(a))?a.getValue():null},isc.A.$33g=function(){if(this.$286){var a=this.getEditRow(),b=this.getEditCol();this.$286.setValues(this.getEditDisplayValues(a,b))}},isc.A.getEditDisplayValues=
function(a,b){var c=this.getEditValues(a,b),d=this.getCellRecord(a,b),e={},f;for(f in d)e[f]=d[f];for(f in c)e[f]=c[f];return e},isc.A.getEditFormItemFieldWidths=function(){for(var a=[],b=0;b<this.fields.length;b++){var c=this.getLocalFieldNum(b);a[b]=(this.fields[b].frozen?this.frozenBody:this.body).getInnerColumnWidth(c)}return a},isc.A.getEditorValueMap=function(a,b){if(a.getEditorValueMap!=null){isc.Func.replaceWithMethod(a,"getEditorValueMap","values,field,grid");return a.getEditorValueMap(b,
a,this)}if(a.editorValueMap!=null)return a.editorValueMap;if(a.editorProperties&&a.editorProperties.valueMap)return a.editorProperties.valueMap;return a.valueMap},isc.A.getEditorValueIcons=function(a){return a.editorValueIcons||a.valueIcons},isc.A.getEditorValueIconWidth=function(a){if(a.editorValueIconWidth!=null)return a.editorValueIconWidth;return a.valueIconWidth!=null?a.valueIconWidth:a.valueIconSize},isc.A.getEditorValueIconHeight=function(a){if(a.editorValueIconHeight!=null)return a.editorValueIconHeight;
return a.valueIconHeight!=null?a.valueIconHeight:a.valueIconSize},isc.A.setEditorValueMap=function(a,b){var c=this.getColNum(a),d=this.getField(a),e=d[this.fieldIdProperty];d.editorValueMap=b;if(this.$30a){c=this.getEditedRecord(this.getEditRow(),c);this.$286.setValueMap(e,this.getEditorValueMap(d,c))}},isc.A.getEditorType=function(a){a=isc.addProperties({},a,a.editorProperties);return isc.DynamicForm.getEditorType(a,this)},isc.A.getEditorProperties=function(a){return isc.addProperties({},this.editorProperties,
a.editorProperties)},isc.A.getEditRowItems=function(a,b,c,d){if(this.body==null)return[];var e=[],f=[],g=this.getEditedRecord(b,c);c=d?[this.getField(c)]:this.getDrawnFields();e=this.getDrawnFieldWidths(a,c);if(c!=null)for(d=0;d<c.length;d++){var h=this.getColNum(c[d]);h=this.getEditItem(c[d],a,g,b,h,e[d]);if(h!=null)f[f.length]=h}return f},isc.A.getDrawnFields=function(){if(!this.body)return null;var a=[],b=this.body,c=this.frozenFields,d=this.freezeLeft();c&&d&&a.addList(c);var e;if(b.$254==null||
b.isDirty()||b.$58p){b=b.getDrawArea();e=b[2];b=b[3]}else{e=b.$254;b=b.$255}if(c&&d){e+=c.length;b+=c.length}for(e=e;e<=b;e++)a.add(this.fields[e]);c&&!d&&a.addList(c);return a},isc.A.getDrawnFieldWidths=function(a,b){b||(b=this.getDrawnFields());if(!b)return null;for(var c=this.getEditFormItemFieldWidths(a),d=[],e=0;e<b.length;e++)d[e]=c[b[e].masterIndex];return d},isc.A.$323=function(a,b,c){return this.grid.editorKeyPress(this,b,c)},isc.A.$54z=function(a,b,c){return this.grid.editorKeyDown(this,
b,c)},isc.A.$62k=function(){var a=this.grid,b,c,d;if(a.$30a)if(!a.editByCell){b=a.$285;c=this.getFieldName();c=a.fields.findIndex(a.fieldIdProperty,c);if(d=a.$30u!=c){a.setNewEditCell(b,c);a.cellEditEnd(isc.ListGrid.EDIT_FIELD_CHANGE)}}},isc.A.$324=function(){var a=this.grid,b=this.getFieldName(),c=a.getEditRow();b=a.getCellStyle(a.getRecord(c),c,a.getColNum(b));return a.getRowPageTop(c)+isc.Element.$tn(b)+isc.Element.$tt(b)},isc.A.$581=function(a,b,c,d){if(!this.hasFocus){var e=this.grid;e.setNewEditCell(this.rowNum,
this.colNum);e.cellEditEnd(isc.ListGrid.EDIT_FIELD_CHANGE);this.$30w=true}return this.invokeSuper("CheckboxItem","handleClick",a,b,c,d)},isc.A.handleEditorChanged=function(a){var b=a.getFieldName(),c=this.getField(b);if(c&&c.validateOnChange!=null?c.validateOnChange:this.validateOnChange){c=this.getEditRow();c==null||c!=a.rowNum||this.validateCell(c,b,false,true)}},isc.A.$325=function(a,b,c,d){this.invokeSuper(this.getClassName(),"handleChanged",a,b,c,d);this.destroyed||this.grid.handleEditorChanged(this)});
isc.B.push(isc.A.$45p=function(){var a=this.grid;if(!a)return null;var b=a.getField(this.getFieldName());if(b.autoComplete!=null)return b.autoComplete;if(a.autoComplete!=null)return a.autoComplete;return this.Super("$17h",arguments)},isc.A.getEditItem=function(a,b,c,d,e,f,g){var h={};h.width=f;h.record=b;h.rowNum=d;h.colNum=e;d=this.getEditorName(d,a);h[this.fieldIdProperty]=d;h.valueMap=this.getEditorValueMap(a,c);if(a.valueField!=null)h.valueField=a.valueField;if(a.displayField!=null)h.displayField=
a.displayField;if(a.optionDataSource)h.optionDataSource=a.optionDataSource;if(a.optionFilterContext)h.optionFilterContext=a.optionFilterContext;if(a.optionCriteria)h.optionCriteria=a.optionCriteria;if(a.optionOperationId!=null)h.optionOperationId=a.optionOperationId;h.valueIcons=this.getEditorValueIcons(a,c);c=this.getEditorValueIconWidth(a);d=this.getEditorValueIconHeight(a);if(c)h.valueIconWidth=c;if(d)h.valueIconHeight=d;h.imageURLPrefix=a.editorImageURLPrefix||a.imageURLPrefix;h.imageURLSuffix=
a.editorimageURLSuffix||a.imageURLSuffix;h.baseURL=a.baseURL;h.imgDir=a.imgDir;if(a.icons!==void 0)h.icons=a.icons;if(a.showPickerIcon!==void 0)h.showPickerIcon=a.showPickerIcon;if(a.pickerIconSrc!==void 0)h.pickerIconSrc=a.pickerIconSrc;if(a.pickerIconWidth!==void 0)h.pickerIconWidth=a.pickerIconWidth;if(a.pickerIconHeight!==void 0)h.pickerIconHeight=a.pickerIconHeight;if(a.defaultIconSrc!==void 0)h.defaultIconSrc=a.defaultIconSrc;c=a.editorIconHeight||a.iconHeight;if(c!==void 0)h.iconHeight=c;c=
a.editorIconWidth||a.iconWidth;if(c!==void 0)h.iconWidth=c;if(a.iconPrompt!==void 0)h.iconPrompt=a.iconPrompt;if(a.iconHSpace!==void 0)h.iconHSpace=a.iconHSpace;if(a.iconVAlign!==void 0)h.iconVAlign=a.iconVAlign;if(this.showValueIconOnly(a)){if(a.editorProperties==null)a.editorProperties={};a.editorProperties.showValueIconOnly=true}if(a.pickListWidth!=null)h.pickListWidth=a.pickListWidth;if(a.pickListFields!=null)h.pickListFields=a.pickListFields;h.textAlign=a.cellAlign||a.align;if(a.editorProperties!=
null)for(c=0;c<this.$31c.length;c++){d=this.$31c[c];e=a.editorProperties[d];if(e!=null&&!isc.isA.Function(e)){f=isc.FormItem._stringMethodRegistry;a.editorProperties[d]=e=isc.Func.expressionToFunction(f[d],e)}if(e!=null)a.editorProperties[d]=e}for(c=0;c<this.$45k.length;c++){d=this.$45k[c];if(!(a.editorProperties&&a.editorProperties[d]!=null)){e=a[d];if(e!=null){if(a.editorProperties==null)a.editorProperties={};if(!isc.isA.Function(e)){f=isc.FormItem._stringMethodRegistry;e=isc.Func.expressionToFunction(f[d],
e)}a.editorProperties[d]=e}}}h.valueIconLeftPadding=this.getValueIconLeftPadding(a);h.valueIconRightPadding=this.getValueIconRightPadding(a);if(!g){h.$17h=this.$45p;h.autoCompleteCandidates=a.autoCompleteCandidates;h.uniqueMatch=a.uniqueMatch;h.containerWidget=a.frozen?this.frozenBody:this.body;h.grid=this;h.handleChanged=this.$325;h.keyDown=function(i,j,k){return this.form.grid.editorKeyDown(i,k)};h.inactiveEditorMouseDown=function(i){i&&i.grid==this.form.grid.getID()&&i.rowNum!=null&&i.colNum!=
null&&this.form.grid.startEditing(i.rowNum,i.colNum)};h.type=a.type;h.editorType=this.getEditorType(a,b);g=h.editorType;if(this.$308[g]==true||this.$68k[g]==true||a.type==this.$g4&&g==null){h.editorType=this.$68k[g]==true?this.$68l:this.$g4;h.useTextField=true;h.cellPadding=0;h.itemCellStyle=null;h.pickerIconHSpace=0;if(c=this.$45i(a))h.displayFormat=c;if(c=this.$45j(a))h.inputFormat=c}if(this.$307[g]==true||a.type==this.$g5&&g==null)if(c=this.$30o(a))h.displayFormat=c;if(this.$309[g]==true){h.getTextBoxStyle=
function(){var i=this.grid,j=i.getCellRecord(this.rowNum,this.colNum);this.textBoxStyle=i.getCellStyle(j,this.rowNum,this.colNum);return this.Super("getTextBoxStyle",arguments)};h.gridCellStyleChanged=function(i,j,k,l){if(i=this.$15h())i.className=this.textBoxStyle=l};h.textBoxCellCSS=isc.Canvas.$42a;h.textAreaKeyDown=this.$54z;h.textAreaKeyPress=this.$323;h.getTextAreaTop=this.$324;if(h.popUpOnEnter==null)h.popUpOnEnter=true;h.textAreaFocus=this.$62k}if(this.$31a[g]==true||a.type==this.$g2&&g==null){if(h.showLabel==
null)h.showLabel=false;if(h.handleClick==null)h.handleClick=this.$581}h.elementFocus=this.$30t;h.canTabToIcons=false;h.focusInItem=this.$51o}a=this.getEditorProperties(a,b);isc.addProperties(h,a);return h},isc.A.$51o=function(){this.Super("focusInItem",arguments);this.grid.$51n(this)},isc.A.getEditorName=function(a,b,c){b=this.getField(b);if(!b)return null;if(c&&b.dataPath)return b.dataPath;return b[this.fieldIdProperty]},isc.A.refreshCell=function(a,b,c,d){if(a==null)this.logInfo("ListGrid.refreshCell(): first parameter rowNum not present, returning");
else if(this.isDrawn()&&this.body){var e=this.getFieldBody(b);if(e.isDirty()){this.logDebug("refresh cell redrawing body","gridEdit");e.redraw("refresh cell");return false}this.$686(this.getField(b),true)&&this.$69l(a,b);var f=this.getLocalFieldNum(b);e.refreshCellStyle(a,f);e.shouldRefreshCellHTML()||this.refreshCellValue(a,b,c,d)}},isc.A.refreshCellValue=function(a,b,c,d){if(this.isDrawn()&&this.body){var e=this.getFieldBody(b),f=this.getLocalFieldNum(b);if(e.$29l(a,f)){var g=this.getEditorName(a,
b);this.getFieldName(b);c=this.$286;var h,i=false,j,k;if(c){h=c.getItem(g);g=this.$30a&&a==this.getEditRow();if(h&&h.colNum!=b)h=null;if(g){j=h&&h.isDrawn();k=this.canEditCell(a,b);if(h!=null&&c.hasFocus){i=c.getFocusSubItem();i=i==h||h.items&&h.items.contains(i)}}else if(h&&h.rowNum==a){k=false;j=h.isDrawn()}}if(!(!d&&i&&j&&k)){if(j){this.getUpdatedEditorValue();if(h!=null){if(i)k?c.$106():h.blurItem();k&&h.redrawing()}}e.refreshCellValue(a,f);if(h&&(j||k)){this.$30b(h,null,e);if(k){h.setValue(this.getEditDisplayValue(a,
b));i&&c.$11b(h)}}}}else this.delayCall("refreshCellValue",[a,b,c,d])}},isc.A.refreshRow=function(a){if(this.body&&this.isDrawn()){var b=this.frozenFields&&this.frozenFields.length>0;if(b&&!this.frozenBody)b=false;var c=false;if(this.body.isDirty())c=true;if(b&&!c)if(this.frozenBody.isDirty()||this.bodyLayout.isDirty())c=true;if(c)return(b?this.bodyLayout:this.body).redraw("refresh row");this.$30a&&this.$286!=null&&this.logInfo("refresh row: "+a,"gridEdit");if(b)for(b=0;b<this.frozenFields.length;b++)this.refreshCell(a,
this.getFieldNum(this.frozenFields[b]),true);c=this.body.$255;for(b=this.body.$254;b<=c;b++){var d=this.getFieldNumFromLocal(b,this.body);this.refreshCell(a,d,true)}}},isc.A.startEditingNew=function(a,b){if(!this.canEdit&&!(this.completeFields||this.fields).getProperty("canEdit").or())this.canEdit=true;if(isc.isAn.Array(this.data)&&this.data.length==0&&this.dataSource&&!this.saveLocally){this.fetchData(null,null,{$326:true});this.data.setFullLength(0)}var c=this.body?this.body.getTotalRows():this.getTotalRows();
if(this.showNewRecordRow)c-=1;c=this.findNextEditCell(c,0,1,true,true,true);if(c==null)this.logInfo("startEditingNew() failed to find any editable fields in this grid.","gridEdit");else{a!=null&&this.setEditValues(c,isc.addProperties({},a),true);this.startEditing(c[0],c[1],b)}},isc.A.updateEditRow=function(a){if(!(this.$285!=a||!this.$286)){this.$286.setItemValues();delete this.$286.$10u;this.$286.$327=false}},isc.A.shouldFixRowHeight=function(a,b){if(this.canEdit!=false&&this.$30a&&b==this.$285)return false;
return this.fixedRecordHeights},isc.A.$32q=function(){if(this.$328==null)this.$328=isc.timeStamp();return this.$328++},isc.A.$32x=function(){this.getEditRow();this.cellEditEnd(isc.ListGrid.CLICK_OUTSIDE)},isc.A.getEditDisplayValue=function(a,b,c){if(c===void 0)c=this.getCellRecord(a,b);var d=this.$30y(a,b);if(d===void 0&&c!=null)d=this.getRawCellValue(c,a,b);return d=this.$329(d,c,a,b)},isc.A.$329=function(a,b,c,d){if(b==null)b=this.$300(c,d);var e=this.fields[d];if(e&&e.formatEditorValue!=null){isc.Func.replaceWithMethod(e,
"formatEditorValue","value,record,rowNum,colNum,grid");a=e.formatEditorValue(a,b,c,d,this)}else if(this.formatEditorValue!=null)a=this.formatEditorValue(a,b,c,d);return a},isc.A.getEditValuesID=function(a){if(a==null||this.$52b==null)return null;if(isc.isA.String(a)&&this.$52b[a]!=null)return a;if(isc.isA.Number(a))return this.$33a[a];for(var b in this.$52b){var c=this.$52b[b];if(c==a)return b;if((c=c.$33b)&&this.comparePrimaryKeys(c,a))return b}return null},isc.A.getEditSession=function(a,b){if(this.$52b==
null)return null;isc.isA.String(a)||(a=this.getEditValuesID(a,b));return this.$52b[a]},isc.A.getEditSessionRowNum=function(a){a=this.getEditSession(a);return a!=null?a.$24t:null},isc.A.getEditSessionColNum=function(a){a=this.getEditSession(a);return a!=null?a.$24u:null},isc.A.getAllEditRows=function(a){return this.getAllEditCells(a,true)},isc.A.getAllEditCells=function(a,b){var c=this.$52b,d=[];if(!c)return d;if(a)return isc.getKeys(this.$52b);for(var e in c){var f=c[e].$24t;f=parseInt(f);if(!(f==
null||f<0||isNaN(f)))if(b)d[d.length]=f;else{var g=c[e].$24u;if(g==null)g=this.$30a&&f==this.getEditRow()?this.getEditCol():this.getRowEditColNum(f);if(g!=null&&!isc.isA.Number(g))g=parseInt(g);d[d.length]=[f,g]}}return d},isc.A.getEditValues=function(a,b){if(a==null)return this.logWarn("getEditValues() called with no valuesID");if(b==null&&isc.isA.Array(a)){b=a[1];a=a[0]}var c=isc.isA.Number(a)?a:this.getEditSessionRowNum(a);this.$30a&&this.getEditRow()==c&&this.storeUpdatedEditorValue();return this.$300(a,
b)},isc.A.$300=function(a,b){var c=this.getEditSession(a,b);return c!=null?c.$31x:null},isc.A.getEditedRecord=function(a,b,c){if(a==null)return this.logWarn("getEditedRecord() called with no valuesID");if(!isc.isA.Number(a)){a=this.getEditSessionRowNum(a);b=this.getEditSessionColNum(a)}var d=this.getCellRecord(a,b);a=c?this.$300(a,b):this.getEditValues(a,b);return isc.addProperties({},d,a)},isc.A.getEditedCell=function(a,b){if(a==null||b==null)return this.logWarn("getEditedCell() called with no record / field parameter");
var c=this.getEditValues(a,b),d=isc.isA.Number(a)?a:this.getEditSessionRowNum(a),e=isc.isA.Number(b)?b:this.getFieldNum(b);a=this.getCellRecord(d,e);d=this.getEditorName(d,this.getField(e));if(c&&c[d]!==void 0)return c[d];return a?a[d]:null},isc.A.rememberSubmittedEditValues=function(a){a=this.getEditSession(a);if(a!=null)a.$33e=isc.addProperties({},a.$31x)},isc.A.getSubmittedEditValues=function(a,b){var c=this.getEditSession(a,b);return c!=null?c.$33e:null},isc.A.clearSubmittedEditValues=function(a,
b){var c=this.getEditSession(a);if(c!=null){var d=c.$33e;if(d){for(var e in b)d[e]==b[e]&&delete d[e];if(isc.isA.emptyObject(d))c.$33e=null}}},isc.A.createEditValues=function(a){var b=this.body.getTotalRows();this.setEditValues(b,a);return this.getEditValuesID(b)},isc.A.initializeEditValues=function(a,b,c){this.$300(a,b)==null&&this.setEditValues([a,b],{},c)},isc.A.setEditValues=function(a,b,c){var d;if(isc.isAn.Array(a)){d=a[1];a=a[0]}if(isc.isA.Number(a)){if(b==null)b={};var e,f,g=true;if(!c){var h=
this.getCellRecord(a,d);if(h==null)h={};else g=false;e=this.getEditValues(a,d);if(e!=null)g=false;f=isc.addProperties({},e);for(var i in f)f[i]=h[i];isc.addProperties(f,b)}if(this.logIsInfoEnabled("gridEdit"))(e=e||this.getEditValues(a,d))||this.logInfo("establishing new edit session at row: "+a+(d!=null?", col:"+d:"")+(this.logIsDebugEnabled("gridEdit")?" with values: "+this.echo(b):""),"gridEdit");this.$33f(a,d,b);if(c||!this.isDrawn()||!this.body)this.summaryRow&&this.showGridSummary&&this.summaryRow.recalculateSummaries();
else{a<this.data.getLength()&&this.calculateRecordSummaries([this.data.get(a)]);if(g||this.body.isDirty()){this.isEditingRecord(a,d)&&this.$286!=null&&this.$33g();this.body.markForRedraw();this.summaryRow&&this.showGridSummary&&this.summaryRow.recalculateSummaries()}else this.$50r(a,d,f)}}else this.logWarn("setEditValues() called with bad rowNum: "+this.echo(a))},isc.A.$50r=function(a,b,c,d){if(c){b=this.isEditingRecord(a,b)&&this.$286!=null;for(var e in c){var f=this.getColNum(e),g;if(b){this.$286.setValue(e,
c[e]);g=this.$286.getItem(e);g=f>=0&&g&&this.canEditCell(a,f)}if(f!=-1)if(g)d&&d[e]&&this.showCellErrors(a,f);else this.refreshCell(a,f)}this.summaryRow&&this.showGridSummary&&this.summaryRow.recalculateSummaries();this.refreshGroupSummary(a)}},isc.A.$33f=function(a,b,c,d){var e=this.getCellRecord(a,b);b=this.getEditSession(a,b)||this.createEditSession(a,b,e,d);if(this.dataSource!=null)if(e=="loading")b.$33i=true;else if(e!=null){d=this.getDataSource().getPrimaryKeyFieldNames();for(var f=0;f<d.length;f++)c[d[f]]=
e[d[f]]}if(e==null){b.$33i=true;e=this.completeFields||this.fields||[];for(f=0;f<e.length;f++){var g=e[f];d=g[this.fieldIdProperty];if(c[d]===void 0){g=this.getDefaultEditValue(d,g);if(g!=null)c[d]=g}}}for(f in b.$31x)delete b.$31x[f];for(f in c)b.$31x[f]=c[f];if(this.$33j==null||a>=this.$33j)this.$33j=a},isc.A.getDefaultEditValue=function(a,b){var c=b.defaultValue;if(c==null&&this.enumCriteriaAsInitialValues&&b.type=="enum"&&this.$32d!=null&&this.$32d[a]!=null)c=this.$32d[a];return c},isc.A.createEditSession=
function(a,b,c,d){var e={};if(c!=null&&c!=Array.LOADING)e.$33b=this.getPrimaryKeys(c);e.$24t=a;if(this.useCellRecords){e.$24u=b;if(this.getCellFacetValues)e.$507=this.getCellFacetValues(a,b)}e.$31x={};if(this.$52b==null)this.$52b={};if(d==null){if(this.$33k==null)this.$33k=0;d="_"+this.$33k++}this.$52b[d]=e;if(this.$33a==null)this.$33a={};this.$33a[a]=d;return e},isc.A.setEditValue=function(a,b,c,d,e){if(isc.isA.String(a))isc.logWarn("Warning: first parameter rowNum is a string, expecting a number");
else{var f=isc.isA.String(b)?b:this.getEditorName(a,b,true);if(isc.isA.String(b))b=this.getFieldNum(b);if(this.$33l(a,b,f,c,e)){if((e=this.getField(f))&&this.$425(e)){var g,h=this.getEditForm();if(h&&this.getEditRow()==a&&this.fieldValuesAreEqual(e,h.getValue(f),c))g=h.getValue(e.displayField);if(g==null){g=this.data;if(isc.ResultSet&&isc.isA.ResultSet(g))g=g.localData;if(g)g=(g=g.find(f,c))?g[e.displayField]:c;else g=c}this.setEditValue(a,e.displayField,g,d,true)}if(d)this.summaryRow&&this.showGridSummary&&
this.summaryRow.recalculateSummaries();else{this.setRowEditFieldName(a,f);if(isc.isA.Number(a))isc.isA.Number(b)||(b=this.getFieldNum(b));else{b=this.getEditSessionColNum(a);a=this.getEditSessionRowNum(a)}d={};d[f]=c;this.$50r(a,b,d)}}}},isc.A.$33l=function(a,b,c,d,e){var f=true,g=false,h,i;h=this.getEditSession(a,b);if(h!=null){h=h.$31x;i=isc.Canvas.$70o(c,h)}else{this.logInfo("creating new edit values for row: "+a,"gridEdit");this.initializeEditValues(a,b,true);h=this.getEditSession(a,b);h=h.$31x}if(i===
void 0)i=(i=this.getCellRecord(a,b))?isc.Canvas.$70o(c,i):null;else g=true;if(this.fieldValuesAreEqual(this.getField(c),i,d))f=false;if(d===void 0)isc.Canvas.$70m(c,h);else if(g||f)isc.Canvas.$70n(c,d,h);f&&!e&&this.$33m(a,b,d,i);return f},isc.A.setRowEditFieldName=function(a,b){var c=this.getEditSession(a);if(!c){c=this.getColNum(b);this.setEditValues([a,c],null,true);c=this.getEditSession(a)}if(isc.isA.Number(b))b=this.getFieldName(b);c.$33n=b},isc.A.getRowEditFieldName=function(a){return(a=this.getEditSession(a))?
a.$33n:null},isc.A.getRowEditColNum=function(a){return(a=this.getRowEditFieldName(a))?this.getColNum(a):null},isc.A.getEditValue=function(a,b){var c=b;if(isc.isA.String(b))b=this.getColNum(b);this.$30a&&this.getEditRow()==a&&this.getEditCol()==b&&this.storeUpdatedEditorValue();return this.$30y(a,c)},isc.A.$30y=function(a,b){var c=this.$300(a,b);if(c!=null){isc.isA.String(b)||(b=this.getEditorName(a,b,true));return isc.Canvas.$70o(b,c)}},isc.A.clearEditValue=function(a,b,c,d){var e=isc.isA.Number(a)?
a:this.getEditSessionRowNum(a),f=b;if(isc.isA.Number(f))f=this.getEditorName(e,f);else b=this.getColNum(f);this.$30a&&this.getEditRow()==e&&this.getEditFieldName()==f&&this.storeUpdatedEditorValue(true);e=this.getEditSession(a,b);if(e!=null){var g=e.$31x,h=false,i=e.$33e,j=e.$33o,k=j&&j[f];e=e.$24t;if(g!=null){var l=this.getRecord(e);h=isc.propertyDefined(g,f)&&(e==null||l==null||!this.fieldValuesAreEqual(this.getField(f),g[f],l[f]));delete g[f];i&&delete i[f];j!=null&&delete j[f];if(!d&&isc.isAn.emptyObject(g)){this.logDebug("no edit values left for row, discarding editSession",
"gridEdit");return this.$321(a,b,c)}}(g=this.getField(f))&&this.$425(g)&&g.displayField!=f&&this.clearEditValue(a,g.displayField,c,d);if(!(c||e==null))if(h){var m;if(this.$30a&&this.getEditRow()==e){this.$286.setValue(f,l?l[f]:null);m=b>=0&&this.canEditCell(e,b)&&this.$286.getItem(f)}b>=0&&!m&&this.refreshCell(e,b)}else k&&b>=0&&k&&this.showCellErrors(e,b)}},isc.A.$321=function(a,b,c){if(a!=null){isc.isA.String(a)||(a=this.getEditValuesID(a,b));var d=this.getEditSession(a);if(d!=null){var e=d.$24t;
e!=null&&delete this.$33a[e];if(b==null)b=d.$24u;var f=this.$52b[a];delete this.$52b[a];a=this.$34e();delete this.$33j;if(e!=null&&d.$33i){b=this.getEditRow();for(f=e+1;f<=a;f++){this.getEditSession(f).$24t=f-1;this.$33a[f-1]=this.$33a[f];delete this.$33a[f]}if(b!=null&&b>e)this.$285-=1;if(!c){if(this.$30a)if(e==b)this.hideInlineEditor();else e<b&&this.$50s(b-1,null,"Earlier temp edit row removed");this.body&&this.body.markForRedraw("clear edit values, remove row")}}else if(e!=null&&!c){c={};a=this.data.get(e);
for(var g in f.$31x)c[g]=a?a[g]:null;this.$50r(e,b,c,f.$33o)}}}},isc.A.newRecordForEditValues=function(a,b){var c=this.getEditSession(a),d=c.$31x;c.$33b=this.getPrimaryKeys(b);for(var e=this.getDataSource().getPrimaryKeyFieldNames(),f=0;f<e.length;f++){var g=e[f];d[g]=b[g]}delete c.$33i},isc.A.$31n=function(a){delete this.$33j;delete this.$33q;if(this.$52b!=null){for(var b=this.getEditRow(),c=this.getEditCol(),d=false,e=this.data.getLength(),f={},g=isc.getKeys(this.$52b),h=0;h<g.length;h++){var i=
g[h],j=this.$52b[i],k=this.$52p(j,e);j.$33b==null&&e++;if(k!=null){var l=k[0];k=k[1];if(l!=null&&l>=0){if(b!=null&&b==j.$24t&&(!this.useCellRecords||c==j.$24u)){d=true;a||this.$50s(l,k,"remapEditRows")}f[l]=i;j.$24t=l;if(this.useCellRecords)j.$24u=k}else{l=this.getOriginalData();if((l=!this.dataSource||this.saveLocally||isc.ResultSet&&isc.isA.ResultSet(l)&&l.allRowsCached())&&(!this.isGrouped||!this.data.find(j.$33b))){this.logWarn("Record:"+this.echo(j.$33b)+", is no longer present in this List.<br>Clearing edit values for this record.");
delete this.$52b[this.getEditValuesID(i)]}else{this.logWarn("Record:"+this.echo(j.$33b)+(l?", hidden in grouped tree data. ":", lost from local cache in paged result set. ")+"Pending edits for this record will be maintained.");delete j.$24t;delete j.$24u;this.$33q=true}}}}this.$33a=f;b!=null&&!d&&!a&&this.hideInlineEditor(true)}},isc.A.$74c=function(){if(!(!this.body||this.body.$29a==null)){for(var a=this.body.$29a,b=[],c=0;c<a.length;c++){var d=a[c],e=this.findRowNum(this.getPrimaryKeys(d.embeddedRecord)),
f;if(e>=0){f=this.data.get(e);if(!f.$29a)f.$29a=[];if(!f.$29a.contains(d)){d.$289=e;d.embeddedRecord=f;f.$29a.add(d);if(d.isExpansionComponent)f.expanded=true}}else if(this.$74d==false||this.showRecordComponents&&this.recordComponentPoolingMode=="data")b.add(d)}if(b.length>0)for(c=0;c<b.length;c++){a=b[c];if(this.canExpandRecords){this.$74a--;this.$74b&&this.$74b==a.embeddedRecord&&delete this.$74b}this.body.$29a.remove(a);this.shouldDestroyOnUnembed(a,this.$81l)?a.markForDestroy():a.deparent()}}},
isc.A.$75n=function(a){if(a.$29a!=null){for(var b=a.$29a,c={},d=false,e=0;e<a.fields.length;e++)c[a.fields[e].name]=e;var f=[];for(e=0;e<b.length;e++){var g=b[e].$81k;if(g!=null){g=c[g];if(g==null)f[f.length]=b[e];else if(b[e].$57n!=g){d=true;b[e].$57n=g}}}if(f.length>0)for(e=0;e<f.length;e++){b=f[e];a.removeEmbeddedComponent(b.embeddedRecord,b);this.shouldDestroyOnUnembed(b,this.$81p)&&b.markForDestroy()}d&&a.$29d()}},isc.A.$52p=function(a,b){var c,d,e=a.$33b;if(e==null)c=b;else{d=a.$31x;var f=false;
if(a.$33o!=null&&!isc.isA.emptyObject(a._validationErrors_))f=true;else for(c in d)if(d[c]!=e[c]||e[c]===void 0){f=true;break}if(!f&&a.$24t!=null&&!this.isEditingRecord(a.$24t,a.$24u)){this.logInfo("dropping empty editSession","gridEdit");delete this.$52b[this.getEditValuesID(a)];return null}c=this.findRowNum(e,a);d=this.findColNum(e,a)}return[c,d]},isc.A.$wo=function(a,b,c,d,e){if(!e&&this.confirmDiscardEdits&&this.dataSource!=null)if(this.hasChanges()&&!(isc.ResultSet&&isc.isA.ResultSet(this.data)&&
this.data.compareCriteria(b,this.data.getCriteria())==0)){this.showLostEditsConfirmation({target:this,methodName:"$33r"},{target:this,methodName:"$33s"});this.$33t={type:a,criteria:b,callback:c,requestProperties:d};return}this.setFilterValues(b);return this.Super("$wo",[a,b,c,d],arguments)},isc.A.$33r=function(){var a=this.$33t,b=a.type,c=a.criteria,d=a.callback;a=a.requestProperties;delete this.$33t;this.$wo(b,c,d,a,true)},isc.A.$33s=function(){delete this.$33t},isc.A.showLostEditsConfirmation=function(a,
b){this.$33u=a;this.$33v=b;isc.confirm(this.confirmDiscardEditsMessage,"if(window[this.targetGridID])window[this.targetGridID].lostEditsCallback(value, this);",{targetGridID:this.getID(),buttons:[isc.Dialog.OK,{title:this.discardEditsSaveButtonTitle,width:75,click:"this.hide();this.topElement.returnValue('save');"},isc.Dialog.CANCEL]})},isc.A.lostEditsCallback=function(a,b){var c=this.$33u,d=this.$33v;delete this.$33u;delete this.$33v;if(a==null)this.fireCallback(d);else if(a==true){this.discardAllEdits();
this.fireCallback(c)}else a=="save"&&this.saveAllEdits(null,c);b.targetGrid=null},isc.A.findRowNum=function(a){return this.data.indexOf(a)},isc.A.findColNum=function(){return-1},isc.A.$50s=function(a,b,c){if(!(!this.$30a||a==this.$285)){var d=this.$285;this.logInfo(c+": editSession: "+this.getEditValuesID(a)+" with values: "+this.echo(this.$300(a,b))+" was being edited at row: "+d+", will now edit at row: "+a,"gridEdit");this.$285=a;if(b=(b=this.$286)?b.getItems():null)for(c=0;c<b.length;c++)b[c].rowNum=
a}},isc.A.rowEditNotComplete=function(a){return this.$33a!=null&&this.$33a[a]!=null},isc.A.$33m=function(a,b,c,d){var e=this.getCellRecord(a,b);this.editorChange!=null&&this.editorChange(e,c,d,a,b);var f=this.getFieldName(b);this.editValueChanged!=null&&this.editValueChanged(a,f,c,d);if(this.$30a&&this.isEditingRecord(a,b)&&this.fields!=null){isc.addProperties({},this.$300(a,b),e);c=!this.editByCell?this.fields:[this.getEditField()];for(d=0;d<c.length;d++){f=c[d];e=this.$286.getItem(f[this.fieldIdProperty]);
if(e!=null){f=this.getEditorValueMap(f,this.getEditedRecord(a,b,true));e.valueMap!=f&&e.setValueMap(f)}}}},isc.A.getEditRow=function(){return this.$285},isc.A.getEditCol=function(){return this.$30u},isc.A.getEditField=function(){return this.getField(this.getEditCol())},isc.A.getEditFieldName=function(){return this.getFieldName(this.getEditCol())},isc.A.getEditRecord=function(){return this.getCellRecord(this.getEditRow(),this.getEditCol())},isc.A.cancelEditing=function(a){this.$30a&&this.discardEdits(this.getEditRow(),
this.getEditCol(),false,a)},isc.A.cellEditEnd=function(a,b){this.$51k&&a!=isc.ListGrid.TAB_KEYPRESS&&a!=isc.ListGrid.SHIFT_TAB_KEYPRESS&&a!=isc.ListGrid.UP_ARROW_KEYPRESS&&a!=isc.ListGrid.DOWN_ARROW_KEYPRESS&&a!=isc.ListGrid.LEFT_ARROW_KEYPRESS&&a!=isc.ListGrid.RIGHT_ARROW_KEYPRESS&&delete this.$51k;var c=this.getEditRow(),d=this.getEditCol();arguments.length>=2&&this.setEditValue(c,d,b);this.getFieldName(d);if(this.shouldCancelEdit(c,d,a))return this.cancelEditing(a);var e=this.getNextEditCell(c,
d,a);this.clearNewEditCell();if(e==null){this.logInfo("cellEditEnd: ending editing, completion event: "+a,"gridEdit");this.$33x(a)}else{if(Array.isLoading(this.getCellRecord(e[0],e[1])))return false;this.$32f(a,c,d,e[0],e[1])}},isc.A.getUpdatedEditorValue=function(){if(this.$30a){var a=this.$286.getItem(this.getEditFieldName()),b=this.getEditField();if(a){a.$10v()&&a.updateValue();a=a.getValue();return this.$33y(a,b,this.getEditRow(),this.getEditCol())}else return this.getEditDisplayValue(this.getEditRow(),
this.getEditCol())}},isc.A.storeUpdatedEditorValue=function(a){if(this.isDrawn()&&this.$30a){var b=this.getEditRow(),c=this.getEditCol(),d=this.getField(c),e=this.getEditFormItem(c);if(e){e.$10v()&&e.updateValue();d=this.$33y(e.getValue(),d,b,c);if(d===void 0)d=null;this.setEditValue(b,c,d,true,a)}}},isc.A.$32i=function(a,b,c,d){var e=this.getCellRecord(b,c),f=this.getField(c),g=true,h=this.$286.getItem(this.getEditorName(b,f));isc.isA.PopUpTextAreaItem(h)&&h.hidePopUp();if(f&&f.editorExit!=null){isc.Func.replaceWithMethod(f,
"editorExit","editCompletionEvent,record,newValue,rowNum,colNum,grid");g=f.editorExit(a,e,d,b,c,this)!=false}if(g&&this.editorExit!=null)g=this.editorExit(a,e,d,b,c)!=false;return g},isc.A.$32j=function(a,b,c){var d=this.getRecord(b);if(this.rowEditorExit!=null)return this.rowEditorExit(a,d,c,b)!=false;return true},isc.A.$30x=function(a,b,c,d){var e=this.getCellRecord(b,c);this.getFieldName(c);var f=this.getField(c),g=true;isc.isA.PopUpTextAreaItem(a)&&a.popUpOnEnter&&a.showPopUp(true);if(f&&f.editorEnter!=
null){isc.Func.replaceWithMethod(f,"editorEnter","record,value,rowNum,colNum,grid");g=f.editorEnter(e,d,b,c,this)!=false}if(g&&this.editorEnter!=null)g=this.editorEnter(e,d,b,c)!=false;return g},isc.A.$30z=function(a,b,c){a=this.getRecord(b);if(this.rowEditorEnter!=null)return this.rowEditorEnter(a,c,b)!=false;return true},isc.A.$32k=function(){if(!isc.DS)return false;var a=isc.DS.get(this.dataSource);return!this.neverValidate&&!(a&&a.useLocalValidators!=null&&a.useLocalValidators==false)},isc.A.shouldSaveOnCellExit=
function(a,b){if(this.getCellRecord(a,b)==null)return false;return this.saveByCell!=null?this.saveByCell:this.editByCell},isc.A.shouldSaveOnRowExit=function(){return true},isc.A.shouldValidateByCell=function(a,b){var c=this.getField(b);if(c&&c.validateByCell!=null)return c.validateByCell;return this.validateByCell!=null?this.validateByCell:this.editByCell},isc.A.shouldValidateByRow=function(){return this.autoValidate},isc.A.shouldCancelEdit=function(a,b,c){if(c==isc.ListGrid.ESCAPE_KEYPRESS)if((this.getField(b).escapeKeyEditAction||
this.escapeKeyEditAction)=="cancel")return true;return false},isc.A.$33w=function(a,b,c){if(this.$32p==a){if(this.confirmCancelEditing)if(c==null){var d=this.getID()+".$33w('"+a+"','"+b+"',value);";isc.ask(this.cancelEditingConfirmationMessage,d);d=isc.Dialog.Warn.toolbar.getButton(0);d.isDrawn()?d.focus():isc.Timer.setTimeout({target:d,methodName:"focus"},0);return}else if(c==false)return;c=this.getEditRow();a=this.getEditCol();var e=this.getUpdatedEditorValue(),f=this.getEditValues(c,a);if(this.$32i(b,
c,a,e)&&this.$32j(b,c,f)){b=[];c=this.$285;e=this.getEditValues(c,a);var g=this.body?this.body.getDrawArea():[null,null,1,0];f=g[2];g=g[3];if(e!=null){if(this.isNewEditRecord(c,a)){this.isDrawn()&&this.body.markForRedraw("clearing extra edit row");d=true}else for(f=f;f<=g;f++)if(e[this.getFieldName(f)]!==void 0&&(this.editByCell&&this.$30u!=f||!this.canEditCell(c,f)))b.add(f);this.$321(this.$285,a,true);if(this.isGrouped&&this.$75i(c))d=true}if(this.body){this.hideInlineEditor(true);if(this.isDrawn())if(!d)for(f=
0;f<b.length;f++)this.refreshCell(c,b[f])}}}},isc.A.isNewEditRecord=function(a){return(a=this.getEditSession(a))&&a.$33i},isc.A.endEditing=function(){this.getEditRow()!=null&&this.$33x(isc.ListGrid.PROGRAMMATIC)},isc.A.$33x=function(a){if(this.$686())this.saveEdits(a);else{var b=this.getEditRow(),c=this.getEditCol(),d=this.getEditValue(b,c),e=this.getEditValues(b,c);if(this.$32i(a,b,c,d)&&this.$32j(a,b,e)){d=this.autoSaveEdits&&this.shouldWaitForSave();var f;if(d)f="if((success||!this.stopOnErrors)&&(this.$32p=="+
this.$32p+"))this.hideInlineEditor(true);";var g=a==isc.ListGrid.ESCAPE_KEYPRESS;if(e=this.autoSaveEdits&&!g)this.saveEdits(a,f);else{this.getFieldName(c);if(!g&&this.$32k()&&(this.shouldValidateByCell(b,c,a)||this.shouldValidateByRow(b,c,a))){a=this.useCellRecords?!this.validateCell(b,c):!this.validateRow(b);if(this.stopOnErrors&&a)return false}if(!this.rowHasChanges(b,false)){this.logInfo("editor hiding at "+[b,c]+", no actual changes, dropping editSession","gridEdit");this.$321(b,c)}}d||this.hideInlineEditor(true);
if(this.isGrouped&&(!e||!this.shouldSaveLocally()))this.$75i(b)}}},isc.A.saveAndEditNewCell=function(a,b,c){if(c==null)c=isc.ListGrid.PROGRAMMATIC;this.$32l(a,b,c)},isc.A.$32l=function(a,b,c){var d=this.shouldWaitForSave(),e;if(d)e="if((success||!this.stopOnErrors)&&(this.$32p=="+this.$32p+"))this.$31u("+a+","+b+");";this.saveEdits(c,e);d||this.$31u(a,b)},isc.A.$33z=function(a,b){var c=this.getEditRow(),d=this.getEditCol(),e=isc.ListGrid.PROGRAMMATIC;c=this.findNextEditCell(c,d,a,b,false);this.$32l(c[0],
c[1],e)},isc.A.saveAndEditNextCell=function(){this.$33z(1,true)});isc.B.push(isc.A.saveAndEditPreviousCell=function(){this.$33z(-1,true)},isc.A.saveAndEditNextRow=function(){this.$33z(1,false)},isc.A.saveAndEditPreviousRow=function(){this.$33z(-1,false)},isc.A.getNextEditCell=function(a,b,c){switch(c){case isc.ListGrid.CLICK_OUTSIDE:case isc.ListGrid.ESCAPE_KEYPRESS:return null;case isc.ListGrid.ENTER_KEYPRESS:c=this.getField(b);c=c.enterKeyEditAction||this.enterKeyEditAction;if(c=="done")return null;
else if(c=="nextCell")return this.findNextEditCell(a,b,1,true,false);else if(c=="nextRow")return this.findNextEditCell(a,b,1,false,false);else if(c=="nextRowStart"){c=this.listEndEditAction||"done";if(a+1<this.getTotalRows()||c=="next")return this.findNextEditCell(a+1,0,1,true,true);else{if(c=="stop")return[a,b];return null}}case isc.ListGrid.EDIT_FIELD_CHANGE:case isc.ListGrid.PROGRAMMATIC:return this.getNewEditCell();case isc.ListGrid.UP_ARROW_KEYPRESS:return this.findNextEditCell(a,b,-1,false,
false);case isc.ListGrid.DOWN_ARROW_KEYPRESS:return this.findNextEditCell(a,b,1,false,false);case isc.ListGrid.TAB_KEYPRESS:case isc.ListGrid.RIGHT_ARROW_KEYPRESS:c=this.getField(b);return c.nextTabColNum!=null?this.findNextEditCell(a+1,c.nextTabColNum,1,true,true):this.findNextEditCell(a,b,1,true,false);case isc.ListGrid.SHIFT_TAB_KEYPRESS:case isc.ListGrid.LEFT_ARROW_KEYPRESS:c=this.getField(b);return c.previousTabColNum!=null?this.findNextEditCell(a-1,c.previousTabColNum,-1,true,true):this.findNextEditCell(a,
b,-1,true,false)}this.logWarn("getNextEditCell(): Passed unrecognized editCompletionEvent type:"+c+", returning null");return null},isc.A.findNextEditCell=function(a,b,c,d,e,f,g,h){var i=a,j=b,k=this.getFields().length;if(k!=0){f=g?i:this.listEndEditAction=="next"||f?this.getTotalRows():this.getTotalRows()-1;if(i>this.getTotalRows())f=i;if((e!=false||c==0)&&i<=f&&i>=0&&j<k&&j>=0&&this.canEditCell(i,j)&&(h||this.$60w(i,j)))return[i,j];if(c==0)return null;e=this.canEditCell(i,j)&&this.$60w(i,j);g=g?
i:0;if(d){for(d=this.rowEndEditAction||"next";i<f+1&&i>=g;){if(isc.ResultSet&&isc.isA.ResultSet(this.data))if(i<this.data.getLength()&&!this.data.rowIsLoaded(i))return null;j+=c;if(d=="same"&&b==j)return e?[a,b]:null;if(j<0||j>=k){if(d=="done"||isc.isA.RecordEditor(this))return null;if(d=="stop")return e?[a,b]:null;else{j=c>0?-1:k;if(d=="next")i+=c}}else if(this.canEditCell(i,j)&&(h||this.$60w(i,j)))return[i,j]}return this.listEndEditAction=="stop"||this.listEndEditAction=="next"&&i<g?e?[a,b]:null:
null}else{for(i+=c;i>=g&&i<=f;){if(this.canEditCell(i,j)&&(h||this.$60w(i,j)))return[i,j];i+=c}if(this.listEndEditAction=="stop"||this.listEndEditAction=="next"&&i<g)return e?[a,b]:null;return null}}},isc.A.$60w=function(a,b){var c=this.getFieldName(b),d=this.$286;if(d=d?d.getItem(c):null)return d.$kk();c=this.getField(c);if(c.canFocus!=null)return c.canFocus;d=this.getEditorType(c,this.getEditedRecord(a));d=isc.FormItemFactory.getItemClassName(c,d,null,true);return(c=isc.FormItemFactory.getItemClass(d))?
c.getPrototype().$kk():false},isc.A.setNewEditCell=function(a,b){this.$330=[a,b]},isc.A.getNewEditCell=function(){if(this.canEditCell(this.$330[0],this.$330[1]))return this.$330;return null},isc.A.clearNewEditCell=function(){this.$330=null},isc.A.discardAllEdits=function(a,b){if(a==null)a=this.getAllEditRows(true);else for(var c=0;c<a.length;c++){if(isc.isA.Array(a[c]))a[c]=this.getEditValuesID(a[c][0],a[c][1]);if(isc.isA.Number(a[c]))a[c]=this.getEditValuesID(a[c])}if(a!=null)for(c=0;c<a.length;c++)this.discardEdits(a[c],
null,b)},isc.A.discardEdits=function(a,b,c,d){if(a!=null){var e;if(isc.isA.Number(a))e=this.getEditValuesID(a,b);else{e=a;a=this.getEditSessionRowNum(e,b)}if(!c&&this.$686()&&!(this.getTotalRows()==1&&a==0)){this.logInfo("Refusing to hide editor on 'discardEdits' [editCompletionEvent:"+d+"] due to alwaysShowEditors settings","inactiveEditorHTML");c=true}if(!c&&this.$30a&&this.getEditRow()==a){if(d==null)d=isc.ListGrid.PROGRAMMATIC;return this.$33w(this.$32p,d)}else{this.$30a&&this.getEditRow()==a&&
this.storeUpdatedEditorValue(true);this.$321(e,b)}}},isc.A.saveEdits=function(a,b,c,d,e){if(a==null)a=isc.ListGrid.PROGRAMMATIC;if(c==null){c=this.getEditRow();d=this.getEditCol()}else if(d==null)d=c==this.getEditRow()?this.getEditCol():this.getRowEditColNum(c);if(c==null)return false;var f=this.getEditValues(c,d),g=this.getCellRecord(c,d),h=this.getEditValuesID(c,d),i;if(g!=null&&!Array.isLoading(g))(i=isc.isA.Tree(this.data)?this.data.getCleanNodeData(g,false):isc.addProperties({},g))&&this.selection&&
delete i[this.selection.selectionProperty];g={rowNum:c,colNum:d,oldValues:i,editValuesID:h,values:f,editCompletionEvent:a,newRecord:c>this.data.getLength()};this.logIsDebugEnabled("gridEdit")&&this.logDebug("change detection: newValues: "+this.echo(f)+", oldValues: "+this.echo(i),"gridEdit");f=this.recordHasChanges(c,d,false);if(this.$32k()){this.$81c=e||f;if(this.useCellRecords?!this.validateCell(c,d):!this.validateRow(c)){e||this.$331(g,b);return false}}if(e)return true;if(f){f=this.$300(c,d);this.logInfo("Saving newValues '"+
isc.echoAll(f)+"'","gridEdit");this.rememberSubmittedEditValues(c,d);f=isc.addProperties({},f);if(this.saveEditedValues(c,d,f,i,h,a,b)===false){this.$331(g,b);return false}return true}else{this.logInfo("saveEdits: no actual change, not saving","gridEdit");this.$321(h,d);this.$332(b,c,d,a,true)}},isc.A.rowHasChanges=function(a,b){return this.recordHasChanges(a,null,b)},isc.A.recordHasChanges=function(a,b,c){if(c==null)c=true;var d=false;c=c?this.getEditValues(a,b):this.$300(a,b);var e=this.getCellRecord(a,
b);if(!e)return true;a=isc.addProperties({},e,this.getSubmittedEditValues(a,b));for(var f in c){b=a[f];e=c[f];if(!this.fieldValuesAreEqual(this.getField(f),b,e)){d=true;break}}return d},isc.A.hasChanges=function(a){var b=this.getAllEditRows();if(b!=null)for(var c=0;c<b.length;c++)if(this.rowHasChanges(b[c],a))return true;return false},isc.A.cellHasChanges=function(a,b,c){if(a==null||b==null)return false;var d=this.getField(b),e=d?d.dataPath:null,f=this.getEditorName(a,b),g=c?this.getEditValues(a,
b):this.$300(a,b);if(!g)return false;c=this.getCellRecord(a,b);if(!c)return true;g=e?isc.Canvas.$70o(e,g):g[f];if(g===void 0)return false;a=this.getSubmittedEditValues(a,b);var h;if(e){if(a)h=isc.Canvas.$70o(e,a);if(h==null)h=isc.Canvas.$70o(e,c);if(h==null)h=isc.Canvas.$70o(e,a)}else h=a!=null?this.$du(a[f],c[f]):c[f];return!this.fieldValuesAreEqual(d,h,g)},isc.A.saveAllEdits=function(a,b){this.$333=this.$333||{};this.$334=this.$334||{};if(a==null)a=this.getAllEditCells();if(a==null)return false;
isc.isAn.Array(a)||(a=[a]);if(this.$32k())for(var c=0;c<a.length;c++){var d=isc.isAn.Array(a[c])?a[c][0]:a[c],e=isc.isAn.Array(a[c])?a[c][1]:null;if(!this.saveEdits(null,null,d,e,true))if(this.stopOnErrors)return false;else b=a[c]=null}var f=false;if(this.dataSource!=null&&!this.saveLocally)f=!isc.RPCManager.startQueue();var g=this.$31e++,h=this.$333[g]=[];this.$334[g]=b;var i=false;for(c=0;c<a.length;c++)if(a[c]!=null){d=a[c];if(isc.isAn.Array(d)){e=d[1];d=d[0]}if(this.recordHasChanges(d,e)){i=true;
h[h.length]=a[c];this.saveEdits(null,"this.$335(rowNum,"+g+",colNum,editCompletionEvent,success)",d,e)}}f&&isc.RPCManager.sendQueue();return i},isc.A.$335=function(a,b,c,d,e){if(e){e=this.$333[b];if(e!=null){var f;for(f=0;f<e.length;f++){var g=e[f];if(isc.isA.Number(g)){if(g==a)break}else if(g[0]==a&&g[1]==c)break}e.removeAt(f);if(e.length==0){this.$332(this.$334[b],a,c,d);delete this.$334[b];delete this.$333[b]}}}else{delete this.$334[b];delete this.$333[b]}},isc.A.$33y=function(a,b,c,d,e){if(e===
void 0)e=this.getCellRecord(c,d);if(b&&b.parseEditorValue!=null){isc.Func.replaceWithMethod(b,"parseEditorValue","value,record,rowNum,colNum,grid");a=b.parseEditorValue(a,e,c,d,this)}else if(this.parseEditorValue!=null)a=this.parseEditorValue(a,e,c,d);return a},isc.A.shouldSaveLocally=function(){return!this.dataSource||this.getFullDataPath()!=null||this.saveLocally},isc.A.saveEditedValues=function(a,b,c,d,e,f,g){f={editValuesID:e,rowNum:a,colNum:b,values:c,oldValues:d,editCompletionEvent:f};if(this.shouldSaveLocally())return this.$336(f,
g);if(isc.Offline&&isc.Offline.isOffline()&&!this.dataSource.clientOnly){isc.warn(this.offlineSaveMessage);return false}e=this.getID()+".$337(dsResponse, dsRequest)";a={operation:(d==null?this.addOperation:this.updateOperation)||this.saveOperation,application:this.application,willHandleError:true,showPrompt:this.shouldWaitForSave(),oldValues:d,$52s:this.getRecord(a,b),clientContext:{saveCallback:g,newValues:c,editInfo:f},componentId:this.ID};this.$338(c,d);if(this.$31o==null)this.$31o={};this.$31o[f.editValuesID]=
true;b=isc.DS.get(this.dataSource);if(d==null){c=isc.addProperties({},d,c);b.addData(c,e,a)}else{d=isc.DS.get(this.dataSource).filterPrimaryKeyFields(d);c=isc.addProperties({},d,c);b.updateData(c,e,a)}},isc.A.$336=function(a,b){var c=a.rowNum,d=a.oldValues,e=a.values,f=this.getCellRecord(c,a.colNum);if(f==null){var g=this.getData(),h=this.getEditSession(c);h.$33b=this.getPrimaryKeys(e);delete h.$33i;g.add(e);g.dataChanged()}else for(g=0;g<this.fields.length;g++){h=this.getEditorName(this.fields[g],
g,true);h=isc.Canvas.$70o(h,e);h!==void 0&&this.setRawCellValue(f,c,g,h)}this.$338(e,d);this.$339(a,b);this.valuesManager!=null&&this.valuesManager.$71e(c,null,f,this)},isc.A.$338=function(a,b){var c=this.$60z();if(c!=null){c=this.fields[c];if(c!=null){c=c[this.fieldIdProperty];if(c!=null&&a[c]!==void 0&&(b==null||a[c]!=b[c]))this.unsort()}}},isc.A.$337=function(a,b){var c=a.data,d=a.clientContext,e=d.editInfo,f=e.colNum;if(this.$31o&&this.$31o[e.editValuesID]){delete this.$31o[e.editValuesID];isc.isAn.emptyObject(this.$31o)&&
delete this.$31o}f=this.getEditSession(e.editValuesID);if(f!=null)e.rowNum=f.$24t;else if(c&&c[0]){e.rowNum=this.findRowNum(c[0]);if(this.useCellRecords)e.colNum=this.findColNum(c[0])}else e.rowNum=-1;c=e.rowNum;f=e.colNum;if(a.status<0){var g=this.parseServerErrors(a.errors);this.logInfo("error on save, status: "+a.status+", errors: "+this.echo(a.errors),"gridEdit");if(isc.isAn.Array(g)){g.length!=1&&this.logWarn("Server reports validation errors for multiple records - only displaying errors for the first record.",
"gridEdit");g=g[0]}this.useCellRecords?this.setCellErrors(c,f,g[this.getEditorName(c,f)]):this.setRowErrors(c,g);this.$331(e,d.saveCallback,a,b);return false}this.$339(e,d.saveCallback,a,b)},isc.A.parseServerErrors=function(a){if(isc.isAn.Array(a)){a.length>1&&this.logWarn("server returned errors for multiple records - dropping all but the first record returned");a=a[0]}a&&a.recordPath&&delete a.recordPath;for(var b in a){var c=a[b];if(c==null)c="Unspecified error";if(isc.isAn.Array(c))for(var d=
0;d<c.length;d++)c[d]=c[d].errorMessage;else a[b]=c.errorMessage?[c.errorMessage]:[c]}return a},isc.A.$339=function(a,b,c,d){this.$30a&&this.getEditForm().hasFocus&&this.storeUpdatedEditorValue(true);var e=a.rowNum,f=a.colNum,g=a.editValuesID,h=this.getEditSession(g),i;if(c!=null){i=isc.DataSource.getUpdatedData(d,c,true);i=isc.isAn.Array(i)?i[0]:i;if(i==null)return;h&&h.$33b==null&&this.newRecordForEditValues(g,i)}else i=this.getCellRecord(e,f);h=a.values;var j=this.$300(g),k=this.isEditingRecord(e,
f),l=this.dataSource?isc.DS.get(this.dataSource).getPrimaryKeyFieldNames():null,m=false,n;for(n in j){var o=l&&l.contains(n);if(this.fieldValuesAreEqual(this.getField(n),j[n],h[n]))k&&o||this.clearEditValue(g,n,true,true);else o||(m=true)}!k&&!m&&this.$321(g,f);if(c!=null||a.newRecord)this.displayUpdatedDSRecord(e,f,i);g=a.values;n=a.oldValues;h=a.editCompletionEvent;if(e==-1)e=a.rowNum;this.convertToMethod("editComplete")&&this.editComplete(e,f,g,n,h,c);this.$50u(i,e,f,g,n,d);b&&this.$332(b,e,f,
h,true)},isc.A.displayUpdatedDSRecord=function(){this.dataChanged()},isc.A.isEditingRecord=function(a){return this.getEditRow()==a},isc.A.$332=function(a,b,c,d,e){a!=null&&this.fireCallback(a,this.$31f,[b,c,d,e])},isc.A.$50u=function(a,b,c,d,e){var f,g,h;for(h in d){c=e==null?null:e[h];if(d[h]!=c){var i=this.fields.find(this.fieldIdProperty,h);if(i){if(this.isGrouped&&i&&this.groupByField.contains(i.name))f=true;if(this.shouldAutoFitField(i))g=true;this.$34a(a,i,d[h],c,b,this.fields.indexOf(i))}}}g&&
this.shouldSaveLocally()&&this.updateFieldWidthsForAutoFitValue("Local edit");if(f){this.shouldSaveLocally()&&this.$607(a,a,b,d);this.$34v=false;this.$34u()}},isc.A.$34a=function(a,b,c,d,e,f){if(b&&b.cellChanged){isc.isA.Function(b.cellChanged)||isc.Func.replaceWithMethod(b,"cellChanged","record,newValue,oldValue,rowNum,colNum,grid,recordNum,fieldNum");b.cellChanged.call(this,a,c,d,e,f,this,e,f)}else this.cellChanged&&this.cellChanged(a,c,d,e,f,this,e,f)},isc.A.$331=function(a,b,c,d){var e=a.rowNum,
f=a.colNum,g=a.values,h=a.oldValues,i=a.editCompletionEvent;this.convertToMethod("editFailed")&&this.editFailed(e,f,g,h,i,c,d);b!=null&&this.$332(b,e,f,i,false);this.clearSubmittedEditValues(a.editValuesID,g)},isc.A.editFailed=function(a,b,c,d,e,f,g){f!=null&&f.errors==null&&isc.RPCManager.$a0(f,g)},isc.A.validateRow=function(a,b){return this.validateRecord(a,b)},isc.A.validateRecord=function(a,b){var c,d;if(isc.isAn.Array(a)){c=a[0];d=a[1]}else c=a;var e=this.getEditValues(c,d);if(e==null)return true;
d=this.getCellRecord(c,d);var f=this.getFields().getProperty(this.fieldIdProperty);e=this.validateRowValues(e,d,c,f);this.setRowErrors(c,e,b);return e==null},isc.A.validateRowValues=function(a,b,c,d){var e=true,f={};isc.isAn.Array(d)||(d=[d]);var g=false;if(b==null){g=true;b={}}for(var h=0;h<d.length;h++){var i,j;if(isc.isA.Number(d[h])){j=d[h];i=d[h]=this.getFieldName(j)}else{i=d[h];j=this.getFields().findIndex(this.fieldIdProperty,i)}if(!(j<0))if(g&&this.canEditCell(c,j)||isc.propertyDefined(a,
i)){j=this.validateCellValue(c,j,a[i],b[i]);if(j!=null){e=false;f[i]=j}}}if(!e)return f;return null},isc.A.validateCell=function(a,b,c,d){var e;if(isc.isA.String(b))e=this.getColNum(b);else{e=b;b=this.getEditorName(a,e)}var f=this.getEditValues(a,e);c=this.cellHasErrors(a,b);var g=f?f[b]:null,h=this.getCellRecord(a,e),i=h?h[b]:null;if(h!=null&&(!f||!isc.propertyDefined(f,b)))return true;d=this.validateCellValue(a,e,g,i,d);if(d!=null){this.setFieldError(a,b,d);return false}c&&this.setFieldError(a,
b,null);return true},isc.A.validateCellValue=function(a,b,c,d,e){var f=this.getCellRecord(a,b),g=this.getField(b);return this.validateFieldValue(c,d,f,g,a,b,e)},isc.A.getRequiredFieldMessage=function(){return isc.Validator.requiredField},isc.A.validateFieldValue=function(a,b,c,d,e,f,g){b=[];var h=true;if(this.cellIsRequired(e,f)&&(a==null||isc.isAn.emptyString(a))){h=this.getRequiredFieldMessage(d,c);b.add(h);h=false}if(c=this.getCellValidators(e,f)){if(this.logIsDebugEnabled("gridEdit"))this.logDebug((this.useCellRecords?
"At col:"+f:"At field: "+d.name)+" applying validators: "+this.echoAll(c)+" to value:"+a,"gridEdit");var i=this.getEditedRecord(e,f),j=null,k={rowNum:e};if(this.$81c==true){k.skipServerValidation=true;this.$81c=null}c=g?this.validateFieldAndDependencies(d,c,a,i,k):this.validateField(d,c,a,i,k);if(c!=null){if(c.valid!=true){h=false;b=g?c.errors[d.name]||[]:c.errors||[]}else if(c.resultingValue!=null){this.setEditValue(e,f,c.resultingValue);a=c.resultingValue}j=c.errors;this.logIsInfoEnabled("gridEdit")&&
this.logInfo("validateFieldValue, newValue: "+this.echo(a)+", passed validation: "+h+", resultingValue: "+this.echo(c.resultingValue),"gridEdit")}}if(g)for(var l in j)l!=d.name&&this.setFieldError(e,l,j[l],true);return h?null:b},isc.A.cellIsRequired=function(a,b){var c=this.getField(b);return c&&(c.required||this.isXMLRequired(c))},isc.A.getCellValidators=function(a,b){var c=this.getField(b);return c?c.validators:null},isc.A.hasErrors=function(){for(var a=this.getAllEditRows(true),b=0;b<a.length;b++)if(this.rowHasErrors(a[b]))return true;
return false},isc.A.rowHasErrors=function(a,b){var c=this.getEditSession(a,b);return c&&c.$33o&&!isc.isA.emptyObject(c.$33o)},isc.A.cellHasErrors=function(a,b){var c=this.getEditorName(a,b),d=this.getEditSession(a,b);d=d?d.$33o:null;return d!=null&&d[c]!=null},isc.A.getRowValidationErrors=function(a){return this.getRowErrors(a)},isc.A.getRowErrors=function(a,b){var c=this.getEditSession(a,b);return c!=null?c.$33o:null},isc.A.getCellErrors=function(a,b){var c=this.getEditSession(a,b);if(c==null)return null;
if(isc.isA.Number(b))b=this.getEditorName(a,b);c=c.$33o;return c==null?null:c[b]},isc.A.setCellErrors=function(a,b,c,d){return this.setFieldError(a,b,c,d)},isc.A.setFieldError=function(a,b,c,d){var e=b;if(isc.isA.Number(e))e=this.getEditorName(a,e);if(c==null||isc.isAn.Array(c)&&c.length==0){if(!this.cellHasErrors(a,b))return;var f=this.getEditSession(a,b);delete f.$33o[e];isc.isAn.emptyObject(f.$33o)&&delete f.$33o}else{if(e==null){this.logWarn("setFieldError() passed field identifier '"+b+"'. Unable to find corresponding field in this grid - not setting error.");
return}this.getFields().getProperty(this.fieldIdProperty).contains(e)||this.logWarn("setFieldError() passed field identifier '"+b+"'. This is not a visible field in the grid - error may not be visible to user.");c=isc.isAn.Array(c)?c:[c];f=this.getEditSession(a,b);if(f==null){f=this.getColNum(b);var g=this.getCellRecord(a,f);f=this.createEditSession(a,f,g)}if(f.$33o==null)f.$33o={};f.$33o[e]=c}d||(this.useCellRecords?this.showCellErrors(a,b):this.showErrors(a,[e]))},isc.A.addFieldErrors=function(a,
b,c,d){this.setFieldError(d,a,b)},isc.A.setRowErrors=function(a,b,c){if(!(a==null||a==-1)){var d=this.getRowErrors(a);if(b||d){var e=this.getEditSession(a);if(e==null)e=this.createEditSession(a,null,this.getRecord(a));if(b){var f=this.getFields().getProperty(this.fieldIdProperty),g;for(g in b){!c&&!f.contains(g)&&this.logWarn("setRowErrors() passed error for non-visible field: '"+g+"'");isc.isAn.Array(b[g])||(b[g]=[b[g]])}}e.$33o=b;if(!c){b=b?isc.getKeys(b):[];for(g in d){this.getColNum(g);b.contains(g)||
b.add(g)}this.showErrors(a,b)}}}},isc.A.clearFieldError=function(a,b,c){return this.setFieldError(a,b,null,c)},isc.A.clearRowErrors=function(a,b){this.setRowErrors(a,null,b)},isc.A.showErrors=function(a,b){if(b==null)b=this.getFields().getProperty(this.fieldIdProperty);var c=this.getRowErrors(a);if(c==null)c={};for(var d,e=0;e<b.length;e++){var f=b[e];this.showCellErrors(a,f);if(d==null&&c[f])d=f}(c=this.assembleErrorMessage(c,b))&&this.displayRowErrorMessages(c);if(this.stopOnErrors&&d!=null){d=
this.getFields().findIndex(this.fieldIdProperty,d);this.showInlineEditor(a,d)}},isc.A.showCellErrors=function(a,b){var c;if(isc.isA.Number(b))this.getEditorName(a,b);else{c=b;b=this.getColNum(c)}if(b!=-1)this.showErrorIcons?this.refreshCell(a,b,null,true):this.body.$29h(null,a,b)},isc.A.assembleErrorMessage=function(a,b){var c=false,d="Validation Errors occurred:\r\n",e;for(e in a)if(!(b&&!b.contains(a))){var f=this.$34b(e,a[e]);if(f!=null){c=true;d+=f}}return c?d:null},isc.A.$34b=function(a,b){var c,
d=this.getField(a);d=d&&d.title?d.title:a;for(var e=0;e<b.length;e++){var f=b[e];if(f!=null){if(c==null)c="<br>Field '"+d+"':";c+="<br>* "+f}}return c},isc.A.displayRowErrorMessages=function(a){this.stopOnErrors&&isc.warn(a,"var LG="+this.getID()+";if(LG.$286)LG.$286.focus()")},isc.A.$609=function(a,b){b!=null&&this.delayCall("removeRecord",[a,b])},isc.A.removeRecord=function(a,b){if(b==null)b=this.data.get(a);else a=this.data?this.data.indexOf(b):null;if(!(b==null||a==null||a==-1||!this.data))if(isc.Offline&&
isc.Offline.isOffline()&&this.dataSource&&!this.dataSource.clientOnly)isc.warn(this.offlineSaveMessage);else{var c=this.animateRemoveRecord&&this.isDrawn()&&this.isVisible()&&this.body&&a>=this.body.$252&&a<=this.body.$253;if(b.$29a&&b.$29a.length>0)c=false;if(c){this.$50w=true;var d=1;if(isc.isA.Tree(this.data)&&this.data.isFolder(b)&&this.data.isOpen(b)){var e=this.data.getChildren(b);if(e)d+=e.getLength()}this.$63o=d;this.body.$28b(false,a,a+d)}d=this.getDataSource();if(!(d==null||this.shouldSaveLocally()))if(!d.getPrimaryKeyField){this.logWarn("DataSource:"+
d+" has no primary key field - unable to remove records");return}var f;if(c)f=this.getID()+".removeDataComplete("+a+", data,dsResponse);";this.removeData(b,f,{showPrompt:false})}},isc.A.removeData=function(a,b,c){c=isc.addProperties({},c);if(this.getDataSource()!=null&&!this.shouldSaveLocally())return this.Super("removeData",arguments);if(this.data){this.getOriginalData().remove(a);this.updateFieldWidthsForAutoFitValue("removeData");this.regroup()}b&&this.fireCallback(b,"dsResponse,data,dsRequest",
[null,a,c])},isc.A.removeDataComplete=function(a,b,c){if(c&&c.status<0){this.logWarn("Removal of record failed");b=null}if(b){this.startRowAnimation(false,a,a+this.$63o,{target:this,methodName:"$63d"},this.animateRemoveSpeed,this.animateRemoveTime);delete this.$63o}else{delete this.$50w;if(this.body){delete this.body.$28c;delete this.body.$28e;delete this.body.$28f;delete this.body.$28h}this.markForRedraw()}},isc.A.$63d=function(){delete this.$50w;this.redraw()},isc.A.startRowAnimation=function(a,
b,c,d,e,f,g,h,i){if(this.body){this.finishRowAnimation();this.$64v=d;this.frozenBody&&this.frozenBody.startRowAnimation(a,b,c,{target:this,methodName:"rowAnimationComplete",argNames:"body,hasFrozenBody",args:[this.frozenBody,true]},e,f,g,h,true,i);this.body.startRowAnimation(a,b,c,{target:this,methodName:"rowAnimationComplete",argNames:"body,hasFrozenBody",args:[this.body,this.frozenBody!=null]},e,f,g,h,true,i)}},isc.A.rowAnimationComplete=function(a,b){if(!b||this.$64w){delete this.$64w;var c=this.$64v;
delete this.$64v;c!=null&&this.fireCallback(c)}else this.$64w=true},isc.A.finishRowAnimation=function(){this.body&&this.body.finishRowAnimation();this.frozenBody&&this.frozenBody.finishRowAnimation()},isc.A.animateRowHeight=function(a,b,c,d,e,f,g){if(this.body)return this.body.animateRowHeight(a,b,c,d,e,f,g,true)},isc.A.setCellHeight=function(a){var b=this.cellHeight;this.cellHeight=a;if(this.body)this.body.cellHeight=a;if(b!=a&&this.isDrawn()){this.body.markForRedraw("Cell height changed");this.frozenBody&&
this.frozenBody.markForRedraw("Cell height changed")}},isc.A.setRowHeight=function(a,b){if(this.body){this.frozenBody!=null&&this.frozenBody.setRowHeight(a,b);return this.body.setRowHeight(a,b)}},isc.A.getDragTrackerIcon=function(a){a=a?a[0]:null;var b;if(a){b=this.getTitleField();b=this.getValueIcon(this.getField(b),a[b],a)}if(b==null)b=this.trackerImage;return b},isc.A.getDragTrackerTitle=function(a,b){var c=this.getColNum(this.getTitleField());return"<nobr>"+this.getCellValue(a,b,c)+"</nobr>"},
isc.A.dragStart=function(){if(this.canDragSelect)return true;var a=this.selection.getSelection();if(!a||a.length==0)return false;for(var b=0;b<a.length;b++)if(a[b].canDrag==false)return false;this.$758=a;return true},isc.A.dragMove=function(){var a=isc.EH.dropTarget;if(!this.canDragRecordsOut&&a!=null&&a!=this&&!this.contains(a))return false},isc.A.dropMove=function(){if(!this.canReorderRecords)return true;if(!this.canAcceptDroppedRecords&&isc.EH.dragTarget!=this)return true;this.willAcceptDrop()?
this.body.clearNoDropIndicator():this.body.setNoDropIndicator();this.showDragLineForRecord()},isc.A.dropOut=function(){this.body.clearNoDropIndicator();this.hideDragLine()},isc.A.dragStop=function(){this.body.clearNoDropIndicator();this.hideDragLine();this.$758=null},isc.A.willAcceptDrop=function(){var a=this.ns.EH;if(!this.Super("willAcceptDrop",arguments)&&a.dragTarget!=this.body)return false;if(a.dragTarget==this){if(!this.$34c())return false}else if(!this.canAcceptDroppedRecords)return false;
if(!isc.isAn.Object(a.dragTarget.getDragData()))return false;isc.$54j=true;a=this.getEventRecordNum();var b=this.getEventFieldNum(),c=this.getReorderPosition(a);if(a!=-2&&c==isc.ListGrid.AFTER)a+=1;isc.$54j=false;if(a<-1)return true;if(a==-1)return false;c=this.getRecord(a,b);if(!this.recordIsEnabled(a,b)||c!=null&&c.canAcceptDrop==false)return false;return true},isc.A.$34c=function(){return this.canReorderRecords},isc.A.drop=function(){if(this.willAcceptDrop()==false)return false;var a=this.ns.EH.dragTarget,
b=this.getDropIndex(),c=a.cloneDragData(),d=b!=-2?this.data.get(b):null;if(this.onRecordDrop!=null&&this.onRecordDrop(c,d,b,a)==false)return false;return this.recordDrop(c,d,b,a)},isc.A.recordDrop=function(a,b,c,d){this.transferRecords(a,b,this.canReorderRecords?c:null,d);this.recordsDropped&&this.recordsDropped(a,c,this,d);return false},isc.A.viewRow=function(a){this.getDataSource().viewFile(this.getRecord(a))},isc.A.downloadRow=function(a){this.getDataSource().downloadFile(this.getRecord(a))},isc.A.autoSizeColumn=
function(a){var b=this.body.getColumnAutoSize(a);this.resizeField(a,b)},isc.A.getRecord=function(a,b){return this.getCellRecord(a,b)},isc.A.getCellRecord=function(a){if(isc.isA.Number(a)){if(!this.data||a>=this.data.getLength())return null;var b=this.data.get(a);this.$33q&&this.$34d(b,a);return b}else this.logWarn("getCellRecord called with bad rowNum: "+this.echo(a))},isc.A.$34d=function(a,b){if(!(a==null||a[this.editValuesTestedProperty])){if(this.$33a==null)this.$33a={};var c=true,d;for(d in this.$52b){var e=
this.$52b[d];if(e!=null&&e.$24t==null)if(this.comparePrimaryKeys(a,e.$33b)){e.$24t=b;this.$33a[b]=d}else c=false}c&&delete this.$33q;a[this.editValuesTestedProperty]=true}},isc.A.comparePrimaryKeys=function(a,b){var c=this.getPrimaryKeys(a);if(!this.dataSource||this.saveLocally)return c==b;for(var d in c)if(c[d]!=b[d])return false;return true},isc.A.getPrimaryKeys=function(a){if(this.shouldSaveLocally())return a;var b=this.getDataSource().getPrimaryKeyFieldNames(),c={};isc.isAn.Array(b)||(b=[b]);
for(var d=0;d<b.length;d++)c[b[d]]=a[b[d]];return c},isc.A.getTotalRows=function(){if(this.data==null)return 0;if(this.data.getLength==null){this.logWarn("GetTotalRows: ListGrid has invalid data object:"+this.echo(this.data));return 0}var a=this.data.getLength(),b=this.$34e();if(b!=null&&b+1>a)a=b+1;if(this.showNewRecordRow)a+=1;return a},isc.A.$34e=function(){if(this.$33j==null){for(var a=-1,b=this.$33a?isc.getKeys(this.$33a):[],c=0;c<b.length;c++){var d=parseInt(b[c]);if(d>a)a=d}this.$33j=a}return this.$33j},
isc.A.recordIsEnabled=function(a,b){var c=this.getCellRecord(a,b);if(c==null)return true;return c[this.recordEnabledProperty]!=false&&c[this.isSeparatorProperty]!=true},isc.A.cellIsEnabled=function(a,b){return this.recordIsEnabled(a,b)},isc.A.getCellField=function(a,b){return this.getField(b)},isc.A.getFields=function(){return this.fields},isc.A.getAllFields=function(){return this.completeFields||this.fields},isc.A.getSpecifiedField=function(a){var b=this.completeFields;if(b==null)b=this.fields;if(b!=
null)if(isc.isAn.Object(a)){if(b.contains(a))return a;return null}else return isc.isA.String(a)?b.find(this.fieldIdProperty,a):b[a]},isc.A.getFieldName=function(a){return(a=this.getField(a))?a[this.fieldIdProperty]:null},isc.A.getField=function(a){if(this.fields==null||a==null)return null;var b;if(this.$81g){b=this.fields[a];if(b!=null)return b}else if(isc.isA.Number(a))return this.fields[a];if(a.$81f||isc.isAn.Object(a))return a;if(isc.isA.String(a))return this.fields.find(this.fieldIdProperty,a);
return null},isc.A.getColNum=function(a){return this.getFieldNum(a)},isc.A.getFieldTitle=function(a){var b;b=isc.isAn.Object(a)?a:this.fields[a];if(!b)return"Unknown field";if(b.getFieldTitle){isc.Func.replaceWithMethod(b,"getFieldTitle","viewer,fieldNum");return b.getFieldTitle(this,a)}return b.title||b.name},isc.A.getSummaryTitle=function(a){if(a.getSummaryTitle!=null){isc.Func.replaceWithMethod(a,"getSummaryTitle","viewer,field");a=a.getSummaryTitle(this,a)}else a=a.summaryTitle!=null?a.summaryTitle:
this.getFieldTitle(a);return a},isc.A.setValueMap=function(a,b){this.Super("setValueMap",arguments);if(this.$30a){var c,d,e=this.getColNum(a);if(e!=-1&&e<this.fields.length){d=this.getField(a);c=d[this.fieldIdProperty];this.$286.setValueMap(c,this.getEditorValueMap(d,this.getEditedRecord(this.getEditRow(),e)))}}this.summaryRow&&this.summaryRow.setValueMap(a,b);this.isDrawn()&&this.isVisible()&&this.$25a("setValueMap")},isc.A.getDisplayValue=function(a,b){var c=this.getField(a);c=c?c.valueMap:null;
if(isc.isAn.Object(c)&&!isc.isAn.Array(c)&&isc.propertyDefined(c,b))return c[b];return b},isc.A.getData=function(){return this.data},isc.A.getRecordIndex=function(a){var b=-1;if(this.body&&this.body.isDrawn())b=this.data.indexOf(a,this.body.$252,this.body.$253);if(b==-1)b=this.data.indexOf(a);return b},isc.A.getRecordCellIndex=function(){return[this.getRecordIndex(),0]},isc.A.getEventRow=function(a){if(this.header&&this.header.containsPoint(this.ns.EH.getX(),this.ns.EH.getY()))return-1;return this.body.getEventRow(a)},
isc.A.getEventColumn=function(a){return this.body.getEventColumn(a)});isc.B.push(isc.A.getEventRecordNum=function(a){return this.getEventRow(a)},isc.A.getEventFieldNum=function(a){return this.getEventColumn(a)},isc.A.getReorderPosition=function(a,b){if(b==null)b=this.body.getOffsetY();if(a==null)a=this.getEventRow(b);if(a==-2)return isc.ListGrid.AFTER;if(a>=this.getTotalRows())return isc.ListGrid.BEFORE;var c=this.body.getRowTop(a),d=this.body.getRowSize(a);return b>Math.round(c+d/2)?isc.ListGrid.AFTER:
isc.ListGrid.BEFORE},isc.A.getDropIndex=function(a,b){if(this.data.getLength()==0)return 0;if(a==null)a=this.getEventRow();if(b==null)b=this.getReorderPosition(a);if(this.canReorderRecords){if(a==-2)a=this.data.getLength()-1;b==isc.ListGrid.AFTER&&a++}return a},isc.A.getSerializeableFields=function(a){a.addList(["header","selection"]);return this.Super("getSerializeableFields",arguments)},isc.A.deriveFrozenFields=function(){var a=this.frozenFields=this.fields.findAll("frozen",true),b=this.fields.findAll("autoFreeze",
true),c=this.fields.findAll("$74j",true);if(a&&c&&a.length==c.length){for(var d=0;d<c.length;d++){var e=c[d];e.frozen=false;delete e.$74j}a=this.frozenFields=null}c=this.completeFields.findAll("frozen",true);if(a&&a.length==this.fields.length){a=this.frozenFields=null;this.$54d=true}else this.$54d=false;if(a){if(b)for(d=0;d<b.length;d++){e=b[d];if(!e.frozen){e.frozen=true;e.$74j=true;var f=e.getAutoFreezePosition?e.getAutoFreezePosition():this.freezeLeft()?0:this.fields.length,g=e.getAutoFreezePosition?
e.getAutoFreezePosition():this.freezeLeft()?0:this.completeFields.length;a.addAt(e,f);c.addAt(e,g)}}this.fields.slideList(a,this.freezeLeft()?0:this.fields.length);this.completeFields.slideList(c,this.freezeLeft()?0:this.completeFields.length);this.resizeFieldsInRealTime=false}for(d=0;d<this.fields.length;d++){e=this.fields[d];e.masterIndex=d}if(a){a=this.normalFields=[];for(d=0;d<this.fields.length;d++){e=this.fields[d];e.frozen||a.add(e)}}else this.normalFields=null},isc.A.rebuildForFreeze=function(a){if(this.body){if(this.filterEditor){this.filterEditor.deriveVisibleFields();
this.filterEditor.updateBody(a);this.filterEditor.remapEditFieldsForFreeze();this.filterEditor.layoutChildren(this.$60m)}this.endEditing();this.deriveVisibleFields();this.updateHeader();this.updateBody(a);this.layoutChildren(this.$60m);this.frozenBody&&this.frozenBody.markForRedraw("Recalculating draw area from initial sizing of body");if(this.summaryRow&&this.showGridSummary){this.summaryRow.setFields(this.completeFields.duplicate());this.summaryRow.rebuildForFreeze(a);this.summaryRow.recalculateSummaries()}}},
isc.A.setCanFreezeFields=function(a){this.canFreezeFields=a;delete this.$60v},isc.A.refreshMasterIndex=function(){if(this.body){this.header&&this.$51c(this.header.getMembers());this.body&&this.$51c(this.body.fields);if(this.frozenFields){this.frozenHeader&&this.$51c(this.frozenHeader.getMembers());this.frozenBody&&this.$51c(this.frozenBody.fields)}}},isc.A.$51c=function(a){for(var b=0;b<a.length;b++)a[b].masterIndex=this.fields.findIndex("name",a[b].name)},isc.A.getFreezeOn=function(){return this.freezeOn!=
null?this.freezeOn:this.isRTL()?"right":"left"},isc.A.freezeLeft=function(){return this.getFreezeOn()=="left"},isc.A.getLeftBody=function(){return this.frozenFields&&this.freezeLeft()?this.frozenBody:this.body},isc.A.getRightBody=function(){return this.frozenFields&&!this.freezeLeft()?this.frozenBody:this.body},isc.A.setFreezeOn=function(a){var b=this.get;this.freezeOn=a;a!=b&&this.rebuildForFreeze(true)},isc.A.getFrozenSlots=function(a){var b=this.frozenFields;if(!b)return a;return this.freezeLeft()?
a.slice(0,b.length):a.slice(a.length-b.length)},isc.A.getUnfrozenSlots=function(a){var b=this.frozenFields;if(!b)return a;return this.freezeLeft()?a.slice(b.length):a.slice(0,a.length-b.length)},isc.A.fieldIsFrozen=function(a){if(!this.frozenFields)return false;return(a=this.getField(a))&&a.frozen},isc.A.getFieldBody=function(a){if(!this.frozenFields)return this.body;return this.fieldIsFrozen(a)?this.frozenBody:this.body},isc.A.getFieldHeader=function(a){if(!this.frozenFields)return this.header;return this.fieldIsFrozen(a)?
this.frozenHeader:this.header},isc.A.getFieldHeaderButton=function(a){var b=this.getFieldHeader(a);return b?b.getMember(this.getLocalFieldNum(a)):null},isc.A.getLocalFieldNum=function(a){if(!this.frozenFields)return a;var b;b=this.frozenFields.length;if(!this.fieldIsFrozen(a))return a-b;return this.freezeLeft()?a:a-(this.fields.length-this.frozenFields.length)},isc.A.getFieldNumFromLocal=function(a,b){if(!this.frozenFields)return a;if(b==this.frozenBody)return this.freezeLeft()?a:a+(this.fields.length-
this.frozenFields.length);else{var c=this.freezeLeft()?this.frozenFields.length:0;return a+c}},isc.A.getColumnLeft=function(a){return this.getFieldBody(a).getColumnLeft(this.getLocalFieldNum(a))},isc.A.getColumnPageLeft=function(a){return this.getFieldBody(a).getColumnPageLeft(this.getLocalFieldNum(a))},isc.A.getColumnWidth=function(a){return this.getFieldBody(a).getColumnWidth(this.getLocalFieldNum(a))},isc.A.refreshCellStyle=function(a,b,c){return this.getFieldBody(b).refreshCellStyle(a,this.getLocalFieldNum(b),
c)},isc.A.freezeField=function(a){return this.toggleFrozen(a,true)},isc.A.unfreezeField=function(a){return this.toggleFrozen(a,false)},isc.A.toggleFrozen=function(a,b){isc.isAn.Array(a)||(a=[a]);for(var c=false,d=0;d<a.length;d++){var e=this.getField(a[d]);if(!(!e||!this.fieldIsVisible(e)||this.isCheckboxField(e))){var f=b;if(f==null)f=!e.frozen;if(e.frozen!=b){c=true;e.frozen=f}}}if(!c)return false;this.rebuildForFreeze();return true},isc.A.updateBody=function(a){if(a||this.frozenFields&&!this.frozenBody||
this.frozenBody&&!this.frozenFields){a=true;this.dropRecordComponents();if(this.frozenFields){this.$62b=this.showRollOverCanvas;this.$62c=this.showSelectionCanvas;this.showSelectionCanvas=this.showRollOverCanvas=false;this.$62b&&this.updateRollOverCanvas();this.$62c&&this.updateSelectionCanvas()}else{if(this.$62b)this.showRollOverCanvas=true;if(this.$62c)this.showSelectionCanvas=true;delete this.$62b;delete this.$62c}this.body&&this.$810();this.bodyLayout&&this.bodyLayout.destroy();this.body&&this.body.destroy();
this.body=this.bodyLayout=this.frozenBody=null;this.createBodies()}if(this.body){this.body.fields=this.normalFields||this.fields;a||this.$75n(this.body);this.body.markForRedraw("fields change")}if(this.frozenBody){this.frozenBody.fields=this.frozenFields;a||this.$75n(this.frozenBody);this.frozenBody.markForRedraw("fields change")}},isc.A.shouldDestroyOnUnembed=function(a,b){if(a.isBackgroundComponent){if(b==this.$81l&&a.creator==this)return true;return false}if(a.isRecordComponent){if(b==this.$81l)return true;
return false}if(a.destroyOnUnembed!=null)return a.destroyOnUnembed;if(b==this.$81p)return false;return true},isc.A.$810=function(){var a=this.body.$29a;if(this.frozenBody){var b=[];a=a==null?b:b.addList(a);a.addList(this.frozenBody.$29a||[])}if(a&&a.length>0)for(b=0;b<a.length;b++){var c=a[b].embeddedRecord,d=false;if(c.$29a){for(var e=0;e<c.$29a.length;e++){var f=c.$29a[e];d=d||f.isExpansionComponent;this.shouldDestroyOnUnembed(f,this.$81q)?f.markForDestroy():f.deparent()}c.$29a=null;if(d)c.expanded=
false;delete c.$29a}}},isc.A.createBodies=function(){if(this.body==null){this.$80i();this.body=this.createBody(this.ID+"_body",this.normalFields||this.fields);this.bodies=[this.body];this.dragScrollTarget=this.body;var a=this.frozenFields;if(a){this.frozenBody=this.createBody(this.ID+"$51d",a,true);this.body.hscrollOn&&!this.shrinkForFreeze&&this.frozenBody.setEndSpace(this.body.getScrollbarSize());this.observe(this.body,"adjustOverflow","observer.bodyOverflowed()");this.freezeLeft()?this.bodies.unshift(this.frozenBody):
this.bodies.add(this.frozenBody);this.addAutoChild("bodyLayout",{autoDraw:false,members:this.bodies},isc.HLayout)}else this.addChild(this.body)}},isc.A.bodyOverflowed=function(){if(this.frozenBody)this.frozenBody.setEndSpace(this.body.hscrollOn&&!this.shrinkForFreeze?this.body.getScrollbarSize():0)},isc.A.createBody=function(a,b,c){var d=isc.ClassFactory.getClass(this.bodyConstructor).createRaw();d.ID=a;d.autoDraw=false;d.grid=this;d.fields=b;d.frozen=c;d.overflow=c?"hidden":this.bodyOverflow;d.backgroundColor=
this.bodyBackgroundColor;a=this.bodyStyleName;if(this.alternateBodyStyleName!=null&&this.alternateRecordStyles)a=this.alternateBodyStyleName;d.styleName=a;d.allowContentAndChildren=true;d.fixedRowHeights=this.fixedRecordHeights;d.fixedColumnWidths=this.fixedFieldWidths;d.alternateRowStyles=this.alternateRecordStyles;d.alternateRowFrequency=this.alternateRecordFrequency;d.canSelectText=this.canDragSelectText;d.showAllRows=this.showAllRecords;if(this.virtualScrolling!=null)d.virtualScrolling=this.virtualScrolling;
if(d.virtualScrolling)d.fixedRowHeights=false;d.tabIndex=this.getTabIndex();d.dragTarget=this.canDragSelect?null:this;d.dragAppearance=isc.EventHandler.NONE;d.locatorParent=this;d.selectionAppearance=this.selectionAppearance;a=isc.ListGrid.$295;for(b=0;b<a.length;b++){c=a[b];var e=this[c];if(e!=null)d[c]=e}isc.addProperties(d,this.bodyDefaults,this.bodyProperties);this.$51e(d);d.completeCreation();return d},isc.A.getRowHeight=function(a,b){var c=this.cellHeight;if(this.frozenFields&&this.getEditRow()==
b){var d=this.getEditForm();d=d?d.getItems():[];for(var e=0;e<d.length;e++){var f=d[e].getHeight()+2*this.cellPadding;if(f>c)c=f}}return this.body.updateHeightForEmbeddedComponents(a,b,c)},isc.A.makeSelectionCanvas=function(){this.selectionCanvas=this.createAutoChild("selectionCanvas",{eventProxy:this.body,snapTo:"TL",width:"100%",height:"100%",bubbleMouseEvents:true,destroyOnUnEmbed:false,percentSource:this,percentBox:"custom",grid:this,autoDraw:false});this.selectionUnderCanvas=this.createAutoChild("selectionUnderCanvas",
{eventProxy:this.body,snapTo:"TL",width:"100%",height:"100%",bubbleMouseEvents:true,destroyOnUnEmbed:false,percentSource:this,percentBox:"custom",grid:this,autoDraw:false})},isc.A.getSelectionCanvas=function(){this.selectionCanvas||this.makeSelectionCanvas();return this.selectionCanvas},isc.A.getSelectionUnderCanvas=function(){this.selectionUnderCanvas||this.makeSelectionCanvas();return this.selectionUnderCanvas},isc.A.updateSelectionCanvas=function(){var a=this.selection,b,c;if(isc.isA.CellSelection(a)){a=
(c=a.getSelectedCells()[0])?c[0]:-1;b=c?c[1]:-1;c=c?this.getCellRecord(a,b):null}else{c=this.getSelectedRecord();a=this.data?this.data.indexOf(c):-1}var d=this.selectionCanvas,e=d?d.embeddedRecord:null,f=d?d.$289:-1,g=d?d.$57n:-1;if(this.selectionCanvas==null){if(c==null||!this.showSelectionCanvas)return}else if(this.showSelectionCanvas&&e==c&&f==a&&g==b)return;if(this.showSelectionCanvas&&this.selectionType!=isc.Selection.SINGLE&&this.selectionType!=isc.Selection.NONE){this.logWarn("showSelectionCanvas is set to true, but not supported for selectionType "+
this.selectionType);this.showSelectionCanvas=false}if(!c||a==-1||!this.showSelectionCanvas){if(e){this.removeEmbeddedComponent(e,d);f=this.selectionUnderCanvas;this.removeEmbeddedComponent(e,f)}}else{d=this.getSelectionCanvas();f=this.getSelectionUnderCanvas();d.record=c;f.record=c;this.addEmbeddedComponent(d,c,a,b,"within");this.addEmbeddedComponent(f,c,a,b,"within")}},isc.A.makeRollOverCanvas=function(){this.rollOverCanvas=this.createAutoChild("rollOverCanvas",{eventProxy:this.body,percentSource:this,
percentBox:"custom",bubbleMouseEvents:true,destroyOnUnEmbed:false,grid:this,autoDraw:false});this.rollUnderCanvas=this.createAutoChild("rollUnderCanvas",{eventProxy:this.body,percentSource:this,percentBox:"custom",bubbleMouseEvents:true,destroyOnUnEmbed:false,grid:this,autoDraw:false})},isc.A.getRollOverCanvas=function(){this.rollOverCanvas||this.makeRollOverCanvas();return this.rollOverCanvas},isc.A.getRollUnderCanvas=function(){this.rollUnderCanvas||this.makeRollOverCanvas();return this.rollUnderCanvas},
isc.A.updateRollOverCanvas=function(a,b,c){if(c||!this.showRollOverCanvas||a==-1){if(this.rollOverCanvas){this.removeEmbeddedComponent(this.rollOverCanvas.embeddedRecord,this.rollOverCanvas);this.removeEmbeddedComponent(this.rollUnderCanvas.embeddedRecord,this.rollUnderCanvas)}}else{c=this.getCellRecord(a,b);this.useCellRollOvers||(b=null);var d=this.rollOverCanvas=this.getRollOverCanvas(a,b),e=this.rollUnderCanvas=this.getRollUnderCanvas(a,b);d.record=c;e.record=c;this.addEmbeddedComponent(d,c,a,
b,"within");this.addEmbeddedComponent(e,c,a,b,"within")}},isc.A.updateEmbeddedComponentZIndex=function(a){if(a){if(this.selectionCanvas==a){var b=this.body.getTableZIndex();this.selectionCanvas.setZIndex(b+50)}if(this.selectionUnderCanvas==a){b=this.body.getTableZIndex();this.selectionUnderCanvas.setZIndex(b-100)}if(this.rollOverCanvas==a){b=this.body.getTableZIndex();a.setZIndex(b+100)}if(this.rollUnderCanvas==a){b=this.body.getTableZIndex();a.setZIndex(b-50)}}},isc.A.$80d=function(a,b,c,d){if(this.frozenBody!=
null&&d!=null&&d!=0)(a==this.frozenBody?this.body:this.frozenBody).markForRedraw("Embedded component requires row resizing")},isc.A.getButtonProperties=function(){var a={align:null};if(this.headerTitleStyle!=null)a.titleStyle=this.headerTitleStyle;if(this.headerBaseStyle!=null)a.baseStyle=this.headerBaseStyle;if(this.headerButtonSrc!=null)a.src=this.headerButtonSrc;if(this.frozenHeaderBaseStyle!=null)a.frozenBaseStyle=this.frozenHeaderBaseStyle;if(this.frozenHeaderTitleStyle!=null)a.frozenTitleStyle=
this.frozenHeaderTitleStyle;if(this.frozenHeaderButtonSrc!=null)a.frozenSrc=this.frozenHeaderButtonSrc;return isc.addProperties({},this.headerButtonDefaults,a,this.headerButtonProperties)},isc.A.getHeaderButtonProperties=function(a){var b=this.getButtonProperties();if(this.buttonTitleFunction==null)this.buttonTitleFunction=new Function("return this.parentElement.grid.getHeaderButtonTitle(this)");isc.addProperties(b,{defaultRadioGroup:this.getID()+"$34f",getActionType:function(c,d,e,f){var g=this.parentElement,
h;if(g)h=g.grid;if(h&&isc.isA.ListGrid(h)){g=h.fields[g.getButtonNumber(this)];var i=h.canSort!=false;if(i&&g!=null)i=h.$66c(g)!=false;if(i)return isc.Button.RADIO}return this.invokeSuper(null,"getActionType",c,d,e,f)},getTitle:this.buttonTitleFunction,mouseOver:function(){var c=this.parentElement.grid;if(c.shouldShowHeaderMenuButton(this)){c=c.getHeaderMenuButton(this);this.addPeer(c);c.addProperties({dragTarget:this});this.zIndex>c.zIndex&&c.bringToFront();c.isVisible()||c.show()}return this.Super("mouseOver",
arguments)},mouseOut:function(){var c=this.parentElement.grid,d=c.headerMenuButton;d&&d.isVisible()&&d.masterElement==this&&isc.EH.getTarget()!=d&&c.headerMenuButton.hide();return this.Super("mouseOut",arguments)}},a);return b},isc.A.makeHeader=function(a){if(this.header==null){if(this.headerSpans){this.spanMap={};for(var b=0;b<this.headerSpans.length;b++)for(var c=this.headerSpans[b],d=0;d<c.fields.length;d++)this.spanMap[c.fields[d]]=c}b=this.header=this.makeHeaderForFields(this.normalFields||this.fields);
b.locatorParent=this;this.sorter==null&&this.makeCornerSortButton();this.headers=[b];if(this.frozenFields){this.frozenHeader=this.makeHeaderForFields(this.frozenFields,"visible",this.getID()+"$51f");this.freezeLeft()?this.headers.unshift(this.frozenHeader):this.headers.add(this.frozenHeader);this.headerLayout=this.createAutoChild("headerLayout",{autoDraw:false,overflow:"hidden",height:this.headerHeight,members:this.headers},isc.HLayout);this.addChild(this.headerLayout,null,!a)}else this.addChild(b,
null,!a)}},isc.A.makeHeaderForFields=function(a,b,c){a=this.createHeader({ID:c,grid:this,buttons:a.duplicate(),reorderOnDrop:false,height:null,minMemberSize:this.minFieldWidth,tabWithinToolbar:false,overflow:b||"hidden",_redrawWithParent:!this.fixedFieldWidths});this.observe(a,"scrollTo","observer.headerScrolled()");return a},isc.A.createHeader=function(a){var b=this,c=isc.addProperties({makeButton:function(d,e,f,g,h){d=isc.addProperties({},d);if(d.headerTitleStyle)d.titleStyle=d.headerTitleStyle;
else if(d.frozen&&this.buttonProperties.frozenTitleStyle)d.titleStyle=d.frozenTitleStyle;if(d.frozen&&this.buttonProperties.frozenSrc)d.src=this.buttonProperties.frozenSrc;d.showIf=null;d.grid=b;if(b.shouldAutoFitField(d)){var i=b.getAutoFitWidthApproach(d);if(i=="title"||i=="both")d.overflow="visible"}if(d.$776)d.width=d.$776;d.sizeImageToFitOverflow=true;d=this.Super("makeButton",[d,e,f,g,h]);if(d.headerBaseStyle)d.baseStyle=d.headerBaseStyle;else if(d.frozen&&this.buttonProperties.frozenBaseStyle)d.setBaseStyle(this.buttonProperties.frozenBaseStyle);
else this.buttonProperties.baseStyle!=null&&d.setBaseStyle(this.buttonProperties.baseStyle);return d},buttonProperties:this.getHeaderButtonProperties(),border:this.headerBorder,styleName:this.headerBarStyle,backgroundColor:this.headerBackgroundColor,backgroundImage:this.headerBackgroundImage,tabIndex:this.canTabToHeader?this.getTabIndex():-1,canResizeItems:this.canResizeFields,canReorderItems:this.canReorderFields,dontObserve:false,childVisibilityChanged:function(){this.Super("childVisibilityChanged",
arguments);this.$55g()},$3j:function(){this.Super("$3j",arguments);this.$55g()},spannedFields:Array.create({sortUnique:true}),addSpan:function(d,e){if(!this.$55h)this.$55h=[];this.$55h.add(d);this.spannedFields.addList(e);if(this.isDrawn()){this.$55i(d);this.addChild(d)}},$55g:function(){if(this.$55h&&this.isDrawn()){var d=this.instantRelayout;this.instantRelayout=false;for(var e=0;e<this.$55h.length;e++)this.$55i(this.$55h[e]);this.instantRelayout=d}},$55i:function(d){if(this.isDrawn()){d.$55j&&
d.setHeight(Math.floor(this.getVisibleHeight()/2));var e=this.members.findAll("name",d.$55k);if(e){for(var f,g=0,h=0;h<e.length;h++){var i=e[h];i.canReorder=false;i.layoutAlign="bottom";if(i.visibility!=isc.Canvas.HIDDEN){g+=i.getVisibleWidth();if(!f||this.isRTL())f=i}}if(f){d.show();d.setLeft(f.getLeft());d.setWidth(g)}}else d.hide()}},$58r:function(){if(this.$55h){this.$55g();for(var d=this.getVisibleHeight(),e=0;e<this.$55h.length;e++){var f=this.$55h[e];this.addChild(f);var g=this.members.findAll("name",
f.$55k);if(g){for(var h=0;h<g.length;h++){var i=g[h],j=i.getVisibleHeight(),k=f.getVisibleHeight();k+j>d&&i.setHeight(j-k)}f.bringToFront()}}}},addButtons:function(d){this.Super("addButtons",arguments);b.headerSpans&&b.$60x(d,this);this.$58r()},draw:function(){if(this.$55h&&b.unspannedHeaderVAlign)for(var d=0;d<this.buttons.length;d++){var e=this.buttons[d];if(!this.spannedFields.contains(e.name))e.valign=b.unspannedHeaderVAlign}this.Super("draw",arguments);this.$58r()},getStandardChildLocator:function(d){var e=
d.masterIndex,f=this.grid;if(e!=null&&f!=null){d=f.getFieldName(e);return isc.AutoTest.createLocatorFallbackPath("headerButton",{fieldName:d})}return this.Super("getStandardChildLocator",d)},getChildFromLocatorSubstring:function(d){if(isc.isA.Canvas(this[d]))return this[d];var e=isc.AutoTest.parseLocatorFallbackPath(d);if(this.grid&&e&&e.name=="headerButton"){e=e.config.fieldName;var f=this.grid.getFieldNum(e),g=this.grid.getFieldHeader(f);if(f==-1||g==null){this.logWarn("fieldName:"+e+", gave fieldNum:"+
f+" unable to find header button for this field.");return}if(g!=this){this.logWarn("AutoTest locator string specified this header for field "+e+" but that header button is contained in header "+g+". This can happen if headers have been frozen / unfrozen since the locator string was created. Redirecting to that widget.");return g.getChildFromLocatorSubstring(d)}return this.members[this.grid.getLocalFieldNum(f)]}return this.Super("getChildFromLocatorSubstring",arguments)}},a);if(this.headerButtonConstructor!=
null)c.buttonConstructor=this.headerButtonConstructor;c=this.createAutoChild("header",c,isc.Toolbar);c.canReorderItems&&!c.dontObserve&&this.observe(c,"itemDragReordered","observer.headerDragReordered(itemNum,newPosition,this)");c.canResizeItems&&!c.dontObserve&&this.$62l(c);this.headerSpans&&this.$60x(a.buttons,c);return c},isc.A.$60x=function(a,b){for(var c=[],d=a.getProperty(this.fieldIdProperty),e=0;e<this.headerSpans.length;e++){var f=this.headerSpans[e];d.intersect(f.fields).length&&c.add(f)}for(e=
0;e<c.length;e++){f=c[e];var g=this;d=isc.addProperties(this.getButtonProperties(),{_constructor:b.buttonConstructor,height:this.headerSpanHeight,align:"center",valign:this.headerSpanVAlign,showRollOver:false,showContextMenu:function(){return g.headerSpanContextClick(this)}},f);var h=f.liveObject=this.createAutoChild("headerSpan",d);h.$55j=this.headerSpanHeight==null;h.$55j&&[this.headerSpanDefaults,this.headerSpanProperties,f].map(function(i){if(i&&i.height!=null)h.$55j=false});h.$55k=f.fields;b.addSpan(h,
h.fields)}},isc.A.dirtyHeader=function(){this.header&&this.header.markForRedraw()},isc.A.updateHeader=function(){var a=this.frozenHeader?this.headerLayout:this.header;if(a){a.markForDestroy();a.clearIDs()}this.header=this.frozenHeader=this.headerLayout=null;if(this.headerMenuButton&&this.headerMenuButton.destroyed)this.headerMenuButton=null;if(this.showHeader)this.makeHeader(true);else this.sorter&&this.sorter.hide()},isc.A.setHeaderHeight=function(a){var b=this.headerHeight;if(b!=a){this.headerHeight=
a;if(this.showHeader!=false)if(!this.header&&a>0)this.isDrawn()&&this.makeHeader();else{b==0&&this.updateHeader();this.layoutChildren(this.$616)}}},isc.A.setShowHeader=function(a){if(a!=this.showHeader){this.showHeader=a;this.updateHeader();this.layoutChildren(this.$617)}},isc.A.shouldShowHeaderMenuButton=function(a){var b;b=a.showDefaultContextMenu==false?false:a.showHeaderContextMenuButton!=null?a.showHeaderContextMenuButton:this.showHeaderMenuButton;if(this.showHeaderContextMenu&&b)return(a=this.getHeaderContextMenuItems(a.masterIndex))&&
a.length>0;return false},isc.A.getHeaderMenuButton=function(a){if(!this.headerMenuButton||this.headerMenuButton.destroyed){var b={};if(this.headerMenuButtonHeight)b.height=this.headerMenuButtonHeight;if(this.headerMenuButtonWidth)b.width=this.headerMenuButtonWidth;if(this.headerMenuButtonIcon)b.icon=this.headerMenuButtonIcon;if(this.headerMenuButtonIconHeight)b.iconHeight=this.headerMenuButtonIconHeight;if(this.headerMenuButtonIconWidth)b.iconWidth=this.headerMenuButtonIconWidth;if(this.headerMenuButtonBaseStyle)b.baseStyle=
this.headerMenuButtonBaseStyle;if(this.headerMenuButtonTitleStyle)b.titleStyle=this.headerMenuButtonTitleStyle;if(this.headerMenuButtonSrc)b.src=this.headerMenuButtonSrc;this.createAutoChild("headerMenuButton",b,"Button",true)}this.headerMenuButton.canDragResize=a&&a.canDragResize!=null?a.canDragResize&&this.canResizeFields:this.canResizeFields;this.headerMenuButton.addProperties({doubleClick:function(){this.creator.headerMenuButtonDoubleClick()}});return this.headerMenuButton},isc.A.headerMenuButtonClick=
function(){var a=this.header,b=a.getMouseOverButtonIndex();if(b==-1&&this.frozenHeader){a=this.frozenHeader;b=a.getMouseOverButtonIndex()}if(b!=-1){a=a.getMember(b);b=a.getPageBottom();var c=this.$314?this.$314.getVisibleWidth():isc.Menu.getPrototype().defaultWidth;c=Math.max(a.getPageLeft(),a.getPageRight()-c);this.displayHeaderContextMenu(a,[c,b]);this.headerMenuButton.bringToFront()}},isc.A.headerMenuButtonDoubleClick=function(){var a=this.header,b=a.getMouseOverButtonIndex();if(b==-1&&this.frozenHeader){a=
this.frozenHeader;b=a.getMouseOverButtonIndex()}if(b!=-1){a.getMember(b);this.headerDoubleClick(b,a);isc.Menu.hideAllMenus()}},isc.A.getHeaderButtonTitle=function(a){var b=a;if(isc.isA.Object(a))b=a.masterIndex;a=this.fields[b];if(!a)return"";var c=a[this.fieldIdProperty],d=this.isSortField(c),e=d&&(!this.showSortArrow||this.showSortArrow==isc.ListGrid.FIELD||this.showSortArrow==isc.ListGrid.BOTH);d=d&&this.getSortFieldCount()>1;var f=this.getFieldTitle(b),g;if(d)g=this.getSortSpecifier(c).sortIndex;
b=f+(e?"&nbsp;"+this.getSortArrowImage(b):"")+(d?"&nbsp;"+this.getSortNumeralHTML(c,g):"");return a.showTitle!=false?b:isc.nbsp},isc.A.$63m=function(a){var b=this.getCheckboxFieldPosition(),c=this.fields[b];if(this.isCheckboxField(c)){var d=a?this.checkboxFieldTrueImage||this.booleanTrueImage:this.checkboxFieldFalseImage||this.booleanFalseImage;d=this.canSelectAll==false||this.selectionType=="single"?" ":this.getValueIconHTML(d,c);this.setFieldTitle(b,d);c.$63h=a}},isc.A.$666=function(a,b){return this.headerClick(b.getMember(a).masterIndex,
b)},isc.A.headerClick=function(a,b){if(!(this.onHeaderClick&&this.onHeaderClick(a,b)==false)){var c=this.fields[a];if(this.isCheckboxField(c)&&this.selectionType!="single"&&this.canSelectAll!=false){if(c.$63h){this.deselectAllRecords();this.$63m(false)}else{this.selectAllRecords();if(!isc.ResultSet||!isc.isA.ResultSet(this.data)||this.data.allMatchingRowsCached())this.$63m(true)}return false}this.canAutoFitFields&&this.headerAutoFitEvent=="click"&&this.autoFitField(a);if(this.canSort==false||!c||
this.$66c(c)==false)return false;c=c[this.fieldIdProperty];this.isSortField(c)&&this.getSortSpecifier(c);var d=isc.EventHandler;d.getKey();d=d.shiftKeyDown();var e=this.$765,f=this.getSpecifiedField(c).sortDirection;if(d&&this.canMultiSort)if(this.isSortField(c))f==e||this.canUnsort==false?this.toggleSort(c):this.toggleSort(c,"unsort");else this.$73z(c);else if(this.isSortField(c)&&this.getSortFieldCount()==1)f==e||this.canUnsort==false?this.toggleSort(c):this.toggleSort(c,"unsort");else this.setSort([{property:c,
direction:e?"ascending":"descending"}]);return false}},isc.A.$774=function(a,b){return this.headerDoubleClick(b.getMember(a).masterIndex,b)},isc.A.headerDoubleClick=function(a){if(!this.isCheckboxField(this.fields[a])){this.canAutoFitFields&&this.headerAutoFitEvent=="doubleClick"&&this.autoFitField(a);return false}},isc.A.fieldDragResizeStart=function(){this.makeDragLine();this._dragLine.resizeTo(2,this.getVisibleHeight()-(this.body.hscrollOn?this.body.getScrollbarSize():0));var a=this.ns.EH.dragTarget,
b=this.getField(a.masterIndex);if(b)b.autoFitWidth=false;a.setWidth(a.getVisibleWidth());a.setOverflow("hidden")},isc.A.fieldDragResizeMove=function(){var a=this.ns.EH,b=this.header.$6j;this.showDragLineForField(b);if(this.resizeFieldsInRealTime){this.$26a[b]=a.dragResizeWidth;this.$54e=true;this.setBodyFieldWidths(this.$26a);this.body.useQuickDrawAheadRatio=true;this.body.redraw("fieldDragResize");delete this.body.useQuickDrawAheadRatio;delete this.body.$54e;a=this.body.getScrollLeft();a>0&&this.header.scrollTo(a)}},
isc.A.fieldDragResizeStop=function(){this.hideDragLine()},isc.A.headerDragReordered=function(a,b,c){a=c.getMember(a).masterIndex;b=c.getMember(b).masterIndex;this.reorderField(a,b)},isc.A.reorderField=function(a,b){this.reorderFields(a,a+1,b-a)},isc.A.reorderFields=function(a,b,c){this.showFilterEditor&&this.filterEditor!=null&&this.filterEditor.reorderFields(a,b,c);this.summaryRow&&this.showGridSummary&&this.summaryRow.reorderFields(a,b,c);var d=this.fields[a],e=this.fields[b-1],f=this.fields[a+
c],g=this.$60z(),h=this.fields[g];this.$26a!=null&&this.$26a.slideRange(a,b,a+c);this.completeFields==null&&this.setFields(this.fields);if(this.completeFields.contains(f)){d=this.completeFields.indexOf(d);e=this.completeFields.indexOf(e)+1;f=this.completeFields.indexOf(f);this.completeFields.slideRange(d,e,f)}this.deriveVisibleFields();if(g!=null){g=this.fields.indexOf(h);if(g==-1)g=null;this.$600(g)}if(this.frozenFields){this.rebuildForFreeze();h=this.getFieldHeader(a)}else(h=this.getFieldHeader(a))&&
h.reorderItems(this.getLocalFieldNum(a),this.getLocalFieldNum(b),this.getLocalFieldNum(a+c));g!=null&&h&&h.selectButton(this.getLocalFieldNum(g));if(this.$30a){b=this.$286;this.getEditRow();c=this.getEditField();g=[];for(h=0;h<b.items.length;h++){f=b.items[h];f.colNum=this.fields.findIndex(this.fieldIdProperty,f.getFieldName());for(d=0;d<=g.length;d++)if(g[d]==null||g[d].colNum>f.colNum){g.addAt(f,d);break}}b.items.setArray(g);this.$30u=this.fields.indexOf(c)}b=this.body;if(this.frozenFields&&a<this.frozenFields.length)b=
this.frozenBody;if(b){this.body.fields=this.normalFields||this.fields;if(this.frozenBody)this.frozenBody.fields=this.frozenFields;this.setBodyFieldWidths(this.$26a);b.$29a!=null&&this.$75n(b);b.isDirty()||this.$25a("reorderFields")}this.fieldStateChanged()},isc.A.remapEditFieldsForFreeze=function(){if(this.$30a)for(var a=this.getEditForm().getItems(),b=0;b<a.length;b++){var c=a[b];c.colNum=this.fields.findIndex(this.fieldIdProperty,c.getFieldName());c.containerWidget=this.fields[c.colNum].frozen?
this.frozenBody:this.body}},isc.A.headerDragResized=function(a,b,c){this.resizeField(c.getMember(a).masterIndex,b,true)},isc.A.setCanResizeFields=function(a){if(this.canResizeFields!=a){this.canResizeFields=a;this.header&&this.header.setCanResizeItems(a);this.frozenHeader&&this.frozenHeader.setCanResizeItems(a);if(this.headerMenuButton)this.headerMenuButton.canDragResize=a;if(a){this.header&&!this.header.dontObserve&&this.$62l(this.header);this.frozenHeader&&!this.frozenHeader.dontObserve&&this.$62l(this.frozenHeader)}else{this.header&&
this.$62m(this.header);this.frozenHeader&&this.$62m(this.frozenHeader)}}},isc.A.$62l=function(a){this.observe(a,"itemDragResized","observer.headerDragResized(itemNum,newSize,this)");this.observe(a,"dragResizeMemberStart","observer.fieldDragResizeStart()");this.observe(a,"dragResizeMemberMove","observer.fieldDragResizeMove()");this.observe(a,"dragResizeMemberStop","observer.fieldDragResizeStop()")},isc.A.$62m=function(a){this.isObserving(a,"itemDragResized")&&this.ignore(a,"itemDragResized");this.isObserving(a,
"dragResizeMemberStart")&&this.ignore(a,"dragResizeMemberStart");this.isObserving(a,"dragResizeMemberMove")&&this.ignore(a,"dragResizeMemberMove");this.isObserving(a,"dragResizeMemberStop")&&this.ignore(a,"dragResizeMemberStop")},isc.A.resizeField=function(a,b,c){isc.isA.Number(a)||(a=this.getFieldNum(a));if(a!=-1){if(this.header&&this.header.isDrawn()){var d=this.getFieldHeader(a),e=this.getLocalFieldNum(a);d.getMember(e).setWidth(b)}if(c==null||c){this.fields[a].width=b;this.fields[a].autoFitWidth=
false}if(this.isDrawn()){this.$26a[a]=b;this.$54e=true;this.setBodyFieldWidths(this.$26a);this.body.isDirty()&&this.body.redraw("setting body field widths");delete this.$54e;this.showFilterEditor&&this.filterEditor&&this.filterEditor.resizeField(a,b,c);this.summaryRow&&this.showGridSummary&&this.summaryRow.resizeField(a,b,c);this.fieldStateChanged()}}},isc.A.$313=function(){var a=this.showSortArrow;if(a!=null)return a==isc.ListGrid.CORNER||a==isc.ListGrid.BOTH;return this.$54u()},isc.A.$54u=function(){if(this.leaveScrollbarGap)return true;
if(!this.body||this.isEmpty())return false;if(this.body.vscrollOn)return true;var a=this.headerHeight;a=this.getInnerHeight()-this.body.getVMarginBorder()-(this.showHeader?a:0);if(this.autoFitData==isc.Canvas.VERTICAL||this.autoFitData==isc.Canvas.BOTH){a=this.getTotalRows()*this.cellHeight;var b=this.getAutoFitMaxBodyHeight();if(b&&b<a)a=b;if(this.autoFitMaxRows&&this.autoFitMaxRows*this.cellHeight>a)a=this.autoFitMaxRows*this.cellHeight}if(a<=0)return false;return this.predictScrollbarGap&&this.bodyOverflow==
isc.Canvas.AUTO&&this.getTotalRows()*this.cellHeight>a},isc.A.getSorterLeft=function(){return this.isRTL()?this.getLeftMargin()+this.getLeftBorderSize():this.getWidth()-this.getScrollbarSize()-this.getHMarginBorder()},isc.A.makeCornerSortButton=function(){this.addAutoChild("sorter",isc.addProperties(this.getButtonProperties(),this.sorterDefaults,{ID:this.getID()+"_sorter",left:this.getSorterLeft(),top:0,width:this.getScrollbarSize(),height:this.headerHeight,backgroundColor:this.headerBackgroundColor,
imgDir:this.widgetImgDir,visibility:this.$313()?isc.Canvas.INHERIT:isc.Canvas.HIDDEN}))});isc.B.push(isc.A.sorterContextClick=function(){var a=this.showHeaderContextMenu;if(this.showCornerContextMenu!=null)a=this.showCornerContextMenu;if(a)return this.displayHeaderContextMenu(this.sorter)},isc.A.headerBarContextClick=function(a){var b=this.showHeaderContextMenu;if(this.showCornerContextMenu!=null)b=this.showCornerContextMenu;if(b)return this.displayHeaderContextMenu(a.getMember(a.getMouseOverButtonIndex()))},
isc.A.headerSpanContextClick=function(a){a=this.getHeaderSpanContextMenuItems(a);if(!a||a.length==0)return false;if(this.$58q)this.$58q.setItems(a);else this.$58q=this.getMenuConstructor().create({items:a});this.$58q.showContextMenu();return false},isc.A.displayHeaderContextMenu=function(a,b){if(a){var c=this.fields[a.masterIndex];if(c&&c.showDefaultContextMenu==false)return false;c=this.getHeaderContextMenuItems(a.masterIndex);if(c.length!=0){if(!this.$314)this.$314=this.getHeaderContextMenu(a);
this.$314.setData(c);if(b!=null&&b.length>0){this.$314.placeNear(b[0],b[1]);this.$314.show();return false}else return this.$314.showContextMenu(a)}}},isc.A.getToggleFreezeText=function(a){var b={field:a,viewer:this,title:this.getSummaryTitle(a)};return a.frozen?this.unfreezeFieldText.evalDynamicString(this,b):this.freezeFieldText.evalDynamicString(this,b)},isc.A.getGroupByText=function(a){return this.groupByText.evalDynamicString(this,{field:a,title:this.getSummaryTitle(a),viewer:this})},isc.A.$58f=
function(a){a=this.getField(a);return!!(a&&this.$58g(a)&&this.data.getLength()<=this.groupByMaxRecords)},isc.A.$58g=function(a){a=this.getField(a);return!!(a&&(this.canGroupBy==true&&a.canGroupBy!=false||this.canGroupBy!=false&&a.canGroupBy==true))},isc.A.getHeaderSpanContextMenuItems=function(a){if(!this.showTreeColumnPicker&&!this.showHeaderSpanContextMenu)return false;for(var b=[{title:this.fieldVisibilitySubmenuTitle,submenu:this.getColumnPickerItems(),icon:"[SKINIMG]actions/column_preferences.png"}],
c=this,d,e=0;e<a.fields.length;e++){var f=this.getField(a.fields[e]);if(f&&f.frozen){d=true;break}}if(this.canFreezeFields&&this.fields.length>1&&(d||this.frozenFields==null||this.normalFields.length>a.fields.length)){b.add({isSeparator:true});b.add({title:(d?"Unfreeze ":"Freeze ")+a.title,grid:this,spanFields:a.fields,frozen:d,icon:d?"[SKINIMG]actions/unfreeze.png":"[SKINIMG]actions/freezeLeft.png",click:function(){for(var g=0;g<this.spanFields.length;g++)c.completeFields.find(c.fieldIdProperty,
this.spanFields[g]).frozen=!this.frozen;c.rebuildForFreeze()}})}return b},isc.A.shouldShowColumnPicker=function(a){if(a.treeField||a.canHide===false)return false;a=this.getSummaryTitle(a);if(a==null||isc.isAn.emptyString(a))return false;return true},isc.A.getColumnPickerItems=function(){for(var a=[],b=this,c=0;c<this.completeFields.length;c++){var d=this.completeFields[c];if(this.shouldShowColumnPicker(d)){var e=this.getSummaryTitle(d),f=this.spanMap?this.spanMap[d.name]:null;if(this.showTreeColumnPicker&&
f){a.find("spanConfig",f)||a.add({title:f.title,autoDismiss:false,spanConfig:f,click:function(g,h,i){g=this.spanConfig.fields;var j=this.anySpannedFieldsVisible();g.map(function(k){j?b.hideField(k):b.showField(k)});i.body.delayCall("markForRedraw")},anySpannedFieldsVisible:function(){for(var g=this.spanConfig.fields,h=0;h<g.length;h++)if(b.fieldIsVisible(g[h]))return true;return false},enableIf:function(g,h,i){g=this.spanConfig;for(var j=0;j<h.data.length;j++){i=h.data[j];if(b.fieldIsVisible(i.fieldName)&&
!g.fields.contains(i.fieldName))return true}return false},checkIf:function(){return this.anySpannedFieldsVisible()}});e="&nbsp;&nbsp;&nbsp;&nbsp;"+e}a.add({title:e,fieldName:d.name,prompt:d.prompt,autoDismiss:false,checkIf:function(){return b.fieldIsVisible(this.fieldName)},enableIf:function(){return!(b.fields.length==1&&b.fieldIsVisible(this.fieldName))},click:function(g,h,i){var j=(g=i.$35q)?g.data.findIndex("groupItem",true):null,k=g?g.data[j]:null,l=k&&k.fieldName==h.fieldName;if(b.fieldIsVisible(this.fieldName)){var m=
b.fields.length;if(b.getCurrentCheckboxField()!=null)m-=1;m>1&&b.hideField(h.fieldName);if(m==1){h=i.data.find("fieldName",b.fields[0].name);i.setItemEnabled(h,false);this.$58s=h}}else{b.showField(h.fieldName);if(this.$58s){i.setItemEnabled(this.$58s,true);this.$58s=null}}l&&g.setItemEnabled(j,b.$58f(k.fieldName));i.body.delayCall("markForRedraw")}})}}return a},isc.A.getColumnPickerMenu=function(a){return{title:this.fieldVisibilitySubmenuTitle,submenu:{canHover:true,showIcons:true,showHover:true,
cellHoverHTML:function(b){return b.prompt},items:a},icon:"[SKINIMG]actions/column_preferences.png"}},isc.A.getHeaderContextMenuItems=function(a){var b=this.getField(a),c=[],d=false;if(this.canSort&&(b&&this.$66c(b)!=false||!b&&this.$60z()!=null)||!b){if(b){var e=a!=null?a:this.$60z();c[0]={title:this.sortFieldAscendingText,icon:"[SKINIMG]actions/sort_ascending.png",click:"menu.doSort("+e+", 'ascending')"};c[1]={title:this.sortFieldDescendingText,icon:"[SKINIMG]actions/sort_descending.png",click:"menu.doSort("+
e+", 'descending')"};d=true}if(this.canMultiSort){c.add({title:this.configureSortText,click:"menu.grid.askForSort();"});d=true;if(!b||this.isSortField(b[this.fieldIdProperty])){c.add({title:b?this.clearSortFieldText:this.clearAllSortingText,field:b,enableIf:function(g,h){return b||!b&&h.grid.getSortFieldCount()>0},click:b?"menu.doSort("+e+", 'unsort')":"menu.grid.clearSort();"});d=true}}}if(this.canAutoFitFields&&b){c.add({title:this.autoFitAllText,click:"menu.grid.autoFitFields()"});c.add({title:this.autoFitFieldText,
click:"menu.grid.autoFitField("+a+",true);"})}if(!b&&this.showFilterEditor){d&&c.add({isSeparator:true});c.add({title:this.clearFilterText,click:"menu.grid.setFilterEditorCriteria(null); menu.grid.filterByEditor();"});d=true}if(this.canPickFields&&this.completeFields.length>1){a=this.getColumnPickerItems();if(a.length>1){d&&c.add({isSeparator:true});c.add(this.getColumnPickerMenu(a));d=true}}e=b&&this.$58g(b);a=this.canGroupBy!=false&&b&&b.canGroupBy!=false&&this.isGrouped;if(d&&(a||e))c.add({isSeparator:true});
if(e){d=!b.getGroupValue?b.groupingModes?b.groupingModes:b.$62?b.$62.groupingModes:false:false;e=null;if(d){e=[];for(var f in d)e.add({title:d[f],groupType:f,targetField:b,fieldName:b.name,prompt:b.prompt,checked:b.groupingMode==f,click:function(g,h,i){this.targetField.groupingMode=this.groupType;i.$35q.groupField(h)}})}c.add({groupItem:true,title:this.getGroupByText(b),fieldName:b.name,targetField:b,prompt:b.prompt,icon:"[SKINIMG]actions/groupby.png",click:function(g,h,i){this.targetField.groupingMode=
this.targetField.defaultGroupingMode||null;i.groupField(h)},enabled:this.$58f(b),canSelectParent:true,submenu:e});d=true}if(a){c.add({title:this.ungroupText,click:"menu.ungroup()",icon:"[SKINIMG]actions/ungroup.png"});d=true}if(b)if(this.canFreezeFields&&this.fields.length>1&&(b.frozen||this.frozenFields==null||this.normalFields.length>1)&&!(this.spanMap&&this.spanMap[b.name])&&b.canFreeze!=false){d&&c.add({isSeparator:true});c.add({title:this.getToggleFreezeText(b),grid:this,field:b,icon:b.frozen?
"[SKINIMG]actions/unfreeze.png":"[SKINIMG]actions/freezeLeft.png",click:"item.grid.toggleFrozen(this.field,!this.field.frozen)"});d=true}if(this.canAddFormulaFields){d&&c.add({isSeparator:true});if(b&&b.userFormula){c.add({title:this.editFormulaFieldText,grid:this,field:b,click:"item.grid.editFormulaField(item.field)",icon:"[SKINIMG]ListGrid/formula_menuItem.png"});c.add({title:this.removeFormulaFieldText,grid:this,field:b,click:"item.grid.removeField(item.field.name)",icon:"[SKINIMG]ListGrid/formula_menuItem.png"})}c.add({title:this.addFormulaFieldText,
grid:this,click:"item.grid.addFormulaField()",icon:"[SKINIMG]ListGrid/formula_menuItem.png"});d=true}if(this.canAddSummaryFields){d&&c.add({isSeparator:true});if(b&&b.userSummary){c.add({title:this.editSummaryFieldText,grid:this,field:b,click:"item.grid.editSummaryField(item.field)",icon:"[SKINIMG]ListGrid/formula_menuItem.png"});c.add({title:this.removeSummaryFieldText,grid:this,field:b,click:"item.grid.removeField(item.field.name)",icon:"[SKINIMG]ListGrid/formula_menuItem.png"})}c.add({title:this.addSummaryFieldText,
grid:this,click:"item.grid.addSummaryField()",icon:"[SKINIMG]ListGrid/formula_menuItem.png"})}return c},isc.A.getHeaderContextMenu=function(){return this.createAutoChild("headerContextMenu",{ID:this.getID()+"$314",grid:this})},isc.A.getSortArrowImage=function(a){if(a==null||a==void 0)a=this.$60z();return this.canSort&&a!=null?this.imgHTML(Array.shouldSortAscending(this.getField(a).sortDirection)?this.sortAscendingImage:this.sortDescendingImage,null,null,null,null,this.widgetImgDir):isc.Canvas.spacerHTML(1,
1)},isc.A.sorterClick=function(){if(!this.canSort)return false;var a=this.$60z();if(a!=null){var b=this.getField(a);a=b[this.fieldIdProperty];var c=this.$765;b=b.sortDirection;if(this.isSortField(a))c==b||this.canUnsort==false?this.toggleSort(a):this.toggleSort(a,"unsort");else this.setSort({property:a,direction:c})}else this.sort(a,a!=null?!Array.shouldSortAscending(this.getField(a).sortDirection):null)},isc.A.showDragLineForRecord=function(a,b){var c=this.body;if(a==null)a=this.getEventRecordNum();
var d=c.getVisibleRows()[1];if(a==-2)a=d;if(!this.recordIsEnabled(a)&&a!=d)return this._dragLine.hide();if(b==null)b=this.getReorderPosition(a);d=this.getLeftBody();d=d.getPageLeft()+(this.isRTL()&&d.vscrollOn?d.getScrollbarSize():0);if(b==isc.ListGrid.BEFORE){this.showHDragLine(d,c.getRowPageTop(a));this._dragLine.afterRow=a-1}else if(b==isc.ListGrid.AFTER){this.showHDragLine(d,c.getRowPageTop(a)+c.getRowSize(a));this._dragLine.afterRow=a}else return this._dragLine.hide();this.recordDropMove&&this.fireCallback("recordDropMove",
"viewer,recordNum,record,position",[this,a,this.getRecord(a),b])},isc.A.showHDragLine=function(a,b){this.makeDragLine();this._dragLine.resizeTo(this.getViewportWidth()-(this.body.vscrollOn?this.body.getScrollbarSize():0),2);var c=this.body.getPageTop(),d=c+this.body.getVisibleHeight();if(b<c)b=c;else if(b>d)b=d;this._dragLine.setPageRect(a,b);this._dragLine.show();this._dragLine.bringToFront()},isc.A.showDragLineForField=function(a,b){this.makeDragLine();b==true?this._dragLine.resizeTo(2,this.headerHeight):
this._dragLine.resizeTo(2,this.getOuterViewportHeight());if(a==null)a=this.getEventFieldNum();if(a<0)this._dragLine.hide();else{var c=this.ns.EH.dragTarget;this._dragLine.setPageRect((!this.isRTL()?c.getPageLeft()+this.ns.EH.dragResizeWidth:c.getPageRight()-this.ns.EH.dragResizeWidth)-1,this.getPageTop()+(this.showFilterEditor?this.filterEditorHeight:0));this._dragLine.bringToFront();this._dragLine.show()}},isc.A.unsort=function(){if(this.data.unsort&&(this.data.unsort()||this.canUnsort)){var a=this.$60z(),
b=this.getField(a);if(b)b.sortDirection=null;this.sortDirection=this.$765;this.$600(null);if(a!=null&&this.header&&isc.isA.Toolbar(this.header)){this.header.deselectButton(a);(a=this.header.getButton(a))&&a.setTitle(this.getHeaderButtonTitle(a))}this.sorter&&this.sorter.setTitle(this.sorter.getTitle());if(isc.ResultSet&&isc.isA.ResultSet(this.data)&&this.invalidateCacheOnUnsort){this.data.$39x=null;this.data.invalidateCache()}return true}return false},isc.A.resort=function(){if(this.$73p)return this.setSort(isc.shallowClone(this.$73p));
var a=this.$60z();a!=null&&this.sort(a,this.sortDirection)},isc.A.sort=function(a,b){if(this.canSort==false)return false;if(isc.isA.String(a))a=this.getFieldNum(a);var c=this.$60z();c!=null&&Array.shouldSortAscending(this.getField(c).sortDirection);if(a==null)if(c!=null)a=c;else for(var d=0;d<this.fields.length;d++)if(this.$66c(this.fields[d])!=false){a=d;break}if(a==null)return false;d=this.getField(a);if(!(d==null||this.$66c(d)==false)){if(b==null)b=d.sortDirection!=null?d.sortDirection:this.$765;
if(!(c==a&&b==d.sortDirection))return this.setSort([{property:d[this.fieldIdProperty],direction:Array.shouldSortAscending(b)?"ascending":"descending"}])}},isc.A.$60z=function(){if(this.sortFieldNum!=null)return this.sortFieldNum;if(this.sortField!=null){var a=this.getFieldNum(this.sortField);if(a==-1)a=null;this.sortFieldNum=a;var b=this.getFieldName(this.sortFieldNum);if(b)this.sortField=b;return a}return null},isc.A.$600=function(a){this.sortFieldNum=a;this.sortField=this.getFieldName(a)},isc.A.getSortField=
function(){return this.sortField},isc.A.getUnderlyingField=function(a){if(!this.fields&&!this.completeFields&&!this.dataSource){this.logWarn("fields and completeFields are null and there is no DataSource");return null}var b=null;if(this.fields)b=isc.Class.getArrayItem(a,this.fields,this.fieldIdProperty);if(!b&&this.completeFields)b=isc.Class.getArrayItem(a,this.completeFields,this.fieldIdProperty);if(!b&&this.dataSource){if(!isc.isA.DataSource(this.dataSource))this.dataSource=this.getDataSource(this.dataSource);
b=this.dataSource.getField(a)}return b},isc.A.toggleSort=function(a,b){var c=this.$73p?isc.shallowClone(this.$73p):[],d=c.find("property",a);if(d){b||(b=Array.shouldSortAscending(d.direction)?"descending":"ascending");if(b=="unsort")c.remove(d);else d.direction=b;this.setSort(c)}},isc.A.$73z=function(a,b){this.addSort({property:a,direction:(b!=null?b:this.$765)?"ascending":"descending"})},isc.A.addSort=function(a){var b=this.$73p?isc.shallowClone(this.$73p):[];b.add(a);this.setSort(b)},isc.A.getSort=
function(){if(this.$73p)return isc.shallowClone(this.$73p);else if(this.initialSort)return isc.shallowClone(this.initialSort);else{var a;if(this.sortFieldNum!=null)a=this.getField(this.sortFieldNum);if(!a&&this.sortField!=null)a=this.getUnderlyingField(this.sortField);if(a){var b=this.$766(a);return[{property:a[this.fieldIdProperty],direction:b}]}}},isc.A.getSortSpecifier=function(a){return this.$73p?this.$73p.find("property",a):null},isc.A.getSortFieldCount=function(){return this.$73p?this.$73p.length:
0},isc.A.isSortField=function(a){return this.getSortSpecifier(a)?true:false},isc.A.getSortNumeralHTML=function(a,b){return"<span class="+this.sortNumeralStyle+">"+(b+1)+"</span>"},isc.A.clearSort=function(){this.setSort(null)},isc.A.setSort=function(a){this.logIsInfoEnabled("sorting")&&this.logInfo("Entering setSort","sorting");if(!this.fields&&!this.getDataSource()){this.logIsInfoEnabled("sorting")&&this.logInfo("setSort() not performing sort - no fields","sorting");return false}if(this.confirmDiscardEdits&&
this.dataSource!=null)if(this.hasChanges()&&isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.allMatchingRowsCached()){this.showLostEditsConfirmation({target:this,methodName:"$34g"},{target:this,methodName:"$34h"});this.$34i=a;return}var b=[],c;if(this.$73p)for(var d=0;d<this.$73p.length;d++){var e=this.$73p[d];if(!(a?a.find("property",e.property):null)){b.add(isc.shallowClone(e));this.logIsInfoEnabled("sorting")&&this.logInfo("In setSort - marking field "+e.property+" for removal","sorting")}}this.$73p=
a||[];if(!this.$73p||this.$73p.length==0)this.logIsInfoEnabled("sorting")&&this.logInfo("null or zero-length sortSpecifiers - unsorting only","sorting");for(d=0;d<this.$73p.length;d++){e=this.$73p[d];a=this.getUnderlyingField(e.property);var f=this.getField(e.property),g=null;if(a){if(f)c||(c=f);if(!e.normalizer){if(a.sortNormalizer)g=a.sortNormalizer;else if(a.valueMap)g=isc.isA.String(a.valueMap)?this.getGlobalReference(a.valueMap):a.valueMap;else if(a.type!=null)g=a.type;e.normalizer=g}if(!e.direction)e.direction=
"ascending";if(c&&c==f)e.primarySort=true;if(e.primarySort)this.sortDirection=Array.shouldSortAscending(e.direction);if(!e.context)e.context=this;e.sortIndex=d}}c=(a=(d=this.$73p[0])?d.property:null)?this.getFieldNum(a):null;a=a?this.getUnderlyingField(a):null;d&&Array.shouldSortAscending(d.direction);a||d&&this.logWarn("Field does not exist: "+d.property);this.unsort&&this.unsort();c>=0?this.$600(c):this.$600(null);this.logIsInfoEnabled("sorting")&&this.logInfo("In setSort - ready to sort on specifiers:\n"+
isc.echoAll(this.$73p),"sorting");if(this.$73p&&this.$73p.length>0)if(this.data&&(this.data.setSort||this.data.length>0||isc.isA.ResultTree(this.data)||isc.isA.Tree(this.data)))if(this.data.setSort){this.logIsInfoEnabled("sorting")&&this.logInfo("In setSort -  Calling data.setSort with specifiers:\n"+isc.echoAll(this.$73p),"sorting");this.data.setSort(this.$73p)}else{if(this.data.sortByProperty){this.logIsInfoEnabled("sorting")&&this.logInfo("In setSort - Calling data.sortByProperty with specifier:\n"+
isc.echoAll(d),"sorting");this.data.sortByProperty(d.property,Array.shouldSortAscending(d.direction),d.normalizer,d.context)}}else this.logIsInfoEnabled("sorting")&&this.logInfo("In setSort - not sorting:\nthis.data is"+this.echoAll(this.data),"sorting");else{if(this.data&&this.data.$39x)this.data.$39x=null;this.invalidateCacheOnUnsort&&this.invalidateCache()}if(this.header&&isc.isA.Toolbar(this.header)){if(b){b.length>0&&this.logIsInfoEnabled("sorting")&&this.logInfo("In setSort - Removing sort-media from now unsorted fields:\n"+
isc.echoAll(b),"sorting");for(d=0;d<b.length;d++){f=b[d];a=this.getSpecifiedField(f.property);e=this.getFieldNum(f.property);a&&delete a.sortDirection;if(e>=0){a=this.getFieldHeader(e);(e=a.getMember(this.getLocalFieldNum(e)))&&e.setTitle(e.getTitle())}}}if(this.$73p&&this.$73p.length>0){this.logInfo("In setSort - Setting sort-media for sorted fields:\n"+isc.echoAll(this.$73p),"sorting");b=false;for(d=0;d<this.$73p.length;d++){f=this.$73p[d];a=this.getSpecifiedField(f.property);e=this.getFieldNum(f.property);
if(a)a.sortDirection=Array.shouldSortAscending(f.direction);if(e>=0){a=this.getFieldHeader(e);if(e=a.getMember(this.getLocalFieldNum(e))){if(!b){a.selectButton(e);b=true}e.setTitle(this.getHeaderButtonTitle(e))}}}}else{if(this.header)(b=this.header.getSelectedButton())&&b.deselect();if(this.frozenHeader)(b=this.frozenHeader.getSelectedButton())&&b.deselect()}}c>=0&&this.logIsInfoEnabled("sorting")&&this.logInfo("In setSort - $600 called with fieldNum: "+c+" - sortField is now: "+this.sortField+"\ngetSortState() now returns: "+
isc.echoAll(this.getSortState()),"sorting");this.sorter&&this.sorter.setTitle(this.sorter.getTitle());this.body&&this.showRecordComponents&&delete this.body.$74k;this.$25a(this.$73y);this.logIsInfoEnabled("sorting")&&this.logInfo("Leaving setSort","sorting");return true},isc.A.$34g=function(){var a=this.$34i;delete this.$34i;this.setSort(a)},isc.A.$34h=function(){var a;a=this.$34i?this.$34i[0]:null;delete this.$34i;if(a!=null){a=this.getFieldNum(a.property);a!=-1&&this.sortFieldNum!=a&&this.header.deselectButton(a)}},
isc.A.sortData=function(){if(this.data&&this.fields){var a=this.fields[this.$60z()],b=null;if(a==null){this.$600(0);a=this.fields[0]}if(a.sortNormalizer)b=a.sortNormalizer;else if(a.valueMap){b=a.valueMap;if(isc.isA.String(a.valueMap))b=this.getGlobalReference(a.valueMap)}else if(a.type!=null)b=a.type;this.data.sortByProperty(a[this.fieldIdProperty],a.sortDirection,b,this)}},isc.A.getEmbeddedComponentCount=function(a){var b=this.body?this.body.$29a:null;if(this.frozenBody&&this.frozenBody.$29a!=null)b=
(b?b.duplicate():[]).addList(this.frozenBody.$29a);if(!b)return 0;if(a=="recordComponent")b=b.findAll("isRecordComponent",true);else if(a=="backgroundComponent")b=b.findAll("isBackgroundComponent",true);return b==null?0:b.length},isc.A.addEmbeddedComponent=function(a,b,c,d,e){var f=this.getFieldBody(d);d=this.getLocalFieldNum(d);c=c!=null?c:this.getRecordIndex(b);f.addEmbeddedComponent(a,b,c,d,e);if(this.frozenBody!=null){a=f==this.frozenBody?this.body:this.frozenBody;c>=0&&a.isDrawn()&&!a.isDirty()&&
a.getRowHeight(b,c)!=f.getRowSize(c)&&a.markForRedraw()}},isc.A.removeEmbeddedComponent=function(a,b,c){var d;if(isc.isA.Canvas(a)){b=a;a=b.embeddedRecord}if(isc.isA.Number(b)){d=this.getFieldBody(b);b=this.getLocalFieldNum(b)}else{if(!b){if(!a.$29a||a.$29a.length==0)return;b=a.$29a[0]}d=isc.Canvas.getById(b.$669)}d!=null&&d.removeEmbeddedComponent(a,b,c)},isc.A.getEmbeddedComponent=function(a,b){var c;if(isc.isA.Number(b)){c=this.getFieldBody(b);b=this.getLocalFieldNum(b)}else c=isc.Canvas.getById(b.$669);
return c.getEmbeddedComponent(a,b)},isc.A.getRecordDataSource=function(){return this.dataSource},isc.A.openRecordEditor=function(a){this.$32o!=null&&this.closeRecord();var b=isc.addProperties({},a);b=this.ns.DynamicForm.create(this.recordEditorProperties,{autoDraw:false,dataSource:this.getRecordDataSource(a),numCols:4,values:b,$34j:a});b=this.ns.VStack.create({autoDraw:false,width:this.getAvailableFieldWidth()-this.embeddedComponentIndent,left:this.embeddedComponentIndent,destroyOnUnEmbed:true,members:[b,
this.ns.Toolbar.create({autoDraw:false,width:200,buttons:[{title:this.recordEditorSaveButtonTitle,click:this.getID()+".embeddedSaveRecord("+b.getID()+")",extraSpace:10},{title:this.recordEditorCancelButtonTitle,record:a,grid:this,click:function(){this.grid.closeRecord(this.record,this.parentElement.parentElement)}}]})]});this.addEmbeddedComponent(b,a,this.data.indexOf(a));this.$32o=a;this.$57o=b},isc.A.embeddedSaveRecord=function(a){a.saveData({target:this,methodName:"embeddedEditComplete"},{$34j:a.$34j,
$57p:a})},isc.A.embeddedEditComplete=function(a,b,c){a.status==0&&this.removeEmbeddedComponent(c.$34j,c.$57p)},isc.A.closeRecord=function(a,b){if(!a)a=this.$32o;if(!b)b=this.$57o;this.removeEmbeddedComponent(a,b);this.$57o=this.$32o=null},isc.A.openRecordDetailGrid=function(a,b){this.$32o!=null&&this.closeRecord();var c=this.getRecordDetailGrid(a,b),d=isc.VLayout.create({autoDraw:false,destroyOnUnEmbed:true,height:this.cellHeight,left:this.embeddedComponentIndent,width:this.getAvailableFieldWidth()-
this.embeddedComponentIndent,resizeBarSize:4,members:[c]});this.addEmbeddedComponent(d,a,this.data.indexOf(a));isc.DataSource.getDataSource(c.dataSource);c.fetchRelatedData(a,this.getRecordDataSource(a));this.$32o=a;this.$57o=d},isc.A.getRecordDetailGrid=function(a,b){b=isc.DataSource.getDataSource(b);return isc.ListGrid.create(this.recordDetailGridProperties,{autoDraw:false,dataSource:b,showResizeBar:true,showCellContextMenus:this.showCellContextMenus},this.nestedGridDefaults)},isc.A.chartData=function(a,
b,c,d,e){if(a)a=this.getField(a);if(b)b=this.map("getField",b);else{b=this.fields.duplicate();b.remove(a)}if(!c)if(!isc.ResultSet||!isc.isA.ResultSet(this.data))c=this.data;else if(this.data.allMatchingRowsCached())c=this.data.getAllRows();else{c=this.getVisibleRows();c=this.data.getRange(c[0],c[1])}var f,g;if(b.length>=1){for(g=0;g<b.length;g++){var h=b[g];b[g]={id:h.name,title:h.title,type:h.type}}g={id:"columnFacet",title:this.valueTitle,values:b,inlinedValues:true}}if(c.length>=1&&a)f={id:a.name};
a=[g,f];a.removeAll([null]);e&&a.reverse();d=isc.addProperties({data:c,facets:a,title:this.chartTitle,chartType:this.chartType},d);if(f&&!g)d.valueProperty=b[0].name;return this.createAutoChild("chart",d,this.chartConstructor)},isc.A.chartRow=function(a,b,c){return this.chartData(null,b,[this.getRecord(a)],c)},isc.A.chartColumn=function(a,b,c){return this.chartData(b,[a],null,c)},isc.A.regroup=function(a){if(!(!this.isGrouped||!this.groupByField||!this.groupByField.length||this.inhibitRegroup||!(this.originalData||
this.data))){var b;if(this.data.isGroupedOutput&&this.originalData)b=this.originalData;else this.originalData=b=this.data;var c=b.getLength();if(isc.ResultSet&&isc.isA.ResultSet(b)&&(!b.lengthIsKnown()||!b.rangeIsLoaded(0,c-1))){b.getRange(0,c-1);this.$52y=true;this.logInfo("postponing grouping until data is loaded","grouping")}else if(c>=this.groupByMaxRecords){this.logInfo("Results too numerous - disabling grouping.","grouping");this.isGrouped=false;if(this.originalData)this.data=this.originalData}else{var d;
if(this.groupTree){if(this.retainOpenStateOnRegroup&&this.groupTree.getLength()>0&&this.groupTree.$684==this.groupByField){d=[];this.$45q(this.groupTree,this.groupTree.getRoot(),d,true)}this.ignore(this.groupTree,"changeDataVisibility");this.groupTree.destroy()}this.groupTree=this.createAutoChild("groupTree",{idField:this.groupIdField,parentIdField:this.groupParentIdField,titleProperty:"groupValue",childrenProperty:"groupMembers",parentProperty:"_groupTree_"+this.ID,showRoot:false,isGroupedOutput:true,
$684:this.groupByField,criteria:this.data.criteria,separateFolders:true,getCriteria:function(){return this.criteria},getChildren:function(l,m){var n=this.Super("getChildren",arguments);if(m==isc.Tree.FOLDERS_ONLY||l==this.getRoot())return n;var o=this.creator;if(o&&o.showGroupSummary){var s=[];s.addList(n);n=s;if(o.getAllEditRows().length>0)for(var r,t=0;t<s.length;t++){var p=o.getEditSession(s[t]);if(p){if(!r){n=n.duplicate();r=true}p=isc.addProperties({},n[t],p.$31x);n[t]=p}}r={};for(t=0;t<o.fields.getLength();t++){p=
o.getField(t);var q=p.name,u;if(o.shouldShowGroupSummary(p)){u=o.getGroupSummary(n,p,l);if(u==null)u=o.invalidSummaryValue;else if(p.formatGroupSummary){if(isc.isA.String(p.formatGroupSummary))p.formatGroupSummary=isc.Func.expressionToFunction("value",p.formatGroupSummary);u=p.formatGroupSummary(u)}r[q]=u}}r.customStyle=o.groupSummaryStyle;r[o.recordEnabledProperty]=false;r[o.includeInSummaryProperty]=false;r[o.groupSummaryRecordProperty]=true;s.add(r);return s}else return n},primaryKeyFields:this.dataSource?
this.getDataSource().getPrimaryKeyFieldNames():null,indexOf:function(l){var m=this.Super("indexOf",arguments);if(m==-1&&this.creator.getDataSource()!=null)m=this.$27l().findByKeys(l,this.creator.getDataSource());return m}},isc.Tree);this.logInfo("Adding "+b.getLength()+" records to groups","grouping");for(c=0;c<b.getLength();c++)this.$52u(b.get(c),false,d);b=this.groupTree.getRoot();for(var e=0,f=0,g=this.groupTree;b!=null&&f<this.groupByField.length;){var h=g.getChildren(b),i=(this.completeFields||
this.fields).find(this.fieldIdProperty,this.groupByField[f]);for(c=0;c<h.length;c++){var j=h[c],k=this.getGroupTitle(j,i);if(this.groupTitleField)j.groupTitle=k;else j[this.singleCellValueProperty]=k}if(g.getParent(b)&&g.getChildren(g.getParent(b))[e+1]){e++;b=g.getChildren(g.getParent(b))[e]}else{b=g.getChildren(b).first();e=0;f++}}d||this.openInitialGroups();this.data=g;a?this.observe(g,"changeDataVisibility","observer.$34u()"):this.$606(this.data);this.createSelectionModel();if(this.$75p){this.setSelectedState(this.$75p);
delete this.$75p}this.markForRedraw("regroup")}}},isc.A.$607=function(a,b,c,d){this.$34v=true;c=this.data.getParents(b);for(var e=this.data.remove(b),f=0,g=this.groupByField.length-1;f<c.length-1;f++){var h=c[f];if(h.groupMembers.getLength()==0)this.data.remove(h);else{var i=(this.completeFields||this.fields).find(this.fieldIdProperty,h);h[this.singleCellValueProperty]=this.getGroupTitle(h,i)}g--}if(!(b&&!e)&&(a||d))this.$52u(a||d,true)},isc.A.openInitialGroups=function(){var a=this.groupTree;if(this.groupStartOpen==
"all")a.openAll();else if(this.groupStartOpen=="first")a.openAll(a.getChildren(a.getRoot()).first());else if(isc.isAn.Array(this.groupStartOpen))for(var b=a.getChildren(a.getRoot()),c=0;c<this.groupStartOpen.length;c++){var d=b.find("groupValue",this.groupStartOpen[c]);d&&a.openFolder(d)}},isc.A.groupBy=function(a){var b=[];if(isc.isAn.Array(a))b=a;else for(var c=0;c<arguments.length;c++)b[c]=arguments[c];if(!(this.handleGroupBy!=null&&this.handleGroupBy(b)==false))if(b.length==0||b[0]==null){this.logInfo("ungrouping",
"grouping");this.isGrouped=false;if(this.originalData){b=this.preserveEditsOnSetData;this.preserveEditsOnSetData=true;this.setData(this.originalData);this.preserveEditsOnSetData=b;delete this.originalData;this.groupTree&&this.groupTree.criteria&&this.data.setCriteria(this.groupTree.criteria);delete this.groupTree;this.groupByField&&this.groupByField.setLength(0)}}else{if(this.groupByField)this.groupByField.setLength(0);else this.groupByField=[];for(c=0;c<b.length;c++)if(!this.isCheckboxField(b[c])){var d=
this.getSpecifiedField(b[c]);d&&d.displayField!=null&&this.getField(d.displayField)&&d.optionDataSource==null?this.groupByField.add(d.displayField):this.groupByField.add(b[c])}this.logInfo("groupBy: "+this.groupByField,"grouping");this.$52y=this.isGrouped=true;this.dataChanged()}},isc.A.getGroupTitle=function(a,b){b||(b=(this.completeFields||this.fields).find(this.fieldIdProperty,this.groupByField[this.data.getLevel(a)-1]));if(b!=null)return b.getGroupTitle?b.getGroupTitle(a.groupValue,a,b,b.name,
this):!b.getGroupValue&&b.$62&&b.$62.getGroupTitle?b.$62.getGroupTitle(a.groupValue,a,b,b.name,this):this.groupTitleField?a.groupTitle:a[this.singleCellValueProperty]},isc.A.getGroupNodeHTML=function(a,b){var c=this.frozenBody===b;if(this.frozenBody&&!c)return this.emptyCellValue;c=this.data.isOpen(a)?"opened":"closed";var d=isc.Img.urlForState(this.groupIcon,null,null,c);c=isc.Canvas.spacerHTML(this.groupIconPadding,1);var e=isc.Canvas.spacerHTML((this.data.getLevel(a)-1)*this.groupIndentSize+this.groupLeadingIndent,
1);d=this.imgHTML(d,this.groupIconSize,this.groupIconSize);return this.canCollapseGroup?e+d+c+this.getGroupTitle(a):e+c+this.getGroupTitle(a)},isc.A.$52u=function(a,b,c){for(var d,e=this.groupTree.getRoot(),f=0;f<this.groupByField.length;f++){var g=this.groupByField[f];d=(this.completeFields||this.fields).get((this.completeFields||this.fields).findIndex(this.fieldIdProperty,g));var h=this.data.indexOf(a);h=this.getRawCellValue(a,h,g,true);if(d.getGroupValue)h=d.getGroupValue(h,a,d,g,this);else if(d.userFormula)h=
this.getFormulaFieldValue(d,a);else if(d.userSummary)h=this.getSummaryFieldValue(d,a);else if(d.$62&&d.$62.getGroupValue)h=d.$62.getGroupValue(h,a,d,g,this);if(d.valueMap&&d.valueMap[h])h=d.valueMap[h];if(h==null||isc.isAn.emptyString(h))h=this.nullGroupTitle;d=this.groupTree.getChildren(e)==null?null:this.groupTree.getChildren(e).find("groupValue",h);if(!d){d={groupName:g,groupValue:h,$52e:true,canDrag:false,canSelect:false};if(this.groupTitleField)d.groupTitle=h;else d.singleCellValue=h;d[g]=h;
d[this.recordCustomStyleProperty]=this.groupNodeStyle;d[this.recordEditProperty]=false;if(c!=null)d[this.groupTree.openProperty]=c.find(g,h)?true:false;this.groupTree.add(d,e)}e=d}this.groupTree.add(a,e);if(b){a=this.groupTree.getParents(a);f=a.length-2;for(b=0;f>=0;f--,b++){c=this.getGroupTitle(a[f]);if(this.groupTitleField)a[f].groupTitle=c;else a[f][this.singleCellValueProperty]=c}}},isc.A.ungroup=function(){this.$75p=this.getSelectedState(true);this.groupBy(null)},isc.A.setHeaderSpans=function(a){this.headerSpans=
a;this.updateHeader();this.layoutChildren("headerSpans changed")},isc.A.setHeaderSpanTitle=function(a,b){var c=this.headerSpans.find("name",a);if(c){c.title=b;c.liveObject&&c.liveObject.setTitle(b)}else this.logWarn("setHeaderSpanTitle() - unable to locate span named: "+a+this.getStackTrace())},isc.A.refreshGroupSummary=function(a){if(!(!this.isGrouped||!this.showGroupSummary||!this.groupTree)){this.groupTree.$736();if(a==null)this.body.markForRedraw();else(a=this.groupTree.getParent(this.groupTree.get(a)))&&
this.refreshRow(this.groupTree.indexOf(a)+this.groupTree.getChildren(a).length)}},isc.A.addBodyPassthroughMethods=function(){this.body&&this.$51e(this.body);this.frozenBody&&this.$51e(this.frozenBody)},isc.A.$51e=function(a){for(var b={},c=isc.getKeys(isc.ListGrid.$30f),d=0;d<c.length;d++){var e=c[d],f=this[e];if(e!="cellContextClick")if(f==null)b[e]=a.getClass().getPrototype()[e];else if(f!=isc.ListGrid.$30g[e])b[e]=isc.ListGrid.$30f[e]}a.addMethods(b)});isc.B.push(isc.A.addProperties=function(){this.Super("addProperties",
arguments);this.addBodyPassthroughMethods()},isc.A.addMethods=function(){this.Super("addMethods",arguments);this.addBodyPassthroughMethods()},isc.A.propertyChanged=function(a,b){this.invokeSuper(isc.ListGrid,"propertyChanged",a,b);if(this.$31h[a])this.$34k=true;if(this.body!=null){if(isc.ListGrid.$295.contains(a))this.body[a]=b;if(this.$45l[a]!=null){this.body.setProperty(this.$45l[a],b);this.markForRedraw()}}},isc.A.doneSettingProperties=function(){this.$34k&&this.$31i()},isc.A.getExportFieldValue=
function(a,b,c){var d=this.getSpecifiedField(b);if(this.isCheckboxField(d)||d.valueIcons||this.$31s(d)){var e=d.displayField!=null&&!d.valueMap&&!d.getCellValue&&this.$425(d),f=this.getRecordIndex(a);e=this.getRawCellValue(a,f,e?d.displayField:b,true);e=this.$315(e,a,d,f,c);if(d=this.getFieldHilites(a,d))e=this.applyHiliteHTML(d,e);return this.htmlUnescapeExportFieldTitle(e.toString())}return this.Super("getExportFieldValue",arguments)},isc.A.getOriginalData=function(){return this.isGrouped&&this.originalData?
this.originalData:this.getData()});isc.B._maxIndex=isc.C+642;isc.ListGrid.registerStringMethods(isc.GridRenderer.$294);isc.ListGrid.registerStringMethods({recordClick:"viewer,record,recordNum,field,fieldNum,value,rawValue",recordDoubleClick:"viewer,record,recordNum,field,fieldNum,value,rawValue",recordsDropped:"records,rowNum,viewer,sourceWidget",recordDropMove:"viewer,recordNum,record,position",editValueChanged:"rowNum,fieldName,newValue,oldValue",editorChange:"record,newValue,oldValue,rowNum,colNum",
cellChanged:"record,newValue,oldValue,rowNum,colNum,grid,recordNum,fieldNum",editComplete:"rowNum,colNum,newValues,oldValues,editCompletionEvent,dsResponse",editFailed:"rowNum,colNum,newValues,oldValues,editCompletionEvent,dsResponse,dsRequest",editorEnter:"record,value,rowNum,colNum",rowEditorEnter:"record,editValues,rowNum",editorExit:"editCompletionEvent,record,newValue,rowNum,colNum",rowEditorExit:"editCompletionEvent,record,newValues,rowNum",validateCellValue:"rowNum,colNum,newValue,oldValue",
validateFieldValue:"newValue,oldValue,record,field,rowNum,colNum",formatCellValue:"value,record,rowNum,colNum",formatEditorValue:"value,record,rowNum,colNum",parseEditorValue:"value,record,rowNum,colNum",fieldStateChanged:"",dataArrived:"startRow,endRow",headerClick:"fieldNum",onHeaderClick:"fieldNum",onRecordDrop:"dropRecords,targetRecord,index,sourceWidget",onExpandRecord:"record",onCollapseRecord:"record",drawAreaChanged:"oldStartRow,oldEndRow,oldStartCol,oldEndCol",showRecordComponent:"record,colNum",
createRecordComponent:"record,colNum",updateRecordComponent:"record,colNum,component,recordChanged",updateFilterEditorValues:"criteria",filterEditorSubmit:"criteria",handleGroupBy:"fields"});isc.ListGrid.$24j=isc.addProperties({},isc.ListGrid.getInstanceProperty("headerDefaults"));isc.ListGrid.$24k=isc.addProperties({},isc.ListGrid.getInstanceProperty("headerButtonDefaults"));isc.ListGrid.classInit();isc.defineClass("LineEditor",isc.ListGrid);isc.A=isc.LineEditor.getPrototype();isc.B=isc._allFuncs;
isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canEdit=true;isc.A.editEvent="click";isc.A.editOnFocus=true;isc.A.modalEditing=true;isc.A.enterKeyEditAction="nextRowStart";isc.A.listEndEditAction="next";isc.A.height=50;isc.A.emptyMessage="Click to add data";isc.A.emptyMessageStyle="normal";isc.A.autoFitData="vertical";isc.A.leaveScrollbarGap=false;isc.B.push(isc.A.click=function(){var a=this.getRecord(this.getEventRow());this.Super("click",arguments);a==null&&isc.EH.lastEvent.target==
this.body&&this.startEditingNew()});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("TreeGrid","ListGrid");isc.addGlobal("TreeViewer",isc.TreeGrid);isc.defineClass("TreeGridBody",isc.GridBody);isc.A=isc.TreeGridBody.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$34w="TABLE";isc.A.$34x="padding:0px;border:0px;";isc.B.push(isc.A.$29h=function(a,b,c,d,e){if(d==null)d=this.getTableElement(b,c);if(d!=null){if(!this.showHiliteInCells&&
c==this.grid.getLocalFieldNum(this.grid.getTreeFieldNum())){if(a==null)a=this.getCellRecord(b,c);if(e==null)e=this.getCellStyle(a,b,c);for(var f=d.childNodes[0];f&&f.tagName!=this.$34w;)f=f.childNodes[0];if(f){var g;if(this.getCellCSSText){g=this.getCellCSSText(a,b,c);if(g!=null&&!isc.isAn.emptyString(g))g+=isc.Canvas.$42a;else g=null}f.className=e;if(g!=null)f.cssText=g;if((f=f.rows[0].cells)&&f.length>0)for(var h=0;h<f.length;h++){f[h].className=e;if(g){if(h==f.length-1)g+="paddingLeft:"+this.iconPadding;
f[h].cssText=g}}}}return isc.GridRenderer.getPrototype().$29h.apply(this,[a,b,c,d,e])}},isc.A.click=function(){if(!this.$29p()){var a=this.grid,b=a.getEventRecordNum();b=a.getRecord(b);if(a.data.isFolder(b)&&a.clickInOpenArea(b)){a.toggleFolder(b);a.clearLastHilite();a.$31q=null;return isc.EH.STOP_BUBBLING}}return this.Super("click",arguments)},isc.A.mouseDown=function(){var a=this.grid.data.get(this.getEventRow());if(a!=null&&this.grid.clickInOpenArea(a))return isc.EH.STOP_BUBBLING;else if(this.grid.clickInCheckboxArea(a)&&
this.canSelectRecord(a)){var b=this.grid.selectionType;if(b==isc.Selection.SINGLE){this.deselectAllRecords();this.selectRecord(a)}else if(b==isc.Selection.SIMPLE||b==isc.Selection.MULTIPLE)this.selection.isSelected(a)?this.deselectRecord(a):this.selectRecord(a);return isc.EH.STOP_BUBBLING}else return this.Super("mouseDown",arguments)},isc.A.mouseUp=function(){var a=this.grid.data.get(this.getEventRow());return a!=null&&(this.grid.clickInOpenArea(a)||this.grid.clickInCheckboxArea(a))?isc.EH.STOP_BUBBLING:
this.Super("mouseUp",arguments)},isc.A.placeEmbeddedComponent=function(a){if(this.grid.indentRecordComponents)if(a.$57n==this.grid.getTreeFieldNum()&&!a.snapOffsetLeft){var b=a.embeddedRecord;if(b!=null)a.snapOffsetLeft=this.grid.getOpenAreaWidth(b)+this.grid.iconPadding}return this.Super("placeEmbeddedComponent",arguments)});isc.B._maxIndex=isc.C+5;isc.A=isc.TreeGrid;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.TREE_FIELD={name:"nodeTitle",treeField:true,
getCellValue:function(a,b,c,d){if(!a.getNodeTitle){a=d==null?null:a.getFieldName(d);return b==null||a==null?null:b[a]}return a.getNodeTitle(b,c,this)},canFilter:false,getFieldTitle:function(a,b){var c=a.getField(b);if(c.name=="nodeTitle")return a.treeFieldTitle;return c.title||c.name}};isc.B.push(isc.A.$82d=function(){if(!this.$819){isc.Canvas.$816.add({target:this,methodName:"$82a"});this.$819=true}if(this.$34p==null)this.$34p=["<table cellpadding=0 cellspacing=0 class='",,"' style='",,isc.Canvas.$42a+
"'><tr><td style='",,isc.Canvas.$42a+"' class='",,"'>",,"</td>"];return this.$34p},isc.A.$82e=function(){if(!this.$819){isc.Canvas.$816.add({target:this,methodName:"$82a"});this.$819=true}if(this.$34q==null)this.$34q=["<td style='",,";"+isc.Canvas.$42a+"' class='",,"'>"+(isc.Browser.isSafari||isc.Browser.isIE?"<nobr>":""),,,,(isc.Browser.isSafari?"</nobr>":"")+"</td><td style='",,";"+isc.Canvas.$42a+"padding-left:",,"px;' class='",,"'>",,,"</td>"];return this.$34q},isc.A.$82a=function(){this.$34q=
this.$34p=null});isc.B._maxIndex=isc.C+3;isc.A=isc.TreeGrid.getPrototype();isc.A.autoFetchTextMatchStyle="exact";isc.A.cascadeSelection=false;isc.A.showPartialSelection=false;isc.A.treeFieldTitle="Name";isc.A.autoAssignTreeField=true;isc.A.showRoot=false;isc.A.displayNodeType=isc.Tree.FOLDERS_AND_LEAVES;isc.A.canDragRecordsOut=false;isc.A.dragDataAction=isc.ListGrid.MOVE;isc.A.openDropFolderDelay=600;isc.A.parentAlreadyContainsChildMessage="This item already contains a child item with that name.";
isc.A.cantDragIntoSelfMessage="You can't drag an item into itself.";isc.A.cantDragIntoChildMessage="You can't drag an item into one of it's children.";isc.A.fixedFieldWidths=true;isc.A.wrapCells=false;isc.A.showHiliteInCells=false;isc.A.indentSize=20;isc.A.extraIconGap=2;isc.A.iconSize=16;isc.A.skinImgDir="images/TreeGrid/";isc.A.folderIcon="[SKIN]/folder.gif";isc.A.dropIconSuffix="drop";isc.A.openIconSuffix="open";isc.A.closedIconSuffix="closed";isc.A.nodeIcon="[SKIN]/file.gif";isc.A.showOpenIcons=
true;isc.A.showDropIcons=true;isc.A.customIconProperty="icon";isc.A.customIconOpenProperty="showOpenIcon";isc.A.customIconDropProperty="showDropIcon";isc.A.showCustomIconOpen=false;isc.A.showCustomIconDrop=false;isc.A.manyItemsImage="[SKIN]folder_file.gif";isc.A.showConnectors=false;isc.A.showFullConnectors=true;isc.A.showOpener=true;isc.A.openerImage="[SKIN]opener.gif";isc.A.connectorImage="[SKIN]connector.gif";isc.A.offlineNodeMessage="This data not available while offline";isc.A.indentRecordComponents=
true;isc.A.canGroupBy=false;isc.A.ignoreEmptyCriteria=false;isc.A.drawAllMaxCells=0;isc.A.drawAheadRatio=1;isc.A.$34l="open_icon_";isc.A.$349="extra_icon_";isc.A.$34n="icon_";isc.A.$34o="nodeTitle";isc.A=isc.TreeGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.bodyConstructor="TreeGridBody";isc.A.iconPadding=3;isc.A.$64o="</tr></table>";isc.A.$39=";";isc.A.$12c="checkbox";isc.A.$34r="absmiddle";isc.A.$76g=["style='margin-right:",,
"px;'"];isc.A.$4s={};isc.B.push(isc.A.initWidget=function(){this.invokeSuper(isc.TreeGrid,this.$oc);if(!this.dataSource&&this.data!=null&&this.data.dataSource)this.dataSource=this.data.dataSource;if(!this.fields||this.fields.length==0)this.fields=[isc.TreeGrid.TREE_FIELD]},isc.A.setDataSource=function(a,b){if(b==null||b.length==0)b=[isc.TreeGrid.TREE_FIELD];return this.Super("setDataSource",[a,b])},isc.A.$34s=function(){if(!this.fields||this.fields.length==0)this.fields=[isc.TreeGrid.TREE_FIELD];
else{for(var a=this.completeFields,b=this.fields,c,d=0;d<a.length;d++)if(a[d].treeField){c=b.indexOf(a[d]);break}if(c==null){if(!this.autoAssignTreeField)return;a=b.findIndex(this.fieldIdProperty,this.data.titleProperty);if(a!=-1)c=a}if(c==null)c=0;if(this.isCheckboxField(this.fields[c]))c+=1;this.$34t=c;b=b[c];c=isc.TreeGrid.TREE_FIELD;for(var e in c)if(b[e]==null)b[e]=c[e]}},isc.A.deriveVisibleFields=function(a,b,c,d){this.invokeSuper(isc.TreeGrid,"deriveVisibleFields",a,b,c,d);this.$34s()},isc.A.getEmptyMessage=
function(){if(this.isOffline())return this.offlineMessage;if(isc.isA.Tree(this.data)&&this.data.getLoadState(this.data.getRoot())==isc.Tree.LOADING)return this.loadingDataMessage.evalDynamicString(this,{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)});return this.emptyMessage.evalDynamicString(this,{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)})},isc.A.isEmpty=function(){if(!isc.isA.Tree(this.data))return true;
var a=this.data.getRoot();if(a==null)return true;if(this.data.hasChildren(a)||this.showRoot||this.data.showRoot)return false;return true},isc.A.getOpenState=function(){var a=this.data;if(a==null){this.logWarn("getOpenState() called for a treeGrid with no data");return[]}var b=a.getRoot(),c=[];this.$45q(a,b,c);return isc.Comm.serialize(c)},isc.A.setOpenState=function(a){if(a=this.evalViewState(a,"openState"))if(this.data){this.data.closeAll();this.data.openFolders(a)}else this.logWarn("unable to set open state for this treeGrid as this.data is unset")},
isc.A.getSelectedPaths=function(){if(!this.selection)return null;for(var a=this.selection.getSelection()||[],b=[],c=0;c<a.length;c++)b[c]=this.data.getPath(a[c]);return isc.Comm.serialize(b)},isc.A.showActionInPanel=function(){return this.Super("showActionInPanel",arguments)},isc.A.setSelectedPaths=function(a){if(a=this.evalViewState(a,"selectedPaths")){var b=this.selection,c=this.data;if(c&&b){b.deselectAll();b=[];for(var d=0;d<a.length;d++){var e=c.find(a[d]);e&&b.add(e)}this.selection.selectList(b)}}},
isc.A.getViewState=function(){var a=this.Super("getViewState",[true]);a.open=this.getOpenState();return"("+isc.Comm.serialize(a)+")"},isc.A.setViewState=function(a){this.Super("setViewState",arguments);if(a=this.evalViewState(a,"viewState",true)){a.open&&this.setOpenState(a.open);a.selected&&this.setSelectedState(a.selected)}},isc.A.getDefaultData=function(){return isc.Tree.create({$31k:true})},isc.A.setData=function(a,b,c,d){this.invokeSuper(isc.TreeGrid,"setData",a,b,c,d);if(this.data){if(this.separateFolders!=
null)this.data.separateFolders=this.separateFolders;if(this.sortFoldersBeforeLeaves!=null)this.data.sortFoldersBeforeLeaves=this.sortFoldersBeforeLeaves;this.showRoot&&isc.ResultTree&&isc.isA.ResultTree(this.data)&&this.logWarn("showRoot may not be set with a databound treeGrid, unexpected results may occur");this.data.showRoot=this.showRoot;this.data.openDisplayNodeType=this.displayNodeType}},isc.A.draw=function(a,b,c,d){if(this.initialData&&(!isc.ResultSet||!isc.isA.ResultSet(this.data)))this.setData(this.createResultTree());
this.invokeSuper(isc.TreeGrid,"draw",a,b,c,d)},isc.A.bodyKeyPress=function(a){var b=this.selection;if(this.selectionType!=isc.Selection.NONE&&this.data.getLength()>0&&b.anySelected()&&!b.multipleSelected()){b=this.selection.getSelectedRecord();if(a.keyName=="Arrow_Left"){this.data.isFolder(b)&&this.data.isOpen(b)?this.closeFolder(b):this.$319(this.data.getParent(b),true);return false}else if(a.keyName=="Arrow_Right")if(this.data.isFolder(b))if(this.data.isOpen(b)){var c=this.getRecord(this.data.indexOf(b)+
1);if(c!=null&&this.data.getParent(c)==b){this.$319(c,true);return false}}else{this.openFolder(b);return false}}return this.Super("bodyKeyPress",arguments)},isc.A.$298=function(a,b,c){if(b<0||c<0)return true;var d=this.data.isFolder(a);if(this.nodeContextClick&&this.nodeContextClick(this,a,b)==false)return false;if(d){if(this.folderContextClick&&this.folderContextClick(this,a,b)==false)return false}else if(this.leafContextClick&&this.leafContextClick(this,a,b)==false)return false;return this.Super("$298",
arguments)},isc.A.handleEditCellEvent=function(a){var b=this.getRecord(a);if(this.clickInOpenArea(b)||this.clickInCheckboxArea(b))return false;return this.Super("handleEditCellEvent",arguments)},isc.A.canEditCell=function(a,b){if(this.Super("canEditCell",arguments)==false)return false;if(this.getField(b)[this.fieldIdProperty]==this.data.nameProperty)return false;if(this.getField(b)[this.fieldIdProperty]==this.$34o)return false;return true},isc.A.getEditFormItemFieldWidths=function(a){var b=this.data.getLevel(a);
this.showRoot||b--;var c=this.getOpenerIconSize(a);b=b*(this.showConnectors?c:this.indentSize);b+=this.iconSize+c;if(this.$739(a))b+=this.$65a()+this.extraIconGap;else if(this.getExtraIcon(a))b+=this.iconSize+this.extraIconGap;c=this.Super("getEditFormItemFieldWidths",arguments);var d=this.getTreeFieldNum();c[d]-=b;return c},isc.A.getRecordDataSource=function(a){return this.data.getNodeDataSource(a)},isc.A.rowClick=function(a,b,c){var d=a;if(this.clickInOpenArea(d)||this.clickInCheckboxArea(d))return false;
this.$31q=b;if(b<0||c<0)return false;d=this.getRecord(b);var e=this.data.isFolder(d);this.nodeClick&&this.nodeClick(this,d,b);if(e)this.folderClick&&this.folderClick(this,d,b);else this.leafClick&&this.leafClick(this,d,b);return this.Super("rowClick",arguments)},isc.A.recordDoubleClick=function(a,b,c,d,e){if(this.clickInOpenArea(b)||this.clickInCheckboxArea(b))return false;if(this.isEditable()&&this.editEvent==isc.EH.DOUBLE_CLICK&&this.canEditCell(c,e))return true;return this.data.isFolder(b)?this.toggleFolder(b):
this.openLeaf(b)},isc.A.dataChanged=function(){this.Super("dataChanged",arguments);if(this.cascadeSelection&&isc.ResultTree&&isc.isA.ResultTree(this.data)&&this.data.loadDataOnDemand)for(var a=this.data.getNodeList(),b=0;b<a.length;b++){var c=a[b];if(this.data.isFolder(c)&&this.data.getLoadState(c)==isc.Tree.LOADED&&this.selection.isSelected(c)&&!this.selection.isPartiallySelected(c)){c=this.data.getChildren(c);for(var d=0;d<c.length;d++){var e=c[d];this.data.getLoadState(e)==isc.Tree.UNLOADED&&!this.selection.isSelected(e)&&
this.selection.setSelected(e,true)}}}if((a=this.$34z)&&this.data.isOpen(a)&&this.data.getLoadState(a)==isc.Tree.LOADED){this.$340(a);this.$34z=null}},isc.A.openLeaf=function(){},isc.A.getDragTrackerIcon=function(a){var b;if(a&&a.length>1&&this.manyItemsImage!=null)b=this.manyItemsImage;else if(a&&a[0])b=this.getIcon(a[0],true);return b},isc.A.getDragTrackerTitle=function(a,b,c,d,e,f){var g=this.getFieldNum(this.getTitleField());if(g!=this.getTreeFieldNum())return this.invokeSuper(isc.TreeGrid,"getDragTrackerTitle",
a,b,c,d,e,f);c=this.getCellStyle(a,b,g);d=this.getCellCSSText(a,b,g);if(this.selection.isSelected(a)){e=this.body.getCellStyleIndex(a,b,g);if(this.body.getCellStyleName(e,a,b,g)==c){e-=2;c=this.body.getCellStyleName(e,a,b,g)}}a=this.$342(this.invokeSuper(isc.TreeGrid,"getCellValue",a,b,g),a,b,g,false,c,d).join(isc.emptyString);return["<table class='",c,"' style='",d,"'><tr>",a,"</tr></table>"].join(isc.emptyString)},isc.A.willAcceptDrop=function(){if(!this.Super("willAcceptDrop",arguments))return false;
isc.$54j=true;var a=this.data.get(this.getEventRecordNum());isc.$54j=false;if(a==null)a=this.data.getRoot();if(!a||a.canAcceptDrop==false)return false;var b=this.data.isFolder(a);if(!b&&!(this.canReorderRecords||this.canDropOnLeaves))return false;var c=isc.EH.dragTarget.getDragData();if(!isc.isAn.Object(c)||this.getDropError(c,a)!=null)return false;if(!b){a=this.data.getParent(a);if(a.canAcceptDrop==false)return false}if(isc.EH.dragTarget!=this)return true;b=this.canReparentNodes;if(b==null&&this.canAcceptDroppedRecords)b=
true;if(!b){isc.isAn.Array(c)||(c=[c]);b=this.data.getParent(c[0]);if(b!=a)return false;for(a=1;a<c.length;a++)if(b!=this.data.getParent(c[a]))return false}return true},isc.A.$31i=function(){this.canDrag=this.canDrag||this.canDragRecordsOut||this.$34c()||this.canDragSelect;this.canDrop=this.canDrop||this.canDragRecordsOut||this.$34c();this.canAcceptDrop=this.canAcceptDrop||this.canAcceptDroppedRecords||this.$34c()},isc.A.$34c=function(){var a=this.canReparentNodes;if(a==null&&this.canAcceptDroppedRecords){if(!this.$343){this.logInfo("'canReparentNodes' is unset. Allowing node reparenting as 'canAcceptDroppedRecords' is set to true. For explicit control, use 'canReparentNodes' instead.",
"dragDrop");this.$343=true}a=this.canAcceptDroppedRecords}return this.canReorderRecords||a},isc.A.getDropError=function(a,b){for(var c=0,d=a.length;c<d;c++)if(this.data.isDescendantOf(b,a[c]))return this.cantDragIntoChildMessage;if(this.data.isFolder(b))for(c=0;c<d;c++)if(a[c]==b)return this.cantDragIntoSelfMessage;return null},isc.A.dropMove=function(){var a=this.getEventRow();if(a!=-1){var b=a==-2?this.data.getRoot():this.data.get(a),c=this.getDropFolder(),d=this.canReorderRecords?this.getReorderPosition(a):
null;if(c!=this.lastDropFolder||b!=this.$344||d!=this.$345){if(!this.$346)this.$346=this.getID()+".openDropFolder()";this.openDropFolderTimer&&isc.Timer.clear(this.openDropFolderTimer);if(!this.data.isOpen(c))this.openDropFolderTimer=isc.Timer.setTimeout(this.$346,this.openDropFolderDelay);this.updateDropFolder(c)}this.willAcceptDrop()?this.body.clearNoDropIndicator():this.body.setNoDropIndicator();if(this.canReorderRecords)this.data.isOpen(c)?this.showDragLineForRecord(a,d):this.hideDragLine();this.$344=
b;this.$345=d}},isc.A.getDropFolder=function(){var a=this.getEventRow(),b=this.data,c=c<0?b.getRoot():b.get(a);if(b.isRoot(c))return b.getRoot();a=b.isFolder(c);if(!this.canReorderRecords)return a?c:b.getParent(c);var d=this.getReorderPosition(c);return!a||d==isc.ListGrid.BEFORE||d==isc.ListGrid.AFTER&&(!b.isOpen(c)||!b.hasChildren(c))?b.getParent(c):c},isc.A.openDropFolder=function(){var a=this.lastDropFolder;if(!a||!this.data.isFolder(a)||this.data.isOpen(a))return false;this.openFolder(a);this.canReorderRecords&&
this.showDragLineForRecord(this.data.indexOf(a),isc.ListGrid.OVER)},isc.A.getReorderPosition=function(a,b,c,d,e){if(b==null)b=this.body.getOffsetY();if(a==null)a=this.getEventRow(b);var f=this.data;isc.isA.Number(a)||(a=f.indexOf(a));var g=f.get(a);if(g&&f.isFolder(g)){b=b-this.body.getRowTop(a);a=this.body.getRowSize(a);return b<a/4?isc.ListGrid.BEFORE:b>3*a/4?isc.ListGrid.AFTER:isc.ListGrid.OVER}return this.invokeSuper(isc.TreeGrid,"getReorderPosition",a,b,c,d,e)},isc.A.showDragLineForRecord=function(a,
b,c,d,e){if(a==null)a=this.getEventRecordNum();if(b==null)b=this.getReorderPosition(a);if(b==isc.ListGrid.OVER){var f=this.getRecord(a),g=this.data;if(g.isFolder(f)&&g.isOpen(f))b=isc.ListGrid.AFTER}return this.invokeSuper(isc.TreeGrid,"showDragLineForRecord",a,b,c,d,e)},isc.A.dropOut=function(){this.hideDragLine();this.body.clearNoDropIndicator();this.$344=null;this.updateDropFolder();this.openDropFolderTimer&&isc.Timer.clear(this.openDropFolderTimer)},isc.A.updateDropFolder=function(a){var b=this.lastDropFolder;
if(this.lastDropFolder=a){a.$347=this.body.willAcceptDrop(a);this.setRowIcon(a,this.getIcon(a))}if(b&&b!=a){delete b.$347;this.setRowIcon(b,this.getIcon(b))}},isc.A.transferSelectedData=function(a,b,c,d){if(this.isValidTransferSource(a)){if(c==null)c=0;if(b==null)b=this.data.getRoot();this.transferNodes(a.cloneDragData(),b,c,a,d)}else d&&this.fireCallback(d)},isc.A.drop=function(){if(!this.willAcceptDrop())return false;var a=isc.EH.dragTarget.cloneDragData(),b=this.getEventRecordNum(),c=this.getReorderPosition(b),
d=this.data.get(b)||this.data.getRoot(),e=this.getDropFolder(),f=isc.EH.dragTarget.getData();f=isc.isA.Tree(f)&&isc.isA.Tree(this.data)&&f.getRoot()==this.data.getRoot();for(var g=0;g<a.length;g++){var h=a[g],i=this.data.findChildNum(e,this.data.getName(h))!=-1,j=f&&this.canReorderRecords&&e==this.data.getParent(h);if(i&&!j){this.logInfo("already a child named: "+this.data.getName(h)+" under parent: "+this.data.getPath(e));isc.warn(this.parentAlreadyContainsChildMessage);return false}}f=null;if(this.canReorderRecords)if(b<
0){e=d;f=this.data.getChildren(e).getLength()}else f=d==e?0:(c==isc.ListGrid.AFTER?1:0)+this.data.getChildren(e).indexOf(d);if(this.onFolderDrop!=null&&this.onFolderDrop(a,e,f,isc.EH.dragTarget)==false)return false;this.folderDrop(a,e,f,isc.EH.dragTarget);this.data.openFolder(e);return false},isc.A.folderDrop=function(a,b,c,d,e){this.transferNodes(a,b,c,d,e)},isc.A.transferNodes=function(a,b,c,d,e){if(this.$67u("transferNodes",a,b,c,d,e)){b=b||this.data.root;var f=d.getData(),g=isc.isA.Tree(f)&&isc.isA.Tree(this.data)&&
f.getRoot()==this.data.getRoot();e=this.getDataSource();var h=d.getDataSource();if(g&&this.dragDataAction!=isc.TreeGrid.COPY&&this.dragDataAction!=isc.TreeGrid.CLONE)if(e!=null&&this.data!=null&&isc.ResultTree&&isc.isA.ResultTree(this.data)){this.$67k[0].noRemove=true;isc.rpc.startQueue();h=f.getChildren(b);var i;if(c!=null)if(c<h.length)i=h[c];if(i==void 0)i=h[h.length-1];for(var j=0;j<a.length;j++){var k=a[j];if(this.saveLocally||k[this.data.parentIdField]==b[this.data.idField]){if(c!=null){h=f.getChildren(b);
f.move(k,b,h.indexOf(i))}}else{var l=a[j]["_isOpen_"+this.data.ID];k=isc.addProperties({},this.data.getCleanNodeData(a[j],true,false));h=isc.addProperties({},k);if(l!=null)k["_isOpen_"+this.data.ID]=l;k[this.data.parentIdField]=b[this.data.idField];l=null;g=this.data.getChildren(b);if(c==null)l=g.get(g.length-1);else if(c>0)l=g.get(c-1);this.updateDataViaDataSource(k,e,{oldValues:h,parentNode:this.data.getParent(a[j]),newParentNode:b,dragTree:f,draggedNode:k,draggedNodeList:a,dropNeighbor:l,dropIndex:c},
d)}}}else f.moveList(a,b,c);else if(e!=null)if(this.dragRecategorize||h!=null&&h!=e&&this.data!=null&&isc.ResultTree&&isc.isA.ResultTree(this.data)&&d.dragDataAction==isc.TreeGrid.MOVE){i=h.getTreeRelationship(e);if(i!=null&&i.parentIdField){k=false;f=h.getPrimaryKeyFields();for(j in f)if(j==i.parentIdField){this.logWarn("dragRecategorize: data source has dataSource:"+h.getID()+". foreignKey relationship with target dataSource "+e.getID()+" is based on primary key which cannot be modified.");k=true}k||
(l=true);this.logInfo("Recategorizing dropped nodes in dataSource:"+h.getID())}this.$67k[0].noRemove=true;isc.rpc.startQueue();for(j=0;j<a.length;j++){k={};f=h.getPrimaryKeyFieldNames();for(g=0;g<f.length;g++)k[f[g]]=a[j][f[g]];if(l)k[i.parentIdField]=b[i.idField];isc.addProperties(k,this.getDropValues(k,h,b,c,d));this.updateDataViaDataSource(k,h,null,d)}}else{isc.rpc.startQueue();for(j=0;j<a.length;j++){i=a[j];if(l=this.data)i[l.parentIdField]=b[l.idField];isc.addProperties(k,this.getDropValues(i,
h,b,c,d));this.$61d(i,h,d,null,c,b)}}else for(j=0;j<a.length;j++)this.$61d(a[j],h,d,null,c,b);if(!this.$67l){isc.Log.logDebug("Invoking transferDragData from inside transferNodes - no server queries needed?","dragDrop");d.transferDragData(this.$67n,this);if(e)this.$67o||isc.rpc.sendQueue()}this.$67m=false}},isc.A.$67w=function(a,b,c){if(c.dragTree)if(c.newParentNode!=this.data.root&&c.dragTree.getParent(c.newParentNode)==null)isc.logWarn("Target folder is no longer in the Tree in TreeGrid cache sync");
else{var d=c.dropNeighbor,e=c.dragTree,f=e.getChildren(c.newParentNode),g=c.draggedNodeList,h=e.idField,i=g.findIndex(h,c.draggedNode[h]),j;if(d==null)j=0;else for(var k=0;k<f.length;k++)if(f[k]==d){j=k+1;break}if(j!==void 0)for(;j<f.length;){d=g.findIndex(h,f[j][h]);if(d==-1||d>i)break;j++}if(j===void 0){isc.logWarn("Could not order dropped node by reference to neighbor; trying absolute index");j=c.dropIndex}if(j===void 0)isc.logWarn("Unable to determine drop location in TreeGrid cache sync");else{f=
this.data.find(h,c.draggedNode[h]);e.move(f,this.data.getParent(f),j);this.Super("$67w",arguments)}}},isc.A.getTreeCellValue=function(a,b,c,d){if(b==null)return a;var e=this.data.getLevel(b),f=isc.TreeGrid.$82d(),g=this.getCellCSSText(b,c,d),h=this.getCellStyle(b,c,d);f[1]=h;f[3]=g;if(f[3]!=null&&!f[3].endsWith(this.$39))f[3]+=this.$39;f[5]=g;f[7]=h;f[9]=this.getIndentHTML(e,b);a=this.$342(a,b,c,d,true,h,g);b=0;for(c=11;b<a.length;b++){f[c]=a[b];c++}f[c]=this.$64o;return f.join(isc.emptyString)},
isc.A.$342=function(a,b,c,d,e,f,g){if(g==null)g=this.getCellCSSText(b,c,d);if(f==null)f=this.getCellStyle(b,c,d);d=isc.TreeGrid.$82e();d[1]=g;d[3]=f;if(e){e=this.getOpenIcon(b);var h=this.openerIconSize||(this.showConnectors?this.cellHeight:null),i=c!=null?this.$34l+c:null;d[5]=e?this.getIconHTML(e,i,h):this.$348(h||this.iconSize)}else d[5]=null;e=(i=this.$739(b))||this.getExtraIcon(b);h=c!=null?this.$349+c:null;i=i!=null?this.$65a():this.iconSize;var j=this.extraIconGap,k=this.getIcon(b);c=c!=null?
this.$34n+c:null;d[6]=e?this.getIconHTML(e,h,i,j):null;d[7]=this.getIconHTML(k,c,b.iconSize);d[9]=g;d[11]=this.iconPadding;d[13]=f;d[15]=this.wrapCells?null:"<NOBR>";d[16]=a;return d},isc.A.getCellAlign=function(a,b,c){var d=this.getField(c);if(d&&d.treeField)return this.isRTL()?"right":"left";return this.Super("getCellAlign",arguments)},isc.A.getCellValue=function(a,b,c,d,e,f,g){d=this.invokeSuper(isc.TreeGrid,"getCellValue",a,b,c,d,e,f,g);if(c==this.getTreeFieldNum())d=this.getTreeCellValue(d,a,
b,c);return d},isc.A.bodyDrawing=function(a,b,c,d,e){this.$35a={};return this.invokeSuper(isc.TreeGrid,"bodyDrawing",b,c,d,e)},isc.A.getNodeTitle=function(a,b,c){if(c.name&&c.name!=this.$34o){if(b==-1)return a[c.name];return this.getEditedRecord(b)[c.name]}return this.data.getTitle(a)},isc.A.getTitleField=function(){if(this.titleField!=null)return this.titleField;return this.getFieldName(this.getTreeFieldNum())},isc.A.getTreeFieldNum=function(){return this.$34t},isc.A.getOpenAreaWidth=function(a){var b=
this.getOpenerIconSize(a),c=this.showConnectors?b:this.indentSize;return(this.data.getLevel(a)-(this.showRoot?0:1))*c+b},isc.A.getOpenerIconSize=function(){return this.openerIconSize||(this.showConnectors?this.cellHeight:this.iconSize)},isc.A.clickInOpenArea=function(a){if(!this.data.isFolder(a))return false;var b=this.getTreeFieldNum(),c=this.getFieldBody(b),d=this.getLocalFieldNum(b);b=c.getColumnLeft(d);d=c.getColumnWidth(d);a=this.getOpenAreaWidth(a);c=c.getOffsetX();if(this.isRTL()){b=b+d;return c>=
b-a&&c<=b}else return c>=b&&c<b+a},isc.A.clickInCheckboxArea=function(a){if(this.selectionAppearance!=this.$12c)return false;var b=this.getTreeFieldNum(),c=this.getFieldBody(b),d=this.getLocalFieldNum(b);b=c.getColumnLeft(d);d=c.getColumnWidth(d);a=this.getOpenAreaWidth(a);var e=this.$65a();c=c.getOffsetX();if(this.isRTL()){b=b+d;return c>=b-a-e&&c<=b-a}else return c>=b+a&&c<b+a+e},isc.A.getIndentHTML=function(a,b){var c=a;this.showRoot||c--;var d=this.showConnectors?this.getOpenerIconSize(b):this.indentSize;
if(this.showConnectors&&this.showFullConnectors){var e=this.data.$59a(b);e.remove(a);this.showRoot||e.remove(0);if(e.length!=0){if(!this.$59b)this.$59c=this.getIconHTML(isc.Img.urlForState(this.connectorImage,null,null,"ancestor"),null,this.cellHeight);c=this.$348(d);d=isc.StringBuffer.create(isc.emptyString);d.append("<NOBR>");for(var f=this.showRoot?0:1;f<a;f++)e.contains(f)?d.append(this.$59c):d.append(c);return d=d.release()}}return this.$348(c*d)},isc.A.$348=function(a){if(a==0)return isc.emptyString;
var b=isc.TreeGrid.$35c;if(b==null)b=isc.TreeGrid.$35c={};if(b[a]==null)b[a]=isc.Canvas.spacerHTML(a,1);return b[a]},isc.A.getOpenIcon=function(a){if(this.showOpener==false)return null;if(!this.data)return null;if(isc.isA.Number(a))a=this.data.get(a);if(a==null)return null;if(a.openIcon)return a.openIcon;else{var b=this.data.isFolder(a),c=b,d=b;if(b){c=this.data.getLoadState(a);if(c==isc.Tree.UNLOADED||c==isc.Tree.FOLDERS_LOADED&&this.displayNodeType!=isc.Tree.FOLDERS_ONLY){c=true;d=false}else d=
(c=this.data.hasChildren(a,this.displayNodeType))&&this.data.isOpen(a)}b=d&&!this.showFullConnectors?true:!this.$35d(a);a=!this.$35e(a);return this.getOpenerImageURL(c,d,a,b)}},isc.A.$35e=function(a){var b=this.data.indexOf(a);if(b==0)return false;if(this.showFullConnectors)return true;b=this.getRecord(b-1);a=this.data.getParent(a);if(b==null)return false;return a==b||a==this.data.getParent(b)},isc.A.$35d=function(a){if(this.showFullConnectors){var b=this.data,c=b.getParent(a);b=b.getChildren(c);
return b.indexOf(a)!=b.length-1}b=this.getRecord(this.data.indexOf(a)+1);if(b==null)return false;return this.data.getParent(a)==this.data.getParent(b)},isc.A.getOpenerImageURL=function(a,b,c,d){if(!this.$35f){var e=this.openerImage;this.$35f={opened:isc.Img.urlForState(e,null,null,"opened"),closed:isc.Img.urlForState(e,null,null,this.isRTL()?"closed_rtl":"closed"),opening:isc.Img.urlForState(e,null,null,"opening")}}if(this.showConnectors&&!this.$35g){e=this.connectorImage;for(var f=["single","start",
"end","middle","opened_single","opened_start","opened_middle","opened_end","closed_single","closed_start","closed_middle","closed_end"],g={},h=this.isRTL(),i=0;i<f.length;i++){var j=f[i],k=j;if(h)k+="$35h";g[j]=isc.Img.urlForState(e,null,null,k)}this.$35g=g}if(this.showConnectors){e=this.$35g;if(a)if(b){if(!this.showFullConnectors){if(c)return e.opened_single;return e.opened_end}return c&&d?e.opened_single:c?e.opened_start:d?e.opened_end:e.opened_middle}else{if(c&&d)return e.closed_single;if(c)return e.closed_start;
if(d)return e.closed_end;return e.closed_middle}else{if(c&&d)return e.single;if(c)return e.start;if(d)return e.end;return e.middle}}else{e=this.$35f;if(!a)return null;if(b)return e.opened;return e.closed}},isc.A.$739=function(a){var b=null;if(this.selectionAppearance==this.$12c)if(this.body.canSelectRecord(a))b=((b=this.selection.isSelected(a)?true:false)&&this.showPartialSelection&&this.selection.isPartiallySelected(a)?true:false)?this.checkboxFieldPartialImage||this.booleanPartialImage:b?this.checkboxFieldTrueImage||
this.booleanTrueImage:this.checkboxFieldFalseImage||this.booleanFalseImage;else b="[SKINIMG]/blank.gif";return b},isc.A.getExtraIcon=function(){return null},isc.A.getIcon=function(a,b){if(isc.isA.Number(a))a=this.data.get(a);if(!a)return null;var c=a[this.customIconProperty],d=c!=null,e=this.data.isFolder(a);d||(c=e?this.folderIcon:this.nodeIcon);var f;if(e){e=b?false:this.lastDropFolder==a&&a.$347;var g=b?false:!!this.data.isOpen(a);if(e)if(a.dropIcon!=null)c=a.dropIcon;else if(!d&&this.folderDropImage!=
null)c=this.folderDropImage;else{if(d){d=a[this.customIconDropProperty];if(d==null)d=this.showCustomIconDrop}else d=this.showDropIcons;if(d)f=this.dropIconSuffix}else if(g)if(a.openedIcon!=null)c=a.openedIcon;else if(!d&&this.folderOpenImage!=null)c=this.folderOpenImage;else{if(d){e=a[this.customIconOpenProperty];if(e==null)e=this.showCustomIconOpen}else e=this.showOpenIcons;if(e)f=this.openIconSuffix;else if(!d)f=this.closedIconSuffix}else if(!d)if(this.folderClosedImage)c=this.folderClosedImage;
else f=this.closedIconSuffix}else if(!d&&this.fileImage)c=this.fileImage;return isc.Img.urlForState(c,false,false,f)},isc.A.getIconHTML=function(a,b,c,d){if(a==null)return isc.emptyString;if(c==null)c=this.iconSize;var e=this.$35a.iconHTML;if(e==null)e=this.$35a.iconHTML={};if(e[a]==null){var f;if(d){f=this.$76g;f[1]=d;f=f.join(isc.emptyString)}d=this.$4s;d.src=a;d.width=d.height=c;d.name=b;d.align=this.$34r;d.extraStuff=f;e[a]=this.$wf(d)}a=e[a];a[14]=b;return a.join(isc.$ad)},isc.A.setRowIcon=function(a,
b){isc.isA.Number(a)||(a=this.data.indexOf(a));a!=-1&&this.getIcon(a)!=null&&this.setImage(this.$34n+a,b)},isc.A.setNodeIcon=function(a,b){a[this.customIconProperty]=b;this.setImage(this.$34n+this.getRecordIndex(a),b)},isc.A.getPrintHTML=function(a){var b=this.printExpandTree;if(b==null)b=a?a.expandTrees:null;if(b&&this.data)isc.ResultTree&&isc.isA.ResultTree(this.data)&&this.data.loadDataOnDemand?this.logWarn("Printing TreeGrid with option to expand folders on print not supported for load on demand trees."):
this.data.openAll();return this.Super("getPrintHTML",arguments)},isc.A.getExportFieldValue=function(a,b,c){var d=this.Super("getExportFieldValue",arguments);if(c==this.getTreeFieldNum()&&this.exportIndentString)for(var e=this.data.getLevel(a);--e>0;)d=this.exportIndentString+d;return d});isc.B._maxIndex=isc.C+70;isc.TreeGrid.registerStringMethods({folderOpened:"node",folderClosed:"node",folderClick:"viewer,folder,recordNum",leafClick:"viewer,leaf,recordNum",nodeClick:"viewer,node,recordNum",folderContextClick:"viewer,folder,recordNum",
leafContextClick:"viewer,leaf,recordNum",nodeContextClick:"viewer,node,recordNum",dataArrived:"parentNode",onFolderDrop:"nodes,folder,index,sourceWidget"});isc.defineInterface("Observer").addInterfaceProperties({registerObserved:isc.ClassFactory.TARGET_IMPLEMENTS,unregisterObserved:isc.ClassFactory.TARGET_IMPLEMENTS});isc.defineInterface("AutoObserver","Observer").addProperties({observedName:"observed",observations:{},registerObserved:function(a){this[this.observedName]=a;for(var b in this.observations)this.observe(a,
b,this.observations[b]);isc.isA.Canvas(a)&&this.observe(a,"destroy","observer.unregisterObserved(observed)")},unregisterObserved:function(a){this[this.observedName]=null;for(var b in this.observations)this.ignore(a,b)}});isc.defineInterface("GridAutoObserver","AutoObserver").addInterfaceProperties({observedName:"grid"});isc.defineClass("GridTotalRowsIndicator","Label","GridAutoObserver");isc.A=isc.GridTotalRowsIndicator.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;
isc.D[isc.C]=isc.A.Class;isc.A.height=1;isc.A.overflow="visible";isc.A.valign="center";isc.A.observations={dataArrived:"observer.gridDataChanged()",setData:"observer.gridDataChanged()"};isc.A.dynamicContents=true;isc.A.contents="Total Rows: ${this.rowCount}";isc.A.rowCount="N/A";isc.B.push(isc.A.gridDataChanged=function(){var a=this.grid.data;if(!a)this.rowCount="N/A";if(isc.isA.ResultSet(a))this.rowCount=a.lengthIsKnown()?a.getLength():"N/A";else if(isc.isAn.Array(a))this.rowCount=a.getLength();
this.markForRedraw()});isc.B._maxIndex=isc.C+1;isc.defineClass("ObserverToolStrip","ToolStrip");isc.A=isc.ObserverToolStrip.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function(){this.Super("initWidget",arguments);for(var a=0;a<this.members.length;a++){var b=this.members[a];isc.isAn.Observer(b)&&b.registerObserved(this.grid)}});isc.B._maxIndex=isc.C+1;isc.defineClass("GridToolStrip","ObserverToolStrip");isc.A=
isc.GridToolStrip.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.membersMargin=5;isc.A.addButtonDefaults={_constructor:"Img",size:16,layoutAlign:"center",src:"[SKIN]/actions/add.png",click:"this.creator.grid.startEditingNew()"};isc.A.removeButtonDefaults={_constructor:"Img",size:16,layoutAlign:"center",src:"[SKIN]/actions/remove.png",click:"this.creator.grid.removeSelectedData()"};isc.A.refreshButtonDefaults={_constructor:"Img",size:16,
layoutAlign:"center",src:"[SKIN]/actions/refresh.png",click:"this.creator.grid.invalidateCache()"};isc.A.exportButtonDefaults={_constructor:"IButton",title:"Export to CSV",layoutAlign:"center",click:"this.creator.grid.exportData()"};isc.A.totalRowsIndicatorDefaults={_constructor:"GridTotalRowsIndicator",layoutAlign:"center"};isc.A.members=["autoChild:removeButton","autoChild:addButton","autoChild:exportButton","starSpacer","autoChild:refreshButton","autoChild:totalRowsIndicator"];isc.B.push(isc.A.initWidget=
function(){this.Super("initWidget",arguments)});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("RecordEditor","ListGrid");isc.A=isc.RecordEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoDraw=false;isc.A.cellSpacing=0;isc.A.cellPadding=0;isc.A.selectionType="none";isc.A.showRollOver=false;isc.A.baseStyle="recordEditorCell";isc.A.showHeader=false;isc.A.showEmptyMessage=false;isc.A.bodyOverflow="hidden";isc.A.fixedRecordHeights=
true;isc.A.skinImgDir="images/RecordEditor/";isc.A.saveImg={src:"[SKIN]add.png",width:16,height:16,showOver:true};isc.A.filterImg={src:"[SKIN]filter.png",width:16,height:16,showOver:true};isc.A.actionButtonStyle="normal";isc.A.listEndEditAction="next";isc.A.canEdit=true;isc.A.editByCell=false;isc.A.canFocus=false;isc.A.$jo=false;isc.A.bodyStyleName="normal";isc.B.push(isc.A.shouldAutoFitField=function(){return false},isc.A.$32t=function(){});isc.B._maxIndex=isc.C+2;isc.A=isc.RecordEditor.getPrototype();
isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$65g="filter";isc.B.push(isc.A.initWidget=function(){if(this.sourceWidget!=null){var a=this.sourceWidget;this.setWidth(a.getWidth()-(a.getLeftMargin()+a.getRightMargin()));this.leaveScrollbarGap=this.sourceWidget.leaveScrollbarGap;if(this.isAFilterEditor()){this.actOnCellChange=this.sourceWidget.filterByCell;this.actOnKeypress=this.sourceWidget.filterOnKeypress}else this.actOnCellChange=this.sourceWidget.saveByCell;
isc.addProperties(this.editFormDefaults,{autoFocus:false});this.fieldIDProperty=this.sourceWidget.fieldIDProperty;this.fields=this.sourceWidget.completeFields.duplicate();this.cellHeight=this.getInnerHeight()}else this.logWarn("RecordEditor initialized without a sourceWidget property. This widget is not supported as a standalone component.");return this.Super(this.$oc)},isc.A.isAFilterEditor=function(){return this.actionType==this.$65g},isc.A.$315=function(a,b,c){if(c.isRemoveField)return"&nbsp;";
return this.Super("$315",arguments)},isc.A.draw=function(){var a=this.findNextEditCell(0,0,1,true,true,false,true,true);if(a==null)this.logWarn("No editable fields in this record editor."+(this.isAFilterEditor()?" Check the 'canFilter' property for each field in ":" Check the 'canEdit' property for each field in ")+this.sourceWidget.getID());else{var b;if(this.isAFilterEditor())b=this.sourceWidget.$32e();else{b={};for(var c=0;c<this.fields.length;c++){var d=this.fields[c];if(d.defaultValue!==void 0)b[d[this.fieldIdProperty]]=
d.defaultValue}}this.isAFilterEditor()?this.setValuesAsCriteria(b):this.setEditValues(0,b);this.$31u(0,a[1])}this.Super("draw",arguments);this.$35i.bringToFront()},isc.A.setFields=function(){this.Super("setFields",arguments);var a=this.findNextEditCell(0,0,1,true,true);if(a==null)a=[0,0];this.isDrawn()&&!this.$30a&&this.$31u(0,a[1])},isc.A.createChildren=function(){this.Super("createChildren",arguments);this.$35i||this.makeActionButton()},isc.A.makeActionButton=function(){var a;a=this.isAFilterEditor()?
this.filterImg:this.saveImg;this.$35i=isc.Button.create({recordEditor:this,left:this.getInnerWidth()-this.getScrollbarSize(),width:this.getScrollbarSize(),autoDraw:false,baseStyle:this.actionButtonStyle,skinImgDir:this.skinImgDir,icon:a.src,showRollOverIcon:a.showOver,showFocusedIcon:a.showFocused,showFocusedAsOver:false,click:function(){this.recordEditor.performAction()}},this.actionButtonDefaults,this.actionButtonProperties);this.addChild(this.$35i);this.$35i.$sq(this)},isc.A.performAction=function(a){this.isAFilterEditor()?
this.performFilter(a):this.performSave(a)},isc.A.setValuesAsCriteria=function(a,b){var c=this.getEditForm();if(c==null)this.$789=a;else{c.setValuesAsCriteria(a);b&&this.refreshRow(0)}},isc.A.makeEditForm=function(){var a=this.getEditForm(),b;b=a==null?this.$789:a.getValuesAsCriteria();this.Super("makeEditForm",arguments);a=this.getEditForm();if(a!=null){a.setValuesAsCriteria(b);delete this.$789}},isc.A.getEditDisplayValue=function(a,b){if(this.isAFilterEditor()&&this.$286!=null)return this.$286.getValue(this.getFieldName(b));
return this.Super("getEditDisplayValue",arguments)},isc.A.performFilter=function(a){var b=this.$74n(this.sourceWidget.autoFetchTextMatchStyle),c={};if(a)c.showPrompt=false;c.textMatchStyle=this.sourceWidget.autoFetchTextMatchStyle;a=this.sourceWidget.data;isc.isA.ResultSet(a)&&a.willFetchData(b,c.textMatchStyle)?this.fireOnPause("performFilter",{target:this.sourceWidget,methodName:"handleFilterEditorSubmit",args:[b,c]},this.fetchDelay):this.sourceWidget.handleFilterEditorSubmit(b,c)},isc.A.$74n=function(a){var b=
this.getEditForm();if(b==null)return this.$789;return b.getValuesAsCriteria(null,a)},isc.A.performSave=function(){var a=this.getEditRow(),b=this.getEditCol(),c=this.getFieldName(b),d=this.$286.getValue(c);this.setEditValue(a,b,d);a=this.getEditValues(0);d=this.getFields().getProperty(this.fieldIdProperty);if(this.validateRowValues(a,{},0,d)){this.$321(0);this.$31u(0,0);for(c in a)this.refreshCell(0,b)}},isc.A.getValues=function(){var a=this.getEditCol(),b=this.getEditFieldName();this.setEditValue(0,
a,this.$286.getValue(b));return this.$74n()},isc.A.getValuesAsCriteria=function(a){this.getEditCol();this.getEditFieldName();return this.$74n(a)},isc.A.canEditCell=function(a,b){if(this.isAFilterEditor()){var c=this.getField(b);if(c==null)return false;return c.canFilter!=false}else return this.sourceWidget.canEditCell(a,b)},isc.A.getEditorValueMap=function(a,b){return this.isAFilterEditor()?this.sourceWidget.getFilterEditorValueMap(a):this.sourceWidget.getEditorValueMap(a,b)},isc.A.getEditorType=
function(a,b){return this.isAFilterEditor()?this.sourceWidget.getFilterEditorType(a):this.sourceWidget.getEditorType(a,b)},isc.A.$45r=function(){this.form.grid.editorChanged(this)},isc.A.editorChanged=function(a){(a.actOnKeypress!=null?a.actOnKeypress:this.actOnKeypress)&&this.performAction(true)},isc.A.getEditorProperties=function(a){var b={height:this.cellHeight};if(a.displayField&&!a.optionDataSource)b.optionDataSource=this.sourceWidget.dataSource;if(this.isAFilterEditor()){b.allowEmptyValue=true;
b.changed=this.$45r;b.actOnKeypress=a.filterOnKeypress;return isc.addProperties(b,this.sourceWidget.getFilterEditorProperties(a))}else return isc.addProperties(b,this.sourceWidget.getEditorProperties(a))},isc.A.getEditItem=function(a){var b=this.Super("getEditItem",arguments);if(!this.isAFilterEditor())return b;var c=this.sourceWidget.getFilterEditorProperties(a);c||(c={});a.defaultValue!=null&&c.defaultValue===void 0&&delete b.defaultValue;a.change!=null&&c.change===void 0&&delete b.change;a.defaultDynamicValue!=
null&&c.defaultDynamicValue!=null&&delete b.defaultDynamicValue;a.icons!=null&&c.icons===void 0&&delete b.icons;a.showPickerIcon!=null&&c.showPickerIcon===void 0&&delete b.showPickerIcon;return b},isc.A.getDefaultEditValue=function(){if(this.isAFilterEditor())return null;return this.Super("getDefaultEditValue",arguments)},isc.A.cellEditEnd=function(a,b){if(a!=isc.ListGrid.ENTER_KEYPRESS&&a!=isc.ListGrid.TAB_KEYPRESS&&a!=isc.ListGrid.SHIFT_TAB_KEYPRESS&&a!=isc.ListGrid.EDIT_FIELD_CHANGE)return true;
if(b===void 0)b=this.getUpdatedEditorValue();var c=this.getEditRow(),d=this.getEditCol();this.setEditValue(c,d,b);if(a==isc.ListGrid.ENTER_KEYPRESS||this.actOnCellChange){this.performAction();if(a==isc.ListGrid.ENTER_KEYPRESS)return}d=this.getNextEditCell(c,d,a);if(d==null||d[0]!=c)if(a==isc.ListGrid.TAB_KEYPRESS)this.$35i.focus();else this.$vw!=null&&this.$vw.focus();else return this.Super("cellEditEnd",arguments)},isc.A.clearEditValue=function(a,b){return this.Super("clearEditValue",[a,b,null,true])},
isc.A.layoutChildren=function(){this.Super("layoutChildren",arguments);this.$35i&&this.$35i.setLeft(this.getInnerWidth()-this.getScrollbarSize());if(this.body){var a=this.body;if(this.bodyLayout)a=this.bodyLayout;a.setWidth(this.getInnerWidth()-this.getScrollbarSize())}},isc.A.adjustOverflow=function(){this.Super("adjustOverflow",arguments);this.$35i&&this.$35i.setHeight(this.body.getVisibleHeight())},isc.A.bodyScrolled=function(){this.Super("bodyScrolled",arguments);this.$35j!=null&&isc.Timer.clear(this.$35j);
this.$35j=this.delayCall("syncSourceScrolling",[],0)},isc.A.syncSourceScrolling=function(){var a=this.body.getScrollLeft();this.sourceWidget&&this.sourceWidget.body&&this.sourceWidget.body.getScrollLeft()!=a&&this.sourceWidget.body.scrollTo(a)},isc.A.getFieldWidths=function(){var a=this.sourceWidget.getFieldWidths();if(isc.isA.Array(a))a=a.duplicate();return a},isc.A.$57q=function(){return this.sourceWidget&&this.sourceWidget.body&&!this.sourceWidget.body.vscrollOn},isc.A.getEditFormItemFieldWidths=
function(){var a=this.Super("getEditFormItemFieldWidths",arguments);if(this.$57q()){var b=a.sum(),c=this.getInnerWidth()-this.getScrollbarSize();if(b>c)a[a.length-1]-=Math.min(this.getScrollbarSize(),b-c)}return a},isc.A.getCellAlign=function(a,b,c){if(c==this.fields.getLength()-1)return"left";return this.Super("getCellAlign",arguments)},isc.A.getCellValue=function(a,b,c){var d=this.fields[c];if(d&&(this.isCheckboxField(d)||this.isExpansionField(d)||this.isRowNumberField(d)))return"&nbsp;";return this.Super("getCellValue",
arguments)},isc.A.rebuildForFreeze=function(){},isc.A.rowClick=function(){},isc.A.rowDoubleClick=function(){});isc.B._maxIndex=isc.C+38;isc.ClassFactory.defineClass("Menu","ListGrid");isc.A=isc.Menu;isc.A.standardFields={icon:"ICON_FIELD",title:"TITLE_FIELD",key:"KEY_FIELD",subMenu:"SUBMENU_FIELD"};isc.A.ICON_FIELD={name:"icon",width:25,getCellValue:function(a,b){return a.getIcon(b)}};isc.A.TITLE_FIELD={name:"title",width:"*",getCellValue:function(a,b){return a.getItemTitle(b)}};isc.A.KEY_FIELD={name:"keys",
width:35,getCellValue:function(a,b){return a.getKeyTitle(b)}};isc.A.SUBMENU_FIELD={name:"submenu",width:18,getCellValue:function(a,b){return a.getSubmenuImage(b)}};isc.A.$kc=[];isc.A.SHIFT=isc.Browser.isWin?"Shift+":"shift-";isc.A.CTRL=isc.Browser.isWin?"Ctrl+":"ctrl-";isc.A.ALT=isc.Browser.isWin?"Alt+":"option-";isc.A.META=isc.Browser.isWin?"Windows+":"command-";isc.A=isc.Menu.getPrototype();isc.A.fixedIconWidth=true;isc.A.styleName="normal";isc.A.bodyStyleName="normal";isc.A.submenuDelay=200;isc.A.submenuOffset=
-4;isc.A.defaultWidth=150;isc.A.defaultHeight=20;isc.A.enforceMaxHeight=true;isc.A.maxHeight=null;isc.A.backgroundColor=null;isc.A.overflow=isc.Canvas.VISIBLE;isc.A.bodyOverflow=isc.Canvas.VISIBLE;isc.A.arrowKeyAction="focus";isc.A.selectionType=isc.Selection.NONE;isc.A.autoDraw=false;isc.A.tableStyle="menuTable";isc.A.showRollOver=true;isc.A.showFocusOutline=false;isc.A.showAllRecords=true;isc.A.fixedFieldWidths=false;isc.A.fixedRecordHeights=false;isc.A.leaveScrollbarGap=false;isc.A.baseStyle="menu";
isc.A.alternateRecordStyles=false;isc.A.showHeader=false;isc.A.showSortArrow=isc.ListGrid.NONE;isc.A.canDrag=false;isc.A.canAcceptDrop=false;isc.A.canReorderRecords=false;isc.A.useKeys=true;isc.A.showKeys=true;isc.A.showIcons=true;isc.A.showSubmenus=true;isc.A.submenuDirection="right";isc.A.showFieldsSeparately=false;isc.A.emptyMessage="[Empty menu]";isc.A.cellSpacing=0;isc.A.cellPadding=2;isc.A.iconWidth=16;isc.A.iconHeight=16;isc.A.autoSetDynamicItems=true;isc.A.skinImgDir="images/Menu/";isc.A.submenuImage=
{src:"[SKIN]submenu.gif",width:7,height:7};isc.A.submenuDisabledImage={src:"[SKIN]submenu_disabled.gif",width:7,height:7};isc.A.checkmarkImage={src:"[SKIN]check.gif",width:9,height:9};isc.A.checkmarkDisabledImage={src:"[SKIN]check_disabled.gif",width:9,height:9};isc.A.useBackMask=true;isc.A.submenuInheritanceMask=["submenuConstructor","$35k","className","submenuDelay","submenuOffset","defaultWidth","backgroundColor","tableStyle","showRollOver","baseStyle","emptyMessage","canDrag","canAcceptDrop",
"canReorderRecords","useKeys","showKeys","showIcons","showSubmenus","submenuDirection","cellPadding","iconWidth","iconHeight","autoSetDynamicItems","skinImgDir","submenuImage","submenuDisabledImage","checkmarkImage","checkmarkDisabledImage","bodyDefaults","itemClick","canSelectParentItems","childrenProperty","inheritedProperties"];isc.A.mergeSingleParent=true;isc.A.autoDismiss=true;isc.A.cascadeAutoDismiss=true;isc.A.autoDismissOnBlur=true;isc.A.fetchSubmenus=true;isc.A=isc.Menu.getPrototype();isc.B=
isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$oz="left";isc.A.$o1="right";isc.B.push(isc.A.initWidget=function(){this.$35l();this.position=isc.Canvas.ABSOLUTE;if(this.dataSource!=null&&!this.hasFlatDataSource()){var a=this.createResultTree(null,null,{showPrompt:false,dataProperties:{autoOpenRoot:false}});this.items&&a.addList(this.items,a.getRoot());this.loadDataOnDemand==false&&a.loadChildren(a.getRoot(),{caller:this,methodName:"treeDataLoaded"});this.data=
a}else this.dataSource!=null&&isc.DataSource.get(this.dataSource).fetchData(null,{caller:this,methodName:"flatDataLoaded"});if(this.data==null&&this.items!=null)this.data=this.items;if(isc.Tree&&isc.isA.Tree(this.data)){this.$35k=this.data;this.childrenProperty=this.data.childrenProperty;a=this.data.getChildren();if(this.mergeSingleParent&&!isc.isA.ResultTree(this.$35k)&&a.length==1&&this.data.hasChildren(a[0])){a=a[0];this.data=this.data.getChildren(a).duplicate();this.data.add({isSeparator:true});
var b={};isc.addProperties(b,a);b[this.childrenProperty]=null;this.data.add(b)}else this.data=null}this.Super(this.$oc);if(this.fields){this.$51r=false;for(a=0;a<this.fields.length;a++){b=this.fields[a];if(isc.isA.String(b))if(isc.Menu.standardFields[b]!=null)this.fields[a]=isc.Menu[isc.Menu.standardFields[b]];else{this.logWarn("Menu field specified as :"+b+". This is not a recognized standard field name");this.fields.removeAt(a);a-=1}}}else{this.$51r=true;this.fields=[];(a=this.submenuDirection==
this.$oz)&&this.showSubmenus&&this.fields.add(isc.Menu.SUBMENU_FIELD);this.showIcons&&this.fields.add(isc.Menu.ICON_FIELD);this.fields.add(isc.Menu.TITLE_FIELD);this.showKeys&&this.fields.add(isc.Menu.KEY_FIELD);!a&&this.showSubmenus&&this.fields.add(isc.Menu.SUBMENU_FIELD)}if(this.iconBodyStyleName!=null&&this.fields!=null)for(a=0;a<this.fields.length;a++)if(this.fields[a]=="icon"||this.fields[a]==isc.Menu.ICON_FIELD){this.bodyStyleName=this.iconBodyStyleName;break}if(isc.Browser.isSafari){isc.addProperties(this.submenuImage,
{align:"BOTTOM"});isc.addProperties(this.submenuDisabledImage,{align:"BOTTOM"})}this.useKeys&&this.setUpKeyListening();if(this.$35k){if(!this.treeParentNode)this.treeParentNode=this.$35k.getRoot();this.setTreeNode(this.treeParentNode)}},isc.A.hasFlatDataSource=function(){for(var a=isc.DataSource.get(this.dataSource),b=a.getFieldNames(),c=false,d=false,e=0;e<b.length;e++){var f=a.getField(b[e]);if(f.primaryKey)c=true;if(f.foreignKey)d=true}return!(c&&d)},isc.A.setFields=function(a,b,c,d,e){if(a&&a!=
this.fields)this.$51r=false;this.invokeSuper(isc.Menu,"setFields",a,b,c,d,e)},isc.A.treeDataLoaded=function(){this.treeDataArrived(this.$35m)},isc.A.setTreeNode=function(a){var b=this.$35k.getLoadState(a);this.$35m=a;if(b==isc.Tree.LOADED)this.treeDataArrived(a);else if(b!=isc.Tree.LOADING){this.$35k.loadChildren(a,this.getID()+".treeDataArrived(node)");this.$35n=true;this.setData(null)}},isc.A.treeDataArrived=function(a){delete this.$35n;if(a==this.$35m){this.setData(this.$35k.getChildren(a));this.masterMenu&&
this.masterMenu.isVisible()&&this.masterMenu.placeSubmenu(a,this)}},isc.A.flatDataLoaded=function(a,b){this.setData(b)},isc.A.getEmptyMessage=function(){if(this.$35n)return this.loadingDataMessage.evalDynamicString(this,{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)});return this.Super("getEmptyMessage",arguments)},isc.A.isEmpty=function(){if(this.$35n)return true;return this.Super("isEmpty",arguments)},isc.A.$35l=function(){isc.addProperties(this,
{emptyMessageTableStyle:this.tableStyle,emptyMessageStyle:this.baseStyle+isc.GridRenderer.standardStyleSuffixes[4]})},isc.A.$31m=function(a,b,c,d,e){var f;if(this.$35k){f=this.isObserving(this.$35k,"dataChanged");a=this.$35k}f||this.invokeSuper(isc.Menu,"$31m",a,b,c,d,e);this.autoSetDynamicItems&&this.$35o()},isc.A.$31j=function(){this.Super("$31j",arguments);this.autoSetDynamicItems&&delete this.setDynamicItems},isc.A.rowClick=function(a,b,c){this.Super("rowClick",arguments);this.selectMenuItem(b,
c)},isc.A.selectMenuItem=function(a,b){if(a==null)a=this.getEventRecordNum();a=this.getItem(a);var c=true;if(a==null||!this.itemIsEnabled(a)){isc.Menu.hideAllMenus("itemClick");return false}if(this.hasSubmenu(a)&&!this.canSelectParentItems&&!a.canSelectParent){if(this.submenuTimer)this.submenuTimer=isc.Timer.clear(this.submenuTimer);this.$35p!=a&&this.hideSubmenu();this.showSubmenu(a);return false}for(var d=this;d.$35q;)d=d.$35q;if(this.autoDismiss&&(a.autoDismiss||a.autoDismiss==null))isc.Menu.hideAllMenus("itemClick");
if(a.action){isc.isA.Function(a.action)||isc.Func.replaceWithMethod(a,"action","");if(a.action()==false)return false}if(a.click){isc.isA.Function(a.click)||isc.Func.replaceWithMethod(a,"click","target,item,menu,colNum");c=a.click(this.target?this.target:this,a,this,b)}if(c!=false)c=this.itemClick(a,b);this.autoDismiss&&(a.autoDismiss||a.autoDismiss==null)||this.refreshRow(this.getRecordIndex(a));return c},isc.A.mouseOver=function(){var a=this.$35q;if(a&&a.body.lastOverRow!=this.$35r){if(a.submenuTimer)a.submenuTimer=
isc.Timer.clear(a.submenuTimer);a.$88(this.$35r)}},isc.A.rowOver=function(){if(this.submenuTimer)this.submenuTimer=isc.Timer.clear(this.submenuTimer);this.submenuTimer=isc.Timer.setTimeout({target:this,method:this.changeSubmenu},this.submenuDelay)},isc.A.itemClick=function(){},isc.A.getShowSubmenuKey=function(){return this.submenuDirection=="right"?"Arrow_Right":"Arrow_Left"},isc.A.getHideSubmenuKey=function(){return this.submenuDirection=="right"?"Arrow_Left":"Arrow_Right"},isc.A.bodyKeyPress=function(){var a=
isc.EventHandler.lastEvent.keyName;if(a==this.getHideSubmenuKey()){if(this.$35q!=null){this.$35q.hideSubmenu();this.$35q.focus();return false}}else if(a==this.getShowSubmenuKey()){if(this.hasSubmenu(this.getItem(this.getFocusRow()))){this.changeSubmenu();this.$35s.$318(1);return false}}else if(a=="Escape"&&this.autoDismissOnBlur!=false){if(this.$35q!=null){this.$35q.hideSubmenu();this.$35q.focus()}else isc.Menu.hideAllMenus("outsideClick");return false}else if(a=="Enter")return this.$240();return this.Super("bodyKeyPress",
arguments)},isc.A.$318=function(a){var b=this.getFocusRow();if(b==null)b=0;if(a==-1){do{b+=a;if(b<0){this.hide();return false}}while(!this.itemIsEnabled(b))}return this.Super("$318",arguments)},isc.A.show=function(a){if(this.$35t){this.moveTo(this.$35u[0],this.$35u[1]);this.$35t=null}if(a==null)a=this.showAnimationEffect;if(!this.$35v&&a!=null&&a!="none"){this.$35v=true;this.animateShow(a,"this.$35w()")}else{this.setDynamicItems&&this.setDynamicItems();this.isDrawn()||this.draw(true);this.body.focusOnHide=
isc.EH.getFocusCanvas();isc.Menu.$kc.add(this);this.autoDismissOnBlur&&isc.Menu.$781();this.bringToFront();this.Super("show",arguments);this.$35v||this.$35w()}},isc.A.$35w=function(){this.$35v&&delete this.$35v;isc.Browser.isMoz&&this.getClipHandle();this.body.focus()},isc.A.hide=function(){if(this.visibility!=isc.Canvas.HIDDEN){this.Super("hide",arguments);this.$20();this.clearLastHilite();this.$31q=null;this.$35p&&delete this.$35p;this.submenuTimer&&isc.Timer.clearTimeout(this.submenuTimer)}},isc.A.showContextMenu=
function(a){if(a&&(a.target==this||this.body&&a.target==this.body)){if(this.body){if(isc.Browser.isSafari){this.body.$29u=this.getEventRow();this.body.$29v=this.getEventColumn()}this.body.click()}return false}var b;if(isc.isA.Canvas(a))b=a;if(a!=null&&a.target!=null)b=a.target;if(b!=null)this.target=b;this.positionContextMenu();this.show();return false},isc.A.getMaxHeight=function(){if(this.maxHeight!=null)return this.maxHeight;return isc.Page.getHeight()-this.getScrollbarSize()},isc.A.$8h=function(){if(!this.isDrawn()){this.setVisibility(isc.Canvas.HIDDEN);
this.draw()}this.setVisibility(isc.Canvas.VISIBLE);this.$20();if(this.isDirty()||this.body.isDirty())this.redraw();this.$rm&&this.adjustOverflow();if(!this.$35y&&this.enforceMaxHeight){if(this.overflow!=isc.Canvas.VISIBLE){this.leaveScrollbarGap=false;this.setOverflow(isc.Canvas.VISIBLE);this.setHeight(this.defaultHeight);this.setWidth(this.$35z||this.defaultWidth);this.adjustOverflow()}var a=this.getVisibleHeight();this.getVisibleWidth();var b=this.getMaxHeight();if(this.overflow==isc.Canvas.VISIBLE&&
a>b){this.leaveScrollbarGap=true;this.setHeight(b);this.$35z=this.getWidth();this.setWidth(this.getVisibleWidth()+this.getScrollbarSize());this.setOverflow(isc.Canvas.AUTO);this.adjustOverflow()}this.$35y=true}this.setVisibility(isc.Canvas.HIDDEN)},isc.A.dataChanged=function(a,b,c,d){if(this.$35k&&this.$35m!=null)if(!this.$501(this.$35m)){this.destroy();return}a=this.invokeSuper(isc.Menu,"dataChanged",a,b,c,d);delete this.$35y;this.autoSetDynamicItems&&this.$795();return a},isc.A.$501=function(a){for(;a;){if(this.$35k.isRoot(a))return true;
a=this.$35k.getParent(a)}return false},isc.A.setData=function(a,b,c,d){a=this.invokeSuper(isc.Menu,"setData",a,b,c,d);delete this.$35y;return a},isc.A.setItems=function(a,b,c,d){return this.setData(a,b,c,d)},isc.A.getMenuItem=function(a){return isc.Class.getArrayItem(a,this.data,"name")},isc.A.$20=function(){if(this.parentElement==null)if(!this.$35t){this.$35u=[this.getLeft(),this.getTop()];this.moveTo(null,-9999);this.$35t=true}},isc.A.moveBy=function(){var a=this.Super("moveBy",arguments);if(this.$35t)this.$35t=
false;return a},isc.A.resizeBy=function(a,b,c,d,e,f){if(a!=null&&a!=0||b!=null&&b!=0)delete this.$35y;return this.invokeSuper(isc.Menu,"resizeBy",a,b,c,d,e,f)},isc.A.hideContextMenu=function(){this.hide()},isc.A.positionContextMenu=function(){this.$8h();var a=isc.EH.getLastEvent();this.placeNear(a.x,a.y)},isc.A.getItem=function(a){return isc.Class.getArrayItem(a,this.data,"name")},isc.A.setItemProperties=function(a,b){a=this.getItem(a);a!=null&&isc.addProperties(a,b);this.isVisible()&&this.redraw()},
isc.A.getItemNum=function(a){return isc.Class.getArrayItemIndex(a,this.data,"name")},isc.A.getItems=function(){return this.getData()},isc.A.addItem=function(a,b){if(b==null)b=this.data.getLength();this.data.addAt(a,b);this.markForRedraw()},isc.A.removeItem=function(a){this.data.remove(a);this.markForRedraw()},isc.A.changeSubmenu=function(){var a=this.getItem(this.body.lastOverRow);if(!(a&&this.$35p==a)){this.hideSubmenu();a!=null&&this.showSubmenu(a)}},isc.A.hasSubmenu=function(a){if(!a)return false;
if(a.submenu)return true;if(this.fetchSubmenus==false||a.fetchSubmenus==false)return false;if(isc.isA.Tree(this.$35k))return this.$35k.isFolder(a)&&(isc.ResultTree&&isc.isA.ResultTree(this.$35k)||this.$35k.hasChildren(a));return false},isc.A.showSubmenu=function(a){var b=this.getSubmenu(a);b&&this.placeSubmenu(a,b)},isc.A.getSubmenu=function(a){a=this.getItem(a);if(this.hasSubmenu(a)){var b=isc.applyMask(this,this.submenuInheritanceMask);if(!this.$51r){for(var c=[],d=0;d<this.fields.length;d++)c[d]=
isc.addProperties({},this.fields[d]);b.fields=c}if(this.cascadeAutoDismiss)b.autoDismiss=this.autoDismiss;if(c=a.submenu){if(!isc.isA.Menu(c)){if(!this.$352)this.$352=[];if(isc.isA.String(c))c=window[c];else if(isc.isAn.Array(c)){c=this.getMenuConstructor().create({autoDraw:false,data:c},b);this.$352.add(c)}else if(isc.isAn.Object(c)){c=this.getMenuConstructor().create(isc.addProperties({autoDraw:false},b,c));this.$352.add(c)}a.submenu=c}}else{d=this.$350||this;var e=d==this?0:this.$351;if(!d.$352)d.$352=
[];this.logDebug("RootMenu:"+d.getID()+", submenus:"+d.$352+", Level:"+e);c=d.$352[e];if(!c){isc.addProperties(b,{ID:d.getID()+"_childrenSubMenu_"+e,$350:d,$351:e+1,autoDraw:false,treeParentNode:this.$35k?a:null,masterMenu:this});c=(this.submenuConstructor||isc.Menu).create(b);d.$352[e]=c;d.observe(c,"destroy","observer.submenuDestroyed("+e+");")}}this.$35k&&c.setTreeNode(a);return c}},isc.A.submenuDestroyed=function(a){delete this.$352[a]},isc.A.placeSubmenu=function(a,b){this.$35p=a;this.$35s=b;
b.$8h();var c=this.getItemNum(a),d=b.getPeerRect();d=isc.Canvas.$t7(d[2],d[3],{left:this.getPageLeft()-this.submenuOffset,width:this.getVisibleWidth()+this.submenuOffset,top:this.body.getRowPageTop(c)},this.submenuDirection==this.$oz?this.$oz:this.$o1,false);b.setPageRect(d[0],d[1]);if(this.target!=this&&b.target!=b)b.target=this.target;b.show();b.$35q=this;b.$35r=c;isc.Menu.$353&&delete isc.Menu.$353[this.getID()]},isc.A.hideMenuTree=function(){this.hideSubmenu();this.hide()},isc.A.hideSubmenu=function(){if(this.$35s){this.$35s.hideSubmenu();
this.$35s.hide();delete this.$35s;delete this.$35p}},isc.A.getSubmenuImage=function(a){if(!this.hasSubmenu(a))return"&nbsp;";if(!this.$354){var b=this.submenuDirection==this.$oz,c=isc.addProperties({},this.submenuImage),d=isc.addProperties({},this.submenuDisabledImage);c.src=isc.Img.urlForState(c.src,null,null,b?this.$oz:null);d.src=isc.Img.urlForState(d.src,null,null,b?this.$oz:null);this.$354=this.imgHTML(c);this.$355=this.imgHTML(d)}return this.itemIsEnabled(a)?this.$354:this.$355},isc.A.itemIsEnabled=
function(a){return(a=this.getItem(a))&&a.enabled!=false&&a.isSeparator!=true},isc.A.$35o=function(){var a=isc.SB.create();this.enableIf&&a.append(this.enableIf,";");a.append("var menu=this;\r");for(var b=0;b<this.data.length;b++){var c=this.getItem(b);if(c){a.append("var item=this.data["+b+"];\r");if(c.enableIf)if(isc.isA.String(c.enableIf))a.append("changed|=this.$59g(",b,",",c.enableIf,");\r");else isc.isA.Function(c.enableIf)&&a.append("changed|=this.$59g(",b,",this.data[",b,"].enableIf(target,menu,item));\r");
if(c.checkIf)if(isc.isA.String(c.checkIf))a.append("changed|=this.$59h(",b,",",c.checkIf,");\r");else isc.isA.Function(c.checkIf)&&a.append("changed|=this.$59h(",b,",this.data[",b,"].checkIf(target,menu,item));\r");if(c.dynamicTitle)if(isc.isA.String(c.dynamicTitle))a.append("changed|=this.setItemTitle(",b,",",c.dynamicTitle,");\r");else isc.isA.Function(c.dynamicTitle)&&a.append("changed|=this.setItemTitle(",b,",this.data[",b,"].dynamicTitle(target,menu,item));\r");if(c.dynamicIcon)if(isc.isA.String(c.dynamicIcon))a.append("changed|=this.setItemIcon(",
b,",",c.dynamicIcon,");\r");else isc.isA.Function(c.dynamicIcon)&&a.append("changed|=this.setItemIcon(",b,",this.data[",b,"].dynamicIcon(target,menu,item));\r")}}b=a.toString();if(b!=""){a=isc.SB.create();a.append("var target=this.target, changed=false;\r",b,"if(changed&&this.isDrawn()){\r","this.redraw('dynamic item change');\r",isc.Browser.isIE?"this.body.setRowStyle(0);\r":"","}");this.addMethods({setDynamicItems:new Function(a.toString())});this.setDynamicItems.$796=this.data.duplicate()}},isc.A.$795=
function(){if(this.setDynamicItems==null||!this.setDynamicItems.$796.equals(this.data))this.$35o()},isc.A.refreshRow=function(){this.setDynamicItems&&this.setDynamicItems();return this.Super("refreshRow",arguments)},isc.A.$59g=function(a,b){return this.setItemEnabled(a,!!b)},isc.A.$59h=function(a,b){return this.setItemChecked(a,!!b)},isc.A.setItemEnabled=function(a,b){if(b==null)b=true;if(a=this.getItem(a)){if(a.enabled!=b){a.enabled=b;this.markForRedraw("itemEnabled");return true}return false}},
isc.A.setItemChecked=function(a,b){if(b==null)b=true;if(a=this.getItem(a)){if(a.checked!=b){a.checked=b;this.markForRedraw("itemChecked");return true}return false}},isc.A.setItemTitle=function(a,b){if(a=this.getItem(a)){if(a.title!=b){a.title=b;this.markForRedraw("item title change");return true}return false}},isc.A.setItemIcon=function(a,b,c){if(a=this.getItem(a)){if(a.icon!=b){a.icon=b;if(c)a.disabledIcon=c;this.markForRedraw("item icon change");return true}return false}},isc.A.getIcon=function(a){var b=
this.fixedIconWidth&&this.getRecordIndex(a)==0,c=b?this.iconWidth:null,d;if(a.icon){d=this.imgHTML(this.itemIsEnabled(a)||!a.disabledIcon?a.icon:a.disabledIcon,a.iconWidth?a.iconWidth:this.iconWidth,a.iconHeight?a.iconHeight:this.iconHeight);if(b&&(a.iconWidth==null||a.iconWidth>=c))b=false;else c-=a.iconWidth}if(a.checked){d=this.getCheckmarkImage(a);if(b){a=this.checkmarkImage?this.checkmarkImage.width:this.iconWidth;if(a<c)c-=a;else b=false}}if(b)return d?d+this.imgHTML("[SKIN]/../blank.gif",c,
1):this.imgHTML("[SKIN]/../blank.gif",c,1);return d||"&nbsp;"},isc.A.getItemTitle=function(a){return a=(a=this.$35k?this.$35k.getTitle(a):a.title||a.name||a.id)||"&nbsp;"},isc.A.getKeyTitle=function(a){if(a.keyTitle)return a.keyTitle;return"&nbsp;"},isc.A.getCheckmarkImage=function(a){if(!this.$356){this.$356=this.imgHTML(this.checkmarkImage);this.$357=this.imgHTML(this.checkmarkDisabledImage)}return this.itemIsEnabled(a)?this.$356:this.$357},isc.A.setUpKeyListening=function(){for(var a,b,c=this.data.length,
d=0;d<c;d++)if(a=this.getItem(d))if(b=a.keys){isc.isAn.Array(b)||(b=[b]);for(var e,f=0,g=b.length;f<g;f++){e=b[f];if(e!=null){isc.Page.registerKey(e,"target.menuKey("+d+");",this);if(!this.registeredKeys)this.registeredKeys=[];this.registeredKeys.add(e)}}a.keyTitle||this.setItemKeyTitle(a,b[0])}},isc.A.destroy=function(){if(this.registeredKeys)for(var a=0;a<this.registeredKeys.length;a++)isc.Page.unregisterKey(this.registeredKeys[a],this);this.$352&&this.$352.map("destroy");this.Super("destroy",arguments)},
isc.A.menuKey=function(a){this.setDynamicItems&&this.setDynamicItems();return this.selectMenuItem(a)},isc.A.setItemKeyTitle=function(a,b){var c;if(isc.isA.String(b))c=b;else if(isc.isAn.Object(b))c=b.title?b.title:b.keyName;a.keyTitle=c});isc.B._maxIndex=isc.C+70;isc.A=isc.Menu;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.hideAllMenus=function(a){var b=a=="itemClick";a=a=="outsideClick";var c=true;if(isc.Menu.$kc.length>0){var d=isc.Menu.$kc,
e=false,f,g=isc.EH.getFocusCanvas();isc.Menu.$kc=[];for(var h=d.length-1;h>=0;h--){var i=d[h];if(i.isVisible())if(b&&i.autoDismiss==false){isc.Menu.$kc.addAt(i,0);c=false}else if(a&&i.autoDismissOnBlur==false){isc.Menu.$kc.addAt(i,0);c=false}else{if(i.$sr(g)){if(f==null)f=i;e=true}i.hide()}}e&&isc.isA.Canvas(f.body.focusOnHide)&&f.body.focusOnHide.focus()}isc.Menu.$353={};if(c){if(isc.Menu.$35x){isc.EH.hideClickMask(isc.Menu.$35x);isc.Menu.$35x=null}}else isc.EH.clickMaskUp(isc.Menu.$35x)||this.$781();
if(isc.Menu.$358!=null){b=isc.Menu.$358;delete isc.Menu.$358;if(isc.EH.lastEvent.eventType==isc.EH.MOUSE_DOWN){b.$359=true;isc.Page.setEvent(isc.EH.CLICK,b,isc.Page.FIRE_ONCE,"$36a")}}},isc.A.$79j=function(){if(this.$kc==null||this.$kc.length==0)return[];for(var a=[],b=0;b<this.$kc.length;b++)this.$kc[b].autoDismissOnBlur!=false&&a.add(this.$kc[b]);return a},isc.A.$781=function(){if(isc.Menu.$79j().length>0&&(isc.Menu.$35x==null||!isc.EH.clickMaskUp(isc.Menu.$35x)))isc.Menu.$35x=isc.EH.showClickMask("isc.Menu.hideAllMenus('outsideClick')",
true)},isc.A.menuForValueMap=function(a,b){var c=[];if(isc.isA.String(a))a=this.getPrototype().getGlobalReference(a);if(isc.isAn.Array(a))for(var d=0;d<a.length;d++)c[d]={value:a[d],title:a[d]};else for(d in a)c.add({value:d,title:a[d]});d=isc.Menu.$36b;if(b==false||isc.Menu.$36b==null)d=isc.Menu.newInstance({autoDraw:false,itemClick:function(e){this.target.valueMapMenuSelected&&this.target.valueMapMenuSelected(e.value)}});if(b!=false&&isc.Menu.$36b==null)isc.Menu.$36b=d;d.setData(c);return d});isc.B._maxIndex=
isc.C+4;isc.Menu.registerStringMethods({itemClick:"item"});isc.A=isc.ListGrid.getPrototype();isc.A.showHeaderContextMenu=true;isc.A=isc.ListGrid.getPrototype();isc.A.showHeaderMenuButton=false;isc.$75j={title:"Show Menu",height:22,showMenuButtonImage:true,menuButtonImage:"[SKIN]menu_button.gif",menuButtonImageUp:"[SKIN]menu_button_up.gif",hiliteAccessKey:true,iconWidth:7,iconHeight:7,iconOrientation:"right",iconAlign:"right",align:"left",showMenuBelow:true,alignMenuLeft:true,menu:null,initWidget:function(a,
b,c,d){this.showMenuButtonImage&&this.$36c();return this.invokeSuper(isc.MenuButton,"initWidget",a,b,c,d)},autoDestroyMenu:true,destroy:function(a,b,c,d,e){if(this.menu!=null&&this.autoDestroyMenu&&this.menu.destroy!=null&&!this.menu.destroyed&&!this.menu.destroying){this.menu.destroy();this.menu=null}return this.invokeSuper(isc.MenuButton,"destroy",a,b,c,d,e)},setShowMenuButtonImage:function(a){if(a!=this.showMenuButtonImage){if(this.showMenuButtonImage=a)this.$36c();else this.icon=null;this.isDrawn()&&
this.markForRedraw()}},setShowMenuBelow:function(a){if(a!=this.showMenuBelow){this.showMenuBelow=a;if(this.showMenuButtonImage){this.$36c();this.isDrawn()&&this.markForRedraw()}}},$36c:function(){var a=this.showMenuBelow?this.menuButtonImage:this.menuButtonImageUp;if(isc.isAn.Object(a)){if(a.width)this.iconWidth=a.width;if(a.height)this.iconHeight=a.height;this.icon=a.src}else this.icon=a},handleClick:function(){if(this.Super("handleClick",arguments)!=false)this.$359||this.showMenu()},$36a:function(){if(this.$359){var a=
this;isc.Page.setEvent(isc.EH.IDLE,function(){a.$359=null},isc.Page.FIRE_ONCE)}},keyPress:function(){if(isc.EventHandler.lastEvent.keyName=="Arrow_Down"){this.showMenu();return false}return this.Super("keyPress",arguments)},$ur:function(){this.Super("$ur",arguments);this.markForRedraw()},showMenu:function(){if(isc.isA.String(this.menu))this.menu=window[this.menu];isc.isA.Menu(this.menu)||this.$36d(this.menu);if(isc.isA.Menu(this.menu)){isc.Menu.$358=this;var a=this.menu;a.$8h();var b=this.getPageLeft();
this.alignMenuLeft||(b-=a.getVisibleWidth()-this.getVisibleWidth());var c=this.showMenuBelow?this.getPageTop()+this.getVisibleHeight()+1:this.getPageTop()-a.getVisibleHeight()+2;a.placeNear(b,c);a.show(this.menuAnimationEffect)}},$36d:function(a){if(a){a.autoDraw=false;this.menu=(this.menuConstructor||isc.Menu).create(a)}}};isc.ClassFactory.defineClass("MenuButton","Button");isc.MenuButton.addProperties(isc.$75j);isc.A=isc.MenuButton.getPrototype();isc.A.skinImgDir="images/Menu/";isc.A.baseStyle=
"menuButton";isc.ClassFactory.defineClass("IMenuButton","StretchImgButton");isc.IMenuButton.addProperties(isc.$75j);isc.A=isc.IMenuButton.getPrototype();isc.A.labelSkinImgDir="images/Menu/";isc.defineClass("ToolStripMenuButton","IMenuButton");isc.A=isc.ToolStripMenuButton.getPrototype();isc.A.showTitle=true;isc.A.showRollOver=true;isc.A.showDown=true;isc.A.labelVPad=0;isc.A.labelHPad=7;isc.A.autoFit=true;isc.A.src="[SKIN]/ToolStrip/button/button.png";isc.A.capSize=3;isc.A.height=22;isc.ClassFactory.defineClass("SelectionTreeMenu",
"Menu");isc.A=isc.SelectionTreeMenu.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.itemClick=function(a){this.inheritedProperties.button.$21j(a)},isc.A.getBaseStyle=function(a){var b=this.inheritedProperties.button;if(b.$36e(a))return b.selectedBaseStyle;return this.Super("getBaseStyle",arguments)},isc.A.show=function(){if(this.body)for(var a=0;a<this.getTotalRows();a++)this.body.setRowStyle(a);return this.Super("show",arguments)},
isc.A.getItemTitle=function(a,b,c,d,e){var f=this.inheritedProperties.button;if(f.displayField)return a[f.displayField];return this.invokeSuper(isc.SelectionTreeMenu,"getItemTitle",a,b,c,d,e)});isc.B._maxIndex=isc.C+4;isc.ClassFactory.defineClass("TreeMenuButton","MenuButton");isc.ClassFactory.defineClass("ITreeMenuButton","IMenuButton");isc.$75k={title:null,unselectedTitle:"Choose a value",showPath:false,pathSeparatorString:"&nbsp;&gt;&nbsp;",selectedBaseStyle:"treeMenuSelected",overflow:isc.Canvas.VISIBLE,
menuConstructor:isc.SelectionTreeMenu,getTitle:function(){if(this.title)return this.title;var a=this.getSelectedItem();if(a)if(this.showPath){for(var b=this.getTree(),c=b.getParents(a),d=[],e=c.length-1;e>=0;e--)!b.showRoot&&e==c.length-1||d.add(this.menu.getItemTitle(c[e]));d.add(this.menu.getItemTitle(a));return d.join(this.pathSeparatorString)}else{isc.isA.Menu(this.menu)||this.$36d(this.menu);return this.menu.getItemTitle(a)}else return this.unselectedTitle},$36d:function(a){a=isc.addProperties(this.menuDefaults||
{},a,{inheritedProperties:{button:this},canSelectParentItems:this.canSelectParentItems,submenuConstructor:isc.SelectionTreeMenu,dataSource:this.dataSource,data:this.data});if(this.emptyMenuMessage)a.emptyMessage=this.emptyMenuMessage;if(this.loadDataOnDemand!=null)a.loadDataOnDemand=this.loadDataOnDemand;a=this.Super("$36d",[a]);this.observe(this.menu,"treeDataLoaded","observer.$21l()");return a},$21l:function(){this.treeDataLoaded&&this.treeDataLoaded()},getTree:function(){isc.isA.Menu(this.menu)||
this.$36d(this.menu);return this.menu.$35k},$21j:function(a){this.itemSelected&&this.itemSelected(a,this.$36f)==false||this.setSelectedItem(a)},setSelectedItem:function(a){this.$36f=a;this.setTitle()},getSelectedItem:function(){return this.$36f},$36e:function(a){for(var b=this.getSelectedItem(),c=this.getTree();b;){if(a==b)return true;b=c.getParent(b)}return false}};isc.TreeMenuButton.addProperties(isc.$75k);isc.ITreeMenuButton.addProperties(isc.$75k);isc.TreeMenuButton.registerStringMethods({itemSelected:"item, oldItem"});
isc.ITreeMenuButton.registerStringMethods({itemSelected:"item, oldItem"});isc.ClassFactory.defineClass("TileLayout","Canvas");isc.A=isc.TileLayout.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.layoutPolicy="fit";isc.A.tileSize=50;isc.A.tileMargin=10;isc.A.layoutMargin=5;isc.A.paddingAsLayoutMargin=true;isc.A.animateTileChange=true;isc.A.orientation="horizontal";isc.A.overflow="auto";isc.A.canFocus=true;isc.A.expandMargins=true;isc.A.autoWrapLines=
true;isc.A.dragLineDefaults={overflow:"hidden",styleName:"layoutDropLine"};isc.A.$66i=true;isc.A.relayoutProperties=["tilesPerLine","orientation","tileWidth","tileHeight","expandMargins"];isc.A.canDrop=true;isc.A.$66e=2;isc.B.push(isc.A.initWidget=function(){this.$73g();this.invokeSuper(isc.TileLayout,"initWidget");if(!this.tiles)this.tiles=[];this.data=this.tiles},isc.A.draw=function(a,b,c,d){this.invokeSuper(isc.TileLayout,"draw",a,b,c,d);this.$73k();this.logDebug("calling layoutTiles from draw",
"TileLayout");this.layoutTiles()},isc.A.resized=function(){this.Super("resized",arguments);this.logDebug("calling layoutTiles from resized","TileLayout");this.layoutTiles()},isc.A.childResized=function(a,b,c,d){this.invokeSuper(isc.TileLayout,"childResized",a,b,c,d);this.logDebug("calling layoutTiles from childResized","TileLayout");isc.Timer.setTimeout(this.ID+".layoutTiles()",100)},isc.A.$73g=function(){if(this.layoutPolicy!="fit"&&this.layoutPolicy!="flow")this.layoutPolicy="fit"},isc.A.willScroll=
function(){var a=this.orientation=="horizontal",b=this.$td,c=this.$te,d=this.$tb,e=this.$tc,f,g;if(this.$66i){g=this.getUserVisibleTiles();f=g.getLength()}else f=this.getLength();if(this.layoutPolicy=="flow"){if(this.overflow!="auto"&&this.overflow!="scroll")return false;e=a?this.getInnerWidth()-e:this.getInnerHeight()-c;c=a?this.getInnerHeight()-c:this.getInnerWidth()-d;for(var h=a?d:b,i=a?b:d,j=0,k=0,l=a?this.getTileHMargin():this.getTileVMargin(),m=a?this.getTileVMargin():this.getTileHMargin(),
n=0;n<f;n++){var o=g?g[n]:this.getTile(n);if(!this.autoWrapLines&&o.startLine)h=0;var s=a?o.getVisibleWidth():o.getVisibleHeight();if(this.autoWrapLines&&h+s>e||!this.autoWrapLines&&o.endLine){h=a?d:b;i+=j+m;j=0;k++}o=a?o.getVisibleHeight():o.getVisibleWidth();if(i+o>c)return true;if(j<o)j=o;h+=s+l}return false}else{c=a?this.getVisibleHeight()-(b+c):this.getVisibleWidth()-(e+d);o=a?this.getTileHeight():this.getTileWidth();m=a?this.getTileVMargin():this.getTileHMargin();a=this.getTilesPerLine();return f>
a*Math.floor(c/(o+m))}},isc.A.layoutTiles=function(){if(!(!this.isDrawn()||this.getLength()==0)){this.$585=[];this.$608=0;this.$619=[this.getScrollLeft(),this.getScrollTop(),this.getInnerWidth(),this.getInnerHeight()];var a,b,c,d;if(this.paddingAsLayoutMargin){b=this.$tq();c=b.left;d=b.right;a=b.top;b=b.bottom}a=this.$td=this.$du(this.layoutMargin,a,0);var e=this.$te=this.$du(this.layoutMargin,b,0);c=this.$tb=this.$du(this.layoutMargin,c,0);var f=this.$tc=this.$du(this.layoutMargin,d,0),g,h;if(this.$66i){h=
this.getUserVisibleTiles();g=h.getLength()}else g=this.getLength();if(this.layoutPolicy=="flow"){this.logDebug("starting flow layout","TileLayout");var i=(d=this.orientation=="horizontal")?this.getInnerWidth()-f:this.getInnerHeight()-e;if(this.willScroll())i-=this.getScrollbarSize();var j=d?c:a,k=d?a:c,l=0,m=0,n=d?this.getTileHMargin():this.getTileVMargin(),o=d?this.getTileVMargin():this.getTileHMargin();for(b=0;b<g;b++){var s=h?h[b]:this.getTile(b);if(!this.autoWrapLines&&s.startLine)j=0;var r=d?
s.getVisibleWidth():s.getVisibleHeight();if(this.autoWrapLines&&j+r>i||!this.autoWrapLines&&s.endLine){j=d?c:a;k+=l+(b==0?0:o);l=0;m++}var t=d?k:j;e=d?j:k;f=h?h[b]:b;this.processTile(f,t,e);t=d?s.getVisibleHeight():s.getVisibleWidth();if(l<t)l=t;j+=r+n}}else{this.logDebug("starting fit layout:"+this.$35v,"TileLayout");i=this.getTilesPerLine();j=this.getTileHeight();k=this.getTileWidth();d=this.orientation=="horizontal";if(this.shouldUseIncrRendering()){this.logDebug("fit layout, using incremental rendering",
"TileLayout");this.$57r=t=this.getVisibleTiles();m=t[0];l=g;n=this.getVisibleLines();b=n[0];n=n[0]+n[1];if(!this.hasAllVisibleTiles(t,true))return}else{this.logDebug("fit layout, rendering all tiles","TileLayout");l=g;b=m=0;n=Math.ceil(l/i);this.getTileHMargin();this.getTileVMargin()}r=Math.ceil(g/i);o=this.getTileVMargin();g=this.getTileHMargin();t=d?j:k;s=d?o:g;e=(t+s)*r-s+(d?a+e:c+f);t=this.$58t();d?t.setHeight(e):t.setWidth(e);t.sendToBack();r=this.getExtraMarginPixels(i,j,k,g,o);for(b=b;b<n;b++){for(s=
0;s<i;s++){t=d?b:s;e=d?s:b;t=t*j+t*o+a;if(!d&&s+1<=r)t+=s+1;e=e*k+e*g+c;if(d&&s+1<=r)e+=s+1;f=h?h[m]:m;this.processTile(f,t,e,this.getTileHeight(),this.getTileWidth());m++;if(m>=l)break}if(m>=l)break}}}},isc.A.hasAllVisibleTiles=function(){return true},isc.A.getUserVisibleTiles=function(){for(var a=[],b=0;b<this.getLength();b++){var c=this.getTile(b);c.$66j||a.add(c)}return a},isc.A.processTile=function(a,b,c,d,e){if(this.$35v){if(a=isc.isA.Canvas(a)?a:this.getRecordTile(a))if(!(this.$584!=null&&
this.$584.findIndex("ID",a.ID)==-1))if(a){d&&a.setHeight(d);e&&a.setWidth(e);if(a.getTop()!=b||a.getLeft()!=c){a.$589=b;a.$588=c;this.$586.add(a)}b=[c,b,a.getVisibleWidth(),a.getVisibleHeight()];isc.Canvas.rectsIntersect(this.$619,b)&&this.$585.add(a)}}else if(a=isc.isA.Canvas(a)?a:this.getTile(a)){a.isDirty()&&a.redraw();d&&a.setHeight(d);e&&a.setWidth(e);a.setTop(b);a.setLeft(c);this.addChild(a);a.$66k=true;a.show();a.$66k=null;b=[a.getLeft(),a.getTop(),a.getVisibleWidth(),a.getVisibleHeight()];
isc.Canvas.rectsIntersect(this.$619,b)&&this.$585.add(a);this.$608+=1;return a}},isc.A.$58t=function(){if(!this.$58u){this.$58u=isc.Canvas.create({autoDraw:false});this.addChild(this.$58u)}return this.$58u},isc.A.getDrawnStartIndex=function(){return this.$57r?this.$57r[0]:null},isc.A.getDrawnEndIndex=function(){return this.$57r?this.$57r[1]:null},isc.A.shouldUseIncrRendering=function(){return this.$35v?true:!this.showAllRecords&&this.layoutPolicy=="fit"&&(this.overflow=="auto"||this.overflow=="hidden")?
true:false},isc.A.getLength=function(){return this.tiles?this.tiles.getLength():0},isc.A.getTilesPerLine=function(){if(this.tilesPerLine)return this.tilesPerLine;else{var a=this.orientation=="horizontal"?this.getTileWidth():this.getTileHeight(),b=this.orientation=="horizontal"?this.tileHMargin||this.tileMargin:this.tileVMargin||this.tileMargin,c=this.orientation=="horizontal"?this.getInnerWidth():this.getInnerHeight(),d=Math.floor(c/a);b=b*(d-1)+d*a+(this.orientation=="horizontal"?this.$tb+this.$tc:
this.$td+this.$te);if(b>c)d-=Math.ceil((b-c)/a);if(d<1)d=1;return d}},isc.A.$73k=function(){var a=this.orientation=="horizontal";if(!(this.layoutPolicy!="fit"||this.expandMargins||!this.tilesPerLine||a&&this.tileWidth||!a&&this.tileHeight)){var b=a?this.tileHMargin||this.tileMargin:this.tileVMargin||this.tileMargin;a=a?this.getInnerWidth():this.getInnerHeight();var c=a-this.layoutMargin*2;if(this.tilesPerLine){c=Math.floor(c/this.tilesPerLine);c-=b;isc.logWarn("setTileSize:"+[c,a,this.layoutMargin]);
if(this.orientation=="horizontal")this.tileWidth=c;else this.tileHeight=c}else this.tileSize=50}},isc.A.getVisibleLines=function(){var a=this.orientation=="horizontal",b=a?this.getScrollTop():this.getScrollLeft(),c=a?this.getTileHeight()+this.getTileVMargin():this.getTileWidth()+this.getTileHMargin();a=a?this.getInnerHeight():this.getInnerWidth();b=Math.floor(b/c);b>0&&b--;return[b,Math.ceil(a/c)+2]},isc.A.getVisibleTiles=function(){var a=this.getVisibleLines(),b=this.getTilesPerLine();return[a[0]*
b,(a[0]+a[1])*b]},isc.A.scrolled=function(){if(this.shouldUseIncrRendering()){this.$57s&&isc.Timer.clear(this.$57s);this.$57s=isc.Timer.setTimeout(this.ID+".layoutAfterScroll()")}},isc.A.layoutAfterScroll=function(){this.logDebug("layoutAfterScroll","TileLayout");if(this.shouldLayoutTiles()){this.logDebug("calling layoutTiles from layoutAfterScroll","TileLayout");this.layoutTiles()}},isc.A.shouldLayoutTiles=function(){var a=this.getVisibleTiles();return a[0]==this.getDrawnStartIndex()&&a[1]==this.getDrawnEndIndex()?
false:true},isc.A.getTileWidth=function(){if(this.tileWidth){if(isc.isA.String(this.tileWidth)){this.tileWidth=parseInt(this.tileWidth);if(!isc.isA.Number(this.tileWidth))this.tileWidth=this.tileSize}return this.tileWidth}else return this.tileSize},isc.A.getTileHeight=function(){if(this.tileHeight){if(isc.isA.String(this.tileHeight)){this.tileHeight=parseInt(this.tileHeight);if(!isc.isA.Number(this.tileHeight))this.tileHeight=this.tileSize}return this.tileHeight}else return this.tileSize},isc.A.getInnerBreadth=
function(){return this.orientation=="horizontal"?this.getInnerWidth():this.getInnerHeight()},isc.A.getTileHMargin=function(){var a;a=this.tileHMargin?this.tileHMargin:this.tileMargin;if(this.layoutPolicy=="fit"&&this.expandMargins&&this.orientation=="horizontal"){var b=this.getTilesPerLine(),c=this.$tb+this.$tc,d=b-1;if(d==0)d=1;b=Math.floor((this.getInnerBreadth()-b*this.getTileWidth()-c)/d);return b<a?a:b}else return a},isc.A.getTileVMargin=function(){var a;a=this.tileHMargin?this.tileVMargin:this.tileMargin;
if(this.layoutPolicy=="fit"&&this.expandMargins&&this.orientation=="vertical"){var b=this.getTilesPerLine(),c=this.$td+this.$te,d=b-1;if(d==0)d=1;b=Math.floor((this.getInnerBreadth()-b*this.getTileHeight()-c)/d);return b<a?a:b}else return a},isc.A.getExtraMarginPixels=function(a,b,c,d,e){if(this.expandMargins&&this.orientation=="horizontal"){a=a*c+(a-1)*d+(this.$tb+this.$tc);return this.getInnerBreadth()-a}else if(this.expandMargins&&this.orientation=="vertical"){a=a*b+(a-1)*e+(this.$td+this.$te);
return this.getInnerBreadth()-a}else return 0},isc.A.getTile=function(a){return isc.Class.getArrayItem(a,this.tiles)},isc.A.addTile=function(a,b){if(this.tiles){b||(b=this.tiles.getLength());this.tiles.addAt(a,b);this.reLayout()}},isc.A.removeTile=function(a){if(this.tiles){if(!isc.isA.Canvas(a)){var b=this.tiles.findIndex("ID",a);a=b==-1?this.tiles.get(a):this.tiles.get(b)}this.removeChild(a)}},isc.A.removeChild=function(a,b){var c=this.tiles.findIndex("ID",a.ID);c>-1&&this.tiles.removeAt(c);this.invokeSuper(isc.TileLayout,
"removeChild",a,b);this.reLayout()},isc.A.getRecordTile=function(a){if(a==null)return null;return this.tiles.get(a)},isc.A.childVisibilityChanged=function(a,b){if(!this.$35v&&!a.$66l){a.$66j=b=="hidden"?true:null;this.reLayout()}},isc.A.propertyChanged=function(a,b){this.invokeSuper(isc.TileLayout,"propertyChanged",a,b);if(isc.endsWith(a,"Margin")||this.relayoutProperties.contains(a))this.layoutTiles()},isc.A.showDragLineForRecord=function(){if(isc.isAn.Array(this.data)||isc.isA.ResultSet(this.data)){var a=
this.getOffsetX(),b=this.getOffsetY(),c=this.getPageLeft(),d=this.getPageTop();if(this.data.getLength()!=0){var e=this.findIndexForCoord(a,b);if(this.$66f==null)this.$66f=e;var f=this.getRecordTile(e);if(f!=null)if(this.orientation=="horizontal"&&a>f.getLeft()+f.getVisibleWidth()/2||this.orientation=="vertical"&&b>f.getTop()+f.getVisibleHeight()/2){e++;f=this.getRecordTile(e)}if(e==null||f==null){e=this.data.getLength();f=this.getRecordTile(e-1);if(this.orientation=="horizontal"){a=f.getLeft()+f.getVisibleWidth()-
this.$66e;b=f.getTop()}else{a=f.getLeft();b=f.getTop()+f.getVisibleHeight()-this.$66e}}else{a=f.getLeft();b=f.getTop()}this.$610=e;if(this.orientation=="horizontal"){f=f.getVisibleHeight();e=this.$66e}else{e=f.getVisibleWidth();f=this.$66e}this.showDragLine(c+(a-this.getScrollLeft()),d+(b-this.getScrollTop()),e,f)}}},isc.A.showDragLine=function(a,b,c,d){this.makeDragLine();var e=this.getVisibleHeight(),f=Math.round((e-this.getInnerHeight())/2),g=this.getPageTop(),h=g+f;e=g+e-f;if(b<h){d-=h-b;b=h}else if(b+
d>e)if(b>=e)d=0;else d-=b+d-e;this._dragLine.moveTo(a,b);this._dragLine.resizeTo(c,d);this._dragLine.show()},isc.A.dropOut=function(){this.hideDragLine()},isc.A.dropMove=function(){this.showDragLineForRecord()},isc.A.findIndexForCoord=function(a,b){var c=this.getDrawnStartIndex(),d=this.getDrawnEndIndex();if(c==null||d==null){c=0;d=this.data.getLength()}var e=this.ns.EH.dragTarget,f;if(e)f=e.ID;for(c=c;c<d;c++)if(e=this.getRecordTile(c))if(e.ID!=f)if(e.getLeft()+e.getVisibleWidth()>a&&e.getTop()+
e.getVisibleHeight()>b)return c;return null},isc.A.drop=function(){var a=this.$610||0,b=this.ns.EH.dragTarget;this.$66f=null;isc.isAn.Array(b)||(b=[b]);var c=b[0].parentElement,d=this.data.get(a);this.transferRecords(b,d,a,c);this.reLayout()},isc.A.reLayout=function(){if(!this.destroying)if(this.animateTileChange)isc.Timer.setTimeout(this.ID+".$583()",200);else{this.logDebug("calling layoutTiles from reLayout","TileLayout");this.layoutTiles()}},isc.A.$583=function(){this.logDebug("starting $583()",
"TileLayout");this.$35v=true;this.$0j=[];var a=this.$584=this.$585;this.$586=[];this.layoutTiles();if(a!=null)for(var b=0;b<a.length;b++)this.$585.contains(a[b])||a[b].hide();a=this.$586.length;if(a==0)this.$587();else for(b=0;b<a;b++){var c=this.$586[b];c.show();this.$0j.add({ID:b==a-1?c.animateMove(c.$588,c.$589,this.getID()+".$587()"):c.animateMove(c.$588,c.$589),tile:c})}},isc.A.$587=function(){this.$35v=false;this.$584=null;delete this.$584;this.$586=null;delete this.$586;this.logDebug("calling layoutTiles from $587",
"TileLayout");this.layoutTiles()},isc.A.setTileSize=function(a){this.tileSize=a;this.layoutTiles()},isc.A.setTileWidth=function(a){this.tileWidth=a;this.layoutTiles()},isc.A.setTileHeight=function(a){this.tileHeight=a;this.layoutTiles()},isc.A.setTileMargin=function(a){this.tileMargin=a;this.layoutTiles()},isc.A.setTileHMargin=function(a){this.tileHMargin=a;this.layoutTiles()},isc.A.setTileVMargin=function(a){this.tileVMargin=a;this.layoutTiles()});isc.B._maxIndex=isc.C+50;isc.ClassFactory.defineClass("FlowLayout",
"TileLayout");isc.A=isc.FlowLayout.getPrototype();isc.A.layoutPolicy="flow";isc.ClassFactory.defineClass("TileGrid","TileLayout","DataBoundComponent");isc.A=isc.TileGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.tileValueStyle="tileValue";isc.A.valuesShowRollOver=false;isc.A.valuesShowSelected=true;isc.A.valuesShowDown=false;isc.A.tileValueAlign="center";isc.A.showLabels=false;isc.A.tileLabelStyle="tileLabel";isc.A.wrapValues=false;
isc.A.canSortFields=true;isc.A.autoFetchTextMatchStyle="substring";isc.A.selectionType=isc.Selection.MULTIPLE;isc.A.tileConstructor="SimpleTile";isc.A.detailViewerConstructor="DetailViewer";isc.A.recycleTiles=true;isc.A.animateTileChange=true;isc.A.styleName="tileGrid";isc.A.$66i=false;isc.A.$726=[];isc.A.$727=10;isc.A.$20s="Arrow_Up";isc.A.$20t="Arrow_Down";isc.A.$60n="Arrow_Left";isc.A.$60o="Arrow_Right";isc.A.dragAppearance=isc.EH.TRACKER;isc.A.dragTrackerMode="title";isc.A.tileDragAppearance=
isc.EH.TRACKER;isc.B.push(isc.A.initWidget=function(){this.$73g();if(isc.FormulaBuilder==null)this.canAddFormulaFields=false;if(isc.SummaryBuilder==null)this.canAddSummaryFields=false;this.layoutPolicy=="flow"&&isc.logWarn("TileGrid does not support layoutPolicy 'flow'; there may by unexpected behavior.Use a TileLayout instead for flow layout.");this.$31i();this.invokeSuper(isc.TileLayout,"initWidget");if(!this.tiles)this.tiles=[];if(this.showAllRecords)this.recycleTiles=false;if(this.getDataSource()){this.$601=
{};if(this.getDataSource().getPrimaryKeyFieldNames().length==0)this.animateTileChange=false}this.detailViewer=this.createAutoChild("detailViewer",{tileGrid:this,showLabel:this.showLabels,showBorder:false,cellStyle:this.tileValueStyle,labelStyle:this.tileLabelStyle,blockStyle:"normal",wrapValues:this.wrapValues,cellPadding:0,valueAlign:this.tileValueAlign,useInnerWidth:false,clipValues:true,width:10,height:10,data:[],dataSource:this.getDataSource(),getCellStyle:function(a,b){var c=b.cellStyle||this.cellStyle;
if(this.tileGrid.valuesShowRollOver&&this.currentTile.state==isc.StatefulCanvas.STATE_OVER)c+=this.currentTile.getStateSuffix();else if(this.tileGrid.valuesShowDown&&this.currentTile.state==isc.StatefulCanvas.STATE_DOWN)c+=this.currentTile.getStateSuffix();else if(this.tileGrid.valuesShowSelected&&this.currentTile.isSelected())c+=this.currentTile.getStateSuffix();return c}});this.fieldState!=null?this.setFieldState(this.fieldState):this.setFields(this.fields,true);this.membersMargin=this.tileMargin;
this.setData(this.data)},isc.A.setDataSource=function(){this.Super("setDataSource",arguments);if(this.getDataSource()){this.$601={};if(this.getDataSource().getPrimaryKeyFieldNames().length==0)this.animateTileChange=false}},isc.A.shouldUseField=function(a,b){if(this.Super("shouldUseField",arguments))return true;if(b){var c=isc.DS.get(b).getIconField();if(a==c||a.name==c||c&&a.name==c.name)return true}return false},isc.A.setFields=function(a,b){if(!a&&this.getDataSource()){var c=this.getDataSource().getIconField();
if(c){a=[];a.add({name:c,type:c.type});a.add({name:this.getDataSource().getTitleField()})}}if(this.completeFields==null)this.fields=[];this.completeFields=this.bindToDataSource(a);if(this.completeFields==null)this.completeFields=[];if(this.completeFields){this.deriveVisibleFields();this.detailViewer.fields=this.completeFields.duplicate();if(!b){this.logDebug("calling layoutTiles from setFields","TileGrid");this.layoutTiles()}}},isc.A.deriveVisibleFields=function(){this.fields.setArray(this.getVisibleFields(this.completeFields))},
isc.A.getVisibleFields=function(a){for(var b=a.duplicate(),c=0;c<a.length;c++){var d=a.get(c);if(!this.fieldShouldBeVisible(d)||d.visible==false)b.remove(d)}return b},isc.A.computeTileDimensions=function(a){if(!((this.tileHeight&&this.tileWidth||this.tileSize)&&!a))if(isc.ResultSet&&isc.isA.ResultSet(this.data)&&this.data.resultSize>=this.data.getLength()||isc.isAn.Array(this.data))if(this.layoutPolicy=="fit"){var b=a=0;this.detailViewer.clipValues=false;for(var c=0;c<this.data.getLength();c++){var d=
this.getTile(c),e=d.overflow;d.setOverflow("visible");d.redraw();d.show();var f=d.getVisibleHeight(),g=d.getVisibleWidth();if(f>a)a=f;if(g>b)b=g;d.setOverflow(e);d.hide()}this.detailViewer.clipValues=true;if(!this.tileHeight&&a>0)this.tileHeight=a;if(!this.tileWidth&&b>0)this.tileWidth=b}},isc.A.getTileID=function(a){if(!a)return null;var b=this.getDataSource();if(b&&b.getPrimaryKeyFieldNames().length>0){b=b.getPrimaryKeyFields();var c="",d;for(d in b)c+=a[d];return this.$601[c]}else return a.$57v},
isc.A.setTileID=function(a,b){var c=this.getDataSource();if(c&&c.getPrimaryKeyFieldNames().length>0){c=c.getPrimaryKeyFields();var d="",e;for(e in c)d+=a[e];this.$601[d]=b}else a.$57v=b},isc.A.getTileRecord=function(a){var b=this.data,c,d;if(isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown())return null;if(this.showAllRecords||!this.getDrawnStartIndex()||!this.getDrawnEndIndex()){c=0;d=b.getLength()}else{c=this.getDrawnStartIndex();d=this.getDrawnEndIndex()+1;if(d>b.getLength())d=b.getLength()}for(c=
c;c<d;c++){var e=b.get(c);if(this.getTileID(e)==a.ID)return e}return null},isc.A.setTileRecord=function(){return null},isc.A.setData=function(a){if(this.$35v)return false;if(a){if(this.data){this.ignore(this.data,"dataChanged");this.ignore(this.data,"dataArrived")}if(a)this.data=a;if(this.data){if(this.data)if(isc.ResultSet&&isc.isA.ResultSet(this.data)){this.observe(this.data,"dataArrived","observer.dataArrived(arguments[0],arguments[1])");this.observe(this.data,"dataChanged","observer.dataChanged(operationType, originalRecord, rowNum, updateData)")}else this.observe(this.data,
"dataChanged","observer.dataChanged()");if(!this.selection||this.data!=this.selection.data)this.createSelectionModel();this.dataChanged()}}},isc.A.getData=function(){return this.data},isc.A.getPrimaryKeys=function(a){var b=this.data;if(!isc.ResultSet||!isc.isA.ResultSet(b))return a;b=this.getDataSource().getPrimaryKeyFieldNames();var c={};isc.isAn.Array(b)||(b=[b]);for(var d=0;d<b.length;d++)c[b[d]]=a[b[d]];return c},isc.A.setRecordValues=function(a,b){if(this.data){var c=this.data.indexOf(a);if(c!=
-1){var d=this.data.get(c);isc.combineObjects(d,b);this.valuesManager!=null&&this.valuesManager.$71e(c,null,d,this);this.logDebug("calling layoutTiles from setRecordValues","TileGrid");this.layoutTiles()}}},isc.A.dataArrived=function(){},isc.A.dataChanged=function(a){if(!this.data||isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown())this.logDebug("dataChanged: returning due to no data yet","TileGrid");else{this.computeTileDimensions();if(!this.$257)this.$257=0;if(a=="add"){this.logDebug("add",
"TileGrid");this.layoutTiles()}else if(a=="remove"){this.logDebug("remove","TileGrid");if(this.recycleTiles&&this.data.getLength()<this.getDrawnEndIndex()-this.getDrawnStartIndex()+1||!this.recycleTiles)this.tiles.removeAt(this.tiles.getLength()-1).destroy();this.layoutTiles()}else if(a=="update"){this.logDebug("update","TileGrid");this.layoutTiles()}else if(this.data.getLength()>=this.$257){this.logDebug("filter or sort, new data same or longer","TileGrid");this.$257>0?this.$582():this.layoutTiles()}else{this.logDebug("filter or sort, new data shorter",
"TileGrid");this.selection.deselectAll();a=this.getDrawnEndIndex()+1;var b=a>this.data.getLength()?this.data.getLength():a,c=this.getTilesPerLine();if(Math.floor(a/c)>Math.floor(b/c)&&this.getScrollTop()!=0&&this.recycleTiles){this.scrollToTop();this.layoutTiles()}else this.$582()}this.$257=this.data.getLength();this.data.getLength()==0&&this.cleanupExtraTiles(0)}},isc.A.$582=function(){if(!this.destroying)if(this.animateTileChange)if(this.$35v)for(var a=this.$0j,b=0;b<a.length;b++){this.finishAnimation(a[b].ID);
a[b].tile.hide()}else this.fireOnPause("tileGridAnimate",this.$583);else{this.logDebug("calling layoutTiles from layoutAfterDataChange","TileGrid");this.layoutTiles()}},isc.A.cleanupExtraTiles=function(a){var b=this.tiles;for(a=a;a<b.length;a++){var c=b[a];c.hide();c.moveTo(0,0)}},isc.A.destroy=function(){if(this.data){this.ignore(this.data,"dataChanged");this.ignore(this.data,"dataArrived");this.data.$31k&&isc.isA.Function(this.data.destroy)&&this.data.destroy()}this.Super("destroy",arguments)},
isc.A.$57t=function(a){return this.ID+"_tile_"+a},isc.A.getLength=function(){return!this.data||isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown()?0:this.data.getLength()},isc.A.makeTile=function(a,b){var c={ID:this.$57t(b),tileNum:b,canHover:true,handleHover:function(){this.creator.itemHover&&this.creator.fireCallback("itemHover","item",[this])},mouseDown:function(){this.creator.$673(this);this.creator.focus()},rightMouseDown:function(){this.creator.$673(this);this.creator.focus()},
mouseUp:function(){this.creator.$674(this)},doubleClick:function(){return this.creator.recordDoubleClick(this.creator,this,this.creator.getTileRecord(this))}};a.tileProperties&&isc.addProperties(c,a.tileProperties);c=this.createAutoChild("tile",c,a.tileConstructor?a.tileConstructor:this.tileConstructor);this.detailViewer.setWidth(c.getInnerWidth());this.detailViewer.setHeight(c.getInnerHeight());return c},isc.A.getTileHTML=function(a){return this.detailViewer.getBlockHTML([a])},isc.A.getTile=function(a){var b,
c,d;if(isc.isAn.Object(a)){c=a;d=this.data.indexOf(a);b=this.getTileID(a)}else{c=this.data.get(a);if(!c)return null;b=this.$57t(a);d=a}b||(b=this.$57t(d));if(this.canReclaimTile(d)&&!c.tileConstructor){d=this.$57w(d);d.redraw();this.selection.isSelected(c)?d.setSelected(true):d.setSelected(false);return d}else if(b&&window[b]){d=this.$57w(d,window[b]);d.redraw();this.selection.isSelected(c)?d.setSelected(true):d.setSelected(false);return d}else{a=this.$57t(d);this.setTileID(c,a);c=this.makeTile(c,
d);if(!this.tiles)this.tiles=[];this.tiles.add(c);return c}},isc.A.$728=function(){this.$726=[]},isc.A.$729=function(a,b){this.$726.find("key",b)||this.$726.add({key:b,logs:this.$727});if(this.$726.find("key",b).logs>0){isc.logWarn(a);this.$726.find("key",b).logs-=1}},isc.A.layoutTiles=function(){this.computeTileDimensions();this.invokeSuper(isc.TileGrid,"layoutTiles");var a=this.tiles?this.tiles.length:0,b=this.$608;!this.$35v&&b<a&&this.cleanupExtraTiles(b)},isc.A.$57w=function(a,b){var c=this.data.get(a),
d;d=b?b:this.tiles[a-this.getDrawnStartIndex()];var e=this.getTileRecord(d);e&&this.setTileID(e,null);this.setTileID(c,d.ID);d.tileNum=a;return d},isc.A.canReclaimTile=function(a){var b=this.getDrawnStartIndex()||0;return this.recycleTiles&&this.tiles&&this.tiles.length>a-b?true:false},isc.A.$673=function(a){var b=this.getTileRecord(a);b&&this.selection.selectOnMouseDown(this,a.tileNum);this.recordClick(this,a,b);var c,d;if(a.getTop()<this.getScrollTop())d="top";else if(a.getTop()+a.getVisibleHeight()>
this.getScrollTop()+this.getInnerHeight())d="bottom";if(a.getLeft()<this.getScrollLeft())c="left";else if(a.getLeft()+a.getVisibleWidth()>this.getScrollLeft()+this.getInnerWidth())c="right";if(c||d)this.scrollIntoView(a.getLeft(),a.getTop(),a.getVisibleWidth(),a.getVisibleHeight(),c,d,true)},isc.A.$674=function(a){this.selection.selectOnMouseUp(this,a.tileNum)},isc.A.recordClick=function(){return true},isc.A.recordDoubleClick=function(){return true},isc.A.selectionChange=function(a,b){if(this.selectionChanged&&
this.selectionChanged(a,b)==false)return false;var c=window[this.getTileID(this.selection.lastSelectionItem)];c&&c.setSelected&&c.setSelected(b)},isc.A.keyPress=function(a){if(this.isAnimating("scroll"))return false;var b=this.selection.lastSelectionItem;if(b){a=a.keyName;b=this.selection.data.indexOf(b);var c=this.orientation=="horizontal";if(a==this.$20s)a=c?this.$60p(b,"above"):b-1;else if(a==this.$20t)a=c?this.$60p(b,"below"):b+1;else if(a==this.$60n)a=c?b-1:this.$60p(b,"above");else if(a==this.$60o)a=
c?b+1:this.$60p(b,"below");else return;if(!(a==-1||a>this.data.getLength()-1)){if(a==null)return false;a=this.selection.data.get(a);(a=window[this.getTileID(a)])&&this.$673(a);return false}}},isc.A.$60p=function(a,b){for(var c=this.selection.data,d=a,e=window[this.getTileID(c.get(d))],f=this.orientation=="horizontal",g=f?e.getTop():e.getLeft(),h=f?e.getLeft():e.getTop(),i=f?e.getVisibleWidth():e.getVisibleHeight(),j=e;g==(f?j.getTop():j.getLeft());){d=b=="above"?d-1:d+1;if(d<0||d>c.getLength()-1)return-1;
j=window[this.getTileID(c.get(d))];if(!j)return-1}g=f?j.getTop():j.getLeft();e=-1;for(var k=0;(f?j.getTop():j.getLeft())==g;){var l=f?j.getLeft():j.getTop();j=f?j.getVisibleWidth():j.getVisibleHeight();j=this.$60q([h,h+i],[l,l+j]);if(j>k){e=d;k=j}d=b=="above"?d-1:d+1;if(d<0||d>c.getLength()-1)break;j=window[this.getTileID(c.get(d))];if(!j)break}return e},isc.A.$60q=function(a,b){if(b[0]>=a[0]&&b[0]<=a[1]||b[1]>=a[0]&&b[1]<=a[1]||b[0]<=a[0]&&b[1]>=a[1])return(b[1]>a[1]?a[1]:b[1])-(b[0]>a[0]?b[0]:a[0]);
return 0},isc.A.addTile=function(){return false},isc.A.removeTile=function(){return false},isc.A.getRecordTile=function(a){if(a==null)return null;if(a>=this.data.getLength())return null;return(a=this.getTileID(this.data.get(a)))?window[a]:null},isc.A.childVisibilityChanged=function(a,b){this.invokeSuper(isc.TileLayout,"childVisibilityChanged",a,b)},isc.A.hasAllVisibleTiles=function(a,b){if(isc.isA.ResultSet(this.data)){if(!this.data.lengthIsKnown())return false;var c=a[1]+1;if(c>this.data.getLength())c=
this.data.getLength();if(this.data.rangeIsLoaded(a[0],c))return true;else{if(b){this.logDebug("in hasAllVisibleTiles, fetching range: "+a[0]+" to "+c+", total length: "+this.data.getLength(),"TileGrid");this.data.getRange(a[0],c)}return false}}else return true},isc.A.$31i=function(){this.canReorderTiles=this.canDrag||this.canReorderTiles;this.canDragTilesOut=this.canDrag||this.canDragTilesOut;this.canAcceptDroppedRecords=this.canAcceptDrop||this.canAcceptDroppedRecords;this.canDrag=this.canDrag||
this.canDragTilesOut||this.canReorderTiles;this.canAcceptDrop=this.canAcceptDrop||this.canAcceptDroppedRecords||this.canReorderTiles},isc.A.getDragTrackerTitle=function(a){var b=this.getTitleField();return"<nobr>"+a[b]+"</nobr>"},isc.A.drop=function(){var a=this.$610||0;if(a>this.data.getLength())a=0;var b=this.ns.EH.dragTarget;this.$66f=null;b.getDataSource();var c=b.cloneDragData(),d=this.data.get(a);this.transferRecords(c,d,a,b)},isc.A.dropMove=function(){if(!this.canReorderTiles)return true;if(!this.canAcceptDroppedRecords&&
isc.EH.dragTarget!=this)return true;this.showDragLineForRecord()},isc.A.dragMove=function(){var a=isc.EH.dropTarget;if(!this.canDragTilesOut&&a!=null&&a!=this)return false;var b=this.getSelectedRecord();if(this.tileDragAppearance=="outline"){a=this.ns.EH;b=this.getTileID(b);b=window[b];var c="<div style='width:"+b.getVisibleWidth()+";height:"+b.getVisibleHeight()+"'>"+a.getDragOutline(b).getInnerHTML()+"</div>";a.setDragTracker(c)}else if(this.tileDragAppearance=="target"){a=this.ns.EH;b=this.getTileID(b);
b=window[b];c="<div style='width:"+b.getVisibleWidth()+";height:"+b.getVisibleHeight()+"'>"+b.getInnerHTML()+"</div>";a.setDragTracker(c);b.hide();this.$815=b;if(!a.dragMoveAction)a.dragMoveAction=a.$ll;a.dragTarget.showDragShadow&&a.$lm();a.dragTarget.dragOpacity!=null&&a.$ln()}},isc.A.willAcceptDrop=function(){var a=this.ns.EH;if(!this.Super("willAcceptDrop",arguments))return false;a=a.dragTarget;if(a==this){if(!this.canReorderTiles)return false}else if(!this.canAcceptDroppedRecords)return false;
if(!isc.isAn.Object(a.getDragData()))return false;return true},isc.A.dragStop=function(){this.Super("dropOut",arguments);if(this.$815){this.$815.show();this.$815=null}},isc.A.getCellValue=function(a,b){return this.detailViewer.getStandaloneFieldValue(a,b[this.fieldIdProperty])},isc.A.getStandaloneFieldValue=function(a,b){return this.getCellValue(a,this.getField(b))},isc.A.getTitleFieldValue=function(a){var b=this.getDataSource().getTitleField();return this.getCellValue(a,this.getDataSource().getField(b))},
isc.A.hideField=function(a){this.getField(a).showIf="false";this.getField(a).hidden=true;this.fieldStateChanged()},isc.A.showField=function(a){this.getField(a).showIf="true";this.getField(a).hidden=false;this.fieldStateChanged()},isc.A.getField=function(a){if(!this.fields)return null;return isc.Class.getArrayItem(a,this.fields,this.fieldIdProperty)},isc.A.getFields=function(){return this.fields},isc.A.getAllFields=function(){return this.fields},isc.A.setFieldState=function(a){if(isc.isA.String(a))a=
this.evalViewState(a,"fieldState");if(a){this.completeFields=this.$31y(a);this.setFields(a);this.markForRedraw();this.fieldStateChanged()}},isc.A.showActionInPanel=function(a){if(a.name=="sort")return true;return this.Super("showActionInPanel",arguments)},isc.A.getPrintHTML=function(){if(!this.data.lengthIsKnown()){isc.logWarn("Attempt to print TileGrid "+this.ID+" while data is loading will be ignored");return""}var a=this.data.getLength();if(!this.data.rangeIsLoaded(0,a)){isc.logWarn("Make sure all data is loaded before attempting to print TileGrid: "+
this.ID);return""}var b,c=this.printTilesPerLine?this.printTilesPerLine:this.getTilesPerLine();if(this.orientation=="horizontal"){b="<table width='"+this.getInnerWidth()+"'>";for(var d=0;d<a;d++){var e=this.getTile(d);if(d%c==0)if(d==0)b+="<tr>";else if(d<a-1)b+="</tr><tr>";b+="<td>"+e.getPrintHTML()+"</td>"}b+="</tr></table>"}else{b="<table>";for(d=0;d<c;d++){b+="<tr>";for(var f=d;f<a;f+=c){e=this.getTile(f);b+="<td>"+e.getPrintHTML()+"</td>"}b+="</tr>"}b+="</table>"}return b});isc.B._maxIndex=isc.C+
61;isc.ClassFactory.defineClass("SimpleTile","StatefulCanvas");isc.A=isc.SimpleTile.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.baseStyle="simpleTile";isc.A.overflow="hidden";isc.A.showRollOver=true;isc.A.redrawOnStateChange=true;isc.A._redrawWithParent=false;isc.B.push(isc.A.initWidget=function(){this.invokeSuper(isc.SimpleTile,"initWidget",arguments);this.showDown=this.creator.valuesShowDown},isc.A.getInnerHTML=function(){this.creator.detailViewer.currentTile=
this;var a=this.creator.getTileRecord(this);if(!a)return null;return this.creator.getTileHTML(a)},isc.A.getRecord=function(){return this.creator.getTileRecord(this)});isc.B._maxIndex=isc.C+3;isc.TileGrid.registerStringMethods({dataArrived:"startRecord,endRecord",selectionChanged:"record,state",itemHover:"item",itemClick:"item",recordClick:"viewer,tile,record",recordDoubleClick:"viewer,tile,record",fieldStateChanged:""});isc.ClassFactory.defineClass("ColumnTree","Layout","DataBoundComponent");isc.A=
isc.ColumnTree;isc.A.TREE_FIELD={name:"treeField",width:"*",getCellValue:function(a,b,c,d){return a.creator.getCellValue(a,b,c,d)}};isc.A=isc.ColumnTree.getPrototype();isc.A.orientation="horizontal";isc.A.animateMemberEffect={effect:"slide",startFrom:"L",endAt:"R"};isc.A.folderIcon="[SKIN]/folder.gif";isc.A.customIconProperty="icon";isc.A.nodeIcon="[SKIN]file.gif";isc.A.openIconSuffix="open";isc.A.closedIconSuffix="closed";isc.A.showOpenIcons=true;isc.A.showCustomIconOpen=false;isc.A.customIconOpenProperty=
"showOpenIcon";isc.A.showColumn=true;isc.A.columnConstructor="ListGrid";isc.A.columnDefaults={animateTime:100,animateEffect:"slide",canAddFormulaFields:false,canAddSummaryFields:false,canSort:false,canGroupBy:false,showHeaderMenuButton:false,selectionChanged:function(a,b){b&&this.creator.nodeSelected(this,a)},bodyProperties:{$29h:function(a,b,c,d,e){if(d==null)d=this.getTableElement(b,c);if(d!=null){if(!this.showHiliteInCells){if(a==null)a=this.getCellRecord(b,c);if(e==null)e=this.getCellStyle(a,
b,c);for(var f=d.childNodes[0];f&&f.tagName!="TABLE";)f=f.childNodes[0];if(f){f.className=e;if(this.getCellCSSText)d.style.cssText=isc.StringBuffer.concat(this.$29i(a,b,c,e),this.zeroBorderPadding)}}return isc.GridRenderer.getPrototype().$29h.apply(this,[a,b,c,d,e])}}}};isc.A.showHeaders=false;isc.A.firstColumnTitle="&nbsp;";isc.A.showNodeCount=false;isc.A.wrapCells=false;isc.A.iconPadding=3;isc.A.ignoreEmptyCriteria=false;isc.A.backButtonTitle="Back";isc.A.backButtonDefaults={_constructor:"IButton",
snapTo:"TR",left:5,top:5,autoFit:true,click:function(){this.creator.navigateBack()}};isc.A.overflow="hidden";isc.A=isc.ColumnTree.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$34p=["<table cellpadding=0 cellspacing=0 class='",,"' style='",,"border:0px;padding:0px;'><tr><td>",,"</td>","<td>"+(isc.Browser.isSafari||isc.Browser.isIE?"<nobr>":""),,,,(isc.Browser.isSafari?"</nobr>":"")+"</td><td style='padding-left:",,"px;'>",,,"</td>",
"</tr></table>"];isc.A.$34q=["<td>"+(isc.Browser.isSafari||isc.Browser.isIE?"<nobr>":""),,,,(isc.Browser.isSafari?"</nobr>":"")+"</td><td style='padding-left:",,"px;'>",,,"</td>"];isc.A.$34r="absmiddle";isc.A.$4s={};isc.B.push(isc.A.getDynamicDefaults=function(a){if(a=="column")return{autoDraw:false,showHiliteInCells:true,leaveScrollbarGap:false,selectionType:"single",showHeader:false,fields:isc.clone(this.fields)}},isc.A.initWidget=function(){this.Super("initWidget",arguments);if(this.showMultipleColumns==
null)this.showMultipleColumns=!isc.Browser.isHandset;this.columns=[];if(!this.dataSource&&this.data!=null&&this.data.dataSource)this.dataSource=this.data.dataSource;if(!this.fields||this.fields.length==0)this.fields=[isc.ColumnTree.TREE_FIELD];if(this.showMultipleColumns==false&&this.showHeaders&&this.showBackButton!=false){this.backButton=this.createAutoChild("backButton",{title:this.backButtonTitle,disabled:true});this.addChild(this.backButton);this.backButton.bringToFront()}this.columns[0]=this.createAutoChild("column",
this.getColumnProperties(this.data?this.data.getRoot():null,0),null,false);this.addColumn(this.columns[0],0);this.currentColumn=0;this.data&&this.populateFirstColumn()},isc.A.populateFirstColumn=function(){this.data.showRoot?this.columns[0].setData([this.data.getRoot()]):this.columns[0].setData(this.data.getChildren(this.data.getRoot()));if(this.shouldShowHeader(null,0)){this.columns[0].setShowHeader(true);this.columns[0].setFieldProperties(0,{title:this.getColumnTitle(null,0)})}},isc.A.treeIsTied=
function(){return false},isc.A.getSelectedRecord=function(){if(this.currentColumn<=0)return this.data.getRoot();return this.getColumn(this.currentColumn-1).getSelectedRecord()},isc.A.navigateBack=function(){if(!(this.currentColumn<=0)){var a,b;if(this.currentColumn>=2){a=this.getColumn(this.currentColumn-2);b=a.getSelectedRecord()}else{a=this.getColumn(0);b=this.data.getRoot()}this.logInfo("navigating to column: "+(this.currentColumn-1)+" to node: "+this.data.getTitle(b));this.nodeSelected(a,b,true)}},
isc.A.slideTransition=function(a,b,c,d){if(isc.Browser.isWebKit){this.logInfo((d?"right":"left")+" slideTransition from: "+a+" to "+b+" within "+c);b.hide();c.addChild(b);b.isDrawn()||b.draw();var e=a.getStyleHandle(),f=b.getStyleHandle();f.setProperty("-webkit-transition","none");var g="translate3d("+(d?"-":"")+c.getViewportWidth()+"px, 0%, 0%)";f.setProperty("-webkit-transform",g);var h=c.overflow;c.setOverflow("hidden");b.show();isc.Timer.setTimeout(function(){e.setProperty("-webkit-transition",
"-webkit-transform 0.3s ease-in-out");f.setProperty("-webkit-transition","-webkit-transform 0.3s ease-in-out");g="translate3d("+(d?"":"-")+c.getViewportWidth()+"px, 0%, 0%)";e.setProperty("-webkit-transform",g);f.setProperty("-webkit-transform","translate3d(0px, 0%, 0%)");isc.Timer.setTimeout(function(){a.hide();c.setOverflow(h)},350)},0)}else{if(d){b.deselectAllRecords();b.animateShow()}else{a.animateHide();b.show()}b.bringToFront()}},isc.A.nodeSelected=function(a,b,c){if(!(this.onNodeSelected!=
null&&this.onNodeSelected(a,b)==false)){var d=this.getColumnIndex(b),e=this.data.isFolder(b),f=d+1;e||(f-=1);var g=this.columns[f];if(!this.treeIsTied(a,b)){this.showMultipleColumns!=false&&this.hideColumnsToRight(f);if(!e)return;this.data.openFolder(b);if(isc.isA.ListGrid(g))g.deselectAllRecords();else g=this.columns[f]=this.createAutoChild("column",this.getColumnProperties(b,d+1),null,false);g.setData(this.data.getChildren(b));this.addColumn(g,f);if(this.shouldShowHeader(b,f)){g.setShowHeader(true);
d=this.getColumnTitle(b,f);g.setFieldProperties(0,{title:d})}g.data.getLength()>0&&this.updateHeadingNodeCount(b)}a=c?this.columns[this.currentColumn]:a;g=g;this.showMultipleColumns==false?this.slideTransition(a,g,this,c?true:false):g.show();this.currentColumn=f<0?0:f;this.logInfo("currentColumn is now: "+this.currentColumn);if(this.backButton){this.backButton.bringToFront();this.backButton.setDisabled(this.currentColumn<=0)}}},isc.A.addColumn=function(a,b){if(this.showMultipleColumns==false){a.resizeTo("100%",
"100%");this.addChild(a,b)}else this.addMember(a,b)},isc.A.getCurrentTitle=function(){return this.columns[this.currentColumn].getFieldTitle(0)},isc.A.getPreviousTitle=function(){if(this.currentColumn<=0)return"";return this.columns[this.currentColumn-1].getFieldTitle(0)},isc.A.updateHeadingNodeCount=function(a){var b=this.getColumnIndex(a);if(this.shouldShowHeader(a,b)&&this.showNodeCount)if(!(b<0))if(this.columns[b+1].data.getLength()!=0){a=this.data.getTitle(a);if(this.showNodeCount)a=a+" ("+this.columns[b+
1].data.getLength()+")";this.columns[b+1].setFieldProperties(0,{title:a})}},isc.A.getColumnIndex=function(a){return this.data.showRoot?this.data.getLevel(a):this.data.getLevel(a)-1},isc.A.hideColumnsToRight=function(a){for(a=a+1;a<this.columns.length;a++){this.columns[a].hide();this.columns[a].deselectAllRecords()}},isc.A.shouldShowHeader=function(){return this.showHeaders},isc.A.getColumnTitle=function(a,b){return b==0?this.firstColumnTitle:this.data.getTitle(a)},isc.A.getRecord=function(a,b){if(a==
null||a<0)return null;if(b!=null){if(b<0||b>this.columns.length)return null;if(a>this.columns[b].data.length||!this.columns[b].isVisible())return null;return this.columns[b].data[a]}for(var c=0,d=0;d<this.columns.length;d++)if(this.columns[d].isVisible()){if(c+this.columns[d].data.length>a)return this.columns[d].data[a-c];c+=this.columns[d].data.length}return null},isc.A.getTreeCellValue=function(a,b,c,d,e){if(c==null)return a;var f=this.$34p;f[1]=b.getCellStyle(c,d,e);f[3]=b.getCellCSSText(c,d,e);
a=this.$342(a,c,d,true);for(b=0;b<10;b++)f[6+b]=a[b];return f.join(isc.emptyString)},isc.A.$342=function(a,b,c){var d=this.$34q;d[1]=null;var e=this.getIcon(b);c=c!=null?this.$34n+c:null;d[2]=null;d[3]=this.getIconHTML(e,c,b.iconSize);d[5]=this.iconPadding;d[7]=this.wrapCells?null:"<NOBR>";d[8]=a;return d},isc.A.getCellValue=function(a,b,c,d){var e=this.getNodeTitle(b,c);return e=this.getTreeCellValue(e,a,b,c,d)},isc.A.getIcon=function(a,b){if(isc.isA.Number(a))a=this.data.get(a);if(!a)return null;
var c=a[this.customIconProperty],d=c!=null,e=this.data.isFolder(a);d||(c=e?this.folderIcon:this.nodeIcon);var f;if(e){e=b?false:this.lastDropFolder==a&&a.$347;var g=b?false:!!this.data.isOpen(a);if(e)if(a.dropIcon!=null)c=a.dropIcon;else if(!d&&this.folderDropImage!=null)c=this.folderDropImage;else{if(d){d=a[this.customIconDropProperty];if(d==null)d=this.showCustomIconDrop}else d=this.showDropIcons;if(d)f=this.dropIconSuffix}else if(g)if(a.openedIcon!=null)c=a.openedIcon;else if(!d&&this.folderOpenImage!=
null)c=this.folderOpenImage;else{if(d){e=a[this.customIconOpenProperty];if(e==null)e=this.showCustomIconOpen}else e=this.showOpenIcons;if(e)f=this.openIconSuffix;else if(!d)f=this.closedIconSuffix}else if(!d)if(this.folderClosedImage)c=this.folderClosedImage;else f=this.closedIconSuffix}else if(!d&&this.fileImage)c=this.fileImage;return isc.Img.urlForState(c,false,false,f)},isc.A.getIconHTML=function(a,b,c){if(a==null)return isc.emptyString;if(c==null)c=this.iconSize;var d=this.$4s;d.src=a;d.width=
d.height=c;d.name=b;d.align=this.$34r;a=this.$wf(d);a[14]=b;return a.join(isc.$ad)},isc.A.getNodeTitle=function(a){return this.data.getTitle(a)},isc.A.getData=function(){return this.data},isc.A.setData=function(a){if(isc.isA.Tree(a)){this.data=a;this.data.columnTree=this;this.data.dataArrived="this.columnTree.updateHeadingNodeCount(parentNode);";this.data.separateFolders=this.separateFolders;this.showRoot&&isc.isA.ResultTree(this.data)&&this.logWarn("showRoot may not be set with a databound columnTree, unexpected results may occur");
this.data.showRoot=this.showRoot;this.data.openDisplayNodeType=this.displayNodeType;this.data.openFolder(this.data.root);this.populateFirstColumn()}},isc.A.useExistingDataModel=function(){return false},isc.A.createDataModel=function(a,b,c){return this.createResultTree(a,c.afterFlowCallback,c,null)},isc.A.updateDataModel=function(){},isc.A.getColumn=function(a){if(isc.isAn.Object(a)){a=this.getColumnIndex(a)+1;if(this.columns[a]&&this.columns[a].isVisible())return this.columns[a]}else if(this.columns[a]&&
a<=this.currentColumn)return this.columns[a];return null},isc.A.getColumnProperties=function(){},isc.A.selectAllRecords=function(a){if(a==null)a=0;this.columns[a]&&this.columns[a].selectAllRecords()},isc.A.deselectAllRecords=function(a){if(a==null)a=0;this.columns[a]&&this.columns[a].deselectAllRecords()},isc.A.anySelected=function(a){if(a==null)a=0;if(!this.columns[a])return false;return this.columns[a].anySelected()},isc.A.getSelection=function(a){if(a==null)a=0;if(!this.columns[a])return[];return this.columns[a].getSelection()},
isc.A.getSelectionObject=function(a){if(a==null)a=0;if(!this.columns[a])return null;return this.columns[a].selection});isc.B._maxIndex=isc.C+35;isc.ColumnTree.registerStringMethods({nodeSelected:"column, node",onNodeSelected:"column,node"});isc.ClassFactory.defineClass("TableView","ListGrid");isc.A=isc.TableView;isc.A.PLAIN="plain";isc.A.GROUPED="grouped";isc.A.TITLE_ONLY="titleOnly";isc.A.TITLE_DESCRIPTION="titleAndDescription";isc.A.SUMMARY_INFO="summaryInfo";isc.A.SUMMARY_DATA="summaryData";isc.A.SUMMARY_FULL=
"summaryFull";isc.A.WHOLE_RECORD="wholeRecord";isc.A.NAVICON_ONLY="navIconOnly";isc.A=isc.TableView.getPrototype();isc.A.iconField="icon";isc.A.showIconField=true;isc.A.titleField="title";isc.A.infoField="info";isc.A.dataField="data";isc.A.descriptionField="description";isc.A.recordNavigationProperty="$79p";isc.A.tableMode=isc.TableView.PLAIN;isc.A.recordLayout=isc.TableView.TITLE_ONLY;isc.A.navIcon="[SKINIMG]/iOS/listArrow_button.png";isc.A.wholeRecordNavIcon="[SKINIMG]/iOS/listArrow.png";isc.A.navigationMode=
isc.TableView.WHOLE_RECORD;isc.A.recordTitleStyle="recordTitle";isc.A.recordDescriptionStyle="recordDescription";isc.A.recordDataStyle="recordData";isc.A.recordInfoStyle="recordInfo";isc.A.iconFieldDefaults={width:50,imageSize:30,align:"center",type:"image"};isc.A.titleFieldDefaults={name:"TVtitleField",width:"*",type:"text",formatCellValue:function(a,b,c,d,e){if(e.formatRecord!=null)return e.formatRecord(b);a=e.$80v(b,e.titleField);c=e.$80v(b,e.descriptionField);d=e.$80v(b,e.infoField);b=e.$80v(b,
e.dataField);var f="";if(e.recordLayout==isc.TableView.SUMMARY_INFO||e.recordLayout==isc.TableView.SUMMARY_FULL)f+="<span class='"+e.recordInfoStyle+"'>"+d+"</span>";f+="<span class='"+e.recordTitleStyle+"'>"+a+"</span>";if(e.recordLayout!=isc.TableView.TITLE_ONLY)f+="<span class='"+e.recordDescriptionStyle+"'>"+c+"</span>";if(e.recordLayout==isc.TableView.SUMMARY_DATA||e.recordLayout==isc.TableView.SUMMARY_FULL)f+="<span class='"+e.recordDataStyle+"'>"+b+"</span>";return f}};isc.A.navigationFieldDefaults=
{name:"TVnavigationField",width:54,align:"right",formatCellValue:function(a,b,c,d,e){if(e.getShowNavigation(b))return isc.Img.create({autoDraw:false,autoFit:true,imageType:"normal",src:e.getNavigationIcon(b)}).getInnerHTML();return e.$54t}};isc.A.groupByFieldDefaults={showIf:"false"};isc.A.canAddFormulaFields=false;isc.A.canAddSummaryFields=false;isc.A.showHeader=false;isc.A.selectionType="none";isc.A.skinImgDir="images/iOS/";isc.A.baseStyle="tableCell";isc.A.border="0px";isc.A.wrapCells=false;isc.A.cellHeight=
44;isc.A.alternateRecordStyles=false;isc.A.canCollapseGroup=false;isc.A.groupStartOpen="all";isc.A.ignoreEmptyCriteria=false;isc.A=isc.TableView.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function(){this.Super("initWidget",arguments);this.$80w={};this.formatRecord!=null&&!isc.isA.Function(this.formatRecord)&&isc.Func.replaceWithMethod(this,"formatRecord","record")},isc.A.setFields=function(a){this.invokeSuper(isc.TableView,
"setFields",this.$80x(a))},isc.A.$80x=function(a){a=a||[];for(var b=0;b<a.length;b++)a[b].showIf="false";if(this.showIconField){(b=a.find(this.fieldIdProperty,this.iconField))&&a.remove(b);this.$79q=a.length;a[a.length]=isc.addProperties({name:this.iconField},this.iconFieldDefaults,this.iconFieldProperties)}(b=a.find(this.fieldIdProperty,this.titleFieldDefaults.name))&&a.remove(b);a[a.length]=isc.addProperties({},this.titleFieldDefaults,this.titleFieldProperties);(b=a.find(this.fieldIdProperty,this.navigationFieldDefaults.name))&&
a.remove(b);this.$79r=a.length;a[a.length]=isc.addProperties({},this.navigationFieldDefaults,this.navigationFieldProperties);if(this.groupByField){var c;c=isc.isA.Array(this.groupByField)?this.groupByField:[this.groupByField];for(b=0;b<c.length;b++){var d=a.find(this.fieldIdProperty,c[b]);if(d)isc.addProperties(d,this.groupByFieldDefaults,this.groupByFieldProperties);else a[a.length]=isc.addProperties({name:c[b]},this.groupByFieldDefaults,this.groupByFieldProperties)}}return a},isc.A.$80v=function(a,
b){var c=a[b]||this.$54t,d=this.$80w[b];if(d==null||d==void 0){d=isc.Class.getArrayItemIndex(b,this.getAllFields(),this.fieldIdProperty);this.$80w[b]=d}if(d>=0)c=this.getFormattedValue(a,b,c);return c},isc.A.getNavigationIcon=function(){return this.navigationMode==isc.TableView.NAVICON_ONLY?this.navIcon:this.wholeRecordNavIcon},isc.A.getShowNavigation=function(a){if(a&&a[this.recordNavigationProperty]!=null)return a[this.recordNavigationProperty];return this.showNavigation},isc.A.canSelectRecord=
function(a){return this.body.canSelectRecord(a)},isc.A.recordClick=function(a,b,c,d,e){e!=this.$79q&&e!=this.$79r&&this.canSelectRecord(b)&&this.selectSingleRecord(b);if(e==this.$79r||this.navigationMode==isc.TableView.WHOLE_RECORD){if(this.recordNavigationClick){isc.Func.replaceWithMethod(this,"recordNavigationClick","record");this.recordNavigationClick(b)}}else if(e==this.$79q)if(this.imageClick){isc.Func.replaceWithMethod(this,"imageClick","record");this.imageClick(b)}},isc.A.getBaseStyle=function(a,
b,c){if(this.isGrouped){var d=this.data.get(b),e=this.data.isFirst(d);d=this.data.isLast(d);if(e&&d)return c==0?"cellOnlyLeft":c==this.fields.length-1?"cellOnlyRight":"cellOnly";else if(e)return c==0?"cellTopLeft":c==this.fields.length-1?"cellTopRight":"cellTop";else if(d)return c==0?"cellBottomLeft":c==this.fields.length-1?"cellBottomRight":"cellBottom"}return this.Super("getBaseStyle",arguments)});isc.B._maxIndex=isc.C+9;isc.TableView.registerStringMethods({recordNavigationClick:"record",imageClick:"record",
formatRecord:"record"});isc.ClassFactory.defineClass("DOMTree","Tree");isc.A=isc.DOMTree.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.tagNameProperty="tagName";isc.A.elementProperty="$9b";isc.A.loadOnInit=true;isc.A.loadDataOnDemand=true;isc.A.hideTextNodes=true;isc.B.push(isc.A.makeRoot=function(){var a=this.Super("makeRoot",arguments);a[this.elementProperty]=this.rootElement;return a},isc.A.getElement=function(a){return a[this.elementProperty]},
isc.A.getElementTitle=function(a){var b=a.getAttribute(this.titleProperty);if(!this.valueIsEmpty(b))return b;b=a.getAttribute(this.nameProperty);if(!this.valueIsEmpty(b))return b;if(!isc.xml.hasElementChildren(a)){b=isc.xml.getElementText(a);if(!this.valueIsEmpty(b))return b}return a.tagName||a.nodeName},isc.A.valueIsEmpty=function(a){return a==null||isc.isAn.emptyString(a)},isc.A.isFolder=function(a){if(a==this.root||a.children!=null)return true;a=a[this.elementProperty];if(!a||!a.childNodes||a.childNodes.length==
0)return false;if(!this.hideTextNodes)return true;return isc.xml.hasElementChildren(a)},isc.A.moveList=function(a,b,c){var d=this.getElement(a[0]);this.logWarn("moveList: "+this.echoAll(a)+", newParent: "+this.echo(b)+", index: "+c);this.$36g(d,b,c);this.Super("moveList",arguments)},isc.A.remove=function(a){var b=this.getElement(a);b.parentNode.removeChild(b);return this.Super("remove",arguments)},isc.A.addElement=function(a,b,c){this.$36g(a,b,c);this.isLoaded(b)?this.add(this.nodeForElement(a),b,
c):this.dataChanged()},isc.A.$36g=function(a,b,c){var d=this.getElement(b);if(c==null){this.logWarn("appending: "+this.echoLeaf(a)+" to: "+this.echoLeaf(d));d.appendChild(a)}else{b=this.getElement(this.getChildren(b)[c]);this.logWarn("inserting into: "+this.echoLeaf(d)+", before: "+this.echoLeaf(b));d.insertBefore(a,b)}},isc.A.nodeForElement=function(a){var b={};b[this.elementProperty]=a;b[this.titleProperty]=this.getElementTitle(a);if(this.tagNameProperty)b[this.tagNameProperty]=a.tagName||a.nodeName;
if(this.copyAttributes)for(var c=0;c<this.copyAttributes.length;c++){var d=this.copyAttributes[c];b[d]=a.getAttribute(d)}return b},isc.A.loadChildren=function(a){if(!this.isLoaded(a))try{var b=a.$9b;if(b!=null){var c=b.childNodes;if(isc.Browser.isMoz&&b.contentDocument)c=[b.contentDocument.documentElement];else if(this.loadingBatch()&&!isc.xml.hasElementChildren(b))return;a[this.openProperty]=true;if(c!=null)for(b=0;b<c.length;b++){var d=c[b];this.hideTextNodes&&d.nodeName.startsWith("#")||this.add(this.nodeForElement(d),
a)}this.setLoadState(a,isc.Tree.LOADED)}}catch(e){this.logWarn("parent node: "+this.echo(a)+", at path: "+this.getPath(a)+", error: "+this.echo(e)+this.getStackTrace())}});isc.B._maxIndex=isc.C+11;isc.defineClass("DOMGrid","TreeGrid");isc.A=isc.DOMGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canDragRecordsOut=true;isc.A.canAcceptDroppedRecords=true;isc.A.canReorderRecords=true;isc.A.showRoot=true;isc.A.$36h="&lt;";isc.A.$36i="&gt;";
isc.A.$36j=[" ",,'="',,'"'];isc.A.colorMap={table:"#009900",tr:"#333399",td:"#663366",form:"#CC6600",input:"#3333FF",textarea:"#3333FF",div:"#663300",span:"#663300"};isc.A.colorPrefix="color:";isc.A.$36k={};isc.B.push(isc.A.initWidget=function(){this.Super(this.$oc);this.url&&isc.xml.loadXML(this.url,this.getID()+".setRootElement(xmlDoc.documentElement)")},isc.A.getDefaultData=function(){return null},isc.A.getElement=function(a){return this.data.getElement(a)},isc.A.setRootElement=function(a){this.rootElement=
a;this.setData(isc.DOMTree.create({rootElement:a}))},isc.A.getIcon=function(){},isc.A.getNodeTitle=function(a){if(a==null)return null;if(a.$9g)return a.$9g;var b=this.htmlMode?this.$36l(a):this.$36m(a);return a.$9g=b},isc.A.dataChanged=function(){this.Super("dataChanged",arguments);this.data.getOpenList().setProperty("$9g",null)},isc.A.$36m=function(a){a.$9b==null&&this.logWarn("no element for node: "+this.echo(a));a=a.$9b;var b=this.$36n;if(b==null)b=this.$36n=isc.SB.create();else b.clear();b.append(this.$36h,
a.tagName||a.nodeName);var c=a.attributes;if(c!=null)for(var d=this.$36j,e=0;e<c.length;e++){var f=c[e];d[1]=f.name;d[3]=f.value;b.append(d)}if(isc.xml.hasElementChildren(a))a.childNodes.length>0?b.append(this.$36i):b.append("/&gt;");else b.append(this.$36i,isc.xml.getElementText(a),"&lt;/",a.tagName||a.nodeName,this.$36i);return b.toString()},isc.A.$36l=function(a){a=a.$9b;var b=isc.emptyString,c,d;if(isc.Browser.isIE&&a.scopeName=="VML"){c=a.style?a.style.width:null;d=a.style?a.style.height:null}else{c=
a.width||(a.style?a.style.width:null);d=a.height||(a.style?a.style.height:null)}var e=a.tagName&&a.tagName.toLowerCase()=="td";return isc.SB.concat(this.$36h,a.tagName||a.nodeName,a.id?" ID="+a.id:b,!this.valueIsEmpty(c)?" WIDTH="+c:b,!this.valueIsEmpty(d)?" HEIGHT="+d:b,e&&a.rowSpan>1?" ROWSPAN="+a.rowSpan:b,e&&a.colSpan>1?" COLSPAN="+a.colSpan:b,this.$36i)},isc.A.valueIsEmpty=function(a){return a==null||isc.isAn.emptyString(a)},isc.A.getCellCSSText=function(a){a=this.data.getElement(a);if(a==null)return null;
a=a.tagName;if(a==null)return null;if(this.$36k[a])a=this.$36k[a];else this.$36k=a=a.toLowerCase();if(this.colorMap[a]!=null)return isc.SB.concat(this.colorPrefix,this.colorMap[a],isc.semi)});isc.B._maxIndex=isc.C+11;isc.ClassFactory.defineClass("MenuBar","Toolbar");isc.addGlobal("Menubar",isc.MenuBar);isc.A=isc.MenuBar.getPrototype();isc.A.overflow=isc.Canvas.VISIBLE;isc.A.defaultHeight=22;isc.A.menuConstructor="Menu";isc.A.buttonConstructor="MenuBarButton";isc.A.tabIndex=-1;isc.A.tabWithinToolbar=
false;isc.A.buttonDefaults={showDown:false,showRollOver:true,showFocused:true,showFocusedAsOver:true};isc.A=isc.MenuBar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function(){this.Super("initWidget",arguments)},isc.A.setButtons=function(a){a=[];for(var b=0;b<this.menus.length;b++)a[b]=this.$36o(this.menus[b],b);return this.Super("setButtons",[a])},isc.A.$36o=function(a,b){return{title:a.title,width:a.menuButtonWidth?
a.menuButtonWidth:a.width,menuNum:b,focusChanged:function(c){isc.Browser.isMoz&&c&&this.bringToFront()}}},isc.A.setMenus=function(a){isc.isAn.Array(a)||(a=[a]);for(var b=0;b<this.members.length;b++){var c=this.members[b],d=this.menus[c.menuNum];c.isObserving(d,"hide")&&c.ignore(d,"hide")}this.menus=a;this.setButtons(a)},isc.A.$36p=function(a,b){if(a){if(b==-1){var c=this.menus[a.menuNum];a.isObserving(c,"hide")&&a.ignore(c,"hide")}a.menuNum=b}},isc.A.addMenus=function(a,b){if(a){isc.isAn.Array(a)||
(a=[a]);if(!this.menus)this.menus=[];if(b==null)b=this.menus.length;if(this.$6c){for(var c=b;c<this.members.length;c++)this.$36p(this.members[c],c+a.length);this.menus.addListAt(a,b);var d=[];for(c=0;c<a.length;c++){var e=this.menus.indexOf(a[c]);d[c]=this.$36o(a[c],e)}this.addButtons(d,b)}else this.menus.addListAt(a,b)}},isc.A.removeMenus=function(a){if(a!=null){isc.isAn.Array(a)||(a=[a]);for(var b=[],c=this.menus.duplicate(),d=0;d<a.length;d++){var e=a[d];if(isc.isA.Number(e))e=this.menus[e];else if(!this.menus.contains(e))continue;
c.remove(e);e=this.menus.indexOf(e);this.$6c&&b.add(this.members[e])}if(this.$6c){for(d=0;d<this.menus.length;d++)this.menus[d]!=c[d]&&this.$36p(this.members[d],c.indexOf(this.menus[d]));this.menus=c;this.removeButtons(b)}else this.menus=c}},isc.A.showMenu=function(a){var b;if(isc.isA.Number(a))b=this.menus[a];else{b=a;a=this.menus.indexOf(b)}if(b){for(var c,d=0;d<this.members.length;d++)if(this.members[d].menuNum==a)c=this.members[d];if(!isc.isA.Canvas(b)){if(b.ID==null)b.ID=this.getID()+"_menu"+
a;b.autoDraw=false;b=this.menus[a]=isc.ClassFactory.newInstance(this.menuConstructor,b,this.menuDefaults)}this.activeMenu!=null&&this.menus[this.activeMenu].hideMenuTree();b.keyEventParent=this;b.moveTo(c.getPageLeft(),c.getPageBottom());b.show();c.$36q=c.showRollOver;c.showRollOver=false;c.setState(isc.StatefulCanvas.STATE_DOWN);this.activeMenu=a;c.isObserving(b,"hide")||c.observe(b,"hide","observer.menuHidden(observed)");a=isc.EH;a.targetIsMasked(this)&&this.bringToFront();d=a.clickMaskRegistry.last();
this.members.contains(a.getMaskedFocusCanvas(d))&&a.setMaskedFocusCanvas(null,d);b.body.focusOnHide=c}else this.logWarn("showMenu() called with invalid menu number: "+a+".  No effect.")},isc.A.$6d=function(a){if(!this.activeMenu==null)return this.Super("$6d",arguments);if(a==null)a=true;for(var b=this.activeMenu,c=a?1:-1,d=b+c,e=this.getMembers();b!=d;){if(d<0)d=e.length-1;else if(d>=this.members.length)d=0;var f=e[d];if(!f.isDisabled()){f.showMenu();break}d+=c}},isc.A.getFocusButtonIndex=function(){if(this.activeMenu!=
null)return this.activeMenu;return this.Super("getFocusButtonIndex",arguments)});isc.B._maxIndex=isc.C+10;isc.ClassFactory.defineClass("MenuBarButton","MenuButton");isc.A=isc.MenuBarButton.getPrototype();isc.A.showMenuButtonImage=false;isc.A.showDown=false;isc.A.autoDraw=false;isc.A.align="center";isc.A=isc.MenuBarButton.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.mouseOver=function(){this.Super("mouseOver",arguments);var a=
this.parentElement.activeMenu;a!=null&&a!=this.menuNum&&this.showMenu()},isc.A.mouseDown=function(){this.parentElement.activeMenu==this.menuNum?isc.Menu.hideAllMenus():this.showMenu()},isc.A.mouseUp=function(){},isc.A.click=function(){},isc.A.mouseOut=function(){this.parentElement.activeMenu!=this.menuNum&&this.Super("mouseOut",arguments)},isc.A.handleKeyPress=function(a,b){if(a.keyName=="Space"||a.keyName=="Enter")return this.showMenu();if(this.keyPress){this.convertToMethod("keyPress");return this.keyPress(a,
b)}},isc.A.showMenu=function(){this.parentElement.showMenu(this.menuNum)},isc.A.menuHidden=function(a){if(isc.$cv)arguments.$cw=this;if(this.state==isc.StatefulCanvas.STATE_DOWN)this.hasFocus&&this.showFocused?this.setState(isc.StatefulCanvas.STATE_OVER):this.setState(isc.StatefulCanvas.STATE_UP);this.showRollOver=this.$36q;delete this.$36q;this.menuIsDown=false;if(this.parentElement.activeMenu==this.menuNum)this.parentElement.activeMenu=null;delete a.eventParent;this.ignore(a,"hide")});isc.B._maxIndex=
isc.C+8;isc.ClassFactory.defineClass("CellSelection");isc.A=isc.CellSelection;isc.A.$24e=0;isc.A.COL_SELECTION_FLAGS=null;isc.A=isc.CellSelection;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.generateFlagTable=function(){isc.CellSelection.COL_SELECTION_FLAGS=[];for(var a=0;a<32;a++)isc.CellSelection.COL_SELECTION_FLAGS[a]=Math.pow(2,a)});isc.B._maxIndex=isc.C+1;isc.A=isc.CellSelection.getPrototype();isc.A.data=null;isc.A.numCols=0;isc.A.selectionProperty=
null;isc.A.$q7=true;isc.A.$24f=[];isc.A.lastSelectedCell=[];isc.A.changedCells=[];isc.A=isc.CellSelection.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function(){isc.CellSelection.COL_SELECTION_FLAGS||isc.CellSelection.generateFlagTable();if(!this.selectionProperty)this.selectionProperty="_cellSelection_"+isc.CellSelection.$24e++;this.setData(this.data?this.data:[])},isc.A.setData=function(a){this.data!=null&&this.ignoreData(this.data);
this.data=a;this.data!=null&&this.observeData(this.data)},isc.A.observeData=function(a){this.observe(a,"dataChanged","observer.$q7 = true")},isc.A.ignoreData=function(a){this.ignore(a,"dataChanged")},isc.A.cellIsSelected=function(a,b){var c=this.data[a];c=(c=c?c[this.selectionProperty]:null)?c[Math.floor(b/32)]:null;var d=isc.CellSelection.COL_SELECTION_FLAGS[b%32];return c!=null&&(c&d)!=0},isc.A.rowHasSelection=function(a){var b=this.data[a];a=b?b[this.selectionProperty]:null;var c=Math.ceil(this.numCols/
32);if(!b||!b[this.selectionProperty])return false;for(b=0;b<c;b++)if(a[b])return true;return false},isc.A.colHasSelection=function(a){if(a>this.numCols-1)return false;var b=isc.CellSelection.COL_SELECTION_FLAGS[a%32];a=Math.floor(a/32);for(var c=this.data,d=c.length,e=0;e<d;e++){var f=c[e][this.selectionProperty];if(f&&f[a]&&(f[a]&b)!=0)return true}return false},isc.A.anySelected=function(){for(var a=Math.ceil(this.numCols/32),b=this.data,c=b.length,d=0;d<c;d++){var e=b[d][this.selectionProperty];
if(e)for(var f=0;f<a;f++)if(e[f])return true}return false},isc.A.getSelectedCells=function(){if(!this.$q7)return this.$24f;for(var a=[],b=isc.CellSelection.COL_SELECTION_FLAGS,c=Math.ceil(this.numCols/32),d=this.data,e=d.length,f,g=0;g<e;g++)if(f=d[g][this.selectionProperty])for(var h=0,i,j;h<c;h++)if(i=f[h]){j=h==c-1&&this.numCols%32!=0?this.numCols%32:32;for(var k=0;k<j;k++)if((i&b[k])!=0)a[a.length]=[g,h*32+k]}this.$24f=a;this.$q7=false;return a},isc.A.getSelectionRowNums=function(){for(var a=
[],b=Math.ceil(this.numCols/32),c=this.data,d=c.length,e,f=0;f<d;f++)if(e=c[f][this.selectionProperty])for(var g=0;g<b;g++)if(e[g]){a[a.length]=f;break}return a},isc.A.getSelectionColNums=function(){for(var a=[],b=[],c=isc.CellSelection.COL_SELECTION_FLAGS,d=Math.ceil(this.numCols/32),e=this.data,f=e.length,g,h=0;h<f;h++)if(g=e[h][this.selectionProperty])for(var i=0;i<d;i++)if(g[i])b[i]|=g[i];if(b.length==0)return a;h=0;for(d=this.numCols;h<d;h++)if((b[Math.floor(h/32)]&c[h%32])!=0)a[a.length]=h;
return a},isc.A.getSelectionBounds=function(){var a=this.getSelectionRowNums(),b=this.getSelectionColNums();return[a.first(),b.first(),a.last(),b.last()]},isc.A.$24g=function(a,b,c){var d=this.data[a],e=d?d[this.selectionProperty]:null,f=Math.floor(b/32),g=e?e[Math.floor(b/32)]:0,h=isc.CellSelection.COL_SELECTION_FLAGS[b%32];if(!d||b>this.numCols-1)return false;if(d.enabled==false)return false;if(e==null){e=d[this.selectionProperty]=[];d=0;for(var i=Math.ceil(this.numCols/32);d<i;d++)e[d]=0}else if(g==
null)e[f]=0;if((g&h)!=0==c)return false;e[f]=g^h;if(c)this.lastSelectedCell=[a,b];return this.$q7=true},isc.A.setCellRangeSelection=function(a,b,c,d,e){this.changedCells=this.$24h(a,b,c,d,e);return this.$24i()},isc.A.$24h=function(a,b,c,d,e){var f=[],g;if(a<=c){g=a;a=c}else{g=c;a=a}if(b<=d){c=b;b=d}else{c=d;b=b}if(this.logIsDebugEnabled())this.logDebug((e?"selecting ":"deselecting ")+[g,c]+" through "+[a,b]);for(g=g;g<=a;g++)for(d=c;d<=b;d++)if(this.$24g(g,d,e))f[f.length]=[g,d];return f},isc.A.setCellListSelection=
function(a,b){if(!a)return false;for(var c=[],d=0,e=a.length,f,g;d<e;d++){f=a[d][0];g=a[d][1];if(this.$24g(f,g,b))c[c.length]=[f,g]}this.changedCells=c;return this.$24i()},isc.A.$24i=function(){if(this.changedCells.length>0){this.selectionChanged();return true}else return false},isc.A.selectionChanged=function(){},isc.A.setCellSelection=function(a,b,c){if(this.$24g(a,b,c)){this.changedCells=[[a,b]];this.selectionChanged();return true}else return false},isc.A.selectCell=function(a,b){return this.setCellSelection(a,
b,true)},isc.A.deselectCell=function(a,b){return this.setCellSelection(a,b,false)},isc.A.selectCellRange=function(a,b,c,d){this.changedCells=this.$24h(a,b,c,d,true);return this.$24i()},isc.A.deselectCellRange=function(a,b,c,d){this.changedCells=this.$24h(a,b,c,d,false);return this.$24i()},isc.A.selectRow=function(a){return this.selectCellRange(a,0,a,this.numCols-1)},isc.A.deselectRow=function(a){return this.deselectCellRange(a,0,a,this.numCols-1)},isc.A.selectCol=function(a){return this.selectCellRange(0,
a,this.data.length-1,a)},isc.A.deselectCol=function(a){return this.deselectCellRange(0,a,this.data.length-1,a)},isc.A.selectAll=function(){return this.selectCellRange(0,0,this.data.length-1,this.numCols-1)},isc.A.deselectAll=function(){return this.deselectCellRange(0,0,this.data.length-1,this.numCols-1)},isc.A.selectCellList=function(a){return this.setCellListSelection(a,true)},isc.A.deselectCellList=function(a){return this.setCellListSelection(a,false)},isc.A.selectSingleCell=function(a,b){var c=
this.cellIsSelected(a,b);this.changedCells=this.$24h(0,0,this.data.length-1,this.numCols-1,false);this.$24g(a,b,true);c||(this.changedCells[this.changedCells.length]=[a,b]);return this.$24i()},isc.A.selectSingleRow=function(a){var b=[];if(a>0)b=this.$24h(0,0,a-1,this.numCols-1,false);b=b.concat(this.$24h(a,0,a,this.numCols-1,true));if(a<this.data.length-1)b=b.concat(this.$24h(a+1,0,this.data.length-1,this.numCols-1,false));this.changedCells=b;return this.$24i()},isc.A.selectSingleCol=function(a){var b=
[];if(a>0)b=this.$24h(0,0,this.data.length-1,a-1,false);b=b.concat(this.$24h(0,a,this.data.length-1,a,true));if(a<this.numCols-1)b=b.concat(this.$24h(0,a+1,this.data.length-1,this.numCols-1,false));this.changedCells=b;return this.$24i()},isc.A.selectOnMouseDown=function(a,b,c){if(a.selectionType==isc.Selection.NONE)return false;this.startRow=this.lastRow=b;this.startCol=this.lastCol=c;var d=this.cellIsSelected(b,c),e=this.getSelectedCells(),f=this.getSelectionBounds();this.deselectOthersOnMouseUp=
this.deselectCellOnMouseUp=false;if(a.selectionType==isc.Selection.SINGLE){this.selectSingleCell(b,c);return true}else if(isc.EventHandler.shiftKeyDown()){if(e.length==0)this.selectCell(b,c);else{a=f[0];d=f[1];e=f[2];f=f[3];if(b<a)a=b;else{b>=e||this.deselectCellRange(b+1,d,e,f);e=b}if(c<d)d=c;else{c>=f||this.deselectCellRange(a,c+1,e,f);f=c}this.selectCellRange(a,d,e,f)}return true}else if(a.selectionType==isc.Selection.SIMPLE)if(d){this.deselectCellOnMouseUp=true;return false}else{this.selectCell(b,
c);return true}else if(isc.Browser.isMac?isc.EventHandler.metaKeyDown():isc.EventHandler.ctrlKeyDown()){this.setCellSelection(b,c,!d);return true}else if(d)if(isc.EventHandler.rightButtonDown()){this.deselectOnDragMove=true;return false}else if(this.dragSelection){if(this.simpleDeselect){this.deselectAll();return this.selectOriginOnDragMove=true}this.selectSingleCell(b,c);return true}else{if(this.simpleDeselect)this.deselectAllOnMouseUp=true;else this.deselectOthersOnMouseUp=e.length>1;return false}else{this.selectSingleCell(b,
c);return true}},isc.A.selectOnDragMove=function(a,b,c){var d=this.startRow,e=this.startCol,f=this.lastRow,g=this.lastCol;if(b<0||c<0)this.logWarn("selectOnDragMove: aborting due to negative coordinate: "+[b,c]);else if(!(b==f&&c==g))if(a.selectionType==isc.Selection.SINGLE)this.selectSingleCell(b,c);else{a=[];if(this.selectOriginOnDragMove){this.$24g(d,e);a.add([d,e]);this.selectOriginOnDragMove=false}else if(this.deselectOnDragMove||this.deselectAllOnMouseUp||this.deselectOthersOnMouseUp){this.selectSingleCell(d,
e);this.deselectAllOnMouseUp=this.deselectOthersOnMouseUp=this.deselectOnDragMove=false}if(b!=f&&(f>=d&&d>=b||b>=d&&d>=f)||c!=g&&(g>=e&&e>=c||c>=e&&e>=g)){this.$24g(d,e,false);a.addList(this.$24h(d,e,f,g,false));this.$24g(d,e,true);a.addList(this.$24h(d,e,b,c,true));this.changedCells=a;this.$24i();this.lastRow=b;this.lastCol=c}else{if(b>=0&&b!=f){if(d>=f&&f>b)a.addList(this.$24h(b,e,f-1,g,true));else if(d>=b&&b>f)a.addList(this.$24h(f,e,b-1,g,false));else if(d<=b&&b<f)a.addList(this.$24h(b+1,e,f,
g,false));else d<=f&&f<b&&a.addList(this.$24h(f+1,e,b,g,true));f=this.lastRow=b}if(c>=0&&c!=g){if(e>=g&&g>c)a.addList(this.$24h(d,c,f,g-1,true));else if(e>=c&&c>g)a.addList(this.$24h(d,g,f,c-1,false));else if(e<=c&&c<g)a.addList(this.$24h(d,c+1,f,g,false));else e<=g&&g<c&&a.addList(this.$24h(d,g+1,f,c,true));this.lastCol=c}this.changedCells=a;this.$24i()}}},isc.A.selectOnMouseUp=function(a,b,c){if(a.selectionType==isc.Selection.NONE)return false;if(this.deselectOthersOnMouseUp){this.selectSingleCell(b,
c);this.deselectOthersOnMouseUp=false;return true}else if(this.deselectRecordOnMouseUp){this.deselectCell(b,c);this.deselectRecordOnMouseUp=false;return true}else if(this.deselectAllOnMouseUp){this.deselectAll();this.deselectAllOnMouseUp=false}else return false});isc.B._maxIndex=isc.C+37;if(isc.Window){isc.ClassFactory.defineClass("FieldEditor","Window");isc.A=isc.FieldEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.isModal=true;
isc.A.showMinimizeButton=false;isc.A.autoCenter=true;isc.A.autoSize=true;isc.A.defaultWidth=475;isc.A.visibleFieldsConstructor="ListGrid";isc.A.hiddenFieldsConstructor="ListGrid";isc.A.showFooter=false;isc.A.title="Customize Fields";isc.A.showInstructionsPane=true;isc.A.bodyProperties={layoutMargin:5};isc.A.instructionsPaneDefaults={_constructor:isc.HTMLFlow,padding:5,height:1};isc.A.instructions="Drag fields between grids to control which fields are visible and the order in which fields are displayed";
isc.B.push(isc.A.initWidget=function(){this.invokeSuper(isc.FieldEditor,"initWidget");if(this.fields){this.addItem(this.addAutoChild("instructionsPane",{contents:this.instructions}));this.visibleFieldsDefaults=this.hiddenFieldsDefaults={height:200,width:200,leaveScrollbarGap:false,canDragRecordsOut:true,canAcceptDroppedRecords:true,canReorderRecords:true,dragDataAction:"move"};var a=this.visibleFieldsGrid=this.createAutoChild("visibleFields",{fields:[{name:"title",title:"Visible Fields",formatCellValue:"value || record.name"}]}),
b=this.fields,c=b.findAll("visible",null);b=b.findAll("visible",false);a.setData(c);c=this.hiddenFieldsGrid=this.createAutoChild("hiddenFields",{canReorderRecords:false,fields:[{name:"title",title:"Hidden Fields",formatCellValue:"value || record.name"}]});c.setData(b);this.addItem(isc.HLayout.create({membersMargin:10,layoutMargin:5,height:1,overflow:"visible",members:[a,isc.VStack.create({width:32,height:74,layoutAlign:"center",membersMargin:10,members:[isc.Img.create({src:"[SKINIMG]actions/back.png",
width:16,height:16,visFieldsGrid:a,hidFieldsGrid:c,layoutAlign:"center",click:"this.visFieldsGrid.transferSelectedData(this.hidFieldsGrid)"}),isc.Img.create({src:"[SKINIMG]actions/forward.png",width:16,height:16,layoutAlign:"center",visFieldsGrid:a,hidFieldsGrid:c,click:"this.hidFieldsGrid.transferSelectedData(this.visFieldsGrid)"})]}),c]}));this.addItem(this.createAutoChild("okButton",{autoDraw:false,title:"Done",fieldEditor:this,click:function(){this.creator.okClick()},layoutAlign:"center"},isc.IButton))}else isc.logWarn("FieldEditor can not be created because no fields were provided")},
isc.A.okClick=function(){var a=isc.clone(this.visibleFieldsGrid.data),b=isc.clone(this.hiddenFieldsGrid.data);a.setProperty("visible",null);b.setProperty("visible",false);a.addList(b);b=a.getProperties(["name","visible"]);this.done(a,b);this.hide();this.destroy()},isc.A.done=function(){});isc.B._maxIndex=isc.C+3}isc.ClassFactory.defineClass("FormulaBuilder","VLayout");isc.A=isc.FormulaBuilder.getPrototype();isc.A.vertical=true;isc.A.padding=10;isc.A.showFormulaField=true;isc.A.formulaFieldDefaults=
{type:"text",formItemType:"AutoFitTextAreaItem",height:20,width:"*",hoverWidth:300,keyPress:function(){this.form.creator.autoTest&&this.fireOnPause("autoTest",{target:this.form.creator,methodName:"testFunction"},this.form.creator.autoTestDelay)}};isc.A.showTitleField=true;isc.A.titleFieldDefaults={type:"text",width:"*"};isc.A.showHelpIcon=true;isc.A.helpIconDefaults={src:"[SKIN]actions/help.png"};isc.A.autoHideCheckBoxLabel="Auto hide fields used in formula";isc.A.showAutoHideCheckBox=true;isc.A.autoHideCheckBoxDefaults=
{type:"boolean"};isc.A.builderTypeText="Formula";isc.A.helpTextIntro="For basic arithmetic, type in symbols (+-/%) directly.<P>The following functions are also available:";isc.A.fieldKeyDefaults={_constructor:"ListGrid",leaveScrollbarGap:false,showResizeBar:true,autoFitData:"vertical",autoFitMaxRecords:6,autoFetchData:true,showRollOver:false,selectionType:"none",fields:[{name:"mappingKey",title:this.keyColumnTitle,width:40},{name:"title",title:this.sourceFieldColumnTitle},{name:"name",showIf:"false"},
{name:"type",showIf:"false"},{name:"length",showIf:"false"}]};isc.A.instructionsTextStart="The following fields are available for use in this ${builderType}";isc.A.instructionsDefaults={_constructor:"Label",height:1,extraSpace:10,overflow:"visible"};isc.A.titleFormDefaults={_constructor:"DynamicForm",extraSpace:5};isc.A.formulaFormDefaults={_constructor:"DynamicForm",extraSpace:5};isc.A.hideFieldsFormDefaults={_constructor:"DynamicForm",extraSpace:20};isc.A.sampleHeaderDefaults={_constructor:"Label",
height:15,extraSpace:5};isc.A.sampleLabelDefaults={_constructor:"Canvas",height:40,width:"100%",align:"center",valign:"top",extraSpace:10,showHover:true,overflow:"hidden",styleName:"sampleOutput"};isc.A.messageLabelDefaults={_constructor:"Label",height:20,width:"100%",align:"right",valign:"center",overflow:"hidden",showHover:true};isc.A.buttonLayoutDefaults={_constructor:"HLayout",width:"100%",align:"right"};isc.A.cancelButtonDefaults={_constructor:"IButton",autoParent:"buttonLayout",width:70,extraSpace:10,
click:function(){this.creator.completeEditing(true)}};isc.A.testButtonDefaults={_constructor:"IButton",autoParent:"buttonLayout",width:70,extraSpace:10,click:function(){this.creator.testFunction()}};isc.A.saveAddAnotherButtonDefaults={_constructor:"IButton",autoParent:"buttonLayout",autoFit:true,extraSpace:10,click:function(){this.creator.titleForm.validate()&&this.creator.saveAddAnother()}};isc.A.saveButtonDefaults={_constructor:"IButton",autoParent:"buttonLayout",autoFit:true,click:function(){this.creator.titleForm.validate()&&
this.creator.save()}};isc.A.fieldType="float";isc.A.allowEscapedKeys=false;isc.A.invalidBuilderPrompt="Invalid ${builderType}: ${errorText}";isc.A.invalidBlankPrompt="Invalid blank ${builderType}";isc.A.validBuilderPrompt="Valid ${builderType}";isc.A.helpWindowTitle="${builderType} Help";isc.A.titleFieldTitle="Title";isc.A.defaultNewFieldTitle="New Field";isc.A.keyColumnTitle="Key";isc.A.sourceFieldColumnTitle="Source Field";isc.A.cancelButtonTitle="Cancel";isc.A.saveAddAnotherButtonTitle="Save & Add Another";
isc.A.saveButtonTitle="Save";isc.A.saveConfirmationPrompt="Save changes to this ${builderType}?";isc.A.invalidGeneratedFunctionPrompt="The generated function is invalid - Check your ${builderType} and retry.";isc.A.sampleHeaderTitle="Sample:";isc.A.testButtonTitle="Test";isc.A=isc.FormulaBuilder.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.warnDuplicateTitlesMessage="Another field already has the title '${fieldTitle}'.  Continue anyway?";
isc.A.autoTest=true;isc.A.autoTestDelay=200;isc.A.samplePrompt="<nobr>For Record: ${title}</nobr><br><nobr>Output: ${output}</nobr>";isc.B.push(isc.A.getValue=function(){return this.formulaField?this.formulaField.getValue():null},isc.A.setValue=function(a){this.formulaField&&this.formulaField.setValue(a)},isc.A.setFormula=function(a){this.setValue(a)},isc.A.getFieldIdProperty=function(){return this.getClass().getFieldIdProperty(this.component)},isc.A.getTitle=function(){return this.titleField?this.titleField.getValue():
null},isc.A.setTitle=function(a){this.titleField&&this.titleField.setValue(a)},isc.A.getFieldFromMappingKey=function(a){for(var b=this.getAvailableFields(),c=0;c<b.length;c++){var d=b.get(c);if(d.mappingKey==a)return d}return null},isc.A.getFields=function(){if(this.fields)return this.fields;if(this.component)return this.component.getAllFields();return isc.getValues(this.dataSource.getFields())},isc.A.shouldHideUsedFields=function(){return this.showAutoHideCheckBox&&this.autoHideCheckBox&&this.autoHideCheckBox.getValue()?
this.autoHideCheckBox.getValue():false},isc.A.getHelpText=function(){return this.getHoverText()},isc.A.initWidget=function(){this.Super("initWidget",arguments);this.dataSource=isc.DataSource.get(this.dataSource);var a=this.getAvailableFields();if(!this.field)this.field={name:this.getUniqueFieldName(),title:this.defaultNewFieldTitle,type:this.fieldType,width:"50",canFilter:false,canSortClientOnly:true,originalOrder:this.availablefields.length};this.instructions=this.createAutoChild("instructions",
{contents:this.instructionsTextStart.evalDynamicString(this,{builderType:this.builderTypeText})});this.addMember(this.instructions);this.fieldKeyDS=isc.DataSource.create({ID:this.getID()+"DS",clientOnly:true,testData:a,fields:[{name:"mappingKey",title:this.keyColumnTitle,width:40},{name:"title",title:this.sourceFieldColumnTitle},{name:"name",showIf:"false",primaryKey:true},{name:"type",showIf:"false"},{name:"length",showIf:"false"}]});this.fieldKey=this.createAutoChild("fieldKey",{dataSource:this.fieldKeyDS});
this.fieldKey.showFilterEditor!==false&&this.fieldKey.autoFitMaxRecords&&a.length>this.fieldKey.autoFitMaxRecords&&this.fieldKey.setShowFilterEditor(true);this.addMember(this.fieldKey);if(this.showTitleField){this.addAutoChild("titleForm",{fields:[isc.addProperties(this.titleFieldDefaults,this.titleFieldProperties,{title:this.titleFieldTitle,name:"titleField"})]});this.titleField=this.titleForm.getField("titleField");this.setTitle(this.field.title||isc.DataSource.getAutoTitle(this.field.name))}if(this.showFormulaField){this.addAutoChild("formulaForm",
{fields:[isc.addProperties({title:this.builderTypeText},this.formulaFieldDefaults,this.formulaFieldProperties,this.showHelpIcon?{icons:[isc.addProperties({prompt:this.getHelpText()},this.helpIconDefaults,this.helpIconProperties,{click:"form.creator.showHelpWindow();"})]}:{},{name:"formulaField"})]});this.formulaField=this.formulaForm.getField("formulaField");if(this.showHelpIcon)this.helpIcon=this.formulaField.icons[0]}this.addAutoChild("messageLabel");this.addAutoChild("sampleHeader",{contents:this.sampleHeaderTitle});
this.addAutoChild("sampleLabel");if(this.showAutoHideCheckBox){this.addAutoChild("hideFieldsForm",{fields:[isc.addProperties({title:this.autoHideCheckBoxLabel},this.autoHideCheckBoxDefaults,this.autoHideCheckBoxProperties,{name:"autoHide"})]});this.autoHideCheckBox=this.hideFieldsForm.getField("autoHide")}this.addAutoChild("buttonLayout");this.addAutoChild("cancelButton",{title:this.cancelButtonTitle});this.autoTest||this.addAutoChild("testButton",{title:this.testButtonTitle});this.addAutoChild("saveAddAnotherButton",
{title:this.saveAddAnotherButtonTitle});this.addAutoChild("saveButton",{title:this.saveButtonTitle});this.showTitleField?this.titleForm.focusInItem(this.titleField):this.formulaForm.focusInItem(this.formulaField);this.setInitialValue();this.editMode&&this.autoTest&&this.testFunction()},isc.A.getUniqueFieldName=function(){return this.getNewUniqueFieldName("formulaField")},isc.A.getNewUniqueFieldName=function(a){if(!a||a=="")a="field";for(var b=this.getFields(),c=1,d=a.length,e=0;e<b.length;e++){var f=
b.get(e);if(f.name.startsWith(a)){f=f.name.substr(d);if((f=new Number(f))&&f>=c)c=f+1}}return a+c},isc.A.destroy=function(){this.fieldKeyDS&&this.fieldKeyDS.destroy();this.Super("destroy",arguments)},isc.A.setInitialValue=function(){if(this.editMode&&this.field.userFormula){this.initialValue=this.field.userFormula.text;if(this.field.userFormula.allowEscapedKeys)this.allowEscapedKeys=this.field.userFormula.allowEscapedKeys}this.initialValue=this.initialValue||"";this.setValue(this.initialValue)},isc.A.showHelpWindow=
function(){var a=this.locatorParent,b=a?a.getTop():this.top,c=a?a.getLeft():this.left,d=a?a.getWidth():this.width,e=a?a.getVisibleHeight():this.getVisibleHeight();a&&a.centerInPage();if(this.helpWindow&&this.helpWindow!=null)this.hideHelpWindow();else{this.helpIcon.prompt=null;this.formulaField.stopHover();c-=d/2;a&&a.setLeft(c);this.helpWindow=isc.Window.create({autoDraw:true,title:this.helpWindowTitle.evalDynamicString(this,{builderType:this.builderTypeText}),showMinimizeButton:false,showMaximizeButton:false,
showCloseButton:false,isModal:false,headerIconProperties:{src:"[SKIN]actions/help.png"},items:[isc.Label.create({contents:this.getHelpText(),padding:10})]});this.helpWindow.moveTo(c+d,b);this.helpWindow.resizeTo(d,e)}},isc.A.hideHelpWindow=function(){if(this.helpWindow){this.helpWindow.destroy();this.helpWindow=null}this.helpIcon.prompt=this.getHelpText();this.formulaField.stopHover()},isc.A.getHoverText=function(){var a=isc.SB.create();a.append("<b>",this.helpTextIntro,"</b> <P>");a.append("<ul>");
for(var b=isc.MathFunction.getRegisteredFunctionIndex(),c=this.mathFunctions,d=0;d<c.length;d++){var e=b[c[d]];a.append("<li> <b>",e.name,": </b> ",e.description,"<p>");a.append("<i>usage: ",e.usage,"</i> </li>")}a.append("</ul>");return a.toString()},isc.A.getAvailableFields=function(){if(!this.availableFields)this.availableFields=this.getClass().getAvailableFields(this.getFields(),this.field);return this.availableFields},isc.A.getUsedFields=function(){return this.getClass().getUsedFields(this.getValue(),
this.getAvailableFields(),this.field)},isc.A.getCompleteValueObject=function(){var a=this.getUsedFields(),b=this.generateFunction();b={sortNormalizer:b,$65w:b,type:this.fieldType,userFormula:{text:this.getValue(),formulaVars:{}}};var c=this.getFieldIdProperty();if(this.allowEscapedKeys)b.userFormula.allowEscapedKeys=true;for(var d=0;d<a.length;d++){var e=a.get(d);b.userFormula.formulaVars[e.mappingKey]=e[c]}return b},isc.A.getBasicValueObject=function(){var a=this.getUsedFields(),b={text:this.getValue(),
formulaVars:{}},c=this.getFieldIdProperty();if(this.allowEscapedKeys)b.allowEscapedKeys=true;for(var d=0;d<a.length;d++){var e=a.get(d);b.formulaVars[e.mappingKey]=e[c]}return b},isc.A.getUpdatedFieldObject=function(){return isc.addProperties(this.field,{title:this.getTitle()},this.getCompleteValueObject())},isc.A.testFunction=function(){var a=this.getClass().testFunction(this.field,this.getBasicValueObject(),this.component,this.getFields()),b="";b=a.failedGeneration||a.failedExecution?this.invalidBuilderPrompt.evalDynamicString(this,
{builderType:this.builderTypeText,errorText:a.errorText}):a.emptyTestValue?this.invalidBlankPrompt.evalDynamicString(this,{builderType:this.builderTypeText}):this.validBuilderPrompt.evalDynamicString(this,{builderType:this.builderTypeText});this.setTestMessage(b);this.setSamplePrompt(this.getSamplePrompt(a));return a},isc.A.getTestRecord=function(){if(this.testRecord)return this.testRecord;return this.getClass().getTestRecord(this.component,this.getAvailableFields())},isc.A.setTestMessage=function(a){this.messageLabel.setContents(a)},
isc.A.setSamplePrompt=function(a){this.sampleLabel.setContents("<center>"+a+"</center>")},isc.A.generateFunction=function(){return this.getClass().generateFunction(this.getBasicValueObject(),this.getUsedFields(),this.component)},isc.A.saveAddAnother=function(){this.restartBuilder=true;this.save()},isc.A.fieldTitleIsUnique=function(a){var b=this.component?this.component.getAllFields():null;a=b?b.findAll({title:a}):null;b=true;if(a&&a.length>0)for(var c=0;c<a.length;c++)if(a[c].name!=this.field.name){b=
false;break}return b},isc.A.save=function(){var a=this.testFunction();if(this.warnDuplicateTitles&&!this.duplicateTitleAccepted){var b=this.getTitle();if(!this.fieldTitleIsUnique(b)){a=this.warnDuplicateTitlesMessage.evalDynamicString(this,{fieldTitle:b});var c=this;isc.confirm(a,function(d){if(d){c.duplicateTitleAccepted=true;c.delayCall("save")}else c.restartBuilder=false});return null}}delete this.duplicateTitleAccepted;if(a.emptyTestValue)isc.warn(this.invalidBlankPrompt.evalDynamicString(this,
{builderType:this.builderTypeText}));else a.failedGeneration||a.failedExecution?isc.warn(this.invalidGeneratedFunctionPrompt.evalDynamicString(this,{builderType:this.builderTypeText})):this.completeEditing(false)},isc.A.completeEditing=function(a,b){if(this.cancelled=a)if(this.editMode&&!b)if(this.getValue()!=this.initialValue){var c=this,d=this.saveConfirmationPrompt.evalDynamicForm(this,{builderType:this.builderTypeText});isc.confirm(d,function(e){e?c.save():c.completeEditing(true,true)});return}this.helpWindow&&
this.hideHelpWindow();if(this.availableFields){this.availableFields=this.availableFields.sortByProperty("originalOrder",true);this.availableFields.clearProperty("originalOrder")}this.fireOnClose()},isc.A.fireOnClose=function(){},isc.A.getSamplePrompt=function(a){var b=this.dataSource?this.dataSource.getTitleField():isc.firstKey(a.record),c=a.result!=null?a.result:this.invalidBuilderPrompt.evalDynamicString(this,{builderType:this.builderTypeText});return this.samplePrompt.evalDynamicString(this,{title:a.record[b],
output:c})});isc.B._maxIndex=isc.C+34;isc.A=isc.FormulaBuilder;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.mappingKeyForIndex=function(a){for(var b="",c=Math.floor(a/26),d=0;d<c;d++)b+="A";b+=String.fromCharCode(65+a%26);return b},isc.A.getFieldIdProperty=function(a){return a?a.fieldIdProperty:"name"},isc.A.getAvailableFields=function(a,b){var c=[],d=0;if(!a)return c;for(var e=0;e<a.getLength();e++){var f=a.get(e),g=f.type;f.originalOrder=
e;if(f.name!=b.name)if(f.userFormula||isc.SimpleType.inheritsFrom(g,"integer")||isc.SimpleType.inheritsFrom(g,"float")){f.mappingKey=isc.FormulaBuilder.mappingKeyForIndex(d++);if(!f.title)f.title=isc.DataSource.getAutoTitle(f.name);c.add(f)}}d=b&&b.userFormula?b.userFormula.formulaVars:{};for(var h in d){e=c.find("mappingKey",h);f=c.find("name",d[h]);g=f.mappingKey;f.mappingKey=e.mappingKey;e.mappingKey=g}return c=c.sortByProperties(["mappingKey"],[true],[function(i,j){return i[j].length==1?" "+i[j]:
i[j]}])},isc.A.getUsedFields=function(a,b,c){b=this.getAvailableFields(b,c);c=[];if(!b||!a)return c;b=b.sortByProperties(["mappingKey"],[false],[function(f,g){return f[g].length==1?" "+f[g]:f[g]}]);for(var d=0;d<b.length;d++){var e=b.get(d);if(this.allowEscapedKeys){if(a.indexOf("#"+e.mappingKey)>=0||a.indexOf("#{"+e.mappingKey+"}")>=0)c.add(e)}else a.indexOf(e.mappingKey)>=0&&c.add(e)}return c},isc.A.getFieldDetailsFromValue=function(a,b,c){c=this.getFieldIdProperty(c);var d={usedFields:[],missingFields:[]},
e;for(e in a){var f=a[e],g=b.findIndex(c,f);if(b[g]){f=isc.addProperties({},b[g]);f.mappingKey=e;d.usedFields.add(f)}else{isc.logWarn("Field "+f+" is not in the list of available-fields");d.missingFields.add(f)}}return d},isc.A.testFunction=function(a,b,c,d){a={};try{a.component=c;a.record=this.getTestRecord(c,d);if(b.text==""){a.emptyTestValue=true;return a}a.jsFunction=this.generateFunction(b,d,c);a.result=a.jsFunction(a.record,c)}catch(e){if(!a.jsFunction)a.failedGeneration=true;a.failedExecution=
true;a.errorText=e.message}return a},isc.A.getTestRecord=function(a,b){var c=this.getFieldIdProperty(a),d;if(a){d=a.getSelectedRecord();if(!d)if(a.body)d=(d=a.body.getVisibleRows())?a.getRecord(d[0]):a.data.get(0);else d=a.data.get(0)}if(!d&&b){d=[];for(var e=0;e<b.length;e++){var f=b.get(e);if(f.userFormula)f.$65w=f.sortNormalizer=isc.FormulaBuilder.generateFunction(f.userFormula,b,a);d[f[c]]=f.$65w?f.$65w(d,a):f.type?isc.SimpleType.inheritsFrom(f.type,"integer")||isc.SimpleType.inheritsFrom(f.type,
"float")?1:f[c]:f[c]}}return d},isc.A.generateFunction=function(a,b,c){var d=isc.SB.create(),e=a.text,f=this.getFieldIdProperty(c),g=this.getFieldDetailsFromValue(a.formulaVars,b,c);b=g.usedFields;g=g.missingFields;b=b.sortByProperties(["mappingKey"],[false],[function(h,i){return h[i].length==1?" "+h[i]:h[i]}]);if(g.length==0){if(b.length>0){d.append("var ");for(c=0;c<b.length;c++){g=b.get(c);c>0&&d.append("        ");d.append(g.mappingKey,"= (record['",g[f],"'] ? ","record['",g[f],"'] : component ? ",
"component.getStandaloneFieldValue(record, '",g[f],"', true) : 0)");d.append(c==b.length-1?";":",","\n");if(a.allowEscapedKeys){e=e.replaceAll("#"+g.mappingKey,g.mappingKey);e=e.replaceAll("#{"+g.mappingKey+"}",g.mappingKey)}}d.append("\n")}a=isc.MathFunction.getRegisteredFunctions();if(a.length>0){d.append("var functions=isc.MathFunction.getRegisteredFunctionIndex(),\n");for(c=0;c<a.length;c++){g=a.get(c);d.append("        ");d.append(g.name,"=","functions.",g.name,".jsFunction");d.append(c==a.length-
1?";":",","\n")}d.append("\n")}d.append("var value="+e+";if (isNaN(value)) return (component && component.badFormulaResultValue) || '.'; return value;")}else{this.logWarn("Formula failed due to missing fields: "+g.join(", ")+".");e=c&&c.badFormulaResultValue||".";e="'"+e+"'";d.append("return ",e,";")}d=d.toString();return new Function("record,component",d)});isc.B._maxIndex=isc.C+8;isc.ClassFactory.defineClass("SummaryBuilder","FormulaBuilder");isc.A=isc.SummaryBuilder.getPrototype();isc.A.builderTypeText=
"Summary";isc.A.fieldType="text";isc.A.autoHideCheckBoxLabel="Auto hide fields used in Summary";isc.A.helpTextIntro="Building Summary Columns";isc.A.allowBasicMultiCharKeys=false;isc.A=isc.SummaryBuilder.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.setSummary=function(a){this.setValue(a)},isc.A.setInitialValue=function(){if(this.editMode&&this.field.userSummary)this.initialValue=this.field.userSummary.text;this.initialValue=
this.initialValue||"";this.setValue(this.initialValue)},isc.A.getUniqueFieldName=function(){return this.getNewUniqueFieldName("summaryField")},isc.A.getHoverText=function(){var a=isc.SB.create(),b=this.getTestRecord(),c=this.getFieldIdProperty(),d=this.getFieldFromMappingKey("A"),e=d[c];d=d?d.title||d.name:null;var f=this.getFieldFromMappingKey("B");c=f?f[c]:null;var g=f?f.title||f.name:null;a.append("<b>",this.helpTextIntro,"</b> <P>");a.append("Summary columns are user-created fields that combine dynamic-values from other fields in the current record with static text specified by the user.<P>");
a.append("Dynamic-values are specified by prefixing a mapping-key from the table opposite with #");this.getFields().length>26&&a.append(", or by using #{key} when the key is 2 or more characters long,");a.append(" and everything else is copied directly into the output.<P>");if(this.dataSource){a.append("For example, in the current DataSource, key <b>A</b> maps to field <i>",d,"</i> and <b>B</b> is <i>",!f?"missing":g,"</i>.<P>");a.append("So, if we enter the Summary format-string as:<P>","<i>#A is relative to #B</i><P>",
"then example output using the current data would look like:<P>");if(b)a.append("<i>",b[e]," is relative to ",!f?"{missing}":b[c],"</i><P>")}return a.toString()},isc.A.getAvailableFields=function(){if(!this.availableFields)this.availableFields=this.getClass().getAvailableFields(this.getFields(),this.field);return this.availableFields},isc.A.getUsedFields=function(){return this.getClass().getUsedFields(this.getValue(),this.getAvailableFields(),this.allowBasicMultiCharKeys,this.field)},isc.A.getCompleteValueObject=
function(){var a=this.getUsedFields(),b=this.generateFunction(),c=this.getFieldIdProperty();b={sortNormalizer:b,$652:b,type:this.fieldType,userSummary:{text:this.getValue()}};if(a&&a.length>0){b.userSummary.summaryVars={};for(var d=0;d<a.length;d++){var e=a.get(d);b.userSummary.summaryVars[e.mappingKey]=e[c]}}return b},isc.A.getBasicValueObject=function(){for(var a=this.getUsedFields(),b=this.getFieldIdProperty(),c={text:this.getValue(),summaryVars:{}},d=0;d<a.length;d++){var e=a.get(d);c.summaryVars[e.mappingKey]=
e[b]}return c},isc.A.generateFunction=function(){return this.getClass().generateFunction(this.getBasicValueObject(),this.getUsedFields(),this.component)},isc.A.initWidget=function(){this.Super("initWidget",arguments)});isc.B._maxIndex=isc.C+10;isc.A=isc.SummaryBuilder;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getAvailableFields=function(a,b){var c=[];if(!a)return c;for(var d=0,e=0;d<a.getLength();d++){var f=a.get(d);if(f.name!=b.name){f.originalOrder=
d;if(!f.userSummary){f.mappingKey=isc.FormulaBuilder.mappingKeyForIndex(e++);if(!f.title)f.title=isc.DataSource.getAutoTitle(f.name);c.add(f)}}}d=b&&b.userSummary?b.userSummary.summaryVars:{};for(var g in d){e=c.find("mappingKey",g);f=c.find("name",d[g]);var h=f.mappingKey;f.mappingKey=e.mappingKey;e.mappingKey=h}return c=c.sortByProperties(["mappingKey"],[true],[function(i,j){return i[j].length==1?" "+i[j]:i[j]}])},isc.A.getUsedFields=function(a,b,c,d){b=this.getAvailableFields(b,d);d=[];if(!b||
!a)return d;b=b.sortByProperties(["mappingKey"],[false],[function(g,h){return g[h].length==1?" "+g[h]:g[h]}]);for(var e=0;e<b.length;e++){var f=b.get(e);if(a.indexOf("#{"+f.mappingKey+"}")>=0)d.add(f);else if((f.mappingKey.length==1||c)&&a.indexOf("#"+f.mappingKey)>=0)d.add(f)}return d},isc.A.testFunction=function(a,b,c,d){var e={},f=this.getFieldIdProperty(c);try{e.component=c;e.record=this.getTestRecord(c,d);if(b.text==""){e.emptyTestValue=true;return e}e.jsFunction=this.generateFunction(b,d,c);
e.result=e.jsFunction(e.record,a[f],c)}catch(g){if(!e.jsFunction)e.failedGeneration=true;e.failedExecution=true;e.errorText=g.message}return e},isc.A.generateFunction=function(a,b,c){var d=isc.SB.create(),e=a.text,f=this.getFieldIdProperty(c);a=this.getFieldDetailsFromValue(a.summaryVars,b,c).usedFields;a=a.sortByProperties(["mappingKey"],[false],[function(h,i){return h[i].length==1?" "+h[i]:h[i]}]);if(a.length>0){d.append("var ");for(b=0;b<a.length;b++){var g=a.get(b);b>0&&d.append("        ");d.append(g.mappingKey,
"=(component ? component.getStandaloneFieldValue(record,'",g[f],"') : record['",g[f],"']");d.append(b==a.length-1?");":"),","\n");e=e.replaceAll("#{"+g.mappingKey+"}","'+"+g.mappingKey+"+'");e=e.replaceAll("#"+g.mappingKey,"'+"+g.mappingKey+"+'")}d.append("\n")}e=e.replace(/(#({[A-Z][A-Z]?}|[A-Z][A-Z]?))/g,c&&c.missingSummaryFieldValue||"-");if(e.substr(0,2)=="'+")e=e.substr(2);else if(e.substr(0,1)!="'")e="'"+e;if(e.substr(e.length-2)=="+'")e=e.substr(0,e.length-2);else if(e.substr(e.length-1)!=
"'")e+="'";d.append("return ",e,";");c=d.toString();return new Function("record,fieldName,component",c)});isc.B._maxIndex=isc.C+4;isc.defineClass("HiliteRule","HLayout");isc.A=isc.HiliteRule.getPrototype();isc.A.height=1;isc.A.width="100%";isc.A.overflow="visible";isc.A.clauseConstructor="FilterClause";isc.A.clauseProperties={width:"100%",fieldPickerWidth:"*",operatorPickerWidth:140,valueItemWidth:130,excludeNonFilterableFields:false};isc.A.hiliteFormDefaults={_constructor:"DynamicForm",numCols:3,
colWidths:[90,40,80],width:210,items:[{name:"colorType",type:"SelectItem",showTitle:false,valign:"center",valueMap:{foreground:"Foreground",background:"Background"},defaultValue:"foreground",width:"*"},{name:"color",title:"Color",type:"ColorItem",width:"*"}]};isc.A.advancedClauseLayoutDefaults={_constructor:"HLayout",height:1,width:"100%"};isc.A.advancedClauseLabelDefaults={_constructor:"Label",autoParent:"advancedClauseLayout",width:"*",overflow:"hidden",height:18,valign:"center",wrap:false,padding:1};
isc.A.advancedClauseEditButtonDefaults={_constructor:"ImgButton",autoParent:"advancedClauseLayout",width:18,height:18,layoutAlign:"center",src:"[SKINIMG]/actions/edit.png",showRollOver:false,showDown:false,showDisabled:false,click:function(){this.creator.editAdvancedRule()}};isc.A.showRemoveButton=true;isc.A.removeButtonPrompt="Remove";isc.A.removeButtonDefaults={_constructor:isc.ImgButton,width:18,height:18,layoutAlign:"center",src:"[SKIN]/actions/remove.png",showRollOver:false,showDown:false,showDisabled:false,
hoverWidth:80,click:function(){this.creator.remove()}};isc.A=isc.HiliteRule.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function(){if(!this.isAdvanced&&this.hilite){var a=this.hilite.criteria;if(a&&a.criteria&&isc.isAn.Array(a.criteria))this.isAdvanced=true}if(isc.isA.String(this.dataSource))this.dataSource=isc.DS.getDataSource(this.dataSource);this.hilite&&this.checkHiliteProperties(this.hilite);if(this.isAdvanced){a=
isc.FilterBuilder.getFilterDescription(this.hilite.criteria,this.dataSource);var b=a.indexOf(isc.FilterBuilder.missingFieldPrompt)>=0;this.membersMargin=2;this.addAutoChild("advancedClauseLayout");this.addAutoChild("removeButton",{disabled:b?true:false,autoParent:"advancedClauseLayout"});this.addAutoChild("advancedClauseLabel",{contents:a,prompt:a,disabled:b?true:false});this.addAutoChild("advancedClauseEditButton",{disabled:b?true:false})}else{b=this.dataSource.getField(this.fieldName)==null;this.addAutoChild("clause",
{dataSource:this.dataSource,field:this.dataSource.getField(this.fieldName),fieldName:this.fieldName,criterion:this.hilite?this.hilite.criteria:null,showRemoveButton:this.showRemoveButton,disabled:b?true:false,remove:function(){this.creator.remove()}});this.addMember(this.clause);this.addAutoChild("hiliteForm",{disabled:b?true:false});if(this.hilite)this.hiliteForm.setValues({colorType:this.hilite.textColor?"foreground":"background",color:this.hilite.textColor?this.hilite.textColor:this.hilite.backgroundColor});
this.addMember(this.hiliteForm)}},isc.A.checkHiliteProperties=function(a){if(a)if(a.cssText)for(var b=a.cssText.split(";"),c=0;c<b.length;c++){var d=b[c].split(":");if(d[0]=="textColor"&&!a.textColor)a.textColor=d[1];else if(d[0]=="backgroundColor"&&!a.backgroundColor)a.backgroundColor=d[1]}else if(a.textColor||a.backgroundColor){a.cssText="";if(a.textColor)a.cssText+="color:"+a.textColor+";";if(a.backgroundColor)a.cssText+="background-color:"+a.backgroundColor+";";alert(a.cssText)}},isc.A.remove=
function(){this.markForDestroy()},isc.A.getHilite=function(){if(this.isAdvanced)return this.hilite;var a=this.hilite=isc.addProperties(this.hilite||{},{fieldName:this.fieldName}),b=this.hiliteForm.getValue("colorType"),c=this.hiliteForm.getValue("color"),d=this.clause.getCriterion();a.criteria=d;if(b=="foreground"){a.textColor=c;a.cssText="color:"+c+";"}else{a.backgroundColor=c;a.cssText="background-color:"+c+";"}if(this.hilite&&this.hilite.id)a.id=this.hilite.id;return a},isc.A.editAdvancedRule=
function(){var a=this.getID()+".editAdvancedRuleReply(hilite)";this.advancedHiliteDialog=isc.Window.create({title:"Advanced Hilite Editor",width:Math.round(isc.Page.getWidth()/2),height:1,isModal:true,showModalMask:true,showResizer:true,autoSize:true,autoCenter:true,items:[isc.AdvancedHiliteEditor.create({width:"100%",height:"100%",dataSource:this.fieldDataSource?null:this.dataSource,fieldDataSource:this.fieldDataSource,hilite:this.hilite,callback:a})]});this.advancedHiliteDialog.show()},isc.A.editAdvancedRuleReply=
function(a){this.advancedHiliteDialog.hide();this.advancedHiliteDialog.markForDestroy();if(a){this.hilite=a;a=isc.FilterBuilder.getFilterDescription(this.hilite.criteria,this.dataSource);this.advancedClauseLabel.setContents(a);this.advancedClauseLabel.setPrompt(a)}});isc.B._maxIndex=isc.C+6;isc.defineClass("HiliteEditor","VLayout");isc.A=isc.HiliteEditor.getPrototype();isc.A.mainLayoutDefaults={_constructor:"HLayout",width:"100%",extraSpace:5};isc.A.fieldLayoutDefaults={_constructor:"VLayout",width:180,
autoParent:"mainLayout",showResizeBar:true};isc.A.addAdvancedHiliteButtonDefaults={_constructor:"IButton",title:"Add Advanced Rule",align:"center",width:"100%",height:22,autoParent:"fieldLayout",click:function(){this.creator.addAdvancedHilite()}};isc.A.fieldListDefaults={_constructor:"ListGrid",width:"100%",height:"*",autoParent:"fieldLayout",fields:[{name:"name",showIf:"false"},{name:"title",title:"Available Fields"}],recordClick:function(a,b){this.creator.addHilite(b)}};isc.A.ruleLayoutDefaults=
{_constructor:"VLayout",top:22,membersMargin:1,padding:1,overflow:"hidden",autoParent:"mainLayout",border:"1px solid grey",width:"100%",height:"100%"};isc.A.hiliteRuleDefaults={_constructor:"HiliteRule"};isc.A.hiliteButtonsDefaults={_constructor:"HLayout",layoutMargin:5,membersMargin:8,height:1};isc.A.saveButtonDefaults={_constructor:"IButton",autoParent:"hiliteButtons",title:"Save",click:function(){this.creator.saveHilites()}};isc.A.cancelButtonDefaults={_constructor:"IButton",autoParent:"hiliteButtons",
title:"Cancel",click:function(){this.creator.completeEditing()}};isc.A.defaultWidth=800;isc.A.defaultHeight=300;isc.A=isc.HiliteEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function(){this.Super("initWidget",arguments);this.addAutoChildren(["mainLayout","fieldLayout","addAdvancedHiliteButton","fieldList","ruleLayout","hiliteButtons","saveButton","cancelButton"]);this.setDataSource(this.dataSource);this.setHilites(this.hilites)},
isc.A.setDataSource=function(a){this.dataSource=a;if(this.fieldDataSource&&!this.fieldDataSource.$782)this.setupFieldList();else this.dataSource?this.getClientOnlyFieldDS():this.logWarn("No DataSource present, can't edit hilites");this.fieldList.markForRedraw()},isc.A.setFieldDataSource=function(a){this.fieldDataSource=a;this.setupFieldList()},isc.A.setupFieldList=function(){this.fieldList.showFilterEditor=true;this.fieldList.setDataSource(this.fieldDataSource);this.fieldList.setFields([{name:"name",
showIf:"false"},{name:"title",title:"Available Fields"},{name:"type",showIf:"false"}]);this.fieldList.fetchData()},isc.A.getClientOnlyFieldDS=function(){for(var a=isc.getValues(this.dataSource.getFields()),b=[],c=0;c<a.length;c++){var d=a[c];d.hidden||b.add(d)}this.fieldDataSource=isc.DataSource.create({$782:true,fields:[{name:"name",showIf:"false"},{name:"title",title:"Available Fields"},{name:"type",showIf:"false"}],cacheData:b,clientOnly:true});this.setupFieldList()},isc.A.addHilite=function(a){this.showNewHilite(this.createAutoChild("hiliteRule",
{width:"100%",fieldName:a.name,dataSource:this.dataSource}))},isc.A.removeHilite=function(a){this.ruleLayout.members.remove(a);a.destroy()},isc.A.showNewHilite=function(a){this.ruleLayout.addMember(a)},isc.A.addAdvancedHilite=function(){var a=this.getID()+".addAdvancedHiliteReply(hilite)";this.advancedHiliteDialog=isc.Window.create({title:"Advanced Hilite Editor",width:Math.round(isc.Page.getWidth()/2),height:1,isModal:true,showModalMask:true,showResizer:true,canDragResize:true,autoSize:true,autoCenter:true,
items:[isc.AdvancedHiliteEditor.create({width:"100%",height:"100%",dataSource:this.fieldDataSource?null:this.dataSource,fieldDataSource:this.fieldDataSource,callback:a})]});this.advancedHiliteDialog.show()},isc.A.addAdvancedHiliteReply=function(a){this.advancedHiliteDialog.hide();this.advancedHiliteDialog.markForDestroy();a&&this.showNewHilite(this.createAutoChild("hiliteRule",{width:"100%",isAdvanced:true,dataSource:this.dataSource,fieldDataSource:this.fieldDataSource,fieldName:a.fieldName,hilite:a}))},
isc.A.clearHilites=function(){for(var a=this.ruleLayout.members.length-1;a>=0;a--)this.removeHilite(this.ruleLayout.getMember(a))},isc.A.setHilites=function(a){a=this.hilites=a||[];for(var b=0;b<a.length;b++){var c=a[b];this.showNewHilite(this.createAutoChild("hiliteRule",{fieldName:c.fieldName,hilite:c,dataSource:this.dataSource}))}},isc.A.saveHilites=function(){for(var a=this.ruleLayout.members,b=[],c=0;c<a.length;c++){var d=a[c].getHilite();b.add(d)}this.completeEditing(b)},isc.A.completeEditing=
function(a){this.logIsInfoEnabled()&&this.logInfo("returning hilites: "+isc.echoFull(a));this.callback&&this.fireCallback(this.callback,"hilites",[a])});isc.B._maxIndex=isc.C+14;isc.defineClass("AdvancedHiliteEditor","VStack");isc.A=isc.AdvancedHiliteEditor.getPrototype();isc.A.padding=10;isc.A.membersMargin=10;isc.A.filterBuilderDefaults={_constructor:"FilterBuilder",isGroup:true,groupTitle:"Filter",padding:8,maxHeight:200,overflow:"visible"};isc.A.hiliteFormDefaults={_constructor:"DynamicForm",
isGroup:true,groupTitle:"Appearance",extraSpace:4,padding:8,width:"100%",numCols:6,colWidths:[200,150,100,150,100,150]};isc.A.hiliteButtonsDefaults={_constructor:isc.HLayout,membersMargin:8,height:1};isc.A.saveButtonDefaults={_constructor:"IButton",autoParent:"hiliteButtons",title:"Save",click:function(){this.creator.saveHilite()}};isc.A.cancelButtonDefaults={_constructor:"IButton",autoParent:"hiliteButtons",title:"Cancel",click:function(){this.creator.cancelEditing()}};isc.A.defaultWidth=800;isc.A.defaultHeight=
600;isc.A.visibilityMode="multiple";isc.A.invalidHilitePrompt="Enter at least one rule, a color and a target field, or press 'Cancel' to abandon changes.";isc.A=isc.AdvancedHiliteEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function(){this.Super("initWidget",arguments);var a=this.getDataSource(),b=this;this.addAutoChild("filterBuilder",{dataSource:a,fieldDataSource:this.fieldDataSource,fieldNameChanged:function(j){this.Super("fieldNameChanged",
arguments);b.fieldChosen(j.getFieldName())}});var c=[{title:"Target Field(s)",name:"fieldName",multiple:true,allowMultiSelect:true,type:"select"},{title:"Text",name:"textColor",type:"color"},{title:"Background",name:"backgroundColor",type:"color"}];this.addAutoChild("hiliteForm");if(this.fieldDataSource){c[0]=isc.addProperties({},c[0],{valueField:"name",displayField:"title",optionDataSource:this.fieldDataSource});delete c[0].defaultDynamicValue}else{for(var d=this.fieldNames||a.getFieldNames(),e=
this.fieldMap={},f=0;f<d.length;f++){var g=d[f],h=a.getField(g),i=h.title;if(!h.hidden){i=i?i:g;e[g]=i}}this.fieldMap=e;c[0].valueMap=e}this.hiliteForm.addItems(c);this.addAutoChildren(["hiliteButtons","saveButton","cancelButton"]);this.addMembers([this.filterBuilder,this.hiliteForm,this.hiliteButtons]);if(this.hilite!=null){this.filterBuilder.setCriteria(this.hilite.criteria);this.hiliteForm.editRecord(this.hilite)}},isc.A.fieldChosen=function(a){a&&this.hiliteForm.getValue("fieldName")==null&&this.hiliteForm.setValue("fieldName",
a)},isc.A.saveHilite=function(){this.hiliteForm.setValue("criteria",this.filterBuilder.getCriteria());var a=this.hiliteForm.getValues();if(a.criteria.criteria==null||a.criteria.criteria.length==0||!a.textColor&&!a.backgroundColor||a.fieldName==null)isc.say(this.invalidHilitePrompt);else{var b="";if(a.textColor&&a.textColor!="")b+="color:"+a.textColor+";";if(a.backgroundColor&&a.backgroundColor!="")b+="background-color:"+a.backgroundColor+";";a.cssText=b;if(this.hilite&&this.hilite.id)a.id=this.hilite.id;
this.completeEditing(a)}},isc.A.cancelEditing=function(){this.completeEditing(null)},isc.A.completeEditing=function(a){this.callback&&this.fireCallback(this.callback,["hilite"],[a])});isc.B._maxIndex=isc.C+5;isc._moduleEnd=isc._Grids_end=isc.timestamp?isc.timestamp():(new Date).getTime();isc.Log&&isc.Log.logIsInfoEnabled("loadTime")&&isc.Log.logInfo("Grids module init time: "+(isc._moduleEnd-isc._moduleStart)+"ms","loadTime");delete isc.definingFramework}else window.isc&&isc.Log&&isc.Log.logWarn&&
isc.Log.logWarn("Duplicate load of module 'Grids'.");if(window.isc&&window.isc.module_Core&&!window.isc.module_Forms){isc.module_Forms=1;isc._moduleStart=isc._Forms_start=isc.timestamp?isc.timestamp():(new Date).getTime();if(isc._moduleEnd&&(!isc.Log||isc.Log&&isc.Log.logIsDebugEnabled("loadTime"))){isc._pTM={message:"Forms load/parse time: "+(isc._moduleStart-isc._moduleEnd)+"ms",category:"loadTime"};if(isc.Log&&isc.Log.logDebug)isc.Log.logDebug(isc._pTM.message,"loadTime");else if(isc._preLog)isc._preLog[isc._preLog.length]=isc._pTM;else isc._preLog=
[isc._pTM]}isc.definingFramework=true;isc.A=isc.Canvas;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.applyTableResizePolicy=function(a,b,c,d,e,f,g){var h=this.logIsDebugEnabled("tablePolicy"),i=this.logIsInfoEnabled("tablePolicy"),j=this.logIsDebugEnabled("tablePlacement"),k=a.$8j;if(!this.$8k(a)){k=a.$8j=[];for(var l=0,m=0,n=0;n<a.length;n++){var o=a[n];if(o.alwaysTakeSpace||o.visible){var s=o.getColSpan(),r=o.getRowSpan();if(!(r==0||s==
0)){if(s==null)s=1;if(r==null)r=1;var t=s;if(s=="*")t=1;var p=o.getTitleOrientation();if(o.showTitle&&(p==isc.Canvas.LEFT||p==isc.Canvas.RIGHT)){t+=o.getTitleColSpan()||1;if(s!="*")s+=o.getTitleColSpan()||1}p=o.isStartRow?o.isStartRow():o.startRow;var q=o.isEndRow?o.isEndRow():o.endRow;if(j)this.logDebug("at: "+["row"+l,"col"+m]+", item: "+(o.name||o.Class)+(s=="*"?", colSpan:'*'":"")+", required cols:"+t+(r>1?", rowSpan:"+r:"")+(p?", startRow:true":"")+(q?", endRow:true":""),"tablePlacement");var u=
null,w=null;if(m>=d||p&&m!=0){l++;m=0;o.$8l=true}else o.$8l=false;if(l<k.length)for(;l<k.length;l++){p=k[l];if(p==null)break;for(;m<d;m++)if(p[m]==null){for(var v=m;v<d;v++){if(p[v]!=null)break;if(v-m+1>=t){u=l;w=m;break}}if(w!=null)break}if(w!=null)break;m=0;o.$8l=true}if(w==null){u=l;w=0;o.$8l=true}m=w;if(s=="*")s=d-m;isc.isA.Number(r)||(r=1);for(t=l;t<l+r;t++){k[t]||(k[t]=[]);for(p=m;p<m+s;p++)k[t][p]=n}o.$8m=[w,u,w+s,u+r];m+=s;if(q)m=d;if(j)this.logDebug("item: "+(o.name||o.Class)+" placed at: "+
["row"+u,"col"+w]+(o.$8l?", marked startRow ":"")+", rowTable: "+this.echoAll(k),"tablePlacement")}}}for(t=r=0;t<k.length;t++){q=k[t];if(q==null)break;d=0;l=null;for(p=0;p<q.length;p++)if(q[p]==null)d++;else if(!(t>0&&k[t-1]!=null&&q[p]==k[t-1][p])){n=q[p];o=a[n];if(!(o==l||o==null)){o.$8n=r;o.$8o=d;if(j&&(d>0||r>0))this.logDebug("itemNum:"+n+" ("+(o.name||o.Class)+") at: "+["row"+u,"col"+w]+" preceded by "+(d>0?d+" empty cells":"")+(r>0?" "+r+" empty rows":""),"tablePlacement");d=r=0;l=o}}l==null&&
r++}}if(!e||!isc.isAn.Array(e)){isc.isAn.Array(e)||this.logWarn(" 'colWidths' not an array - Ignoring.","tableResizePolicy");e=[]}e=e.duplicate();for(p=0;p<e.length;p++){r=e[p];if(isc.isA.String(r))if(r=="*")e[p]=[0,1E4,0,1];else if(r.contains("*"))e[p]=[0,1E4,0,parseInt(r)];else if(r.contains("%"))e[p]=[0,1E4,parseInt(r),0];else{o=parseInt(r);if(o==r)e[p]=o;else{this.logWarn("Failed to understand specified colWidth:"+r);e[p]=[0,1E4,0,1]}}}a.colWidths=e;if(!f){f=[];for(t=0;t<k.length;t++){q=k[t];
e=null;n=1E5;u=j=0;if(q)for(p=0;p<q.length;p++)if(o=a[q[p]]){w=o.getCellHeight(g);r=o.$8m[3]-o.$8m[1];h&&this.logWarn("item at: "+[t,p]+" has height: "+w+", item is: "+o);o.$8p=false;if(isc.isA.Number(w)){w=Math.floor(w/r);h&&this.logWarn("item: "+o+" has pixel size: "+w);if(e==null||w>e)e=w;if(w>n)n=w}else if(isc.isA.String(w)){if(w.contains("*")){o.$8p=true;r=(w=="*"?1:parseFloat(w))/r;h&&this.logWarn("item: "+o+" has star size: "+r);u=Math.max(u,r)}else{o.$8p=true;r=parseFloat(w)/r;h&&this.logWarn("item: "+
o+" has percent size: "+r);if(r>j)j=r}if(o.minHeight>e)e=o.minHeight;if(o.minHeight>n)n=o.minHeight;if(o.maxHeight<n&&e<o.maxHeight)n=o.maxHeight}if(j>0||u>0){if(e==null)e=0;f[t]=[e,n,j,u]}else{if(e==null)e=a.$8q||22;f[t]=e}}}}a.rowHeights=f;i&&this.logInfo("\ntotalWidth: "+b+", totalHeight: "+c+"\nspecified sizes:\ncols:"+this.echoAll(a.colWidths)+", rows: "+this.echoAll(a.rowHeights),"tablePolicy");a.$8r=e=isc.Canvas.stretchResizeList(a.colWidths,b);a.$8s=f=isc.Canvas.stretchResizeList(a.rowHeights,
c);i&&this.logInfo("\nderived sizes:\ncols:"+this.echoAll(a.$8r)+", rows: "+this.echoAll(a.$8s),"tablePolicy");for(n=0;n<a.length;n++){o=a[n];if(o.visible){r=(b=isc.isA.Canvas(o))?o.getWidth():o.width;b=b?o.getHeight():o.getCellHeight(g);p=o.getTitleOrientation();h=o.$8m;c=0;if(o.showTitle)c=p==isc.Canvas.LEFT?e[h[0]]:e[h[2]];if(r=="*"){r=0;i=Math.min(e.length,h[2]-(o.showTitle&&p==isc.Canvas.RIGHT?1:0));for(p=h[0]+(o.showTitle&&p==isc.Canvas.LEFT?1:0);p<i;p++)r+=e[p]}if(o.$8p){b=0;p=h[1];q=h[3];
for(p=p;p<q;p++)b+=f[p]}o.$8t=[r,b];o.$8u=c}}},isc.A.$8k=function(a){if(!a.$8j)return false;return true},isc.A.invalidateTableResizePolicy=function(a){delete a.$8j;delete a.$8s;delete a.$8r},isc.A.stretchResizeList=function(a,b){for(var c=0,d=0,e=0,f=a.duplicate(),g=0;g<a.length;g++){var h=f[g];if(isc.isA.Number(h)){h=Math.max(h,1);e+=h;f[g]=h}else{var i=h[2],j=h[3];if(j==0)c+=i;d+=j}}if(d){g=0;if(c<100)g=(100-c)/d;for(d=0;d<a.length;d++){h=f[d];if(!isc.isA.Number(h)){i=h[2];j=h[3];var k=j*g;if(i<
k)h[2]=k;if(j>0)c+=h[2]}}}if(c<=0)return f;e=Math.max(0,b-e);for(d=0;d<a.length;d++){i=Math.max(0,e/c);h=f[d];if(!isc.isA.Number(h)){j=h[0];if(j!=0){h=h[2];i=i*h;if(i<j){f[d]=j;e-=j;c-=h;d=0}}}}for(d=0;d<a.length;d++){i=Math.max(0,e/c);h=f[d];if(!isc.isA.Number(h)){j=h[1];h=h[2];i=i*h;if(i>j){f[d]=j;e-=j;c-=h;d=0}}}i=Math.max(0,e/c);for(d=0;d<a.length;d++){h=f[d];if(!isc.isA.Number(h)){h=h[2];f[d]=Math.floor(h*i)}}return f});isc.B._maxIndex=isc.C+4;isc.ClassFactory.defineClass("ButtonTable",isc.Canvas);
isc.A=isc.ButtonTable.getPrototype();isc.A.cellSpacing=0;isc.A.cellPadding=2;isc.A.cellBorder=0;isc.A.tableStyle="menuTable";isc.A.baseButtonStyle="button";isc.A.backgroundColor="CCCCCC";isc.A=isc.ButtonTable.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getInnerHTML=function(){var a=isc.SB.newInstance();a.append("<TABLE"," CLASS=",this.tableStyle," WIDTH=",this.getWidth()-(this.overflow==isc.Canvas.SCROLL||this.overflow==
isc.Canvas.AUTO?this.getScrollbarSize():0)," HEIGHT=",this.getHeight()," CELLSPACING=",this.cellSpacing," CELLPADDING=",this.cellPadding," BORDER=",this.cellBorder,"><TR>");for(var b=0;b<this.items.length;b++){var c=this.items[b];a.append("<TR>");isc.isAn.Array(c)||(c=[c]);for(var d=0;d<c.length;d++){var e=c[d];e.action?a.append(this.getCellButtonHTML(e.contents,e.action,e.style,e.disabled,e.selected,e.align,e.extraTagStuff)):a.append(this.getCellHTML(e.contents,e.style,e.align,e.extraTagStuff))}a.append("</TR>")}a.append("</TABLE>");
return a.toString()},isc.A.showModal=function(){this.showClickMask(this.getID()+".hide()");this.show();this.unmask();this.bringToFront()},isc.A.hide=function(){this.Super("hide",arguments);this.hideClickMask();this.$8v=null},isc.A.getButtonBaseStyle=function(a){var b;if(a)b=a.getAttribute("basestyle");if(!b)b=this.baseButtonStyle;return b},isc.A.getMouseOutStyle=function(a){var b=this.getButtonBaseStyle(a);if(this.buttonIsSelected(a))b+="Selected";if(this.buttonIsDisabled(a))b+="Disabled";return b},
isc.A.buttonIsSelected=function(a){return a&&a.getAttribute("buttonselected")},isc.A.buttonIsDisabled=function(a){return a&&a.getAttribute("buttondisabled")},isc.A.cellButtonOver=function(a){var b=this.getButtonBaseStyle(a);if(this.buttonIsSelected(a))b+="Selected";if(a)a.className=b+"Over"},isc.A.cellButtonOut=function(a){if(a)a.className=this.getMouseOutStyle(a)},isc.A.cellButtonDown=function(a){if(a){var b=this.getButtonBaseStyle(a);if(this.buttonIsSelected(a))b+="Selected";b+="Down";a.className=
b}},isc.A.getCellHTML=function(a,b,c,d){return isc.StringBuffer.concat("<TD ALIGN=",c||isc.Canvas.CENTER," CLASS=",b||this.baseButtonStyle+"Disabled",d||d,">",a,"</TD>")},isc.A.getCellButtonHTML=function(a,b,c,d,e,f,g){if(c==null)c=this.baseButtonStyle;var h=c;if(d)h+="Selected";if(e)h+="Disabled";return isc.StringBuffer.concat("<TD ALIGN=",f||isc.Canvas.CENTER," CLASS=",h," ONMOUSEOVER='",this.getID(),".cellButtonOver(this);return false;' "," ONMOUSEOUT='",this.getID(),".cellButtonOut(this);return true;'",
" ONMOUSEDOWN='",this.getID(),".cellButtonDown(this);return true;'"," ONMOUSEUP='",this.getID(),".cellButtonOut(this)';return true;"," basestyle='",c,"'",d?" buttonselected='true'":null,e?" buttondisabled='true'":null,g?" "+g:null,' ONCLICK="'+b+'">',a,"</TD>")});isc.B._maxIndex=isc.C+12;isc.ClassFactory.defineClass("DateChooser","ButtonTable");isc.A=isc.DateChooser.getPrototype();isc.A.defaultWidth=150;isc.A.defaultHeight=171;isc.A.showHeader=true;isc.A.headerHeight=20;isc.A.showYearButtons=true;
isc.A.showYearChooser=true;isc.A.showMonthButtons=true;isc.A.showMonthChooser=true;isc.A.skinImgDir="images/common/";isc.A.prevYearIcon="[SKIN]doubleArrow_left.gif";isc.A.prevYearIconWidth=14;isc.A.prevYearIconHeight=7;isc.A.prevMonthIcon="[SKIN]arrow_left.gif";isc.A.prevMonthIconWidth=7;isc.A.prevMonthIconHeight=7;isc.A.nextYearIcon="[SKIN]doubleArrow_right.gif";isc.A.nextYearIconWidth=14;isc.A.nextYearIconHeight=7;isc.A.nextMonthIcon="[SKIN]arrow_right.gif";isc.A.nextMonthIconWidth=7;isc.A.nextMonthIconHeight=
7;isc.A.showDoubleYearIcon=true;isc.A.yearMenuStyle="dateChooserYearMenu";isc.A.startYear=1995;isc.A.endYear=2015;isc.A.monthMenuStyle="dateChooserMonthMenu";isc.A.showTodayButton=true;isc.A.showCancelButton=false;isc.A.todayButtonTitle="Today";isc.A.cancelButtonTitle="Cancel";isc.A.disableWeekends=false;isc.A.showWeekends=true;isc.A.firstDayOfWeek=0;isc.A.year=(new Date).getFullYear();isc.A.month=(new Date).getMonth();isc.A.chosenDate=new Date;isc.A.baseButtonStyle="dateChooserButton";isc.A.alternateStyleSuffix=
"Dark";isc.A.headerStyle="dateChooserButtonDisabled";isc.A.useBackMask=true;isc.A.canFocus=true;isc.A=isc.DateChooser.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.show=function(){this.Super("show",arguments);if(this.autoClose){this.showClickMask(this.getID()+".close();",true,this);this.bringToFront()}},isc.A.setData=function(a){isc.isA.Date(a)||(a=new Date);this.year=a.getFullYear();this.month=a.getMonth();this.chosenDate=
a;this.markForRedraw()},isc.A.getData=function(){return this.chosenDate},isc.A.getInnerHTML=function(){if(!this.showHeader)this.headerHeight=0;this.baseWeekdayStyle=this.baseWeekdayStyle||this.baseButtonStyle;this.baseWeekendStyle=this.baseWeekendStyle||this.baseWeekdayStyle;var a=this.baseNavButtonStyle||this.baseButtonStyle,b=new Date(this.year,this.month,1),c=isc.SB.create();if(this.showHeader){c.append("<TABLE WIDTH=100%"," HEIGHT=",this.headerHeight+1," CELLSPACING=",this.cellSpacing," CELLPADDING=",
this.cellPadding," BORDER=",this.cellBorder,"><TR>");if(this.showYearButtons){var d;if(this.showDoubleYearIcon){var e=this.imgHTML(this.prevMonthIcon,this.prevMonthIconWidth,this.prevMonthIconHeight);d=d?"&nbsp;":"<NOBR>"+e+e+"</NOBR>"}else d=d?"&nbsp;":this.imgHTML(this.prevYearIcon,this.prevYearIconWidth,this.prevYearIconHeight);c.append(this.getCellButtonHTML(d,this.getID()+".showPrevYear()",a,null,null,isc.Canvas.CENTER," WIDTH=15"))}this.showMonthButtons&&c.append(this.getCellButtonHTML(this.imgHTML(this.prevMonthIcon,
this.prevMonthIconWidth,this.prevMonthIconHeight),this.getID()+".showPrevMonth()",a,null,null,isc.Canvas.CENTER," WIDTH=15"));this.showMonthChooser?c.append(this.getCellButtonHTML(b.getShortMonthName(),this.getID()+".showMonthMenu()",a,null,null,isc.Canvas.RIGHT," WIDTH=50%")):c.append(this.getCellHTML(b.getShortMonthName(),a+"Disabled"));this.showYearChooser?c.append(this.getCellButtonHTML(b.getFullYear(),this.getID()+".showYearMenu()",a,null,null,isc.Canvas.LEFT," WIDTH=50%")):c.append(this.getCellHTML(b.getShortFullName(),
a+"Disabled"));if(this.showMonthButtons){d=b.getFullYear()==9999&&b.getMonth()==11;c.append(this.getCellButtonHTML(d?"&nbsp;":this.imgHTML(this.nextMonthIcon,this.nextMonthIconWidth,this.nextMonthIconHeight),d?"":this.getID()+".showNextMonth()",a,null,d?true:null,isc.Canvas.CENTER," WIDTH=15"))}if(this.showYearButtons){d=b.getFullYear()==9999;if(this.showDoubleYearIcon){e=this.imgHTML(this.nextMonthIcon,this.nextMonthIconWidth,this.nextMonthIconHeight);e=d?"&nbsp;":"<NOBR>"+e+e+"</NOBR>"}else e=d?
"&nbsp;":this.imgHTML(this.nextYearIcon,this.nextYearIconWidth,this.nextYearIconHeight);c.append(this.getCellButtonHTML(e,d?"":this.getID()+".showNextYear()",a,null,d?true:null,isc.Canvas.CENTER," WIDTH=15"))}c.append("</TR></TABLE>")}c.append("<TABLE WIDTH=100% HEIGHT=",this.getHeight()-this.headerHeight," CELLSPACING=0 CELLPADDING=2 BORDER=",this.cellBorder,">");c.append("<TR HEIGHT=15>");e=this.getDayNames();a=Date.getWeekendDays();for(d=0;d<e.length;d++){var f=a.contains((d+this.firstDayOfWeek)%
7);f&&!this.showWeekends||c.append(this.getCellHTML("<B>"+e[(d+this.firstDayOfWeek)%7]+"</B>",f&&this.weekendHeaderStyle?this.weekendHeaderStyle:this.headerStyle))}c.append("</TR>");b.setDate(b.getDate()-b.getDay()+this.firstDayOfWeek-(b.getDay()<this.firstDayOfWeek?7:0));var g;for(e=false;;){if(this.alternateWeekStyles)e=!e;c.append("<TR>");for(d=0;d<7;d++){f=b.getDay();f=a.contains(f);if(!(!this.showWeekends&&f)){f=!f?this.baseWeekdayStyle:this.baseWeekendStyle;if(e)f+=this.alternateStyleSuffix;
c.append(this.getDayCellButtonHTML(g?null:b,f))}if(this.year==9999&&this.month==11&&b.getDate()==31)g=true;else{f=b.getDate();b.setDate(b.getDate()+1);f==b.getDate()&&b.setDate(b.getDate()+1)}}c.append("</TR>");if(b.getMonth()!=this.month||g)break}if(this.showTodayButton||this.showCancelButton){c.append("<TR");this.todayButtonHeight!=null&&c.append(" HEIGHT=",this.todayButtonHeight);c.append(">");if(this.showTodayButton){b=!this.showCancelButton?this.showWeekends?7:5:!this.showWeekends?3:4;c.append(this.getCellButtonHTML(this.todayButtonTitle,
this.getID()+".todayClick()",this.baseBottomButtonStyle||this.baseButtonStyle,null,null,isc.Canvas.CENTER," COLSPAN="+b))}if(this.showCancelButton){b=!this.showTodayButton?this.showWeekends?7:5:!this.showWeekends?2:4;c.append(this.getCellButtonHTML(this.cancelButtonTitle,this.getID()+".cancelClick()",this.baseBottomButtonStyle||this.baseButtonStyle,null,null,isc.Canvas.CENTER," COLSPAN="+b))}c.append("</TR>")}c.append("</TABLE>");return c.toString()},isc.A.getDayNames=function(){if(isc.DateChooser.$8w==
null)isc.DateChooser.$8w=Date.getShortDayNames(2);return isc.DateChooser.$8w},isc.A.getDayCellButtonHTML=function(a,b){if(a==null)return this.getCellButtonHTML("&nbsp;",null,b,false,false,isc.Canvas.CENTER);var c=this.chosenDate&&a.toShortDate()==this.chosenDate.toShortDate(),d=a.getMonth()!=this.month,e=this.getID()+".dateClick("+a.getFullYear()+","+a.getMonth()+","+a.getDate()+");";if(this.disableWeekends&&Date.getWeekendDays().contains(a.getDay())){d=true;e="return false;"}return this.getCellButtonHTML(a.getDate(),
e,b,c,d,isc.Canvas.CENTER)},isc.A.dateIsSelected=function(){return null},isc.A.showPrevMonth=function(){if(--this.month==-1){this.month=11;this.year--}this.markForRedraw()},isc.A.showNextMonth=function(){if(++this.month==12){this.month=0;this.year++}this.markForRedraw()},isc.A.showMonth=function(a){this.month=a;this.monthMenu&&this.monthMenu.hide();this.bringToFront();this.markForRedraw()},isc.A.showMonthMenu=function(){if(this.monthMenu){var a=this.getPageTop()+this.headerHeight,b=Math.min(this.getWidth(),
120),c=Math.min(this.getHeight()-this.headerHeight,80);this.monthMenu.setPageRect(this.getPageLeft()+(this.width-b)/2,a,b,c)}else{a=[[]];b=new Date(2001,0,1);for(c=0;c<12;c++){b.setMonth(c);a[a.length-1].add({contents:b.getShortMonthName(),action:this.getID()+".showMonth("+c+")"});(c+1)%3==0&&a.add([])}this.monthMenu=isc.ButtonTable.newInstance({styleName:this.monthMenuStyle,left:this.getPageLeft()+5,top:this.getPageTop()+this.headerHeight,width:Math.min(this.getWidth(),120),height:Math.min(this.getHeight()-
this.headerHeight,80),items:a,visibility:isc.Canvas.HIDDEN,baseButtonStyle:this.baseButtonStyle});this.monthMenu.setPageLeft(this.getPageLeft()+(this.width-this.monthMenu.width)/2)}this.monthMenu.showModal()},isc.A.showPrevYear=function(){this.year--;this.markForRedraw()},isc.A.showNextYear=function(){this.year++;this.markForRedraw()},isc.A.showYear=function(a){this.year=a;this.yearMenu&&this.yearMenu.hide();this.markForRedraw()},isc.A.showYearMenu=function(){if(this.yearMenu){var a=this.getPageTop()+
this.headerHeight;c=Math.min(this.getWidth(),40*c);var b=Math.min(this.getHeight()-this.headerHeight,80);this.yearMenu.setPageRect(this.getPageLeft()+(this.width-c)/2,a,c,b)}else{a=[[]];c=this.endYear-this.startYear;var c=Math.round(c/10)>3?Math.round(c/10):3;for(b=0;b<=this.endYear-this.startYear;b++){var d=b+this.startYear;a[a.length-1].add({contents:d,action:this.getID()+".showYear("+d+")"});(b+1)%c==0&&a.add([])}this.yearMenu=isc.ButtonTable.newInstance({styleName:this.yearMenuStyle,top:this.getPageTop()+
this.headerHeight,width:Math.min(this.getWidth(),40*c),height:Math.min(this.getHeight()-this.headerHeight,80),items:a,visibility:isc.Canvas.HIDDEN,baseButtonStyle:this.baseButtonStyle});this.yearMenu.setPageLeft(this.getPageLeft()+(this.width-this.yearMenu.width)/2)}this.yearMenu.showModal()},isc.A.dateClick=function(a,b,c){c=this.chosenDate=new Date(a,b,c);this.month=b;this.year=a;this.dataChanged();if(window.dateClickCallback){if(isc.isA.String(window.dateClickCallback))window.dateClickCallback=
new Function("date",window.dateClickCallback);window.dateClickCallback(c)}this.autoHide&&this.hide();this.autoClose&&this.close();this.isDrawn()&&this.markForRedraw();return c},isc.A.dataChanged=function(){},isc.A.cancelClick=function(){this.close()},isc.A.todayClick=function(){this.dateClick((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())},isc.A.close=function(){this.hideClickMask();this.yearMenu&&this.yearMenu.isVisible()&&this.yearMenu.hide();this.monthMenu&&this.monthMenu.isVisible()&&
this.monthMenu.hide();this.isDrawn()&&this.clear()});isc.B._maxIndex=isc.C+20;isc.A=isc.DateChooser;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getSharedDateChooser=function(a){if(!this.$8x)return this.$8x=this.create(a,{_generated:true,autoHide:true,showCancelButton:true});isc.addProperties(this.$8x,a);return this.$8x});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("Slider",isc.Canvas);isc.A=isc.Slider;isc.A.VERTICAL_SRC_PREFIX=
"v";isc.A.HORIZONTAL_SRC_PREFIX="h";isc.A.DOWN="down";isc.A.UP="";isc.A.EVENTNAME="sliderMove";isc.A=isc.Slider.getPrototype();isc.A.title="Set Value";isc.A.length=200;isc.A.vertical=true;isc.A.thumbThickWidth=23;isc.A.thumbThinWidth=17;isc.A.trackWidth=7;isc.A.skinImgDir="images/Slider/";isc.A.thumbSrc="thumb.gif";isc.A.trackSrc="track.gif";isc.A.trackCapSize=6;isc.A.trackImageType=isc.Img.STRETCH;isc.A.showTitle=true;isc.A.showRange=true;isc.A.showValue=true;isc.A.labelWidth=50;isc.A.labelHeight=
20;isc.A.labelSpacing=5;isc.A.titleStyle="sliderTitle";isc.A.rangeStyle="sliderRange";isc.A.valueStyle="sliderValue";isc.A.value=1;isc.A.minValue=1;isc.A.maxValue=100;isc.A.roundValues=true;isc.A.roundPrecision=1;isc.A.flipValues=false;isc.A.canFocus=true;isc.A.stepPercent=5;isc.A.animateThumbTime=250;isc.A.animateThumbAcceleration="slowStartandEnd";isc.A.valueChangedOnDrag=true;isc.A.valueChangedOnRelease=true;isc.A.valueChangedOnClick=true;isc.A=isc.Slider.getPrototype();isc.B=isc._allFuncs;isc.C=
isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.hValueLabelWidth=5;isc.B.push(isc.A.initWidget=function(){this.Super("initWidget",arguments);if(!(this.minValue<=this.maxValue)){this.logWarn("Slider specified with minValue:"+this.minValue+", greater than maxValue:"+this.maxValue+" - reversing max and min value.");var a=this.minValue;this.minValue=this.maxValue;this.maxValue=a}this.setUpSize();this.$80();if(this.showTitle)this._titleLabel=this.addChild(this.$54());if(this.showRange){this.$50=
this.addChild(this.$51("min"));this.$52=this.addChild(this.$51("max"))}if(this.showValue){this._valueLabel=this._thumb.addPeer(this.$53());this._valueLabel.sendToBack();this.$81()}this.setValue(this.value,this.animateThumbInit!=true)},isc.A.setUpSize=function(){var a=this.$pn,b=this.$po;if(this.vertical){if(a==null){a=Math.max(this.thumbThickWidth,this.trackWidth);if(this.showValue)a+=this.labelWidth+this.labelSpacing;if(this.showRange)a+=this.labelWidth+this.labelSpacing;this.logInfo("defaulting width to "+
a+"px");this.setWidth(a)}if(b==null){b=this.length;if(this.showTitle)b+=this.labelHeight+this.labelSpacing;if(this.showValue&&this.labelHeight>this.thumbThinWidth)b+=this.labelHeight-this.thumbThinWidth;this.logInfo("no specified height on vertical Slider - defaulting to:"+b+" based on slider.length of "+this.length);this.setHeight(b)}else{this.length=this.getHeight();if(this.showTitle)this.length-=this.labelHeight+this.labelSpacing;if(this.showValue&&this.labelHeight>this.thumbThinWidth)this.length-=
this.labelHeight-this.thumbThinWidth;this.logInfo("setting slider track length to:"+this.length+", based on specified height")}}else{if(b==null){b=Math.max(this.thumbThickWidth,this.trackWidth);if(this.showValue)b+=this.labelHeight+this.labelSpacing;if(this.showRange)b+=this.labelHeight+this.labelSpacing;this.logInfo("defaulting height to "+b+"px");this.setHeight(b)}if(a==null){a=this.length+(this.showTitle?this.labelWidth+this.labelSpacing:0);if(this.showValue&&this.labelWidth>this.thumbThinWidth)a+=
this.labelWidth-this.thumbThinWidth;this.logInfo("no specified width on horizontal Slider - defaulting to:"+a+" based on slider.length of "+this.length);this.setWidth(a)}else{this.length=this.getWidth();if(this.showTitle)this.length-=this.labelWidth+this.labelSpacing;if(this.showValue&&this.hValueLabelWidth>this.thumbThinWidth)this.length-=this.hValueLabelWidth-this.thumbThinWidth;this.logInfo("setting slider track length to:"+this.length+", based on specified width")}}this.$8y=this.length-this.thumbThinWidth;
if(this.numValues&&this.numValues>1)this.$8z=this.$8y/(this.numValues-1)},isc.A.resizeBy=function(a,b){this.Super("resizeBy",arguments);if(this._track){var c=this.vertical;if(c&&b!=0||!c&&a!=0){this.length+=c?b:a;this.$8y=this.length-this.thumbThinWidth;c?this._track.resizeBy(0,b):this._track.resizeBy(a,0);if(this.numValues&&this.numValues>1)this.$8z=this.$8y/(this.numValues-1);this.setValue(this.value,true,true);if(this.showRange)if(this.vertical){c=this.flipValues?this.$52:this.$50;c.moveBy(0,b)}else{c=
this.flipValues?this.$50:this.$52;c.moveBy(a,0)}}}},isc.A.$51=function(a){var b,c,d,e,f=this.vertical?a=="max":a=="min";if(this.flipValues)f=!f;if(this.vertical){b=Math.max(this.thumbThickWidth,this.trackWidth)+this.labelSpacing+(this.showValue?this.labelWidth+this.labelSpacing:0);d=isc.Canvas.LEFT;if(f){c=this.showTitle?this.labelHeight+this.labelSpacing:0;e=isc.Canvas.TOP}else{c=(this.showTitle?this.labelHeight+this.labelSpacing:0)+(this.length-this.labelHeight);e=isc.Canvas.BOTTOM}}else{c=Math.max(this.thumbThickWidth,
this.trackWidth)+this.labelSpacing+(this.showValue?this.labelHeight+this.labelSpacing:0);e=isc.Canvas.TOP;if(f){b=this.showTitle?this.labelWidth+this.labelSpacing:0;d=isc.Canvas.LEFT}else{b=(this.showTitle?this.labelWidth+this.labelSpacing:0)+this.length-this.labelWidth;d=isc.Canvas.RIGHT}}return isc.Label.create({ID:this.getID()+"_"+a+"Label",autoDraw:false,left:b,top:c,width:this.labelWidth,height:this.labelHeight,wrap:false,align:d,valign:e,className:this.rangeStyle,contents:a=="min"?this.minValueLabel?
this.minValueLabel:this.minValue:this.maxValueLabel?this.maxValueLabel:this.maxValue})},isc.A.$54=function(){var a=this.vertical?isc.Canvas.CENTER:isc.Canvas.RIGHT;return isc.Label.create({ID:this.getID()+"_titleLabel",autoDraw:false,left:0,top:0,width:this.vertical?this.getWidth():this.labelWidth,height:this.vertical?this.labelHeight:this.getHeight(),align:a,className:this.titleStyle,contents:this.title})},isc.A.$53=function(){var a,b,c,d;if(this.vertical){a=this._thumb.getLeft()-this.labelWidth-
this.labelSpacing;b=this._thumb.getTop()+parseInt(this._thumb.getHeight()/2-this.labelHeight/2);d=isc.Canvas.RIGHT;c=this.labelWidth}else{a=this._thumb.getLeft()+parseInt(this._thumb.getWidth()/2-this.labelWidth/2);b=this._thumb.getTop()-this.labelHeight-this.labelSpacing;d=isc.Canvas.CENTER;c=this.hValueLabelWidth}a=isc.Label.create({ID:this.getID()+"_valueLabel",autoDraw:false,left:a,top:b,width:c,height:this.labelHeight,wrap:false,align:d,className:this.valueStyle,contents:this.value,mouseUp:function(){return false},
moveWithMaster:false,observes:[{source:this,message:"valueChanged",action:"this.$81();"}]});this.vertical||isc.addMethods(a,{draw:function(){this.hide();this.Super("draw",arguments);this.parentElement.$81();this.setVisibility(this.prevVis)}});return a},isc.A.$80=function(){var a=this.$82(),b,c,d=this.vertical?this.trackWidth:this.length,e=this.vertical?this.length:this.trackWidth,f,g,h=this.vertical?this.thumbThickWidth:this.thumbThinWidth,i=this.vertical?this.thumbThinWidth:this.thumbThickWidth;
if(this.thumbThickWidth>this.trackWidth)if(this.vertical){f=a[0];b=f+parseInt(this.thumbThickWidth/2-this.trackWidth/2);c=a[1];g=a[1]}else{g=a[1];c=g+parseInt(this.thumbThickWidth/2-this.trackWidth/2);b=a[0];f=a[0]}else if(this.vertical){b=a[0];f=b+parseInt(this.trackWidth/2-this.thumbThinWidth/2);c=a[1];g=a[1]}else{c=a[1];g=c+parseInt(this.trackWidth/2-this.thumbThinWidth/2);b=a[0];f=a[0]}this.logDebug("calculated coords for track:"+[b,c,d,e]);this.logDebug("calculated coords for thumb:"+[f,g,h,
i]);this._track=this.addChild(this.$83(c,b,d,e));this._thumb=this._track.addPeer(this.$84(g,f,h,i))},isc.A.$82=function(){var a=this.vertical?this.showValue?this.labelWidth+this.labelSpacing:0:this.showTitle?this.labelWidth+this.labelSpacing:0,b=this.vertical?this.showTitle?this.labelHeight+this.labelSpacing:0:this.showValue?this.labelHeight+this.labelSpacing:0;if(this.showValue){if(this.vertical&&this.labelHeight>this.thumbThinWidth)b+=Math.round((this.labelHeight-this.thumbThinWidth)/2);if(this.horizontal&&
this.labelWidth>this.thumbThinWidth)a+=Math.round((this.labelWidth-this.thumbThinWidth)/2)}return[a,b]},isc.A.$83=function(a,b,c,d){return isc.StretchImg.create({ID:this.getID()+"_track",autoDraw:false,left:b,top:a,width:c,height:d,vertical:this.vertical,capSize:this.trackCapSize,src:"[SKIN]"+(this.vertical?isc.Slider.VERTICAL_SRC_PREFIX:isc.Slider.HORIZONTAL_SRC_PREFIX)+this.trackSrc,skinImgDir:this.skinImgDir,imageType:this.trackImageType,canFocus:true,tabIndex:-1,cacheImageSizes:false})},isc.A.$84=
function(a,b,c,d){return isc.Img.create({ID:this.getID()+"_thumb",autoDraw:false,left:b,top:a,width:c,height:d,src:"[SKIN]"+(this.vertical?isc.Slider.VERTICAL_SRC_PREFIX:isc.Slider.HORIZONTAL_SRC_PREFIX)+this.thumbSrc,skinImgDir:this.skinImgDir,canDrag:true,dragAppearance:isc.EventHandler.NONE,cursor:isc.Canvas.HAND,dragMove:function(){this.parentElement.$85();return false},$jo:false,dragStart:function(){var e=isc.EventHandler;e.dragOffsetX=-1*(this.getPageLeft()-e.mouseDownEvent.x);e.dragOffsetY=
-1*(this.getPageTop()-e.mouseDownEvent.y);this.parentElement.$86=true;return e.STOP_BUBBLING},dragStop:function(){this.parentElement.$86=false;this.setState(isc.Slider.UP);this.parentElement.valueChangedOnRelease&&this.parentElement.valueChanged(this.parentElement.value);return false},mouseDown:function(){this.setState(isc.Slider.DOWN)},mouseUp:function(){this.setState(isc.Slider.UP);return false},canFocus:true,tabIndex:-1})},isc.A.$85=function(a){var b;if(this.vertical){var c=this._track.getTop(),
d=this.$8y+c;b=isc.EventHandler.getY()-isc.EventHandler.dragOffsetY-this.getPageTop();b=Math.max(c,Math.min(d,b));d=b-c;if(this.numValues){d=Math.round(d/this.$8z)*this.$8z;b=Math.round(d)+c}if(b==this._thumb.getTop())return;this.logDebug("drag-moving thumb to:"+b);if(a&&this.animateThumb)this.$87=this._thumb.animateMove(this._thumb.getLeft(),b,null,this.animateThumbTime,this.animateThumbAcceleration);else this._thumb.setTop(b);a=this.flipValues?d/this.$8y:1-d/this.$8y}else{c=this._track.getLeft();
d=this.$8y+c;b=isc.EventHandler.getX()-isc.EventHandler.dragOffsetX-this.getPageLeft();b=Math.max(c,Math.min(d,b));d=b-c;if(this.numValues){d=Math.round(d/this.$8z)*this.$8z;b=Math.round(d)+c}if(b==this._thumb.getLeft())return;this.logDebug("drag-moving thumb to:"+b);if(a&&this.animateThumb)this.$87=this._thumb.animateMove(b,this._thumb.getTop(),null,this.animateThumbTime,this.animateThumbAcceleration);else this._thumb.setLeft(b);a=this.flipValues?1-d/this.$8y:d/this.$8y}if(this.maxValue==this.minValue)this.value=
this.minValue;else{a=a*(this.maxValue-this.minValue)+this.minValue;if(this.roundValues)a=Math.round(a);else if(this.roundPrecision!=null){b=Math.pow(10,this.roundPrecision);a=Math.round(a*b)/b}this.value=a}this.logDebug("slider value from drag-move:"+this.value);if(this.valueChangedOnDrag||!this.$86)this.valueChanged(this.value);this.sliderTarget&&isc.EventHandler.handleEvent(this.sliderTarget,isc.Slider.EVENTNAME,this)},isc.A.$81=function(){var a=this._valueLabel;if(a!=null){a.setContents(this.getValue());
var b=this._thumb;if(this.vertical)a.setTop(parseInt(b.getTop()+b.getHeight()/2-a.getHeight()/2));else{a.isDrawn()&&a.redraw();var c=a.getVisibleWidth();b=parseInt(b.getLeft()+b.getWidth()/2-c/2);if(b+c>this.getWidth())b=this.getWidth()-c;if(b<0)b=0;a.setLeft(b)}}},isc.A.mouseUp=function(){isc.EventHandler.dragOffsetX=isc.EventHandler.dragOffsetY=Math.floor(this.thumbThinWidth/2);this.valueChangedOnClick&&this.$85(true)},isc.A.setValue=function(a,b,c){if(isc.isA.Number(a)){a=Math.max(this.minValue,
Math.min(a,this.maxValue));this.value=this.roundValues?Math.round(a):a;a=(this.minValue==this.maxValue?1:(this.value-this.minValue)/(this.maxValue-this.minValue))*this.$8y;if(this.vertical){a=this._track.getTop()+parseInt(this.flipValues?a:this.$8y-a);if(this.animateThumb&&!b)this.$87=this._thumb.animateMove(this._thumb.getLeft(),a,null,this.animateThumbTime,this.animateThumbAcceleration);else this._thumb.setTop(a)}else{a=this._track.getLeft()+parseInt(this.flipValues?this.$8y-a:a);if(this.animateThumb&&
!b)this.$87=this._thumb.animateMove(a,this._thumb.getTop(),null,this.animateThumbTime,this.animateThumbAcceleration);else this._thumb.setLeft(a)}c||this.valueChanged(this.value);this.sliderTarget&&isc.EventHandler.handleEvent(this.sliderTarget,isc.Slider.EVENTNAME,this)}},isc.A.getValue=function(){return this.value},isc.A.valueChanged=function(){},isc.A.valueIsChanging=function(){return this.$86==true},isc.A.handleKeyPress=function(a,b){var c=a.keyName;if(c=="Home"){this.setValue(this.minValue,true);
return false}if(c=="End"){this.setValue(this.maxValue,true);return false}var d=(this.maxValue-this.minValue)*this.stepPercent/100;if(this.roundValues&&d<1)d=1;if(this.vertical)if(this.flipValues&&c=="Arrow_Up"||!this.flipValues&&c=="Arrow_Down"){this.setValue(this.getValue()-d,true);return false}else{if(this.flipValues&&c=="Arrow_Down"||!this.flipValues&&c=="Arrow_Up"){this.setValue(this.getValue()+d,true);return false}}else if(this.flipValues&&c=="Arrow_Left"||!this.flipValues&&c=="Arrow_Right"){this.setValue(this.getValue()+
d,true);return false}else if(this.flipValues&&c=="Arrow_Right"||!this.flipValues&&c=="Arrow_Left"){this.setValue(this.getValue()-d,true);return false}if(this.keyPress){this.convertToMethod("keyPress");return this.keyPress(a,b)}},isc.A.setCanFocus=function(a){this.Super("canFocus",arguments);this._thumb!=null&&this._thumb.setCanFocus(a);this._track!=null&&this._track.setCanFocus(a)},isc.A.setMinValue=function(a){this.minValue=a;this.$50&&this.$50.setContents(a);this.setValue(this.minValue)},isc.A.setMaxValue=
function(a){this.maxValue=a;this.$52&&this.$52.setContents(a);this.setValue(this.minValue)},isc.A.setNumValues=function(a){this.numValues=a;this.$8z=this.$8y/(this.numValues-1);this.setValue(this.minValue)},isc.A.setTitle=function(a){this._titleLabel.setContents(a)},isc.A.setLength=function(a){this.length=a;this.setUpSize()},isc.A.$74i=function(){this._titleLabel.destroy();this._track.destroy();this._thumb.destroy();this._valueLabel.destroy();this.$50.destroy();this.$52.destroy();this.initWidget()},
isc.A.setVertical=function(a){this.vertical=a;this.$74i()},isc.A.setThumbThickWidth=function(a){this.thumbThickWidth=a;this.$74i()},isc.A.setThumbThinWidth=function(a){this.thumbThinWidth=a;this.$74i()},isc.A.setTrackWidth=function(a){this.trackWidth=a;this.$74i()},isc.A.setThumbSrc=function(a){this.thumbSrc=a;this.$74i()},isc.A.setTrackSrc=function(a){this.trackSrc=a;this.$74i()},isc.A.setTrackCapSize=function(a){this.trackCapSize=a;this.$74i()},isc.A.setTrackImageType=function(a){this.trackImageType=
a;this.$74i()},isc.A.setShowTitle=function(a){this.showTitle=a;this.$74i()},isc.A.setShowRange=function(a){this.showRange=a;this.$74i()},isc.A.setShowValue=function(a){this.showValue=a;this.$74i()},isc.A.setLabelWidth=function(a){this.labelWidth=a;this.$74i()},isc.A.setLabelHeight=function(a){this.labelHeight=a;this.$74i()},isc.A.setLabelSpacing=function(a){this.labelSpacing=a;this.$74i()},isc.A.setMaxValueLabel=function(a){this.$52.setContents(a)},isc.A.setRoundValues=function(a){this.roundValues=
a;this.$74i()},isc.A.setRoundPrecision=function(a){this.roundPrecision=a;this.$74i()},isc.A.setFlipValues=function(a){this.flipValues=a;this.$74i()},isc.A.setStepPercent=function(a){this.stepPercent=a;this.$74i()});isc.B._maxIndex=isc.C+44;isc.Slider.registerStringMethods({valueChanged:"value"});if(isc.ListGrid){isc.ClassFactory.defineClass("ScrollingMenu","ListGrid");isc.A=isc.ScrollingMenu.getPrototype();isc.A.useBackMask=true;isc.A.canFocus=true;isc.A.showHeader=false;isc.A.showEdges=false;isc.A.autoDraw=
false;isc.A.className="scrollingMenu";isc.A.bodyStyleName="scrollingMenuBody";isc.A.selectionType="single";isc.A.showRollOver=false;isc.A.leaveScrollbarGap=false;isc.A.generateClickOnSpace=false;isc.A.generateDoubleClickOnEnter=false;isc.A.generateClickOnEnter=true;isc.A.showModal=true;isc.A.arrowKeyAction="focus";isc.A.enableSelectOnRowOver=true;isc.A.filterOnKeypress=true;isc.ScrollingMenu.changeDefaults("filterEditorDefaults",{backgroundColor:"white",editorKeyPress:function(a,b){if(b=="Arrow_Down"){this.sourceWidget.$318(1);
return false}if(b=="Arrow_Up"){this.sourceWidget.$318(-1);return false}if(b=="Enter")this.sourceWidget.$240();else return this.Super("editorKeyPress",arguments)}});isc.A=isc.ScrollingMenu.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.show=function(){this.showModal&&this.showClickMask({target:this,methodName:"cancel"},false,[this]);this.Super("show",arguments);this.showModal&&this.body.focus()},isc.A.recordClick=function(a,
b){this.hide();b!=null&&this.itemClick(b)},isc.A.itemClick=function(){},isc.A.rowOver=function(a){this.enableSelectOnRowOver&&this.selection.selectOnRowOver(a)},isc.A.createSelectionModel=function(a,b,c,d,e){a=this.invokeSuper("ScrollingMenu","createSelectionModel",a,b,c,d,e);this.selection.addProperties({selectOnRowOver:function(f){this.selectSingle(f);this.selectionFromMouse=true},setSelected:function(){this.selectionFromMouse=false;return this.Super("setSelected",arguments)}});return a},isc.A.$88=
function(a){this.Super("$88",arguments);this.selection.selectSingle(this.getRecord(a))},isc.A.bodyKeyPress=function(a){var b=a.keyName;if(b==this.$10j){var c=this.selection;if(c&&c.selectionFromMouse){this.cancel();return false}}if(b=="Escape"){this.cancel();return false}return this.Super("bodyKeyPress",arguments)},isc.A.cancel=function(){this.hide()},isc.A.hide=function(){this.hideClickMask();return this.Super("hide",arguments)},isc.A.dataChanged=function(){var a=this.Super("dataChanged",arguments);
if(this.data&&this.data.getLength()>0&&this.selection&&!this.selection.anySelected()&&(isc.isA.ResultSet==null||!isc.isA.ResultSet(this.data)||this.data.rowIsLoaded(0)))this.selection.selectItem(0);return a});isc.B._maxIndex=isc.C+10}isc.ClassFactory.defineClass("DynamicForm","Canvas","DataBoundComponent");isc.addGlobal("FormLayout",isc.DynamicForm);isc.A=isc.DynamicForm;isc.A.GET="GET";isc.A.POST="POST";isc.A.NORMAL="normal";isc.A.MULTIPART="multipart";isc.A.NORMAL_ENCODING="application/x-www-form-urlencoded";
isc.A.MULTIPART_ENCODING="multipart/form-data";isc.A.$89="$89";isc.A.$9a="$9a";isc.A.$9b="$9b";isc.A.$9c="$9d";isc.A.$9e="$9f";isc.A.$9g="$9g";isc.A=isc.DynamicForm.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.flattenItems=false;isc.A.numCols=2;isc.A.fixedColWidths=false;isc.A.fixedRowHeights=false;isc.A.colWidths=null;isc.A.minColWidth=20;isc.A.cellSpacing=0;isc.A.cellPadding=2;isc.A.cellBorder=0;isc.A.defaultRowHeight=22;isc.A.sectionVisibilityMode=
"multiple";isc.A.allowContentAndChildren=true;isc.A.separateContentInsertion=true;isc.A.$r9=true;isc.A.fieldIdProperty="name";isc.A.titleField="title";isc.A.showDetailFields=true;isc.A.longTextEditorThreshold=255;isc.A.longTextEditorType="textArea";isc.A.titlePrefix="";isc.A.rightTitlePrefix=":&nbsp;";isc.A.titleSuffix="&nbsp;:";isc.A.rightTitleSuffix="";isc.A.titleWidth=100;isc.A.showInlineErrors=true;isc.A.showErrorIcons=true;isc.A.showErrorText=false;isc.A.showErrorStyle=true;isc.A.errorOrientation=
"left";isc.A.errorItemDefaults={type:"blurb",wrap:true,showIf:function(){return!this.form.showInlineErrors&&this.form.hasErrors()},defaultDynamicValue:function(a,b){return b.getErrorsHTML(b.getErrors())}};isc.A.errorItemCellStyle="formCellError";isc.A.errorsPreamble="The following errors were found.";isc.A.hiliteRequiredFields=true;isc.A.requiredTitlePrefix="<B>";isc.A.requiredRightTitlePrefix="<B>:&nbsp;";isc.A.requiredTitleSuffix="&nbsp;:</B>";isc.A.requiredRightTitleSuffix="</B>";isc.A.canHover=
false;isc.A.itemHoverDelay=500;isc.A.itemHoverStyle="formHover";isc.A.overflow=isc.Canvas.VISIBLE;isc.A.defaultHeight=20;isc.A.validateOnChange=false;isc.A.implicitSaveDelay=2E3;isc.A.synchronousValidation=false;isc.A.autoFocus=false;isc.A.selectOnFocus=false;isc.A.canFocus=true;isc.A._useNativeTabIndex=false;isc.A.$kn=false;isc.A.uniqueMatch=true;isc.A.browserSpellCheck=true;isc.A.cancelParamName="org.apache.struts.taglib.html.CANCEL";isc.A.cancelParamValue="cancel";isc.A.action="#";isc.A.method=
isc.DynamicForm.POST;isc.A.encoding=isc.DynamicForm.NORMAL_ENCODING;isc.A.writeFormTag=true;isc.A.autoSendTargetFieldName="__target__";isc.A.useNativeSelectItems=false;isc.A.hideUsingDisplayNone=isc.Browser.isMoz&&isc.Browser.isMac;isc.A.operator="and";isc.A.nestedEditorType="NestedEditorItem";isc.A.nestedListEditorType="NestedListEditorItem";isc.A.canDropItems=false;isc.A.canAddColumns=true;isc.B.push(isc.A.hasInherentHeight=function(){if(this.inherentHeight!=null)return this.inherentHeight;return this.overflow==
isc.Canvas.VISIBLE||this.overflow==isc.Canvas.CLIP_H});isc.B._maxIndex=isc.C+1;isc.A=isc.DynamicForm.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$9i="upload";isc.A.$9j="mutex";isc.A.$9k=["name","editorType","type","valueMap","defaultValue","showTitle","left","top","width","height"];isc.A.dataArity="single";isc.A.$70l="/";isc.A.$9l="form";isc.A.$9m="$9n";isc.A.$9o="$9p";isc.A.$9q="absolute";isc.A.$9r="showIf";isc.A.$9s="item,value,form,values";
isc.A.$9t="</FORM>";isc.A.$9u="tablePolicy";isc.A.$9v="<COL WIDTH=";isc.A.$9w=isc.Browser.isIE?"<TR STYLE='position:absolute'>":"<TR>";isc.A.$9y=isc.Browser.isSafari?"</div></TD>":"</TD>";isc.A.$5u="<TD>";isc.A.$5v="</TD>";isc.A.$5s="<TR>";isc.A.$5t="</TR>";isc.A.$9z="<br>";isc.A.$90="</TABLE></FORM>";isc.A.$91=["<INPUT TYPE=HIDDEN NAME='",,"' VALUE='",,"'>"];isc.A.titleHeight=15;isc.A.$92="height:";isc.A.$93="width:";isc.A.$11j="max-width:";isc.A.$94="max-height:";isc.A.$92="height:";isc.A.$95="<NOBR>";
isc.A.$96="</td></tr></TABLE>";isc.A.$97="</DIV>";isc.A.$98="</TD>";isc.A.$99=["<TD ",," CLASS='",,"' ALIGN='",,"' VALIGN='",,"'",,,">"];isc.A.$10a=["<DIV style='overflow:hidden;text-overflow:ellipsis;",,,,"'>"];isc.A.$63z="$428";isc.A.$10c=["<FORM ","ID","=",,," METHOD=",," ACTION='",,"' ENCTYPE=",,,,," ONSUBMIT='return ",,".$10d()' ONRESET='",,".resetValues(); return false;'",isc.Browser.isSafari?" STYLE='display:inline;'":null," STYLE='margin-bottom:0px;'>"];isc.A.$10e=" STYLE='position:absolute;left:0px;top:0px;'";
isc.A.$10f=" TARGET='";isc.A.$10g=["<TABLE ID='",,"' ","WIDTH=",," CELLSPACING=",," CELLPADDING=",," BORDER=",,isc.Browser.isMoz?"><TBODY>":">"];isc.A.$10h="table";isc.A.formSubmitFailedWarning="Form was unable to be submitted. The most likely cause for this is an invalid value in an upload field.";isc.A.$10i="requiredIf";isc.A.$10j="Enter";isc.B.push(isc.A.initWidget=function(){if(isc.$cv)arguments.$cw=this;this.Super("initWidget",arguments);if(this.showComplexFieldsRecursively)this.showComplexFields=
true;if(this.fields&&this.items==null)this.items=this.fields;if(this.defaultItems!=null&&this.items==null){this.items=[];for(var a=0;a<this.defaultItems.length;a++)this.items[a]=isc.addProperties({},this.defaultItems[a])}if(this.values==null)this.values={};this.action!=isc.DynamicForm.getPrototype().action&&this.action!=null&&!isc.isA.emptyString(this.action)&&this.setAction(this.action);this.setItems(this.items?this.items:[],true);this.isDisabled()&&this.setDisabled(true);this.setErrors(this.errors?
this.errors:{});this.setValues(this.values,true);this.selectionComponent!=null&&this.setSelectionComponent(this.selectionComponent,true)},isc.A.$10k=function(a){a&&isc.isA.FormItem(a[0])&&a.map("destroy")},isc.A.destroy=function(){this.valuesManager&&this.valuesManager.removeMember(this);this.$10k(this.items);this.Super("destroy",arguments)},isc.A.setHandleDisabled=function(a){if(this.isDrawn()){this.redrawOnDisable&&this.markForRedraw("setDisabled");this.disableKeyboardEvents(a,null,true)}a=this.getItems();
for(var b=0;b<a.length;b++)a[b].updateDisabled()},isc.A.disableKeyboardEvents=function(a,b,c){this.Super("disableKeyboardEvents",arguments);if(!c)if(a){this.$551=this.getTabIndex();this.$vk(-1)}else this.$vk(this.$551)},isc.A.applyFieldDefaults=function(a){if(a!=null)for(var b=0;b<a.length;b++)if(a[b]==null)break},isc.A.getEditorType=function(a){return this.getClass().getEditorType(a,this)},isc.A.setItems=function(a,b){if(a!=null)for(var c=0;c<a.length;c++){var d=false;if(a[c]==null){this.logWarn("Encountered empty entry in items array - removing this entry.");
d=true}if(isc.isA.Canvas(a[c])){this.logWarn("Encountered a Canvas instance:"+a[c]+" in the items array - the DynamicForm items array should contain only FormItem definitions. Removing this entry.");d=true}if(d){a.removeAt(c);c-=1}}if(a=this.bindToDataSource(a)){if(a==this.items)a=a.duplicate()}else a=[];this.items!=null&&this.items.length>0&&!b&&this.removeItems(this.items);this.$10l(a,null,true,b)},isc.A.setFields=function(a){this.setItems(a)},isc.A.getFields=function(){return this.items},isc.A.getItems=
function(){return this.items},isc.A.visibleAtPoint=function(a,b,c,d){if(this.invokeSuper(isc.DynamicForm,"visibleAtPoint",a,b,c,d))return true;for(var e=this.items||[],f={},g=e.indexOf(this.getFocusSubItem()),h=-1;h<e.length;h++){var i=h;if(h==-1)i=g;else if(i==g)continue;if(i!=-1){i=e[i];var j=i.containerWidget;if(!(j==this||!i.isDrawn()||!i.isVisible())){var k=j.getID();if(f[k]==null)f[k]=j.visibleAtPoint(a,b,c,d);if(f[k]){j=i.getPageLeft();k=i.getPageTop();if(j<=a&&j+i.getVisibleWidth()>=a&&k<=
b&&k+i.getVisibleHeight()>=b)return true}}}}return false},isc.A.addItems=function(a,b){isc.isAn.Array(a)||(a=[a]);if(this.dataSource){isc.DS.get(this.dataSource);for(var c=0;c<a.length;c++){a[c]=this.combineFieldData(a[c]);var d=a[c].name;d&&this.getItem(d)&&this.removeItem(d)}}this.addFieldValidators(a);if(b==null||b>this.items.length)b=this.items.length;this.$10l(a,b)},isc.A.$10l=function(a,b,c,d){var e=this.isDrawn(),f=e?this.getTabIndexSpan():null;this.applyFieldDefaults(a);for(var g=[],h=false,
i=this.sectionVisibilityMode==this.$9j,j=0;j<a.length;j++){var k=a[j];if(k){if(k.editorProperties)k=isc.addProperties({},k,k.editorProperties);var l=this.getEditorType(k);a[j]=k=this.createItem(k,l);if(l==this.$9i)h=true;isc.FileItem&&isc.isA.FileItem(k)&&0&&this.logWarn("Attempting to creating a form with multiple FileItems. This is not currently supported - only the first file type field value will be committed on submission of this form.");if(isc.isA.SectionItem(k)){g.add(k);if(k.sectionExpanded&&
i)this.$6l=k}}else{a.removeItem(j);j--}}if(c)this.items=a;else this.items.addListAt(a,b);d||this.setItemValues(this.getValues(),false,true,a);if(h)this.encoding=isc.DynamicForm.MULTIPART_ENCODING;for(a=0;a<g.length;a++){b=g[a];b.sectionExpanded&&(!i||this.$6l==b)?b.expandSection():b.collapseSection()}this.$10m=true;g=this.getTabIndex();if(e&&g!=-1){this.$10o();e=this.getTabIndexSpan();if(e>f)if(f=this.$vy()){i=f.getTabIndex();i<g+e&&f.$v3(g+e-i)}}this.markForRedraw("Form items added")},isc.A.copyKnownProperties=
function(a,b,c){for(var d=0;d<c.length;d++){var e=c[d],f=b[e];if(f!==void 0){a[e]=f;delete b[e]}}},isc.A.createItem=function(a,b){if(a.form!=null&&!(a.form==this.getID()||a.form!=this))this.logWarn("Unsupported 'form' property ["+a.form+"] set on item:"+a+".  Ignoring.");a.destroyed&&isc.isA.FormItem(a)&&this.logWarn("destroyed FormItem passed to setItems()/addItem(): FormItems cannot be re-used with different DynamicForms");var c=isc.FormItemFactory.getItemClassName(a,b,this),d=isc.FormItemFactory.getItemClass(c);
if(d){c=a;a=d.createRaw();a.form=a.containerWidget=a.eventParent=this;var e=null;if(a.validators!=null&&c.validators!=null)e=a.validators;isc.Browser.isIE&&this.canAlterItems&&this.copyKnownProperties(a,c,this.$9k);if(this.autoChildItems){if(a.ID==null)a.ID=null;this.$d3(d.Class,a,c)}else{a.completeCreation(c);if(e!=null)if(a.validators){if(!isc.isAn.Array(a.validators))a.validators=[a.validators];if(a.validators.$69)a.validators=a.validators.duplicate();a.validators.addList(e)}else a.validators=
e}a.form=this;if(a.destroyed)a.destroyed=false;if(a.shouldSaveValue&&(a[this.fieldIdProperty]==null||isc.isAn.emptyString(a[this.fieldIdProperty]))&&(a.dataPath==null||isc.isAn.emptyString(a.dataPath))){this.logWarn(a.getClass()+" form item defined with no '"+this.fieldIdProperty+"' property - Value will not be saved. To explicitly exclude a form item from the set of values to be saved, set 'shouldSaveValue' to false for this item.");a.shouldSaveValue=false}return a}else this.logWarn("Problem initializing item: "+
isc.Log.echo(a)+" - derived FormItem class is: "+c+".  Please make sure the relevant module is loaded")},isc.A.removeItems=function(a){if(a!=null){isc.isAn.Array(a)||(a=[a]);if(a==this.items)a=this.items.duplicate();a=this.map("getItem",a);this.items.removeList(a);for(var b=0;b<a.length;b++){var c=a[b];if(c!=null){c.items!=null&&a.addList(c.items,b+1);this.$10n==c&&delete this.$10n;!this.items.contains(c)&&isc.isA.FormItem(c)&&c.destroy()}}this.$10m=true;this.markForRedraw("Form items removed")}},
isc.A.addField=function(a,b){this.addItems(a,b)},isc.A.removeField=function(a){this.removeItems(a)},isc.A.addItem=function(a,b){this.addItems(a,b)},isc.A.removeItem=function(a){this.removeItems(a)},isc.A.addFields=function(a,b){return this.addItems(a,b)},isc.A.removeFields=function(a){return this.removeItems(a)},isc.A.$kk=function(a,b,c,d){if(this.canFocus==true)return true;for(var e=this.getItems(),f=0;f<e.length;f++)if(e[f].$kk())return true;return this.invokeSuper(isc.DynamicForm,"$kk",a,b,c,d)},
isc.A.$10o=function(){var a=this.items;if(!(!a||a.length==0)){for(var b=[],c={},d=0;d<a.length;d++){var e=a[d],f=e.tabIndex;if(f!=null&&f!=-1){if(b[f]!=null&&!c[f]){this.logWarn("More than one item in this form have an explicitly specified tabIndex of '"+f+"'. Tab order cannot be guaranteed within this form.");c[f]=true}b[f]=e}}c=1;for(d=0;d<a.length;d++){e=a[d];if(isc.isA.FormItem(e)){if(!(!e.$kk()||e.tabIndex!=null||e.globalTabIndex!=null)){for(c+=1;b[c]!=null;)c+=1;e.$10p=c;if(isc.isA.CanvasItem(e))if((e=
e.canvas)&&e.getTabIndexSpan)c+=e.getTabIndexSpan()}}else this.logIsDebugEnabled()&&this.logDebug("$10o() fired before all form items have been initialized"+this.getStackTrace())}}},isc.A.$v2=function(){},isc.A.getTabIndexSpan=function(){var a=this.items,b=1;if(!a)return b;for(var c=0;c<a.length;c++){var d=a[c];if(!isc.isA.FormItem(d))return a.length;if(!(!d.$kk()||d.globalTabIndex!=null)){var e=d.tabIndex||d.$10p;if(e==null){this.$10o();e=d.$10p}if(isc.isA.CanvasItem(d)){d=d.canvas;var f=0;if(d&&
d.getTabIndexSpan)f=d.getTabIndexSpan();if(f>1)e+=f-1}if(e!=null&&e>b)b=e}}return b},isc.A.$vk=function(){this.Super("$vk",arguments);if(this.isDrawn()&&this.isVisible()&&this.items)for(var a=0;a<this.items.length;a++)this.items[a].updateTabIndex()},isc.A.moved=function(a,b,c,d){this.invokeSuper(isc.DynamicForm,"moved",a,b,c,d);this.itemsMoved()},isc.A.parentMoved=function(a,b,c,d){this.invokeSuper(isc.DynamicForm,"parentMoved",a,b,c,d);this.itemsMoved()},isc.A.zIndexChanged=function(a,b,c,d){this.invokeSuper(isc.DynamicForm,
"zIndexChanged",a,b,c,d);this.itemsZIndexChanged()},isc.A.parentZIndexChanged=function(a,b,c,d){this.invokeSuper(isc.DynamicForm,"parentZIndexChanged",a,b,c,d);this.itemsZIndexChanged()},isc.A.itemsMoved=function(){var a=this.getItems();if(a)for(var b=0;b<a.length;b++)a[b].isVisible&&a[b].moved()},isc.A.itemsVisibilityChanged=function(){var a=this.getItems();if(a)for(var b=0;b<a.length;b++)a[b].visibilityChanged()},isc.A.itemsZIndexChanged=function(){var a=this.getItems();if(a)for(var b=0;b<a.length;b++)a[b].zIndexChanged()},
isc.A.scrollTo=function(){var a=this.getScrollLeft(),b=this.getScrollTop();this.Super("scrollTo",arguments);if(a!=this.getScrollLeft()||b!=this.getScrollTop())this.itemsMoved()},isc.A.$1f=function(){if(this.canAnimateClip!=null)return this.canAnimateClip;return true},isc.A.setTitleOrientation=function(a){this.titleOrientation=a;this.$10m=true;this.markForRedraw()},isc.A.setNumCols=function(a){this.numCols=a;this.$10m=true;this.markForRedraw()},isc.A.setAutoComplete=function(a){this.autoComplete=a;
for(a=0;a<this.items.length;a++)this.items[a].$10q()},isc.A.setValues=function(a,b){delete this.$76u;if(isc.isAn.Array(a)){var c=isc.isA.Object(a[0]);this.logWarn("values specified as an array."+(c?" Treating the first item in the array as intended values.":" Ignoring specified values (resetting to defaults)."));a=c?a[0]:null}if(a==null)a={};this.$10r(a);c=this.items;for(var d=0;d<c.length;d++)c[d].shouldSaveValue&&this.$425(c[d])&&c[d].$426();this.setItemValues(a,null,b);this.rememberValues();this.markForRedraw("setValues")},
isc.A.$425=function(a){if(!a||!a.displayField)return false;if(a.optionDataSource!=null)return false;if(a.getValueFieldName()!=a.getFieldName())return false;return true},isc.A.setData=function(a){this.setValues(a)},isc.A.setDataSource=function(){this.Super("setDataSource",arguments);this.clearErrors()},isc.A.rememberValues=function(){var a=this.getValues(),b=this.$10s={};this.$10t=[];for(var c in a)if(!isc.isA.Function(a[c]))if(c!="__ref"){if(isc.isA.Date(a[c])){b[c]=new Date;b[c].setTime(a[c].getTime())}else b[c]=
a[c];var d=this.getItem(c);d&&d.isSetToDefaultValue()&&this.$10t.add(c)}return b},isc.A.resetValues=function(){this.clearErrors();var a={},b;for(b in this.$10s)if(!this.$10t.contains(b))if(isc.isA.Date(a[b])&&isc.isA.Date(this.$10s[b]))a[b].setTime(this.$10s[b].getTime());else a[b]=this.$10s[b];this.setValues(a)},isc.A.clearValues=function(){this.setValues();for(var a=this.getItems(),b=0;b<a.length;b++)a[b].shouldSaveValue==false&&a[b].setValue(null);this.clearErrors();this.rememberValues();this.markForRedraw("clearValues")},
isc.A.valuesHaveChanged=function(a){var b=this.getValues(),c=this.$10s,d=false,e={};isc.isAn.Object(c)||(c={});for(var f in b)if(!isc.isA.Function(b[f]))if(f!="__ref"){d=this.getItem(f);if(d=d!=null?!d.compareValues(b[f],c[f]):!isc.DynamicForm.compareValues(b[f],c[f])){if(!a)return true;e[f]=b[f]}}return a?e:d},isc.A.getOldValues=function(){var a={};isc.addProperties(a,this.$10s);return a},isc.A.getOldValue=function(a){return this.getOldValues()[a]},isc.A.getChangedValues=function(){return this.valuesHaveChanged(true)},
isc.A.getValues=function(){this.updateFocusItemValue();return this.values},isc.A.updateFocusItemValue=function(){var a=this.getFocusSubItem();!this.$10u&&a!=null&&a.$10v()&&a.updateValue()},isc.A.getData=function(){return this.getValues()},isc.A.getValuesAsCriteria=function(a,b,c){if(a==null)a=this.operator!="and"||this.getItems().map("hasAdvancedCriteria").contains(true)||this.$76u!=null;if(!a){b=this.$76v();if(c)return b;return isc.DataSource.filterCriteriaForFormValues(b)}c=this.$76u?isc.clone(this.$76u):
{operator:this.operator,_constructor:"AdvancedCriteria",criteria:[]};b=this.$76v(true,b);c.criteria.addList(b);return isc.DS.checkEmptyCriteria(c)||{}},isc.A.$76v=function(a,b){for(var c=isc.addProperties({},this.getValues()),d={},e=[],f=this.getFields(),g=0;g<f.length;g++)if(f[g].shouldSaveValue){var h=f[g],i=f[g].getFieldName(),j=f[g].getCriteriaFieldName();delete c[i];if(a){h=h.getCriterion(b);h!=null&&e.add(h)}else if(j!=null)d[j]=f[g].getCriteriaValue()}if(a){for(var k in c)e.find("fieldName",
k)||c[k]!=null&&e.add({operator:isc.DataSource.getCriteriaOperator(c[k],b),fieldName:k,value:c[k]});return e}else return isc.addProperties(c,d)},isc.A.getFilterCriteria=function(){return this.getValuesAsCriteria()},isc.A.setValuesAsCriteria=function(a,b){if(!b&&!isc.DataSource.isAdvancedCriteria(a))this.setValues(a);else{this.setValues({});a=isc.clone(a);if(a.operator!=this.operator){this.logWarn("Dynamic Form editing advanced criteria object:"+isc.Comm.serialize(a)+". Form level operator specified as '"+
this.operator+"' - Criteria returned from this form will be nested in an outer "+this.operator+" clause.");a._constructor=null;a={_constructor:"AdvancedCriteria",operator:this.operator,criteria:[a]}}for(var c=this.getItems(),d=a.criteria,e=0;e<d.length;e++)for(var f=0;f<c.length;f++)if(c[f].shouldSaveValue)if(this.shouldApplyCriterionToItem(c[f],d[e])){c[f].setCriterion(d[e]);d[e]=null;break}d.removeEmpty();this.$76u=a}},isc.A.shouldApplyCriterionToItem=function(a,b){if(a.canEditCriterion(b))return true;
b.fieldName!=null&&b.fieldName==a.getCriteriaFieldName()&&this.logWarn("Editing AdvancedCriteria in a dynamicForm. Criteria includes a value for field:"+b.fieldName+". This form includes an item "+a+" with the same fieldName but the specified operator '"+b.operator+"' does not match the operator for this form item:"+a.getOperator()+". Original criterion will be retained and combined with any criterion returned from this item.","AdvancedCriteria");return false},isc.A.getValuesAsAdvancedCriteria=function(a,
b){return this.getValuesAsCriteria(true,a,b)},isc.A.getItem=function(a){if(isc.isA.FormItem(a))return a;var b=isc.Class.getArrayItem(a,this.items,this.fieldIdProperty);if(b!=null)return b;b=isc.Class.getArrayItem(a,this.items,"dataPath");if(b!=null)return b;if(isc.isA.Number(a-1))return this.items[parseInt(a)];return null},isc.A.getField=function(a){return this.getItem(a)},isc.A.getSubItem=function(a){return this.getItem(a)},isc.A.getItemById=function(a){a=isc.isA.String(a)?window[a]:a;if(isc.isA.FormItem(a))return a;
return null},isc.A.getValue=function(a){var b=this.getItem(a);if(b&&isc.isA.Function(b.getValue))return b.getValue();return this.$70p(a)},isc.A.$70p=function(a){return isc.DynamicForm.$70o(a,this.values)},isc.A.setValue=function(a,b){var c=this.getItem(a);if(c!=null)return c.setValue(b);else if(this.values!=null){this.$10w(a,b);return b}},isc.A.clearValue=function(a){var b=this.getItem(a);if(b!=null)b.clearValue();else this.values&&isc.DynamicForm.$70m(a,this.values)},isc.A.showItem=function(a){a=
this.getItem(a);if(a!=null)return a.show()},isc.A.hideItem=function(a){a=this.getItem(a);if(a!=null)return a.hide()},isc.A.saveItemValue=function(a,b){if(a.shouldSaveValue!=false){var c=a.getDataPath()||a.getFieldName();if(c!=null){this.$10w(c,b);if(this.$425(a)&&a.displayField!=c){c=a.mapValueToDisplay(b);this.setValue(a.displayField,c)}a.$10x()}}},isc.A.$10w=function(a,b){isc.DynamicForm.$70n(a,b,this.values);!this.selectionComponent&&this.valuesManager!=null&&isc.isA.ValuesManager(this.valuesManager)&&
this.valuesManager.members&&this.valuesManager.members.contains(this)&&this.valuesManager.$10y(a,b,this)},isc.A.clearItemValue=function(a){a=a.getDataPath()||a.getFieldName();isc.DynamicForm.$70m(a,this.values);!this.selectionComponent&&this.valuesManager&&this.valuesManager.$10z(a,this)},isc.A.$10r=function(a){this.values=a;if(!this.selectionComponent&&this.valuesManager!=null){var b=isc.getKeys(this.values),c;for(c in a){this.valuesManager.$10y(c,a[c],this);b.remove(c)}for(c=0;c<b.length;c++)this.valuesManager.$10z(b[c],
this)}},isc.A.getSavedItemValue=function(a){if(a.shouldSaveValue==false)return null;return this.$70p(a.getDataPath()||a.getFieldName())},isc.A.resetValue=function(a){return(a=this.getItem(a))?a.resetValue():null},isc.A.getValueMap=function(a){return(a=this.getItem(a))?a.getValueMap():null},isc.A.setValueMap=function(a,b){var c=this.getItem(a);return c?c.setValueMap(b):null},isc.A.getOptions=function(a){return this.getValueMap(a)},isc.A.setOptions=function(a,b){return this.setValueMap(a,b)},isc.A.getForm=
function(a){return this.Super("getForm",a==null?[this.getFormID()]:arguments)},isc.A.getFormID=function(){return this.$qs(this.$9l)},isc.A.getSerializeableFields=function(a){a.addList(["items"]);return this.Super("getSerializeableFields",arguments)},isc.A.expandSection=function(a){a=this.getItem(a);isc.isA.SectionItem(a)&&a.expandSection()},isc.A.collapseSection=function(a){a=this.getItem(a);isc.isA.SectionItem(a)&&a.collapseSection()},isc.A.$100=function(a){this.sectionVisibilityMode=="mutex"&&this.$6l&&
this.$6l!=a&&this.$6l.collapseSection();this.$6l=a},isc.A.$101=function(){},isc.A.getErrors=function(){return this.errors},isc.A.getFieldErrors=function(a){if(!this.errors)return null;var b;if(isc.isA.FormItem(a)){b=a;a=b.getFieldName();b=b.getDataPath()}a=this.errors[a];if(isc.isA.String(a)||isc.isAn.Array(a))return a;if(b!=null){a=this.errors[b];if(isc.isA.String(a)||isc.isAn.Array(a))return a}return null},isc.A.setErrors=function(a,b){this.errors=isc.DynamicForm.formatValidationErrors(a);var c=
{},d;for(d in this.errors){var e=this.getItem(d);if(!e||!e.visible)c[d]=this.errors[d]}b&&this.showErrors(this.errors,c)},isc.A.setError=function(a,b){var c=this.errors[a];if(c)if(isc.isA.String(c))this.errors[a]=[c,b];else this.errors[a].add(b);else this.errors[a]=b},isc.A.addFieldErrors=function(a,b,c){if(!this.errors)this.errors={};this.addValidationError(this.errors,a,b);c&&this.showFieldErrors(a)},isc.A.setFieldErrors=function(a,b,c){if(this.errors==null)this.errors={};this.errors[a]=b;c&&this.showFieldErrors(a)},
isc.A.clearFieldErrors=function(a,b){if(this.errors!=null)if(this.errors[a]){delete this.errors[a];b&&this.showFieldErrors(a)}},isc.A.clearErrors=function(a){this.setErrors({},a)},isc.A.hasErrors=function(){var a=this.errors;if(!a)return false;for(var b in a)if(a[b]!=null)return true;return false},isc.A.hasFieldErrors=function(a){var b=this.errors;return b&&b[a]!=null},isc.A.draw=function(a,b,c,d){if(isc.$cv)arguments.$cw=this;if(!this.readyToDraw())return this;this.invokeSuper(isc.DynamicForm,this.$ny,
a,b,c,d);this.$102();var e=!this.autoFocus?this.$9m:this.$9o;this.$10u=true;isc.Page.setEvent(isc.EH.IDLE,this,isc.Page.FIRE_ONCE,e);this.position==isc.Canvas.RELATIVE&&isc.Page.setEvent(isc.EH.LOAD,this,isc.Page.FIRE_ONCE,"$103");return this},isc.A.$us=function(){if(isc.Browser.isSafari){var a=this.getItems();if(this.isDrawn()&&a)for(var b=0;b<a.length;b++){a[b].$104();if(this.isDirty())break}}return this.Super("$us",arguments)},isc.A.$9n=function(){this.setItemValues(null,true);this.rememberValues();
delete this.$10u},isc.A.$9p=function(){this.$9n();this.focus()},isc.A.redraw=function(){this.$107();this.$106();this.$11v!=null&&delete this.$11v;this.Super("redraw",arguments);this.$108();this.setItemValues(null,true);var a,b,c;if(isc.Browser.isMoz)if(c=this.getClipHandle()){a=c.scrollLeft;b=c.scrollTop}if(isc.Browser.isMoz){if(a!=null&&c.scrollLeft!=a)c.scrollLeft=a;if(b!=null&&c.scrollTop!=b)c.scrollTop=b}this.itemsMoved()},isc.A.$102=function(){for(var a=this.items,b=0;b<a.length;b++)a[b]&&a[b].visible&&
a[b].drawn()},isc.A.$108=function(){for(var a=this.items,b=0;b<a.length;b++){var c=a[b];if(c)if(c.visible)c.isDrawn()?c.redrawn():c.drawn();else c.isDrawn()&&c.cleared()}},isc.A.$11a=function(){for(var a=this.items,b=0;b<a.length;b++)a[b].isDrawn()&&a[b].cleared()},isc.A.$107=function(){for(var a=this.items,b=0;b<a.length;b++){var c=a[b];c&&c.visible&&c.isDrawn()&&c.redrawing()}},isc.A.modifyContent=function(){this.$103()},isc.A.$103=function(){return this.$11c("placeCanvas")},isc.A.$11c=function(a){if(isc.CanvasItem)for(var b=
0;b<this.items.length;b++){var c=this.items[b];c&&isc.isA.CanvasItem(c)&&c[a]()}},isc.A.redrawFormItem=function(a,b){var c=this.getItems();if(a){for(;a.parentItem;)a=a.parentItem;if(c.contains(a)){this.$10m=true;this.markForRedraw(a.ID+": "+(b?b:"redrawFormItem"))}}},isc.A.getElementValues=function(){for(var a={},b=0;b<this.items.length;b++){var c=this.items[b],d=c.getDataElement()?c.getDataElement().value:"[no element]";a[c[this.fieldIdProperty]]=d}return a},isc.A.setItemValues=function(a,b,c,d){var e=
a==null;if(e)a=this.getValues();if(a==null)a={};var f;if(c)f=this.$76u?this.$76u.criteria:null;d=d||this.items;for(var g=0;g<d.length;g++){var h=d[g],i=h.getFieldName(),j=h.getDataPath(),k=h.isSetToDefaultValue(),l;if(j){for(var m=j.split(isc.slash),n=a,o=0;o<m.length-1;o++){n=n[m[o]];if(n==null)break}if(n!=null)l=n[m.last()]}else if(i)l=a[i];if(!(b&&isc.CanvasItem&&isc.isA.CanvasItem(h)&&!h.$11d())){j=!i&&!j||l===void 0;i=null;if(c&&j&&h.value!=null){i=h.value;if(i!=h._value)k=false}m=null;if(j&&
f!=null)for(o=0;o<f.length;o++)if(h.canEditCriterion(f[o])){j=false;m=f[o];f.removeAt(o);f.length==0&&delete this.$76u;break}if(h.shouldSaveValue==false)if(j){o=k?null:h._value;if(i!=null)o=i;h.setValue(o,k?false:b);continue}else{this.logInfo("DynamicForm.setValues() passed a value for '"+h[this.fieldIdProperty]+"'. The corresponding form item was declared with 'shouldSaveValue' set to  false to exclude its value from the form's values object. Setting 'shouldSaveValue' to true for this item.\n[To avoid seeing this message in the future, set 'shouldSaveValue' to true for any form items whose values are to be managed via  form.setValues() / form.getValues().]");
h.shouldSaveValue=true}if(i!=null){j=false;l=i}if(j||m==null&&e&&k)if(c)c&&k&&h._value!==void 0&&h.saveValue(h._value,true);else h.clearValue();else m!=null?h.setCriterion(m):h.setValue(l,true)}}},isc.A.$11e=function(){return this.itemLayout==this.$9q},isc.A.getInnerHTML=function(){this.autoDupMethods&&this.duplicateMethod("getInnerHTML");var a=isc.StringBuffer.create();this.writeFormTag&&!this.isPrinting&&a.append(this.getFormTagStartHTML());for(var b=this.values,c=this.items,d=false,e=0;e<c.length;e++){var f=
c[e],g=f.visible;if(f.showIf){isc.Func.replaceWithMethod(f,this.$9r,this.$9s);var h=f.getValue();g=f.showIf(f,h,this,b)==true}if(g&&this.isPrinting)if(f.shouldPrint!=null)g=f.shouldPrint;else if(g&&this.currentPrintProperties.omitControls){h=this.currentPrintProperties.omitControls;for(var i=0;i<h.length;i++){var j=h[i];if(isc.isA[j]&&isc.isA[j](f))g=false}}if(g!=f.visible){f.visible=g;f.alwaysTakeSpace||(d=true)}}if(d||this.$10m)isc.Canvas.invalidateTableResizePolicy(c);this.$10m=false;this.setRequiredIf();
if(this.flattenItems){i=null;for(e=0;e<c.length;e++){f=c[e];if(f.visible||f.alwaysTakeSpace)i++;f.showTitle&&f.titleOrientation!="top"&&i++;f.$58l=f.colSpan||null;f.colSpan=null}if(i){this.numCols=i;this.$10m=true;this.markForRedraw()}}if(this.$11e()){a.append(this.getAbsPosHTML());a.append(this.$9t);return a.release()}a.append(this.getTableStartHTML());if(this.titleWidth==this.$pa&&!this.colWidths){this.colWidths=[];for(i=0;i<this.numCols;i++)this.colWidths[i]=this.$pa}if(this.colWidths){e=this.colWidths;
if(e.length>this.numCols){this.$76z||this.logWarn("colWidths Array longer than numCols, using only first "+this.numCols+" column widths");e=e.slice(0,this.numCols)}else if(e.length<this.numCols){this.$76z||this.logWarn("colWidths Array shorter than numCols, remaining columns get '*' size");for(i=e.length;i<this.numCols;i++)e[i]=isc.star}}else{e=[];f=this.getInnerContentWidth();f-=this.cellBorder!=null?this.cellBorder:0;g=Math.floor(this.numCols/2);i=f-g*this.titleWidth;if(this.isPrinting)h="*";else{h=
Math.floor(i/(this.numCols-g));h=Math.max(this.minColWidth,h)}for(i=0;i<g;i++){e.add(this.titleWidth);e.add(h)}this.numCols%2!=0&&e.add(h);this.logIsInfoEnabled(this.$9u)&&this.logInfo("totalWidth: "+f+", generated colWidths: "+e,this.$9u)}g=this.getInnerContentWidth();h=this.getInnerContentHeight();if(this.cellSpacing!=0)if(isc.Browser.isMoz)h-=2*this.cellSpacing;else if(isc.Browser.isSafari)h-=this.cellSpacing;c.$8q=this.defaultRowHeight;isc.Canvas.applyTableResizePolicy(c,g,h,this.numCols,e);b=
false;if(isc.CanvasItem)for(i=0;i<c.length;i++){f=c[i];if(isc.isA.CanvasItem(f)&&f.checkCanvasOverflow()){!b&&this.logIsInfoEnabled(this.$9u)&&this.logInfo("CanvasItem: "+f+" overflowed, rerunning policy",this.$9u);b=true}}b&&isc.Canvas.applyTableResizePolicy(c,g,h,this.numCols,e,null,true);if(!this.isPrinting)e=c.$8r;for(f=0;f<e.length;f++){i=e[f];i=="*"?a.append("<COL>"):a.append(this.$9v,i,this.$oa)}a.append(this.$9w);i=isc.DynamicForm.$817();for(f=0;f<e.length;f++)if(isc.isA.Number(e[f])){g=e[f];
g-=this.cellSpacing!=null?2*this.cellSpacing:0;i[3]=isc.FormItem?isc.FormItem.getPrototype().baseStyle:null;h=isc.Browser.isIE?1:0;b=i.join(isc.emptyString);a.append(b,this.fixedColWidths?isc.Canvas.spacerHTML(g,h):null,this.$9y)}else a.append(i.join(isc.emptyString),this.$9y);a.append(this.$5t);this.autoSendTarget&&this.target&&a.append(this.$11f());b=[];e=0;for(d=c.length;e<d;e++)if(f=c[e]){g=f.visible;f.$10x();this.logIsDebugEnabled()&&this.logDebug("Drawing FormItem: "+f);if(f.alwaysTakeSpace||
g)if((f.rowSpan==0||f.colSpan==0)&&e<d-1)b.add(f);else{f.getFieldName();j=f.getErrors();h=f.getValue();var k=this.getTitleOrientation(f);if(isc.is.emptyString(j))j=null;if(f.$8l||e==0){e!=0&&a.append(this.$5t);if(f.$8n>0)for(i=0;i<f.$8n;i++)a.append(this.$5s,this.$5t);a.append(this.$5s);if(f.$8o>0)for(i=0;i<f.$8o;i++)a.append(this.$5u,this.$5v)}k==isc.Canvas.LEFT&&a.append(this.getTitleCellHTML(f,j));a.append(this.getCellStartHTML(f,j));g&&k==isc.Canvas.TOP&&a.append(this.getTitleSpanHTML(f,j),this.$9z);
(i=g&&j&&this.showInlineErrors)&&f.getErrorOrientation()==isc.Canvas.TOP&&a.append(this.getItemErrorHTML(f,j));if(b.length>0){for(var l=0;l<b.length;l++)b[l].visible&&a.append(b[l].getInnerHTML(b[l].getValue()));b.length=0}g?a.append(f.getInnerHTML(h,true,this.showInlineErrors)):a.append(isc.Canvas.spacerHTML(f.width,f.height));i&&f.getErrorOrientation()==isc.Canvas.BOTTOM&&a.append(this.getItemErrorHTML(f,j));a.append(this.getCellEndHTML(f,j));k==isc.Canvas.RIGHT&&a.append(this.getTitleCellHTML(f,
j))}}c.length>0&&a.append(this.$5t);this.writeFormTag&&!this.isPrinting?a.append(this.$90):a.append("</TABLE>");return a.release()},isc.A.getPrintChildren=function(){return null},isc.A.createErrorItem=function(){this.addItems([isc.addProperties({cellStyle:this.errorItemCellStyle},this.errorItemDefaults,this.errorItemProperties)],0);this.$52o=this.getItem(0)});isc.B.push(isc.A.getErrorsHTML=function(a){if(!a||isc.isAn.emptyObject(a))return isc.emptyString;var b=this.errorsPreamble;b+="<UL>";for(var c in a){var d=
this.getItem(c),e;if(d)e=d.getErrorMessage(a[c]);else{e=a[c];if(isc.isAn.Array(e))e="<ul><li>"+e.join("</li><li>")+"</li></ul>"}b+="<LI>"+(d?d.getTitle():c)+" : "+e+"</LI>"}b+="</UL>";return b},isc.A.getItemErrorHTML=function(a,b){return a.getErrorHTML(b)},isc.A.$11f=function(){this.$91[1]=this.autoSendTargetFieldName;this.$91[3]=this.target;return this.$91.join(isc.emptyString)},isc.A.getCellStartHTML=function(a){var b=a.getColSpan(),c=a.getRowSpan();if(b==0)b=1;if(c==0)c=1;if(b=="*")b=this.numCols-
(a.$8m?a.$8m[0]:0);var d=a.getCellStyle(),e=this.fixedRowHeights||a.shouldFixRowHeight(),f=a.$8t?a.$8t[1]:null;if(isc.isA.Number(f)&&this.cellSpacing!=0)f-=2*this.cellSpacing;return this.$11g(a.align?a.align:(this.form?this.form.isRTL():this.isRTL())?isc.Canvas.RIGHT:isc.Canvas.LEFT,d,c,b,null,e?f:null,null,a.cssText,this.form?this.form.getID():this.getID(),a.getItemID(),a.getFormCellID())},isc.A.$11g=function(a,b,c,d,e,f,g,h,i,j,k,l){var m=isc.StringBuffer.create(),n=isc.$ad;m.append("<TD ALIGN=",
a,b!=null?" CLASS='"+b+"'":n," STYLE='",h!=null?h:n,"'",c>1?" ROWSPAN="+c:n,d>1?" COLSPAN="+d:n,e!=null?" WIDTH="+e:n,f!=null?" HEIGHT="+f:n,g!=null?g:n);k&&m.append(" ID=",k," ");j&&i&&m.append(isc.DynamicForm.$89,"='",j,"'");m.append(l?"><NOBR>":">");return m.release()},isc.A.getCellEndHTML=function(){return this.$11h()},isc.A.$11h=function(a){return a?"</NOBR></TD>":"</TD>"},isc.A.getTitleOrientation=function(a){if(a&&!a.shouldShowTitle())return null;return(a?a.titleOrientation:null)||this.titleOrientation||
isc.Canvas.LEFT},isc.A.getTitleAlign=function(a){return a.titleAlign?a.titleAlign:this.titleAlign?this.titleAlign:this.isRTL()?isc.Canvas.LEFT:isc.Canvas.RIGHT},isc.A.getTitleVAlign=function(a){a=a.titleVAlign?a.titleVAlign:this.titleVAlign?this.titleVAlign:isc.Canvas.CENTER;return a==isc.Canvas.CENTER?isc.Canvas.MIDDLE:a},isc.A.getTitleHeight=function(a){return a.titleHeight!=null?a.titleHeight:this.titleHeight},isc.A.getTitleSpanHTML=function(a,b){var c=isc.StringBuffer.create();c.append("<SPAN ",
this.$11i(a)," CLASS='",a.getTitleStyle(),"' ALIGN=",this.getTitleAlign(a),">");c.append(this.getTitleHTML(a,b));c.append("</SPAN>");return c.release()},isc.A.shouldClipTitle=function(a){if(!a||!a.form==this)return false;return a.clipTitle!=null?a.clipTitle:this.clipItemTitles},isc.A.getTitleCellHTML=function(a,b){var c=isc.StringBuffer.create(),d=a.getTitleStyle(),e=this.getTitleAlign(a),f=this.getTitleVAlign(a),g=this.$99;g[1]=this.$11i(a);g[3]=d;g[5]=e;g[7]=f;g[9]=a.getRowSpan()>1?" ROWSPAN="+
a.getRowSpan():null;g[10]=a.getTitleColSpan()>1?" COLSPAN="+a.getTitleColSpan():null;c.append(g.join(isc.emptyString));c.append(this.getTitleCellInnerHTML(a,b));c.append(this.$98);return c.release()},isc.A.getTitleCellInnerHTML=function(a,b){var c=isc.StringBuffer.create(),d=a.getTitleStyle(),e=this.getTitleAlign(a),f=a.$8u||null,g=a.$8t?a.$8t[1]:null,h=this.shouldClipTitle(a),i=a.wrapTitle!=null?a.wrapTitle:this.wrapItemTitles!=null?this.wrapItemTitles:!h;if(g){if(this.cellSpacing)g-=2*this.cellSpacing;
var j,k;if(d){j=isc.Element.$tt(d,true);k=isc.Element.$tu(d,true)}if(j==null)j=this.cellPadding||0;if(k==null)k=this.cellPadding||0;g-=j+k;if(d)g-=isc.Element.$ym(d)}if(f){if(this.cellSpacing)f-=2*this.cellSpacing;var l,m;if(d){l=isc.Element.$tr(d,true);m=isc.Element.$ts(d,true)}if(l==null)l=this.cellPadding||0;if(m==null)m=this.cellPadding||0;f-=l+m;f-=isc.Element.$yn(d)}j=isc.Browser.isMoz?this.$94:this.$92;k=isc.Browser.isMoz?this.$11j:this.$93;if(h){l=this.$10a;l[1]=i||!isc.Browser.isMoz?null:
"white-space:nowrap;";l[2]=f!=null?k+f+"px;":null;l[3]=g!=null?j+g+"px;":null;c.append(l.join(isc.emptyString));if(!isc.Browser.isMoz){f=isc.DynamicForm.$818();f[1]=g;f[3]=d;f[5]=e;f[7]=i?null:this.$95;c.append(f.join(isc.emptyString))}}else i||c.append(this.$95);c.append(this.getTitleHTML(a,b));if(h){isc.Browser.isMoz||c.append(this.$96);c.append(this.$97)}return c.release()},isc.A.$11i=function(a){if(!isc.DynamicForm.$11k)isc.DynamicForm.$11l=[" ",isc.DynamicForm.$89,"='",null,"' ",isc.DynamicForm.$9a,
"='",isc.DynamicForm.$9g,"' ","ID="];isc.DynamicForm.$11l[3]=a.getItemID();isc.DynamicForm.$11l[10]=this.$427(a);return isc.DynamicForm.$11l.join(isc.emptyString)},isc.A.$427=function(a){return this.$qs(a.getID()+this.$63z)},isc.A.getTitleCell=function(a){if(!this.isDrawn())return null;a=this.getItem(a);if(!a)return null;return isc.Element.get(this.$427(a))},isc.A.updateTitleCellState=function(a){var b=this.getTitleCell(a);if(b!=null){a=this.getItem(a);b.className=a.getTitleStyle();b.innerHTML=this.getTitleCellInnerHTML(a,
a.getErrors())}},isc.A.getTitleHTML=function(a){var b=isc.StringBuffer.create(),c=a.visible?a.getTitleHTML():null;if(c){var d=this.isRequired(a);a=this.getTitleOrientation(a);a=a==isc.Canvas.LEFT||a==isc.Canvas.TOP;b.append(d&&this.hiliteRequiredFields?a?this.requiredTitlePrefix:this.requiredRightTitlePrefix:a?this.titlePrefix:this.rightTitlePrefix,c,d&&this.hiliteRequiredFields?a?this.requiredTitleSuffix:this.requiredRightTitleSuffix:a?this.titleSuffix:this.rightTitleSuffix)}else b.append("&nbsp;");
return b.release()},isc.A.getFormTagStartHTML=function(){var a=this.$10c,b=this.getFormID(),c=this.getID();a[3]=b;a[4]=this.$11e()?this.$10e:null;a[6]=this.method;a[8]=this.action;a[10]=this.isMultipart()?isc.DynamicForm.MULTIPART_ENCODING:isc.DynamicForm.NORMAL_ENCODING;if(this.target!=null){a[11]=this.$10f;a[12]=this.target;a[13]=this.$ob}else{a[11]=null;a[12]=null;a[13]=null}a[15]=c;a[17]=c;return a.join(isc.emptyString)},isc.A.getTableStartHTML=function(){var a=isc.isA.DynamicForm(this)?this.$10g:
isc.DynamicForm.getPrototype().$10g;a[1]=this.$11n();a[4]=this.isPrinting?"100%":this.getInnerContentWidth!=null?this.getInnerContentWidth():this.getInnerWidth();a[6]=this.cellSpacing;a[8]=this.cellPadding;a[10]=this.cellBorder;return a.join(isc.emptyString)},isc.A.$11n=function(){return this.$qs(this.$10h)},isc.A.$11o=function(){return isc.Element.get(this.$11n())},isc.A.layoutChildren=function(a,b,c,d){this.invokeSuper(isc.DynamicForm,"layoutChildren",a,b,c,d);if(a=this.getItems())for(b=0;b<a.length;b++){c=
a[b].width;d=a[b].height;if(isc.isA.String(c)&&(c.contains("%")||c.contains("*"))||isc.isA.String(d)&&(d.contains("%")||d.contains("*"))){this.markForRedraw("size change with dynamic size children");break}}},isc.A.getAbsPosHTML=function(){for(var a=isc.SB.create(),b=0,c=this.items.length;b<c;b++){var d=this.items[b];if(d){d.$10x();d.visible&&a.append(d.getStandaloneItemHTML(d.getValue()))}}return a.release()},isc.A.getScrollWidth=function(a){if(this.$qz){this.$qz=null;this.adjustOverflow("widthCheckWhileDeferred")}if(!a&&
this.$su!=null)return this.$su;if(!isc.Browser.isIE||!this.$11e()||!(this.isDrawn()||this.handleDrawn())||this.items==null)a=isc.Canvas.$b4.getScrollWidth.call(this,a);else for(var b=a=0;b<this.items.length;b++){var c=this.items[b];if(!(c.visible==false||!c.isDrawn())){var d=c.getAbsDiv();if(d){c=d.scrollWidth+c.$11p(c.left);if(c>a)a=c}}}return this.$su=a},isc.A.getScrollHeight=function(a){if(this.$qz){this.$qz=null;this.adjustOverflow("heightCheckWhileDeferred")}if(!a&&this.$sz!=null)return this.$sz;
if(!isc.Browser.isIE||!this.$11e()||!(this.isDrawn()||this.handleDrawn())||this.items==null)a=isc.Canvas.$b4.getScrollHeight.call(this,a);else for(var b=a=0;b<this.items.length;b++){var c=this.items[b];if(!(c.visible==false||!c.isDrawn())){var d=c.getAbsDiv();if(d){c=d.scrollHeight+c.$11p(c.top,true);if(c>a)a=c}}}return this.$sz=a},isc.A.$11q=function(){return this.canSubmit||this.isMultipart()||this.action!=isc.DynamicForm.getPrototype().action},isc.A.submitForm=function(){this.$11q()||this.logWarn("Attempt to perform direct submission on DynamicForm where this.canSubmit is false. Please set this property to true, or use the standard databinding interfaces to send data to the server.");
this.getFileItemForm()!=null&&this.logWarn("Performing a direct submission on a DynamicForm containing a FileItem. Note: This item's value will not be submitted to the server.  FileItems are intended for use with databound forms backed by the SmartClient server only.  If you are not using the SmartClient Databinding subsystem, use an UploadItem rather than a FileItem to submit a file as part of a raw HTTP request. Otherwise use saveData() rather than a direct call to submitForm() to save the full set of values for the form.");
var a=this.getForm();if(a){if(a.action!=this.action)a.action=this.action;try{return a.submit()}catch(b){this.logWarn("Form submission was unsuccessful. In some browsers this can occur when an upload item is present and has an invalid value.\n"+b.message);this.formSubmitFailed()}}},isc.A.performImplicitSave=function(a,b){a.awaitingImplicitSave&&delete a.awaitingImplicitSave;a.$da!=null&&isc.Timer.clear(a.$da);this.logInfo("implicitSave called "+(!b?"by editorExit()":"after implicitSaveDelay ("+this.implicitSaveDelay+
"ms)")+" for item "+a.name+".");this.saveData(this.getID()+".implicitSaveCallback(data)")},isc.A.formSubmitFailed=function(){isc.warn(this.formSubmitFailedWarning);if(this.getValues()._transaction!=null&&isc.RPCManager&&isc.XMLTools){var a=isc.XMLTools.parseXML(this.getValues()._transaction),b;if(a)b=isc.XMLTools.selectNumber(a,"//transactionNum");if(b!=null){isc.RPCManager.doClearPrompt(b);isc.RPCManager.clearTransaction(b)}}},isc.A.setAction=function(a,b){this.action=a;var c=this.getForm();if(c)c.action=
a;this.$66g=!b},isc.A.setTarget=function(a){this.target=a;var b=this.getForm();if(b)b.target=a},isc.A.setMethod=function(a){this.method=a;var b=this.getForm();if(b)b.method=a},isc.A.getFileItemForm=function(){if(!isc.FileItem)return null;for(var a=this.getItems()||[],b=0;b<a.length;b++)if(isc.isA.FileItem(a[b]))return a[b].canvas;return null},isc.A.$10d=function(){return false},isc.A.validate=function(a,b,c,d){if(this.disableValidation)return true;if(this.dataSource&&this.dataSource.useLocalValidators!=
null&&this.useLocalValidators==false)return true;var e=this.hasErrors(),f=false,g=null;this.getForm();var h=false,i={},j={},k=this.getValues();b=a&&!b&&this.dataSource?isc.addProperties({},this.getDataSource().getFields()):null;var l={unknownErrorMessage:this.unknownErrorMessage,serverValidationMode:"full"};if(c)l.typeValidationsOnly=c;for(var m=0;m<this.items.length;m++){var n=false,o=this.items[m],s=o.getFieldName(),r=o.getDataPath();c=o.getValue();var t=!o.visible||isc.isA.HiddenItem(o);if(!(t&&
!a)){if(o.validators!=null){if(!isc.isAn.Array(o.validators))o.validators=[o.validators];c=this.validateField(o,o.validators,c,k,l);if(c!=null){if(c.errors!=null)if(n=this.addValidationError(i,s||r,c.errors))f=true;if(c.resultingValue!=null){c=c.resultingValue;if(s)k[s]=c;h=true}}}if(t){if(n)j[s||r]=i[s||r]}else if(g==null&&f)g=o;b&&delete b[s]}}if(b){l.dontValidateNullValues=true;delete l.typeValidationsOnly;for(var p in b){g=b[p];a=p;m=g.validators;if(m!=null){c=k[a];c=this.validateField(g,m,c,
k,l);c!=null&&c.errors!=null&&this.addValidationError(i,a,c.errors)}if(i[a]!=null)j[a]=i[a]}}f&&this.logInfo("Validation errors: "+isc.Log.echoAll(i));if(d)return f?i:true;this.setErrors(i);if(h){this.setItemValues(k);for(var q in k)this.getItem(q)==null&&this.$10w(q,k[q])}if(f||e)this.showErrors(i,j);return!f},isc.A.valuesAreValid=function(a,b){var c=this.validate(a,null,null,true);return c===true?b?null:true:b?c:false},isc.A.getValidatedValues=function(){if(!this.validate())return null;return this.getValues()},
isc.A.showErrors=function(a,b,c){if(b===void 0)b=this.getHiddenErrors();if(a===void 0)a=this.getErrors();if(a&&!this.showInlineErrors&&(!this.$52o||this.$52o.destroyed))this.createErrorItem();this.markForRedraw("Validation Errors Changed");if(a&&!isc.isAn.emptyObject(a)&&!c)for(var d in a)if((c=this.getItem(d))&&c.isVisible()&&c.isDrawn()){this.$11b(c);break}this.showInlineErrors||this.delayCall("scrollIntoView",[0,0],100);b&&this.$21z(b)},isc.A.getHiddenErrors=function(){if(!this.errors)return null;
var a=false,b={},c;for(c in this.errors){var d=this.getItem(c);if(!d||!d.visible){a=true;b[c]=this.errors[c]}}return a?b:null},isc.A.showFieldErrors=function(a,b){return this.showErrors(void 0,void 0,b)},isc.A.$21z=function(a){if(!(a==null||isc.isAn.emptyObject(a))){var b;if(this.handleHiddenValidationErrors)b=this.handleHiddenValidationErrors(a);if(b!=false){b="Validation errors occurred for the following fields with no visible form items:";for(var c in a){var d=a[c];isc.isAn.Array(d)||(d=[d]);if(d.length!=
0){b+="\n"+c+":";for(var e=0;e<d.length;e++)b+=(e==0?"- ":"\n - ")+d[e]}}this.logWarn(b,"validation")}}},isc.A.isRequired=function(a){return isc.DynamicForm.canEditField(a,this)&&(a.required||a.$11m||this.isXMLRequired(a))},isc.A.setRequiredIf=function(){this.getValues();for(var a=0;a<this.items.length;a++){var b=this.items[a],c=b.validators;if(!(!b.visible||!c||c.length==0))for(var d=0;d<c.length;d++){var e=c[d];if(e)if(e.type==this.$10i){var f=b.getValue();e.expression!=null&&!isc.isA.Function(e.expression)&&
isc.Func.replaceWithMethod(e,"expression","item,validator,value");b.$11m=e.expression.apply(this,[b,e,f])}}}},isc.A.setFocusItem=function(a){this.$10n=a=this.getItem(a)},isc.A.getFocusItem=function(){for(var a=this.getFocusSubItem();a&&a.parentItem!=null;)a=a.parentItem;return a},isc.A.getFocusSubItem=function(){return this.$10n},isc.A.$vl=function(){return!this.isDisabled()},isc.A.setFocus=function(a){if(this.$vl()){this.isVisible();if(a){var b=this.getFocusSubItem();if(b==null){var c=this.getItems();
if(c!=null)for(var d=0;d<c.length;d++){var e=c[d];if(e.$kk()&&e.isDrawn()&&e.isVisible()&&!e.isDisabled()){b=e;break}}}c=isc.EH.lastEvent;if(b!=null&&!(c.target==this&&c.eventType==isc.EH.MOUSE_DOWN))return this.focusInItem(b)}this.Super("setFocus",arguments);a||this.$11r(this.getFocusSubItem())}},isc.A.$kf=function(a,b,c){if(c||!this.items||this.items.length==0||b&&isc.EH.targetIsMasked(this,b))return this.Super("$kf",arguments);var d=this.getFocusSubItem();if(d==null)this.focusAtEnd(a);else{for(;d.parentItem;){if(d.$11s(a))return;
d=d.parentItem}if(!d.$11s(a)){d=this.$11t(d,a);if(d!=null)this.focusInItem(d);else if(isc.EH.$kj==this&&isc.EH.$kl==this)this.focusAtEnd(a);else return this.Super("$kf",arguments)}}},isc.A.$11t=function(a,b){for(var c=this.items,d=a.getGlobalTabIndex(),e,f,g=c.indexOf(a),h=0;h<c.length;h++){var i=c[h];if(i!=a){var j=i.getGlobalTabIndex();if(!(j<0))if(this.$11u(i,true))if(b){if(j==d&&h>g){e=i;break}if(j>d&&(f==null||f>j)){e=i;f=j}}else if((j<d||j==d&&g>h)&&(f==null||f<=j)){e=i;f=j}}}return e},isc.A.focusAtEnd=
function(a){if(this.items){for(var b,c,d=this.items,e=0;e<d.length;e++){var f=d[e],g=f.getGlobalTabIndex();if(!(g<0||!this.$11u(f,true)))if(c==null||a&&g<c||!a&&g>=c){b=f;c=g}}if(b&&this.$11u(b,true))this.focusInItem(b);else{var h;if(b=isc.EH.clickMaskRegistry)for(e=b.length-1;e>=0;e--)if(isc.EH.isHardMask(b[e])){h=b[e];break}this.$kf(a,h,true)}}},isc.A.$11u=function(a,b){if(isc.isA.String(a))a=this.getItem(a);return a&&a.$kk()&&a.isDrawn()&&a.isVisible()&&!a.isDisabled()&&(!b||a.tabIndex!=-1)},isc.A.focusInItem=
function(a){var b=a!=null?this.getItem(a):this.getFocusSubItem();if(b)if(b.$kk()){b.focusInItem();this.setFocusItem(b);if(this.$10u){var c=this;isc.Page.setEvent("idle",function(){c.destroyed||c.focusInItem()},isc.Page.FIRE_ONCE)}}else this.logWarn("focusInItem: item cannot accept focus: "+b);else a!=null&&this.logWarn("couldn't find focus item: "+a)},isc.A.clearFocusItem=function(){delete this.$10n},isc.A.blurFocusItem=function(){var a=this.getFocusSubItem();if(a!=null){this.$11r(a);this.clearFocusItem()}},
isc.A.$11r=function(a){a!=null&&a.blurItem()},isc.A.$106=function(){var a=this.getFocusSubItem();if(a!=null&&a.hasFocus){if(this.$11v==null)this.$11v=0;else this.$11v+=1;this.$11r(a)}else this.logDebug("blur w/o handler: no item to blur")},isc.A.$11b=function(a){if(!a||!this.$11u(a)){var b;if(a&&a.parentItem){this.$11b(a.parentItem);b=true}this.logInfo("$11b("+a+"): not calling focus as item not focusable or item already has focus"+(b?". Putting focus into containerItem instead.":""),"nativeFocus")}else{b=
a.hasFocus;if(isc.Browser.isIE)b=(b=isc.DynamicForm.$mu(document.activeElement))&&b.item==a;if(!b){this.$65n(a);this.focusInItem(a)}}},isc.A.$65n=function(a){if(this.$11w==null)this.$11w=0;else this.$11w+=1;this.$11x=a},isc.A.setOpacity=function(a,b,c,d,e,f){var g=this.opacity;this.invokeSuper(isc.DynamicForm,"setOpacity",a,b,c,d,e,f);a=this.opacity;if(isc.Browser.isMoz&&this.hasFocus&&a!=g&&(a==null||a==100||g==null||g==100))if((a=this.getFocusSubItem())&&a.$429()){this.$106();this.$11b(a)}},isc.A.clearingElement=
function(a){if(this.$11w!=null&&this.$11x==a){delete this.$11w;delete this.$11x}this.$11v!=null&&this.getFocusSubItem()==a&&delete this.$11v},isc.A.hide=function(){isc.Browser.isMoz&&this.$11r(this.getFocusSubItem());this.Super("hide",arguments)},isc.A.setVisibility=function(a,b,c,d){this.invokeSuper(isc.DynamicForm,"setVisibility",a,b,c,d);this.itemsVisibilityChanged();this.isVisible()&&this.isDrawn()&&this.autoFocus&&this.focus()},isc.A.clear=function(){this.Super("clear",arguments);this.itemsVisibilityChanged();
this.$11a()},isc.A.$lf=function(){this.Super("$lf",arguments);this.hasFocus||this.$11r(this.getFocusSubItem())},isc.A.parentVisibilityChanged=function(){!this.isVisible()&&isc.Browser.isMoz&&this.$11r(this.getFocusSubItem());this.Super("parentVisibilityChanged",arguments);this.itemsVisibilityChanged();this.isVisible()&&this.autoFocus&&this.focus()},isc.A.$kr=function(a){var b=this.$ne(a);if(b.item){b=b.item.$kr(a,b);if(b!=null)return b}return this.Super("$kr",arguments)},isc.A.prepareForDragging=
function(a,b,c,d){var e=this.ns.EH;if(!e.dragTarget){e=this.$ne(e.lastEvent);if(e.item&&(e.overElement||e.overTextBox||e.overControlTable))return false;return this.invokeSuper(isc.DynamicForm,"prepareForDragging",a,b,c,d)}},isc.A.$ne=function(a){if(!a)a=isc.EH.lastEvent;var b=isc.EH.isMouseEvent(a.eventType)?a.nativeTarget:a.nativeKeyTarget;b=isc.DynamicForm.$mu(b,this);return a.itemInfo=b},isc.A.getEventItem=function(){var a=isc.EH.lastEvent.itemInfo;if(a!=null&&!a.inactiveContext&&!a.overTitle)return a.item;
return null},isc.A.getEventItemInfo=function(){var a=this.$ne();if(a==null||a.inactiveContext)return null;return{item:a.item,overItem:a.overElement||a.overTextBox||a.overControlTable,overTitle:a.overTitle,icon:a.overIcon}},isc.A.handleMouseStillDown=function(a){if(isc.$cv)arguments.$cw=this;var b=this.$ne(a);b=b.overTitle||b.inactiveContext?null:b.item;if(b!=null)if(b.form==this)if(b.mouseStillDown)if(b.handleMouseStillDown(a)==false)return false},isc.A.handleMouseDown=function(a){var b=this.$ne(a),
c=b.overTitle?null:b.item;if(c!=null)if(c.form==this){c.handleMouseDown(a);isc.Browser.isSafari&&!b.inactiveContext&&b.overElement&&isc.isA.CheckboxItem(c)&&c.focusInItem()}},isc.A.$11y=function(a,b){var c=this.$11z,d=this.$110,e=this.$111,f=a.item,g=a.overTitle,h=a.overIcon;if(a.inactiveContext!=null)h=g=f=null;if(c&&c.destroyed)this.$110=this.$111=this.$11z=c=null;if(f&&f.destroyed)h=g=f=null;this.$11z=f;this.$110=g;this.$111=h;if(b==isc.EH.MOUSE_OVER){if(f)if(g)f.handleTitleOver();else{h&&f.$113(h);
f.handleMouseOver()}}else if(b==isc.EH.MOUSE_OUT){if(c)if(d)c.handleTitleOut();else{e&&c.$114(e);c.handleMouseOut()}}else if(c!=f||d!=g){if(c)if(d)c.handleTitleOut();else{e&&c.$114(e);c.handleMouseOut()}if(f)if(g)f.handleTitleOver();else{h&&f.$113(h);f.handleMouseOver()}}else if(g)f.handleTitleMove();else if(e!=h){e&&f.$114(e);h&&f.$113(h)}else if(f){h&&f.$115(h);f.handleMouseMove()}},isc.A.handleMouseOver=function(a,b){if(this.mouseOver&&this.mouseOver(a,b)==false)return false;this.$11y(this.$ne(a),
isc.EH.MOUSE_OVER)},isc.A.handleMouseMove=function(a,b){if(this.mouseMove&&this.mouseMove(a,b)==false)return false;this.$11y(this.$ne(a),isc.EH.MOUSE_MOVE)},isc.A.handleMouseOut=function(a,b){this.$11y({},isc.EH.MOUSE_OUT);if(this.mouseOut&&this.mouseOut(a,b)==false)return false},isc.A.bubbleItemHandler=function(a,b,c,d,e,f){for(var g=this.getItemById(a),h=null;g!=null;g=g.parentItem)if(g.form==this){g[b]!=null&&!isc.isA.Function(g[b])&&isc.Func.replaceWithMethod(g,b,"arg1,arg2,arg3,arg4");if(g[b]==
null){this.logWarn("handler:"+b+" is not present on itemID "+a);return false}h=g[b](c,d,e,f);if(h==false)break}return h},isc.A.bubbleInactiveEditorEvent=function(a,b,c){return this.bubbleItemHandler(a,"$680",b,c.inactiveContext,c)},isc.A.elementChanged=function(a){return this.bubbleItemHandler(a,"elementChanged",a)!=false},isc.A.handleClick=function(a){var b=this.$ne(a);if(this.editingOn)if(!b||!b.item||!b.inactiveContext&&!b.overTitle&&!b.overIcon&&!b.overElement&&!b.overTextBox&&!b.overControlTable){var c=
false;if(b&&b.item&&b.item.isA("SpacerItem"))c=true;this.logWarn("No item clicked upon, passing the click to the DF","EventHandler");if(!c)return this.Super("handleClick",arguments)}if(b&&b.item){c=b.item;if(b.inactiveContext){this.logInfo("Bubbling inactive editor event for "+c.ID,"EventHandler");return this.bubbleInactiveEditorEvent("click",c,b)}else if(b.overTitle){this.logInfo("Bubbling handleTitleClick event for "+c.ID,"EventHandler");return this.bubbleItemHandler(c,"handleTitleClick",c)}else{var d=
b.overElement||b.overTextBox||b.overControlTable;d=d||c.isA("SpacerItem");if(b.overIcon&&c.form==this){if(c.$116(b.overIcon)==false)return false;if((b=c.getIcon(b.overIcon))&&b.writeIntoItem)d=true}d&&this.logInfo("Bubbling handleClick event for "+c.ID,"EventHandler");if(d&&this.bubbleItemHandler(c,"handleClick",c)==false)return false;d&&this.logInfo("Bubbling handleCellClick event for "+c.ID,"EventHandler");return this.bubbleItemHandler(c,"handleCellClick",c)}}return this.Super("handleClick",arguments)},
isc.A.handleDoubleClick=function(a){var b=this.$ne(a);if(b&&b.item){var c=b.item;if(b.inactiveContext)return this.bubbleInactiveEditorEvent(c,"doubleClick",b);else if(b.overTitle)return this.bubbleItemHandler(c,"handleTitleDoubleClick",c);else{var d=b.overElement||b.overTextBox||b.overControlTable;if(b.overIcon){if(c.$116(b.overIcon)==false)return false;if((b=c.getIcon(b.overIcon))&&b.writeIntoItem)d=true}if(d&&this.bubbleItemHandler(c,"handleDoubleClick",c)==false)return false;return this.bubbleItemHandler(c,
"handleCellDoubleClick",c)}}return this.Super("handleDoubleClick",arguments)},isc.A.elementFocus=function(a,b){this.hasFocus||isc.EventHandler.focusInCanvas(this);var c=this.getItemById(b);this.setFocusItem(c);var d=true;d=false;if(this.$11w!=null)if(this.$11x!=c){delete this.$11w;delete this.$11x}else{d=true;this.$11w-=1;if(this.$11w<0){delete this.$11w;delete this.$11x}}d=this.bubbleItemHandler(b,"elementFocus",d);return d!=false},isc.A.elementBlur=function(a,b){if(isc.isA.FormItem(this.getItemById(b))){var c=
true;if(this.$11v==null)c=this.bubbleItemHandler(b,"elementBlur");else{this.$11v-=1;this.$11v<0&&delete this.$11v}this.clearPrompt();return c!=false}},isc.A.handleKeyPress=function(a){if(a.keyName==this.$10j)if(this.saveOnEnter){var b=this.getFocusSubItem();isc.isA.TextItem(b)&&this.submit()}if(a.characterValue!=null&&a.characterValue!=0&&a.keyName!="Escape")return isc.EventHandler.STOP_BUBBLING;if(!this.$118)this.$118={Arrow_Up:true,Arrow_Down:true,Arrow_Right:true,Arrow_Left:true,Page_Up:true,Page_Down:true,
Home:true,End:true,Backspace:true,Delete:true,Tab:true};if(this.$118[a.keyName]&&a.keyTarget!=this)return isc.EventHandler.STOP_BUBBLING;return this.Super("handleKeyPress",arguments)},isc.A.itemHoverHTML=function(a){if(a.implementsPromptNatively)return null;var b=a.prompt;if(!b&&a.parentItem)b=this.itemHoverHTML(a.parentItem);return b},isc.A.titleHoverHTML=function(a){if(a.prompt)return a.prompt;if(this.shouldClipTitle(a))return a.getTitle()},isc.A.$119=function(a,b){if(b&&!isc.is.emptyString(b)){var c=
this.$wc(a);isc.Hover.show(b,c,a.hoverRect||this.itemHoverRect)}else isc.Hover.clear()},isc.A.$wc=function(a){isc.isA.FormItem(a)||(a=this.getItem(a));return{width:a&&a.hoverWidth!=null?a.hoverWidth:this.itemHoverWidth,height:a&&a.hoverHeight!=null?a.hoverHeight:this.itemHoverHeight,align:a&&a.hoverAlign!=null?a.hoverAlign:this.itemHoverVAlign,baseStyle:a&&a.hoverStyle!=null?a.hoverStyle:this.itemHoverStyle,opacity:a&&a.hoverOpacity!=null?a.hoverOpacity:this.itemHoverOpacity,moveWithMouse:this.hoverMoveWithMouse}},
isc.A.showPrompt=function(a){window.status=a},isc.A.clearPrompt=function(){window.status=""},isc.A.isMultipart=function(){return!(this.encoding==isc.DynamicForm.NORMAL||this.encoding==isc.DynamicForm.NORMAL_ENCODING)},isc.A.itemIsLastInRow=function(a,b){var c=this.items.$8j[b],d=this.getItems().indexOf(a);if(!c||d<0)return false;if(c[this.numCols-1]==d)return true;return false},isc.A.getColumnWidths=function(){var a=this.items.$8j,b=[];b.length=this.numCols;for(var c=0;c<b.length;c++)b[c]=0;for(c=
0;c<a.length;c++)for(var d=a[c],e=0;e<d.length;e++){var f=this.items.get(d[e]);if(!(f.colSpan&&f.colSpan>1)){if(f.showTitle&&(this.titleOrientation=="left"||!this.titleOrientation)){if(f.getVisibleTitleWidth()>b[e])b[e]=f.getVisibleTitleWidth();e++}if(f.width>b[e])b[e]=f.width;if(f.showTitle&&f.titleOrientation=="right"&&f.getVisibleTitleWidth()>b[e+1])b[++e]=f.getVisibleTitleWidth()}}return b},isc.A.getItemTableOffsets=function(a,b){var c=b||this.items.$8j,d=this.getItems().indexOf(a),e={};e.itemIndex=
d;for(var f=0;f<c.length;f++){var g=c[f],h=g.indexOf(d);g=g.lastIndexOf(d);if(h>-1&&g>-1){if(!e.left||h<e.left)e.left=h;if(!e.width||e.width<g-h)e.width=g-h+1;if(!e.top||f<e.top)e.top=f;if(!e.height||e.height<f-e.top)e.height=f-e.top+1}}return e},isc.A.getItemDropIndex=function(a,b){if(a){b||(b="L");var c=this.getItemTableOffsets(a);if(b=="L")return c.itemIndex;if(b=="R"){if(this.itemIsLastInRow(a)&&this.canAddColumns!=true)return c.itemIndex+1;return c.itemIndex+1}if(b=="T")return this.getItemIndexAtTableLocation(c.top-
(c.top==0?0:1),c.left);if(b=="B"){c=this.getItemIndexAtTableLocation(c.top+c.height-1+1,c.left);if(c==null)c=this.items.length;return c}}},isc.A.getItemIndexAtTableLocation=function(a,b){var c=this.items.$8j;if(c[a])return c[a][b]},isc.A.getItemAtPageOffset=function(a,b){this.items.$69e=this.getColumnWidths();var c=this.items.$8j,d=this.items.$69e,e=this.items.$8s,f=this.inWhichPosition(d,a-this.getPageLeft()),g=this.inWhichPosition(e,b-this.getPageTop());f=f==-1?0:f==-2?d.length:f;g=g==-1?0:g==-2?
e.length:g;if(!c[g])return null;c=c[g][f];d=this.getItem(c);if(d!=null){d.$69f=g;d.$69g=f;d.$69d=c}return d},isc.A.getNearestItem=function(a,b){var c=9999999999,d;this.logDebug("Computing nearest item to ("+a+","+b+")","formItemDragDrop");for(var e=0;e<this.items.length;e++){var f=this.items[e],g=f.getPageRect(true),h=g[0],i=g[1],j=g[2],k=g[3],l=0,m=0;if(a>=h&&a<=h+j&&b>=i&&b<=i+k)return f;if(a>h){if(a>h+j)l=a-(h+j)}else l=h-a;if(b>i){if(b>i+k)m=b-(i+k)}else m=i-b;h=Math.sqrt(l*l+m*m);this.logDebug("Item "+
f.name+": (l,t,w,h) = "+g,"formItemDragDrop");this.logDebug("XDelta: "+l+", yDelta: "+m+", straight line distance: "+h,"formItemDragDrop");if(h<c){this.logDebug("Item "+f.name+": distance is shorter than "+c+", it is now the nearest item","formItemDragDrop");c=h;d=f}}return d},isc.A.showDragLineForItem=function(a,b,c){this.makeDragLine();if(a){var d=a.getPageRect(),e=d[0],f=d[1],g=d[2];d=a.getVisibleHeight();var h=this.titleOrientation||"left";if(a.showTitle!=false){if(h=="left"||h=="right")g+=a.getVisibleTitleWidth();
if(h=="left")e-=a.getVisibleTitleWidth()}var i;if(b<=e)b=e+1;else if(b>=e+g){b=e+g-1;i=true}h=g/4;if(h>20)h=20;if(c<=f)c=f+1;else if(c>=f+d)c=f+d-1;var j=b-e,k=Math.round(g/j),l=Math.round(d/(c-f));b=e+g-b;var m=Math.round(g/b),n=Math.round(d/(f+d-c));c="R";e--;f--;if(i||Math.min(k,m)<Math.min(l,n)&&(k>m&&j<h||m>k&&b<h)){c=i?"R":k>m?"L":"R";h=3;i=d;e=c=="L"?e:e+g-1;f=f}else{c=l>n?"T":"B";h=g;e=e;i=3;f=c=="T"?f:f+d-1}a.dropSide=c;if(this.itemIsLastInRow(a,a.$69f)&&!this.canAddColumns&&a.dropSide==
"R"){this.hideDragLine();this.setNoDropIndicator();this.$69h=this.currentCursor;this.setCursor("not-allowed")}else{if(this.$uh){this.clearNoDropIndicator();this.setCursor(this.$69h)}f={left:e,top:f};this.adjustDragLinePosition(f,a,c);e=f.left;f=f.top;this._dragLine.resizeTo(h,i);this._dragLine.setPageRect(e,f);this._dragLine.bringToFront();this._dragLine.show()}}else this._dragLine.hide()});isc.B.push(isc.A.adjustDragLinePosition=function(a,b,c){var d=this.items.$8j;b=this.items.indexOf(b);for(var e,
f,g,h=0;h<d.length;h++)if(d[h].indexOf(b)!=-1){e=h;f=d[h].indexOf(b);g=d[h].lastIndexOf(b);break}if(!(e==null||f==null||g==null)){if(c=="T"){if(e==0)return;if(d[e-1][f]==d[e-1][g]&&d[e-1][f-1]!=d[e-1][f]&&d[e-1][g+1]!=d[e-1][f]){b=this.items[d[e-1][f]].getPageRect(true);b=b[1]+b[3];a.top-=Math.round((a.top-b)/2)}}if(c=="B"){if(e==d.length-1)return;if(d[e+1][f]==d[e+1][g]&&d[e+1][f-1]!=d[e+1][f]&&d[e+1][g+1]!=d[e+1][f]){b=this.items[d[e+1][f]].getPageRect(true);b=b[1];a.top+=Math.round((b-a.top)/2)}}if(c==
"L"){if(f==0)return;b=this.items[d[e][f-1]].getPageRect(true);f=b[0]+b[2];a.left-=Math.round((a.left-f)/2)}if(c=="R")if(g!=d[e].length-1){b=this.items[d[e][g+1]].getPageRect(true);f=b[0];a.left+=Math.round((f-a.left)/2)}}},isc.A.showDragLineForForm=function(){this.makeDragLine();this._dragLine.resizeTo(3,this.getHeight());this._dragLine.setPageRect(this.getPageLeft(),this.getPageTop());this._dragLine.bringToFront();this._dragLine.show()},isc.A.enableField=function(a){if(!(a==null||isc.isAn.emptyString(a)))(a=
this.getItem(a))&&a.enable()},isc.A.disableField=function(a){if(!(a==null||isc.isAn.emptyString(a)))(a=this.getItem(a))&&a.disable()},isc.A.showField=function(a){if(!(a==null||isc.isAn.emptyString(a)))(a=this.getItem(a))&&a.show()},isc.A.hideField=function(a){if(!(a==null||isc.isAn.emptyString(a)))(a=this.getItem(a))&&a.hide()});isc.B._maxIndex=isc.C+225;isc.A=isc.DynamicForm;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.defaultFieldType="text";isc.A.$12a=
"link";isc.A.$gx="text";isc.A.$12b="select";isc.A.$12c="checkbox";isc.A.$12d="staticText";isc.A.$g2="boolean";isc.A.$12e="binary";isc.A.$12f="blob";isc.A.$52w="multifile";isc.A.$12g="multiupload";isc.A.$9i="upload";isc.A.$52x="file";isc.A.$51x="base64Binary";isc.A.$12h="enum";isc.A.$12i="CycleItem";isc.A.$12j="selectOther";isc.A.$12k="relation";isc.A.$67f="NestedEditorItem";isc.A.$67g="NestedListEditorItem";isc.A.$677="imageFile";isc.A.$678="ViewFileItem";isc.A.$77j="section";isc.A.$77k="SectionItem";
isc.A.$77l="button";isc.A.$77m="ButtonItem";isc.A.$450="id";isc.B.push(isc.A.getEditorType=function(a,b){if(a._constructor==isc.FormItem.Class)a._constructor=null;var c=b.getDataSource(),d=this.defaultFieldType,e=a.editorType||a.formItemType||a._constructor||a.type||d;if(a.editorType||a.formItemType||a._constructor)return e;if(e==this.$12a)e=this.canEditField(a,b)?this.$gx:this.$12a;else if(this.canEditField(a,b))if(e==this.$g2){c=a.valueMap;e=!isc.isAn.Array(c)&&isc.isAn.Object(c)?this.$12b:this.$12c}else if(e==
this.$12e||e==this.$12f||e==this.$52x||e==this.$677)e=a.dataSource?this.$52w:this.$52x;else if(e==this.$12g)e=this.$52w;else if(e==this.$51x)e=this.$51x;else if(e==this.$12h)e=a.showValueIconOnly?this.$12i:this.$12b;else if(isc.DataSource&&isc.isA.DataSource(c)&&c.fieldIsComplexType(a.name))e=a.multiple?b.nestedListEditorType:b.nestedEditorType;else{if(!a.type||a.type==d||a.type!=this.$12j&&isc.FormItemFactory.getItemClass(a.type)==null)e=a.dataSource?this.$12k:a.valueMap||a.optionDataSource||a.displayField?
a.showValueIconOnly?this.$12i:this.$12b:b&&a.length&&a.length>b.longTextEditorThreshold?b.longTextEditorType:d}else if(e==this.$12e||e==this.$52x||e==this.$677)e=this.$678;else if(e!=this.$77j&&e!=this.$77k&&e!=this.$77l&&e!=this.$77m)e=this.$12d;return e},isc.A.canEditField=function(a,b){if(a.canEdit!=null)return a.canEdit;if(b.canEdit!=null)return b.canEdit;if(a.canSave==false&&(!b||!b.$66m))return false;return true},isc.A.$mu=function(a,b){for(var c=b?b.getClipHandle():document,d={},e=isc.DynamicForm.$89,
f=isc.DynamicForm.$9a,g=isc.DynamicForm.$9b,h=isc.DynamicForm.$9c,i=isc.DynamicForm.$9e,j=isc.DynamicForm.$9g;a&&a!=c&&a!=document;){var k=a.getAttribute?a.getAttribute(e):null;if(k!=null&&!isc.isAn.emptyString(k))if((k=window[k])&&!k.destroyed){d.item=k;c=k.$681(a);if(c!=null){this.logIsDebugEnabled("inactiveEditorHTML")&&this.logDebug("Event occurred over inactive HTML for item:"+k+" inactiveContext:"+this.echo(c),"inactiveEditorHTML");d.inactiveContext=c}f=a.getAttribute(f);if(f==g)d.overElement=
true;else if(f==j)d.overTitle=true;else if(f==h)d.overTextBox=true;else if(f==i)d.overControlTable=true;else if(f&&!isc.isAn.emptyString(f))d.overIcon=f;break}a=a.parentNode}return d},isc.A.getSimpleErrors=function(a){var b={};if(isc.isAn.Array(a))a=a[0];for(var c in a){var d=a[c];if(!(c=="recordPath"&&!isc.isAn.Object(d)))if(isc.isAn.Array(d)){b[c]=[];for(var e=0;e<d.length;e++){var f=d[e];b[c][e]=isc.isAn.Object(f)?isc.shallowClone(f):{errorMessage:f}}}else b[c]=isc.isAn.Object(d)?isc.shallowClone(d):
{errorMessage:d}}return b},isc.A.formatValidationErrors=function(a){var b={};if(isc.isAn.Array(a))a=a[0];for(var c in a){var d=a[c];if(!(c=="recordPath"&&!isc.isAn.Object(d)))if(isc.isAn.Array(d)){b[c]=[];for(var e=0;e<d.length;e++){var f=d[e];if(isc.isAn.Object(f))f=f.errorMessage;b[c][e]=f}}else b[c]=isc.isAn.Object(d)?d.errorMessage:d}return b},isc.A.compareValues=function(a,b){if(a==b)return true;if(isc.isA.Date(a)&&isc.isA.Date(b))return Date.compareDates(a,b)==0;else if(isc.isAn.Array(a)&&isc.isAn.Array(b))return a.equals(b);
else if(isc.isAn.Object(a)&&isc.isAn.Object(b)){var c=isc.addProperties({},b),d;for(d in a){if(b[d]!=a[d])return false;delete c[d]}for(d in c)return false;return true}return false},isc.A.getFilterCriteria=function(){for(var a={},b=0;b<arguments.length;b++){var c=arguments[b];c!=null&&isc.addProperties(a,c.getFilterCriteria())}return a},isc.A.$817=function(){if(!this.$819){isc.Canvas.$816.add({target:this,methodName:"$82a"});this.$819=true}if(this.$9x==null)this.$9x=["<TD style='",isc.Canvas.$42a,
"height:0px;overflow:hidden;padding:0px;' class='",null,"'>",isc.Browser.isSafari?"<div style='overflow:hidden;height:0px'>":""];return this.$9x},isc.A.$818=function(){if(!this.$819){isc.Canvas.$816.add({target:this,methodName:"$82a"});this.$819=true}if(this.$10b==null)this.$10b=["<TABLE height=",," border=0 cellspacing=0 cellpadding=0><tr><td class='",,"' style='"+isc.Canvas.$42a+"' ALIGN='",,"'>",null];return this.$10b},isc.A.$82a=function(){this.$10b=this.$9x=null});isc.B._maxIndex=isc.C+10;isc.defineClass("InlineFormItem",
"DynamicForm");isc.A=isc.InlineFormItem.getPrototype();isc.A.position="relative";isc.A.writeFormTag=false;isc.A.canSubmit=true;isc.A.numCols=1;isc.A.autoDraw=true;isc.A=isc.InlineFormItem;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.create=function(a,b,c,d,e,f,g,h,i,j,k,l,m){a=isc.addProperties({showTitle:false,validate:function(){this.form.validate()},destroy:function(){this.form.destroy()}},a,b,c,d,e,f,g,h,i,j,k,l,m);return this.createRaw().completeCreation({fields:[a],
valuesManager:a.valuesManager},a.formProperties).getItem(0)});isc.B._maxIndex=isc.C+1;isc.A=isc.DynamicForm;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.makeInlineItem=function(a,b,c,d){return isc.InlineFormItem.create({name:a,type:b,formProperties:d},c)},isc.A.getFormValues=function(a){return isc.Canvas.getFormValues(a)});isc.B._maxIndex=isc.C+2;isc.DynamicForm.registerStringMethods({itemChanged:"item,newValue",itemChange:"item,newValue,oldValue",
itemKeyPress:"item,keyName,characterValue",submitValues:"values,form",handleHiddenValidationErrors:"errors"});isc.ClassFactory.defineClass("FormItem");isc.A=isc.FormItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$68s=[null,"_inactiveContext",null];isc.A.$557=isc.Canvas.getPrototype().$557;isc.A.$63x=isc.Canvas.getPrototype().$63x;isc.A.reuseDOMIDs=false;isc.B.push(isc.A.$qs=function(a,b,c,d){if(d==null&&this.isInactiveHTML())d=this.$68u;
if(d!=null){this.$68s[0]=a;this.$68s[2]=d;a=this.$68s.join(isc.emptyString);this.logIsDebugEnabled("inactiveEditorHTML")&&this.logDebug("$qs called for inactive HTML -- generated partName:"+a,"inactiveEditorHTML");b=false}return isc.Canvas.getPrototype().$qs.apply(this,[a,b,c])});isc.B._maxIndex=isc.C+1;isc.A=isc.FormItem;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.create=function(a,b,c,d,e,f,g,h,i,j,k,l,m){this.logWarn("Unsupported call to "+
this.getClassName()+".create(). FormItems must be created by their containing form. To create form items, use the 'items' property of a DynamicForm instance. See documentation for more details.");return isc.addProperties({},a,b,c,d,e,f,g,h,i,j,k,l,m)},isc.A.getNewTagID=function(){if(this.$12m==null)this.$12m=0;this.$12m+=1;return"isc_FormItemElement_ID_"+this.$12m},isc.A.setElementTabIndex=function(a,b){a.tabIndex=b;if(isc.Browser.isMoz)a.style.MozUserFocus=b<0?"ignore":"normal"},isc.A.$12n=function(){if(isc.Browser.isIE){var a=
this.getActiveElement();if(a&&a.tagName==null)a=null;if(a&&(a.tagName.toLowerCase()==this.$12o&&a.type.toLowerCase()==this.$12p||a.tagName.toLowerCase()==this.$12q))a.createTextRange().execCommand("Unselect")}},isc.A.$12r=function(a,b){if(isc.isA.FormItem(a))a=a.getClassName();if(!this.$12s){this.$12s={text:true,TextItem:true,textItem:true,textArea:true,TextAreaItem:true,textAreaItem:true};this.$12t={popUpTextArea:true,PopUpTextAreaItem:true,popUpTextAreaItem:true}}return this.$12s[a]||!b||this.$12t[a]},
isc.A.$12u=function(){if(window.isc&&isc.DynamicForm){isc.EH.$h1("IFCS");var a;if(isc.Log.supportsOnError)a=isc.FormItem.$763(this);else try{a=isc.FormItem.$763(this)}catch(b){isc.Log.$am(b)}isc.EH.$h2();return a}},isc.A.$763=function(a){var b=isc.DynamicForm.$mu(a).item;if(b&&b.isDisabled())a.blur();else{if(b)return b.$12v(a,b);isc.EH.$h2()}},isc.A.$12w=function(){if(window.isc&&isc.DynamicForm){isc.EH.$h1("IBLR");var a;if(isc.Log.supportsOnError)a=isc.FormItem.$764(this);else try{a=isc.FormItem.$764(this)}catch(b){isc.Log.$am(b)}isc.EH.$h2();
return a}},isc.A.$764=function(a){var b=isc.DynamicForm.$mu(a).item;if(b&&b.hasFocus)return b.$12x(a,b)},isc.A.$43a=function(){if(window.isc){var a=isc.DynamicForm.$mu(this).item;if(a&&a.hasFocus)return a.$43a(this,a)}},isc.A.$12y=function(){if(window.isc&&isc.DynamicForm){var a=isc.DynamicForm.$mu(this).item;if(a)return a.$12z()}},isc.A.$120=function(){var a=isc.DynamicForm.$mu(this),b=a.item;a=a.overIcon;if(b)if(b.iconIsDisabled(a))this.blur();else return b.$121(a,this)},isc.A.$122=function(){if(window.isc){var a=
isc.DynamicForm.$mu(this),b=a.item;a=a.overIcon;if(b&&!b.iconIsDisabled(a))return b.$123(a,this)}},isc.A.$124=function(){return false},isc.A.getErrorPromptString=function(a){var b="";isc.isAn.Array(a)||(a=[a]);for(var c=0;c<a.length;c++)b+=(c>0?"<br>":"")+a[c].asHTML();return b},isc.A.$82b=function(){if(!this.$819){isc.Canvas.$816.add({target:this,methodName:"$82a"});this.$819=true}if(this.$13y==null)this.$13y=["<TABLE CELLSPACING=0 CELLPADDING=0 BORDER=0 ID='",,"' STYLE='"+isc.Canvas.$42a,,"' CLASS='",
,"'><TR>",,"<TD style='",,"' VALIGN=",,">"];return this.$13y},isc.A.$82c=function(){if(!this.$819){isc.Canvas.$816.add({target:this,methodName:"$82a"});this.$819=true}if(this.$131==null)this.$131=["</TD><TD VALIGN=",," WIDTH=",," style='"+isc.Canvas.$42a+"' class='",,"'>",null];return this.$131},isc.A.$82a=function(){this.$131=this.$13y=null});isc.B._maxIndex=isc.C+18;isc.A=isc.FormItem;isc.A.$12o="input";isc.A.$12p="text";isc.A.$12q="textarea";isc.A=isc.FormItem.getPrototype();isc.A.emptyDisplayValue=
"";isc.A.multipleValueSeparator=", ";isc.A.fetchMissingValues=true;isc.A.alwaysFetchMissingValues=false;isc.A.valueIconSize=16;isc.A.valueIconLeftPadding=0;isc.A.valueIconRightPadding=3;isc.A.showFocusedPickerIcon=false;isc.A.pickerIconHSpace=0;isc.A.pickerIconName="picker";isc.A.pickerIconSrc="[SKIN]/DynamicForm/pickerIcon.gif";isc.A.visible=true;isc.A.accessKey=null;isc.A.changeOnKeypress=true;isc.A.maintainSelectionOnTransform=true;isc.A.dirtyOnKeyDown=true;isc.A.showTitle=true;isc.A.width="*";
isc.A.height=20;isc.A.titleColSpan=1;isc.A.colSpan=1;isc.A.rowSpan=1;isc.A.browserInputTypeMap={text:"text",email:"email",url:"url",tel:"tel",phone:"tel",number:"[0-9]*",zip:"[0-9]*"};isc.A.defaultIconSrc="[SKIN]/DynamicForm/default_formItem_icon.gif";isc.A.iconHSpace=3;isc.A.iconVAlign=isc.Canvas.BOTTOM;isc.A.iconHeight=20;isc.A.iconWidth=20;isc.A.iconPrompt="";isc.A.showIcons=true;isc.A.redrawOnShowIcon=true;isc.A.errorIconHeight=16;isc.A.errorIconWidth=16;isc.A.errorIconSrc="[SKIN]/DynamicForm/validation_error_icon.png";
isc.A.showHint=true;isc.A.showFocused=false;isc.A.showDisabled=true;isc.A.cellStyle="formCell";isc.A.hintStyle="formHint";isc.A.titleStyle="formTitle";isc.A.$125=false;isc.A=isc.FormItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$o5="height";isc.A.$o6="width";isc.A.$126="colSpan";isc.A.$127="rowSpan";isc.A.$pa="*";isc.A.$bv="_";isc.A.$128="value";isc.A.$129="dataElement";isc.A.$o9="%";isc.A.errorMessageWidth=80;isc.A.$68w=1;isc.A.$682=
/.*_inactiveContext(.*)$/;isc.A.$13a="<DIV STYLE='position:absolute;left:";isc.A.$13b="px;top:";isc.A.$13c="px;width:";isc.A.$13d="px;height:";isc.A.$13e="px;' ID='";isc.A.$13f="'>";isc.A.$13g="</DIV>";isc.A.$13h=["<SPAN style='white-space:nowrap;' eventProxy=",," "+isc.DynamicForm.$89+"='",,"' ID='",,"'>"];isc.A.$13i="</SPAN>";isc.A.$13j="$13k";isc.A.$13l="$13m";isc.A.$13n=["<DIV isDisabledEventMask='true' style='overflow:hidden;position:absolute;width:",null,"px;height:",null,"px' "+isc.DynamicForm.$89+
"='",null,"' "+isc.DynamicForm.$9a+"='"+isc.DynamicForm.$9b+"' ID='",,"'>",isc.Browser.isIE?isc.Canvas.spacerHTML(1600,100):"&nbsp;","</DIV>"];isc.A.$13o="hiddenDataElement";isc.A.$13p="control";isc.A.$13q="textBox";isc.A.$13r="pickerIconCell";isc.A.$59p="hintCell";isc.A.$13s="FormItemStyling";isc.A.$13t="deprecated";isc.A.$13u="Over";isc.A.$13v="Down";isc.A.$13w="Disabled";isc.A.$13x="valueIcon";isc.A.$13z="</TD></TR></TABLE>";isc.A.$130=["<TABLE ID='",,"' "+isc.DynamicForm.$89+"='",,"' "+isc.DynamicForm.$9a+
"='"+isc.DynamicForm.$9e,"' CELLPADDING=0 CELLSPACING=0 STYLE='",,"' CLASS='",,"'><TR><TD style='",,"'>",,"</TD><TD ID='",,"' CLASS='",,"' STYLE='",,"'>",,"</TD></TR></TABLE>"];isc.A.$132=["</TD><TD ID='",,"' CLASS='",,"'>"];isc.A.$133="$134";isc.A.$135="white-space:normal;";isc.A.$136="white-space:nowrap;";isc.A.$137="min-width:";isc.A.$138="min-height:";isc.A.$93="width:";isc.A.$92="height:";isc.A.$38="px;";isc.A.$39=";";isc.A.$139={};isc.A.$14a="cursor:default;";isc.A.$14b="overflow:hidden;";isc.A.$14c=
"text-align:";isc.A.$14d="font-size:";isc.A.$14e=" ACCESSKEY='";isc.A.$14f=" TABINDEX='";isc.A.$ob="'";isc.A.$14g=["<DIV ID='",,"' "+isc.DynamicForm.$89+"='",,"' "+isc.DynamicForm.$9a+"='"+isc.DynamicForm.$9c,"' CLASS='",,"' STYLE='",,"'",,">",,,"</DIV>"];isc.A.$n3="drawing";isc.A.$14h="#";isc.A.$80b="<table cellpadding=0 cellspacing=0 margin=0><tr>";isc.A.$14i="vertical-align:";isc.A.$14j={};isc.A._$_iLink_="_iLink_";isc.A._$_iImg_="_iImg_";isc.A.$14k="cell";isc.A.applyStaticTypeFormat=true;isc.A.$14l=
"smart";isc.A.$14m={Tab:true,Arrow_Left:true,Arrow_Right:true,Arrow_Up:true,Arrow_Down:true,Home:true,End:true,Page_Up:true,Page_Down:true,Enter:true};isc.A.shouldSaveValue=true;isc.A.$14n="character";isc.A.$14o="EndToEnd";isc.A.$14p="EndToStart";isc.A.$14n="character";isc.A.$683={};isc.A.$115=isc.Class.NO_OP;isc.A.$10j="Enter";isc.A.$54n="img";isc.A.$jf="Tab";isc.A.$14q="$14r";isc.A.$14s={colSpan:true,rowSpan:true,startRow:true,endRow:true,showTitle:true,showHint:true};isc.A.$59q={baseStyle:true,
showErrorStyle:true,showFocused:true,showErrorStyle:true,controlStyle:true,pickerIconStyle:true,textBoxStyle:true};isc.A.$59r="itemCellStyle";isc.B.push(isc.A.init=function(){if(isc.$cv)arguments.$cw=this;if(this.ID==null||window[this.ID]!=this)isc.ClassFactory.addGlobalID(this);if(this.options&&!this.valueMap){this.valueMap=this.options;delete this.options}this.$14t(this.$o5);this.$14t(this.$o6);this.$14t(this.$126);this.$14t(this.$127);this._value=this.getDefaultValue();this.$14u=true;this.$14v();
if((!this.validateOnExit||!this.synchronousValidation)&&this.validators&&this.validators.length>0)for(var a=0;a<this.validators.length;a++)if(this.validators[a].stopOnError){this.synchronousValidation=this.validateOnExit=true;break}if((!this.validateOnExit||!this.synchronousValidation)&&(this.stopOnError==null&&this.form&&this.form.stopOnError||this.stopOnError))this.synchronousValidation=this.validateOnExit=true},isc.A.$14t=function(a){var b=this[a];if(b==null||isc.isA.Number(b)||b==this.$pa)return b;
var c=parseInt(b);if(c==b){this[a]=c;return b}return b},isc.A.destroy=function(){this.isDrawn()&&this.cleared();var a=this.pickList;this.pickList=null;if(a!=null){a.formItem==this&&delete a.formItem;a.isVisible()&&a.hide();this.reusePickList()||a.destroy()}this.destroyed=true;this.$14x=this.form=null;isc.ClassFactory.dereferenceGlobalID(this);this.$63x();if(isc.EH.$52d==this)isc.EH.$52d=null},isc.A.clear=function(){this.picker&&this.picker.clear()},isc.A.toString=function(){var a=this.getFieldName();
return"["+this.Class+" instance "+(a!=null?" name ='"+a+"', ":"")+"global ID="+this.ID+"]"},isc.A.getDataSource=function(){if(isc.isA.String(this.dataSource))return isc.DS.get(this.dataSource);return this.dataSource},isc.A.registerWithDataView=function(a){if(this.inputDataPath){if(!a)for(a=this.form;a&&!isc.isA.DataView(a);)a=a.parentElement;a?a.registerItem(this):this.logWarn("Component initialized with an inputDataPath property, but no DataView was found in the parent hierarchy. inputDataPath is only applicable to DataBoundComponents and FormItems being managed by a DataView")}},
isc.A.getFieldName=function(){return this.name},isc.A.getDataPath=function(){return this.dataPath},isc.A.getItemName=function(){return this.getFieldName()},isc.A.getElementName=function(){if(this.isInactiveHTML())return"";var a=this.getFieldName();if(this.parentItem){var b=this.parentItem.getElementName();a=a==isc.emptyString?b:[b,this.$bv,a].join(isc.emptyString)}if(a==null||a==this.getID()||a==isc.emptyString)a=this.$qs(this.$128);return a},isc.A.getDataElementId=function(){if(this.isInactiveHTML())return this.$qs(this.$129);
if(this.$14y==null)this.$14y=this.$qs(this.$129,true);return this.$14y},isc.A.getItemID=function(){return this.getID()},isc.A.getID=function(){this.ID==null&&isc.ClassFactory.addGlobalID(this);return this.ID},isc.A.shouldShowTitle=function(){return this.showTitle},isc.A.getTitleHTML=function(){var a=this.getTitle();if(!this.$kk())return a;if(this.accessKey!=null)a=isc.Canvas.hiliteCharacter(a,this.accessKey);var b;if(this.hasDataElement())b=this.getDataElementId();if(!b)return a;return isc.SB.concat("<LABEL FOR=",
b,this.accessKey!=null?" ACCESSKEY="+this.accessKey:isc.$ad,">",a,"</LABEL>")},isc.A.getTitle=function(){if(this[this.form.titleField]!=null)return this[this.form.titleField];return this[this.form.fieldIdProperty]},isc.A.getTitleOrientation=function(){return this.form.getTitleOrientation(this)},isc.A.isVisible=function(){if(!this.containerWidget.isVisible())return false;if(this.visible==false)return false;if(this.parentItem&&!this.parentItem.isVisible())return false;return true},isc.A.getRowSpan=
function(){return this.rowSpan},isc.A.getColSpan=function(){if(this.colSpan==0)this.colSpan=1;return this.colSpan},isc.A.getTitleColSpan=function(){if(this.titleColSpan==0)this.titleColSpan=1;return this.titleColSpan},isc.A.isStartRow=function(){return this.startRow},isc.A.isEndRow=function(){return this.endRow},isc.A.getRect=function(){return[this.getLeft(),this.getTop(),this.getVisibleWidth(),this.getVisibleHeight()]},isc.A.getPageRect=function(a){if(a)return this.getPageRectIncludingTitle();return[this.getPageLeft(),
this.getPageTop(),this.getVisibleWidth(),this.getVisibleHeight()]},isc.A.getPeerRect=function(){return this.getPageRect()},isc.A.getPageRectIncludingTitle=function(){var a=this.getPageLeft(),b=this.getPageTop(),c=this.getVisibleWidth(),d=this.getVisibleHeight();if(this.showTitle){var e=this.getTitlePageLeft();this.getTitlePageTop();var f=this.getVisibleTitleWidth(),g=this.form.getTitleHeight(this);if(this.titleOrientation=="left"||this.titleOrientation=="left"||this.titleOrientation==null){a=a<e?
a:e;c+=f}else{a=a<e?a:e;c=c>f?c:f;if(isc.isA.Number(g))d+=g}}return[a,b,c,d]},isc.A.getCellHeight=function(a){if(isc.$cv)arguments.$cw=this;if(this.cellHeight!=null)return this.cellHeight;var b=this.getHeight(a);if(!isc.isA.Number(b))return b;var c=this.getIconsHeight();if(b<c)b=c;if(this.showPickerIcon&&this.pickerIconHeight){c=this.pickerIconHeight+this.$14z();if(c>b)b=c}c=this.containerWidget;if(this.$11e()||!isc.isA.DynamicForm(c))return b;b+=this.$140();if(this.showTitle&&this.form.getTitleOrientation(this)==
isc.Canvas.TOP)b+=this.form.getTitleHeight(this);return b},isc.A.shouldFixRowHeight=function(){return this.cellHeight!=null},isc.A.$140=function(){var a=0,b=this.form,c=this.getCellStyle();if(this.parentItem)b=this.parentItem;a+=2*b.cellSpacing;b=isc.isA.Number(b.cellPadding)?b.cellPadding:0;var d=isc.Element.$tt(c,true);if(d==null)d=b;var e=isc.Element.$tu(c,true);if(e==null)e=b;a+=d;a+=e;a+=isc.Element.$ym(c);return a},isc.A.$141=function(){var a=0,b=this.form,c=this.getCellStyle();if(this.parentItem)b=
this.parentItem;if(isc.isA.Number(b.cellSpacing))a+=2*b.cellSpacing;b=isc.isA.Number(b.cellPadding)?b.cellPadding:0;var d=isc.Element.$tr(c,true);if(d==null)d=b;var e=isc.Element.$ts(c,true);if(e==null)e=b;a+=d;a+=e;a+=isc.Element.$yn(c);return a},isc.A.getInnerHeight=function(){if(this.$11e())return this.$11p(this.height,true);if(this.$8t){var a=this.$8t[1];if(!isc.isA.Number(a))return a;if(this.$142())a-=this.$140();return a}return this.getHeight()},isc.A.getInnerWidth=function(){if(this.$11e())return this.$11p(this.width);
var a=this.$8t?this.$8t[0]:this.width;if(!isc.isA.Number(a))return a;if(this.$142())a-=this.$141();return a},isc.A.getColWidth=function(){var a=this.form?this.form.items:null;if(a&&a.$8r!=null&&this.$8m!=null){var b=this.$8m[0],c=this.$8m[2];if(this.showTitle){var d=this.getTitleOrientation();if(d==isc.Canvas.LEFT)b+=1;else if(d==isc.Canvas.RIGHT)c-=1}d=0;for(b=b;b<c;b++)d+=a.$8r[b];return d}return null},isc.A.$11e=function(){return this.containerWidget.$11e&&this.containerWidget.$11e()},isc.A.$142=
function(){return this.containerItem!=null||this.form==this.containerWidget&&!this.$11e()},isc.A.$11p=function(a,b){if(isc.isA.String(a)&&isc.endsWith(a,this.$o9)){var c=this.containerWidget;c=b?c.getInnerHeight():c.getInnerWidth();return Math.round(parseInt(a,10)/100*c)}return a},isc.A.getElementWidth=function(){var a=this.getInnerWidth();if(!isc.isA.Number(a))return null;a-=this.getTotalIconsWidth();return isc.isA.Number(a)?Math.max(a,1):null},isc.A.getTextBoxWidth=function(a){var b=this.getElementWidth();
if(!isc.isA.Number(b))return b;if(this.textBoxStyle){var c=this.getTextBoxStyle();b-=isc.Element.$tf(c)+isc.Element.$tg(c);if(this.$143())b-=isc.Element.$yp(c)}if(this.showPickerIcon){b-=this.getPickerIconWidth();c=this.getPickerIcon();if(c.hspace!=null)b-=c.hspace;if(this.pickerIconStyle)b-=isc.Element.$yp(this.getPickerIconStyle());if(this.controlStyle)b-=isc.Element.$yp(this.getControlStyle())}if(this.hasDataElement()&&this.$144(a))b-=(this.getValueIconWidth()||0)+(this.valueIconLeftPadding+this.valueIconRightPadding);
return b-this.$672()},isc.A.getErrorWidth=function(){var a=0;if(this.form.showInlineErrors&&this.hasErrors()){var b=this.getErrorOrientation();if(b==isc.Canvas.LEFT||b==isc.Canvas.RIGHT)if(this.shouldShowErrorText())a+=this.errorMessageWidth;else if(this.shouldShowErrorIcon())a+=this.errorIconWidth+this.iconHSpace}return a},isc.A.$672=function(){var a=this.getErrorWidth();if(a!=0&&this.expandHintAndErrors&&this.getColWidth()!=null){var b=this.getColWidth()-this.getInnerWidth();if(b>0)a-=b;if(a<0)a=
0}return a},isc.A.getValueIconHeight=function(){var a=this.valueIconHeight;if(a==null)a=this.valueIconSize;return a},isc.A.getValueIconWidth=function(){var a=this.valueIconWidth;if(a==null)a=this.valueIconSize;return a},isc.A.getTextBoxHeight=function(){var a=isc.isA.Number(this.getHeight())?this.getHeight():this.getInnerHeight();if(!isc.isA.Number(a))return a;if(this.valueIcons!=null||this.getValueIcon!=null){var b=this.getValueIconHeight();if(b>a)a=b}if(this.textBoxStyle){b=this.getTextBoxStyle();
a-=isc.Element.$th(b)+isc.Element.$ti(b);if(this.$143())a-=isc.Element.$yo(b)}if(this.showPickerIcon&&this.controlStyle)a-=isc.Element.$yo(this.getControlStyle());if(this.showTitle&&this.form.getTitleOrientation(this)==isc.Canvas.TOP&&!isc.isA.Number(this.getCellHeight()))a-=this.form.getTitleHeight(this);return a},isc.A.$143=function(){return!isc.Browser.isBorderBox},isc.A.getPickerIconWidth=function(){return this.pickerIconWidth!=null?this.pickerIconWidth:this.getPickerIconHeight()},isc.A.getPickerIconHeight=
function(){if(this.pickerIconHeight!=null)return this.pickerIconHeight;else{var a=isc.isA.Number(this.getHeight())?this.getHeight():this.getInnerHeight();if(!isc.isA.Number(a))return null;a-=this.$14z();return this.pickerIconHeight=a}},isc.A.$14z=function(){var a=0;if(this.controlStyle)a+=isc.Element.$yo(this.controlStyle);if(this.pickerIconStyle)a+=isc.Element.$yo(this.pickerIconStyle);return a},isc.A.getHeight=function(){return this.height},isc.A.getVisibleHeight=function(){var a=this.isDrawn()?
this.getOuterElement():null;if(a==null){this.logInfo("getVisibleHeight() - unable to determine drawn height for this item - returning pixel height from specified height","sizing");if(isc.isA.Number(this.height))return this.height;this.logWarn("getVisibleHeight() unable to determine height - returning zero","sizing");return 0}return a.offsetHeight},isc.A.getIconHeight=function(a){if(a==null&&this.icons!=null&&this.icons.getLength()>0)a=this.icons[0];else if(!this.$145(a)){this.logWarn("getIconHeight() passed invalid icon:"+
isc.Log.echoAll(a));return null}return a.height!=null?a.height:this.iconHeight},isc.A.getTitleVisibleHeight=function(){var a=this.isDrawn()&&this.form?isc.Element.get(this.form.$427(this)):null;if(a==null){a="getTitleHeight() Unable to determine position for "+(this.name==null?"this item ":this.name)+". ";a+=this.isDrawn()?"This method is not supported by items of type "+this.getClass():"Position cannot be determined before the element is drawn";a+=" - returning zero.";this.form.logWarn(a);return 0}return isc.Element.getVisibleHeight(a)},
isc.A.getWidth=function(){return this.width},isc.A.getVisibleWidth=function(){var a=this.isDrawn()?this.getOuterElement():null;if(a==null){this.logInfo("getVisibleWidth() - unable to determine drawn width for this item - returning pixel width from specified width","sizing");if(isc.isA.Number(this.width))return this.width;else if(this.form&&this.form.items.$8r!=null)return this.form.items.$8r[this.form.getItems().indexOf(this)];this.logWarn("getVisibleWidth() unable to determine width - returning zero",
"sizing");return 0}return a.offsetWidth},isc.A.getVisibleTitleWidth=function(){var a=this.isDrawn()&&this.form?isc.Element.get(this.form.$427(this)):null;if(a==null){this.logInfo("getVisibleTitleWidth() - unable to determine drawn width for this item - returning 0","sizing");return 0}return a.offsetWidth},isc.A.getIconWidth=function(a){if(a==null&&this.icons!=null&&this.icons.getLength()>0)a=this.icons[0];else if(!this.$145(a)){this.logWarn("getIconWidth() passed invalid icon:"+isc.Log.echoAll(a));
return null}return a.width!=null?a.width:this.iconWidth},isc.A.setHeight=function(a){this.height=a;this.redraw()},isc.A.setWidth=function(a){this.width=a;this.redraw()},isc.A.setLeft=function(a){this.left=a;this.redraw()},isc.A.setTop=function(a){this.top=a;this.redraw()},isc.A.moved=function(){},isc.A.visibilityChanged=function(){},isc.A.zIndexChanged=function(){},isc.A.getInactiveEditorHTML=function(a,b,c,d){this.$68x=true;this.$68u=this.setupInactiveContext(d);this.logIsDebugEnabled("inactiveEditorHTML")&&
this.logDebug("getInactiveEditorHTML() called - context passed in:"+this.echo(d)+" generated context ID:"+this.$68u,"inactiveEditorHTML");a=this.getStandaloneItemHTML(a,b,c);delete this.$68u;delete this.$68x;return a},isc.A.setupInactiveContext=function(a){if(a==null)a={};if(this.$68y())a.isPrintHTML=true;var b=this.$68w++;a.inactiveContextID=b;a.formItem=this;if(!this.$68v)this.$68v={};this.$68v[b]=a;return b},isc.A.clearAllInactiveEditorContexts=function(){delete this.$68v},isc.A.clearInactiveEditorContext=
function(a){if(isc.isAn.Object(a))a=a.inactiveContextID;this.$68v&&delete this.$68v[a]},isc.A.$681=function(a){if(a&&a.id!=null&&this.$68v!=null)if(a=this.$557(a.id))if(a=a.match(this.$682))return this.$68v[a[1]];return null},isc.A.isInactiveHTML=function(){if(this.parentItem&&this.parentItem.isInactiveHTML())return true;return this.$68y()||this.$68x},isc.A.$68y=function(){return this.containerWidget&&this.containerWidget.isPrinting},isc.A.getStandaloneItemHTML=function(a,b,c){var d=isc.SB.create(),
e=this.form;if(e){if(this.$11e()){var f=this.$11p(this.left),g=this.$11p(this.top,true),h=this.getInnerWidth(),i=this.getInnerHeight();isc.isA.Number(f)||(f=0);isc.isA.Number(g)||(g=0);d.append(this.$13a);d.appendNumber(f);d.append(this.$13b);d.appendNumber(g);if(isc.isA.Number(h)){d.append(this.$13c);d.appendNumber(h)}if(isc.isA.Number(i)){d.append(this.$13d);d.appendNumber(i)}d.append(this.$13e,this.$146(),this.$13f)}f=this.$13h;e=e.getID();g=this.getID();f[1]=e;f[3]=g;f[5]=this.$qs(this.$13j);
d.append(f);d.append(this.getInnerHTML(a,b,c,true));d.append(this.$13i);this.$11e()&&d.append(this.$13g)}return d.release()},isc.A.$146=function(){return this.$qs(this.$13l)},isc.A.getAbsDiv=function(){if(this.$13m)return this.$13m;if(this.isDrawn())return this.$13m=isc.Element.get(this.$146())},isc.A.$147=function(){var a=this.icons;if(!a)return false;for(var b=0;b<a.length;b++)if(!a[b].writeIntoItem)return true;return false},isc.A.useDisabledEventMask=function(){return isc.Browser.isMoz&&this.hasDataElement()||
isc.Browser.isIE&&isc.isA.TextItem(this)},isc.A.$148=function(){var a=this.$13n;a[1]=this.$149();a[3]=this.getHeight();a[5]=this.getItemID();a[7]=this.$qs("eventMask");return a.join(isc.emptyString)},isc.A.$43b=function(){return isc.Element.get(this.$qs("eventMask"))},isc.A.$149=function(){return this.getElementWidth()},isc.A.getBrowserSpellCheck=function(){if(this.browserSpellCheck!=null)return this.browserSpellCheck;return this.form.browserSpellCheck},isc.A.$11d=function(){return this.shouldSaveValue&&
!this.hasDataElement()&&this.shouldSubmitValue()},isc.A.$15a=function(){return this.$qs(this.$13o)},isc.A.$15b=function(){return this.$15c(this.$13o)},isc.A.$15c=function(a){if(!this.isDrawn())return null;if(!this.$15d)this.$15d={};var b=this.$15d[a];if(b==null){b=isc.Element.get(this.$qs(a));if(b!=null)this.$15d[a]=b}return b},isc.A.$15e=function(){return this.$qs(this.$13p)},isc.A.$15f=function(){return this.$15c(this.$13p)},isc.A.$15g=function(){return this.$qs(this.$13q)},isc.A.$15h=function(){if(this.hasDataElement()&&
this.$15i)return this.getDataElement();return this.$15c(this.$13q)},isc.A.$15j=function(){return this.$qs(this.$13r)},isc.A.$15k=function(){return this.$15c(this.$13r)},isc.A.$15l=function(){return"<INPUT type='hidden' name='"+this.getFieldName()+"' ID='"+this.$15a()+"'>"},isc.A.$59s=function(){return this.$qs(this.$59p)},isc.A.$59t=function(){return this.$15c(this.$59p)},isc.A.updateState=function(){if(this.isDrawn()){var a=this.logIsDebugEnabled(this.$13s);if(this.containerWidget==this.form&&!this.$11e()){var b=
this.getCellStyle();a&&this.logDebug("About to apply basic cell style:"+b,"FormItemStyling");var c=this.getFormCell();if(c)c.className=b;if(c=this.getOuterTableElement())c.className=b;this.showTitle&&this.form.updateTitleCellState(this)}if(this.showPickerIcon){c=this.getControlStyle();b=this.getPickerIconStyle();a&&this.logDebug("About to apply cell styles to control box and picker icon cell:"+[c,b],"FormItemStyling");var d=this.$15f();if(d)d.className=c;if(c=this.$15k())c.className=b}b=this.getTextBoxStyle();
a&&this.logDebug("About to apply text box style:"+b,"FormItemStyling");if(a=this.$15h())a.className=b;if(this.$15m()&&a){if(!this.$15n){b=this.getTextBoxWidth();c=this.getTextBoxHeight();b+=isc.Element.getHBorderSize(a)-2;c+=isc.Element.getVBorderSize(a)-2;d=this.$qs("focusOutline");isc.Element.insertAdjacentHTML(a,"beforeBegin","<DIV ID='"+d+(this.textBoxStyle?"' CLASS='"+this.textBoxStyle+"Focused'":"'")+" STYLE='background-image:none;background-color:transparent;position:absolute;width:"+b+"px;height:"+
c+"px;visibility:hidden;border:1px dotted white;z-index:100;'>&nbsp;</DIV>");this.$15n=isc.Element.get(d)}this.$15n.style.visibility=this.hasFocus?"inherit":"hidden"}}},isc.A.$15o=function(a,b,c){if(this.logIsInfoEnabled(this.$13t)){if(!this.$15p)this.$15p={};if(this.$15p[a]!=true){if(c==null)c="5.5";var d=isc.SB.create();d.append("Using '",a,"': ",this[a]," to style this form item.  This property is deprecated as of SmartClient Version ",c," - we recommend removing this property and using '",b,"' instead.");
this.logInfo(d.release(),"deprecated");this.$15p[a]=true}}},isc.A.getInnerHTML=function(a,b,c,d){var e,f;if(this.isInactiveHTML()&&this.$68u==null){e=true;var g,h=this.parentItem;if(h!=null&&h.isInactiveHTML()){if(h.$68u==null){h.setupInactiveContext();f=true}g=h.$68v[h.$68u]}this.$68u=this.setupInactiveContext(g);this.logIsDebugEnabled("inactiveEditorHTML")&&this.logDebug("getInnerHTML(): Item is marked as inactive - set up new inactive context ID:"+this.$68u,"inactiveEditorHTML")}this.$15q=b&&!this.$712();
var i;if((this.isInactiveHTML()||this.isDisabled())&&this.useDisabledEventMask()){i=isc.SB.create();i.append(this.$148())}if(this.$11d()){i||(i=isc.SB.create());i.append(this.$15l())}if(this.$712())b=false;a=this.$15r(a,b,c);if(i!=null){i.append(a);d&&i.getArray();d=i.release()}else d=d?a:a.join(isc.emptyString);e&&delete this.$68u;this.parentItem&&f&&delete this.parentItem.$68u;return d},isc.A.$15s=function(a,b){if(b)return true;if(a&&this.getHint()!=null)return true;if(this.icons&&this.icons.length>
0)return true},isc.A.$144=function(a){if(this.suppressValueIcon)return null;var b;if(a===void 0)a=this.getValue();if(this.getValueIcon)b=this.getValueIcon(a);else if(a==null)b=this.emptyValueIcon;else if(this.valueIcons!=null)b=this.valueIcons[a];if(b==null)return null;a=this.isDisabled()&&this.showValueIconDisabled?this.$13w:this.$15t;if(a!=null){if(!isc.CheckboxItem.$15u)isc.CheckboxItem.$15u={};var c=isc.CheckboxItem.$15u[b];if(!c){c={};c.Over=isc.Img.urlForState(b,false,false,this.$13u);c.Down=
isc.Img.urlForState(b,false,false,this.$13v);c.Disabled=isc.Img.urlForState(b,false,false,this.$13w);isc.CheckboxItem.$15u[b]=c}b=c[a]}return b},isc.A.$xq=function(a){a=this.$144(a);if(a==null)return isc.emptyString;var b=this.imageURLPrefix||this.baseURL||this.imgDir,c=this.imageURLSuffix;if(c)a+=c;c=this.getValueIconWidth();var d=this.getValueIconHeight();return isc.Canvas.$xq(a,b,c,d,this.valueIconLeftPadding,this.valueIconRightPadding,this.$qs(this.$13x))},isc.A.$15v=function(){if(!this.isDrawn())return null;
return isc.Element.get(this.$qs(this.$13x))},isc.A.$15r=function(a,b,c){var d=this.getErrorOrientation(),e,f=d==isc.Canvas.LEFT,g;if(c&&(f||d==isc.Canvas.RIGHT))if(c=this.getErrors()){e=true;g=this.getErrorHTML(c)}d=this.iconVAlign;var h=this.mapValueToDisplay(a),i=this.$15s(b,e),j=this.showPickerIcon;c=i?isc.FormItem.$82b():[];if(i){c.length=13;c[1]=this.$15w();c[3]=this.getOuterTableCSS();c[5]=this.containerWidget==this.form&&!this.$11e()?this.getCellStyle():null;c[7]=e&&f?isc.StringBuffer.concat("<TD STYLE='",
isc.Canvas.$42a,"' CLASS='",this.getCellStyle(),"'>",g,"</TD>"):null;c[9]=j?isc.Canvas.$42a:this.getTextBoxCellCSS();c[11]=d}if(j){var k=this.getPickerIconStyle(),l=this.getID(),m=this.getControlStyle();j=this.$130;var n=this.$15e();this.$15g();var o=this.$15j();j[1]=n;j[3]=l;j[6]=this.getControlTableCSS();if(m==null&&this.containerWidget==this.form&&!this.$11e()){j[8]=this.getCellStyle();j[6]+=isc.Canvas.$42a}else j[8]=m;j[10]=this.getTextBoxCellCSS();j[12]=this.getElementHTML(h,a);j[14]=o;j[16]=
k;j[18]=this.getPickerIconCellCSS();a=(a=this.getPickerIcon())&&this.hasFocus&&this.showFocusedPickerIcon&&a.showFocusedWithItem!=false;j[20]=this.getIconHTML(this.getPickerIcon(),a);for(a=0;a<j.length;a++)c[c.length]=j[a]}else c[c.length]=this.getElementHTML(h,a);if(i){if(this.$147()){i=isc.FormItem.$82c();i[1]=d;i[3]=this.getTotalIconsWidth();i[5]=this.getCellStyle();i[7]=this.getIconsHTML();for(a=0;a<i.length;a++)c[c.length]=i[a]}e=e&&!f;var s;if(b){s=this.getHint();if(isc.isA.emptyString(s))s=
null}if(s||e){b=this.$132;b[1]=this.$59s();b[3]=s?this.getHintStyle():null;b[5]=(s||"")+(e?g||"":"");for(a=0;a<b.length;a++)c[c.length]=this.$132[a]}c[c.length]=this.$13z}return c},isc.A.$15w=function(){return this.$qs(this.$133)},isc.A.$15x=function(a){var b=this.hasErrors();if(!isc.FormItem.$15y)isc.FormItem.$15y={};var c=isc.FormItem.$15y[a];if(!c){c={};c.Error=a+"Error";c.Focused=a+"Focused";c.Disabled=a+"Disabled";isc.FormItem.$15y[a]=c}if(b)return this.shouldShowErrorStyle()&&this.form.showInlineErrors?
c.Error:a;else{if(this.showFocused&&this.hasFocus&&!this.isInactiveHTML())return c.Focused;if(this.showDisabled&&this.isDisabled())return c.Disabled;return a}},isc.A.getCellStyle=function(){if(this.parentItem!=null)if(this.parentItem.itemCellStyle)return this.$15x(this.parentItem.itemCellStyle);var a=this.$15x(this.cellStyle);if(this.hasErrors()){if(this.errorCellClassName!=null){this.$15o("errorCellClassname","cellStyle");a=this.errorCellClassName}}else if(this.cellClassName!=null){this.$15o("cellClassName",
"cellStyle");a=this.cellClassName}return a},isc.A.getTitleStyle=function(){if(this.$68y()&&this.printTitleStyle)return this.$15x(this.printTitleStyle);var a=this.getErrors();if(a==isc.emptyString)a=null;var b=this.$15x(this.titleStyle);if(a){if(this.titleErrorClassName!=null){this.$15o("titleErrorClassName","titleStyle");b=this.titleErrorClassName}}else if(this.titleClassName!=null){this.$15o("titleClassName","titleStyle");b=this.titleClassName}return b},isc.A.getHintStyle=function(){if(this.hintClassName!=
null){this.$15o("hintClassName","hintStyle");return this.hintClassName}if(this.hintStyle!=null)return this.hintStyle},isc.A.getTextBoxStyle=function(){if(this.$68y()&&this.printTextBoxStyle)return this.$15x(this.printTextBoxStyle);var a=this.textBoxStyle?this.$15x(this.textBoxStyle):null;if(this.elementClassName!=null){this.$15o("elementClassName","textBoxStyle");a=this.elementClassName}return a},isc.A.getPickerIconStyle=function(){if(this.pickerIconStyle!=null)return this.$15x(this.pickerIconStyle);
return null},isc.A.getControlStyle=function(){if(this.controlStyle!=null)return this.$15x(this.controlStyle);return null},isc.A.getOuterTableCSS=function(){var a=this.$139,b,c=this.expandHintAndErrors;if(!this.$68y()||isc.isA.Number(this.width)){if(c&&this.getHint()==null){b=this.getErrorOrientation();c=b==isc.Canvas.LEFT||b==isc.Canvas.RIGHT}b=c&&this.getColWidth()!=null?Math.max(this.getInnerWidth(),this.getColWidth()):this.getInnerWidth()}if(isc.isA.Number(b)){if(a[b]!=null)return a[b]}else{if(!this.$15z)this.$15z=
this.$135;return this.$15z}c=isc.SB.create();c.append(this.$135);c.append(this.$93);c.appendNumber(b,5);c.append(isc.semi);a[b]=c.release();return a[b]},isc.A.getControlTableCSS=function(){var a=isc.SB.create();a.append(this.$14a);var b=this.getElementWidth()-this.$672();isc.isA.Number(b)&&a.append(this.$93,b,this.$38);return a.release()},isc.A.getTextBoxCellCSS=function(){return this.textBoxCellCSS!=null?this.textBoxCellCSS:isc.Canvas.$42a},isc.A.getTextBoxCSS=function(){var a=isc.SB.create();if(!this.$68y()||
isc.isA.Number(this.width)){var b=this.getTextBoxWidth();if(isc.isA.Number(b))(isc.Browser.isOpera||isc.Browser.isMoz||isc.Browser.isSafari)&&!this.clipValue?a.append(this.$137,b,this.$38):a.append(this.$93,b,this.$38)}b=this.getTextBoxHeight();if(isc.isA.Number(b))isc.Browser.isMoz&&!this.clipValue?a.append(this.$138,b,this.$38):a.append(this.$92,b,this.$38);this.clipValue&&a.append(this.$14b);this.wrap?a.append(this.$135):a.append(this.$136);this.textAlign!=null&&a.append(this.$14c,this.textAlign,
this.$39);return a.release()},isc.A.getPickerIconCellCSS=function(){if(isc.Browser.isIE)return isc.emptyString;var a=this.getPickerIconHeight();if(isc.isA.Number(a)&&a<this.getInnerHeight())return this.$14d+a+this.$38;return isc.emptyString},isc.A.getPickerIcon=function(){if(this.$150==null){var a=this.getPickerIconWidth(),b=this.getPickerIconHeight();a={pickerIcon:true,writeIntoItem:true,showOver:this.showOver,showFocused:this.showFocusedPickerIcon,hspace:this.pickerIconHSpace,width:a,height:b,src:this.pickerIconSrc,
click:function(c,d){d.showPicker()}};isc.addProperties(a,this.pickerIconDefaults,this.pickerIconProperties);this.$753(a,this.pickerIconName);this.$150=a;if(this.iconIsDisabled(a))a.$153=true}return this.$150});isc.B.push(isc.A.getElementHTML=function(a,b){var c=isc.SB.create(),d=this.$15m(),e,f;if(this.$kk()){var g=this.$154(),h=this.isDisabled()?null:this.accessKey;if(d)f=isc.Canvas.getFocusProxyString(this.getID(),false,0,0,this.getTextBoxWidth(),this.getTextBoxHeight(),this.isVisible(),!this.isDisabled(),
g,h,false);else{e=isc.SB.create();h!=null&&e.append(this.$14e,h,this.$ob);e.append(this.$14f,g,this.$ob);e=e.release()}}f!=null&&c.append(f);f=this.$14g;f[1]=this.$15g();f[3]=this.getID();f[6]=this.getTextBoxStyle();f[8]=this.getTextBoxCSS();f[10]=e;f[12]=this.$xq(b);f[13]=this.showValueIconOnly?null:a;c.append(f);return c.release()},isc.A.$15m=function(){return(isc.Browser.isSafari||isc.Browser.isMoz&&isc.Browser.geckoVersion<20051111)&&this.$kk()&&!this.hasDataElement()},isc.A.$155=function(){if(!isc.FormItem.$156)isc.FormItem.$156=
[" ",isc.DynamicForm.$89,"='",null,"' ",isc.DynamicForm.$9a,"='",isc.DynamicForm.$9b,"'"];isc.FormItem.$156[3]=this.getItemID();return isc.FormItem.$156.join(isc.emptyString)},isc.A.getErrors=function(){if(this.form)return this.form.getFieldErrors(this)},isc.A.getError=function(){this.logWarn("call to deprecated method FormItem.getError(). Use FormItem.getErrors() instead.");return this.getErrors()},isc.A.getErrorMessage=function(a){return isc.isAn.Array(a)?"<UL><LI>"+a.join("</LI><LI>")+"</LI></UL>":
a},isc.A.shouldShowErrorIcon=function(){return this.showErrorIcon!=null?this.showErrorIcon:this.form.showErrorIcons},isc.A.shouldShowErrorText=function(){return this.showErrorText!=null?this.showErrorText:this.form.showErrorText},isc.A.shouldShowErrorStyle=function(){return this.showErrorStyle!=null?this.showErrorStyle:this.form.showErrorStyle},isc.A.shouldShowErrorIconPrompt=function(){return this.shouldShowErrorIcon&&!this.shouldShowErrorText()},isc.A.getErrorOrientation=function(){return this.errorOrientation!=
null?this.errorOrientation:this.form.errorOrientation},isc.A.getErrorHTML=function(a){var b=this.shouldShowErrorText(),c=this.shouldShowErrorIcon();if(!b&&!c)return isc.emptyString;var d=c&&b,e=!d&&c&&(this.getErrorOrientation()==isc.Canvas.LEFT||this.getErrorOrientation()==isc.Canvas.RIGHT),f=b&&this.form.showTitlesWithErrorMessages&&this.getTitle()!=null?this.getTitle()+": ":null;b=b?this.getErrorMessage(a):null;return d?isc.SB.concat("<TABLE WIDTH=100% CELLSPACING=0 CELLPADDING=0><TR>","<TD WIDTH=",
this.errorIconWidth,">",this.getErrorIconHTML(a),"</TD><TD STYLE='",isc.Canvas.$42a,"' CLASS='",this.getCellStyle(),"'>&nbsp;",f,b,"</TD></TR></TABLE>"):isc.SB.concat("<DIV ",e?"style='display:inline;'":null," CLASS='",this.getCellStyle(),"'>",c?this.getErrorIconHTML(a)+"&nbsp;":null,f,b,"</DIV>")},isc.A.getErrorIconHTML=function(a){this.$79u=a;a=this.getErrorIconId();return this.$157(a,this.errorIconWidth,this.errorIconHeight,"top",0,null,null,this.form.getImgURL(this.errorIconSrc),this.getID(),
a,null,true,isc.DynamicForm.$89+"='"+this.getID()+"' "+isc.DynamicForm.$9a+"='"+a+"'")},isc.A.getErrorIconId=function(){return this.$qs("error")},isc.A.getHint=function(){if(!this.showHint||!this.hint)return null;return this.hint},isc.A.drawn=function(){if(this.logIsInfoEnabled(this.$n3))this.logInfo("Form item drawn "+(this.containerWidget==this.form?"in form "+this.form.getID():"in container widget "+this.containerWidget.getID())+(this.logIsDebugEnabled("drawing")?this.getStackTrace():""),"drawing");
this.$if=true;if(this.$15q)this.$158=true;this.$15q=null;this.$159();isc.screenReader&&this.addContentRoles()},isc.A.redrawing=function(){this.$16j(true)&&this.$516();this.form.clearingElement(this);this.$13m=null},isc.A.redrawn=function(){if(this.logIsInfoEnabled("drawing"))this.logInfo("Form item redrawn "+(this.containerWidget==this.form?"in form "+this.form.getID():"in container widget "+this.containerWidget.getID())+(this.logIsDebugEnabled("drawing")?this.getStackTrace():""),"drawing");this.$16a();
this.$159();isc.screenReader&&this.addContentRoles();if(this.$16j(true))isc.Browser.isIE?this.delayCall("$109",[],100):this.$109()},isc.A.$516=function(){this.$105=true;this.rememberSelection();if(this.items)for(var a=0;a<this.items.length;a++)if(this.items[a].hasFocus)return this.items[a].$516();var b=this.$166();if(b!=null&&b!=this.getFocusElement()){a=this.getPickerIcon();if(a!=null&&this.$16g(a)==b)this.$65o=a;else if(this.icons)for(a=0;a<this.icons.length;a++)if(this.$16g(this.icons[a])==b){this.$65o=
this.icons[a];break}}},isc.A.$109=function(){var a=this.isDrawn()&&this.isVisible();if(a){var b=isc.EH.getFocusCanvas();if(b!=null&&b!=this.form)a=false;else{b=this.form.getFocusSubItem();if(b!=this&&b!=this.parentItem&&(!this.items||!this.items.contains(b)))a=false}}delete this.$105;a&&this.resetToLastSelection();if(this.items)for(b=0;b<this.items.length;b++)if(this.items[b].$16j())return this.items[b].$109();a&&this.form.$65n(this);if(this.$65o){b=this.getIcon(this.$65o);delete this.$65o;if(b){a&&
this.focusInIcon(b);return}}a&&this.focusInItem()},isc.A.$159=function(){if(this.$kk()){var a=this.getFocusElement();if(!a){this.logWarn("Attempting to apply event handlers to this item. Unable to get a pointer to this item's focus element");return}a.onfocus=isc.FormItem.$12u;a.onblur=isc.FormItem.$12w;if(isc.Browser.isIE){a.onpaste=isc.FormItem.$43a;a.oncut=isc.FormItem.$43a}if(this.$16b)for(var b in this.$16b)a[b]=this.$16b[b]}this.$16c()},isc.A.$16c=function(){this.showPickerIcon&&this.$16d(this.getPickerIcon());
if(this.showIcons&&this.icons&&this.icons.length>0)for(var a=0;a<this.icons.length;a++){var b=this.icons[a];if(b&&(this.$16e(b)||this.$16f(b)))this.$16d(b)}},isc.A.$16d=function(a){if(!a.imgOnly)if(a=this.$16g(a)){a.onfocus=isc.FormItem.$120;a.onblur=isc.FormItem.$122;a.href=this.$14h;a.onclick=isc.FormItem.$124;if(isc.Browser.isSafari){if(!isc.FormItem.$16h)isc.FormItem.$16h=function(){var b=isc.DynamicForm.$mu(this),c=b.item;b=b.overIcon;if(c)return c.focusInIcon(b)};a.onmousedown=isc.FormItem.$16h}}},
isc.A.cleared=function(){if(this.logIsInfoEnabled("drawing"))this.logInfo("Form item cleared "+(this.containerWidget==this.form?"from within form "+this.form.getID():"from within container widget "+this.containerWidget.getID())+(this.logIsDebugEnabled("drawing")?this.getStackTrace():""),"drawing");this.form.clearingElement(this);this.$16a();this.$if=this.$15q=this.$158=false},isc.A.$16a=function(){this.$16i=this.$13m=this.$14x=null;this.$15d={}},isc.A.isDrawn=function(){return this.$if},isc.A.$14v=
function(){var a=this.icons;if(a!=null)for(var b=0;b<a.length;b++)this.$36c(a[b])},isc.A.$36c=function(a){this.$753(a);if(this.iconIsDisabled(a))a.$153=true},isc.A.getIconsHTML=function(){if(!this.showIcons||this.icons==null)return"";var a=this.$16j(true);if(this.showIconsOnFocus&&!a){this.hideAllIcons();return""}for(var b=isc.SB.create(),c=false,d=0;d<this.icons.length;d++){var e=this.icons[d];if(!(!this.$16f(e)||this.$16e(e))){if(c==false){c=true;b.append(this.$80b)}b.append("<td>");var f=a&&this.$54o(e,
true);b.append(this.getIconHTML(e,null,this.iconIsDisabled(e),!!f));b.append("</td>")}}c&&b.append("</table>");return b.release()},isc.A.$16j=function(a){var b=this.hasFocus||this.$105;if(a&&!b&&this.items!=null)for(;0<this.items.length;){if(this.items[0].hasFocus||this.items[0].$105)b=true;break}return b},isc.A.$753=function(a,b){if(b==null)b=a.name;if(b==null&&a.$151!=null){this.logWarn("Attempting to use '$151' property as icon name - this property has been deprecated in favor of 'name'");b=a.$151}if(b!=
null){var c=this.icons?this.icons.findAll("name",b):[];if(c!=null&&c.length>0&&(c.length>1||c[0]!=a))this.logWarn("This form item has more than one icon with the same specified name:"+b+". Ignoring this name and using an auto-generated one instead.");else{a.name=b;return a}}if(this.$16k==null)this.$16k=0;a.name="_"+this.$16k++;return a},isc.A.$16l=function(a){if(this.$150&&a==this.$150)return null;a=this.iconVAlign;if(a==isc.Canvas.TOP)return"top";else if(a==isc.Canvas.BOTTOM)return isc.Browser.isSafari?
"bottom":"text-bottom";else if(a==isc.Canvas.CENTER)return"middle";return a},isc.A.$16m=function(){return 0},isc.A.getIconPrompt=function(a){if(this.iconIsDisabled(a))return null;return a.prompt||this.iconPrompt},isc.A.getIconURL=function(a,b,c,d){var e=a.src||this.defaultIconSrc;a=c||this.iconIsDisabled(a)?isc.StatefulCanvas.STATE_DISABLED:b?isc.StatefulCanvas.STATE_OVER:null;return e=isc.Img.urlForState(e,false,d,a)},isc.A.getIconHTML=function(a,b,c,d){b=this.getIconURL(a,b,c,d);d=this.getIconWidth(a);
var e=this.getIconHeight(a),f=a.hspace!=null?a.hspace:this.iconHSpace,g=a.backgroundColor;this.form.getID();var h=this.getItemID(),i=a.name;if(a.imgOnly)return this.$157(this.$16n(i),d,e,this.$16l(a),this.$16m(a),f,g,b,h,i);else{if(isc.FormItem.$16o==null)isc.FormItem.$16o=["<a ID='",,"'"," style='margin-left:",,"px;"+(isc.Browser.isMoz?"-moz-user-focus:":""),,,"' tabIndex=",," ",isc.DynamicForm.$89,"='",,"' ",isc.DynamicForm.$9a,"='",,"' handleNativeEvents=false>",,"</a>"];var j=isc.FormItem.$16o;
var k=(c=this.iconIsDisabled(a))||this.canTabToIcons==false?-1:this.$16p(a);j[1]=this.$16q(i);var l=this.$16r(a);j[4]=l?f:"0";if(isc.Browser.isMoz)j[6]=k<0?"ignore;":"normal;";j[7]=c?"cursor:default;":null;j[9]=k;j[13]=h;j[17]=i;j[19]=this.$157(this.$16n(i),d,e,this.$16l(a),this.$16m(a),!l?f:null,g,b,h,i,f);return j.join(isc.emptyString)}},isc.A.$16r=function(a){return!isc.Browser.isIE&&!isc.Browser.isSafari&&!a.imgOnly&&!isc.Browser.isStrict},isc.A.$157=function(a,b,c,d,e,f,g,h,i,j,k,l,m){if(isc.FormItem.$16s==
null)isc.FormItem.$16s=["ID='",,"' style='",,,";margin-top:",,"px;margin-bottom:",,"px;",,,,"'"];i=isc.FormItem.$16s;i[1]=a;if(d!=null){i[3]=this.$14i;i[4]=d}else{i[3]=null;i[4]=null}i[6]=e;i[8]=e;i[10]=f!=null?"margin-left:"+f+"px;":null;i[11]=g!=null?"background-color:"+g+";":null;i[12]=isc.Browser.isStrict&&!isc.Browser.isTransitional&&!l?"display:block;":null;if(m)i[14]=m;m=i.join(isc.emptyString);i.length=14;a=isc.FormItem.$4s=isc.FormItem.$4s||{align:isc.Browser.isSafari?"absmiddle":"TEXTTOP"};
a.src=h;a.width=b;a.height=c;a.extraStuff=m;return isc.Canvas.imgHTML(a)},isc.A.$16q=function(a){if(this.isInactiveHTML())return this.$qs(this._$_iLink_+a);if(!this.$16t)this.$16t={};var b=this.$16t;b[a]||(b[a]=this.$qs(this._$_iLink_+a,true));return b[a]},isc.A.$16n=function(a){if(this.isInactiveHTML())return this.$qs(this._$_iImg_+a);if(!this.$16u)this.$16u={};var b=this.$16u;b[a]||(b[a]=this.$qs(this._$_iImg_+a,true));return b[a]},isc.A.$16g=function(a){a=this.getIcon(a);if(a==null||a.imgOnly)return null;
a=this.$16q(a.name);return isc.Element.get(a)},isc.A.$16v=function(a){a=this.getIcon(a);if(a==null)return null;a=this.$16n(a.name);return isc.Element.get(a)},isc.A.$16w=function(a){if(!a||!this.icons)return null;a=isc.DynamicForm.$mu(a);if(!a||a.item!=this)return null;return a.icon},isc.A.$16f=function(a){if(a.showIf==null)return true;isc.Func.replaceWithMethod(a,"showIf","form,item");return!!a.showIf(this.form,this)},isc.A.$16e=function(a){if(a.writeIntoItem)return true;return false},isc.A.$16x=
function(){if(!this.showIcons||this.icons==null||this.showIconsOnFocus&&!this.hasFocus)return false;return true},isc.A.getTotalIconsWidth=function(){if(!this.$16x())return 0;for(var a=0,b=0;b<this.icons.length;b++){var c=this.icons[b];!this.$16f(c)||this.$16e(c)||(a+=(c.width!=null?c.width:this.iconWidth)+(c.hspace!=null?c.hspace:this.iconHSpace))}return a},isc.A.getIconsHeight=function(){if(!this.$16x())return 0;for(var a=0,b=0;b<this.icons.length;b++){var c=this.icons[b];if(!(!this.$16f(c)||this.$16e(c))){c=
c.height!=null?c.height:this.iconHeight;c+=this.$16m()*2;if(c>a)a=c}}return a},isc.A.setIcons=function(a){this.icons=a;this.$14v();this.redraw()},isc.A.addIcon=function(a){if(!this.icons)this.icons=[];this.icons.add(a);this.setIcons(this.icons);return a},isc.A.getIconByProperty=function(a,b){if(this.icons)return this.icons.find(a,b)},isc.A.setIconEnabled=function(a){if(a=this.getIcon(a)){var b=!this.iconIsDisabled(a);if(!!a.$153==b){if(b)delete a.$153;else a.$153=true;if(this.isDrawn()){var c=this.$16g(a),
d=this.$16v(a);if(c)if(b){isc.FormItem.setElementTabIndex(c,this.$16p(a));c.style.cursor=""}else{isc.FormItem.setElementTabIndex(c,-1);c.style.cursor="default"}if(d){a=this.getIconURL(a,null,!b);isc.Canvas.$wg(d,a)}}}}},isc.A.showIcon=function(a,b){delete this.$16y;if(isc.isAn.Object(a)){a.name==null&&this.$753(a);var c=this.$16f(a);a.showIf=function(){return true};if(!c&&this.showIcons&&this.containerWidget.isDrawn()&&this.isVisible())if(this.redrawOnShowIcon||a.writeIntoItem)this.redraw();else{var d;
for(c=this.icons.indexOf(a)-1;c>=0;c--){var e=this.icons[c];if(!e.writeIntoItem&&this.$16f(e)){d=e;break}}c=true;if(d!=null){d=d.imgOnly?this.$16v(d):this.$16g(d);if(d!=null){c="<td>"+this.getIconHTML(a,null,this.isDisabled(),b)+"</td>";isc.Element.insertAdjacentHTML(d.parentNode,"afterEnd",c);this.$16z();c=false}}if(c){this.logInfo("showIcon(): Unable to dynamically update icon visibility - redrawing the form");return this.redraw()}else this.$16d(a)}}},isc.A.hideIcon=function(a){if(isc.isAn.Object(a)){var b=
this.$16f(a);a.showIf=function(){return false};if(b&&this.showIcons&&this.containerWidget.isDrawn()&&this.isVisible())if(this.redrawOnShowIcon||a.writeIntoItem)this.redraw();else{a=a.imgOnly?this.$16v(a):this.$16g(a);if(a==null){this.logInfo("hideIcon(): Unable to dynamically update icon visibility - redrawing the form");return this.redraw()}b=a.parentNode;var c=b.parentNode;if(b.tagName.toLowerCase()!="td")isc.Element.clear(a);else c.cells.length==1?isc.Element.clear(a.parentNode):isc.Element.clear(b);
this.$16z()}}},isc.A.$16z=function(){this.$160()},isc.A.showAllIcons=function(a){if(this.$161!=null){isc.Timer.clear(this.$161);delete this.$161}this.$162(this.icons,a)},isc.A.hideAllIcons=function(){this.$161!=null&&delete this.$161;this.$163(this.icons);this.$16y=true},isc.A.$162=function(a,b){if(!(a==null||a.length==0))for(var c=0;c<a.length;c++){b=b&&this.$54o(a[c],true);this.showIcon(a[c],b)}},isc.A.$163=function(a){if(!(a==null||a.length==0))for(var b=0;b<a.length;b++)this.hideIcon(a[b])},isc.A.getIcon=
function(a){if(a!=null){var b;if(this.icons)for(var c=0;c<this.icons.length;c++)if(this.icons[c]==a||this.icons[c].name==a)b=this.icons[c];if(!b&&this.showPickerIcon){if(isc.isAn.Object(a))a=a.name;if((c=this.getPickerIcon())&&c.name==a)b=c}b||this.logInfo("FormItem unable to get pointer to icon with name:"+a+" - Invalid name, or icons array has been inappropriately modified. To update icon[s] for some form item, use the method 'setIcons()'.");return b}},isc.A.$164=function(a,b,c){if(!this.isDisabled()){if(c==
null)c=this.hasFocus&&this.$54o(a,true);var d=this.$16v(a);if(d!=null){a=this.getIconURL(a,b,null,c);isc.Canvas.$wg(d,a)}}},isc.A.$165=function(a){if(this.isDisabled())return false;if(a.showOver!=null)return a.showOver;return this.showOverIcons},isc.A.$54o=function(a,b){if(!a||this.isDisabled())return false;if(b&&a.showFocusedWithItem==false)return false;if(a.showFocused!=null)return a.showFocused;return this.showFocusedIcons},isc.A.setIconBackgroundColor=function(a,b){a.backgroundColor=b;var c=this.$16v(a);
if(c!=null)try{c.style.backgroundColor=b}catch(d){}},isc.A.showPicker=function(a,b,c,d){var e=this.picker;c=isc.addProperties(c||{},{callingForm:this.form,callingFormItem:this});if(isc.isA.String(e)&&isc.isA.Canvas(window[e]))e=this.picker=window[e];if(e)isc.addProperties(e,c);else{e=this.picker=this.createPicker(c);if(!isc.isA.Function(e.dataChanged))e.dataChanged=new Function;e.observe(e,"resized","observed.placeNear(observed.lastShowRect)");this.pickerDataChanged&&e.dataChanged&&this.observe(e,
"dataChanged","observer.pickerDataChanged(observed)")}c=e.getID();if(!d)if(this.getPickerRect)d=this.getPickerRect();else if(b){b=this.getIconPageRect(b);d=[b[0],b[1]]}else d=[isc.EH.getX(),isc.EH.getY()];e.lastShowRect=d;e.setRect(d);if(!e.isDrawn()){e.moveTo(null,-9999);e.draw()}this.picker.placeNear(d);if(isc.isA.Function(e.setData))isc.isA.Function(this.getPickerData)?e.setData(this.getPickerData(e)):e.setData(this.getValue(e));b=a?null:c+".hide()";if(a&&isc.isA.Function(e.clickMaskClicked))b=
c+".clickMaskClicked()";e.showClickMask(b,!a,e);if(a!=null&&e.isModal==null)e.isModal=a;e.show();e.bringToFront();e.focus();return false},isc.A.createPicker=function(a){return this.createAutoChild("picker",a)},isc.A.hidePicker=function(){if(this.picker){this.picker.hideClickMask();this.picker.hide()}},isc.A.redraw=function(a){if(this.isDrawn()){if(this.hasFocus)this.$105=true;if(!this.hasFocus&&this.items!=null)for(var b=0;b<this.items.length;b++)if(this.items[b].hasFocus)this.$105=true;this.containerWidget.redrawFormItem?
this.containerWidget.redrawFormItem(this,a):this.containerWidget.markForRedraw("Form item redrawn"+(a?": "+a:isc.emptyString))}},isc.A.adjustOverflow=function(a){if(!this.$43c)this.$43c=[this.getID(),"  overflow changed: "];this.$43c[2]=a==null?"No Reason Specified.":a;isc.isA.DynamicForm(this.containerWidget)&&this.containerWidget.adjustOverflow(this.$43c.join(isc.emptyString))},isc.A.show=function(a){this.visible=true;if(!a)this.showIf=null;this.containerWidget.redrawFormItem?this.containerWidget.redrawFormItem(this,
"showing form item"):this.containerWidget.markForRedraw("showing form item");this.visibilityChanged(true)},isc.A.hide=function(a){this.visible=false;if(!a)this.showIf=null;this.containerWidget.redrawFormItem?this.containerWidget.redrawFormItem(this,"hiding form item"):this.containerWidget.markForRedraw("hiding form item");this.visibilityChanged(true)},isc.A.$104=function(){isc.Browser.isSafari&&this.isDrawn()&&this.$160()},isc.A.$160=function(){if(this.isDrawn()){var a=this.clipValue,b=this.getOuterTableElement();
if(b)b.style.width=this.getInnerWidth();if(this.showPickerIcon){if(b=this.$15f())b.style.width=this.getElementWidth();if(b=this.$16v(this.getPickerIcon())){b.style.height=this.getPickerIconHeight();b.style.width=this.getPickerIconWidth()}}b=this.getTextBoxWidth();var c=this.getTextBoxHeight(),d=this.$15h();if(d){if(a)d.style.width=b+"px";else d.style.minWidth=b+"px";d.style.height=c+"px"}if(this.$15m())if(a=this.getFocusElement()){a.style.width=b;a.style.height=c}}},isc.A.hasElement=function(){return this.hasDataElement()},
isc.A.hasDataElement=function(){return this.$125},isc.A.getElement=function(a){return this.getDataElement(a)},isc.A.getFocusElement=function(){if(!this.isDrawn()||!this.$kk())return null;if(this.hasDataElement())return this.getDataElement();if(this.$15m()){if(!this.$16i)this.$16i=isc.Element.get(this.getID()+"__focusProxy");return this.$16i}return this.$15h()},isc.A.$166=function(){if(this.hasFocus==null&&!isc.EH.$vm==this)return null;var a=this.$167;if(isc.Browser.isIE&&a!=this.getActiveElement()){this.logInfo("not returning focus element since it doesn't match document.activeElement",
"nativeFocus");if(this.hasFocus){this.hasFocus=false;this.elementBlur()}return this.$167=null}return a},isc.A.getDataElement=function(a){if(!(a==null?this:this.form.getItem(a)).hasDataElement())return null;if(this.isDrawn()){a=this.$14x;if(a==null)a=this.$14x=isc.Element.get(this.getDataElementId());return a}},isc.A.getOuterElement=function(){if(!this.isDrawn())return null;if(this.$15s(this.$158))return this.getOuterTableElement();if(this.showPickerIcon)return this.$15f();var a=this.$15h();if(a==
null)a=this.getHandle();return a},isc.A.getHandle=function(){if(!this.isDrawn())return null;if(this.$11e())return this.getAbsDiv();if(this.containerWidget==this.form)return this.getFormCell();return isc.Element.get(this.$qs(this.$13j))},isc.A.getOuterTableElement=function(){return this.$15c(this.$133)},isc.A.$168=function(a){if(!a)a=isc.EH.lastEvent;return(a=a.itemInfo)&&a.overElement},isc.A.$169=function(a){if(!a)a=isc.EH.lastEvent;return(a=a.itemInfo)&&(a.overTextBox||a.overElement)},isc.A.$17a=
function(a){if(!a)a=isc.EH.lastEvent;var b=a.itemInfo;return b&&(b.overControlTable||this.$169(a)||b.overIcon&&this.getIcon(b.overIcon)==this.getPickerIcon())},isc.A.getFormCellID=function(){return this.$qs(this.$14k)},isc.A.getFormCell=function(){return isc.Element.get(this.getFormCellID())},isc.A.getDisplayValue=function(a){return this.mapValueToDisplay(a!==void 0?a:this.getValue())},isc.A.mapValueToDisplay=function(a){return a=this.$17c(this.$17b(a))},isc.A.$17c=function(a){if(this.applyStaticTypeFormat){if(this.formatValue!=
null){var b=this.form,c=this.form?this.form.values:{};return this.formatValue(a,c,b,this)}}else if(this.formatEditorValue!=null){c=(b=this.form)?this.form.values:{};return this.formatEditorValue(a,c,b,this)}else if(this.$65!=null){c=(b=this.form)?this.form.values:{};return this.$62?this.$62.editFormatter(a,this,b,c):this.$65(a,this,b,c)}if(isc.isA.Date(a)){if(this.dateFormatter!=null&&isc.isA.Date(a))return a.toNormalDate(this.dateFormatter);if(this.timeFormatter!=null&&isc.isA.Date(a))return isc.Time.toTime(a,
this.timeFormatter);if(this.displayFormat!=null)if(this.type=="time")return isc.Time.toTime(a,this.displayFormat);else if(this.type=="date"||this.type=="datetime")return a.toNormalDate(this.displayFormat)}if(this.$62&&isc.isA.Function(this.$62.normalDisplayFormatter)&&this.applyStaticTypeFormat)return this.$62.normalDisplayFormatter(a,this,this.form,this.form.values);if(this.$64&&this.applyStaticTypeFormat)return this.$64(a,this,this.form,this.form.values);if(a==null)a=this.emptyDisplayValue;else{a=
isc.iscToLocaleString(a);if(this.emptyDisplayValue!=isc.emptyString&&a==isc.emptyString)a=this.emptyDisplayValue}return a},isc.A.mapDisplayToValue=function(a){a=this.$79d(a);return this.$17d(a)},isc.A.$79d=function(a){if(!this.applyStaticTypeFormat)if(this.parseEditorValue!=null)a=this.parseEditorValue(a,this.form,this);else if(this.$66!=null){var b=this.form,c=b?b.values:{};a=this.$62&&this.$62.parseInput?this.$62.parseInput(a,this,b,c):this.$66(a,this,b,c)}if((this.type=="date"||this.type=="datetime")&&
this.inputFormat!=null){b=Date.parseInput(a,this.inputFormat);if(b!=null)a=b}return a},isc.A.$17b=function(a,b){var c=b?null:a,d=this.getValueMap();if(!d)return c;if(isc.isA.String(d))d=this.getGlobalReference(d);if(isc.isAn.Array(d)&&!isc.isAn.Array(a))return c;if(isc.isAn.Array(a)){c="";for(var e=0;e<a.length;e++){var f=isc.getValueForKey(a[e],d,a[e]),g=this.$xq(a[e]);if(g!=null&&a.length>1)c+=g;c+=f;if(e!=a.length-1)c+=this.multipleValueSeparator}}else c=isc.getValueForKey(a,d,c);return c},isc.A.$17d=
function(a){var b=this.getValueMap();if(!b)return a;if(isc.isA.String(b))b=this.getGlobalReference(b);if(isc.isAn.Array(b))return a;return isc.getKeyForValue(a,b)},isc.A.setValueMap=function(a){this.valueMap=a;this.updateValueMap()},isc.A.setValueIcons=function(a){this.valueIcons=a;this.isDrawn()&&this.redraw()},isc.A.setOptions=function(a){return this.setValueMap(a)},isc.A.updateValueMap=function(a){a!=false&&this.setElementValue(this.mapValueToDisplay(this.getValue()));this.hasElement()&&this.setElementValueMap(this.getValueMap())},
isc.A.setElementValueMap=function(){},isc.A.getValueMap=function(){var a=this.valueMap;if(isc.isA.String(a))a=this.getGlobalReference(a);var b=this.$43d;if(b!=null)if(a==null)a=b;else{if(isc.isAn.Array(a)){var c=a;a={};for(var d=0;d<c.length;d++)a[c[d]]=c[d]}isc.addProperties(a,b)}return a},isc.A.getValueFieldName=function(){if(this.valueField)return this.valueField;if(this.form.dataSource&&this.foreignKey)return isc.DS.getForeignFieldName(this,this.form.dataSource);var a=this.getFieldName(),b=this.getOptionDataSource();
if(b&&b.getField(a)==null)a=b.getTitleField();return a||"name"},isc.A.getDisplayFieldName=function(){if(this.displayField)return this.displayField;var a=this.getOptionDataSource();if(a&&a!=isc.DataSource.getDataSource(this.form.dataSource)&&a.getField(this.getValueFieldName()).hidden==true)return a.getTitleField()},isc.A.$426=function(){if(this.displayField!=null){var a=this.form.getValues(),b=a[this.getFieldName()];a=a[this.displayField];if(a!=null){var c={};c[b]=a}this.$43d=c}},isc.A.getOptions=
function(){return this.getValueMap()},isc.A.getOptionDataSource=function(){var a=this.optionDataSource;if(a==null&&this.form.dataSource)a=this.foreignKey?isc.DS.getForeignDSName(this,this.form.dataSource):this.form.dataSource;if(isc.isA.String(a))a=isc.DataSource.getDataSource(a);return a},isc.A.getValueMapTitle=function(a){var b=this.getValueMap();if(isc.isAn.Array(b))return b.contains(a)?a:"";return b[a]},isc.A.saveValue=function(a,b){this._value=a;this.$14u=b;this.isDrawn()&&this.$11d()&&this.$17e(a);
a==void 0&&this.$17f?this.form.clearItemValue(this):this.form.saveItemValue(this,a)},isc.A.$17e=function(a){var b=this.$15b();if(b)b.value=a},isc.A.setValue=function(a,b){this.$17g=true;this.$751!=null&&!this.compareValues(a,this._value)&&this.$78w();var c=this.maintainSelectionOnTransform&&this.hasFocus&&this.$17h()!=this.$14l;c&&this.rememberSelection();if(this.$17i!=null){isc.Timer.clearTimeout(this.$17i);this.$17i=null}var d;if(a==null&&!b){var e=this.getDefaultValue();if(e!=null){d=true;a=e}}if(this.length!=
null&&a!=null&&isc.isA.String(a)&&a.length>this.length)a=a.substring(0,this.length);this.saveValue(a,d);a!=null&&this.shouldFetchMissingValue(a)&&this.$43f(a);this.setElementValue(this.mapValueToDisplay(a),a);c&&this.resetToLastSelection(true);return a},isc.A.shouldFetchMissingValue=function(a){if(this.fetchMissingValues==false)return false;if(this.getOptionDataSource()==null)return false;if(this.alwaysFetchMissingValues)return true;if(this.getDisplayFieldName()==null)return false;return this.$17b(a,
true)==null&&(!this.$43e||!this.filterLocally)},isc.A.setDefaultValue=function(a){var b=this.defaultValue;this.defaultValue=a;if(this.isSetToDefaultValue()||this._value==null&&b===void 0)this.clearValue()},isc.A.$43f=function(a){var b=this.getOptionDataSource();if(b&&(this.$78y==null||!this.compareValues(this.$78y,a))&&(this.$63l==null||!this.$63l[a])){if(!this.$63l)this.$63l={};this.$63l[a]=true;var c=this.optionCriteria||{};this.filterLocally||(c[this.getValueFieldName()]=a);a=isc.addProperties({},
this.optionFilterContext,{showPrompt:false,clientContext:{dataValue:a},componentId:this.containerWidget.getID(),componentContext:this.getFieldName()});if(this.optionOperationId!==void 0)a.operationId=this.optionOperationId;b.fetchData(c,{target:this,methodName:"fetchMissingValueReply"},a)}},isc.A.fetchMissingValueReply=function(a,b){var c,d=a.clientContext.dataValue,e=this.getDisplayFieldName(),f=this.getValueFieldName();delete this.$63l[d];if(b)c=b.find(f,d);if(!c){this.logInfo("Unable to retrieve display value for data value:"+
d+" from dataSource "+this.getOptionDataSource());if(!this.filterLocally)return}this.$78x(c);if(this.$43d==null)this.$43d={};for(var g=this.$43d,h=0;h<b.length;h++){c=b[h];var i=c[f],j=c[e];if(g[i]!==void 0)g[i]!=j&&this.logWarn("Deriving valueMap for '"+f+"' from dataSource based on displayField '"+e+"'. This dataSource contains more than one record with "+f+" set to "+i+" with differing "+e+" values. Derived valueMap is therefore unpredictable.");else g[c[f]]=c[e]}if(this.filterLocally)this.$43e=
true;this.updateValueMap(this._value==d)},isc.A.getSelectedRecord=function(){if(this.$751&&this.$78y==this._value)return this.$751},isc.A.$78x=function(a){this.$751=a;this.$78y=this._value},isc.A.$78w=function(){delete this.$751;delete this.$78y},isc.A.clearValue=function(){this.$17f=true;this.setValue();delete this.$17f},isc.A.setElementValue=function(a,b){if(this.isDrawn()){if(b===void 0)b=this._value;if(this.hasDataElement()){var c=this.getDataElement();if(c!=null){this.$17j(b);return c.value=
a}}c=this.$15h();if(c!=null){if(this.showValueIconOnly)a=isc.emptyString;var d=this.$xq(b);if(d!=null)a=d+(a!=null?a:isc.emptyString);c.innerHTML=a;if(!this.clipValue||this.height==null||this.width==null)this.adjustOverflow("textBox value changed")}}},isc.A.$17j=function(a){if(!(this.suppressValueIcon||!this.isDrawn())){var b=this.$144(a),c=this.$15v();if(b!=null){if(this.imageURLSuffix!=null)b+=this.imageURLSuffix;b=isc.Canvas.getImgURL(b,this.imageURLPrefix||this.baseURL||this.imgDir);if(c!=null)c.src=
b;else{b=false;if(this.hasDataElement()){c=this.getDataElement();if(c!=null){isc.Element.insertAdjacentHTML(c,"beforeBegin",this.$xq(a));c.style.width=this.getTextBoxWidth(a);b=true}}else{c=this.$15h();if(c!=null){isc.Element.insertAdjacentHTML(c,"afterBegin",this.$xq(a));b=true}}b||this.redraw()}}else if(c!=null&&!(isc.isAn.Array(a)&&a.length>1)){isc.Element.clear(c);if(this.hasDataElement()){c=this.getDataElement();c.style.width=this.getTextBoxWidth(a)}}}});isc.B.push(isc.A.setHint=function(a){this.hint=
a;this.showHint&&this.redraw()},isc.A.setHintStyle=function(a){if(!this.$712()&&this.getHint()){var b=this.$59t();if(b)b.className=a}},isc.A.$66t=function(){if(!this.$66u){var a=this.getDataElement();if(a)a.className=this.$66v();else{a=this.$15h();if(a!=null)a.className=this.$66v()}if(a=this.getHint())a=a.unescapeHTML();this.setElementValue(a);this.$66u=true}},isc.A.$66s=function(){if(this.$66u){var a=this.getDataElement();if(a)a.className=this.getTextBoxStyle();else{a=this.$15h();if(a!=null)a.className=
this.getTextBoxStyle()}this.setElementValue(isc.emptyString);this.$66u=false}},isc.A.$66v=function(){return this.textBoxStyle+"Hint"},isc.A.$712=function(){if(this.showHint&&this.showHintInField)if(isc.isA.TextItem(this)||isc.isA.TextAreaItem(this)||isc.isA.SelectItem(this))return true;return false},isc.A.getDefaultValue=function(){if(this.defaultDynamicValue){this.convertToMethod("defaultDynamicValue");var a=this.form,b=this.form.getValues();return this.defaultDynamicValue(this,a,b)}return this.defaultValue},
isc.A.setToDefaultValue=function(){return this.clearValue()},isc.A.isSetToDefaultValue=function(){return this.$14u==true},isc.A.updateValue=function(){if(!(!this.hasElement()||this.getDataElement()==null))return this.$10y(this.getElementValue())},isc.A.$10y=function(a){if(this.$17k)a=this.$17l(a);a=this.mapDisplayToValue(a);if(this.compareValues(a,this._value))return true;if(this.$17m)if(this.compareValues(a,this.$17n))return true;var b=this.handleChange(a,this._value);if(!this.destroyed){a=this.$17n;
this.updateAppearance(a);this.compareValues(a,this._value)||this.saveValue(a);delete this.$17n;this.handleChanged(this._value);return b}},isc.A.handleChanged=function(a){this.changed&&this.changed(this.form,this,a);if(this.form){this.form.itemChanged!=null&&this.form.itemChanged(this,a);if(this.implicitSave||this.form.implicitSave){var b=this;this.awaitingImplicitSave=true;this.fireOnPause("fiImplicitSave",function(){b.awaitingImplicitSave&&b.form.performImplicitSave(b,true)},this.form.implicitSaveDelay)}}},
isc.A.updateAppearance=function(a){if(this.valueIcons||this.getValueIcon)this.$17j(a)},isc.A.getValue=function(){if(this._value!==void 0)return this._value;return this.form.getSavedItemValue(this)},isc.A.getElementValue=function(){if(this.$66u)return null;var a=this.getDataElement();if(!a)return null;return a.value},isc.A.resetValue=function(){this.setValue(this.form.$10s[this.getFieldName()])},isc.A.shouldSubmitValue=function(){return this.form.$11q()},isc.A.isEditable=function(){return true},isc.A.getCriteriaFieldName=
function(){return this.criteriaField||this.includeFrom||this.getFieldName()},isc.A.getCriteriaValue=function(){return this.getValue()},isc.A.hasAdvancedCriteria=function(){return this.operator!=null},isc.A.getOperator=function(a){if(this.operator)a=this.operator;else if(this.valueMap||this.optionDataSource||isc.SimpleType.inheritsFrom(this.type,"enum")||isc.SimpleType.inheritsFrom(this.type,"boolean"))a="equals";else{if(a==null)a="substring";a=isc.DataSource.getCriteriaOperator(null,a)}return a},
isc.A.canEditCriterion=function(a){if(a.fieldName!=null&&a.fieldName==this.getCriteriaFieldName()&&a.operator==this.getOperator())return true;return false},isc.A.getCriterion=function(a){var b=this.getCriteriaValue();if(!(b==null||isc.is.emptyString(b))){if(isc.isAn.Array(b))if(b.length==0||b.contains(isc.emptyString))return;a=this.getOperator(a);return{fieldName:this.getCriteriaFieldName(),operator:a,value:b}}},isc.A.setCriterion=function(a){this.setValue(a.value)},isc.A.clearErrors=function(){var a=
this.getFieldName();a&&this.form.clearFieldErrors(a,true)},isc.A.setError=function(a){var b=this.getFieldName();b&&this.form.setError(b,a)},isc.A.hasErrors=function(){if(this.parentItem!=null)return this.parentItem.hasErrors();var a=this.getFieldName();if(a&&this.form)return this.form.hasFieldErrors(a);if((a=this.getDataPath())&&this.form)return this.form.hasFieldErrors(a);return false},isc.A.validate=function(){var a=this.hasErrors(),b=[],c=null,d=false,e=this.getValue(),f=isc.addProperties({},this.form.getValues());
f=this.form.validateFieldAndDependencies(this,this.validators,e,f,{unknownErrorMessage:this.form.unknownErrorMessage});e=this.name;if(e==null)e=this.getDataPath();e==null&&this.logWarn("item has no specified name or dataPath - unable to meaningfully store validation errors.");if(f!=null){f.resultingValue!=null&&this.setValue(f.resultingValue);if(!f.valid){b=f.errors[e];if(b==null)b=[]}d=f.stopOnError;c=f.errors}f=false;if(b.length>0||a){b.length>0?this.form.setFieldErrors(e,b,false):this.form.clearFieldErrors(e,
false);f=true;d&&this.focusInItem()}for(var g in c)if(g!=e){a=c[g];if(a!=null&&!isc.isAn.emptyObject(a)||this.form.hasFieldErrors(g)){this.form.setFieldErrors(g,a,false);f=true}}f&&this.redraw();return b.length==0},isc.A.setRequired=function(a){if(a!=this.required){this.required=a;if(this.form!=null){a?this.addValidator(this.form.getRequiredValidator(this)):this.removeValidator({type:"required"});this.redraw()}}},isc.A.addValidator=function(a){if(this.validators==null)this.validators=[];else if(!isc.isAn.Array(this.validators))this.validators=
[this.validators];if(this.validators.$69)this.validators=this.validators.duplicate();this.validators.add(a)},isc.A.removeValidator=function(a){if(this.validators!=null){if(!isc.isAn.Array(this.validators))this.validators=[this.validators];if(this.validators.$69)this.validators=this.validators.duplicate();this.validators.remove(this.validators.find(a))}},isc.A.setAutoComplete=function(a){this.autoComplete=a;this.$10q()},isc.A.$10q=function(){var a=this.$17h();if(isc.Browser.isIE&&this.hasDataElement()){var b=
this.getDataElement();if(b)b.autoComplete=a=="native"?"":"off"}},isc.A.$17h=function(){if(this.autoComplete!=null)return this.autoComplete;return this.form.autoComplete},isc.A.autoCompleteEnabled=function(){if(isc.Browser.isSafari)return false;return this.$17h()=="smart"},isc.A.uniqueMatchOnly=function(){if(this.uniqueMatch!=null)return this.uniqueMatch;return this.form.uniqueMatch},isc.A.getCandidates=function(){var a=this.autoCompleteCandidates;if(a==null){var b=this.getValueMap();if(b!=null)a=
isc.isAn.Array(b)?b:isc.getValues(b);else if(this.form.grid){a=this.form.grid.data;a=isc.isA.ResultSet!=null&&isc.isA.ResultSet(a)?a.getValuesList(this.name):a.getProperty(this.name)}}if(a!=null)a=a.getUniqueItems();return a},isc.A.getCompletion=function(a){if(a!=null){var b=this.getCandidates();if(!(b==null||b.length==0)){a=a.toUpperCase();for(var c=this.uniqueMatchOnly(),d,e=0;e<b.length;e++){var f=b[e],g=f!=null?f.toUpperCase():null;if(g==a)return null;if(isc.startsWith(g,a)){if(!c)return f;if(d!=
null)return null;d=f}}return d}}},isc.A.showCompletion=function(a){this.clearCompletion();if(!(!this.canAutoComplete||!this.hasDataElement()||!this.autoCompleteEnabled())){var b=isc.EH.lastEvent.keyName;if(!(b=="Backspace"||b=="Delete")){b=this.getCompletion(a);if(b!=null){this.form.$106();this.form.$11b(this);this.setElementValue(a+b.substring(a.length));this.$17o=a;this.$17k=b;this.setSelectionRange(a.length,b.length)}}}},isc.A.$17l=function(a){var b=this.$17k,c=isc.EH.lastEvent.keyName;if(this.$14m[c]==
true){this.acceptCompletion(c==this.$10j);return b}b=b.substring(this.$17o.length);if(!a.endsWith(b)){this.clearCompletion();return a}if(this.getSelectedText()==b)return this.$17o;this.clearCompletion();return a},isc.A.clearCompletion=function(){delete this.$17k;delete this.$17o},isc.A.acceptCompletion=function(a){var b=this.$17k;if(b){if(this.autoCompleteEnabled()){var c=a?[b.length,b.length]:null;if(this.getElementValue()!=b){a||(c=this.getSelectionRange());this.setElementValue(b)}this.hasFocus&&
c&&this.setSelectionRange(c[0],c[1])}this.clearCompletion()}},isc.A.setSelectionRange=function(a,b){if(isc.isA.TextItem(this)||isc.isA.TextAreaItem(this))if(this.isDrawn()){isc.isA.Number(a)||(a=0);isc.isA.Number(b)||(b=0);if(a>b){var c=b;b=a;a=c}c=this.getDataElement();if(c!=null)if(isc.Browser.isIE){c=c.createTextRange();c.collapse(true);c.moveStart(this.$14n,a);c.moveEnd(this.$14n,b-a);c.select()}else{c.focus();c.setSelectionRange(a,b)}}},isc.A.selectValue=function(){var a=this.getElementValue();
this.setSelectionRange(0,isc.isA.String(a)?a.length:0)},isc.A.deselectValue=function(a){if(this.hasFocus)if(a)this.setSelectionRange(0,0);else{a=this.getElementValue();a=isc.isA.String(a)?a.length:0;this.setSelectionRange(a,a)}},isc.A.getSelectionRange=function(a){if(isc.isA.TextItem(this)||isc.isA.TextAreaItem(this))if(!isc.isA.UploadItem(this))if(this.hasFocus){var b=this.getDataElement();if(b!=null)if(isc.Browser.isIE){var c=[],d=this.$17p();b=b.createTextRange();if(!(b==null||d==null)){if(isc.isA.TextAreaItem(this)){if(!this.supportsSelectionRange)return null;
c=b.text.length;if(c==d.text.length)return[0,c];else if(a)if(b.offsetLeft==d.offsetLeft&&b.offsetTop==d.offsetTop)return[0,d.text.length];else{b.collapse(false);if(b.offsetLeft==d.offsetLeft&&b.offsetTop==d.offsetTop)return[c,c]}else for(a=0;a<=c;a++){if(b.offsetLeft==d.offsetLeft&&b.offsetTop==d.offsetTop)return[a,a+d.text.length];b.moveStart(this.$14n)}return null}b.compareEndPoints(this.$14o,d)!=0&&b.setEndPoint(this.$14o,d);c[1]=b.text.length;b.setEndPoint(this.$14p,d);c[0]=b.text.length;return c}}else if(isc.Browser.isMoz||
isc.Browser.isSafari)return[b.selectionStart,b.selectionEnd]}},isc.A.getSelectedText=function(){if(isc.isA.TextItem(this)||isc.isA.TextAreaItem(this))if(isc.Browser.isIE){var a=this.$17p();if(a)return a.text}else if(isc.Browser.isMoz||isc.Browser.isSafari){a=this.getElement();if(a!=null)return a.value.substring(a.selectionStart,a.selectionEnd)}},isc.A.$17p=function(){if(isc.Browser.isIE){if(isc.isA.TextAreaItem(this)&&!this.supportsSelectionRange)return null;var a=this.getDocument().selection;a=a!=
null?a.createRange():null;if(a!=null&&a.parentElement().id==this.getDataElementId())return a;return null}},isc.A.rememberSelection=function(){if(this.isDrawn())if(isc.isA.TextItem(this)||isc.isA.TextAreaItem(this)){var a=this.getElementValue();if(a!=isc.emptyString){this.$17q=a;if(a=this.getSelectionRange()){this.$17r=a[0];this.$17s=a[1]}}}},isc.A.resetToLastSelection=function(a){if(!(!this.isDrawn()||this.$17r==null)){var b=this.getElementValue(),c=this.$17q;if(a)if(this.$17r==0&&this.$17s==c.length){a=
true;this.$17s=b.length}else a=b.toLowerCase()==c.toLowerCase();else a=b==c;a&&this.setSelectionRange(this.$17r,this.$17s);delete this.$17r;delete this.$17s;delete this.$17q}},isc.A.handleChange=function(a,b){if(this.$17m&&this.compareValues(a,this.$17n))return true;this.$17m=true;var c=this.$17n=a;if(isc.isA.Date(c))c=c.duplicate();else if(isc.isAn.Array(c))c=c.duplicate();else if(isc.isAn.Object(c))c=isc.addProperties({},c);if(this.transformInput)a=this.transformInput(this.form,this,a,b);var d=
this.hasErrors(),e=false,f=[],g=null,h;if(this.length!=null&&isc.isA.String(a)&&a.length>this.length)a=a.substring(0,this.length);var i=isc.addProperties({},this.form.values);i=this.form.validateFieldAndDependencies(this,this.validators,a,i,{unknownErrorMessage:this.form.unknownErrorMessage,changing:true});if(i!=null){e=!i.valid;if(i.resultingValue!=null)h=i.resultingValue;if(!i.valid){f=i.errors[this.name];if(f==null)f=[]}g=i.errors}if(e&&h===void 0&&this.$65v()){h=b;if(b==null)h=null}if(h!==void 0)a=
h;if(e){this.clearErrors();this.setError(f)}else i!=null&&d&&this.clearErrors();this.$17g=false;if(!e||this.changeOnError){if(this.change!=null)if(this.change(this.form,this,a,b)==false){a=b;e=true}if(this.destroyed)return;if(!e&&this.form&&this.form.itemChange!=null)if(this.form.itemChange(this,a,b)==false){a=b;e=true}}h=this.$17g;c=!this.compareValues(a,c);if((e||c)&&!h){this.setValue(a);e&&this.maintainSelectionOnTransform&&this.$17t()}if(this.$17g)this.$17n=this._value;if(this.redrawOnChange||
f.length>0||f.length==0&&i!=null&&d)this.redraw();for(var j in g)j!=this.name&&this.form.setFieldErrors(j,g[j],true);!e&&this.hasFocus&&this.showCompletion(a);delete this.$17m;return!e},isc.A.$65v=function(){return this.rejectInvalidValueOnChange!=null?this.rejectInvalidValueOnChange:this.form.rejectInvalidValueOnChange},isc.A.compareValues=function(a,b){return isc.DynamicForm.compareValues(a,b)},isc.A.elementChanged=function(){isc.EH.$h1("ICHG");this.logDebug("native change");if(isc.Log.supportsOnError)this.updateValue();
else try{this.updateValue()}catch(a){isc.Log.$am(a)}isc.EH.$h2();return true},isc.A.$680=function(a,b,c){this.logIsDebugEnabled("inactiveEditorHTML")&&this.logDebug("handling inactive editor event:"+a+", inactive context:"+this.echo(b),"inactiveEditorHTML");var d=this.$683[a];if(d==null)d=this.$683[a]="inactiveEditor"+a.substring(0,1).toUpperCase()+a.substring(1);if(this[d]!=null)return this[d](b,c)},isc.A.$17u=function(a){this.convertToMethod(a);return this[a](this.form,this,isc.EH.lastEvent)},isc.A.handleTitleClick=
function(){if(!this.isDisabled()){if(this.editingOn){this.editClick();this.handleClick();return false}return this.$17u("titleClick")}},isc.A.handleTitleDoubleClick=function(){if(!this.isDisabled())return this.$17u("titleDoubleClick")},isc.A.handleClick=function(){if(this.editingOn){isc.EditContext.selectCanvasOrFormItem(this,true);return false}if(!this.isDisabled())return this.$17u("click")},isc.A.handleDoubleClick=function(){if(!this.isDisabled())return this.$17u("doubleClick")},isc.A.handleCellClick=
function(){if(!this.isDisabled())return this.$17u("cellClick")},isc.A.handleCellDoubleClick=function(){if(!this.isDisabled())return this.$17u("cellDoubleClick")},isc.A.$12z=function(){return this.form.elementChanged(this.getID())},isc.A.handleMouseMove=function(){if(!this.isDisabled()&&(this.showValueIconOver||this.showValueIconDown)){var a=isc.EH.lastEvent.itemInfo,b=this.$15t;if(a.overElement||a.overTextBox||a.overControlTable)if(this.$j6&&this.showValueIconDown){if(b!=this.$13v){this.$15t=this.$13v;
this.$17j()}}else{if(this.showValueIconOver&&b!=this.$13u){this.$15t=this.$13u;this.$17j()}}else{a=this.showValueIconFocused&&this.showValueIconOver&&this.hasFocus?this.$13u:null;if(b!=a){this.$15t=a;this.$17j()}}}if(this.$17u("mouseMove")==false)return false},isc.A.handleMouseOver=function(){isc.Hover.setAction(this,this.$wb,null,this.$17v());return this.$17u("mouseOver")},isc.A.handleMouseOut=function(){var a=this.showValueIconFocused&&this.showValueIconOver&&this.hasFocus?this.$13u:null;if(this.$15t!=
a){this.$15t=a;this.$17j()}this.stopHover();return this.$17u("mouseOut")},isc.A.handleMouseDown=function(){var a=isc.EH.lastEvent.itemInfo;if(a.inactiveContext!=null)return this.form.bubbleInactiveEditorEvent(this,"mouseDown",a);if(!this.isDisabled()&&this.showValueIconDown)if(a.overElement||a.overTextBox||a.overControlTable){this.$15t=this.$13v;this.$j6=true;isc.Page.setEvent(isc.EH.MOUSE_UP,this,isc.Page.FIRE_ONCE,"$17w");this.$17j()}if(this.mouseDown)return this.$17u("mouseDown")},isc.A.stopHover=
function(){isc.Hover.clear()},isc.A.$17w=function(){this.$j6=null;if(this.$15t==this.$13v){this.$15t=this.showValueIconOver?this.$13u:null;this.$17j()}},isc.A.handleMouseStillDown=function(){if(this.mouseStillDown)return this.$17u("mouseStillDown")},isc.A.$17v=function(){return this.hoverDelay!=null?this.hoverDelay:this.form.itemHoverDelay},isc.A.handleTitleMove=function(){return this.$17u("titleMove")},isc.A.handleTitleOver=function(){isc.Hover.setAction(this,this.$17x,null,this.$17v());return this.$17u("titleOver")},
isc.A.handleTitleOut=function(){this.stopHover();return this.$17u("titleOut")},isc.A.$121=function(a,b){var c=this.getIcon(a);if(c!=null){window.status=c.prompt!=null?c.prompt:this.iconPrompt;if(this.$54o(c))this.$164(c,false,true);else this.$165(c)&&this.$164(c,true)}return this.$12v(b,this)},isc.A.$123=function(a,b){var c=this.getIcon(a);if(c!=null){window.status="";var d=this.$54o(c),e=c.showFocusedWithItem!=false,f=this.showIconsOnFocus;if(d&&(!f||!e))this.$164(c,false,false);this.$165(c)&&this.$164(c,
false,false)}return this.$12x(b,this)},isc.A.$113=function(a){if(a==this.getErrorIconId())return this.$17y();a=this.getIcon(a);if(a!=null){this.$165(a)&&this.$164(a,true);this.$17z=a;isc.Hover.setAction(this,this.$170,null,this.$17v());window.status=a.prompt!=null?a.prompt:this.iconPrompt;return true}},isc.A.$114=function(a){if(a==this.getErrorIconId())return this.$171();a=this.getIcon(a);if(a!=null){window.status="";this.$165(a)&&this.$164(a,false);delete this.$17z;isc.Hover.setAction(this,this.$wb,
null,this.$17v());return true}},isc.A.$116=function(a){a=this.getIcon(a);if(a!=null)if(!this.iconIsDisabled(a)){if(a.click!=null){isc.isA.Function(a.click)||isc.Func.replaceWithMethod(a,"click","form,item,icon");if(a.click(this.form,this,a)==false)return false}this.iconClick&&this.iconClick(this.form,this,a)}},isc.A.$172=function(a){if(a=this.getIcon(a)){var b=isc.EH.getKey(),c=isc.EH.getKeyEventCharacter();if(a.keyPress){isc.isA.Function(a.keyPress)||isc.Func.replaceWithMethod(a,"keyPress","keyName, character,form,item,icon");
if(a.keyPress(b,c,this.form,this,a)==false)return false}this.iconKeyPress&&this.iconKeyPress(b,c,this.form,this,a);if(b==this.$10j)if(this.$116(a)==false)return false}},isc.A.$17y=function(){isc.Hover.setAction(this,this.$79v,null,this.$17v())},isc.A.$171=function(){isc.Hover.setAction(this,this.$wb,null,this.$17v())},isc.A.$79v=function(){if(this.itemHover&&this.itemHover(this,this.form)==false)return false;var a=this.shouldShowErrorIconPrompt()?isc.FormItem.getErrorPromptString(this.$79u):isc.emptyString;
a&&!isc.is.emptyString(a)?isc.Hover.show(a,this.form.$wc(this)):isc.Hover.setAction(this,this.$wb,null,this.$17v())},isc.A.$wb=function(){if(this.itemHover&&this.itemHover(this,this.form)==false)return false;this.form.$119(this,this.itemHoverHTML?this.itemHoverHTML(this,this.form):this.form.itemHoverHTML(this,this.form))},isc.A.$17x=function(){if(this.titleHover&&this.titleHover(this,this.form)==false)return false;this.form.$119(this,this.titleHoverHTML?this.titleHoverHTML(this,this.form):this.form.titleHoverHTML(this,
this.form))},isc.A.$170=function(){if(this.itemHover&&this.itemHover(this,this.form)==false)return false;var a=this.getIconPrompt(this.$17z);a&&!isc.is.emptyString(a)?isc.Hover.show(a,this.form.$wc(this)):isc.Hover.setAction(this,this.$wb,null,this.$17v())},isc.A.getGlobalTabIndex=function(){if(this.globalTabIndex==null)if(this.tabIndex==-1)this.globalTabIndex=-1;else{var a=this.form.getTabIndex(),b=this.getTabIndex();if(a==-1)return-1;return a+b}return this.globalTabIndex},isc.A.getTabIndex=function(){if(this.tabIndex!=
null)return this.tabIndex;if(this.globalTabIndex||!this.$kk())return null;this.$10p==null&&this.form.$10o();return this.$10p},isc.A.setGlobalTabIndex=function(a){this.globalTabIndex=a;this.$173(a)},isc.A.setTabIndex=function(a){this.globalTabIndex=null;this.tabIndex=a;this.$173(a)},isc.A.$154=function(a){if(this.isInactiveHTML()||!a&&this.isDisabled())return-1;if(this.$174!=null)return this.$174;return this.getGlobalTabIndex()},isc.A.$173=function(a){this.$174=a;if(!(!this.$kk()||!this.isVisible()||
!this.isDrawn()))if(this.getFocusElement()!=null){isc.FormItem.setElementTabIndex(this.getFocusElement(),a);this.$175()}else this.redraw("set tab index")},isc.A.updateTabIndex=function(){if(!(!this.$kk()||!this.isVisible()||!this.isDrawn()||this.isDisabled())){var a=this.getGlobalTabIndex();this.$174!=a&&this.$173(a)}},isc.A.$16p=function(a){if(a.tabIndex==-1||this.iconIsDisabled(a))return-1;return this.$154(true)},isc.A.$175=function(){var a=[];a.addList(this.icons);this.showPickerIcon&&a.add(this.getPickerIcon());
for(var b=0;b<a.length;b++){var c=a[b];if(!(!c||c.imgOnly)){var d=this.$16g(c);d!=null&&isc.FormItem.setElementTabIndex(d,this.$16p(c))}}},isc.A.setDisabled=function(a){var b=this.isDisabled();this.disabled=a;a=this.isDisabled();b!=a&&this.updateDisabled()},isc.A.setShowDisabled=function(a){this.showDisabled=a;this.updateDisabled()},isc.A.updateDisabled=function(){this.$176(!this.isDisabled());this.$177();this.$17j();this.showDisabled&&this.updateState()},isc.A.setEnabled=function(a){return this.setDisabled(!a)},
isc.A.isDisabled=function(){var a=this.disabled;if(!a)if(this.parentItem!=null)a=this.parentItem.isDisabled();else{a=this.form.isDisabled();if(!a&&this.containerWidget!=this.form)a=this.containerWidget.isDisabled()}return a},isc.A.enable=function(){this.setDisabled(false)},isc.A.disable=function(){this.setDisabled(true)},isc.A.$176=function(a){if(this.hasDataElement()){var b=this.getDataElement();if(b){b.disabled=!a;b.tabIndex=this.$154();if(this.useDisabledEventMask()){var c=this.$43b();if(c&&(!c.getAttribute||
c.getAttribute("isDisabledEventMask")!="true"))c=null;if(a&&c)isc.Element.clear(c);else!a&&!c&&isc.Element.insertAdjacentHTML(b,"beforeBegin",this.$148())}}}else if(this.$kk())if(b=this.getFocusElement())b.tabIndex=this.$154()},isc.A.$177=function(){this.showPickerIcon&&this.setIconEnabled(this.getPickerIcon());if(!(!this.icons||this.icons.length<1))for(var a=0;a<this.icons.length;a++)this.setIconEnabled(this.icons[a])},isc.A.iconIsDisabled=function(a){if(a=this.getIcon(a)){if(this.containerWidget&&
this.containerWidget.isDisabled())return true;if(a.neverDisable)return false;return this.isDisabled()}},isc.A.$kk=function(){if(this.canFocus!=null)return this.canFocus;return this.hasDataElement()},isc.A.getCanFocus=function(){return this.$kk()},isc.A.focusInItem=function(){var a=this.isVisible()&&this.$kk()&&!this.isDisabled(),b=a?this.getFocusElement():null;if(a&&b){if(b.focus){a=this.getActiveElement();if(!isc.Browser.isIE||a!=b){this.logInfo("about to call element.focus() "+isc.EH.$lb()+(this.logIsDebugEnabled("traceFocus")?
this.getStackTrace():""),"nativeFocus");isc.FormItem.$12n(this);isc.EventHandler.$lg=this;b.focus()}else this.logInfo("element already focused, not focus()ing","nativeFocus");if(isc.Browser.isIE){isc.EH.$vm=this;this.$167=b}}else this.logInfo("can't call element focus, no element","nativeFocus");a=this.selectOnFocus;if(a==null&&this.form)a=this.form.selectOnFocus;a&&b.select&&b.select()}},isc.A.blurItem=function(){if(this.isVisible()&&(this.hasFocus||isc.EH.$vm==this)){var a=this.$166();if(a&&a.blur){this.logInfo("about to call element blur"+
isc.EH.$lb()+(this.logIsDebugEnabled("traceBlur")?this.getStackTrace():""),"nativeFocus");isc.EH.$ld=this;a.blur()}else this.logInfo("can't call element blur, no element","nativeFocus")}},isc.A.focusInIcon=function(a){a=this.getIcon(a);if(!(a==null||a.imgOnly)){a=this.$16g(a);a!=null&&a.focus()}},isc.A.blurIcon=function(a){if(isc.isA.String(a))a=this.getIcon(a);if(!(a==null||!this.icons||!this.icons.contains(a)||a.imgOnly)){a=this.$16g(a);a!=null&&a.blur()}},isc.A.$12v=function(a,b){isc.EH.$lg==this&&
delete isc.EH.$lg;isc.EH.$la(this,true);if(isc.Browser.isMoz&&!this.isVisible()){this.logWarn("calling element.blur() to correct focus in hidden item: "+this,"nativeFocus");a.blur()}else{this.hasFocus=true;this.$167=a;return this.form.elementFocus(a,b)}},isc.A.$12x=function(a,b){isc.EH.$ld==this&&delete isc.EH.$ld;if(this.$17i!=null){isc.Timer.clearTimeout(this.$17i);this.$14r()}isc.EH.$la(this);this.hasFocus=false;delete this.$167;return this.form.elementBlur(a,b)},isc.A.elementFocus=function(a){this.prompt&&
this.form.showPrompt(this.prompt);if(this.showIconsOnFocus&&this.showIcons)this.showAllIcons(true);else this.icons&&this.updateIconsForFocus(this.icons,true);if(this.showFocusedPickerIcon&&this.showPickerIcon){var b=this.getPickerIcon();b&&this.updateIconsForFocus(b,true)}this.showFocused&&this.updateState();if(this.showValueIconFocused&&this.showValueIconOver&&this.$15t==null){this.$15t=this.$13u;this.$17j()}if(!a){if(this.grid&&this.grid.blockOnFieldBusy(this)||!this.grid&&this.form.blockOnFieldBusy(this))return false;
this.handleEditorEnter();if(this.focus){this.convertToMethod("focus");return this.focus(this.form,this)}return true}},isc.A.updateIconsForFocus=function(a,b){if(a!=null){b=!!b;isc.isAn.Array(a)||(a=[a]);for(var c=0;c<a.length;c++)if(this.$54o(a[c],true)){var d=this.$16v(a[c]);d!=null&&isc.Canvas.$wg(d,this.getIconURL(a[c],false,null,b))}}},isc.A.elementBlur=function(){this.prompt&&this.form.clearPrompt();if(this.showIconsOnFocus&&this.showIcons){if(this.$161==null)this.$161=this.delayCall("hideAllIcons",
[],0)}else if(this.hideIconsOnKeypress&&this.showIcons)this.showAllIcons();else this.icons&&this.updateIconsForFocus(this.icons,false);if(this.showFocusedPickerIcon&&this.showPickerIcon){var a=this.getPickerIcon();a&&this.updateIconsForFocus(a,false)}this.showFocused&&this.updateState();if(this.$15t==this.$13u){this.$15t=null;this.$17j()}this.acceptCompletion();this.handleEditorExit();if(this.blur){this.convertToMethod("blur");return this.blur(this.form,this)}return true},isc.A.$11s=function(a){var b=
this.items,c=this.icons;if(this.$150!=null){c=[this.$150];c.addList(this.icons)}if((b==null||b.length==0)&&(c==null||c.length==0))return false;var d=this.getFocusIconIndex(true),e;if(d==null){var f=isc.EventHandler.lastEvent.keyTarget;if(f==this)e=0;else if(b)e=b.indexOf(f)}if((e==null||e==-1)&&d==null)return false;if(a){if(e!=null&&b!=null)for(;e<b.length-1;){e+=1;a=b[e];if(a.$kk()){a.focusInItem();return true}}if(d==null)d=-1;if(this.canTabToIcons!=false&&this.showIcons&&c!=null)for(;d<c.length-
1;){d+=1;a=c[d];if(this.$16f(a)&&!a.imgOnly&&a.tabIndex!=-1){this.focusInIcon(a);return true}}}else{if(this.canTabToIcons!=false&&d!=null)for(;d>0;){d-=1;a=c[d];if(this.$16f(a)&&!this.imgOnly&&a.tabIndex!=-1){this.focusInIcon(a);return true}}if(e==null)e=b!=null?b.length:1;for(;e>0;){e-=1;a=b==null?this:b[e];if(a.$kk()){a.focusInItem();return true}}}return false},isc.A.getFocusIconIndex=function(a){var b=this.$166();if(a&&this.$150!=null){a=[this.$150];a.addList(this.icons)}else a=this.icons;if(b==
null||a==null||a.length==0)return null;for(var c=0;c<a.length;c++)if(this.$16g(a[c])==b)return c;return null},isc.A.$kr=function(a,b){if(!b.overTitle){if(b.overIcon)return false;if(a==null)a=isc.EH.lastEvent;if(a.nativeTarget&&a.nativeTarget.tagName.toLowerCase()==this.$54n)return false;return this.canSelectText!=false}},isc.A.handleEditorExit=function(){if(this.$178){this.$178=null;var a=this.getValue();if(this.validateOnExit||this.form.validateOnExit){if(this.form.isNewRecord()||!this.compareValues(a,
this.$75h))this.validate();this.$75h=null}if((this.implicitSave||this.form.implicitSave)&&this.awaitingImplicitSave)this.form.performImplicitSave(this,false);this.editorExit&&this.editorExit(this.form,this,a)}},isc.A.handleEditorEnter=function(){if(!this.$178){this.$178=true;var a=this.getValue();if(this.validateOnExit||this.form.validateOnExit)this.$75h=a;this.editorEnter&&this.editorEnter(this.form,this,a)}},isc.A.$179=function(){var a=this;this.$18a=isc.Page.setEvent(isc.EH.MOUSE_UP,function(){a.destroyed||
a.$18b()})},isc.A.$18b=function(){isc.Page.clearEvent(isc.EH.MOUSE_UP,this.$18a);delete this.$18a;this.getActiveElement()==document.body&&this.focusInItem()},isc.A.$429=function(){return false},isc.A.$43g=function(){isc.EH.$h1("INP");if(this.changeOnKeypress&&!this.mask)if(isc.Log.supportsOnError)this.updateValue();else try{this.updateValue()}catch(a){isc.Log.$am(a)}isc.EH.$h2()},isc.A.$43a=function(){this.changeOnKeypress&&this.$18c()});isc.B.push(isc.A.handleKeyPress=function(a){if(this.form){var b=
this.form.$ne(a);if(b.overIcon){if(this.$172(b.overIcon)==false)return false}else{!this.$429()&&this.changeOnKeypress&&this.$18c();var c=a.keyName;this.hideIconsOnKeypress&&!this.$16y&&c!=this.$jf&&this.hideAllIcons()}return this.$18d(this,this.form,c,a.characterValue)}},isc.A.$18d=function(a,b,c,d){if(this.keyPress!=null&&this.keyPress(a,b,c,d)==false)return false;if(!this.form)return false;if(this.parentItem==null&&this.form.itemKeyPress!=null)return this.form.itemKeyPress(a,c,d)},isc.A.$18c=function(){if(this.$17i!=
null){isc.Timer.clearTimeout(this.$17i);this.$14r()}this.maintainSelectionOnTransform&&this.$17h()!=this.$14l&&this.$18e();this.$17i=isc.Timer.setTimeout({target:this,methodName:this.$14q},0)},isc.A.$14r=function(){delete this.$17i;this.updateValue();this.$18f()},isc.A.$18e=function(){if(this.$18g==null){var a=this.getSelectionRange(true);if(a){this.$18g=a[0];this.$18h=a[1]}}},isc.A.$17t=function(){this.$18g!=null&&this.setSelectionRange(this.$18g,this.$18h)},isc.A.$18f=function(){delete this.$18g;
delete this.$18h},isc.A.handleKeyDown=function(a){this.dirtyOnKeyDown&&this.$18i();var b=this.form;a=a.keyName;if(this.keyDown!=null&&this.keyDown(this,b,a)==false)return false},isc.A.$10v=function(){return this.$18j==true},isc.A.$18i=function(){this.$18j=true},isc.A.$10x=function(){this.$18j=false},isc.A.handleKeyUp=function(a){if(this.form){var b=this.form;a=a.keyName;if(this.keyUp!=null&&this.keyUp(this,b,a)==false)return false}},isc.A.getSerializeableFields=function(a){a.addList(["form"]);return this.Super("getSerializeableFields",
arguments)},isc.A.getLeft=function(){var a=this.isDrawn()?this.getOuterElement():null;if(a==null){a="getLeft() Unable to determine position for "+(this.name==null?"this item ":this.name)+". ";a+=this.isDrawn()?"This method is not supported by items of type "+this.getClass():"Position cannot be determined before the element is drawn";a+=" - returning zero.";this.form.logWarn(a);return 0}return this.$18k(a)},isc.A.getTitleLeft=function(){var a=this.isDrawn()&&this.form?isc.Element.get(this.form.$427(this)):
null;if(a==null){a="getTitleLeft() Unable to determine position for "+(this.name==null?"this item ":this.name)+". ";a+=this.isDrawn()?"This method is not supported by items of type "+this.getClass():"Position cannot be determined before the element is drawn";a+=" - returning zero.";this.form.logWarn(a);return 0}return this.$18k(a)},isc.A.$18k=function(a){var b=a.offsetParent,c=this.containerWidget.getHandle(),d=c.offsetParent;for(a=isc.Element.getOffsetLeft(a);b&&b!=c&&b!=d;){a+=isc.Element.getOffsetLeft(b);
a-=b.scrollLeft||0;var e=isc.Browser.isIE?parseInt(b.currentStyle.borderLeftWidth):parseInt(isc.Element.getComputedStyleAttribute(b,"borderLeftWidth"));if(isc.isA.Number(e))a+=e;e=isc.Browser.isIE?parseInt(b.currentStyle.marginLeft):parseInt(isc.Element.getComputedStyleAttribute(b,"marginLeft"));if(isc.isA.Number(e))a+=e;b=b.offsetParent}if(b==d)a-=isc.Element.getOffsetLeft(c);return a},isc.A.$145=function(a){return a!=null&&(this.icons&&this.icons.contains(a)||this.showPickerIcon&&this.getPickerIcon()==
a)},isc.A.getIconLeft=function(a){if(a==null&&this.icons!=null&&this.icons.getLength()>0)a=this.icons[0];else if(!this.$145(a)){this.logWarn("getIconLeft() passed invalid icon:"+isc.Log.echoAll(a));return null}a=this.$16v(a);if(a==null){this.logWarn("getIconLeft() unable to return position of icon - this icon is not currently drawn into the page. Returning null");return null}return isc.Element.getLeftOffset(a,this.containerWidget.getClipHandle())},isc.A.getTop=function(){var a=this.isDrawn()?this.getOuterElement():
null;if(a==null){a="getTop() Unable to determine position for "+(this.name==null?"this item ":this.name)+". ";a+=this.isDrawn()?"This method is not supported by items of type "+this.getClass():"Position cannot be determined before the element is drawn";a+=" - returning zero.";this.form.logWarn(a);return 0}return this.$18l(a)},isc.A.getTitleTop=function(){var a=this.isDrawn()&&this.form?isc.Element.get(this.form.$427(this)):null;if(a==null){a="getTitleTop() Unable to determine position for "+(this.name==
null?"this item ":this.name)+". ";a+=this.isDrawn()?"This method is not supported by items of type "+this.getClass():"Position cannot be determined before the element is drawn";a+=" - returning zero.";this.form.logWarn(a);return 0}return this.$18l(a)},isc.A.$18l=function(a){var b=this.containerWidget.getHandle(),c=b.offsetParent,d=a.offsetParent;for(a=isc.Element.getOffsetTop(a);d&&d!=b&&d!=c;){a+=isc.Element.getOffsetTop(d);a-=d.scrollTop||0;var e=isc.Browser.isMoz?0:isc.Browser.isIE?parseInt(d.currentStyle.borderTopWidth):
parseInt(isc.Element.getComputedStyleAttribute(d,"borderTopWidth"));if(isc.isA.Number(e))a+=e;e=isc.Browser.isIE?parseInt(d.currentStyle.marginTop):parseInt(isc.Element.getComputedStyleAttribute(d,"marginTop"));if(isc.isA.Number(e))a+=e;d=d.offsetParent}if(d==c)a-=isc.Element.getOffsetTop(b);return a},isc.A.getIconTop=function(a){if(a==null&&this.icons!=null&&this.icons.getLength()>0)a=this.icons[0];else if(!this.$145(a)){this.logWarn("getIconTop() passed invalid icon:"+isc.Log.echoAll(a));return null}a=
this.$16v(a);if(a==null){this.logWarn("getIconTop() unable to return position of icon - this icon is not currently drawn into the page. Returning null");return null}return isc.Element.getTopOffset(a,this.containerWidget.getClipHandle())},isc.A.getPageLeft=function(){return this.getLeft()+(this.containerWidget.getPageLeft()+this.containerWidget.getLeftMargin()+this.containerWidget.getLeftBorderSize()-this.containerWidget.getScrollLeft())},isc.A.getPageTop=function(){return this.getTop()+(this.containerWidget.getPageTop()+
this.containerWidget.getTopMargin()+this.containerWidget.getTopBorderSize()-this.containerWidget.getScrollTop())},isc.A.getTitlePageLeft=function(){return this.getTitleLeft()+(this.containerWidget.getPageLeft()+this.containerWidget.getLeftMargin()+this.containerWidget.getLeftBorderSize()-this.containerWidget.getScrollLeft())},isc.A.getTitlePageTop=function(){return this.getTitleTop()+(this.containerWidget.getPageTop()+this.containerWidget.getTopMargin()+this.containerWidget.getTopBorderSize()-this.containerWidget.getScrollTop())},
isc.A.getIconRect=function(a){return[this.getIconLeft(a),this.getIconTop(a),this.getIconWidth(a),this.getIconHeight(a)]},isc.A.getIconPageRect=function(a){a=this.getIconRect(a);a[0]+=this.containerWidget.getPageLeft();a[1]+=this.containerWidget.getPageTop();return a},isc.A.propertyChanged=function(a){if(this.$14s[a]==true)this.$18m=true;this.$59q[a]==true&&this.updateState();if(a==this.$59r&&this.items)for(a=0;a<this.items.length;a++)this.items[a].updateState()},isc.A.doneSettingProperties=function(){if(this.$18m){var a=
this.form;a.items.$8j=null;a.markForRedraw()}delete this.$18m},isc.A.setEditMode=function(a,b,c){if(a==null)a=true;if(this.editingOn!=a){if(this.editingOn=a)this.editContext=b;this.editNode=c}},isc.A.editClick=function(){var a=this.getTitlePageLeft(),b=this.getVisibleTitleWidth(),c,d,e;c=this.getTitlePageTop();e=this.getTitleVisibleHeight();d=this.getVisibleHeight();isc.EditContext.manageTitleEditor(this,a,b,e==d?c:c+(e-d)/2,null)});isc.B._maxIndex=isc.C+393;isc.FormItem.registerStringMethods({showIf:"item,value,form,values",
defaultDynamicValue:"item,form,values",focus:"form,item",blur:"form,item",editorEnter:"form,item,value",editorExit:"form,item,value",click:"form,item",doubleClick:"form,item",iconClick:"form,item,icon",iconKeyPress:"keyName,character,form,item,icon",change:"form,item,value,oldValue",changed:"form,item,value",transformInput:"form,item,value,oldValue",cellClick:"form,item",cellDoubleClick:"form,item",titleClick:"form,item",titleDoubleClick:"form,item",mouseMove:"form,item",mouseOver:"form,item",mouseOut:"form,item",
titleMove:"form,item",titleOver:"form,item",titleOut:"form,item",itemHover:"item,form",titleHover:"item,form",keyPress:"item, form, keyName, characterValue",keyDown:"item,form,keyName",keyUp:"item,form,keyName",getValueIcon:"value",formSaved:"request,response,data",formatValue:"value,record,form,item",formatEditorValue:"value,record,form,item",parseEditorValue:"value,form,item"});isc.FormItem.getPrototype().toString=function(){return"["+this.Class+" ID:"+this.ID+(this.name!=null?" name:"+this.name:
"")+"]"};isc.ClassFactory.defineClass("FormItemFactory");isc.A=isc.FormItemFactory;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$gx="text";isc.A.$18n="Item";isc.A.$18o="TextareaItem";isc.A.$679="TextAreaItem";isc.A.$68a="DatetimeItem";isc.A.$68b="DateTimeItem";isc.A.$18p={};isc.B.push(isc.A.getItemClassName=function(a,b,c,d){if(b==null)b=a.editorType||a.formItemType||a.type;if(isc.isA.String(b)){var e=b.toLowerCase();if(e.contains(isc.DynamicForm.$12b)){if(e==
"selectother"||e=="selectotheritem"){e="select";if(!d)a.isSelectOther=true}if(e=="select"||e=="selectitem"){c=a.form||c;b=!isc.ListGrid||a.multiple&&a.multipleAppearance=="grid"||(c?c.useNativeSelectItems:false)?"NativeSelectItem":"SelectItem"}}if(e==isc.DynamicForm.$52w)b="MultiFileItem";else if(e==isc.DynamicForm.$12g)b="MultiUploadItem";else if(e==isc.DynamicForm.$51x.toLowerCase())b="SOAPUploadItem"}return b},isc.A.getItemClass=function(a){var b=isc.ClassFactory.getClass(a);if(!b||!isc.isA.FormItem(b)){if(a!=
null&&a.startsWith("T")){b=a.substring(1);b=isc.ClassFactory.getClass(b);if(isc.isA.FormItem(b))return b}if(a==null)a=this.$gx;b=this.$18p;var c=b[a];c||(c=b[a]=a.substring(0,1).toUpperCase()+a.substring(1)+this.$18n);if(c==this.$18o)c=this.$679;if(c==this.$68a)c=this.$68b;b=isc.ClassFactory.getClass(c)}return b},isc.A.makeItem=function(a){if(a==null)return null;if(isc.isA.FormItem(a))return a;var b=this.getItemClass(this.getItemClassName(a));if(!b){this.logWarn("makeItem(): type "+a.type+" not recognized, using TextItem");
b=isc.TextItem}return isc.ClassFactory.newInstance(b,a)});isc.B._maxIndex=isc.C+3;isc.ClassFactory.defineClass("Validator");isc.Validator.addProperties({});isc.A=isc.Validator;isc.A.notABoolean="Must be a true/false value";isc.A.notAString="Must be a string.";isc.A.notAnInteger="Must be a whole number.";isc.A.notADecimal="Must be a valid decimal.";isc.A.notADate="Must be a date.";isc.A.notATime="Must be a time.";isc.A.notAnIdentifier="Identifiers must start with a letter, underscore or $ character, and may contain only letters, numbers, underscores or $ characters.";
isc.A.notARegex="Must be a valid regular expression.";isc.A.notAColor="Must be a CSS color identifier.";isc.A.mustBeLessThan="Must be no more than ${max}";isc.A.mustBeGreaterThan="Must be at least ${min}";isc.A.mustBeLaterThan="Must be later than ${min.toShortDate()}";isc.A.mustBeEarlierThan="Must be earlier than ${max.toShortDate()}";isc.A.mustBeShorterThan="Must be no more than ${max} characters";isc.A.mustBeLongerThan="Must be at least ${min} characters";isc.A.mustBeExactLength="Must be exactly ${max} characters";
isc.A.notAMeasure='Must be a whole number, percentage, "*" or "auto"';isc.A.requiredField="Field is required";isc.A.notOneOf="Not a valid option";isc.A.notAFunction="Must be a function.";isc.A.$18q="true";isc.A.$18r="false";isc.A.$605=".";isc.A.READONLY="readOnly";isc.A.HIDDEN="hidden";isc.A.DISABLED="disabled";isc.A.$18s={isBoolean:function(a,b,c){if(c==null||isc.is.emptyString(c))return true;if(isc.isA.Boolean(c))return true;if(!b.errorMessage)b.defaultErrorMessage=isc.Validator.notABoolean;if(isc.isA.String(c)){a=
isc.Validator;b.resultingValue=c==a.$18q;return c==a.$18q||c==a.$18r}else if(isc.isA.Number(c)){b.resultingValue=c!=0;return c==0||c==1}b.resultingValue=!!c;return false},isString:function(a,b,c){if(c==null||isc.isA.String(c))return true;if(!b.errorMessage)b.defaultErrorMessage=isc.Validator.notAString;b.resultingValue=isc.iscToLocaleString(c);return true},isInteger:function(a,b,c){if(c==null||isc.is.emptyString(c))return true;if(!b.errorMessage)b.defaultErrorMessage=isc.Validator.notAnInteger;if(isNaN(c))return false;
a=parseInt(c,10);var d=c==a;if(b.convertToInteger){c=parseFloat(c);a=Math.round(c);b.resultingValue=a;return true}else if(d){b.resultingValue=a;return true}else return false},isFloat:function(a,b,c){if(c==null||isc.is.emptyString(c))return true;if(!b.errorMessage)b.defaultErrorMessage=isc.Validator.notADecimal;if(c==isc.Validator.$605)a="0.";else{a=parseFloat(c);if(isNaN(a)||a!=c)return false}b.resultingValue=a;return true},isDate:function(a,b,c){if(c==null||isc.is.emptyString(c)||isc.isA.Date(c))return true;
if(!b.errorMessage)b.defaultErrorMessage=isc.Validator.notADate;a=Date.parseSchemaDate(c);if(a==null)return false;b.resultingValue=a;return true},isTime:function(a,b,c){if(c==null||isc.is.emptyString(c)||isc.isA.Date(c))return true;if(!b.errorMessage)b.defaultErrorMessage=isc.Validator.notATime;a=isc.Time.parseInput(c,true,true);if(a==null)a=Date.parseSchemaDate(c);if(a!=null){b.resultingValue=a;return true}return false},isIdentifier:function(a,b,c){if(c==null||isc.is.emptyString(c))return true;if(!b.errorMessage)b.defaultErrorMessage=
isc.Validator.notAnIdentifier;return c.match(/^[a-zA-Z_\$][\w\$]*$/)!=null},isRegexp:function(a,b,c){if(c==null||isc.is.emptyString(c))return true;if(!b.errorMessage)b.defaultErrorMessage=isc.Validator.notARegex;if(typeof c=="object"&&c.constructor==RegExp)return true;if(isc.Browser.isDOM){if(!isc.Validator.$18t)isc.Validator.$18t=new Function("value","try{var regex=new RegExp(value)}catch(e){return false}return true");return isc.Validator.$18t(c)}else return true},isFunction:function(a,b,c){if(c==
null||isc.is.emptyString(c)||c==isc.Class.NO_OP||isc.isA.StringMethod(c))return true;if(!b.errorMessage)b.defaultErrorMessage=isc.Validator.notAFunction;try{isc.Func.expressionToFunction("",c)}catch(d){return false}if(c.iscAction)c=c.iscAction;b.resultingValue=isc.StringMethod.create({value:c});return true},isColor:function(a,b,c){if(!b.errorMessage)b.defaultErrorMessage=isc.Validator.notAColor;if(!c)return true;return isc.isA.color(c)},isMeasure:function(a,b,c){if(c==null||isc.is.emptyString(c)||
c=="*")return true;if(!b.errorMessage)b.defaultErrorMessage=isc.Validator.notAMeasure;if(isc.isA.String(c)&&c.charAt(c.length-1)=="%"){c=c.slice(0,-1);return c.match(/\d+\.?\d*/)!=null}return isc.Validator.processValidator(a,b,c,"integerOrAuto")},integerOrAuto:function(a,b,c){if(c==null||isc.is.emptyString(c)||isc.isA.String(c)&&c.toLowerCase()=="auto")return true;return isc.Validator.processValidator(a,b,c,"isInteger")},integerRange:function(a,b,c){a=c;isc.isA.String(c)||(c=parseInt(c,10));if(isNaN(c)||
c!=a)return true;b.dynamicErrorMessageArguments={validator:b,max:b.max,min:b.min};if(isc.isA.Number(b.max)&&(!b.exclusive&&c>b.max||b.exclusive&&c>=b.max)){if(!b.errorMessage)b.defaultErrorMessage=isc.Validator.mustBeLessThan;return false}if(isc.isA.Number(b.min)&&(!b.exclusive&&c<b.min||b.exclusive&&c<=b.min)){if(!b.errorMessage)b.defaultErrorMessage=isc.Validator.mustBeGreaterThan;return false}return true},lengthRange:function(a,b,c){if(c==null||isc.is.emptyString(c))return true;if(!isc.isA.String(c))return true;
b.dynamicErrorMessageArguments={validator:b,max:b.max,min:b.min};a=c.length;c=b.max!=null?parseInt(b.max,10):null;var d=b.min!=null?parseInt(b.min,10):null;isc.isA.Number(c)||(c=null);isc.isA.Number(d)||(d=null);if(c!=null&&a>c){b.defaultErrorMessage=c==d?isc.Validator.mustBeExactLength:isc.Validator.mustBeShorterThan;return false}if(d!=null&&a<d){b.defaultErrorMessage=c==d?isc.Validator.mustBeExactLength:isc.Validator.mustBeLongerThan;return false}return true},contains:function(a,b,c){if(c==null||
isc.is.emptyString(c))return true;isc.isA.String(c)||(c=isc.iscToLocaleString(c));return c.indexOf(b.substring)>-1},doesntContain:function(a,b,c){if(c==null||isc.is.emptyString(c))return true;isc.isA.String(c)||(c=isc.iscToLocaleString(c));return c.indexOf(b.substring)==-1},substringCount:function(a,b,c){if(c==null||isc.is.emptyString(c))return true;var d=b.substring,e=0;for(a=0;e<c.length;e++){e=c.indexOf(d,e);if(e>-1)a++;else break}c=b.operator;b=b.count;c||(c="==");b||(b=0);switch(c){case "==":return a==
b;case "!=":return a!=b;case "<":return a<b;case "<=":return a<=b;case ">":return a>b;case ">=":return a>=b}return false},regexp:function(a,b,c){if(c==null||isc.is.emptyString(c))return true;a=b.expression;if(isc.isA.String(a))a=RegExp(a);return a.test(c)},mask:function(a,b,c){if(c==null||isc.is.emptyString(c))return true;a=b.mask;if(isc.isA.String(a))a=b.mask=RegExp(a);if(a.test(c)){if(b.transformTo)b.resultingValue=c.replace(a,b.transformTo)}else return false;return true},dateRange:function(a,b,
c){if(c==null||isc.is.emptyString(c))return true;if(!isc.isA.Date(c))return false;a=b.min;var d=b.max;if(a!=null&&!isc.isA.Date(a))a=b.min=Date.parseSchemaDate(a);if(d!=null&&!isc.isA.Date(d))d=b.max=Date.parseSchemaDate(d);b.dynamicErrorMessageArguments={validator:b,max:d,min:a};if(isc.isA.Date(a)&&(!b.exclusive&&c.getTime()<a.getTime()||b.exclusive&&c.getTime()<=a.getTime())){if(!b.errorMessage)b.defaultErrorMessage=isc.Validator.mustBeLaterThan;return false}if(isc.isA.Date(d)&&(!b.exclusive&&c.getTime()>
d.getTime()||b.exclusive&&c.getTime()>=d.getTime())){if(!b.errorMessage)b.defaultErrorMessage=isc.Validator.mustBeEarlierThan;return false}return true},floatLimit:function(a,b,c){var d;if(b.precision!=null){if(b.roundToPrecision==null)b.roundToPrecision=true;if(!isc.Validator.processValidator(a,b,c,"floatPrecision"))return false;if(b.resultingValue!=null)c=d=b.resultingValue}if(b.min!=null||b.max!=null)if(isc.Validator.processValidator(a,b,c,"floatRange")){if(d!=null&&b.resultingValue==null&&b.roundToPrecision)b.resultingValue=
d}else return false;return true},floatRange:function(a,b,c){if(c==null||isc.is.emptyString(c))return true;a=c;isc.isA.String(c)||(a=parseFloat(a));if(isNaN(a)||a!=c)return true;b.dynamicErrorMessageArguments={validator:b,max:b.max,min:b.min};if(isc.isA.Number(b.max)&&(!b.exclusive&&a>b.max||b.exclusive&&a>=b.max)){if(!b.errorMessage)b.defaultErrorMessage=isc.Validator.mustBeLessThan;return false}if(isc.isA.Number(b.min)&&(!b.exclusive&&a<b.min||b.exclusive&&a<=b.min)){if(!b.errorMessage)b.defaultErrorMessage=
isc.Validator.mustBeGreaterThan;return false}return true},floatPrecision:function(a,b,c){if(c==null||isc.is.emptyString(c))return true;a=parseFloat(c);if(isNaN(a)||a!=c)return false;if(isc.isA.Number(b.precision)){c=Math.pow(10,b.precision);c=Math.round(a*c)/c;if(b.roundToPrecision){b.resultingValue=c;return true}else return a==c}}};isc.A.$74u={requiredIf:{type:"requiredIf",title:"Conditionally required field",condition:function(a,b,c){b.expression!=null&&!isc.isA.Function(b.expression)&&isc.Func.replaceWithMethod(b,
"expression","item,validator,value");a=b.expression(a,b,c);if(b.errorMessage==null)b.errorMessage=isc.Validator.requiredField;return!a||c!=null&&!isc.is.emptyString(c)}},isOneOf:{type:"isOneOf",title:"Is one of list",condition:function(a,b,c){if(c==null||isc.is.emptyString(c))return true;var d=b.list||(a?a.getValueMap?a.getValueMap():a.valueMap:null),e=d;if(!isc.isAn.Array(d)&&isc.isAn.Object(d))e=isc.getKeys(d);if(e!=null){a=0;for(d=e.length;a<d;a++)if(e[a]==c)return true}else isc.Log.logWarn("isOneOf validator specified with no specified list of options or valueMap - validator will always fail. Field definition:"+
isc.Log.echo(a),"validation");if(!b.errorMessage)b.defaultErrorMessage=isc.Validator.notOneOf;return false}},required:{type:"required",title:"Required field",condition:function(a,b,c){if(b.errorMessage==null)b.errorMessage=isc.Validator.requiredField;return c!=null&&!isc.is.emptyString(c)},action:function(a,b){if(!b.required)b.$11m=a!=null}},readOnly:{type:"readOnly",title:"Set field read-only state/appearance",condition:function(){return true},action:function(a,b,c,d){b=b.name;if(c.fieldAppearance==
isc.Validator.HIDDEN)a==true?d.hideField(b):d.showField(b);else if(c.fieldAppearance==isc.Validator.DISABLED)a==true?d.disableField(b):d.enableField(b);else a==true?d.setFieldCanEdit(b,false):d.setFieldCanEdit(b,true)}},matchesField:{type:"matchesField",title:"Matches another field value",condition:function(a,b,c,d){if(b.otherField==null){isc.logWarn("matchesField validator is missing 'otherField' definition. Validator forced false.");return false}return c==d[b.otherField]}},isUnique:{type:"isUnique",
title:"Validate field value is unique on DataSource",requiresServer:true},hasRelatedRecord:{type:"hasRelatedRecord",title:"Validate field value exists on a related DataSource",requiresServer:true},serverCustom:{type:"serverCustom",title:"Validate field value using a custom server expression",requiresServer:true}};isc.A=isc.Validator;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.isServerValidator=function(a){if(a.serverOnly)return true;a=
this.$74u[a.type];if(a!=null&&a.requiresServer)return true;return false},isc.A.processValidator=function(a,b,c,d,e){if(b.serverOnly)return true;if(!d)d=b.type;var f=true,g;if(d!=null)g=this.$74u[d];var h;if(g==null){if(d!=null)h=this.$18s[d];if(h==null&&b.condition){if(!isc.isA.Function(b.condition)){this.logDebug("Creating function for validation condition:\r"+b.condition);isc.Func.replaceWithMethod(b,"condition","item,validator,value,record")}h=b.condition}}else{if(g.requiresServer==true)return true;
h=g.condition;if(!b.errorMessage)b.defaultErrorMessage=g.defaultErrorMessage}if(h!=null)if(a&&a.multiple&&a.validateEachItem&&isc.isAn.Array(c)){d=[];for(g=0;g<c.length;g++){delete b.resultingValue;f=f&&h(a,b,c[g],e);d[g]=b.resultingValue!=null?b.resultingValue:c[g]}b.resultingValue=d}else{delete b.resultingValue;f=h(a,b,c,e)}else this.logWarn("validator not understood on item: "+this.echo(a)+":\r"+isc.echoFull(b));return f},isc.A.performAction=function(a,b,c,d){var e=c.type,f;if(e!=null)f=this.$74u[e];
var g;if(f!=null)g=f.action;if(g==null&&c.action){if(!isc.isA.Function(c.action)){this.logDebug("Creating function for validation action:\r"+c.action);isc.Func.replaceWithMethod(c,"action","result,item,validator,component")}g=c.action}g!=null&&g(a,b,c,d)},isc.A.getErrorMessage=function(a){var b=a.errorMessage;if(b==null)b=a.defaultErrorMessage;if(b&&a.dynamicErrorMessageArguments)b=b.evalDynamicString(null,a.dynamicErrorMessageArguments);return b},isc.A.addValidator=function(a,b){if(isc.isA.String(a)){var c=
{};c[a]=b;return this.addValidators(c)}},isc.A.addValidators=function(a){for(var b in a)isc.isA.Function(a[b])||isc.Func.replaceWithMethod(a,b,"item,validator,value");isc.addMethods(this.$18s,a)},isc.A.addValidatorDefinition=function(a,b){isc.isAn.Object(b)||isc.logWarn("Invalid validator in call to addValidatorDefinition. Ignored.");var c={};c[a]=b;return this.addValidatorDefinitions(c)},isc.A.addValidatorDefinitions=function(a){if(a&&isc.isAn.Object(a)){for(var b in a)this.$74u[b]&&isc.logWarn("addValidatorDefinitions: Validator definition already exists for type "+
b+". Replacing.");isc.addProperties(this.$74u,a)}});isc.B._maxIndex=isc.C+8;isc.ClassFactory.defineClass("ContainerItem","FormItem");isc.A=isc.ContainerItem.getPrototype();isc.A.cellSpacing=0;isc.A.cellPadding=2;isc.A.cellBorder=0;isc.A.recalculateItemsOnRedraw=false;isc.A.$125=false;isc.A.changeOnKeypress=false;isc.ContainerItem.addMethods(isc.applyMask(isc.DynamicForm.getPrototype(),["getTableStartHTML","$11n","$11o","getCellStartHTML","$11g","getCellEndHTML","$11h","getTitleAlign","getItemPromptHTML",
"getItem","fieldIdProperty"]));isc.A=isc.ContainerItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function(){this.Super("init",arguments);this.setItems(this.items?this.items:null)},isc.A.destroy=function(){this.Super("destroy",arguments);if(this.items)for(var a=0;a<this.items.length;a++)this.items[a].destroy()},isc.A.setItems=function(a){var b=this.items?this.items:null;if(a)this.items=a;else a=this.items;if(!this.items)return null;
this.logDebug("Creating "+this.items.length+" contained items");for(var c=false,d=0;d<a.length;d++){var e=a[d];if(e){isc.addMethods(e,{$154:function(){return this.parentItem.$154()}});e.containerWidget=this.containerWidget;e.parentItem=this;e.eventParent=this;e.form=this.form;e.showTitle=false;isc.isA.FormItem(e)||(a[d]=e=isc.FormItemFactory.makeItem(e));if(this.accessKey!=null&&!c&&e.$kk()){e.accessKey=this.accessKey;c=true}if(e.name!=null)this[e.name]=e}else a.removeItem(d--)}if(this.isDrawn())if(b&&
b!=this.items){this.$60r={};for(c=0;c<b.length;c++)a.contains(b[c])||(this.$60r[b[c].getID()]=true)}this.redraw()},isc.A.getItems=function(){return this.items},isc.A.getTitleHTML=function(){var a,b=this.getTitle();if(!this.getCanFocus())return b;if(this.accessKey!=null)b=isc.Canvas.hiliteCharacter(b,this.accessKey);for(var c=0;c<this.items.length;c++)if(this.items[c].getCanFocus()&&this.items[c].hasDataElement()){a=this.items[c];break}if(!a)return b;return isc.SB.concat("<LABEL FOR=",a.getDataElementId(),
">",b,"</LABEL>")},isc.A.$173=function(a){if(this.isVisible()&&this.containerWidget.isDrawn()){this.$174=a;for(var b=0;b<this.items.length;b++)this.items[b].$kk()&&this.items[b].$173(a);this.form.isDirty()||this.$175()}},isc.A.isEditable=function(){return false},isc.A.$kk=function(){if(!this.items)return false;for(var a=0;a<this.items.length;a++)if(this.items[a].$kk())return true;return false},isc.A.focusInItem=function(){if(this.isVisible()&&this.$kk())for(var a=0;a<this.items.length;a++)if(this.items[a].$kk()){this.items[a].focusInItem();
break}},isc.A.blurItem=function(){for(var a=0;a<this.items.length;a++)if(this.items[a].hasFocus){this.items[a].blurItem();break}},isc.A.$159=function(){this.$16c()},isc.A.drawn=function(){var a=this.items;if(a){for(var b=0;b<a.length;b++)a[b].visible!=false&&a[b].drawn();return this.Super("drawn",arguments)}},isc.A.redrawn=function(){var a=this.items;if(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.visible!=false)c.isDrawn()?c.redrawn():c.drawn();else c.isDrawn()&&c.cleared()}if(this.$60r){for(var d in this.$60r)window[d]!=
null&&window[d].cleared();delete this.$60r}return this.Super("redrawn",arguments)}},isc.A.cleared=function(){var a=this.items;if(a){for(var b=0;b<a.length;b++)a[b].isDrawn()&&a[b].cleared();if(this.$60r){for(var c in this.$60r)window[c]!=null&&window[c].cleared();delete this.$60r}return this.Super("cleared",arguments)}},isc.A.makeNamedItem=function(a,b){if(!this.itemCache)this.itemCache={};var c=this.itemCache[a];if(!c){c=this[a]||this.getClass()[a];if(b!=null)c=isc.addProperties({},c,b);c=this.itemCache[a]=
isc.FormItemFactory.makeItem(c)}return c},isc.A.getInnerHTML=function(a,b,c){a||(a={});if(!this.items||this.recalculateItemsOnRedraw||!isc.isA.FormItem(this.items[0]))this.setItems();if(!this.items)return"No items set for containerItem "+this;var d;if(this.isInactiveHTML()&&this.$68u==null){d=true;this.$68u=this.setupInactiveContext(null);this.logIsDebugEnabled("inactiveEditorHTML")&&this.logDebug("getInnerHTML(): Item is marked as inactive - set up new inactive context ID:"+this.$68u,"inactiveEditorHTML")}var e=
this.getErrorOrientation(),f,g=e==isc.Canvas.LEFT,h;if(c&&(g||e==isc.Canvas.RIGHT))if(c=this.getErrors()){f=true;h=this.getErrorHTML(c)}c=isc.StringBuffer.newInstance();this.$11d()&&c.append(this.$15l());c.append(this.getTableStartHTML());var i=this.items;for(e=0;e<i.length;e++){var j=i[e];j.$10x();j.form=this.form;if(j.showIf){isc.isA.Function(j.showIf)||isc.Func.replaceWithMethod(j,"showIf","item,value,form");var k=this.getItemValue(j,a);k=j.showIf(j,k,this.form)!=false;if(k!=j.visible)j.visible=
k}}e=0;for(i=this.items.length;e<i;e++)if(j=this.items[e])if(j.visible){k=this.getItemValue(j,a);if(j.$8l||e==0){e!=0&&c.append("</TR>");c.append("<TR>")}if(e==0&&f&&g){for(var l=1,m=1;m<this.items.length;m++)this.items[m].$8l&&l++;c.append("<TD ROWSPAN=",l,">",h,"</TD>")}c.append(this.getCellStartHTML(j));c.append(j.getInnerHTML(k,true));c.append(this.getCellEndHTML(j))}if(this.showPickerIcon||this.showIcons&&this.icons!=null){a=this.getTotalIconsWidth();if(this.showPickerIcon)a+=this.getPickerIconWidth();
c.append(this.$11g(this.form.isRTL()?isc.Canvas.RIGHT:isc.Canvas.LEFT,this.getCellStyle(),1,1,a,null,null,isc.Canvas.$42a,null,null,null,this.icons&&(this.showPickerIcon||this.icons.length>1)));this.showPickerIcon&&c.append(this.getIconHTML(this.getPickerIcon()));c.append(this.getIconsHTML());c.append(this.$11h(true))}if(f&&!g)b=true;if(b){b=this.getHint();g=!g?h:null;if((g=b&&g?b+g:b||g)&&!isc.isA.emptyString(g)){this.$132[1]=this.$59s();this.$132[3]=this.getHintStyle();this.$132[5]=g;c.append(this.$132)}}c.append("</TR></TABLE>");
d&&delete this.$68u;return c.toString()},isc.A.getItemValue=function(a,b){if(b==null)b={};isc.isA.FormItem(a)||(a=this.getItem(a));if(!a)return null;var c=a.getFieldName(),d=null;if(a.value!=null)d=a.value;if(d==null&&c)d=b[c];if(d==null){d=a.getDefaultValue();if(d==null&&this.form&&this.form.values)d=this.form.values[c]}return d},isc.A.$10v=function(){if(this.items==null)return false;for(var a=0;a<this.items.length;a++)if(this.items[a].$10v())return true;return this.$18j},isc.A.$10x=function(){this.$18j=
false;for(var a=0;a<this.items.length;a++)this.items[a].$10x()},isc.A.updateDisabled=function(){this.Super("updateDisabled",arguments);if(this.items)for(var a=0;a<this.items.length;a++)this.items[a].updateDisabled()},isc.A.getTextDirection=function(){return this.form.getTextDirection()},isc.A.getLeft=function(){var a=this.$11o();if(a==null){this.logWarn("getLeft() Unable to determine position for "+(this.name==null?"this item ":this.name)+". Position cannot be determined before the item is drawn - returning zero");
return 0}return this.$18k(a)},isc.A.getTop=function(){var a=this.$11o();if(a==null){this.logWarn("getTop() Unable to determine position for "+(this.name==null?"this item ":this.name)+". Position cannot be determined before the item is drawn - returning zero");return 0}return this.$18l(a)},isc.A.getVisibleWidth=function(){var a=this.$11o();if(a==null)return this.Super("getVisibleWidth",arguments);return a.offsetWidth},isc.A.getVisibleHeight=function(){var a=this.$11o();if(a==null)return this.Super("getVisibleHeight",
arguments);return a.offsetHeight});isc.B._maxIndex=isc.C+25;isc.ClassFactory.defineClass("CanvasItem","FormItem");isc.A=isc.CanvasItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.width="*";isc.A.height=null;isc.A.shouldSaveValue=false;isc.B.push(isc.A.$18v=function(a,b,c){this.Super("resized",arguments);this.dragResizing()||this.canvasItem.canvasResized(a,b,c)},isc.A.$18w=function(){this.canvasItem.canvasResized(1,1);return this.Super("dragResized",
arguments)},isc.A.$18x=function(a,b){return isc.isA.DynamicForm(this)?this.Super("$kf",arguments):this.canvasItem.form.$kf(a,b)});isc.B._maxIndex=isc.C+3;isc.A=isc.CanvasItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function(){this.Super("init",arguments);this.$18y()},isc.A.isEditable=function(){return false},isc.A.$kk=function(){var a=this.canvas;if(a&&a.$kk)return a.$kk();return this.canFocus||false},isc.A.$18y=
function(){if(this.createCanvas!=null){var a=this.canvas;this.canvas=this.fireCallback("createCanvas");if(this.canvas==null)this.canvas=a}if(!isc.isAn.Object(this.canvas)&&!this.canvasProperties&&!window[this.canvas]){if(isc.designTime)return;this.logWarn("CanvasItem: "+(this.getFieldName()?this.getFieldName():this.getID())+" defined with no canvas property - creating a default canvas for this item.")}if(!isc.isAn.Object(this.canvas)&&isc.isA.Canvas(window[this.canvas]))this.canvas=window[this.canvas];
a={_redrawWithParent:false,$so:true,tabIndex:-1,canvasItem:this,disabled:this.isDisabled()};a.resized=this.$18v;a.dragResized=this.$18w;a.$kf=this.$18x;if(this.dataSource)a.dataSource=this.dataSource;if(this.prompt)a.prompt=this.prompt;if(this.accessKey!=null)a.accessKey=this.accessKey;if(this.showFocused!=null)a.showFocused=this.showFocused;if(this.showFocusedAsOver!=null)a.showFocusedAsOver=this.showFocusedAsOver;if(isc.isA.String(this.canvas)&&window[this.canvas])this.canvas=window[this.canvas];
if(isc.isA.Canvas(this.canvas)){this.canvas.setTabIndex(-1);this.canvas.setPrompt(this.prompt);this.canvas.setAccessKey(this.accessKey);isc.addProperties(this.canvas,a);a.dataSource&&this.canvas.bindToDataSource();this.canvas.setDisabled(this.isDisabled());this.containerWidget.addChild(this.canvas)}else{isc.addProperties(a,this.canvas);if(a.ID==null)a.ID=null;this.autoDestroy=true;this.addAutoChild("canvas",a,isc.Canvas,this.containerWidget)}},isc.A.setCanvas=function(a){if(a)this.canvas=a;this.$18y()},
isc.A.destroy=function(){if(this.canvas){delete this.canvas.canvasItem;if(this.autoDestroy)this.canvas.destroy(true);else this.canvas.visibility!=isc.Canvas.HIDDEN&&this.canvas.hide()}return this.Super("destroy",arguments)},isc.A.placeCanvas=function(a){var b=this.canvas;if(this.visible==false){b.hide();b.moveTo(0,0)}else if(this.form&&!this.form.isDrawn()&&this.form.position==isc.Canvas.RELATIVE)b.hide();else{var c=this.containerWidget.getClipHandle(),d=isc.Element.get(this.getID()+"$18z"),e=isc.Element.getLeftOffset(d,
c);c=isc.Element.getTopOffset(d,c);b.moveTo(e,c);b.visibility==isc.Canvas.HIDDEN&&b.show();!a&&isc.Browser.isMac&&isc.Browser.isMoz&&e==0&&c==0&&isc.Timer.setTimeout({target:this,methodName:"$180"},0)}},isc.A.$180=function(){this.placeCanvas(true)},isc.A.cleared=function(){this.Super("cleared",arguments);this.canvas&&this.canvas.isDrawn()&&this.canvas.clear()},isc.A.moved=function(){this.isDrawn()&&this.placeCanvas()},isc.A.checkCanvasOverflow=function(){return this.sizeCanvas(true)},isc.A.sizeCanvas=
function(a){var b=this.canvas;if(a&&!(b.overflow==isc.Canvas.VISIBLE||b.overflow==isc.Canvas.CLIP_H))this.logDebug("ignoring first pass, can't overflow","canvasItemSizing");else{var c=this.getInnerWidth(),d=this.getInnerHeight(),e,f;if(this.showTitle&&this.getTitleOrientation()==isc.Canvas.TOP)d-=this.form.getTitleHeight(this);f=d;var g=b.$pn||this.width;e=g==null||g=="*"?c:g;if(!b.isDirty()&&(e==null||e<=b.getVisibleWidth())&&b.getHeight()<b.getVisibleHeight()&&f<=b.getVisibleHeight()){this.logDebug("not applying height: "+
f+" to overflowed Canvas with height: "+b.getVisibleHeight(),"canvasItemSizing");f=null}isc.isA.Number(e)||(e=null);isc.isA.Number(f)||(f=null);this.$602(e,f);this.logDebug("this.$8t: "+this.$8t+", policy size: "+[c,d]+", specifiedSize: "+[g,b.$po||this.height]+", Resized Canvas to: "+[e,f],"canvasItemSizing");if(b.isDrawn())b.redrawIfDirty("CanvasItem getting new size");else{c=this.containerWidget.getDrawnState();if(c==isc.Canvas.COMPLETE||c==isc.Canvas.HANDLE_DRAWN)b.draw()}c=b.getVisibleWidth();
e=b.getVisibleHeight();this.logDebug("visible size of embedded Canvas: "+[c,e],"canvasItemSizing");this.minHeight=a?e>b.getHeight()?e:null:null;if(e>d)return true}},isc.A.$602=function(a,b){this.$181=true;this.canvas.resizeTo(a,b);this.$181=false},isc.A.getElementHTML=function(){var a=this.canvas;if(a&&this.$68y())return a.getPrintHTML(this.containerWidget.currentPrintProperties);this.sizeCanvas();this.$173(this.getGlobalTabIndex());return"<SPAN style='padding:0px;margin:0px;' ID='"+this.getID()+
"$18z'>"+isc.Canvas.spacerHTML(a.getVisibleWidth(),a.getVisibleHeight())+"</SPAN>"},isc.A.$159=function(){this.$16c()},isc.A.getHeight=function(a){var b=this.canvas;if(a){a=b.getVisibleHeight();if(a>b.getHeight())return a}return this.canvas.$po||this.height||this.canvas.defaultHeight},isc.A.getWidth=function(){return this.canvas.$pn||this.width||this.canvas.defaultWidth},isc.A.canvasResized=function(a,b,c){if(!this.$181){var d=this.canvas,e=d.getWidth(),f=d.getHeight();if(d.isDrawn()){if(c!="overflow"){if(a!=
null&&a!=0)d.$pn=e;if(b!=null&&b!=0)d.$po=f}this.logDebug("canvas resized: new specified sizes: "+[e,f],"canvasItemSizing");this.redraw()}}},isc.A.updateDisabled=function(){this.Super("updateDisabled",arguments);this.canvas.setDisabled(this.isDisabled())},isc.A.$173=function(a){this.$182(a)},isc.A.$182=function(a){var b=this.canvas;if(b){b.$rp();b.$vk(a,false)}},isc.A.focusInItem=function(){this.canvas&&this.canvas.focus();return this.Super("focusInItem",arguments)},isc.A.blurItem=function(){this.canvas&&
this.canvas.blur();return this.Super("blurItem",arguments)},isc.A.hasAdvancedCriteria=function(){return isc.isA.DynamicForm(this.canvas)},isc.A.canEditCriterion=function(a){if(isc.isA.DynamicForm(this.canvas)&&a.operator==this.canvas.operator){for(var b=0;b<a.criteria;b++){for(var c=this.canvas.getItems(),d,e=0;e<c.length;e++)if(c[e].canEditCriterion(a.criteria[b])){d=true;break}if(!d)return false}return true}},isc.A.getCriterion=function(){return isc.isA.DynamicForm(this.canvas)?this.canvas.getValuesAsAdvancedCriteria():
this.Super("getCriterion",arguments)},isc.A.setCriterion=function(a){isc.isA.DynamicForm(this.canvas)&&this.canvas.setValuesAsCriteria(a,true)});isc.B._maxIndex=isc.C+27;isc.CanvasItem.registerStringMethods({createCanvas:""});isc.ClassFactory.defineClass("TextItem","FormItem");isc.A=isc.TextItem;isc.A.DEFAULT="default";isc.A.UPPER="upper";isc.A.LOWER="lower";isc.A.$713={"0":{charFilter:"[0-9+\\-]"},"#":{charFilter:"[0-9]"},"9":{charFilter:"[0-9 ]"},L:{charFilter:"[A-Za-z]"},"?":{charFilter:"[A-Za-z ]"},
a:{charFilter:"[0-9A-Za-z]"},A:{charFilter:"[0-9A-Za-z]"},C:{charFilter:"."}};isc.A=isc.TextItem.getPrototype();isc.A.width=150;isc.A.height=isc.Browser.isSafari?22:19;isc.A.textBoxStyle="textItem";isc.A.length=null;isc.A.canAutoComplete=true;isc.A.$183="TEXT";isc.A.$125=true;isc.A.$15i=true;isc.A.emptyStringValue=null;isc.A.redrawOnShowIcon=false;isc.A.clipValue=true;isc.A.$16b={onmousedown:isc.Browser.isIE?function(){var a=isc.DynamicForm.$mu(this).item;a&&a.$179()}:null};isc.A.printFullText=false;
isc.A=isc.TextItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$186=[,"<INPUT TYPE=",," NAME='",,"' ID='",,"' handleNativeEvents=false"];isc.A.$14f=" TABINDEX=";isc.A.$oa=">";isc.A.$pi=" DISABLED ";isc.A.$187="native";isc.A.$188=" AUTOCOMPLETE=OFF ";isc.A.$14e=" ACCESSKEY=";isc.A.$19a=[" CLASS='",,"' STYLE='",,,,,,,,,,,,,,,,isc.Browser.isMoz?"-moz-user-focus:":null,,"' "];isc.A.$93="WIDTH:";isc.A.$38="px;";isc.A.$92="HEIGHT:";isc.A.$14c=
"text-align:";isc.A.$39=";";isc.A.$19b="normal;";isc.A.$19c="ignore;";isc.A.$78v="margin-top:-1px;margin-bottom:-1px;";isc.A.applyStaticTypeFormat=false;isc.A.characterCasing=isc.TextItem.DEFAULT;isc.A.maskPadChar=" ";isc.A.maskPromptChar="_";isc.B.push(isc.A.$43h=function(){this.changeOnKeypress&&this.$18c()},isc.A.$429=function(){return!isc.Browser.isIE},isc.A.getTextBoxCellCSS=function(){return this.$136},isc.A.getElementHTML=function(a,b){var c=this.$xq(b);if(this.showValueIconOnly)return c;if(this.$68y()&&
this.printFullText)c=isc.StringBuffer.concat("<SPAN ",this.getElementStyleHTML(),">",b==null?"&nbsp;":b.asHTML(),"</SPAN>");else{var d=this.$186;this.form.getID();this.getItemID();d[0]=c;d[2]=this.$183;d[4]=this.getElementName();d[6]=this.getDataElementId();d[8]=this.$155();if(isc.Browser.isMoz||isc.Browser.isSafari)d[d.length]=this.getBrowserSpellCheck()?" spellcheck=true":" spellcheck=false";if(isc.Browser.isSafari){if(this.browserAutoCapitalize==false)d[d.length]=" autocapitalize=off";if(this.browserAutoCorrect==
false)d[d.length]=" autocorrect=off";if(this.browserInputType!=null){c=this.browserInputTypeMap[this.browserInputType];if(c==null)c=this.browserInputType;d[d.length]=" type='"+c+"'"}}if(this.$429){d[d.length]=" ONINPUT='";d[d.length]=this.getID();d[d.length]=".$43g()'"}if(this.isDisabled())d[d.length]=this.$pi;if(this.isInactiveHTML()||this.readOnly)d[d.length]=" READONLY=TRUE";if(this.isInactiveHTML()&&a!=null&&a!=isc.emptyString)d[d.length]=" value='"+isc.makeXMLSafe(a)+"'";if(this.$17h()!=this.$187)d[d.length]=
this.$188;d[d.length]=this.getElementStyleHTML();c=this.$154();if(c!=null){var e=d.length;d[e]=this.$14f;isc.$bk(d,c,e+1,5)}if(this.showTitle==false&&this.accessKey!=null){d[d.length]=this.$14e;d[d.length]=this.accessKey}d[d.length]=this.$oa;c=d.join(isc.emptyString);d.length=8}return c},isc.A.$143=function(){return isc.Browser.isStrict},isc.A.$12x=function(){var a=this.Super("$12x",arguments);if(this.changeOnBlur)this.form.elementChanged(this);else{var b=this.getElementValue();if(this.mapDisplayToValue)b=
this.mapDisplayToValue(b);this._value!=b&&this.form.elementChanged(this)}if(this.mask){b=this.getValue();if(this.mapValueToDisplay)b=this.mapValueToDisplay(b);this.setElementValue(b)}if(this.showHintInField){b=this.getElementValue();if(b===void 0||b==null||isc.is.emptyString(b))this.$66t()}return a},isc.A.getElementStyleHTML=function(){var a=this.$68y()&&this.printFullText,b=this.$19a,c=this.getTextBoxWidth(),d=this.getTextBoxHeight(),e=this.getTextBoxStyle();b[1]=e;if(isc.isA.Number(c)){b[3]=this.$93;
isc.$bk(b,c,4,4);b[8]=this.$38}else b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=null;if(isc.isA.Number(d)){b[9]=this.$92;isc.$bk(b,d,10,4);b[14]=this.$38}else b[9]=b[10]=b[11]=b[12]=b[13]=b[14]=null;if(this.textAlign){b[15]=this.$14c;b[16]=this.textAlign;b[17]=this.$39}else b[15]=b[16]=b[17]=null;if(isc.Browser.isIE)b[18]=a?null:this.$78v;if(isc.Browser.isMoz&&!a)b[19]=this.$154()>0?this.$19b:this.$19c;return b.join(isc.emptyString)},isc.A.getEnteredValue=function(){return this.getElementValue()},isc.A.mapValueToDisplay=
function(a){if(this.mask){var b=this.$715();this.hasFocus||(b=this.$714(a));return b}a=isc.FormItem.$b4.mapValueToDisplay.call(this,a);if(a==null)return isc.emptyString;return a},isc.A.mapDisplayToValue=function(a){a=this.mask?this.$716(a):this.$17d(a);a=this.$79d(a);if(isc.is.emptyString(a))a=this.emptyStringValue;return a},isc.A.saveValue=function(a){this.mask&&this.$714(a);this.Super("saveValue",arguments)},isc.A.setValue=function(a,b,c,d){this.$66s();if(a!==void 0&&(a==null||isc.is.emptyString(a)))this.emptyStringValue=
a;if(a!==void 0&&a!=null&&this.characterCasing!=isc.TextItem.DEFAULT)if(this.characterCasing==isc.TextItem.UPPER)a=a.toUpperCase();else if(this.characterCasing==isc.TextItem.LOWER)a=a.toLowerCase();a=this.invokeSuper(isc.TextItem,"setValue",a,b,c,d);if(!this.hasFocus&&this.showHint&&this.showHintInField&&this.getHint())if(a===void 0||a==null||isc.is.emptyString(a))this.$66t();return a},isc.A.getCriteriaFieldName=function(){if(this.displayField)return this.displayField;return this.Super("getCriteriaFieldName",
arguments)},isc.A.$12v=function(){var a=this.Super("$12v",arguments);this.$66s();if(this.mask){this.$717(false);var b=0,c=this.$718;if(!this.selectOnFocus)c=b=this.$719();this.delayCall("$72a",[b,c])}return a},isc.A.setKeyPressFilter=function(a){if(this.mask)this.logWarn("setKeyPressFilter() ignored because mask is enabled");else{this.keyPressFilter=a;this.$66y=null;if(this.keyPressFilter)this.$66y=RegExp(this.keyPressFilter)}},isc.A.init=function(){this.Super("init",arguments);if(this.mask&&!isc.isA.ComboBoxItem(this)&&
!isc.isA.SpinnerItem(this)){this.$72b();this.keyPressFilter&&this.logWarn("init: keyPressFilter ignored because mask is enabled")}else if(this.keyPressFilter)this.$66y=RegExp(this.keyPressFilter)},isc.A.keyPress=function(a,b,c,d){if(isc.EventHandler.ctrlKeyDown()||isc.EventHandler.altKeyDown())return true;if((!this.characterCasing||this.characterCasing==isc.TextItem.DEFAULT)&&!this.$66y&&!this.mask)return true;if(this.mask){a=this.$72c();b=isc.Browser.isSafari;var e=a.begin;if(c=="Backspace"||c==
"Delete"){if(a.begin-a.end!=0||b&&this.$72d){if(isc.Browser.isSafari&&this.$72d){a=this.$72d;this.$72d=null}if(this.maskOverwriteMode)this.$72e(a.begin,a.end);else{var f=a.end-a.begin;this.$72f(a.begin,f)}this.$717(true);this.$73t(a.begin,0)}else if(c=="Backspace"){d=b&&a.begin==a.end?e:e-1;if(d>=0){if(this.maskOverwriteMode){for(;!this.$72i[d]&&d>=0;)d--;this.$72l[d]=this.maskPromptChar}else this.$72f(d);this.$717(true);this.$73t(d,-1)}}else{if(this.maskOverwriteMode){if(e==this.$72h(e-1))this.$72l[e]=
this.maskPromptChar}else this.$72f(e);this.$717(true);this.$73t(e,0)}return false}if(this.$660(d)&&(a.begin-a.end!=0||b&&this.$72d)){if(isc.Browser.isSafari&&this.$72d){a=this.$72d;this.$72d=null}if(this.maskOverwriteMode)this.$72e(a.begin,a.end);else{f=a.end-a.begin;this.$72f(a.begin,f)}}this.$72d=b&&a.begin-a.end!=0&&!this.$660(d)?a:null;if(c=="Escape"){this.$72e(0,this.$718);this.$717(true);this.$72a(this.$72g);return false}}if(this.mask&&!this.$660(d)||!this.mask&&(!this.$66y&&!this.$66z(d)||
this.$66y&&!this.$660(d)))return true;c=String.fromCharCode(d);if(this.mask){d=this.$72h(e-1);if(d<this.$718)if(e=this.$72i[d]){if(e.casing)c=this.$72j(c,e.casing);if(e.filter.test(c)){this.maskOverwriteMode||this.$72k(d);this.$72l[d]=c;e=d;if(this.$717(true))e=this.$72h(d);this.$72a(e)}}return false}e=c;this.mask||(e=this.$72j(c,this.characterCasing));if(c==e&&!this.$66y)return true;if(this.$66y)if(this.$660(d)&&!this.$66y.test(e))return false;if(c==e)return true;d=this.getValue()||"";a=this.getSelectionRange();
d=a[0]-a[1]!=0?d.substring(0,a[0])+e+d.substring(a[1]+1):d.substring(0,a[0])+e+d.substring(a[1]);this.setValue(d);this.setSelectionRange(a[0]+1,a[0]+1);return false},isc.A.$660=function(a){return a>=32&&a<=126||a>127},isc.A.$66z=function(a){return a>=65&&a<=90||a>=97&&a<=122},isc.A.$72j=function(a,b){if(b==isc.TextItem.UPPER)a=a.toUpperCase();else if(b==isc.TextItem.LOWER)a=a.toLowerCase();return a},isc.A.setMask=function(a){if(!(isc.isA.ComboBoxItem(this)||isc.isA.SpinnerItem(this))){this.mask=a;
this.$72b();if(this.keyPressFilter){this.$66y=null;this.logWarn("setMask: keyPressFilter ignored because mask is enabled")}this.setValue("")}},isc.A.$72b=function(){this.$72i=[];this.$72l=[];this.$718=0;for(var a=null,b=false,c=false,d="",e=this.mask.split(""),f=0;f<e.length;f++){var g=e[f];if(g=="<")a=a==isc.TextItem.LOWER?null:isc.TextItem.LOWER;else if(g==">")a=a==isc.TextItem.UPPER?null:isc.TextItem.UPPER;else if(!b&&g=="\\")b=true;else if(b){this.$72m(g,a);b=false}else if(!c&&g=="["){c=true;
d+=g}else if(c&&g=="]"){c=false;d+=g;this.$72i.push({filter:RegExp(d),casing:a});if(this.$72g==null)this.$72g=this.$72i.length-1;this.$72l.push(this.maskPromptChar);this.$718++;d=""}else if(c)d+=g;else this.$72n(g,a)}},isc.A.$72m=function(a){this.$72i.push(null);this.$72l.push(a);this.$718++},isc.A.$72n=function(a,b){var c=isc.TextItem.$713[a];if(c){this.$72i.push({filter:RegExp(c.charFilter),casing:b});if(this.$72g==null)this.$72g=this.$72i.length-1;this.$72l.push(this.maskPromptChar)}else{this.$72i.push(null);
this.$72l.push(a)}this.$718++},isc.A.$72c=function(){var a=this.getSelectionRange();return{begin:a[0],end:a[1]}},isc.A.$72a=function(a,b){if(this.hasFocus){b=isc.isA.Number(b)?b:a;this.setSelectionRange(a,b)}},isc.A.$72h=function(a){for(;++a<this.$718;)if(this.$72i[a])return a;return this.$718},isc.A.$719=function(){for(var a=0,b=this.$718-1;b>=0;b--)if(this.$72i[b])if(this.$72l[b]==this.maskPromptChar)a=b;else break;return a},isc.A.$714=function(a){if(a==null)a="";isc.isA.String(a)||(a=a.toString());
this.$72e(0,this.$718);var b=-1;if(this.maskSaveLiterals)for(var c=0,d=0;c<a.length;c++){if(this.$72i[c]){var e=a.charAt(c);if(e==" ")this.hasFocus||(this.$72l[c]=e);else if(this.$72i[c].filter.test(e)){this.$72l[c]=e;b=c}}}else for(d=c=0;c<this.$718;c++)if(this.$72i[c]){for(;d<a.length;){e=a.charAt(d++);if(e==" "){this.hasFocus||(this.$72l[c]=e);break}else if(this.$72i[c].filter.test(e)){this.$72l[c]=e;b=c;break}}if(d>a.length)break}a=this.$715();if(!this.hasFocus){if(b>=0)for(c=b+1;c<this.$718;c++){if(this.$72i[c])break;
b++}a=a.substring(0,b+1)}return a},isc.A.$716=function(a){if(a==null)a="";for(var b=false,c=-1,d="",e=0,f=0;e<a.length;e++){var g=a.charAt(e);if(this.$72i[e])if(g!=this.maskPromptChar&&this.$72i[e].filter.test(g)){d+=g;b=true;c=f++}else{d+=this.maskPadChar;f++}else if(this.maskSaveLiterals){d+=g;c=f++}}return d=b?d.substring(0,c+1):""},isc.A.$715=function(){return this.$72l.join("")},isc.A.$72e=function(a,b){for(var c=a;c<b&&c<this.$718;c++)if(this.$72i[c])this.$72l[c]=this.maskPromptChar},isc.A.$717=
function(a){var b=this.$715();this.setElementValue(b);if(a&&this.changeOnKeypress){a=this.$716(b);b=this.handleChange(a,this._value);if(this.destroyed)return;a=this.$17n;this.updateAppearance(a);this.saveValue(a);this.handleChanged(a);return b}return true},isc.A.$73t=function(a,b){if(b<0)for(;!this.$72i[a]&&a>=0;)a--;else for(;!this.$72i[a]&&a<this.$718;)a++;this.$72a(a)},isc.A.$72f=function(a,b){for(b||(b=1);!this.$72i[a]&&a>=0;)a--;for(var c=a,d=c+b-1;c<this.$718;c++,d=e)if(this.$72i[c]){this.$72l[c]=
this.maskPromptChar;var e=this.$72h(d++);d=this.$72i[c];var f=this.$72l[e];if(e<this.$718&&d.filter.test(f)){if(d.casing)f=this.$72j(f,d.casing);this.$72l[c]=f}else{for(;c<e;){if(this.$72i[c])this.$72l[c]=this.maskPromptChar;c++}break}}},isc.A.$72k=function(a){a=a;for(var b=this.maskPromptChar;a<this.$718;a++){var c=this.$72i[a];if(c){if(c.casing)b=this.$72j(b,c.casing);c=this.$72h(a);var d=this.$72l[a];this.$72l[a]=b;if(c<this.$718&&this.$72i[c].filter.test(d))b=d;else break}}});isc.B._maxIndex=
isc.C+36;isc.ClassFactory.defineClass("BlurbItem","FormItem");isc.A=isc.BlurbItem.getPrototype();isc.A.shouldSaveValue=false;isc.A.height=null;isc.A.showTitle=false;isc.A.colSpan="*";isc.A.startRow=true;isc.A.endRow=true;isc.A.textBoxStyle="staticTextItem";isc.A.emptyDisplayValue="&nbsp;";isc.ClassFactory.defineClass("ButtonItem","CanvasItem");isc.A=isc.ButtonItem.getPrototype();isc.A.canFocus=true;isc.A.shouldSaveValue=false;isc.A.height=null;isc.A.width=null;isc.A.titleStyle=null;isc.A.showTitle=
false;isc.A.startRow=true;isc.A.endRow=true;isc.A.buttonConstructor=isc.Button;isc.A.autoFit=true;isc.A.buttonDefaults={click:function(){return this.canvasItem.handleClick()},doubleClick:function(){return this.canvasItem.handleDoubleClick()},getTitle:function(){return this.canvasItem.getTitle()}};isc.A.autoDestroy=true;isc.A=isc.ButtonItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$19d={width:true,height:true};isc.B.push(isc.A.getTitleHTML=
function(){return this.getTitle()},isc.A.setTitle=function(a){this.title=a;this.canvas&&this.canvas.setTitle(a)},isc.A.$18y=function(){var a={canFocus:this.$kk(),disabled:this.isDisabled(),width:this.width};if(this.height!=null)a.height=this.height;if(this.icon)a.icon=this.icon;if(this.titleStyle)a.titleStyle=this.titleStyle;if(this.baseStyle)a.baseStyle=this.baseStyle;if(this.autoFit!=null)a.autoFit=this.autoFit;this.canvas=this.createAutoChild("button",a,this.buttonConstructor);this.Super("$18y",
arguments)},isc.A.$602=function(a,b,c,d){if(!(a==null&&b==null))return this.invokeSuper(isc.ButtonItem,"$602",a,b,c,d)},isc.A.propertyChanged=function(a,b){this.canvas!=null&&this.$19d[a]&&this.canvas.setProperty(a,b)},isc.A.handleClick=function(){if(this.editingOn){isc.VisualBuilder&&isc.VisualBuilder.titleEditEvent=="click"&&this.editClick();return false}return this.Super("handleClick",arguments)},isc.A.handleDoubleClick=function(){if(this.editingOn){isc.VisualBuilder&&isc.VisualBuilder.titleEditEvent==
"doubleClick"&&this.editClick();return false}return this.Super("handleDoubleClick",arguments)});isc.B._maxIndex=isc.C+7;if(isc.ListGrid){isc.ClassFactory.defineInterface("PickList");isc.ClassFactory.defineClass("PickListMenu","ScrollingMenu");isc.A=isc.PickListMenu;isc.A.$51t={};isc.A.pickListCacheLimit=50;isc.A=isc.PickListMenu.getPrototype();isc.A.useAllDataSourceFields=false;isc.A.tabIndex=-1;isc.A.canResizeFields=false;isc.A.canFreezeFields=false;isc.A.styleName="pickListMenu";isc.A.bodyStyleName=
"pickListMenuBody";isc.A.normalCellHeight=16;isc.A=isc.PickListMenu.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$19e="background-color:";isc.A.$19f="color:";isc.B.push(isc.A.getValueIcon=function(a,b,c){var d=this.formItem;if(d&&!d.suppressValueIcons&&(d.valueIcons!=null||d.getValueIcon!=null)){var e=d.getValueFieldName(),f=d.valueIconField||d.getDisplayFieldName()||e;if(this.getFieldName(a)==f)return d.$144(c[e])}return this.Super("getValueIcon",
arguments)},isc.A.recordClick=function(a,b){this.allowMultiSelect||this.hide();b!=null&&this.itemClick(b)},isc.A.headerClick=function(a){var b=this.Super("headerClick",arguments);this.isCheckboxField(this.getField(a))&&this.allowMultiSelect&&this.multiSelectChanged();return b},isc.A.multiSelectChanged=function(){for(var a=this.formItem,b=a.getValueFieldName(),c=this.getSelection(),d=[],e=0;e<c.length;e++)d.add(c[e][b]);a.pickValue(d)},isc.A.itemClick=function(a){if(this.allowMultiSelect)this.multiSelectChanged();
else{var b=this.formItem,c=b.getValueFieldName();b.pickValue(a[c])}},isc.A.hide=function(a,b,c,d){var e=this.isVisible()&&this.isDrawn();this.invokeSuper(isc.PickListMenu,"hide",a,b,c,d);if(this.formItem){e&&this.showModal&&this.formItem.focusInItem();this.formItem.$19g=null;e&&this.formItem.$19h();delete this.formItem.$19i}},isc.A.show=function(){var a=this.isVisible()&&this.isDrawn();this.bringToFront();this.Super("show",arguments);a||this.formItem.$19j()},isc.A.showClickMask=function(){if(!this.clickMaskUp(this.getID())){var a=
this.Super("showClickMask",arguments);if(this.formItem){a=isc.EH.clickMaskRegistry.find("ID",a);if(a.$li)a.$li=null}}},isc.A.getCellCSSText=function(a){if(a==this.selection.getSelectedRecord()){a=[];if(this.hiliteColor!=null)a[0]=this.$19e;a[1]=this.hiliteColor;a[2]=isc.$19k;if(this.hiliteTextColor!=null)a[3]=this.$19f;a[4]=this.hiliteTextColor;a[5]=isc.semi;return a.join(isc.emptyString)}},isc.A.keyDown=function(){if(isc.EH.lastEvent.keyName=="Tab"){this.hide();return false}},isc.A.$315=function(a,
b,c,d,e){var f=this.getFieldName(e);a=this.formItem.formatPickListValue(a,f,b);return this.Super("$315",[a,b,c,d,e])},isc.A.bodyKeyPress=function(){var a=isc.EH.lastEvent.keyName;if(isc.Browser.isSafari)if(a=="Tab"){this.hide();return false}var b=isc.EH.getKeyEventCharacterValue();if(b!=null){var c=this.formItem.getAllLocalOptions();if(isc.isAn.Array(c)&&c.length>1){b=String.fromCharCode(b);b=b.toLowerCase();var d=this.formItem,e=d.getValueFieldName(),f=c.indexOf(this.getSelectedRecord()),g=f<c.length-
1?f+1:0;if(f<0)f=0;for(;g!=f;){var h=c[g][e];h=d.mapValueToDisplay(h);if(isc.isA.String(h)&&h.length>0&&h.charAt(0).toLowerCase()==b){this.scrollRecordIntoView(g);this.$88(g);return}g+=1;if(g>=c.length)g=0}}}if(this.getFocusRow()==null&&a=="Enter"){this.cancel();return false}return this.Super("bodyKeyPress",arguments)},isc.A.dataChanged=function(a,b){var c=this.data;if(c){c=this.requestVisibleRows();if(!(c&&Array.isLoading(c[0]))){this.Super("dataChanged",arguments);c=this.formItem;if(b&&this.getSelectedRecord()==
b&&c){var d=this.data.indexOf(b);if(d=d==-1?null:this.data.get(d)){var e=c.getValueFieldName();c.setValue(d[e])}else c.clearValue()}}}});isc.B._maxIndex=isc.C+13;isc.PickList.addInterfaceProperties({pickListHeight:300,emptyPickListHeight:100,pickListBaseStyle:"pickListCell",pickListAnimationTime:200,fetchDelay:200,pickListCellHeight:16,pickListHeaderHeight:22,allowMultiSelect:true});isc.PickList.addInterfaceMethods({showPickList:function(a,b){this.$19g=true;this.pickList?this.setUpPickList(a,b):this.makePickList(a,
null,b);if(!a&&(!this.pickList.isDrawn()||!this.pickList.isVisible()))this.$19l()},$19l:function(){var a=this.pickList;if(!(!this.isDrawn()||this.shouldHideEmptyPickList()&&a.getTotalRows()<1)){this.placePickList();if(!a.isDrawn()||!a.isVisible())this.animatePickList?this.pickList.animateShow("wipe",null,this.pickListAnimationTime):this.pickList.show()}},fetchData:function(a,b,c){if(this.getOptionDataSource()==null)this.logWarn("fetchData() called for a non-databound pickList. Ignoring");else{if(b==
null)b={};if(a!=null){if(b.clientContext==null)b.clientContext={};b.clientContext.$03=a}b.componentContext=this.form.ID+"."+this.name;this.pickList?this.filterDataBoundPickList(b,!c):this.makePickList(false,b)}},mapValueToDisplay:function(a,b,c,d){if(this.isSelectOther){if(a==this.otherValue)return this.otherTitle;if(a==this.separatorValue)return this.separatorTitle}return this.invokeSuper(isc.SelectItem,"mapValueToDisplay",a,b,c,d)},makePickList:function(a,b,c){var d=isc.timeStamp(),e=this.reusePickList();
if(e)this.pickList=this.getSharedPickList();if(!this.pickList){var f=this.pickListProperties||{};if(this.sortField!=null)f.sortField=this.sortField;if(this.sortFieldNum!=null)f.sortFieldNum=this.sortFieldNum;if(this.sortDirection!=null)f.sortDirection=this.sortDirection;this.pickList=isc.PickListMenu.create({headerHeight:this.pickListHeaderHeight},f);f=this.pickList.dataProperties||{};if(this.filterLocally)f.fetchMode="local";this.pickList.dataProperties=f;e&&this.storeSharedPickList()}this.setUpPickList(a,
c,b);this.logIsInfoEnabled("timing")&&this.logInfo("Time to initially create pickList:"+(isc.timeStamp()-d),"timing")},cachePickListResults:true,reusePickList:function(){return this.pickListProperties==null&&this.cachePickListResults},getSharedPickList:function(){if(this.$19m()){var a=this.getOptionDataSource().getID();if(a=isc.PickListMenu.$51t[a])for(var b=0;b<a.length;b++)if(a[b].$51u==this.pickListFields){a[b].$511=isc.timeStamp();return a[b].$51v}return null}else return isc.PickList.$14w},storeSharedPickList:function(){if(this.$19m()){var a=
this.getOptionDataSource().getID(),b=isc.PickListMenu.$51t;b[a]||(b[a]=[]);var c={$51v:this.pickList,$51u:this.pickListFields,$511:isc.timeStamp()};b[a].add(c);if(isc.PickListMenu.$512==null)isc.PickListMenu.$512=1;else{isc.PickListMenu.$512+=1;if(isc.PickListMenu.$512>isc.PickListMenu.pickListCacheLimit){var d,e=isc.timeStamp();for(a in b)for(var f=b[a],g=0;g<f.length;g++){var h=f[g];if(h.$511<=e&&h!=c){d=h;e=h.$511}}if(d){isc.PickListMenu.$512-=1;a=d.$51v;f=b[a.getDataSource().getID()];f.remove(d);
if(a.$513!=null)for(var i in a.$513)window[i]&&window[i].pickList==a&&delete window[i].pickList;d.$51v.delayCall("destroy")}}}}else isc.PickList.$14w=this.pickList},getPickListCellHeight:function(){var a=this.pickListCellHeight;if(this.pickListProperties&&this.pickListProperties.cellHeight!=null)a=this.pickListProperties.cellHeight;if(this.valueIcons!=null||this.getValueIcon!=null){var b=this.getValueIconHeight();if(b>a)a=b}return a},setUpPickList:function(a,b,c){var d=this.pickList,e=this.getPickListCellHeight();
d.setCellHeight(e);this.$19n();this.setUpPickListFields();if(!d.originalEmptyMessage)d.originalEmptyMessage=d.emptyMessage;d.emptyMessage=this.emptyPickListMessage||d.originalEmptyMessage;this.filterPickList(a,b,c)},$19n:function(){var a=this.pickList.formItem;if(a!=this){var b=this.pickListProperties||{};isc.addProperties(b,{formItem:this,normalBaseStyle:this.pickListBaseStyle,tallBaseStyle:this.pickListTallBaseStyle||this.pickListBaseStyle,hiliteColor:this.pickListHiliteColor,hiliteTextColor:this.pickListHiliteTextColor,
showModal:this.modalPickList,dateFormatter:this.dateFormatter,dataArrived:function(c,d){if(isc.$cv)arguments.$cw=this;this.Super("dataArrived",arguments);this.formItem&&this.formItem.handleDataArrived(c,d,this.data)}});if(this.multiple&&this.multipleAppearance=="picklist"&&this.allowMultiSelect){b.selectionAppearance="checkbox";b.allowMultiSelect=true;b.enableSelectOnRowOver=false;b.selectionType="simple";b.className="listGrid";b.bodyStyleName="gridBody"}else{b.selectionAppearance="rowStyle";b.allowMultiSelect=
false;b.enableSelectOnRowOver=true;b.selectionType="single";b.className="scrollingMenu";b.bodyStyleName="pickListMenuBody"}this.pickList.setProperties(b);if(!this.pickList.$513)this.pickList.$513={};this.pickList.$513[this.getID()]=true;if(a){this.pickList.isObserving(a.containerWidget,"hide")&&this.pickList.ignore(a.containerWidget,"hide");this.pickList.isObserving(a.containerWidget,"clear")&&this.pickList.ignore(a.containerWidget,"clear")}this.pickList.isObserving(this.containerWidget,"hide")||
this.pickList.observe(this.containerWidget,"hide","observer.hide();");this.pickList.isObserving(this.containerWidget,"clear")||this.pickList.observe(this.containerWidget,"clear","if(observer.isDrawn())observer.clear();");this.pickList.markForRedraw()}},getPickListFields:function(){if(this.pickListFields)return this.pickListFields;var a=this.getDisplayFieldName();if(a!=null){a={width:"*",name:a};a.formatCellValue=this.$500}else a={width:"*",name:this.getValueFieldName(),valueMap:this.getValueMap()};
if(this.emptyDisplayValue!=null)a.emptyCellValue=this.emptyDisplayValue;if(this.dateFormatter!=null)a.type="date";a.$720=true;return[a]},$500:function(a,b,c,d,e){if(a!=null)return a;c=e.formItem;d=c.getValueFieldName();if(b[d]==null)return c.emptyCellValue;return a},formatPickListValue:function(a,b){if(this.pickList.getField(b).$720)return this.$17c(a);return a},getPickListFilterCriteria:function(){return isc.addProperties(this.optionCriteria||{},this.pickListCriteria)},getAllLocalOptions:function(){return this.$19m()?
null:this.getClientPickListData()},$19o:function(a,b){if(this.getOptionDataSource()!=null){var c=this.pickList&&!this.pickList.destroyed?this.pickList.data:null;if(c&&(c.localData||c.allRows)){var d=b?this.getValueFieldName():this.getDisplayFieldName(),e=b?this.getDisplayFieldName():this.getValueFieldName();if(d==e)return a;c=c.allRows||c.localData;var f;if(isc.isAn.Array(a)){f="";isc.shallowClone(a);for(var g=0;g<a.length;g++){var h=c.find(e,a[g]);if(h!=null){f+=h[d];if(g!=a.length-1)f+=this.multipleValueSeparator}}}else{h=
c.find(e,a);if(h!=null)f=h[d]}return f}}},$18q:"true",setUpPickListFields:function(){var a=this.getPickListFields(),b=this.pickList.fields,c=!b||b.length!=a.length;if(!c)for(var d=0;d<a.length;d++){var e=a[d],f=b[d],g;for(g in e)if(e[g]!=f[g]){c=true;break}if(c)break}if(c){for(d=0;d<a.length;d++)if(a[d].showIf==null)a[d].showIf=this.$18q;if(this.valueIcons!=null||this.getValueIcon!=null)for(d=0;d<a.length;d++){e=a[d];if(e[this.form.fieldIdProperty]==this.getValueFieldName()){if(e.valueIconHeight==
null)e.valueIconHeight=this.valueIconHeight;if(e.valueIconWidth==null)e.valueIconWidth=this.valueIconWidth;if(e.valueIconSize==null)e.valueIconSize=this.valueIconSize;if(e.imageURLPrefix==null)e.imageURLPrefix=this.imageURLPrefix||this.baseURL||this.imgDir;if(e.imageURLSuffix==null)e.imageURLSuffix=this.imageURLSuffix}}this.pickList.setFields(a);if(a.length>(this.multiple&&this.multipleAppearance=="picklist"&&this.allowMultiSelect==true?2:1)){this.pickList.setHeaderHeight(this.pickListHeaderHeight);
this.pickList.setShowHeader(true);this.pickList.fixedFieldWidths=true}else{this.pickList.setShowHeader(false);this.pickList.fixedFieldWidths=!this.autoSizePickList}}},$19m:function(){if(this.optionDataSource)return true;if((this.showOptionsFromDataSource||!this.valueMap)&&this.getOptionDataSource()!=null)return true;return false},filterPickList:function(a,b,c){if(b){this.$43i=a;this.fireOnPause("fetch",{target:this,methodName:"$19p",args:[null,c,true]},this.fetchDelay)}else this.$19p(a,c)},$19p:function(a,
b,c){if(c)a=this.$43i;delete this.$43i;this.$19i=a;if(this.$19m()){a=this.getOptionDataSource();this.pickList.getDataSource()!=a&&this.pickList.setDataSource(a,this.pickList.fields);this.filterDataBoundPickList(b)}else{b=this.filterClientPickListData();this.pickList.data!=b&&this.pickList.setData(b);this.filterComplete()}},$61x:function(a){if(this.$19m()&&a){var b=this.getOptionDataSource();if(a.getDataSource()==b&&a.data){var c=a.data.context;if(c.textMatchStyle!=this.textMatchStyle)return true;
if(this.optionFilterContext!=null)for(var d in this.optionFilterContext)if(this.optionFilterContext[d]!=c[d])return true;if(b.compareCriteria(a.data.criteria,this.getPickListFilterCriteria(),c)==0)return false}return true}},getFirstOptionValue:function(){var a;if(this.$19m()){var b=this.pickList||(this.reusePickList()?this.getSharedPickList():null);if(b&&!this.$61x(b)){a=b.data.get(0);a=a==null||Array.isLoading(a)?null:a[this.getValueFieldName()]}else this.fetchData(null,null,true)}else{b=this.valueMap;
if(isc.isAn.Array(b))a=b[0];else if(isc.isAn.Object(b))for(var c in b){a=c;break}}return a},getClientPickListData:function(){return isc.PickList.optionsFromValueMap(this)},$19h:function(){this.pickListHidden&&this.pickListHidden()},$19j:function(){this.pickListShown&&this.pickListShown()},selectDefaultItem:function(){return this.selectItemFromValue(this.getValue())},selectItemFromValue:function(a){isc.isAn.Array(a)||(a=[a]);for(var b=this.pickList.getSelection(),c=this.getValueFieldName(),d=true,
e,f=0;f<a.length;f++){var g=a[f],h;if(!b.find(c,g)){var i=this.pickList.getData();if((this.$19m()?this.getOptionDataSource():null)!=null){var j=i.localData;if(j)h=j.find(c,g)}else h=i.find(c,g);if(h&&h!=Array.LOADING){this.pickList.allowMultiSelect?this.pickList.selectRecord(h):this.pickList.selection.selectSingle(h);e=i.indexOf(h)}else d=false}}e!=null&&this.pickList.scrollRecordIntoView(e);return d},filterComplete:function(a,b,c){this.$43j=false;var d=this.pickList;if(!(!d||d.destroyed)){var e=
d.hasFocus||d.body&&d.body.hasFocus;b=d.getData();if(b.getLength()==0&&d.isVisible()&&d.isDrawn())if(this.hideEmptyPickList){d.hide();e&&this.focusInItem()}else{d.setHeight(this.getPickListHeight());e=this.getPickListPosition();this.allowPickListToClip?d.setRect([e[0],e[1]]):d.placeNear(e[0],e[1])}else{if(this.$19i)this.$19l();else d.isVisible()&&d.isDrawn()&&this.placePickList();delete this.$19i}this.selectDefaultItem();if(this.$43k){delete this.$43k;this.$43f(this._value)}this.$19v();(d=c&&c.clientContext?
c.clientContext.$03:null)&&this.fireCallback(d,"item,dsResponse,data,dsRequest",[this,a,b,c])}},$19v:function(){if(this.isDrawn()&&this.getValueFieldName()!=null&&this.$19m()){var a;a=this.$10v()?this.isA("SelectItem")?this.$19w:this.mapDisplayToValue(this.getElementValue()):this.getValue();if(this.getSelectedRecord()){a=this.mapValueToDisplay(a);this.$19z!=a&&!(!this.addUnknownValues&&this.isA("ComboBoxItem"))&&this.setElementValue(a)}}},filterDataBoundPickList:function(a,b){if(isc.$cv)arguments.$cw=
this;var c=this.getPickListFilterCriteria(),d={textMatchStyle:this.textMatchStyle,showPrompt:false};this.optionFilterContext!=null&&isc.addProperties(d,this.optionFilterContext);if(this.optionOperationId!=null)d.operationId=this.optionOperationId;a!=null&&isc.addProperties(d,a);var e=false;if(this.pickList.data&&isc.ResultSet&&isc.isA.ResultSet(this.pickList.data))if(b)this.pickList.data.$394();else this.pickList.data.willFetchData(c,this.textMatchStyle)||(e=true);this.pickList.filterData(c,{target:this,
methodName:"filterComplete"},d);if(e)this.filterComplete();else this.$43j=true},handleDataArrived:function(a,b,c){this.defaultToFirstOption&&this.getValue()==null&&a==0&&this.setToDefaultValue();this.$19v();this.dataArrived&&this.dataArrived(a,b,c)},dataArrived:function(){},textMatchStyle:"startsWith",$19q:"substring",separatorRows:[{isSeparator:true}],filterClientPickListData:function(){var a=this.getClientPickListData(),b=this.getPickListFilterCriteria();if(b==null||isc.isA.emptyObject(b))return a;
var c=[],d;if(this.showAllOptions)d=this.separatorRows.duplicate();var e=false,f;for(f in b){var g=b[f];if(!(!g||isc.isA.emptyString(g))){e=true;isc.isAn.Array(g)||(g=[g]);for(var h=0;h<g.length;h++){var i=g[h];isc.isA.String(i)||(i+=isc.emptyString);i=i.toLowerCase();for(var j=a.getLength(),k=this.getValueFieldName(),l=0;l<j;l++){var m=a[l][f];if(this.filterDisplayValue&&f==k)m=this.mapValueToDisplay(m);isc.isA.String(m)||(m+="");m=m.toLowerCase();if(this.textMatchStyle==this.$19q&&!m.contains(i)||
this.textMatchStyle!=this.$19q&&!isc.startsWith(m,i))this.showAllOptions&&d.add(a[l]);else c.add(a[l])}}}}e||(c=a.duplicate());this.showAllOptions&&d.length>1&&c.addList(d);return c},shouldHideEmptyPickList:function(){if(this.hideEmptyPickList!=null)return this.hideEmptyPickList;return!this.$19m()},getPickListPosition:function(){return[this.getPageLeft(),this.getPageTop()+this.getHeight()]},getPickListHeight:function(){var a=this.pickListHeight,b=this.pickList,c=b.getTotalRows();if(c==0)return this.emptyPickListHeight;
var d=b.showHeader?b.headerHeight:0;c=c*b.cellHeight;var e=b.body?b.body.getVBorderPad():isc.Element.$yo(b.bodyStyleName);d=c+d+b.getVBorderPad()+e;if(b.showFilterEditor)d+=b.filterEditorHeight;return Math.min(d,a)},$19r:function(a,b,c){var d=this.pickList;if(d.fixedFieldWidths)d.resizeTo(a,b);else{var e=d.body||d;e=c?e.getScrollbarSize():0;if(d.body)d.body.setOverflow(isc.Canvas.HIDDEN);else d.bodyOverflow=isc.Canvas.HIDDEN;var f=d.leaveScrollbarGap;d.setProperties({leaveScrollbarGap:false});d.resizeTo(a-
e,b);if(d.isDrawn())d.body.isDirty()&&d.body.redraw("pickList sizing");else{d.visibility=isc.Canvas.HIDDEN;d.draw()}b=d.body.getScrollWidth();var g=d.body?d.body.getHBorderPad():isc.Element.$yp(d.bodyStyleName);g=b+e+d.getHBorderPad()+g;d.setProperties({leaveScrollbarGap:f});if(this.logIsDebugEnabled("sizing"))this.logDebug("pickList auto-sizing: minWidth : "+a+(c?", vscrollOn":"")+", width for columns: "+(a-e)+", scrollWidth: "+b+", drawnWidth: "+g+", borderPad: "+d.getHBorderPad(),"sizing");d.setWidth(Math.max(g,
a));d.body.setOverflow(isc.Canvas.AUTO)}},placePickList:function(){var a=this.pickList,b=this.getPickListPosition(),c=b[0];b=b[1];var d=this.getPickListHeight();d==this.pickListHeight?a.setProperties({leaveScrollbarGap:true}):a.setProperties({leaveScrollbarGap:false});this.$19r(this.pickListWidth!=null?this.pickListWidth:this.getElementWidth(),d,d==this.pickListHeight);this.allowPickListToClip?a.setRect([c,b]):a.placeNear(c,b)},pickValue:function(){}});isc.A=isc.PickList;isc.B=isc._allFuncs;isc.C=
isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.optionsFromValueMap=function(a){var b=a.getValueMap(),c=[];if(b==null)b=[];a=a.getValueFieldName();if(isc.isAn.Array(b))for(var d=0;d<b.length;d++){c[d]={};c[d][a]=b[d]}else if(isc.isAn.Object(b)){d=0;for(var e in b){c[d]={};c[d][a]=e;d++}}return c});isc.B._maxIndex=isc.C+1}if(isc.ListGrid){isc.ClassFactory.defineClass("SelectItem","FormItem");isc.$19s={textBoxStyle:"selectItemText",height:19,width:150,dirtyOnKeyDown:false,
changeOnKeypress:false,redrawOnShowIcon:false,addUnknownValues:true,autoSizePickList:true,multipleAppearance:"picklist",separatorTitle:"--------------------",separatorValue:"----",otherTitle:"Other...",otherValue:"***other***"};isc.SelectItem.addProperties(isc.$19s);isc.A=isc.SelectItem.getPrototype();isc.A.showPickerIcon=true;isc.A.emptyDisplayValue="&nbsp;";isc.A.controlStyle="selectItemControl";isc.A.pickerIconStyle="selectItemPickerIcon";isc.A.canFocus=true;isc.A.showFocused=true;isc.A.pickerIconSrc=
"[SKIN]/DynamicForm/SelectItem_PickButton_icon.gif";isc.A.pickerIconDefaults={tabIndex:-1,click:function(){}};isc.A.clipValue=true;isc.A.showOver=true;isc.A.modalPickList=true;isc.A.changeOnValueChange=true;isc.A.changeOnKeyboardNavigation=true;isc.A.canSelectText=false;isc.A.allowEmptyValue=false;isc.A.autoFetchData=true;isc.A=isc.SelectItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.selectOtherPrompt="Other value for <br>${item.getTitle()}?";
isc.A.dialogWidth=250;isc.B.push(isc.A.init=function(){if(this.hiliteOnFocus!=null){this.$15o("hiliteOnFocus","showFocused");this.showFocused=this.hiliteOnFocus}if(this.pickButtonWidth!=null){this.$15o("pickButtonWidth","pickerIconWidth");this.pickerIconWidth=this.pickButtonWidth}if(this.pickButtonHeight!=null){this.$15o("pickButtonHeight","pickerIconHeight");this.pickerIconHeight=this.pickButtonHeight}if(this.pickButtonSrc!=null){this.$15o("pickButtonSrc","pickerIconSrc");this.pickerIconSrc=this.pickButtonSrc}return this.Super("init",
arguments)},isc.A.drawn=function(a,b,c,d){this.invokeSuper(isc.SelectItem,"drawn",a,b,c,d);this.autoFetchData&&this.$19m()&&this.fetchData(null,null,true)},isc.A.$16m=function(){return 0},isc.A.$121=function(a,b){if(this.getIcon(a)==this.getPickerIcon()){b.blur();this.focusInItem()}else return this.Super("$121",arguments)},isc.A.handleMouseMove=function(){if(this.showOver&&!this.isDisabled())this.$17a()?this.$164(this.getPickerIcon(),true):this.$164(this.getPickerIcon(),false);return this.Super("handleMouseMove",
arguments)},isc.A.handleMouseOut=function(){this.showOver&&!this.isDisabled()&&this.$164(this.getPickerIcon(),false);return this.Super("handleMouseOut",arguments)},isc.A.$114=function(a,b,c,d,e){if(!(this.getIcon(a)==this.getPickerIcon()&&this.$17a()))return this.invokeSuper("SelectItem","$114",a,b,c,d,e)},isc.A.handleClick=function(){if(!this.isDisabled()){this.focusInItem();this.showPickList()}return this.Super("handleClick",arguments)},isc.A.handleKeyPress=function(a){var b=this.Super("handleKeyPress",
arguments);if(b==false)return false;var c=a.keyName;if(c=="Enter"&&this.isSelectOther)this.$19u!=null&&this.updateValue();else if(c=="Arrow_Down"){isc.EH.altKeyDown()?this.showPickList():this.moveToNextValue(1);b=false}else if(c=="Arrow_Up"){isc.EH.altKeyDown()?this.showPickList():this.moveToNextValue(-1);b=false}else if(c=="Home"){this.moveToFirstValue();b=false}else if(c=="End"){this.moveToLastValue();b=false}else{c=a.characterValue;c!=null&&this.moveToChar(c)}return b},isc.A.$12x=function(){var a=
this.Super("$12x",arguments);if(this.changeOnBlur||this.$10v()||this.$19u){if(isc.Browser.isMoz&&this.$19u==this.otherValue)this.form.$11w=true;this.updateValue()}return a},isc.A.showPickList=function(){isc.PickList.getPrototype().showPickList.apply(this,arguments);if(this.pickList){this.pickList.deselectAllRecords();this.getValue()&&this.selectItemFromValue(this.getValue())}},isc.A.handleEditorExit=function(){if(!this.$19g)return this.Super("handleEditorExit",arguments)},isc.A.editorEnter=function(){this.$66s()},
isc.A.editorExit=function(a,b,c){if(this.showHintInField&&(c===void 0||c==null||isc.is.emptyString(c)))this.$66t()},isc.A.$19j=function(){this.handleEditorEnter();this.pickListShown&&this.pickListShown()},isc.A.$19h=function(){this.fireChangeOnSelect==false&&this.updateValue();this.pickListHidden&&this.pickListHidden()},isc.A.getAllLocalOptions=function(){var a;if(this.$19m()){if(!this.pickList||this.pickList.destroyed)return;a=this.pickList.data;if(!a||!a.lengthIsKnown()||!a.allMatchingRowsCached())return;
var b=this.getPickListFilterCriteria();if(a.compareCriteria(b,a.criteria)!=0){if(!a.allRowsCached()||!a.useClientFiltering)return;this.filterPickList(false,false)}a=a.getAllRows()}else a=this.getClientPickListData();return a},isc.A.moveToChar=function(a){var b=this.getAllLocalOptions();if(!(!b||b.length<2)){a=String.fromCharCode(a);if(a!=null){a=a.toLowerCase();var c=this.isSelectOther&&this.$19u!=null?this.$19u:this.$10v()?this.$19w:this.getValue(),d=this.getValueFieldName();c=b.findIndex(d,c);for(d=
c==b.length-1?0:c+1;d!=c;){if(c<0)c=0;var e=b[d][this.getValueFieldName()],f=this.mapValueToDisplay(e);if(isc.isA.String(f))if(f.charAt(0).toLowerCase()==a){this.changeToValue(e,this.changeOnValueChange&&this.changeOnKeyboardNavigation);break}d+=1;if(d>=b.length)d=0}}}},isc.A.moveToNextValue=function(a){var b=this.getAllLocalOptions();if(!(!b||b.length<2)){var c;c=this.isSelectOther&&this.$19u!=null?this.$19u:this.$10v()?this.$19w:this.getValue();var d=this.getValueFieldName();c=b.findIndex(d,c);
c+=a;c>=b.length||c<0||this.changeToValue(b[c][d],this.changeOnValueChange&&this.changeOnKeyboardNavigation)}},isc.A.moveToFirstValue=function(){if(!this.optionDataSource){var a=this.getClientPickListData(),b=this.getValueFieldName();this.changeToValue(a[0][b],this.changeOnValueChange&&this.changeOnKeyboardNavigation)}},isc.A.moveToLastValue=function(){if(!this.optionDataSource){var a=this.getClientPickListData(),b=this.getValueFieldName();this.changeToValue(a[a.length-1][b],this.changeOnValueChange&&
this.changeOnKeyboardNavigation)}},isc.A.$kk=function(){return true},isc.A.$19x=function(){if(!this.$19y)this.$19y=new Function("if(window."+this.getID()+")window."+this.getID()+".$19g=true;");return this.$19y},isc.A.$159=function(a,b,c,d){this.invokeSuper(isc.SelectItem,"$159",a,b,c,d);if(isc.Browser.isIE)if(a=this.$16v(this.getPickerIcon()))a.onmousedown=this.$19x()},isc.A.makePickList=function(){if(!this.filterLocally&&this.allowEmptyValue&&this.$19m()){if(this.pickListProperties==null)this.pickListProperties=
{};if(this.pickListProperties.dataProperties==null)this.pickListProperties.dataProperties={};this.pickListProperties.dataProperties.fetchMode="basic"}return isc.PickList.getPrototype().makePickList.apply(this,arguments)},isc.A.changeToValue=function(a,b){if((this.$19u||this.$19w||this.getValue())!=a)if(this.isSelectOther&&(a==this.separatorValue||a==this.otherValue)){this.setElementValue(this.mapValueToDisplay(a));this.$19u=a}else{delete this.$19u;this.setLocalValue(a);b&&this.updateValue()}},isc.A.setLocalValue=
function(a){this.$19w=a;if(this.isVisible()&&this.containerWidget.isDrawn()){if(a==null)a=null;this.setElementValue(this.mapValueToDisplay(a),a)}this.$18i()},isc.A.setElementValue=function(a,b,c,d,e){this.$19z=a;if(this.showHintInField&&this.getHint())if(a===void 0||a==null||isc.is.emptyString(a)){if(this.hasDataElement())this.getDataElement().className=this.$66v();else{a=this.$15h();if(a!=null)a.className=this.$66v()}if(a=this.getHint())a=a.unescapeHTML();a=a;this.$66u=true}return this.invokeSuper(isc.SelectItem,
"setElementValue",a,b,c,d,e)},isc.A.updateValue=function(){if(this.isSelectOther&&this.$19u!=null){var a=this.getSelectOtherValue(this.$19u);delete this.$19u;this.setLocalValue(a)}this.$10v()&&this.$10y(this.$19w)},isc.A.mapDisplayToValue=function(a){return a},isc.A.getSelectOtherValue=function(a){if(a==this.separatorValue)return this.$19w||this.getValue();if(a==this.otherValue){a=this.$19w||this.getValue();a==null||this.mapValueToDisplay(a);a=this.selectOtherPrompt.evalDynamicString(null,{item:this,
value:a});var b=isc.addProperties({width:this.dialogWidth},this.dialogDefaults,this.dialogProperties);isc.askForValue(a,this.getID()+".getSelectOtherValueCallback(value)",b);return true}},isc.A.getSelectOtherValueCallback=function(a){if(a!=null){a=this.mapDisplayToValue(a);this.changeToValue(a,this.changeOnValueChange)}},isc.A.setValue=function(a,b,c,d){a=this.$190(a);var e=this.$19w;if(e===void 0)e=this._value;this.invokeSuper(isc.SelectItem,"setValue",a,b,c,d);a=this.getValue();a!=e&&this.setLocalValue(a);
this.pickList&&this.pickList.isDrawn()&&this.pickListVisible()&&this.setUpPickList(true);if(!this.hasFocus&&this.showHint&&this.showHintInField&&this.getHint())if(a===void 0||a==null||isc.is.emptyString(a))this.$66t();return a},isc.A.saveValue=function(a,b,c,d,e){this.$191(this._value,a)&&delete this.$192;return this.invokeSuper(isc.SelectItem,"saveValue",a,b,c,d,e)},isc.A.$191=function(a,b){return this.addUnknownValues&&this.$192&&(a!=null&&!this.$193(a)||b!=null&&!this.$193(b))},isc.A.$10x=function(a,
b,c,d){this.invokeSuper(isc.SelectItem,"$10x",a,b,c,d);delete this.$19w},isc.A.getDefaultValue=function(){var a=this.Super("getDefaultValue",arguments);if(a==null&&this.defaultToFirstOption)a=this.getFirstOptionValue();return this.$190(a)},isc.A.$190=function(a){if(!this.$194(a)){var b=this.$195;this.$195=true;b=b?a:this.$19w||this.getValue();if(a==b||!this.$194(b))b=null;a=b}return a},isc.A.$194=function(a){if(this.addUnknownValues||this.optionDataSource)return true;if(a==null)return true;if(isc.isAn.Array(a)){for(var b=
0;b<a.length;b++)if(!this.$193(a[b]))return false;return true}else return this.$193(a)},isc.A.$193=function(a){var b=this.getValueMap();if(isc.isAn.Array(b))return b.contains(a);else if(isc.isAn.Object(b))return b[a]!==void 0;return false},isc.A.mapValueToDisplay=function(a,b,c,d){if(this.isSelectOther){if(a==this.otherValue)return this.otherTitle;if(a==this.separatorValue)return this.separatorTitle}return this.invokeSuper(isc.SelectItem,"mapValueToDisplay",a,b,c,d)},isc.A.getSelectedRecord=function(){if(this.pickList==
null||this.pickList.destroyed)this.makePickList(false);var a=this.$19w;if(a===void 0)a=this.getValue();if(this.selectItemFromValue(a))return this.pickList.getSelectedRecord();return this.Super("getSelectedRecord",arguments)},isc.A.getSelectedRecords=function(){this.selectItemFromValue(this.$19w);var a=this.pickList.getSelection();return a.length>0?a:null},isc.A.$17b=function(a,b,c,d,e,f){c=this.invokeSuper(isc.SelectItem,"$17b",a,true,c,d,e,f);if(c==null&&this.getDisplayFieldName()!=null)c=this.$19o(a,
false);if(c==null&&!b)c=a;return c},isc.A.$43f=function(a){if(this.$17b(a,true)==null)if(this.$43j)this.$43k=true;else this.invokeSuper(isc.ComboBoxItem,"$43f",a)},isc.A.getClientPickListData=function(){if(this.$192)return this.$192;var a=isc.PickList.optionsFromValueMap(this),b=this.getValueFieldName();this.allowEmptyValue&&a.find(b,null)==null&&a.addAt({},0);var c=this.getValue();if(c!=null&&!isc.isAn.Array(c)&&a.find(b,c)==null){var d={};d[b]=c;a.addAt(d,0)}if(this.isSelectOther){c={};d={};c[b]=
this.separatorValue;d[b]=this.otherValue;a.addListAt([c,d],a.length)}return this.$192=a},isc.A.formatPickListValue=function(a,b){if(this.isSelectOther&&b==this.getValueFieldName()){if(a==this.otherValue)return this.otherTitle;if(a==this.separatorValue)return this.separatorTitle}if(this.pickList.getField(b).$720)return this.$17c(a);return a},isc.A.pickValue=function(a){if(this.isSelectOther)if(this.getSelectOtherValue(a))return;this.changeToValue(a,this.changeOnValueChange&&this.fireChangeOnSelect!=
false)},isc.A.getPickListPosition=function(){var a=this.getPageTop(),b=a+this.getHeight(),c=this.getPageLeft(),d=this.getPickListHeight(),e=isc.Page.getScrollTop(),f=isc.Page.getHeight()+e;if(b+d>f)b=Math.max(e,a-d);return[c,b]},isc.A.setValueMap=function(){this.Super("setValueMap",arguments);this.$192&&delete this.$192;if(this.hasPickList()){this.pickList.isVisible()&&this.pickList.isDrawn()&&this.pickList.hide();delete this.pickList.formItem}var a=this.getValue(),b=this.$190(a);a!=b?this.setValue(b):
this.setElementValue(this.mapValueToDisplay(b))},isc.A.hasPickList=function(){return this.pickList&&!this.pickList.destroyed&&this.pickList.formItem==this},isc.A.pickListVisible=function(){return this.hasPickList()&&this.pickList.isDrawn()&&this.pickList.isVisible()},isc.A.cleared=function(){this.pickListVisible()&&this.pickList.hide();return this.Super("cleared",arguments)},isc.A.filterComplete=function(){if(this.allowEmptyValue&&this.$19m()){var a=this.pickList.data,b=a.isLocal()?a.allRows:a.localData;
b&&!b.find(this.getValueFieldName(),null)&&a.insertCacheData({},0)}isc.PickList.getPrototype().filterComplete.apply(this,arguments)});isc.B._maxIndex=isc.C+54;isc.ClassFactory.mixInInterface("SelectItem","PickList");isc.SelectItem.registerStringMethods({dataArrived:"startRow,endRow,data",getPickListFilterCriteria:""})}isc.ClassFactory.defineClass("NativeSelectItem","FormItem");isc.A=isc.NativeSelectItem;isc.A.DEFAULT_ROW_COUNT=6;isc.A.instances=[];isc.NativeSelectItem.addProperties(isc.$19s);isc.A=
isc.NativeSelectItem.getPrototype();isc.A.height=null;isc.A.$125=true;isc.A.$15i=true;isc.A.$16b={onchange:isc.FormItem.$12y};isc.A=isc.NativeSelectItem;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getOptionsHTML=function(a,b){var c=isc.SB.create();if(isc.isAn.Array(a))for(var d=0,e=a.length;d<e;d++){var f=a[d];c.append(this.$196(f,f,b))}else for(f in a)c.append(this.$196(f,a[f],b));return c.toString()},isc.A.$196=function(a,b,c){var d=
this.$197;if(!d){this.$198=" SELECTED ";d=this.$197=[];d[0]="<OPTION ";d[2]=' VALUE="';d[4]='">';d[6]="</OPTION>"}d[1]=a==c?this.$198:null;d[3]=a;d[5]=b;return d.join(isc.$ad)},isc.A.getOptionCount=function(a){if(isc.isAn.Array(a))return a.length;else{var b=0,c;for(c in a)b++;return b}});isc.B._maxIndex=isc.C+3;isc.A=isc.NativeSelectItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.textMatchStyle="startsWith";isc.B.push(isc.A.getPickListFilterCriteria=
function(){return isc.addProperties(this.optionCriteria||{},this.pickListCriteria)},isc.A.init=function(){this.Super("init",arguments);isc.NativeSelectItem.instances.add(this);if(this.optionDataSource){var a=this.getOptionDataSource(),b=this.getValueFieldName(),c=this.getDisplayFieldName(),d=this,e={textMatchStyle:this.textMatchStyle,showPrompt:false};this.optionFilterContext!=null&&isc.addProperties(e,this.optionFilterContext);if(this.optionOperationId!=null)e.operationId=this.optionOperationId;
var f=this.getPickListFilterCriteria();a.fetchData(f,function(g,h){var i;i=c?{}:[];for(var j=0;j<h.getLength();j++){var k=h[j];if(c)i[k[b]]=k[c];else i.add(k[b])}d.setValueMap(i)},e)}},isc.A.destroy=function(){isc.NativeSelectItem.instances.remove(this);this.Super("destroy",arguments)},isc.A.getTextBoxCellCSS=function(){return this.$136},isc.A.getElementHTML=function(a,b){this.$199=false;this.form.getID();var c=isc.StringBuffer.newInstance();this.getItemID();var d=isc.$ad,e=this.$xq(b);e!=null&&c.append(e);
if(!this.showValueIconOnly){c.append("<SELECT"," NAME=",this.getElementName()," ID=",this.getDataElementId(),this.$155(),!this.showTitle&&this.accessKey!=null?" ACCESSKEY="+this.accessKey:d,this.isDisabled()?" DISABLED ":d,this.getElementStyleHTML(),this.multiple?" MULTIPLE":d," TABINDEX=",this.$154()," handleNativeEvents=false>");c.append(this.getOptionsHTML(this.getValueMap()));c.append("</SELECT>")}return c.toString()},isc.A.$12z=function(a){if(isc.Browser.isIE&&!a){isc.Timer.setTimeout(this.getID()+
".$12z(true)",10);return true}return this.form.elementChanged(this.getID())},isc.A.$12x=function(){this.Super("$12x",arguments);this.changeOnBlur&&this.form.elementChanged(this)},isc.A.getOptionsHTML=function(a){a=isc.NativeSelectItem.getOptionsHTML(a?a:this.getValueMap());if(this.isSelectOther)a+='<OPTION VALUE="'+this.separatorValue+'">'+this.separatorTitle+'<OPTION VALUE="'+this.otherValue+'">'+this.otherTitle;return a},isc.A.getOptionCount=function(a){return isc.NativeSelectItem.getOptionCount(a?
a:this.getValueMap())},isc.A.getElementStyleHTML=function(){var a=isc.SB.create(),b=isc.SB.create();this.textBoxStyle!=null&&a.append(" CLASS='",this.getTextBoxStyle(),"' ");if(this.multiple||this.rows){var c=this.rows;if(!isc.isA.Number(c)||c<1)c=Math.min(isc.NativeSelectItem.DEFAULT_ROW_COUNT,this.getOptionCount());this.height&&isc.isA.Number(this.height)&&b.append("HEIGHT:",this.height,"px;");a.append(" SIZE=",c)}if(isc.Browser.isDOM){c=this.getElementWidth();if(isc.isA.Number(c)){c=Math.max(c,
1);b.append("WIDTH:",c,"px;")}if(isc.Browser.isMoz)b.append("-moz-user-focus:",this.$154()>0?"normal;":"ignore;");b.append("margin-top:0px;margin-bottom:0px;");b=b.toString();b.length>0&&a.append(" STYLE='",b,"'")}return a.toString()},isc.A.$16z=function(){if(isc.isA.Number(this.width))return this.Super("$16z",arguments)},isc.A.$16m=function(){return 0},isc.A.mapValueToDisplay=function(a){if(isc.isAn.Array(a)){for(var b=[],c=0;c<a.length;c++)b[c]=this.mapValueToDisplay(a[c]);return b}return this.Super("mapValueToDisplay",
arguments)},isc.A.setElementValue=function(a,b){if(arguments.length==1)b=a;var c=this.getDataElement();if(!c)return null;var d=c.options;if(!d){this.logDebug("setElementValue(): element.options is null. ???");return null}this.$17j(b);if(this.multiple){b=b==null?[]:isc.isA.String(b)&&b.contains(",")?b.split(","):isc.isAn.Array(b)?b.duplicate():[b];a=a==null?[]:isc.isA.String(a)&&a.contains(",")?a.split(","):isc.isAn.Array(a)?a.duplicate():[a];for(g=0;g<d.length;g++){var e=c.options[g],f=b.indexOf(e.value);
if(f>-1){if(e.selected!=true)e.selected=true;b.removeItem(f)}else if(e.selected!=false)e.selected=false}if(b.length!=0)for(g=0;g<d.length;g++){e=c.options[g];f=b.indexOf(e.text);if(f>-1){if(e.selected!=true)e.selected=true;b.removeItem(f)}}if(b.length!=0&&this.addUnknownValues)for(g=0;g<b.length;g++)(d[d.length]=new Option(b[g],a[g])).selected=true;return b}else{if(b==null)b="";for(var g=0;g<d.length;g++)if(d[g].value==b){if(c.selectedIndex!=g)c.selectedIndex=g;return c.selectedIndex}for(g=0;g<d.length;g++)if(d[g].text==
b){if(c.selectedIndex!=g)c.selectedIndex=g;c.selectedIndex=g;return c.selectedIndex}if(this.addUnknownValues){if(isc.Browser.isIE){e=0;if(this.$199){d[e].text=a;d[e].value=b}else{d.add(new Option(b,a),e);this.$199=true}}else if(this.$199){e=d.length-1;d[e].value=b;d[e].text=a}else{e=d.length;d[e]=new Option(b,a);this.$199=true}if(c.selectedIndex!=e)c.selectedIndex=e;return c.selectedIndex}else return null}},isc.A.getElementValue=function(){var a=this.getDataElement();if(!a)return null;var b=a.options;
if(!b||b.length==0)return null;if(this.multiple){a=[];for(var c=0;c<b.length;c++){d=b[c];if(d.selected)a.add(d.value!=null?d.value:d.text)}if(a.length<2)return a[0];return a}else{var d=b[a.selectedIndex];if(!d)return null;return d.value!=null?d.value:d.text}},isc.A.setElementValueMap=function(a){this.$199=false;this.Super("setElementValueMap",arguments);var b=this.getDataElement();if(b!=null){b=b.options;b.length=0;if(isc.isAn.Array(a))for(var c=0;c<a.length;c++)b[c]=new Option(a[c],a[c]);else for(c in a)b[b.length]=
new Option(a[c],c);if(this.isSelectOther){b[b.length]=new Option(this.separatorTitle,this.separatorValue);b[b.length]=new Option(this.otherTitle,this.otherValue)}}},isc.A.updateValue=function(){if(this.isSelectOther){if(!this.hasElement()||this.getDataElement()==null)return;var a=this._value,b=this.getElementValue();if(b==this.separatorValue){this.setValue(a);return false}if(b==this.otherValue){b=this.getValueMapTitle(a);b=prompt("Other value for \r'"+this.getTitle()+"'?",b?b:"");if(b==null){this.setValue(a);
return false}this.setElementValue(b)}}return this.Super("updateValue",arguments)});isc.B._maxIndex=isc.C+17;isc.defineClass("CycleItem","FormItem");isc.A=isc.CycleItem.getPrototype();isc.A.canSelectText=false;isc.A.canFocus=true;isc.A.iconVAlign="middle";isc.A=isc.CycleItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.handleKeyPress=function(){if(isc.EH.getKey()=="Space"){this.advanceValue();return false}return this.Super("handleKeyPress",
arguments)},isc.A.handleClick=function(){if(!this.isDisabled()){this.hasFocus||this.focusInItem();this.advanceValue()}},isc.A.handleDoubleClick=function(){this.isDisabled()||this.advanceValue()},isc.A.advanceValue=function(){var a=this.getValueMap();if(isc.isA.Object(a)&&!isc.isA.Array(a))a=isc.getKeys(a);if(a==null||a.length<2)this.logInfo("CycleItem is non interactive as there are no options for this item.");else{var b=this.getValue();b=a.indexOf(b);if(b==a.length-1)b=-1;a=a[b+1];if(!this.compareValues(a,
this._value)){this.setElementValue(this.mapValueToDisplay(a),a);this.$10y(a)}}});isc.B._maxIndex=isc.C+4;isc.defineClass("CheckboxItem","CycleItem");isc.A=isc.CheckboxItem;isc.A.trueFalseValueMap=[true,false];isc.A.trueFalseNullValueMap=[true,false,null];isc.A=isc.CheckboxItem.getPrototype();isc.A.textBoxStyle="labelAnchor";isc.A.showLabel=true;isc.A.height=20;isc.A.requiredTitlePrefix="<b>";isc.A.requiredTitleSuffix="</b>";isc.A.valueIconLeftPadding=4;isc.A.valueIconRightPadding=3;isc.A.showValueIconOver=
true;isc.A.showValueIconFocused=true;isc.A.showValueIconDown=true;isc.A.showValueIconDisabled=true;isc.A.checkedImage="[SKINIMG]/DynamicForm/checked.gif";isc.A.uncheckedImage="[SKINIMG]/DynamicForm/unchecked.gif";isc.A.partialSelectedImage="[SKINIMG]/DynamicForm/partialcheck.gif";isc.A.unsetImage="[SKINIMG]/DynamicForm/unsetcheck.gif";isc.A.valueIconWidth=13;isc.A.valueIconHeight=13;isc.A=isc.CheckboxItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=
isc.A.Class;isc.A.allowEmptyValue=false;isc.A.$18q="true";isc.A.$18r="false";isc.A.emptyValueKey="**NULL**";isc.A.$13u="Over";isc.A.$13v="Down";isc.A.$13w="Disabled";isc.A.$20a="height:";isc.A.$ph="px";isc.B.push(isc.A.getValueMap=function(){if(this.$20b)return this.$20b;var a=this.Super("getValueMap",arguments);if(a!=null){var b=false,c=isc.isAn.Object(a);if(isc.isAn.Array(a)){c=false;if(a.length!=2)a=null;else{var d=a.indexOf(this.$18r);if(d!=-1)a[d]=false;d=a.indexOf(this.$18q);if(d!=-1)a[d]=true;
if(a[0]&&!a[1]||!a[0]&&a[1])b=true;else{this.logInfo("Checkbox item created with valueMap:"+a+"which has no explicit true/false display values. Mapping the first value to true and the second to false.");c={};c[a[0]]=true;c[a[1]]=false;this.valueMap=a=c;c=true}}}if(c){c=[];d=[];var e,f;for(f in a){if(c.length==2){e=true;break}var g=a[f];if(f==this.$18r)f=false;else if(f==this.$18q)f=true;if(g==this.$18r)g=a[f]=false;else if(g==this.$18q)g=a[f]=true;d[d.length]=f;c[c.length]=g}if(c.length!=2)e=true;
if(!e)if(!(c[0]&&!c[1]||!c[0]&&c[1]))if(d[0]&&!d[1]||!d[0]&&d[1])a=d;else e=true;if(e)a=null}else b||(a=null)}if(a&&this.allowEmptyValue)if(b)a.add(null);else a[this.emptyValueKey]=null;return this.$20b=a||(this.allowEmptyValue?isc.CheckboxItem.trueFalseNullValueMap:isc.CheckboxItem.trueFalseValueMap)},isc.A.$17d=function(){var a=this.Super("$17d",arguments);if(a==this.emptyValueKey)a=null;return a},isc.A.setValueMap=function(){this.$20b=null;return this.Super("setValueMap",arguments)},isc.A.init=
function(a,b,c,d){this.invokeSuper(isc.CheckboxItem,"init",a,b,c,d);if(this.showValueIconOnly==null)this.showValueIconOnly=!this.showLabel;if(this.textAlign==null&&this.align!=null)this.textAlign=this.align},isc.A.setShowLabel=function(a){this.showLabel=a;this.showValueIconOnly=!a;this.isDrawn()&&this.redraw()},isc.A.mapValueToDisplay=function(a,b,c,d){if(this.labelAsTitle)return isc.emptyString;a=this.invokeSuper(isc.CheckboxItem,"getTitleHTML",a,b,c,d);b=this.form;if((this.required||this.$11m)&&
b&&b.hiliteRequiredFields)a=this.requiredTitlePrefix+a+this.requiredTitleSuffix;return a},isc.A.getValueIcon=function(a){var b=this.getValueMap();if(!isc.isAn.Array(b)&&isc.isAn.Object(b))a=b[a];if(a)return this.checkedImage;else if(a===false)return this.uncheckedImage;else{if(this.showUnsetImage!=null)return this.showUnsetImage?this.unsetImage:this.uncheckedImage;return this.allowEmptyValue?this.unsetImage:this.uncheckedImage}},isc.A.getTitleHTML=function(a,b,c){if(this.labelAsTitle)return this.invokeSuper(isc.CheckboxItem,
"getTitleHTML",a,b,c);return isc.emptyString},isc.A.$15s=function(){return true},isc.A.getTextBoxHeight=function(){return null},isc.A.getTextBoxCellCSS=function(){var a=isc.Canvas.$42a,b=this.invokeSuper(isc.CheckboxItem,"getTextBoxHeight");if(b&&isc.isA.Number(b))a+=this.$20a+b+this.$ph;return a});isc.B._maxIndex=isc.C+11;isc.ClassFactory.defineClass("NativeCheckboxItem","FormItem");isc.A=isc.NativeCheckboxItem.getPrototype();isc.A.textBoxStyle="labelAnchor";isc.A.implementsPromptNatively=isc.screenReader;
isc.A.$183="CHECKBOX";isc.A.$125=true;isc.A.showLabel=true;isc.A.$16b={onclick:isc.FormItem.$12y};isc.A=isc.NativeCheckboxItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$20c=["<TABLE CELLSPACING=0 CELLPADDING=0 BORDER=0><TR>","<TD WIDTH=20><INPUT TYPE=",," NAME=",," ID=",,,,,,," handleNativeEvents=false ",,,," TABINDEX=",,isc.Browser.isMoz?" STYLE='-moz-user-focus:":null,,"></TD>",,"</TR></TABLE>"];isc.A.$20d=["<TD CLASS='",,"' ALIGN=LEFT",
,,,," style='",,"'>",,"</TD>"];isc.A.$20e=["<A HREF='javascript:void ",,".boxTitleClick()' ONMOUSEOVER='window.status = \"",,"\"; return true' ONMOUSEOUT='window.status = \"\"; return true' CLASS='",,"' title=\"",,'">',,"</A>"];isc.B.push(isc.A.getInnerWidth=function(a,b,c,d){if(!this.showLabel||this.showValueIconOnly)return 20;return this.invokeSuper(isc.NativeCheckboxItem,"getInnerWidth",a,b,c,d)},isc.A.getElementHTML=function(a){this.form.getID();var b=this.getItemID(),c=this.$20c,d=this.getAnchorTitle();
c[2]=this.$183;c[4]=this.getElementName();c[6]=this.getDataElementId();c[7]=this.$155();if(this.value!=null){c[8]=" VALUE='";c[9]=this.value;c[10]="'";if(this.containerWidget&&this.containerWidget.isPrinting)if(a==this.value)c[10]+=" CHECKED='true'"}else{c[8]=null;c[9]=null;c[10]=null}c[11]=this.isDisabled()?" DISABLED":null;if(this.implementsPromptNatively)if(this.prompt!=null){c[13]=" TITLE='";c[14]=this.prompt;c[15]="'"}else c[13]=c[14]=c[15]=null;a=this.$154();c[17]=a;if(isc.Browser.isMoz)c[19]=
a>0?"normal;'":"ignore;'";if(this.showLabel&&!this.showValueIconOnly){a=this.getElementWidth();var e=this.getInnerHeight();if(isc.isA.Number(a))a=Math.max(20,a-20);if(isc.Browser.isSafari&&!this.isDisabled()){var f=this.$20e;f[1]=b;f[3]=this.prompt;f[5]=this.getTextBoxStyle();f[7]=this.prompt;f[9]=d;d=f.join(isc.emptyString)}b=this.$20d;b[1]=this.getTextBoxStyle();if(a!=null){b[3]=" WIDTH=";b[4]=a}else{b[3]=null;b[4]=null}if(e!=null){b[5]=" HEIGHT=";b[6]=e}else{b[5]=null;b[6]=null}b[8]=this.wrap==
false?this.$136:null;b[10]=d;c[21]=b.join(isc.emptyString)}else c[21]=null;return c.join(isc.emptyString)},isc.A.getOuterElement=function(a,b,c){if(!this.isDrawn())return null;!this.$15s(this.$158)&&!this.showPickerIcon&&this.getDataElement();return this.invokeSuper(isc.NativeCheckboxItem,"getOuterElement",a,b,c)},isc.A.getTitleHTML=function(){return""},isc.A.getAnchorTitle=function(a,b,c,d){return this.invokeSuper(isc.NativeCheckboxItem,"getTitleHTML",a,b,c,d)},isc.A.setElementValue=function(a){var b=
this.getDataElement();if(!b)return null;return b.checked=a&&a!="false"},isc.A.getElementValue=function(){var a=this.getDataElement();if(!a)return null;return a.checked==true},isc.A.boxTitleClick=function(){var a=this.getDataElement();if(a)a.checked=!a.checked;this.form.elementChanged(this.getItemID())},isc.A.updateDisabled=function(){this.isDrawn()&&this.redraw()});isc.B._maxIndex=isc.C+9;isc.ClassFactory.defineClass("HeaderItem","FormItem");isc.A=isc.HeaderItem.getPrototype();isc.B=isc._allFuncs;
isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.shouldSaveValue=false;isc.A.defaultValue="Header";isc.A.height=20;isc.A.showTitle=false;isc.A.textBoxStyle="headerItem";isc.A.colSpan="*";isc.A.startRow=true;isc.A.endRow=true;isc.A.emptyDisplayValue="&nbsp;";isc.B.push(isc.A.isEditable=function(){return false});isc.B._maxIndex=isc.C+1;isc.defineClass("SectionItem","CanvasItem");isc.A=isc.SectionItem.getPrototype();isc.A.shouldSaveValue=false;isc.A.defaultValue="Section Header";
isc.A.sectionVisible=true;isc.A.sectionExpanded=true;isc.A.sectionHeaderClass="SectionHeader";isc.A.canCollapse=true;isc.A.autoDestroy=true;isc.A.showTitle=false;isc.A.startRow=true;isc.A.endRow=true;isc.A.colSpan="*";isc.A.width="*";isc.A.height=20;isc.addGlobal("GroupItem",isc.SectionItem);isc.A=isc.SectionItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function(){if(this.sectionVisible==false)this.sectionExpanded=
false;this.Super("init",arguments)},isc.A.$18y=function(){var a=isc.ClassFactory.getClass(this.sectionHeaderClass),b={autoDraw:false,section:this,title:this.defaultValue,expanded:this.sectionExpanded,layout:this,height:this.height,canCollapse:this.canCollapse,canDrag:false,getCurrentCursor:function(){if(this.canvasItem&&this.canvasItem.cursor!=null)return this.canvasItem.cursor;return this.canCollapse==false?isc.Canvas.DEFAULT:isc.Canvas.HAND}};if(this.baseStyle!=null)b.baseStyle=this.baseStyle;if(this.printStyleName!=
null)b.printStyleName=this.printStyleName;isc.addProperties(b,this.canvasDefaults,this.canvasProperties);this.canvas=a.create(b);this.Super("$18y",arguments)},isc.A.isEditable=function(){return false},isc.A.isExpanded=function(){return this.sectionExpanded==true?true:false},isc.A.setValue=function(){this.Super("setValue",arguments);this.canvas&&this.canvas.setTitle(this.getValue())},isc.A.sectionHeaderClick=function(){this.cellClick()},isc.A.cellClick=function(){this.sectionExpanded?this.collapseSection():
this.expandSection()},isc.A.expandSection=function(){this.form.$100(this);this.$20f();if(this.itemIds==null)this.logWarn("sectionItem defined with no items or itemIds");else{for(var a=0;a<this.itemIds.length;a++){var b=this.itemIds[a],c=this.form.getItem(b);if(c==null)this.logWarn("expandSection: no such item: "+b);else{if(c.showIf==null&&c.$20g!=null)c.showIf=c.$20g;c.show(true)}}this.canvas.setExpanded(true);this.sectionExpanded=true;this.form.$10m=true}},isc.A.$20f=function(){if(this.items!=null&&
!this.$20h){this.form.addItems(this.items,this.form.items.indexOf(this)+1);this.itemIds=[];for(var a=0;a<this.items.length;a++){this.itemIds[a]=this.items[a].getFieldName();this.itemIds[a]==null&&this.logWarn("unable to include item:"+this.items[a]+" with no name in section")}this.$20h=true}},isc.A.addItem=function(a,b){this.form.addItems(a,this.form.items.indexOf(this)+1+(b||0));this.itemIds=this.itemIds||[];this.itemIds.add(a.name)},isc.A.removeItem=function(a){this.itemIds.remove(isc.isA.Object(a)?
a.name:a);this.form.removeItems(a)},isc.A.getItem=function(a){return this.form.getItem(a)},isc.A.collapseSection=function(){this.form.$101(this);if(this.itemIds==null){if(this.items==null||this.$20h){this.logWarn("collapseSection with no sectionItem.itemIds");return}}else for(var a=0;a<this.itemIds.length;a++){var b=this.itemIds[a],c=this.form.getItem(b);if(c==null)this.logWarn("collapseSection: no such item: "+b);else{if(c.showIf!=null)c.$20g=c.showIf;c.hide()}}this.canvas.setExpanded(false);this.sectionExpanded=
false;this.form.$10m=true});isc.B._maxIndex=isc.C+13;isc.ClassFactory.defineClass("HiddenItem","FormItem");isc.A=isc.HiddenItem.getPrototype();isc.A.showTitle=false;isc.A.cellStyle=null;isc.A.width=0;isc.A.height=0;isc.A.colSpan=0;isc.A.rowSpan=0;isc.A.$125=true;isc.A.canFocus=false;isc.A=isc.HiddenItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.isEditable=function(){return false},isc.A.getInnerHTML=function(){return isc.StringBuffer.concat("<INPUT ID='",
this.getDataElementId(),"' TYPE=HIDDEN NAME=",this.getElementName(),">").toString()},isc.A.getRowSpan=function(){return 0},isc.A.getColSpan=function(){return 0},isc.A.shouldShowTitle=function(){return false},isc.A.getErrorHTML=function(a){this.logError("Error in hidden field '"+this.getFieldName()+"':\r  "+a);return null},isc.A.isStartRow=function(){return false},isc.A.isEndRow=function(){return false});isc.B._maxIndex=isc.C+8;isc.ClassFactory.defineClass("StaticTextItem","FormItem");isc.A=isc.StaticTextItem.getPrototype();
isc.A.height=null;isc.A.width=null;isc.A.wrap=true;isc.A.textBoxStyle="staticTextItem";isc.A.redrawOnShowIcon=false;isc.A.outputAsHTML=false;isc.A.emptyDisplayValue="&nbsp;";isc.A=isc.StaticTextItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.mapValueToDisplay=function(a,b,c,d,e){b=this.invokeSuper(isc.StaticTextItem,"mapValueToDisplay",a,b,c,d,e);if((c=this.outputAsHTML||this.asHTML)&&(a==null||a==isc.emptyString)&&b==
this.$54t)c=false;if(isc.isA.String(b)&&c)b=b.asHTML();return b},isc.A.isEditable=function(){return false});isc.B._maxIndex=isc.C+2;isc.ClassFactory.defineClass("LinkItem","StaticTextItem");isc.A=isc.LinkItem.getPrototype();isc.A.wrap=false;isc.A.canFocus=true;isc.A=isc.LinkItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$14g=["<DIV ID='",,"' "+isc.DynamicForm.$89+"='",,"' "+isc.DynamicForm.$9a+"='"+isc.DynamicForm.$9c,"' CLASS='",
,"' STYLE='",,"' onclick='if(window.",,") return ",,".$30i(event);","'>",,"</DIV>"];isc.B.push(isc.A.$15m=function(){return false},isc.A.$20i=function(){if(!this.isDrawn())return null;return isc.Element.get(this.getID()+"$20j")},isc.A.getFocusElement=function(){return this.$20i()},isc.A.$30i=function(a){var b=this.destroyed||!this.isDrawn()||!this.isVisible();if(!b)if((b=isc.EH.targetIsMasked(this.containerWidget))&&this.form!=this.containerWidget)b=isc.EH.targetIsMasked(this.form);if(this.target==
"javascript"){b=true;this.handleClick()}if(b){isc.Browser.isIE||a.preventDefault();return false}return true},isc.A.getElementHTML=function(a){a=this.getLinkHTML(a);var b=this.$14g;b[1]=this.$15g();b[3]=this.getID();b[6]=this.getTextBoxStyle();b[8]=this.getTextBoxCSS();b[10]=this.getID();b[12]=this.getID();b[15]=a;return b.join(isc.emptyString)},isc.A.getLinkHTML=function(a){var b=this.$xq(this._value);if(this.showValueIconOnly)return b;if(a!=null)a=isc.iscToLocaleString(a);if(a==null)a=isc.emptyString;
var c=this.linkTitle;if(c==null)c=a;var d=this.target;if(d=="javascript")a="javascript:void";a=isc.Canvas.linkHTML(a,c,d,this.getID()+"$20j",this.getGlobalTabIndex(),this.accessKey);if(b!=null)a=b+a;return a},isc.A.setElementValue=function(a){if(this.isDrawn()){var b=this.$15h();if(b)b.innerHTML=this.getLinkHTML(a);this.$159()}},isc.A.setLinkTitle=function(a){this.linkTitle=a;this.redraw()});isc.B._maxIndex=isc.C+8;isc.ClassFactory.defineClass("PasswordItem","TextItem");isc.A=isc.PasswordItem.getPrototype();
isc.A.$183="PASSWORD";isc.ClassFactory.defineClass("RadioGroupItem","ContainerItem");isc.A=isc.RadioGroupItem.getPrototype();isc.A.itemHeight=20;isc.A.vertical=true;isc.A.prompt=null;isc.A.textBoxStyle="labelAnchor";isc.A=isc.RadioGroupItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.$11d=function(){return false},isc.A.setItems=function(){var a=this.getValueMap();if(!this.itemCache)this.itemCache={};var b=[];if(isc.isAn.Array(a))for(var c=
0;c<a.length;c++){var d=a[c];b.add(this.$20k(d,d))}else for(d in a)b.add(this.$20k(a[d],d));return this.Super("setItems",[b])},isc.A.$20k=function(a,b){var c=this.itemCache[b+"|"+a];if(c){delete c._value;delete c.hasFocus;delete c.disabled}else{var d;if(this.itemPrompt)d=this.itemPrompt.replace(RegExp("\\*","g"),a);c={type:"radio",name:"$540"+b,value:b,getElementName:function(){return this.parentItem.getElementName()},title:a,prompt:d,height:this.itemHeight,$8l:this.vertical,textBoxStyle:this.textBoxStyle,
wrap:this.wrap,updateValue:function(){this.parentItem.updatePreviousSelection(this.value);return this.Super("updateValue",arguments)},shouldSaveValue:false};isc.addProperties(c,this.itemProperties);c=this.itemCache[b+"|"+a]=isc.FormItemFactory.makeItem(c)}return c},isc.A.getItemValue=function(a){var b=a.value;if(b==this.getValue())return b;return a.unselectedValue},isc.A.itemForValue=function(a){return this["$540"+a]},isc.A.setValueDisabled=function(a,b){var c=this.itemForValue(a);c&&this.items.contains(c)&&
c.setDisabled(b)},isc.A.getInnerHTML=function(){this.setItems();return this.Super("getInnerHTML",arguments)},isc.A.isEditable=function(){return true},isc.A.setValue=function(a){this.$17g=true;var b=this.valueMap==null||(isc.isAn.Array(this.valueMap)?!this.valueMap.contains(a):!isc.propertyDefined(this.valueMap,a));if(a==null||b)a=this.getDefaultValue();if(this.items!=null){this.itemForValue(a)!=null&&this.itemForValue(a).setValue(a);if(this._value!=null&&this._value!=a)if(b=this.itemForValue(this._value))b._value=
null}this.saveValue(a)},isc.A.updatePreviousSelection=function(a){var b=this.getValue();if(isc.isA.String(a))b+="";b==null||a==b||this.itemForValue(b)==null||this.itemForValue(b).updateValue()},isc.A.updateValue=function(){for(var a,b=0;b<this.items.length;b++){a=this.items[b].getValue();if(a!=null)break}if(a!=this._value)if(this.handleChange(a,this._value)!=false){a=this.$17n;this.saveValue(a);this.handleChanged(a)}},isc.A.setValueMap=function(){this.Super("setValueMap",arguments);this.redraw()},
isc.A.getHeight=function(){var a=this.getValueMap(),b=0;if(isc.isAn.Array(a))b=a.length;else for(var c in a)b++;return b*this.itemHeight});isc.B._maxIndex=isc.C+13;isc.ClassFactory.defineClass("RadioItem","NativeCheckboxItem");isc.A=isc.RadioItem.getPrototype();isc.A.$183="RADIO";isc.A.value=true;isc.A.defaultValue=null;isc.A=isc.RadioItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.setElementValue=function(a){var b=this.getDataElement();
if(!b)return null;if(isc.isA.String(this.value))a+="";return b.checked=this.value==a},isc.A.getElementValue=function(){var a=this.getDataElement(),b=this.value,c=this.unselectedValue;if(!a)return c;return a.checked?b:c},isc.A.boxTitleClick=function(){var a=this.getDataElement();if(a&&!a.checked){a.checked=true;this.form.elementChanged(this.getItemID())}},isc.A.mapValueToDisplay=function(a){return a},isc.A.mapDisplayToValue=function(a){return a});isc.B._maxIndex=isc.C+5;isc.ClassFactory.defineClass("ResetItem",
"ButtonItem");isc.A=isc.ResetItem.getPrototype();isc.A.title="Reset";isc.A=isc.ResetItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.handleClick=function(){if(this.Super("handleClick",arguments)==false)return false;this.form.resetValues()});isc.B._maxIndex=isc.C+1;if(isc.ListGrid){isc.defineClass("DateItem","ContainerItem");isc.A=isc.DateItem;isc.A.mapCache={};isc.A.DAY_MONTH_YEAR="DMY";isc.A.MONTH_DAY_YEAR="MDY";isc.A.YEAR_MONTH_DAY=
"YMD";isc.A.DAY_MONTH="DM";isc.A.MONTH_DAY="MD";isc.A.YEAR_MONTH="YM";isc.A.MONTH_YEAR="MY";isc.A.DEFAULT_START_DATE=new Date(1995,0,1);isc.A.DEFAULT_END_DATE=new Date(2015,11,31);isc.A.DEFAULT_CENTURY_THRESHOLD=25;isc.A.chooserWidth=150;isc.A.chooserHeight=171;isc.A=isc.DateItem.getPrototype();isc.A.textFieldDefaults={name:"dateTextField",type:"text",changeOnBlur:true,changeOnKeypress:true,changed:function(){this.isDirty=true},blur:function(){this.isDirty=false;this.parentItem&&this.parentItem.updateValue()},
shouldSaveValue:false,getInnerWidth:function(){if(this.parentItem)return this.parentItem.getTextBoxWidth();return this.Super("getInnerWidth",arguments)}};isc.A.daySelectorDefaults={name:"daySelector",prompt:"Choose a day",type:"select",valueMap:"this.parentItem.getDayOptions()",shouldSaveValue:false,saveValue:function(){this.Super("saveValue",arguments);this.parentItem.updateValue()},cssText:"padding-left:3px;",width:45};isc.A.monthSelectorDefaults={name:"monthSelector",prompt:"Choose a month",type:"select",
valueMap:"this.parentItem.getMonthOptions()",shouldSaveValue:false,saveValue:function(){this.Super("saveValue",arguments);this.parentItem.updateValue()},width:55};isc.A.yearSelectorDefaults={name:"yearSelector",prompt:"Choose a year",type:"select",valueMap:"this.parentItem.getYearOptions()",shouldSaveValue:false,saveValue:function(){this.Super("saveValue",arguments);this.parentItem.updateValue()},cssText:"padding-left:3px;",width:60};isc.A.width=150;isc.A.cellPadding=0;isc.A.useSharedPicker=true;
isc.A.pickerConstructor="DateChooser";isc.A.pickerDefaults={width:isc.DateItem.chooserWidth,height:isc.DateItem.chooserHeight,border:"1px solid black;",showCancelButton:true,autoHide:true};isc.A.textAlign=isc.Canvas.RIGHT;isc.A.maskDateSeparator="/";isc.A.enforceDate=false;isc.A.invalidDateStringMessage="Invalid date";isc.A.showPickerIcon=true;isc.A.pickerIconWidth=20;isc.A.pickerIconHeight=20;isc.A.pickerIconSrc="[SKIN]/DynamicForm/DatePicker_icon.gif";isc.A.pickerIconHSpace=3;isc.A.pickerIconPrompt=
"Show Date Chooser";isc.A.pickerIconProperties={};isc.A.startDate=isc.DateItem.DEFAULT_START_DATE;isc.A.endDate=isc.DateItem.DEFAULT_END_DATE;isc.A.centuryThreshold=isc.DateItem.DEFAULT_CENTURY_THRESHOLD;isc.A=isc.DateItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$792="[01][0-9]";isc.A.$793="[0-3]#";isc.A.$794="####";isc.A.$73d="[0-2][0-9]:[0-6][0-9]";isc.A.$73r={MDY:"toUSShortDate",DMY:"toEuropeanShortDate",YMD:"toJapanShortDate"};
isc.A.selectorPadding=2;isc.A.useCustomTimezone=false;isc.B.push(isc.A.init=function(){if(this.useTextField==null)this.useTextField=this.useMask||false;if(this.dateFormatter!=null){this.logInfo("Configuration block for this item has an explicitly specified 'dateFormatter' value:"+this.dateFormatter+". This will be used instead of the specified 'displayFormat' attribute for this item.");this.displayFormat=this.dateFormatter}return this.Super("init",arguments)},isc.A.getSelectorFormat=function(){if(this.selectorFormat)return this.selectorFormat;
else if(this.inputFormat&&isc.isA.String(this.inputFormat))return this.inputFormat;else{var a=Date.getInputFormat();if(isc.isA.String(a))return a;this.logInfo("DateItem selectorFormat unspecified - assuming US format");return"MDY"}},isc.A.getInputFormatMask=function(a){var b=this.maskDateSeparator||this.$79w();a=a=="YMD"?[this.$794,b,this.$792,b,this.$793]:a=="DMY"?[this.$793,b,this.$792,b,this.$794]:[this.$792,b,this.$793,b,this.$794];isc.isA.DateTimeItem(this)&&a.addList([" ",this.$73d]);return a.join("")},
isc.A.$79w=function(){return Date.getDefaultDateSeparator()},isc.A.$79x=function(){var a=this.$79w();return RegExp(a,"/g")},isc.A.setItems=function(a){var b=isc.DateItem,c=this.getSelectorFormat();a!=null&&a.length!=0&&this.logWarn("setItems() called for dateItem with itemList:"+a+" - ignoring, and making use of default date fields");a=this.items=[];if(this.useTextField){c={textAlign:this.textAlign,emptyDisplayValue:this.emptyDisplayValue};if(this.showHintInField){c.showHintInField=this.showHintInField;
c.hint=this.hint;this.hint=null}var d={};if(this.useMask){var e=this.getInputFormat();e||(e="MDY");var f=this.getInputFormatMask(e);d.mask=f;d.maskSaveLiterals=true;d.maskOverwriteMode=true;if(this.inputFormat)this.displayFormat=this.$73r[e]}b=isc.addProperties(c,this.textFieldDefaults,b.TEXT_FIELD,this.textFieldProperties,d);b.name="dateTextField";if(this.height&&(!this.textFieldProperties||!this.textFieldProperties.height))b.height=this.getTextBoxHeight();a.add(b);this.daySelector=this.yearSelector=
this.monthSelector=void 0}else for(d=0;d<c.length;d++){e=c.charAt(d);if(e=="D"){e=this.daySelectorProperties!=null?isc.addProperties({},this.daySelectorDefaults,b.DAY_SELECTOR,this.daySelectorProperties):isc.addProperties({},this.daySelectorDefaults,b.DAY_SELECTOR);e.name="daySelector";a.add(e)}else if(e=="M"){e=this.monthSelectorProperties!=null?isc.addProperties({},this.monthSelectorDefaults,b.MONTH_SELECTOR,this.monthSelectorProperties):isc.addProperties({},this.monthSelectorDefaults,b.MONTH_SELECTOR);
e.name="monthSelector";a.add(e)}else if(e=="Y"){e=this.yearSelectorProperties!=null?isc.addProperties({},this.yearSelectorDefaults,b.YEAR_SELECTOR,this.yearSelectorProperties):isc.addProperties({},this.yearSelectorDefaults,b.YEAR_SELECTOR);e.name="yearSelector";a.add(e)}}this.Super("setItems",[a]);if(this.useTextField)this.textField=this.dateTextField},isc.A.getInnerWidth=function(){if(this.useTextField)return this.Super("getInnerWidth",arguments);var a=0,b=0;if(this.daySelector){b+=1;a+=this.daySelector.width}if(this.monthSelector){b+=
1;a+=this.monthSelector.width}if(this.yearSelector){b+=1;a+=this.yearSelector.width}if(this.showPickerIcon)a+=this.getPickerIconWidth();if(b>0)a+=(b-1)*this.selectorPadding;return a},isc.A.isEditable=function(){return true},isc.A.getEnteredValue=function(){if(this.useTextField&&this.textField!=null)return this.textField.getEnteredValue();return this.getValue()},isc.A.setValue=function(a){this.$17g=true;var b=false;if(a==null){a=this.getDefaultValue();b=true}var c=isc.isA.Date(a)&&isc.isA.Date(this._value)?
Date.compareLogicalDates(a,this._value)==0:a==this._value,d,e;if(isc.is.emptyString(a))a=null;if(a==null){e=true;d=null}else{d=this.parseDate(a);if(d==null){e=true;d=a}}if(e){var f;if(this.useTextField){if(this.enforceDate&&a!=null){f=this.dateTextField;f=!this.$20m||!f||f.getValue()!=a}}else f=true;if(f){this.logInfo("dateItem.setValue(): invalid date passed: '"+a+"'.  Ignoring this value. Non date values are only supported  for dateItems where useTextField is true and enforceDate is false.");return false}}if(!e&&
this.$20m){delete this.$20m;this.clearErrors();this.redraw()}this.saveValue(d,b);this.$20l=true;if(this.useTextField)if(this.dateTextField)if(c&&this.dateTextField.isDirty)this.dateTextField.setValue(this.dateTextField._value);else{this.dateTextField.setValue(e?d:this.formatDate(d));delete this.dateTextField.isDirty}this.daySelector&&this.daySelector.setValue(d.getDate());this.monthSelector&&this.monthSelector.setValue(d.getMonth());this.yearSelector&&this.yearSelector.setValue(d.getFullYear());delete this.$20l;
return true},isc.A.$17e=function(a){var b=this.$15b();if(b!=null)b.value=isc.isA.Date(a)?a.toDBDate():a},isc.A.getCellHeight=function(){var a=this.Super("getCellHeight",arguments);if(isc.Browser.isIE&&this.useTextField&&isc.isA.Number(a))a+=2;return a},isc.A.elementChanged=function(){},isc.A.updateValue=function(){if(!this.$20l){this.$20l=true;var a;if(this.useTextField){this.dateTextField.updateValue();var b=this.dateTextField.getValue(),c;if(b==isc.emptyString||b==null)a=null;else{a=this.parseDate(b);
if(a==null){c=true;a=b}else{var d=this.formatDate(a);b!=d&&this.dateTextField.setValue(d)}}if(b==this.getValue()){delete this.$20l;return}if(this.enforceDate)if(this.$20m&&!c){delete this.$20m;this.clearErrors();this.redraw()}else if(c){this.logWarn("Invalid date string entered in date text field :"+a);if(!this.$20m){this.$20m=true;this.setError(this.invalidDateStringMessage);this.redraw()}}}else{a=this._value||this.getDefaultValue();a=a.duplicate();c=this.daySelector?this.daySelector.getValue():
a.getDate();a.setDate(1);if(this.yearSelector){d=this.yearSelector.getValue();a.setYear(d)}if(this.monthSelector){b=this.monthSelector.getValue();a.setMonth(b)}a.setDate(c);if(b!=a.getMonth()){c-=a.getDate();this.daySelector&&this.daySelector.setValue(c);a.setMonth(b);a.setDate(c)}}delete this.$20l;if(this.compareValues(a,this._value)==true)return false;if(this.handleChange(a,this._value)!=false){a=this.$17n;this.saveValue(a);this.handleChanged(a)}}},isc.A.resetValue=function(){var a=this.form.$10s[this.getFieldName()];
if(isc.isA.Date(a)&&isc.isA.Date(this._value))a=this._value.setTime(a.getTime());this.setValue(a)},isc.A.getItemValue=function(a,b){if(isc.isAn.emptyObject(b))b=null;var c=isc.isA.Date(b),d=isc.isA.Date(this._value);if(b==this._value||c&&d&&Date.compareDates(b,this._value)==0)return a.getValue();if(a==this.dateTextField)return c?this.formatDate(b):b;else if(a==this.daySelector)return c?b.getDate():null;else if(a==this.monthSelector)return c?b.getMonth():null;else if(a==this.yearSelector)return c?
b.getFullYear():null},isc.A.getDisplayValue=function(){var a=this.getValue();if(!isc.isA.Date(a))return this.Super("getDisplayValue",arguments);if(this.useTextField||!this.items)return this.formatDate(a);else{if(!this.isDrawn()){this.yearSelector&&this.yearSelector.setValue(a.getFullYear());this.monthSelector&&this.monthSelector.setValue(a.getMonth());this.daySelector&&this.daySelector.setValue(a.getDate())}return this.items.map("getDisplayValue").join(" ")}},isc.A.getDefaultValue=function(){var a=
this.Super("getDefaultValue");if(!isc.isA.Date(a)){var b=this.parseDate(a);if(isc.isA.Date(b))a=b;else if(!this.useTextField||this.enforceDate){var c;if(a!=null){this.logWarn("Default DateItem value provided as:"+a+". This is not recognized as a valid date - defaulting to a new date");c=this.defaultValue==a}this.useTextField||(a=this.$603());if(c)this.defaultValue=a}}return a},isc.A.$603=function(){var a=new Date;a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a},isc.A.getStartDate=
function(){var a=this.parseDate(this.startDate);if(!isc.isA.Date(a)){this.logWarn("startDate was not in valid date format - using default start date");a=isc.DateItem.DEFAULT_START_DATE}return a},isc.A.getEndDate=function(){var a=this.parseDate(this.endDate);if(!isc.isA.Date(a)){this.logWarn("endDate was not in valid date format - using default end date");a=isc.DateItem.DEFAULT_END_DATE}return a},isc.A.$kk=function(){if(this.canFocus!=null)return this.canFocus;return true},isc.A.focusInItem=function(){if(this.isVisible())if(this.useTextField)this.dateTextField&&
this.dateTextField.focusInItem();else{var a=this.getSelectorFormat().charAt(0);a=="D"&&this.daySelector&&this.daySelector.focusInItem();a=="M"&&this.monthSelector&&this.monthSelector.focusInItem();a=="Y"&&this.yearSelector&&this.yearSelector.focusInItem()}},isc.A.setSelectionRange=function(a,b){if(this.dateTextField)return this.dateTextField.setSelectionRange(a,b)},isc.A.getSelectionRange=function(){if(this.dateTextField)return this.dateTextField.getSelectionRange()},isc.A.selectValue=function(){if(this.dateTextField)return this.dateTextField.selectValue()},
isc.A.deselectValue=function(){if(this.dateTextField)return this.dateTextField.deselectValue()},isc.A.getDayOptions=function(){var a=this.getStartDate(),b=this.getEndDate(),c=1,d=31;if(a.getYear()==b.getYear()&&a.getMonth()==b.getMonth()){c=a.getDate();d=b.getDate()}a="day."+c+"."+d;if(isc.DateItem.mapCache[a])return isc.DateItem.mapCache[a];a=isc.DateItem.mapCache[a]=[];for(b=c;b<=d;b++)a[b-c]=b;return a},isc.A.getMonthOptions=function(){var a=this.getStartDate(),b=this.getEndDate(),c=0,d=11;if(a.getYear()==
b.getYear()){c=a.getMonth();d=b.getMonth()}a="month."+c+"."+d;if(isc.DateItem.mapCache[a])return isc.DateItem.mapCache[a];a=isc.DateItem.mapCache[a]={};for(b=Date.getShortMonthNames();c<=d;c++)a[c]=b[c];return a},isc.A.getYearOptions=function(){var a=this.getStartDate().getFullYear(),b=this.getEndDate().getFullYear(),c="year."+a+"."+b;if(isc.DateItem.mapCache[c])return isc.DateItem.mapCache[c];c=isc.DateItem.mapCache[c]=[];for(var d=a;d<=b;d++)c[d-a]=d;return c},isc.A.parseDate=function(a,b){if(b==
null)b=this.getInputFormat();return Date.parseInput(a,b,this.centuryThreshold,true,this.useCustomTimezone)},isc.A.formatDate=function(a){return isc.isA.Date(a)?a.toShortDate(this.displayFormat,this.useCustomTimezone):a},isc.A.getInputFormat=function(){if(this.inputFormat)return this.inputFormat;if(this.displayFormat)return Date.mapDisplayFormatToInputFormat(this.displayFormat);return null},isc.A.getPickerIcon=function(a,b,c,d){a=this.invokeSuper(isc.DateItem,"getPickerIcon",a,b,c,d);if(a.prompt==
null)a.prompt=this.pickerIconPrompt;return a},isc.A.showPicker=function(){this.updateValue();if(!this.picker)this.picker=this.useSharedPicker?isc.DateChooser.getSharedDateChooser():isc[this.pickerConstructor].create(isc.addProperties({},this.pickerDefaults,this.pickerProperties,{border:"none",_generated:true,autoHide:true,showCancelButton:true}));var a=this.picker,b=a.callingFormItem;if(b!=this){b&&b.ignore(a,"dataChanged");this.observe(a,"dataChanged","observer.pickerDataChanged(observed)");a.callingFormItem=
this;a.callingForm=this.form;a.locatorParent=this.form}a.startYear=this.getStartDate().getFullYear();a.endYear=this.getEndDate().getFullYear();return this.Super("showPicker",arguments)},isc.A.getPickerRect=function(){var a=this.getPageLeft(),b=this.getPageTop(),c=isc.DateItem.chooserWidth+3,d=isc.DateItem.chooserHeight+3;a+=Math.round(this.getVisibleWidth()-this.getPickerIconWidth()/2-c/2);b+=Math.round(this.getPickerIconHeight()/2-d/2);return[a,b]},isc.A.pickerDataChanged=function(a){a=a.getData();
var b=a.getFullYear(),c=a.getMonth(),d=a.getDate();if(this.useCustomTimezone){var e=isc.Time.getUTCHoursDisplayOffset(a),f=isc.Time.getUTCMinutesDisplayOffset(a);f=f>0?60-f:0-f;a.setUTCHours(e>0?24-e:0-e);a.setUTCMinutes(f)}this.$20l=true;if(this.useTextField)this.dateTextField.setValue(this.formatDate(a));else{a=this._value||this.getDefaultValue();var g;if(this.yearSelector)this.yearSelector.setValue(b);else{a.setFullYear(b);g=true}if(this.monthSelector)this.monthSelector.setValue(c);else{a.setMonth(c-
1);g=true}if(this.daySelector)this.daySelector.setValue(d);else{a.setDate(d);g=true}if(g)this._value=a}this.$20l=false;this.updateValue();this.hasFocus||this.focusInItem()},isc.A.setHint=function(a){this.useTextField&&this.showHintInField?this.dateTextField.setHint(a):this.Super("setHint",arguments)},isc.A.getPickerData=function(){var a=this.getValue();if(a!=null&&isc.isA.Date(a))return a;return this.getDefaultChooserDate()},isc.A.getDefaultChooserDate=function(){return this.defaultChooserDate},isc.A.propertyChanged=
function(a){if(a=="useTextField"||a=="useMask")this.setItems()});isc.B._maxIndex=isc.C+41}if(isc.ListGrid){isc.defineClass("DateTimeItem","DateItem");isc.A=isc.DateTimeItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.useTextField=true;isc.A.useCustomTimezone=true;isc.B.push(isc.A.formatDate=function(a){if(!isc.isA.Date(a))return a;return a.toShortDateTime(this.displayFormat,this.useCustomTimezone)});isc.B._maxIndex=isc.C+1}isc.ClassFactory.defineClass("SpacerItem",
"FormItem");isc.A=isc.SpacerItem.getPrototype();isc.A.shouldSaveValue=false;isc.A.showTitle=false;isc.A.width=20;isc.A.height=20;isc.A.showHint=false;isc.A.showIcons=false;isc.A=isc.SpacerItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.isEditable=function(){return false},isc.A.getElementHTML=function(){return isc.Canvas.spacerHTML(this.width,this.height)},isc.A.shouldShowTitle=function(){return false});isc.B._maxIndex=
isc.C+3;isc.ClassFactory.defineClass("RowSpacerItem","SpacerItem");isc.A=isc.RowSpacerItem.getPrototype();isc.A.showTitle=false;isc.A.colSpan="*";isc.A.startRow=true;isc.A.endRow=true;isc.A.width=20;isc.A.height=20;isc.ClassFactory.defineClass("SubmitItem","ButtonItem");isc.A=isc.SubmitItem.getPrototype();isc.A.title="Submit";isc.A=isc.SubmitItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.handleClick=function(){if(this.Super("handleClick",
arguments)==false)return false;this.form.submit()});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("TextAreaItem","FormItem");isc.A=isc.TextAreaItem;isc.A.OFF="OFF";isc.A.SOFT="SOFT";isc.A.VIRTUAL="SOFT";isc.A.ON="HARD";isc.A.HARD="HARD";isc.A.PHYSICAL="HARD";isc.A=isc.TextAreaItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.wrap=isc.TextAreaItem.VIRTUAL;isc.A.width=150;isc.A.height=100;isc.A.textBoxStyle="textItem";isc.A.redrawOnShowIcon=
false;isc.A.clipValue=true;isc.A.$125=true;isc.A.$15i=true;isc.A.emptyStringValue=null;isc.A.lineBreakValue="\n";isc.A.iconVAlign=isc.Canvas.TOP;isc.A.$16b={onmousedown:isc.Browser.isIE?function(){var a=isc.DynamicForm.$mu(this).item;a&&a.$179()}:null};isc.A.supportsSelectionRange=true;isc.A.printFullText=true;isc.B.push(isc.A.getEnteredValue=function(){return this.getElementValue()});isc.B._maxIndex=isc.C+1;isc.A=isc.TextAreaItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;
isc.D[isc.C]=isc.A.Class;isc.A.minHeight=16;isc.A.applyStaticTypeFormat=false;isc.B.push(isc.A.getTextBoxCellCSS=function(){return this.$136},isc.A.$143=function(){return isc.Browser.isStrict},isc.A.$429=function(){return!isc.Browser.isIE},isc.A.getElementHTML=function(a,b){this.form.getID();this.getItemID();var c=isc.StringBuffer.create(),d=this.$xq(b);d!=null&&c.append(d);if(!this.showValueIconOnly)if(!this.printFullText||!this.$68y())c.append("<TEXTAREA NAME=",this.getElementName()," ID=",this.getDataElementId(),
this.$155(),this.getElementStyleHTML(),this.isDisabled()?" DISABLED ":"",this.$17h()!="native"?" AUTOCOMPLETE=OFF ":"",isc.Browser.isMoz||isc.Browser.isSafari?this.getBrowserSpellCheck()?" spellcheck=true":" spellcheck=false":null," WRAP=",this.wrap," TABINDEX=",this.$154(),this.showTitle==false&&this.accessKey!=null?" ACCESSKEY="+this.accessKey:"",this.$429?" ONINPUT='"+this.getID()+".$43g()'":null,this.readOnly||this.isInactiveHTML()?" READONLY=TRUE":null," handleNativeEvents=false>",this.isInactiveHTML()?
a:null,"</TEXTAREA>");else{if(a==null)a="";c.append("<DIV style='",isc.isA.Number(this.width)?"width:"+this.width+"px;":null,"' class='",this.getTextBoxStyle(),"'>",a.asHTML(),"</DIV>")}return c.release()},isc.A.$12v=function(){var a=this.Super("$12v",arguments);this.$66s();return a},isc.A.$12x=function(){var a=this.Super("$12x",arguments);if(this.changeOnBlur)this.form.elementChanged(this);else{var b=this.getElementValue();if(this.mapDisplayToValue)b=this.mapDisplayToValue(b);this._value!=b&&this.form.elementChanged(this)}if(this.showHintInField){b=
this.getElementValue();if(b===void 0||b==null||isc.is.emptyString(b))this.$66t()}return a},isc.A.getElementStyleHTML=function(){var a=this.getTextBoxWidth(),b=this.getTextBoxHeight();return isc.StringBuffer.concat(" CLASS='"+this.getTextBoxStyle(),isc.Browser.isMoz&&isc.isA.String(this.wrap)&&this.wrap.toLowerCase()!="off"?"' ROWS=10 COLS=10":"'"," STYLE='",this.getElementCSSText(a,b),"' ")},isc.A.getElementCSSText=function(a,b){if(isc.isA.Number(a)&&a<=0)a=1;if(isc.isA.Number(b)&&b<this.minHeight)b=
this.minHeight;return isc.StringBuffer.concat(isc.Browser.isIE?"margin-top:-1px;margin-bottom:-1px;margin-left:0px;margin-right:0px;":"margin:0px;",isc.isA.Number(a)?"WIDTH:"+a+"px;":"",isc.isA.Number(b)?"HEIGHT:"+b+"px;":"",this.textAlign?"text-align:"+this.textAlign+";":"",isc.Browser.isMoz?"-moz-user-focus:"+(this.$154()>0?"normal;":"ignore;"):"")},isc.A.mapValueToDisplay=function(a,b,c,d,e){a=this.invokeSuper(isc.TextAreaItem,"mapValueToDisplay",a,b,c,d,e);if(a==null)a=isc.emptyString;return a},
isc.A.mapDisplayToValue=function(a){if(!this.applyStaticTypeFormat&&this.parseEditorValue!=null)return this.parseEditorValue(a,this.form,this);a=this.$17d(a);if(isc.is.emptyString(a))a=this.emptyStringValue;return a},isc.A.setValue=function(a){this.$66s();if(a!==void 0&&(a==null||isc.is.emptyString(a)))this.emptyStringValue=a;delete this.$20n;a=this.Super("setValue",arguments);if(!this.hasFocus&&this.showHint&&this.showHintInField&&this.getHint())if(a===void 0||a==null||isc.is.emptyString(a))this.$66t();
return a},isc.A.updateValue=function(){this.$20n=true;return this.Super("updateValue",arguments)},isc.A.getValue=function(){var a=this.Super("getValue",arguments);if(this.$20n&&isc.isA.String(a)){if(!this.$20o)this.$20o=RegExp("(\\r\\n|[\\r\\n])","g");a=""+a;a=a.replace(this.$20o,this.lineBreakValue)}return a},isc.A.getScrollHeight=function(){var a=this.$15h();if(a==null)return this.getHeight();return a.scrollHeight},isc.A.getScrollWidth=function(){var a=this.$15h();if(a==null)return this.getWidth();
return a.scrollWidth},isc.A.$20p=function(){var a=this.$15h();return a&&a.scrollWidth>a.clientWidth},isc.A.$20q=function(){var a=this.$15h();return a&&a.scrollHeight>a.clientHeight},isc.A.getScrollTop=function(){var a=this.$15h();if(a==null)return 0;return a.scrollTop},isc.A.getScrollLeft=function(){var a=this.$15h();if(a==null)return 0;return a.scrollLeft},isc.A.scrollTo=function(a,b){var c=this.$15h();if(c!=null){if(a!=null)c.scrollLeft=a;if(b!=null)c.scrollTop=b}},isc.A.scrollToTop=function(){this.scrollTo(null,
0)},isc.A.scrollToBottom=function(){var a=this.getScrollHeight()-this.getInnerHeight();if(a>=0){if(this.$20p())a+=this.form.getScrollbarSize();this.scrollTo(null,a)}});isc.B._maxIndex=isc.C+22;isc.ClassFactory.defineClass("AutoFitTextAreaItem","TextAreaItem");isc.A=isc.AutoFitTextAreaItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.supportsSelectionRange=true;isc.B.push(isc.A.getTestBox=function(a){var b=this.mapValueToDisplay(this.getValue()),
c=isc.AutoFitTextAreaItem;if(!c.$552)c.$552=isc.Canvas.create({autoDraw:true,overflow:"hidden",left:0,top:-100,contents:["<textarea ID='isc_autoFitTextArea_sizeTester'style='overflow:hidden;",isc.Browser.isIE?"margin-top:-1px;margin-bottom:-1px;margin-left:0px;margin-right:0px;":"margin:0px;","'></textarea>"].join("")});var d=isc.Element.get("isc_autoFitTextArea_sizeTester");if(c.currentItem!=this||a){d.className=this.getTextBoxStyle();if(isc.Browser.isMoz)if(isc.isA.String(this.wrap)&&this.wrap.toLowerCase()!=
"off"){d.rows=10;d.cols=10}else{d.rows="";d.cols=""}d.setAttribute("wrap",this.wrap);d.style.width=this.getTextBoxWidth();d.style.height=this.getTextBoxHeight();d.style.textAlign=this.textAlign||"";d.cssText=this.getElementCSSText(this.getTextBoxWidth(),this.getTextBoxHeight());c.currentItem=this}d.value=b;return d},isc.A.getScrollHeight=function(a){return this.getTestBox(a).scrollHeight},isc.A.getScrollWidth=function(a){return this.getTestBox(a).scrollWidth},isc.A.getElementCSSText=function(){var a=
this.Super("getElementCSSText",arguments);a+="overflow:hidden;";return a},isc.A.$553=function(){if(this.$554!=null)return this.$554;var a=this.getDataElement();if(!a)return 0;var b=parseInt(isc.Element.getComputedStyleAttribute(a,"paddingLeft"));a=parseInt(isc.Element.getComputedStyleAttribute(a,"paddingRight"));return this.$554=b=(isc.isA.Number(b)?b:0)+(isc.isA.Number(a)?a:0)},isc.A.$555=function(){if(this.$556!=null)return this.$556;var a=this.getDataElement();if(!a)return 0;if(isc.Browser.isIE&&
a.currentStyle==null)return 0;var b=parseInt(isc.Element.getComputedStyleAttribute(a,"paddingTop"));a=parseInt(isc.Element.getComputedStyleAttribute(a,"paddingBottom"));return this.$556=b=(isc.isA.Number(b)?b:0)+(isc.isA.Number(a)?a:0)},isc.A.updateSize=function(a){var b=this.getDataElement();if(b){var c,d,e=this.getTextBoxHeight(),f=this.$555(),g=this.getScrollHeight(a),h=b.offsetHeight;if(g+f>h){b.style.height=g+f;d=true}else if(g+f<h&&h>e){if(g+f<h){c=true;b.style.height=Math.max(g+f,e)}d=true}e=
this.getTextBoxWidth();f=isc.Browser.isIE?0:this.$553();a=this.getScrollWidth(a);g=b.offsetWidth;if(a+f>g){b.style.width=a+f;d=true}else if(a+f<g&&g>e){b.style.width=Math.max(e,a+f);d=c=true}if(c)this.containerWidget.$t5=true;d&&this.adjustOverflow("Updated size to fit content")}},isc.A.handleChanged=function(){this.updateSize();return this.Super("handleChanged",arguments)},isc.A.drawn=function(){this.Super("drawn",arguments);delete this.$554;delete this.$556;this.updateSize(true)},isc.A.redrawn=
function(){this.Super("redrawn",arguments);delete this.$554;delete this.$556;this.updateSize(true)});isc.B._maxIndex=isc.C+10;isc.ClassFactory.defineClass("TimeItem","TextItem");isc.A=isc.TimeItem;isc.A.DEFAULT_TIME="00:00:00";isc.A=isc.TimeItem.getPrototype();isc.A.changeOnBlur=true;isc.A.changeOnKeypress=false;isc.A.width=100;isc.A.displayFormat="toShort24HourTime";isc.A.allowEmptyValue=true;isc.A=isc.TimeItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=
isc.A.Class;isc.A.short24TimeFormat="HH:MM";isc.A.shortTimeFormat="HH:MM [am|pm]";isc.A.long24TimeFormat="HH:MM:SS";isc.A.longTimeFormat="HH:MM:SS [am|pm]";isc.A.formatterMap={toTime:{mask:"[0-1]#:[0-6]#:[0-6]# [ap]m",formatter:"toPaddedTime"},to24HourTime:{mask:"[0-2]#:[0-6]#:[0-6]#",formatter:"toPadded24HourTime"},toPaddedTime:{mask:"[0-1]#:[0-6]#:[0-6]# [ap]m"},toPadded24HourTime:{mask:"[0-2]#:[0-6]#:[0-6]#"},toShortTime:{mask:"[0-1]#:[0-6]# [ap]m",formatter:"toShortPaddedTime"},toShort24HourTime:{mask:"[0-2]#:[0-6]#",
formatter:"toShortPadded24HourTime"},toShortPaddedTime:{mask:"[0-1]#:[0-6]# [ap]m"},toShortPadded24HourTime:{mask:"[0-2]#:[0-6]#"}};isc.B.push(isc.A.getHint=function(){if(!this.showHint)return"";if(this.hint!=null)return this.hint;switch(this.displayFormat){case "to24HourTime":case "toPadded24HourTime":return this.long24TimeFormat;case "toTime":case "toPaddedTime":return this.longTimeFormat;case "toShort24HourTime":case "toShortPadded24HourTime":return this.short24TimeFormat;case "toShortTime":case "toShortPaddedTime":return this.shortTimeFormat}return""},
isc.A.getDefaultValue=function(){var a=this.defaultValue;if(!a&&!this.allowEmptyValue)a=isc.TimeItem.DEFAULT_TIME;if(a&&!isc.isA.Date(a))a=isc.Time.parseInput(a);return a},isc.A.mapValueToDisplay=function(a){if(this.allowEmptyValue&&a==null)return isc.emptyString;isc.isA.Date(a)||(a=isc.Time.parseInput(a));a=isc.Time.format(a,this.displayFormat);return a=this.Super("mapValueToDisplay",a)},isc.A.mapDisplayToValue=function(){var a=this.Super("mapDisplayToValue",arguments);return a=(a==null||isc.isAn.emptyString(a))&&
this.allowEmptyValue?null:isc.Time.parseInput(a)},isc.A.updateValue=function(){this.Super("updateValue",arguments);this.mask||this.setElementValue(this.mapValueToDisplay(this.getValue()))},isc.A.setValue=function(a){if(isc.isA.String(a))a=isc.Time.parseInput(a);return this.Super("setValue",[a])},isc.A.compareValues=function(a,b){if(a==b)return true;if(isc.isA.Date(a)&&isc.isA.Date(b)&&isc.Time.compareTimes(a,b))return true;return false},isc.A.init=function(){if(this.useMask){var a=this.formatterMap[this.displayFormat];
if(a){if(a.formatter)this.displayFormat=a.formatter;this.mask=a.mask}else{this.useMask=false;this.mask=null;this.logWarn("Mask will not be used because displayFormat "+this.displayFormat+" is not recognized")}if(this.mask)this.maskOverwriteMode=this.maskSaveLiterals=true}else if(this.mask)this.mask=null;this.Super("init",arguments)},isc.A.setMask=function(){this.logWarn("setMask: custom mask ignored")});isc.B._maxIndex=isc.C+9;isc.ClassFactory.defineClass("ToolbarItem","CanvasItem");isc.A=isc.ToolbarItem.getPrototype();
isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canFocus=true;isc.A.shouldSaveValue=false;isc.A.showTitle=false;isc.A.buttonSpace=4;isc.A.startRow=true;isc.A.endRow=true;isc.A.colSpan="*";isc.A.canvasConstructor=isc.Toolbar;isc.A.vertical=false;isc.A.buttonConstructor=isc.AutoFitButton;isc.B.push(isc.A.isEditable=function(){return false});isc.B._maxIndex=isc.C+1;isc.A=isc.ToolbarItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;
isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.$18y=function(){var a=this.buttons||this.items||[],b=this.buttonProperties||{};isc.addProperties(b,{handleActivate:function(){var c=this.parentElement.canvasItem,d=c.form;if(this.click!=null)return this.click(d,c)}});if(this.buttonBaseStyle&&!b.baseStyle)b.baseStyle=this.buttonBaseStyle;if(this.buttonTitleStyle&&!b.titleStyle)b.titleStyle=this.buttonTitleStyle;this.$20r(a);this.canvas={overflow:isc.Canvas.VISIBLE,buttons:a,membersMargin:this.buttonSpace,vertical:this.vertical,
buttonProperties:b};a=this.height;b=this.width;if(!isc.isA.Number(b)&&this.$8t)b=isc.isA.Number(this.$8t[0])?this.$8t[0]:null;if(!isc.isA.Number(a)&&this.$8t)a=isc.isA.Number(this.$8t[1])?this.$8t[1]:null;if(a)this.canvas.height=a;if(b)this.canvas.width=b;if(this.buttonConstructor!=null)this.canvas.buttonConstructor=this.buttonConstructor;return this.Super("$18y",arguments)},isc.A.$20r=function(a){if(!(!a||a.length==0))for(var b=0;b<a.length;b++)if(a[b].click&&isc.isA.String(a[b].click))a[b].click=
isc.Func.expressionToFunction("form,item",a[b].click)},isc.A.getButton=function(a){return isc.Class.getArrayItem(a,this.buttons,"name")},isc.A.addButton=function(a,b){this.buttons=this.buttons||[];this.buttons.addAt(a,b);this.setButtons(this.buttons)},isc.A.removeButton=function(a){a=isc.Class.getArrayItemIndex(a,this.buttons,"name");if(a!=-1){this.buttons.removeAt(a);this.setButtons(this.buttons)}},isc.A.setButtons=function(a){this.$20r(a);this.buttons=a;this.canvas&&this.canvas.setButtons(a)},isc.A.setItems=
function(a){return this.setButtons(a)});isc.B._maxIndex=isc.C+7;isc.ClassFactory.defineClass("UploadItem","TextItem");isc.A=isc.UploadItem.getPrototype();isc.A.$183="FILE";isc.A.$16b={onchange:isc.FormItem.$12y};isc.A=isc.UploadItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.elementHeight=isc.Browser.isMoz?18:null;isc.B.push(isc.A.getTextBoxWidth=function(){if(isc.Browser.isMoz)return null;return this.Super("getTextBoxWidth",arguments)},
isc.A.getTextBoxHeight=function(){if(this.elementHeight)return this.elementHeight;return this.Super("getTextBoxHeight",arguments)},isc.A.$149=function(){var a=this.getElementWidth();isc.isA.Number(a)||(a=185);return a},isc.A.$10y=function(a){a=this.mapDisplayToValue(a);if(a==this._value)return true;var b=this.handleChange(a,this._value);this.$17n!=a&&this.logWarn("Upload Items do not support programmatically modifying the value entered by the user. Ignoring attempt to update from change handler");
this.saveValue(this.mapDisplayToValue(this.getElementValue()));return b},isc.A.redrawn=function(){this.Super("redrawn",arguments);this.updateValue(this.getElementValue())},isc.A.setValue=function(a){var b=this.getValue();if(a==null||isc.isAn.emptyString(a)){if(b==null||isc.isAn.emptyString(b))return;return this.Super("setValue",arguments)}a==b?this.logInfo("Attempting to set the value for an upload form item to:"+a+" This is the current value for the item so no action to take, but setting UploadItems to a new value is always disabled."):
this.logWarn("Attempting to set the value for an upload form item. This is disallowed for security reasons - returning the current value of the form item")},isc.A.setElementValue=function(a){if(a==null||isc.isAn.emptyString(a)){if(isc.Browser.isIE){this.redraw();return}return this.Super("setElementValue",arguments)}this.logInfo("Attempting to set the value for an upload form item. This is disallowed for security reasons - returning the current value of the form item");return this.getElementValue()});
isc.B._maxIndex=isc.C+7;if(isc.Browser.isSafari){isc.A=isc.UploadItem.getPrototype();isc.A.colSpan="*";isc.A.startRow=true;isc.A.endRow=true;isc.A.width=300}isc.defineClass("ComboBoxItem","TextItem","PickList");isc.A=isc.ComboBoxItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoSizePickList=true;isc.A.showPickerIcon=true;isc.A.pickerIconWidth=15;isc.A.pickerIconSrc="[SKIN]/DynamicForm/ComboBoxItem_PickButton_icon.gif";isc.A.pickerIconProperties=
{tabIndex:-1,showOver:true};isc.A.modalPickList=false;isc.A.showPickListOnKeypress=true;isc.A.$20s="Arrow_Up";isc.A.$20t="Arrow_Down";isc.A.$20u="Page_Up";isc.A.$20v="Page_Down";isc.A.$20w="Escape";isc.A.$10j="Enter";isc.A.$jf="Tab";isc.A.addUnknownValues=true;isc.A.filterDisplayValue=true;isc.A.autoFetchData=false;isc.B.push(isc.A.drawn=function(a,b,c,d){this.invokeSuper(isc.ComboBoxItem,"drawn",a,b,c,d);if(this.autoFetchData&&this.$19m()){this.filterWithValue=false;this.fetchData(null,null,true)}},
isc.A.pickListShown=function(){if(this.pickList.isVisible())this.$20x=this.ns.Page.setEvent("mouseDown",this,null,"$20y")},isc.A.$20y=function(){var a=this.pickList;if(a&&a.isVisible()){a.contains(isc.EH.lastEvent.target,true)||a.hide();if(!this.$43l)this.$43l=this.ns.Page.setEvent("mouseUp",this,isc.Page.FIRE_ONCE,"$20z");if(!this.$43m)this.$43m=this.ns.Page.setEvent("dragStop",this,isc.Page.FIRE_ONCE,"$43n")}},isc.A.$20z=function(){if(this.form.$ne().item==this){this.ns.Page.clearEvent("dragStop",
this.$43m);delete this.$43m;delete this.$43l;return false}this.$43n(true)},isc.A.$43n=function(a){a==true?this.ns.Page.clearEvent("dragStop",this.$43m):this.ns.Page.clearEvent("mouseUp",this.$43l);delete this.$43m;delete this.$43l;this.pickList&&this.pickList.isVisible()&&this.pickList.contains(isc.EH.getTarget())&&this.focusInItem()},isc.A.pickListHidden=function(){this.$20x&&this.ns.Page.clearEvent("mouseDown",this.$20x);delete this.$20x},isc.A.handleKeyPress=function(){if(!this.hasFocus)return this.Super("handleKeyPress",
arguments);var a=isc.EH.lastEvent.keyName,b=this.pickList,c=b?b.isDrawn()&&b.isVisible():false;if(c&&(a==this.$20v||a==this.$20u))return b.body.handleKeyPress(isc.EH.lastEvent);var d=this.getValue();d=!d||d==isc.emptyString;if(a==this.$20t&&isc.EH.altKeyDown()){if(d)this.$200=true;this.filterWithValue=false;this.showPickList();return false}if(c)if(a==this.$20t||a==this.$20s||a==this.$10j||a==this.$20w){b.bodyKeyPress(isc.EH.lastEvent);return false}return this.Super("handleKeyPress",arguments)},isc.A.handleKeyDown=
function(){if(!this.hasFocus)return this.Super("handleKeyDown",arguments);var a=isc.EH.lastEvent.keyName,b=this.pickList;if(b?b.isDrawn()&&b.isVisible():false)if(b&&b.isVisible()&&a==this.$jf&&(this.completeOnTab||this.$17h()==this.$14l)){a=b.getSelectedRecord();a!=null&&b.itemClick(a)}return this.Super("handleKeyDown",arguments)},isc.A.handleEditorExit=function(){if(this.addUnknownValues)return this.Super("handleEditorExit",arguments);var a=this.getValue();if(a==null){this.setElementValue("");return this.Super("handleEditorExit",
arguments)}this.mapValueToDisplay(a)==a?this.clearValue():this.$10y(a,true);this.Super("handleEditorExit",arguments)},isc.A.$10y=function(a,b){var c=this.getElementValue();c=a==c&&this.mapValueToDisplay(this.getValue())==c;this.$80p=!c&&!this.$201;if(this.addUnknownValues||b)return this.Super("$10y",arguments);if(!c)if(this.mapValueToDisplay(a)==a){this.saveValue(null);this.refreshPickList(a)}else return this.Super("$10y",arguments)},isc.A.handleChange=function(a){if(this.Super("handleChange",arguments)==
false)return false;this.refreshPickList(a)},isc.A.refreshPickList=function(a){a=this.$17n||a;var b=!a||a==isc.emptyString;b||delete this.$200;var c=this.pickList,d=c?c.isVisible():false;if(b&&!this.$200)d&&c.hide();else if(this.showPickListOnKeypress||d){this.addUnknownValues&&this.saveValue(a);if(!this.$201&&this.hasFocus){this.filterWithValue=true;this.showPickList(true,true)}}},isc.A.selectDefaultItem=function(){if(!(this.pickList==null||this.pickList.destroyed)){var a=this.pickList.selection;
if(this.pickList.selection.anySelected()){if(this.optionDataSource){var b=this.getSelectedRecord();if(b){this.pickList.clearLastHilite();this.delayCall("selectItemFromValue",[b[this.valueField]])}}}else{b=this.pickList.getRecord(0);if(!(b==null||Array.isLoading(b)||b[this.pickList.isSeparatorProperty])){a.selectSingle(b);this.pickList.clearLastHilite();this.pickList.scrollRecordIntoView(0)}}}},isc.A.getSelectedRecord=function(){var a=this.Super("getSelectedRecord",arguments);if(a==null&&this._value!=
null&&this.getOptionDataSource()){if(this.pickList==null||this.pickList.destroyed)this.makePickList(false);if(this.pickList&&this.pickList.data){a=this.pickList.data.find(this.getValueFieldName(),this._value);a!=null&&this.$78x(a)}}return a},isc.A.getPickListFilterCriteria=function(){var a=this.optionCriteria||{};if(this.alwaysFilterWithValue||this.filterWithValue){var b=this.addUnknownValues?this.getDisplayValue():this.getElementValue(),c=this.getDisplayFieldName()||this.getValueFieldName();a[c]=
b}this.pickListCriteria&&isc.addProperties(a,this.pickListCriteria);return a},isc.A.elementBlur=function(){this.Super("elementBlur",arguments);var a=this.pickList,b=isc.EH,c=b.lastEvent;if(!(a&&(c.eventType=="selectionChange"&&a.contains(isc.EH.mouseDownTarget())||(c.eventType==b.MOUSE_DOWN||c.eventType==b.CLICK)&&a.contains(c.target,true))||isc.Browser.isIE&&this.getActiveElement()==this.getDataElement())){delete this.$19i;delete this.$43i;!a||!a.isVisible()||a.formItem!=this||a.hide()}},isc.A.editorEnter=
function(){this.$66s()},isc.A.editorExit=function(a,b,c){if(this.showHintInField&&(c===void 0||c==null||isc.is.emptyString(c)))this.$66t()},isc.A.showPicker=function(){this.focusInItem();this.filterWithValue=false;return this.showPickList()},isc.A.pickValue=function(a){var b=this.mapValueToDisplay(a);this.addUnknownValues?this.setElementValue(b):this.setValue(a);this.$201=true;this.$66x={};this.$66x[b]=a;this.updateValue();delete this.$201},isc.A.setValueMap=function(){this.Super("setValueMap",arguments);
if(this.pickList){this.pickList.isVisible()&&this.pickList.hide();delete this.pickList.formItem;this.setUpPickList(this.pickList.isVisible())}this.addUnknownValues&&this.setElementValue(this.mapValueToDisplay(this.getValue()))},isc.A.setValue=function(a,b,c,d,e){this.$80p=false;this.$43o=true;this.invokeSuper(isc.ComboBoxItem,"setValue",a,b,c,d,e);delete this.$43o;if(!this.hasFocus&&this.showHint&&this.showHintInField&&this.getHint())if(a===void 0||a==null||isc.is.emptyString(a))this.$66t()},isc.A.getDefaultValue=
function(){var a=this.Super("getDefaultValue",arguments);if(a==null&&this.defaultToFirstOption)a=this.getFirstOptionValue();return a},isc.A.getCriteriaFieldName=function(){var a=this.$80p&&!this.getSelectedRecord();if(this.displayField&&a)return this.displayField;return this.criteriaField||this.getFieldName()},isc.A.$43f=function(a){if(this.$17b(a,true)==null)if(this.$43j)this.$43k=true;else this.invokeSuper(isc.ComboBoxItem,"$43f",a)},isc.A.$17b=function(a,b,c,d,e,f){c=this.invokeSuper(isc.ComboBoxItem,
"$17b",a,true,c,d,e,f);if(c==null&&this.getDisplayFieldName()!=null)c=this.$19o(a,false);if(c==null&&!b)c=a;return c},isc.A.mapDisplayToValue=function(a,b,c,d){if(this.$66x){for(var e in this.$66x)if(e==a)return this.$66x[e];delete this.$66x}if(this.getDisplayFieldName()!=null){e=this.$19o(a,true);if(e!=null)a=e}return this.invokeSuper(isc.ComboBoxItem,"mapDisplayToValue",a,b,c,d)});isc.B._maxIndex=isc.C+27;isc.ComboBoxItem.registerStringMethods({dataArrived:"startRow,endRow,data",getPickListFilterCriteria:""});
isc.ClassFactory.defineClass("FileItem","CanvasItem");isc.A=isc.FileItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.shouldSaveValue=true;isc.B.push(isc.A.$18y=function(){this.canvas=isc.DynamicForm.create({autoDraw:false,_redrawWithParent:false,redrawOnResize:false,canSubmit:true,action:this.action,targetItem:this,getSaveOperationType:function(){if(this.targetItem&&this.targetItem.form)return this.targetItem.form.getSaveOperationType();
return this.Super("getSaveOperationType",arguments)},items:[{targetItem:this,type:"upload",width:this.width,height:this.height,name:this.getFieldName(),showTitle:false,saveValue:function(a,b,c,d){this.Super("saveValue",arguments);this.targetItem.saveValue(a,b,c,d)}},{name:"_transaction",type:"HiddenItem"}]});this.containerWidget.addChild(this.canvas)},isc.A.getValue=function(){return this.canvas.getValue(this.getFieldName())},isc.A.setValue=function(a){if(a==null||isc.isA.emptyString(a)){this.canvas.setValue(this.getFieldName(),
a);return this.Super("setValue",arguments)}else this.logWarn("Cannot programmatically set the value of an upload field due to security restraints")},isc.A.setWidth=function(a){this.canvas&&this.canvas.items[0].setWidth(a);this.Super("setWidth",arguments)},isc.A.setHeight=function(a){this.canvas&&this.canvas.items[0].setHeight(a);this.Super("setHeight",arguments)});isc.B._maxIndex=isc.C+5;if(isc.ListGrid){isc.ClassFactory.defineClass("RelationItem","CanvasItem");isc.A=isc.RelationItem.getPrototype();
isc.A.canvasConstructor="ListGrid";isc.A.canvasDefaults={canEdit:true};isc.A.pickerConstructor="RelationPicker";isc.A.showEditButton=true;isc.A.editButtonDefaults={click:"item.showPicker(!form.saveOperationIsAdd(), icon)",prompt:"Edit new/selected item"};isc.A.showRemoveButton=true;isc.A.removeButtonDefaults={src:"[SKIN]DynamicForm/Remove_icon.gif",click:"item.removeSelectedData()",prompt:"Remove selected item"};isc.A.canEditWithNoMasterRecord=false;isc.A=isc.RelationItem.getPrototype();isc.B=isc._allFuncs;
isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function(){this.disabled=!this.canEditWithNoMasterRecord;this.Super("init",arguments);if(!this.pickerDefaults)this.pickerDefaults={};isc.addProperties(this.pickerDefaults,{dataSource:this.dataSource});if(this.showEditButton)this.editButton=this.addIcon(this.editButtonDefaults);if(this.showRemoveButton)this.removeButton=this.addIcon(this.removeButtonDefaults)},isc.A.getPickerData=function(){var a=this.canvas.getSelectedRecord();
if(a)return a;return this.getDataSource().getForeignKeysByRelation(this.form.getValues(),this.form.dataSource)},isc.A.showPicker=function(){this.Super("showPicker",arguments);var a={};this.form.saveOperationIsAdd()||(a=this.getDataSource().getForeignKeysByRelation(this.form.getValues(),this.form.dataSource));this.picker.setForeignKeyValues(a)},isc.A.getValue=function(){},isc.A.removeSelectedData=function(){this.canvas.removeSelectedData()},isc.A.setValue=function(){this.delayCall("filterRelation")},
isc.A.filterRelation=function(){var a=this.form.getValues();if(this.form.saveOperationIsAdd()){this.canvas.setData([]);this.setDisabled(!this.canEditWithNoMasterRecord)}else{this.canvas.filterData(this.getDataSource().getForeignKeysByRelation(a,this.form.dataSource));this.enable()}this.picker&&this.picker.clearData()});isc.B._maxIndex=isc.C+7;isc.defineClass("RelationPicker","VLayout");isc.A=isc.RelationPicker.getPrototype();isc.A.className="dialogBackground";isc.A=isc.RelationPicker.getPrototype();
isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.creatorName="picker";isc.B.push(isc.A.initWidget=function(){this.Super("initWidget",arguments);this.addAutoChild("editor",{dataSource:this.dataSource},"DynamicForm");this.addAutoChild("toolbar",{membersMargin:2},"HLayout");this.addAutoChild("saveButton",{title:"Save",click:"this.picker.editor.saveData(this.picker.getID()+'.hide()')"},"AutoFitButton",this.toolbar);this.addAutoChild("clearButton",{title:"Clear",
click:"this.picker.clearData();"},"AutoFitButton",this.toolbar);this.addAutoChild("cancelButton",{title:"Cancel",click:"this.picker.hide();this.picker.clearData()"},"AutoFitButton",this.toolbar)},isc.A.hide=function(){this.Super("hide",arguments);this.hideClickMask()},isc.A.setData=function(a){this.editor.setData(a)},isc.A.getData=function(){return this.editor.getValues()},isc.A.clearData=function(){this.editor.clearValues();this.setData(this.foreignKeyValues)},isc.A.dataChanged=function(){},isc.A.setForeignKeyValues=
function(a){this.foreignKeyValues=a});isc.B._maxIndex=isc.C+7}if(isc.ListGrid){isc.ClassFactory.defineClass("MultiFileItem","RelationItem");isc.A=isc.MultiFileItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.pickerConstructor="MultiFilePicker";isc.A.canvasDefaults={showHeader:false,canHover:true,cellHoverHTML:function(a,b,c){if(this.canvasItem.form.saveOperationIsAdd())return a[this.getFieldName(c)]},getCellValue:function(a){a=this.Super("getCellValue",
arguments);if(this.canvasItem.form.saveOperationIsAdd()){if(!this.displayShortName||!a)return a;a=a.replace(/.*(\\|\/)/g,isc.emptyString)}return a}};isc.A.emptyMessage="Click icon to add...";isc.A.displayShortName=true;isc.A.iconWidth=16;isc.A.iconHeight=16;isc.A.editButtonDefaults=isc.addProperties({},isc.RelationItem.getInstanceProperty("editButtonDefaults"),{prompt:"Add files",src:"[SKIN]MultiFileItem/icon_add_files.png",showOver:false});isc.A.removeButtonDefaults=isc.addProperties({},isc.RelationItem.getInstanceProperty("removeButtonDefaults"),
{src:"[SKIN]MultiFileItem/icon_remove_files.png",showOver:false,prompt:"Remove selected files"});isc.A.canEditWithNoMasterRecord=true;isc.B.push(isc.A.getDynamicDefaults=function(a){if(a=="canvas"){var b={};if(this.emptyMessage!=null)b.emptyMessage=this.emptyMessage;if(this.displayShortName!=null)b.displayShortName=this.displayShortName;return b}return this.Super("getDynamicDefaults",arguments)});isc.B._maxIndex=isc.C+1;isc.A=isc.MultiFileItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;
isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.removeSelectedData=function(){if(!this.form.saveOperationIsAdd())return this.Super("removeSelectedData",arguments);for(var a=this.canvas.getSelection(),b=0;b<a.length;b++)this.picker.removeUploadField(a[b]._form,true)},isc.A.formSaved=function(a,b,c){if(this.picker){this.showPicker(true,this.editButton);this.picker.setForeignKeyValues(this.getDataSource().getForeignKeysByRelation(c,this.form.dataSource));this.picker.saveData(this.getID()+
".saveDataCallback()");return false}else this.saveDataCallback()},isc.A.saveDataCallback=function(){this.picker&&this.picker.hide();this.form.formSavedComplete()},isc.A.pickerDataChanged=function(){this.form.saveOperationIsAdd()&&this.canvas.setData(this.picker.getData())},isc.A.destroy=function(){this.Super("destroy");this.picker&&this.picker.destroy()});isc.B._maxIndex=isc.C+5;isc.defineClass("MultiFilePicker","VStack");isc.A=isc.MultiFilePicker.getPrototype();isc.A.height=1;isc.A.layoutMargin=
10;isc.A.styleName="dialogBackground";isc.A.minUploadFields=1;isc.A.minFileSizeForProgressBar=204800;isc.A.progressCheckFrequency=1E3;isc.A.progressMeterConstructor="MultiFileProgressMeter";isc.A.uploadLayoutConstructor="VStack";isc.A.uploadWithPKButtonName="Save";isc.A.uploadWithoutPKButtonName="OK";isc.A.cancelButtonName="Cancel";isc.A.showUploadRemoveButton=true;isc.A.uploadWithoutPK=false;isc.A=isc.MultiFilePicker.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;
isc.D[isc.C]=isc.A.Class;isc.A.creatorName="picker";isc.B.push(isc.A.initWidget=function(){this.Super("initWidget",arguments);this.addAutoChild("uploadLayout",{height:1});this.addAutoChild("addAnotherFileButton",{width:75,height:20,align:"left",cursor:isc.Canvas.HAND,icon:"[SKIN]MultiFileItem/icon_add_files.png",contents:"<u>Add&nbsp;another</u>",click:"this.picker.addUploadField()"},"Label");this.addAutoChild("toolbar",{width:1,height:1,membersMargin:10,layoutMargin:10,layoutAlign:"right"},"HStack");
this.addAutoChild("saveButton",{title:this.hasKeys()?this.uploadWithPKButtonName:this.uploadWithoutPKButtonName,width:80,updateTitle:function(){var a=this.parentElement.picker;a=a.hasKeys()?a.uploadWithPKButtonName:a.uploadWithoutPKButtonName;a!=this.title&&this.setTitle(a)},click:function(){var a=this.parentElement.picker;if(!a.hasKeys()&&!a.uploadWithoutPK){a.hide();a.dataChanged()}else a.saveData()},observes:[{source:this,message:"setForeignKeyValues",action:"observer.updateTitle()"}]},"IButton",
this.toolbar);this.addAutoChild("cancelButton",{title:this.cancelButtonName,width:80,click:function(){this.picker.hide();this.picker.creator.form.saveOperationIsAdd()&&this.picker.clearData()}},"IButton",this.toolbar);this.clearData()},isc.A.hasKeys=function(){return this.foreignKeyValues&&!isc.isAn.emptyObject(this.foreignKeyValues)},isc.A.setForeignKeyValues=function(a){this.foreignKeyValues=a},isc.A.clearData=function(){for(var a=this.getForms(),b=0;b<a.length;b++)this.removeUploadField(a[b]);
for(b=0;b<this.minUploadFields;b++)this.addUploadField()},isc.A.addUploadField=function(){var a=this.createAutoChild("uploadForm",{dataSource:this.dataSource,cellPadding:0,numCols:1,colWidths:["*"],width:250,elementChanged:function(){this.Super("elementChanged",arguments);this.picker.dataChanged()}},isc.DynamicForm),b=this.createAutoChild("uploadFormLayout",{members:[a],height:21},isc.HLayout);this.uploadLayout.addMember(b);if(this.showUploadRemoveButton){a=this.createAutoChild("uploadRemoveButton",
{form:a,picker:this,contents:isc.emptyString,cursor:isc.Canvas.HAND,icon:"[SKIN]MultiFileItem/icon_remove_files.png",click:"this.picker.removeUploadField(this.form, true)",iconSpacing:6,width:22,height:20},isc.Label);b.addMember(a,0)}this.maxUploadFields&&this.maxUploadFields<=this.uploadLayout.getMembers().length&&this.addAnotherFileButton.hide()},isc.A.removeUploadField=function(a,b){if(a.$203){isc.rpc.cancelQueue(a.$203);this.transactionNum=null;this.progressMeter&&this.progressMeter.hide()}a.parentElement.destroy();
b&&this.uploadLayout.getMembers().length<this.minUploadFields&&this.addUploadField();this.maxUploadFields&&this.maxUploadFields>this.uploadLayout.getMembers().length&&this.addAnotherFileButton.show();this.dataChanged()},isc.A.getForms=function(){return this.uploadLayout.getMembers().map("getMember",this.showUploadRemoveButton?1:0)},isc.A.dataChanged=function(){},isc.A.hide=function(){this.Super("hide",arguments);this.hideClickMask()},isc.A.getData=function(){for(var a=[],b=this.getForms(),c=0;c<b.length;c++){var d=
b[c],e=d.getValues();if(!isc.isAn.emptyObject(e)){e._form=d;a[a.length]=e}}return a},isc.A.saveData=function(a){if(!a)a=this.saveCallback;a||(a=this.getID()+".hide()");this.saveCallback=a;var b=this.getForms();this.saveButton.setTitle(this.uploadWithPKButtonName);for(var c,d;b.length>0;){c=b[0];if(d=c.getFields()[0].getValue())break;else{this.removeUploadField(c);b.remove(c)}}if(b.length==0){this.progressMeter&&this.progressMeter.hide();this.transactionNum=null;delete this.saveCallback;this.fireCallback(a);
this.clearData()}else if(c.validate()){if(!this.progressMeter){this.progressMeter=this.createAutoChild("progressMeter",{progressCheckFrequency:this.progressCheckFrequency});this.addMember(this.progressMeter,0)}d=d.replace(/.*(\\|\/)/g,isc.emptyString);this.progressMeter.setFileName(d);this.progressMeter.hideProgressBar();this.progressMeter.show();if(this.hasKeys())for(var e in this.foreignKeyValues)c.setValue(e,this.foreignKeyValues[e]);this.transactionNum=c.saveData(this.getID()+".saveDataCallback(dsRequest, dsResponse, data)",
{params:{formID:c.getID()},willHandleError:true,form:c,showPrompt:false,saveDataCallback:a,timeout:0}).transactionNum;c.$203=this.transactionNum;this.progressCheck(c.getID(),this.transactionNum)}},isc.A.saveDataCallback=function(a,b,c){var d=a.form;if(b.status!=isc.RPCResponse.STATUS_SUCCESS){this.progressMeter.hide();this.transactionNum=null;b.status==isc.RPCResponse.STATUS_VALIDATION_ERROR?d.setErrors(b.errors,true):isc.warn(c)}else{d.$203=null;this.removeUploadField(d);this.saveData(a.saveDataCallback);
this.callingFormItem.fileUploaded&&this.callingFormItem.fileUploaded(a,b)}},isc.A.progressCheck=function(a,b){this.lastProgressCheckTime=(new Date).getTime();isc.DMI.callBuiltin({methodName:"uploadProgressCheck",callback:this.getID()+".progressCallback(rpcRequest, rpcResponse, data, "+b+")",arguments:a,requestParams:{willHandleError:true,showPrompt:false,formID:a}})},isc.A.progressCallback=function(a,b,c,d){a=a.formID;var e=window[a];if(!(!e||this.transactionNum!==d)){b.status!=isc.RPCResponse.STATUS_SUCCESS&&
this.progressCheck(a);if(c.errors){isc.rpc.cancelQueue(this.transactionNum);e.setErrors(c.errors,true);this.saveButton.show();this.transactionNum=null;this.progressMeter.hide()}else{this.progressMeter.setFileSize(c.totalBytes);if(c.totalBytes<this.minFileSizeForProgressBar)this.progressMeter.hideProgressBar();else{this.progressMeter.setBytesReceived(c.bytesSoFar);this.progressMeter.showProgressBar();this.progressMeter.setPercentDone(100*c.bytesSoFar/c.totalBytes);b=this.progressCheckFrequency-((new Date).getTime()-
this.lastProgressCheckTime);if(b<0)b=0;this.delayCall("progressCheck",[a,d],b)}}}});isc.B._maxIndex=isc.C+14;isc.defineClass("MultiFileProgressMeter","VStack");isc.A=isc.MultiFileProgressMeter;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.formatBytes=function(a){var b;if(a<1024){a=Math.round(a/1024);b="B"}else if(a<1048576){a=Math.round(a/1024);b="KB"}else{a=Math.round(a/1048576*100)/100;b="MB"}return a+"&nbsp;"+b});isc.B._maxIndex=isc.C+
1;isc.A=isc.MultiFileProgressMeter.getPrototype();isc.A.height=50;isc.A=isc.MultiFileProgressMeter.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function(){this.Super("initWidget",arguments);this.addAutoChild("progressLabel",{height:1,dynamicContentsVars:{progressMeter:this},dynamicContents:true,contents:"<b><nobr>Saving ${progressMeter.fileName} ${progressMeter.getFormattedFileSize()}</nobr></b>"},"Canvas")},isc.A.setFileName=
function(a){this.fileName=a;delete this.fileSize;this.bytesReceived=this.bytesSoFar=0;this.progressLabel.markForRedraw();this.progressBar&&this.setPercentDone(0)},isc.A.setFileSize=function(a){this.fileSize=a;this.progressLabel.markForRedraw()},isc.A.setBytesReceived=function(a){this.bytesSoFar=this.bytesReceived;this.bytesReceived=a;this.progressLabel.markForRedraw()},isc.A.getFormattedFileSize=function(){if(!this.fileSize)return isc.emptyString;var a="<br>";if(this.bytesReceived)a+=isc.MultiFileProgressMeter.formatBytes(this.bytesReceived)+
" of ";a+=isc.MultiFileProgressMeter.formatBytes(this.fileSize);if(this.bytesSoFar&&this.progressCheckFrequency){var b=this.bytesReceived-this.bytesSoFar;b=isc.MultiFileProgressMeter.formatBytes(b*1E3/this.progressCheckFrequency);a+=" ("+b+"/sec)"}return a},isc.A.showProgressBar=function(){this.addAutoChild("progressBar",{overflow:"visible"},"Progressbar");this.progressBar.show()},isc.A.hideProgressBar=function(){this.progressBar&&this.progressBar.hide()},isc.A.setPercentDone=function(a){this.progressBar.setPercentDone(a)});
isc.B._maxIndex=isc.C+8}isc.addGlobal("MultiUploadItem",isc.MultiFileItem);isc.addGlobal("MultiUploadPicker",isc.MultiFilePicker);if(isc.ListGrid){isc.defineClass("DialogUploadItem","StaticTextItem");isc.A=isc.DialogUploadItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.iconHeight=16;isc.A.iconWidth=16;isc.A.icons=[{src:"[SKIN]MultiUploadItem/icon_add_files.png",name:"upload",prompt:"Upload File",click:"item.showPicker(true)"},{src:"[SKIN]MultiUploadItem/icon_remove_files.png",
name:"remove",prompt:"Remove File",click:"item.removeFile()"}];isc.A.pickerConstructor="DialogUploadPicker";isc.A.noFileString="[NONE]";isc.B.push(isc.A.init=function(){this.Super("init",arguments);if(!this.pickerDefaults)this.pickerDefaults={};isc.addProperties(this.pickerDefaults,{dataSource:this.dataSource})},isc.A.mapValueToDisplay=function(a){return a==null?this.noFileString:this.Super("mapValueToDisplay",arguments)},isc.A.showPicker=function(){this.Super("showPicker",arguments);this.picker.foreignKeyValues=
{primaryKey:this.getValue("primaryKey")}},isc.A.removeFile=function(){var a=this.getValue();a!=this.defaultValue&&isc.DataSource.get(this.dataSource).removeData({primaryKey:a},this.getID()+".removeFileCallback(dsResponse)")},isc.A.removeFileCallback=function(a){a.status!=isc.DSResponse.STATUS_SUCCESS?isc.warn("Unable to remove file: "+a.data):this.setValue(this.defaultValue)},isc.A.fileUploaded=function(a,b){var c=b.data,d={};d[c.primaryKey]=c.file_filename;this.setValueMap(d);this.setValue(c.primaryKey)},
isc.A.destroy=function(){this.Super("destroy");this.picker&&this.picker.destroy()});isc.B._maxIndex=isc.C+7;isc.defineClass("DialogUploadPicker","MultiFilePicker");isc.A=isc.DialogUploadPicker.getPrototype();isc.A.maxUploadFields=1;isc.A.uploadWithoutPKButtonName="Upload";isc.A.uploadWithPKButtonName="Upload";isc.A.showUploadRemoveButton=false;isc.A.uploadWithoutPK=true}if(isc.ListGrid){isc.ClassFactory.defineClass("SOAPUploadItem","DialogUploadItem");isc.A=isc.SOAPUploadItem.getPrototype();isc.A.dataSource=
"sessionFiles"}isc.ClassFactory.defineClass("SpinnerItem","TextItem");isc.A=isc.SpinnerItem;isc.A.INCREASE_ICON={width:16,height:9,src:"[SKIN]/DynamicForm/Spinner_increase_icon.png",name:"increase",showOver:true,imgOnly:true,hspace:0};isc.A.DECREASE_ICON={width:16,height:9,src:"[SKIN]/DynamicForm/Spinner_decrease_icon.png",name:"decrease",showOver:true,imgOnly:true,hspace:0};isc.A=isc.SpinnerItem.getPrototype();isc.A.changeOnKeypress=false;isc.A.canTabToIcons=false;isc.A.height=18;isc.A.step=1;isc.A=
isc.SpinnerItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function(){this.Super("init",arguments);var a=this.step;if(a!=null&&!isc.isA.Number(a)){a=parseFloat(a);isc.isA.Number(a)||(a=1);this.step=a}},isc.A.$14v=function(){if(this.icons==null)this.icons=[];var a=isc.addProperties({},isc.SpinnerItem.INCREASE_ICON),b=isc.addProperties({},isc.SpinnerItem.DECREASE_ICON);this.icons.addListAt([a,b],0);this.Super("$14v",
arguments)},isc.A.getIconsHTML=function(){if(!this.showIcons)return"";var a=isc.SB.create();if(this.$204){this.$204[8]=this.getIconHTML(this.icons[0]);this.$204[11]=this.getIconHTML(this.icons[1])}else{var b="<TD tabIndex=-1"+(isc.Browser.isIE?" style='font-size:0px'":"")+">",c={},d=this.$16l(c);c=this.$16m(c);this.$204=["<TABLE STYLE='vertical-align:",d,";margin-top:",c,";margin-bottom:",c,";display:inline;' BORDER=0 CELLPADDING=0 CELLSPACING=0><TR>",b,this.getIconHTML(this.icons[0]),"<TD></TR><TR>",
b,this.getIconHTML(this.icons[1]),"</TD></TR></TABLE>"]}a.append(this.$204);for(b=2;b<this.icons.length;b++){d=this.icons[b];!this.$16f(d)||this.$16e(d)||a.append(this.getIconHTML(d))}return a.toString()},isc.A.$16m=function(a){if(a==this.icons[0]||a==this.icons[1])return 0;return this.Super("$16m",arguments)},isc.A.getTotalIconsWidth=function(){var a=this.Super("getTotalIconsWidth",arguments);if(a>0)a-=Math.max(this.icons[0].width,this.icons[1].width);return a},isc.A.mouseStillDown=function(a,b,
c){if(!this.isDisabled()){this.$205++;this.$18j&&this.updateValue();a=c.nativeTarget;if(a==this.$16v(this.icons[0]))this.increaseValue();else a==this.$16v(this.icons[1])&&this.decreaseValue()}},isc.A.mouseDown=function(){if(!this.isDisabled()){this.hasFocus||this.focusInItem();this.$205=0}},isc.A.handleKeyPress=function(a){if(this.Super("handleKeyPress",arguments)==false)return false;var b=a.keyName;if(b=="Arrow_Up"){this.increaseValue();return false}if(b=="Arrow_Down"){this.decreaseValue();return false}},
isc.A.increaseValue=function(){this.updateValue();var a=this.getValue();if(!(a!=null&&this.max==a))return this.$206(a,this.step*(this.$205!=null?Math.pow(2,Math.floor(this.$205/(2E3/isc.EH.STILL_DOWN_DELAY))):1))},isc.A.decreaseValue=function(){this.updateValue();var a=this.getValue();if(!(a!=null&&this.min==a))return this.$206(a,(0-this.step)*(this.$205!=null?Math.pow(2,Math.floor(this.$205/(2E3/isc.EH.STILL_DOWN_DELAY))):1))},isc.A.$206=function(a,b){var c=this.min,d=this.max;if(isc.isA.Number(a)){var e,
f;if(Math.round(b)==b)e=0;else{e=b+"";e=e.length-(e.indexOf(".")+1)}if(Math.round(a)==a)f=0;else{f=a+"";f=f.length-(f.indexOf(".")+1)}a+=b;e=Math.max(e,f);if(e>0)a=parseFloat(a.toFixed(e));if(b>0&&d!=null&&a>d)a=d;else if(b<0&&c!=null&&a<c)a=c}else{a=0;if(c!=null&&a<c||d!=null&&a>d)a=c!=null?c:d}this.setElementValue(a);this.updateValue()},isc.A.mapDisplayToValue=function(a){a=this.Super("mapDisplayToValue",arguments);if(isc.isA.String(a)){var b=parseFloat(a);if(b==a)a=b}return a},isc.A.updateValue=
function(){var a=this.getElementValue();a=this.mapDisplayToValue(a);if(a!=this._value)a!=null&&(!isc.isA.Number(a)||this.max!=null&&a>this.max||this.min!=null&&a<this.min)?this.setElementValue(this.mapValueToDisplay(this._value)):this.Super("updateValue",arguments)},isc.A.setValue=function(a,b,c,d,e,f){if(a!=null&&!isc.isA.Number(a)){var g=parseFloat(a);if(g==a)a=g;else{this.logWarn("setValue(): passed '"+a+"'. This is not a valid number - rejecting this value");a=null}}if(a!=null){if(this.max!=null&&
a>this.max){this.logWarn("setValue passed "+a+" - exceeds specified maximum. Clamping to this.max.");a=this.max}if(this.min!=null&&a<this.min){this.logWarn("setValue passed "+a+" - less than specified minimum. Clamping to this.min.");a=this.min}}return this.invokeSuper(isc.SpinnerItem,"setValue",a,b,c,d,e,f)});isc.B._maxIndex=isc.C+14;isc.ClassFactory.defineClass("SliderItem","CanvasItem");isc.A=isc.SliderItem.getPrototype();isc.A.vertical=false;isc.A.minValue=1;isc.A.maxValue=100;isc.A.roundValues=
true;isc.A.roundPrecision=1;isc.A.defaultValue=1;isc.A.shouldSaveValue=true;isc.A.sliderDefaults={autoDraw:false,showTitle:false,valueChanged:function(){this.canvasItem&&this.canvasItem.sliderChange()}};isc.A.autoDestroy=true;isc.A=isc.SliderItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.changeOnDrag=true;isc.B.push(isc.A.init=function(){this.Super("init",arguments);this.$207=this.getDefaultValue()},isc.A.$18y=function(){var a=isc.addProperties({},
this.sliderDefaults,{vertical:this.vertical,minValue:this.minValue,maxValue:this.maxValue,value:this.defaultValue,numValues:this.numValues,roundValues:this.roundValues,roundPrecision:this.roundPrecision,tabIndex:this.getGlobalTabIndex()},this.sliderProperties);this.canvas=isc.Slider.create(a);this.Super("$18y",arguments)},isc.A.isEditable=function(){return true},isc.A.setValue=function(a){this.$17g=true;var b;if(a==null){b=this.getDefaultValue();if(b!=null)a=b}this.$207=a;this.canvas.setValue(a,b!=
null)},isc.A.getValue=function(){return this.canvas.getValue()},isc.A.sliderChange=function(){var a=this.canvas.getValue();if(this.$207!=a){if(this.changeOnDrag||!this.canvas.valueIsChanging()){this.$10y(a);this.$207=a}}else this.saveValue(a)},isc.A.setMinValue=function(a){this.canvas.setMinValue(a)},isc.A.setMaxValue=function(a){this.canvas.setMaxValue(a)},isc.A.setNumValues=function(a){this.canvas.setNumValues(a)});isc.B._maxIndex=isc.C+9;isc.ClassFactory.defineClass("ColorItem","TextItem");isc.A=
isc.ColorItem.getPrototype();isc.A.changeOnBlur=true;isc.A.changeOnKeypress=false;isc.A.pickerConstructor="ColorPicker";isc.A.pickerDefaults={colorSelected:function(a,b){this.callingFormItem.pickerColorSelected(a,b)}};isc.A.showPickerIcon=true;isc.A.pickerIconWidth=18;isc.A.pickerIconHeight=18;isc.A.pickerIconSrc="[SKIN]/DynamicForm/ColorPicker_icon.png";isc.A.pickerIconProperties={prompt:"Click to select a new color",showOver:false};isc.A.defaultPickerMode="simple";isc.A.allowComplexMode=true;isc.A.supportsTransparency=
false;isc.A.browserSpellCheck=false;isc.A=isc.ColorItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function(){this.pickerDefaults.defaultPickMode=this.defaultPickerMode;this.pickerDefaults.allowComplexMode=this.allowComplexMode;this.pickerDefaults.supportsTransparency=this.supportsTransparency;this.Super("init",arguments)},isc.A.updateValue=function(){var a=this._value,b=this.getElementValue();b=this.mapDisplayToValue(b);
if(b!=this._value)if(b!=null&&!isc.isA.color(b))this.setElementValue(a);else{this.Super("updateValue",arguments);this.showPickerIcon&&this._value!=a&&this.setIconBackgroundColor(this.getPickerIcon(),this._value)}},isc.A.getDefaultValue=function(){var a=this.Super("getDefaultValue",arguments);if(a&&!isc.isA.color(a)){this.logWarn("Default value:"+a+" is not a valid color identifier. Ignoring this default.");a=this.defaultValue=null}return a},isc.A.showPicker=function(){var a=this.picker=isc.ColorChooser.getSharedColorPicker(this.pickerDefaults);
if(a.callingFormItem!=this){a.callingFormItem=this;a.callingForm=this.form;a.setSupportsTransparency(this.supportsTransparency)}return this.Super("showPicker",arguments)},isc.A.pickerColorSelected=function(a){this.mask||(a=this.mapValueToDisplay(a));this.setElementValue(a);this.updateValue()},isc.A.setValue=function(){this.Super("setValue",arguments);this.setIconBackgroundColor(this.getPickerIcon(),this._value)});isc.B._maxIndex=isc.C+6;if(isc.ListGrid){isc.ClassFactory.defineClass("PickTreeItem",
"CanvasItem");isc.A=isc.PickTreeItem;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.$21j=function(a){return this.canvasItem.$21j(a)},isc.A.$21k=function(){if(this.getSelectedItem()==null){var a=this.canvasItem,b=this.canvasItem.getValue();if(b!=null)return a.mapValueToDisplay(b)}return this.Super("getTitle",arguments)},isc.A.$21l=function(){var a=this.canvasItem;a.setValue(a.getValue())});isc.B._maxIndex=isc.C+3;isc.A=isc.PickTreeItem.getPrototype();
isc.A.canFocus=true;isc.A.shouldSaveValue=true;isc.A.buttonDefaults={height:19};isc.A.emptyMenuMessage="No items to display";isc.A=isc.PickTreeItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.buttonConstructor="TreeMenuButton";isc.B.push(isc.A.init=function(){this.Super("init",arguments);this.dataSource==null&&this.valueTree==null&&this.logWarn("This form item requires a 'valueTree'.")},isc.A.getDisplayValue=function(){return this.canvas.getTitle()},
isc.A.$18y=function(){this.canvas=this.addAutoChild("button",{getTitle:isc.PickTreeItem.$21k,canFocus:this.$kk(),disabled:this.isDisabled(),dataSource:this.dataSource,data:this.valueTree,canSelectParentItems:this.canSelectParentItems,itemSelected:isc.PickTreeItem.$21j,emptyMenuMessage:this.emptyMenuMessage,loadDataOnDemand:this.loadDataOnDemand,treeDataLoaded:isc.PickTreeItem.$21l,displayField:this.displayField},this.buttonConstructor,this.container);this.autoDestroy=true;this.Super("$18y",arguments)},
isc.A.$21j=function(a){if(this.$10y(this.$21m(a)))this.$21n=a},isc.A.$21m=function(a){if(this.$21o())return this.valueTree.getPath(a);return a[this.$21p()]},isc.A.$21o=function(){return!this.valueField&&this.valueTree&&this.valueTree.modelType!="parent"},isc.A.$21p=function(){var a=this.valueField;a||(a=this.valueTree?this.valueTree.idField:this.$21q());return a},isc.A.$21q=function(){if(!this.dataSource)return null;if(!this.$21r){var a=isc.DataSource.getDataSource(this.dataSource).getPrimaryKeyFieldNames(),
b=isc.isAn.Array(a)?a[0]:a;isc.isAn.Array(a)&&a.length>1&&this.logWarn("Multiple primary key fields not supported by PickTreeItem - using '"+b+"' as single primary key field");this.$21r=b}return this.$21r},isc.A.getSelectedNode=function(){return this.$21n},isc.A.setValue=function(){this.Super("setValue",arguments);var a=this.$21s(this.getValue());this.$21n=a;this.canvas&&this.canvas.setSelectedItem(a)},isc.A.$21s=function(a){if(!a)return null;var b=this.dataSource?this.canvas.getTree():this.valueTree;
if(this.$21o())return this.valueTree.find(a);return b.find(this.$21p(),a)});isc.B._maxIndex=isc.C+11;isc.defineClass("IPickTreeItem","PickTreeItem");isc.A=isc.IPickTreeItem.getPrototype();isc.A.buttonConstructor="ITreeMenuButton"}isc.ClassFactory.defineClass("PopUpTextAreaItem","StaticTextItem");isc.A=isc.PopUpTextAreaItem.getPrototype();isc.A.canFocus=true;isc.A.wrap=false;isc.A.width=150;isc.A.clipValue=true;isc.A.popUpOnEnter=false;isc.A.popUpOnAnyClick=true;isc.A.textAreaWidth=100;isc.A.textAreaHeight=
100;isc.A.iconOnly=false;isc.A.popUpIconSrc="[SKIN]/DynamicForm/PopUpTextAreaEditor_icon.gif";isc.A.popUpIconWidth=20;isc.A.popUpIconHeight=20;isc.A.iconVAlign=isc.Canvas.CENTER;isc.A=isc.PopUpTextAreaItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.$14v=function(){if(this.icons==null)this.icons=[];this.icons.addAt({name:"popUpIcon",src:this.popUpIconSrc,showOver:false,width:this.popUpIconWidth,height:this.popUpIconHeight,
click:this.$43p},0);this.Super("$14v",arguments)},isc.A.$43p=function(a,b){b.popUpOnAnyClick||b.isDisabled()||b.showPopUp(true)},isc.A.handleCellClick=function(){if(this.Super("handleCellClick")==false)return false;this.popUpOnAnyClick&&!this.isDisabled()&&this.showPopUp(true)},isc.A.showPopUp=function(a){var b=this.getValue();this.$21t||this.setupPopUpForm();this.placePopUp();this.$21t.getItem("textArea").setValue(b);this.$21t.bringToFront();this.$21t.show();a&&this.$21t.focusInItem("textArea");
this.$21t.showClickMask({target:this,methodName:"hidePopUp"},true,[this.$21t])},isc.A.visibilityChanged=function(){this.isVisible()||this.$21u()},isc.A.$21u=function(){var a=this.$21t;a&&a.isVisible()&&a.isDrawn()&&a.hide()},isc.A.moved=function(){this.$21v()},isc.A.$21v=function(){var a=this.$21t;if(a&&a.isVisible()&&a.isDrawn()){var b=this.getTop(),c=this.getLeft(),d=this.getInnerWidth(),e=this.getInnerHeight(),f=this.containerWidget,g=f.getScrollTop(),h=f.getScrollLeft(),i=f.getViewportWidth();
f=f.getViewportHeight();b<g||b+e>g+f||c<h||c+d>h+i?a.hide():this.placePopUp()}},isc.A.zIndexChanged=function(){var a=this.$21t;a&&a.isVisible()&&a.isDrawn()&&a.bringToFront()},isc.A.placePopUp=function(){var a=this.getTextAreaTop(),b=this.getTextAreaLeft(),c=this.getTextAreaWidth(),d=this.getTextAreaHeight();this.$21t.moveTo(b,a);this.$21t.resizeTo(c,d);a=this.$21t.getItem("textArea");a.setWidth(c);a.setHeight(d)},isc.A.setupPopUpForm=function(){if(this.$21t==null){var a=isc.DynamicForm.create({autoDraw:false,
ID:this.getID()+"$21t",_generated:true,separateContentInsertion:false,cellPadding:0,targetItem:this,values:{textArea:this.getValue()},items:[{name:"textArea",showTitle:false,type:"textArea",selectOnFocus:true,targetItem:this,focus:function(){this.targetItem.textAreaFocus()},keyDown:function(b,c,d,e){this.targetItem.$18i();return this.targetItem.textAreaKeyDown(b,d,e)},keyPress:function(b,c,d,e){return this.targetItem.textAreaKeyPress(b,d,e)},blur:function(){this.targetItem.textAreaBlur()}}],hide:function(b,
c,d,e){b=this.invokeSuper(isc.DynamicForm,"hide",b,c,d,e);this.hideClickMask();return b}});this.$21t=a;a.observe(this.containerWidget,"destroy","observer.hide();observer.destroy()")}},isc.A.hidePopUp=function(){if(this.$21t){this.updateValue();this.$21t.hide()}},isc.A.destroy=function(){if(this.$21t){this.$21t.destroy();delete this.$21t}return this.Super("destroy",arguments)},isc.A.getTextAreaTop=function(){var a=this.getPageTop();if(isc.Browser.isIE)a-=1;return a},isc.A.getTextAreaLeft=function(){return this.getPageLeft()},
isc.A.getTextAreaWidth=function(){return Math.max(this.textAreaWidth,this.getInnerWidth())},isc.A.getTextAreaHeight=function(){return this.textAreaHeight},isc.A.mapValueToDisplay=function(){if(this.iconOnly)return"";return this.Super("mapValueToDisplay",arguments)},isc.A.textAreaBlur=function(){this.hidePopUp()},isc.A.textAreaFocus=function(){},isc.A.textAreaKeyPress=function(){},isc.A.textAreaKeyDown=function(){},isc.A.setValue=function(){var a=this.mapValueToDisplay(this.getValue());this.Super("setValue",
arguments);var b=this.mapValueToDisplay(this.getValue());if(a!=b){this.setElementValue(b);this.$21t&&this.$21t.isVisible()&&this.$21t.setValue("textArea",b)}},isc.A.updateValue=function(){if(this.$21t&&this.$21t.isVisible()&&!this.$21t.$10u){this.$21t.getItem("textArea").updateValue();var a=this.$21t.getValue("textArea");this.setElementValue(this.mapValueToDisplay(a));this.$10y(a)}else return this.Super("updateValue",arguments)},isc.A.setElementValue=function(){if(!this.iconOnly)return this.Super("setElementValue",
arguments)},isc.A.focusInItem=function(){if(this.$21t&&this.$21t.isVisible())this.$21t.focusInItem("textArea");else this.showIcons?this.focusInIcon(this.icons[0]):this.showPopUp(true)},isc.A.$173=function(a){this.$174=a;this.isVisible()&&this.containerWidget.isDrawn()&&this.$175()});isc.B._maxIndex=isc.C+27;isc.defineClass("ExpressionItem","PopUpTextAreaItem");isc.A=isc.ExpressionItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.textAreaWidth=
400;isc.A.showActionIcon=true;isc.A.actionIconSrc="[SKIN]/actions/add.png";isc.A.actionIconWidth=20;isc.A.actionIconHeight=20;isc.A.actionIconPosition=1;isc.B.push(isc.A.mapValueToDisplay=function(a){if(isc.isA.StringMethod(a))return a.getDisplayValue();else if(isc.isA.Function(a)){if(a.iscAction)return"["+a.iscAction.title+"]";return isc.Func.getBody(a)}else return this.Super("mapValueToDisplay",arguments)},isc.A.getValue=function(){var a=this.Super("getValue");return isc.isA.Function(a)?isc.Func.getBody(a):
a},isc.A.$14v=function(){this.Super("$14v",arguments);if(this.showActionIcon){if(this.icons==null)this.icons=[];var a=this.actionIconPosition;this.icons.addAt({name:"action",src:this.actionIconSrc,showOver:false,width:this.actionIconWidth,height:this.actionIconHeight,click:this.getID()+".showActionMenu();return false;"},a);this.$36c(this.icons[a])}},isc.A.updateAppearance=function(a){this.setElementValue(this.mapValueToDisplay(a))},isc.A.showActionMenu=function(){var a=this,b=isc.ActionMenu.create({sourceComponent:this.form.currentComponent,
sourceMethod:this.name,components:this.form.allComponents,bindingComplete:function(d){a.$10y(d)}});b.show();var c=this.getIconPageRect(this.icons[1]);b.placeNear(c[0]+this.actionIconWidth,c[1]+this.actionIconHeight-this.containerWidget.getScrollTop())});isc.B._maxIndex=isc.C+5;isc.ClassFactory.defineClass("SearchForm","DynamicForm");isc.A=isc.SearchForm.getPrototype();isc.A.hiliteRequiredFields=false;isc.A.operationType="fetch";isc.A.$66m=true;isc.A=isc.SearchForm.getPrototype();isc.B=isc._allFuncs;
isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$21w="DateItem";isc.B.push(isc.A.createItem=function(a,b,c,d,e){var f=this.getDataSource();if(f?f.getField(a[this.fieldIdProperty])!=null:false){f=isc.FormItemFactory.getItemClassName(a,b,this);if(isc.FormItemFactory.getItemClass(f)==isc.DateItem&&a&&a.useTextField==null)a.useTextField=true;if(a.allowEmptyValue==null)a.allowEmptyValue=true}return this.invokeSuper(isc.SearchForm,"createItem",a,b,c,d,e)},isc.A.submitValues=
function(){if(this.search!=null)return this.search(this.getValuesAsCriteria(),this)},isc.A.validate=function(a,b,c){return this.validateTypeOnly?this.invokeSuper(isc.SearchForm,"validate",a,b,true):this.invokeSuper(isc.SearchForm,"validate",a,b,c)},isc.A.getEditorType=function(a){if(a.type=="date")return"DateRangeItem";return this.Super("getEditorType",arguments)});isc.B._maxIndex=isc.C+4;isc.A=isc.SearchForm.getPrototype();isc.A.showFilterFieldsOnly=true;isc.A.validateTypeOnly=true;isc.SearchForm.registerStringMethods({search:"criteria,form"});
isc.ClassFactory.defineClass("ValuesManager");isc.A=isc.ValuesManager.getPrototype();isc.A.unknownErrorMessage=null;isc.A=isc.ValuesManager.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function(){this.ns.ClassFactory.addGlobalID(this);if(this.unknownErrorMessage==null)this.unknownErrorMessage=isc.Canvas.getPrototype().unknownErrorMessage;this.dataSource&&this.bindToDataSource(this.dataSource);this.values=isc.addProperties({},
this.values);if(this.members!=null){var a=this.members;this.members=null;isc.isAn.Array(a)||(a=[a]);for(var b=0;b<a.length;b++)this.addMember(a[b])}this.rememberValues()},isc.A.destroy=function(){var a=this.members;if(a)for(var b=a.length-1;b>=0;b--)this.removeMember(a[b]);window[this.getID()]=null},isc.A.$71e=function(a,b,c,d){b=b!=null?this.$702(a,b):a;return this.$10y(b,c,d)},isc.A.$10y=function(a,b,c){if(isc.isA.DynamicForm(c)&&c.getItem(a)==null)this.$66q(c,a);else{if(c=c.getFullDataPath()){a=
a!=null?this.$702(c,a):c;c=true}else c=a.contains(isc.Canvas.$70l);if(c)isc.DynamicForm.$70n(a,b,this.values);else this.values[a]=b}},isc.A.$702=function(a,b){return isc.DynamicForm.$702(a,b)},isc.A.$66q=function(a,b){this.logWarn("Member Form: "+a+" has explicitly specified value for field[s] '"+b+"', but has no item associated with this fieldName. Ignoring this value. Values may be set for fields with no associated form item directly on the valuesManager via valuesManager.setValues(), but not on member forms. See ValuesManager documentation for more info.")},
isc.A.$10z=function(a,b){var c=b.getFullDataPath();if(c)a=this.$702(c,a);return isc.DynamicForm.$70m(a,this.values)},isc.A.bindToDataSource=function(a){isc.isA.DataSource(a)||(a=isc.DataSource.getDataSource(a));if(a!=null)this.dataSource=a},isc.A.setDataSource=function(a){this.bindToDataSource(a)},isc.A.getDataSource=function(){if(isc.isA.String(this.dataSource))if(this.serviceNamespace||this.serviceName)this.dataSource=this.lookupSchema();else{var a=isc.DS.get(this.dataSource);if(a!=null)return a;
if((a=this.getWindow()[this.dataSource])&&isc.isA.DataSource(a))return this.dataSource=a}return this.dataSource},isc.A.lookupSchema=function(){var a;a=this.serviceName?isc.WebService.getByName(this.serviceName,this.serviceNamespace):isc.WebService.get(this.serviceNamespace);if((this.serviceNamespace||this.serviceName)&&a==null)this.logWarn("Could not find WebService definition: "+(this.serviceName?"serviceName: "+this.serviceName:"")+(this.serviceNamespace?"   serviceNamespace: "+this.serviceNamespace:
"")+this.getStackTrace());if(isc.isA.String(this.dataSource)){if(a)return a.getSchema(this.dataSource)}else this.logWarn("this.dataSource was not a String in lookupSchema")},isc.A.getDataSourceField=function(a){if(!this.getDataSource()||!a)return null;a=a.trim("/");var b=this.getDataSource();a=a.split("/");for(var c,d=0;d<a.length;d++)if(!isc.isAn.emptyString(a[d]))b=(c=b.getField(a[d]))?isc.DataSource.getDataSource(c.type):b;return c},isc.A.getItems=function(){if(this.members){for(var a=[],b=0;b<
this.members.length;b++){var c=this.members[b];c.getItems&&a.addList(c.getItems())}return a}},isc.A.getFields=function(){return this.getItems()},isc.A.getItem=function(a){return this.$706(a,true)},isc.A.getField=function(a){return this.getItem(a)},isc.A.getMembers=function(){return this.members},isc.A.getMember=function(a){a=window[a];if(this.members&&this.members.contains(a))return a;return null},isc.A.getMemberForField=function(a,b){return this.$706(a,false,b)},isc.A.$706=function(a,b,c){if(!this.members||
a==null||isc.isAn.emptyString(a))return null;a=a.trim("/");for(var d=a.split(isc.Canvas.$70l),e=c?[]:null,f=0;f<this.members.length;f++){var g=this.members[f],h=g.getFullDataPath();if(h==isc.Canvas.$70l||isc.isAn.emptyString(h))h=null;if(d&&d.length>0&&h!=null)for(var i=null,j=0;j<d.length;j++){i=!i?d[j]:i+isc.Canvas.$70l+d[j];if(h.endsWith(isc.Canvas.$70l))h=h.substring(0,h.length-1);if(h==i){if(!b&&j==d.length-1){if(!c)return g;e.add(g);break}if(g.getField){var k=d.slice(j+1).join(isc.Canvas.$70l);
if(k=g.getField(k))if(b){isc.isA.FormItem(k)||(k=null);if(c)k&&e.add(k);else return k}else if(c)e.add(g);else return g}}}else{if(a.startsWith(isc.Canvas.$70l))a=a.substring(1);if(this.members[f].getItem)if(h=this.members[f].getField(a))if(b){isc.isA.FormItem(h)||(h=null);if(c)h&&e.add(h);else return h}else if(c)e.add(g);else return g}}return c?e:null},isc.A.getFileItemForm=function(){if(this.members){for(var a=false,b,c=0;c<this.members.length;c++)if(this.members[c].getFileItemForm!=null){var d=this.members[c].getFileItemForm();
if(d)if(a)this.logWarn("ValuesManager defined with more than one member form  containing a FileItem. This is not supported - binary data may only be uploaded from one FileItem when saving ValuesManager data");else{b=d;a=true}}return b}},isc.A.validate=function(){if(this.disableValidation)return true;if(this.dataSource&&this.dataSource.useLocalValidators!=null&&this.useLocalValidators==false)return true;this.clearHiddenErrors();var a=true,b=this.dataSource?isc.addProperties({},this.getDataSource().getFields()):
null,c={};if(this.members)for(var d=0;d<this.members.length;d++)if(isc.isA.DynamicForm(this.members[d])){c=this.members[d];var e=c.disableValidation,f=this.members[d].getItems();if(!e){if(c.handleHiddenValidationErrors!=null){this.logInfo("form level 'handleHiddenValidationErrors' method suppressed in favor of valuesManager level handler","validation");c.$43q=c.handleHiddenValidationErrors}c.handleHiddenValidationErrors=this.$43r}for(var g=0;g<f.length;g++){var h=f[g].dataPath||f[g].getFieldName();
b&&this.members[d].getDataSource()==this.getDataSource()&&delete b[h]}f=e?true:c.validate(true,true);a=a&&f;if(!e)if(c.$43s)c.handleHiddenValidationErrors=c.$43s;else delete c.handleHiddenValidationErrors;!f&&!(c.isDrawn()&&c.isVisible())&&this.addHiddenErrors(c.errors,c)}e=this.getValues();f={};for(h in b){g=b[h];c=g.validators;var i=e[h];if(c!=null){i=e[h];for(d=0;d<c.length;d++){var j=c[d];if(j)if(!(i==null&&j.type!="required"&&j.type!="requiredIf"))if(!this.processValidator(g,j,i,null,e)){if(f[h]==
null)f[h]=[];f[h].add(j.errorMessage||this.unknownErrorMessage)}}}if(f[h]&&f[h].length==1)f[h]=f[h][0]}this.addHiddenErrors(f);this.$21z(true);if(isc.getKeys(f).length>0)a=false;return a},isc.A.getValidatedValues=function(){if(!this.validate())return null;return this.getValues()},isc.A.$43r=function(a){this.valuesManager.addHiddenErrors(a,this);return false},isc.A.clearHiddenErrors=function(){delete this.hiddenErrors},isc.A.addHiddenErrors=function(a,b){if(!(a==null||isc.isAn.emptyObject(a))){if(!this.hiddenErrors)this.hiddenErrors=
{};if(b){if(isc.isA.Canvas(b))b=b.getID()}else b=this.getID();this.hiddenErrors[b]||(this.hiddenErrors[b]={});for(var c in a)this.hiddenErrors[b][c]=this.$43t(this.hiddenErrors[b][c],a[c])}},isc.A.getHiddenErrors=function(a){a||this.synchHiddenErrors();if(!this.hiddenErrors)return null;a={};for(var b in this.hiddenErrors)isc.addProperties(a,this.hiddenErrors[b]);return a},isc.A.synchHiddenErrors=function(){var a=this.hiddenErrors,b=this.getID();if(a&&a[b])for(var c in a[b]){var d=a[b][c],e=this.getItem(c),
f=e?e.form:null;if(e){f.addFieldErrors(c,d);delete a[b][c]}}e=a[b];a=this.hiddenErrors={};if(e)a[b]=e;if(this.members)for(d=0;d<this.members.length;d++)if(isc.isA.DynamicForm(this.members[d])){f=this.members[d];var g=f.getID(),h=f.errors;if(!(!h||isc.isAn.emptyObject(h)))if(!f.isVisible()||!f.isDrawn()){h=isc.addProperties({},h);a[g]=h}else for(c in h)if(e=f.getItem(c)){if(!e.visible){a[g]||(a[g]={});a[g][c]=h[c]}}else{a[b]||(a[b]={});a[b][c]=h[c];delete h[c]}}},isc.A.processValidator=function(a,
b,c,d,e){return isc.Validator.processValidator(a,b,c,d,e)},isc.A.$21z=function(a){a=this.getHiddenErrors(a);if(!(a==null||isc.getKeys(a).length==0)){var b;if(this.handleHiddenValidationErrors)b=this.handleHiddenValidationErrors(a);if(b!=false){b="Validation failed with the following errors:";for(var c in a){var d=a[c];isc.isAn.Array(d)||(d=[d]);if(d.length!=0){b+="\n"+c+":";for(var e=0;e<d.length;e++)b+=(e==0?"- ":"\n - ")+d[e]}}this.logWarn(b,"validation")}}},isc.A.setErrors=function(a,b){this.clearHiddenErrors();
a=isc.DynamicForm.formatValidationErrors(a);for(var c=this.members?this.members.duplicate():[],d=0;d<c.length;d++)if(isc.isA.DynamicForm(c[d])){for(var e=c[d],f=!e.isVisible()||!e.isDrawn(),g=e.getItems(),h={},i={},j=0;j<g.getLength();j++){var k=g[j],l=k.getFieldName();if(a[l]!=null){h[l]=a[l];if(f||!k.visible)i[l]=a[l];delete a[l]}}e.setErrors(h,false);isc.isAn.emptyObject(i)||this.addHiddenErrors(i,e)}this.addHiddenErrors(a);b&&this.showErrors(true)},isc.A.$43t=function(a,b){if(!a)return b;if(!b)return a;
isc.isAn.Array(a)||(a=[a]);isc.isA.String(b)?a.add(b):a.addList(b);return a},isc.A.addFieldErrors=function(a,b,c){var d=true,e=this.getMemberForField(a);if(e!=null&&isc.isA.DynamicForm(e)){e.addFieldErrors(a,b,false);var f=e.getItem();if(e.isVisible()&&e.isDrawn()&&f&&f.visible)d=false}if(d){if(!this.hiddenErrors)this.hiddenErrors={};d=e?e.getID():this.getID();this.hiddenErrors[d]||(this.hiddenErrors[d]={});this.hiddenErrors[d][a]=this.$43t(this.hiddenErrors[d][a],b)}c&&this.showFieldErrors(a)},isc.A.setFieldErrors=
function(a,b,c){var d=true,e=this.getMemberForField(a);if(e!=null&&isc.isA.DynamicForm(e)){e.setFieldErrors(a,b,false);var f=e.getItem();if(e.isVisible()&&e.isDrawn()&&f&&f.visible)d=false}if(d){if(!this.hiddenErrors)this.hiddenErrors={};this.hiddenErrors[a]=b}c&&this.showFieldErrors(a)},isc.A.clearErrors=function(a){this.setErrors({},a)},isc.A.clearFieldErrors=function(a,b){var c=this.getMemberForField(a);c&&isc.isA.DynamicForm(c)&&c.clearFieldErrors(a,b);this.hiddenErrors&&delete this.hiddenErrors[a]},
isc.A.getErrors=function(){var a=isc.addProperties({},this.getHiddenErrors(true));if(this.members)for(var b=0;b<this.members.length;b++)isc.isA.DynamicForm(this.members[b])&&isc.addProperties(a,this.members[b].getErrors());if(!isc.isA.emptyObject(a))return a;return null},isc.A.getFieldErrors=function(a){var b=this.getMemberForField(a);if(b&&isc.isA.DynamicForm(b))return b.getFieldErrors(a);if(this.hiddenErrors&&this.hiddenErrors[this.getID()])return this.hiddenErrors[this.getID()][a]},isc.A.hasErrors=
function(){if(this.hiddenErrors&&!isc.isA.emptyObject(this.hiddenErrors))for(var a in this.hiddenErrors)if(this.hiddenErrors[a]&&!isc.isAn.emptyObject(this.hiddenErrors[a]))return true;if(this.members==null)return false;for(a=0;a<this.members.length;a++)if(isc.isA.DynamicForm(this.members[a])&&this.members[a].hasErrors())return true;return false},isc.A.hasFieldErrors=function(a){var b=this.getMemberForField(a);if(b&&isc.isA.DynamicForm(b)&&b.hasFieldErrors(a))return true;if((b=this.getHiddenErrors(true))&&
b[a]!=null)return true;return false},isc.A.showErrors=function(a){if(this.members)for(var b=0;b<this.members.length;b++)isc.isA.DynamicForm(this.members[b])&&this.members[b].isDrawn()&&this.members[b].isVisible()&&this.members[b].markForRedraw("ValuesManager validation errors");this.hiddenErrors!=null&&this.$21z(a)},isc.A.showFieldErrors=function(a){var b=this.getMemberForField(a);if(b&&isc.isA.DynamicForm(b)&&b.isVisible()&&b.isDrawn())if((a=b.getItem(a))&&a.visible){a.redraw("Validation errors modified");
return}this.$21z()},isc.A.getFilterCriteria=function(){var a={};if(this.members)for(var b=0;b<this.members.length;b++)isc.addProperties(a,this.members[b].getFilterCriteria());b=this.getValues();for(var c in b)a[c]!==void 0&&delete b[c];isc.addProperties(a,isc.DataSource.filterCriteriaForFormValues(b));return a},isc.A.getValues=function(){if(this.members!=null){var a=isc.EH.getFocusCanvas();this.members.contains(a)&&a.updateFocusItemValue&&a.updateFocusItemValue()}return isc.addProperties({},this.values)},
isc.A.setValues=function(a){if(isc.isAn.Array(a)){var b=isc.isA.Object(a[0]);this.logWarn("values specified as an array."+(b?" Treating the first item in the array as intended values.":" Ignoring specified values."));a=b?a[0]:null}this.values=a=isc.addProperties({},a);if(this.members)for(a=0;a<this.members.length;a++)this.$707(this.members[a]);this.rememberValues()},isc.A.setData=function(a){return this.setValues(a)},isc.A.clearValues=function(){this.setValues({})},isc.A.getMemberValues=function(a){a=
this.getMember(a);if(a!=null)return a.getValues()},isc.A.setMemberValues=function(a,b){var c=this.getMember(a);if(c!=null)return c.setValues(b)},isc.A.rememberValues=function(){var a=this.getValues();this.$10s={};this.$10t=[];this.$708(this.$10s,a);return this.$10s},isc.A.getOldValues=function(){var a={};isc.addProperties(a,this.$10s);return a},isc.A.getChangedValues=function(){var a=this.getValues(),b=this.$10s,c=false,d={};isc.isAn.Object(b)||(b={});for(var e in a)if(!isc.isA.Function(a[e])){c=
this.getItem(e);if(c=c!=null?!c.compareValues(a[e],b[e]):!isc.DynamicForm.compareValues(a[e],b[e]))d[e]=a[e]}return d},isc.A.$708=function(a,b,c){for(var d in b)if(!isc.isA.Function(b[d]))if(d!="__ref"){var e=d;e=c?c+d:d;var f=this.getItem(e);f&&f.isSetToDefaultValue()&&this.$10t.add(e);f=b[d];if(isc.isA.Date(f))a[d]=f.duplicate();else if(isc.isAn.Object(f)&&!isc.isAn.Array(f)){a[d]={};this.$708(a[d],f,e+isc.Canvas.$70l)}else a[d]=b[d]}},isc.A.resetValues=function(){var a={},b;for(b in this.$10s)if(!this.$10t.contains(b))if(isc.isA.Date(this.$10s[b])){var c=
this.getValue(b);if(isc.isA.Date(c)){c.setTime(this.$10s[b].getTime());a[b]=c}else a[b]=this.$10s[b].duplicate()}else a[b]=this.$10s[b];this.setValues(a)},isc.A.valuesHaveChanged=function(){return!isc.objectsAreEqual(this.getValues(),this.$10s)},isc.A.getValue=function(a){return isc.DynamicForm.$70o(a,this.values)},isc.A.setValue=function(a,b){var c=false,d;if(this.members){var e=this.getItem(a);d=e&&e.form?e.form:this.getMemberForField(a);if(e&&e.setValue){b===void 0?e.clearValue():e.setValue(b);
c=true}}if(!c){b===void 0?isc.DynamicForm.$70m(a):isc.DynamicForm.$70n(a,b,this.values);if(d&&d.setData){c=a;if(a.indexOf(isc.Canvas.$70l)!=-1){c=a.substring(0,a.lastIndexOf(isc.Canvas.$70l));d.setData(isc.DynamicForm.$70o(c,this.values))}}}},isc.A.clearValue=function(a){this.setValue(a)},isc.A.addMember=function(a,b){if(isc.isA.String(a))a=window[a];if(isc.isA.Canvas(a)){a.valuesManager!=null&&a.valuesManager.removeMember(a);var c=a.getDataSource();if(c!=null&&!b&&c!=this.getDataSource())this.logWarn("addMember(): mismatched DataSources; new member form "+
a+" has dataSource: '"+c.ID+"', valuesManager has DataSource "+(this.getDataSource()!=null?"'"+this.getDataSource().ID+"'":"[NONE]"));this.getDataSource()!=null&&a.isMultipart&&a.isMultipart()&&a.isMultipart()&&this.logWarn("addMember(): new member form "+a+" is flagged as using multipart encoding. Multipart forms require direct form submission to transfer uploaded files to the server - any uploaded files from this member form will be dropped when saving values from this ValuesManager to the server.");
if(a.dataArity=="single"&&a.autoTrackSelection){var d=(c=a.getFullDataPath())?this.getDataSourceField(c):null,e=isc.DynamicForm.$70o(c,this.values);if(isc.isAn.Array(e)||d&&d.multiple)if((d=this.getMemberForField(c,true))&&d.length>0)for(c=0;c<d.length;c++){e=d[c];if(e.dataArity=="multiple"){a.setSelectionComponent(e);break}}}else{c=a.getFullDataPath();if((d=this.getMemberForField(c,true))&&d.length>0)for(c=0;c<d.length;c++)d[c].dataArity=="single"&&d[c].autoTrackSelection&&d[c].setSelectionComponent(a)}if(this.members==
null)this.members=[];this.members.add(a);this.$707(a,true);a.valuesManager=this;a.$703=b;this.rememberValues()}else this.logWarn("addMember() passed invalid object: "+this.echo(a)+" - this should be a DynamicForm instance")},isc.A.$707=function(a,b){if(a.getFields!=null){var c=a.getFullDataPath(),d=this.getField(c),e=isc.DynamicForm.$70o(c,this.values);if(isc.isAn.Array(e)||d&&d.multiple){if(a.dataArity=="single")if(a.selectionComponent!=null)return;else if(isc.isAn.Array(e))e=e[0]}else if(e!=null&&
a.dataArity=="multiple")e=[e];if(isc.isA.DynamicForm(a)){e=a.getItems();for(d=0;d<e.getLength();d++){c=e[d];if(c.shouldSaveValue){var f=c.getDataPath()||c.getFieldName();if(f){var g=f;if(c=a.getFullDataPath())g=this.$702(c,g);c=isc.DynamicForm.$70o(g,this.values);if(c!==void 0){this.logInfo("Member form "+a+" has specified value for field '"+f+"' which collides with an already specified value in this ValuesManager. Resetting the value on the member form.");a.setValue(f,c)}else b||a.clearValue(f);
a.getValue(f)===void 0?isc.DynamicForm.$70m(g,this.values):isc.DynamicForm.$70n(g,a.getValue(f),this.values)}}}b&&this.$709(a)}else if(a.setData){d=a.getFullDataPath();c=b?a.getData():null;if(e==null)b&&isc.DynamicForm.$70n(d,c);else{b&&c!=null&&!isc.isAn.emptyObject(c)&&!isc.isAn.emptyArray(c)&&this.logInfo("ValuesManager member:"+a.getID()+" has existing values:"+this.echo(c)+", replacing with values from this valuesManager:"+this.echo(e));a.setData(e)}}}},isc.A.$709=function(a,b,c,d,e){if(b==null)b=
a.getValues();if(d==null)d=[];for(var f in b){var g=c?this.$702(c,f):f;if(!a.getItem(g)){var h=b[f];if(!isc.isAn.Object(h)||isc.isA.Date(h)||isc.isAn.Array(h)){d.add(g);a.clearValue(g)}else this.$709(a,h,c,d,true)}}!e&&d.length>0&&this.$66q(a,d)},isc.A.addMembers=function(a){if(isc.isAn.Array(a))for(var b=0;b<a.length;b++)this.addMember(a[b]);else this.addMember(a)},isc.A.removeMember=function(a){if(isc.isA.String(a)){a=isc.Class.getArrayItem(a,this.members);if(a==null)return}else if(!this.members.contains(a))return;
this.members.remove(a);delete a.valuesManager},isc.A.removeMembers=function(a){if(isc.isAn.Array(a))for(var b=0;b<a.length;b++)this.removeMember(a[b]);else this.removeMember(a)},isc.A.getPrintHTML=function(){var a=this.getValues(),b=isc.StringBuffer.create();b.append("<TABLE border=1><TR><TD align='center' style='font-weight:bold;'>Field</TD>","<TD align='center' style='font-weight:bold;'>Value</TD>");for(var c in a)b.append("<TR><TD>",c,"</TD><TD>",a[c],"</TD></TR>");b.append("</TABLE>");return b.toString()});
isc.B._maxIndex=isc.C+65;isc.ValuesManager.registerStringMethods({handleHiddenValidationErrors:"errors",submitValues:"values,valuesManager"});if(isc.Window){isc.ClassFactory.defineClass("ColorPicker",isc.Window);isc.A=isc.ColorPicker;isc.A.MORE_BUTTON_TITLE="More >>";isc.A.LESS_BUTTON_TITLE="<< Less";isc.A=isc.ColorPicker;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getSharedColorPicker=function(a,b){if(isc.isA.ColorPicker(this.$56b)){a.colorSelected==
null&&delete this.$56b.colorSelected;a.colorChanged==null&&delete this.$56b.colorChanged;this.$56b.setProperties(a)}else this.$56b=isc.ColorPicker.create(a);if(!b){var c=this.$56b;if(c.$56c!=c.defaultPickMode){c.$56c=c.defaultPickMode;if(c.$56c=="simple"){c.removeComplexElements();c.allowComplexMode&&c.modeToggleButton.setTitle(isc.ColorPicker.MORE_BUTTON_TITLE)}else{c.$56i||c.createComplexElements();c.addComplexElements();c.modeToggleButton.setTitle(isc.ColorPicker.LESS_BUTTON_TITLE)}}c.setHtmlColor(c.defaultColor);
c.$56d=this.defaultOpacity}return this.$56b});isc.B._maxIndex=isc.C+1;isc.addGlobal("ColorChooser",isc.ColorPicker);isc.A=isc.ColorPicker.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.title="Select a Color";isc.A.autoSize=true;isc.A.isModal=true;isc.A.autoCenter=true;isc.A.autoDraw=false;isc.A.showMinimizeButton=false;isc.A.layoutMargin=2;isc.A.canFocus=false;isc.A.showOkButton=true;isc.A.okButtonConstructor=isc.IButton;isc.A.okButtonDefaults=
{title:"OK",width:80,autoParent:"buttonLayout",click:function(){this.creator.colorSelected&&this.creator.colorSelected(this.creator.getHtmlColor(),this.creator.getOpacity());this.creator.hide()}};isc.A.showCancelButton=true;isc.A.cancelButtonConstructor=isc.IButton;isc.A.cancelButtonDefaults={title:"Cancel",width:80,autoParent:"buttonLayout",click:function(){this.creator.hide()}};isc.A.showModeToggleButton=true;isc.A.modeToggleButtonConstructor=isc.IButton;isc.A.modeToggleButtonDefaults={title:isc.ColorPicker.MORE_BUTTON_TITLE,
width:80,autoParent:"buttonLayout",click:function(){this.creator.$56e()}};isc.A.showButtonLayout=true;isc.A.buttonLayoutConstructor="HLayout";isc.A.buttonLayoutDefaults={autoParent:"contentLayout"};isc.A.defaultColor="#808080";isc.A.colorButtonSize=20;isc.A.colorButtonBaseStyle="colorChooserCell";isc.A.colorArray=["#000000","#996100","#636300","#006300","#006366","#000080","#636399","#636363","#800000","#FF6600","#808000","#8000FF","#008080","#0000FF","#666699","#808080","#FF0000","#FF9900","#99CC00",
"#639966","#63CCCC","#6366FF","#800080","#999999","#FF00FF","#FFCC00","#FFFF00","#00FF00","#00FFFF","#00CCFF","#996366","#C0C0C0","#FF99CC","#FFCC99","#FFFF99","#CCFFCC","#CCFFFF","#99CCFF","#CC99FF","#FFFFFF"];isc.A.swatchWidth=170;isc.A.swatchHeight=170;isc.A.lumStep=4;isc.A.lumWidth=15;isc.A.supportsTransparency=true;isc.A.opacityText="Lorem ipsum dolor sit amet, consectetuer adipiscing elit.";isc.A.swatchImageURL="[SKIN]ColorPicker/spectrum.png";isc.A.crosshairImageURL="[SKIN]ColorPicker/crosshair.png";
isc.A.basicColorLabel="Basic Colors:";isc.A.selectedColorLabel="Selected Color:";isc.A.opacitySliderLabel="Opacity:";isc.A.defaultOpacity=100;isc.A.autoPosition=true;isc.A.autoCenterOnShow=true;isc.A.defaultPickMode="simple";isc.A.allowComplexMode=true;isc.A.$56f=true;isc.B.push(isc.A.closeClick=function(){this.hide()});isc.B._maxIndex=isc.C+1;isc.A=isc.ColorPicker.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.show=function(){if(this.autoPosition){this.autoCenter=
false;var a=isc.EH.getLastEvent();this.placeNear(a.x,a.y)}else if(this.autoCenterOnShow)this.autoCenter=true;this.Super("show",arguments)},isc.A.initWidget=function(){this.$56c=this.defaultPickMode;this.basicColorLayout=isc.VLayout.create({autoDraw:false});for(var a=0;a<5;a++){for(var b=isc.HLayout.create({autoDraw:false,layoutBottomMargin:1,membersMargin:1,height:this.colorButtonSize}),c=0;c<8;c++){var d=isc.StatefulCanvas.create({autoDraw:false,width:this.colorButtonSize,height:this.colorButtonSize,
overflow:"hidden",title:"",backgroundColor:this.colorArray[a*8+c],baseStyle:this.colorButtonBaseStyle,showRollOver:true,picker:this,click:function(){this.picker.setHtmlColor(this.backgroundColor);this.picker.$56c=="simple"&&this.picker.$56g(this.backgroundColor)}});b.addMember(d)}this.basicColorLayout.addMember(b)}this.leftHandLayout=isc.VLayout.create({autoDraw:false});this.leftHandLayout.addMember(this.basicColorLayout);this.innerContentLayout=isc.HLayout.create({autoDraw:false,align:"center",members:[this.leftHandLayout]});
this.contentLayout=isc.VLayout.create({autoDraw:false,members:[this.innerContentLayout]});this.addItem(this.contentLayout);if(this.$56c=="simple"){this.showOkButton=false;if(!this.allowComplexMode)this.showModeToggleButton=false}else this.showModeToggleButton=false;this.addAutoChildren(["buttonLayout","okButton","cancelButton","modeToggleButton"]);if(this.$56c=="complex"){this.createComplexElements();this.addComplexElements()}this.setHtmlColor(this.defaultColor);this.$56h();this.setOpacity(this.defaultOpacity);
this.Super("initWidget",arguments)},isc.A.createComplexElements=function(){if(this.$56c=="complex"){this.$56i=isc.DynamicForm.create({autoDraw:false,cellPadding:1,padding:10,width:65,fields:[{name:"pickerRedVal",title:"Red",type:"text",width:"40",defaultValue:this.$56j,prompt:"The Red component of the selected color",picker:this,changed:function(b,c,d){this.picker.setRed(d)}},{name:"pickerGrnVal",title:"Green",type:"text",width:"40",defaultValue:this.$56k,prompt:"The Green component of the selected color",
picker:this,changed:function(b,c,d){this.picker.setGreen(d)}},{name:"pickerBluVal",title:"Blue",type:"text",width:"40",defaultValue:this.$56l,prompt:"The Blue component of the selected color",picker:this,changed:function(b,c,d){this.picker.setBlue(d)}},{name:"pickerHtmlVal",title:"HTML",type:"text",width:"65",defaultValue:this.$56m,prompt:"The selected color's HTML coding",picker:this,changed:function(b,c,d){this.picker.setHtmlColor(d)}}]});this.$56n=isc.DynamicForm.create({autoDraw:false,cellPadding:1,
padding:10,width:65,fields:[{name:"pickerHueVal",title:"Hue",type:"text",width:"40",defaultValue:this.$56o,prompt:"The Hue (base tone) of the selected color",picker:this,changed:function(b,c,d){this.picker.setHue(d)}},{name:"pickerSatVal",title:"Sat",type:"text",width:"40",defaultValue:this.$56p,prompt:"The Saturation (color purity) of the selected color",picker:this,changed:function(b,c,d){this.picker.setSaturation(d)}},{name:"pickerLumVal",title:"Lum",type:"text",width:"40",defaultValue:this.$56q,
prompt:"The Luminosity (brightness) of the selected color",picker:this,changed:function(b,c,d){this.picker.setLuminosity(d)}}]});this.$56r=isc.Img.create({autoDraw:false,imageWidth:16,imageHeight:16,src:this.crosshairImageURL,width:16,height:16,imageType:"normal",canDrag:true,canDrop:true,dragAppearance:"target",picker:this,dragMove:function(){this.picker.$56s=true;this.picker.$56t(this.parentElement.getOffsetX(),this.parentElement.getOffsetY())}});this.$56u=isc.Canvas.create({autoDraw:false,width:100,
height:40,backgroundColor:this.getHtmlColor()});this.$56v=isc.Canvas.create({autoDraw:false,width:60,height:40,overflow:"hidden",border:"1px black solid",contents:this.opacityText,children:[this.$56u]});this.$56w=isc.VStack.create({lumWidth:15,height:this.swatchHeight,margin:5,border:"1px solid black"});for(var a=0;a<this.swatchHeight/this.lumStep;a++)this.$56w.addMember(isc.Canvas.create({width:this.lumWidth,height:this.lumStep,margin:0,padding:0,overflow:"hidden"}));this.$56x=isc.Slider.create({minValue:0,
maxValue:240,numValues:240,margin:5,length:this.swatchHeight,width:10,showTitle:false,showValue:false,showRange:false});if(this.supportsTransparency){this.$56y=isc.Slider.create({autoDraw:false,vertical:false,margin:5,minValue:0,maxValue:100,numValues:100,length:100,height:12,width:100,thumbThickWidth:15,thumbThinWidth:10,showTitle:false,showValue:false,showRange:false,value:100});this.$56z=isc.HLayout.create({autoDraw:false,layoutLeftMargin:5,layoutRightMargin:5,membersMargin:5,members:[isc.Label.create({autoDraw:false,
margin:5,contents:this.opacitySliderLabel,width:this.swatchWidth-105,height:10}),this.$56y]})}this.$560=isc.VLayout.create({autoDraw:false,layoutLeftMargin:5,layoutRightMargin:5,membersMargin:5,members:[isc.HLayout.create({autoDraw:false,height:this.swatchHeight,members:[isc.Img.create({autoDraw:false,margin:5,width:this.swatchWidth+12,height:this.swatchHeight+12,src:this.swatchImageURL,overflow:"hidden",border:"1px black solid",picker:this,click:function(){this.picker.$56t(this.getOffsetX(),this.getOffsetY())},
children:[this.$56r]}),this.$56w,this.$56x]}),isc.HLayout.create({autoDraw:false,layoutLeftMargin:5,layoutRightMargin:5,membersMargin:5,members:[isc.Label.create({autoDraw:false,margin:5,contents:this.selectedColorLabel,width:this.swatchWidth-63,height:15}),this.$56v]})]});this.observe(this.$56x,"valueChanged","observer.$561()");this.observe(this.$56y,"valueChanged","observer.$562()")}},isc.A.initComplexElements=function(){this.$56x.setValue(this.$56q);this.$56h();this.$563(this.$56o,this.$56p);this.$56u.setBackgroundColor(isc.ColorUtils.hslToHtml(this.$56o,
this.$56p,this.$56q));if(this.supportsTransparency){this.$56u.setOpacity(this.$56d);this.$56y.setValue(this.$56d)}},isc.A.addComplexElements=function(){if(this.$56c=="complex"){this.showOkButton=true;this.setAutoChild("okButton");this.basicLabel=isc.Label.create({autoDraw:false,margin:5,contents:this.basicColorLabel,width:100,height:15});this.formLayout=isc.HLayout.create({autoDraw:false,members:[this.$56i,this.$56n]});this.leftHandLayout.addMember(this.basicLabel,0);this.leftHandLayout.addMember(this.formLayout);
this.supportsTransparency&&this.$560.addMember(this.$56z);this.innerContentLayout.addMember(this.$560);this.initComplexElements()}},isc.A.removeComplexElements=function(){if(this.$56c!="complex"){this.showOkButton=false;this.setAutoChild("okButton");if(this.formLayout){this.leftHandLayout.removeMembers([this.basicLabel,this.formLayout]);this.innerContentLayout.removeMember(this.$560)}}},isc.A.setSupportsTransparency=function(a){this.supportsTransparency=a;if(this.$56c=="complex")this.supportsTransparency?
this.$560.addMember(this.$56z):this.$560.removeMember(this.$56z)},isc.A.getRed=function(){return this.$56j},isc.A.getGreen=function(){return this.$56k},isc.A.getBlue=function(){return this.$56l},isc.A.getHue=function(){return this.$56o},isc.A.getSaturation=function(){return this.$56p},isc.A.getLuminosity=function(){return this.$56q},isc.A.getHtmlColor=function(){return this.$56m},isc.A.getOpacity=function(){return this.$56d},isc.A.setRed=function(a){this.$56j=a<0?0:a>255?255:a/1;this.$56c=="complex"&&
this.$56i.setValue("pickerRedVal",this.$56j);this.$56f===true&&this.$564("rgb")},isc.A.setGreen=function(a){this.$56k=a<0?0:a>255?255:a/1;this.$56c=="complex"&&this.$56i.setValue("pickerGrnVal",this.$56k);this.$56f===true&&this.$564("rgb")},isc.A.setBlue=function(a){this.$56l=a<0?0:a>255?255:a/1;this.$56c=="complex"&&this.$56i.setValue("pickerBluVal",this.$56l);this.$56f===true&&this.$564("rgb")},isc.A.setHue=function(a){this.$56o=a<0?0:a>239?239:a/1;this.$56c=="complex"&&this.$56n.setValue("pickerHueVal",
this.$56o);this.$56f===true&&this.$564("hsl")},isc.A.setSaturation=function(a){this.$56p=a<0?0:a>240?240:a/1;this.$56c=="complex"&&this.$56n.setValue("pickerSatVal",this.$56p);this.$56f===true&&this.$564("hsl")},isc.A.setLuminosity=function(a){this.$56q=a<0?0:a>240?240:a/1;this.$56c=="complex"&&this.$56n.setValue("pickerLumVal",this.$56q);this.$56f===true&&this.$564("hsl")},isc.A.setHtmlColor=function(a){if(isc.ColorUtils.encodingIsValid(a)===true){this.$56m=a.toUpperCase();this.$56c=="complex"&&
this.$56i.setValue("pickerHtmlVal",this.$56m);this.$56f===true&&this.$564("html")}},isc.A.setOpacity=function(a){if(this.$56c=="complex"&&this.supportsTransparency){this.$56d=a<0?0:a>100?100:a/1;this.$56f===true&&this.$564("opacity")}},isc.A.$564=function(a){if(a=="rgb"){a=isc.ColorUtils.rgbToHsl(this.$56j,this.$56k,this.$56l);this.$56f=false;this.setHue(a.h);this.setSaturation(a.s);this.setLuminosity(a.l);this.setHtmlColor(isc.ColorUtils.rgbToHtml(this.$56j,this.$56k,this.$56l));this.$56f=true;this.$563(this.$56o,
this.$56p)}else if(a=="hsl"){a=isc.ColorUtils.hslToRgb(this.$56o,this.$56p,this.$56q);this.$56f=false;this.setRed(a.r);this.setGreen(a.g);this.setBlue(a.b);this.setHtmlColor(isc.ColorUtils.rgbToHtml(this.$56j,this.$56k,this.$56l));this.$56f=true;if(this.$56o!=this.$565||this.$56p!=this.$566)this.$563(this.$56o,this.$56p)}else if(a=="html"){a=isc.ColorUtils.htmlToRgb(this.$56m);this.$56f=false;this.setRed(a.r);this.setGreen(a.g);this.setBlue(a.b);a=isc.ColorUtils.rgbToHsl(this.$56j,this.$56k,this.$56l);
this.setHue(a.h);this.setSaturation(a.s);this.setLuminosity(a.l);this.$56f=true;this.$563(this.$56o,this.$56p)}this.$56c=="complex"&&this.$56x.setValue(this.$56q);this.$56c=="complex"&&this.$56u.setBackgroundColor(isc.ColorUtils.hslToHtml(this.$56o,this.$56p,this.$56q));if(this.$56o!=this.$565||this.$56p!=this.$566)this.$56h();this.$56c=="complex"&&this.$56u.setOpacity(this.$56d);this.$565=this.$56o;this.$566=this.$56p;this.colorChanged&&this.colorChanged()},isc.A.$56g=function(a){this.hide();this.colorSelected&&
this.colorSelected(a)},isc.A.$563=function(a,b){if(this.$56c=="complex")if(this.$56s===true)this.$56s=false;else{var c=a/239,d=b/240;c*=this.swatchWidth;d=this.swatchHeight-d*this.swatchHeight;c=parseInt(c)-8;d=parseInt(d)-8;this.$56r.setLeft(c);this.$56r.setTop(d)}},isc.A.$56t=function(a,b){a-=5;b-=5;a/=this.swatchWidth;b=1-b/this.swatchHeight;this.$56f=false;this.setHue(Math.floor(a*239+0.5));this.$56f=true;this.setSaturation(Math.floor(b*240+0.5))},isc.A.$56h=function(){if(this.$56c=="complex")for(var a=
0;a<this.swatchHeight/this.lumStep;a++)this.$56w.members[a].setBackgroundColor(isc.ColorUtils.hslToHtml(this.$56o,this.$56p,240-a*240/(this.swatchHeight/this.lumStep)))},isc.A.$561=function(){var a=this.$56x.getValue();this.$56q!=a&&this.setLuminosity(a)},isc.A.$562=function(){this.setOpacity(this.$56y.getValue())},isc.A.$56e=function(){if(this.$56c=="simple"){this.$56c="complex";this.$560||this.createComplexElements();this.addComplexElements();this.modeToggleButton.setTitle(isc.ColorPicker.LESS_BUTTON_TITLE)}else{this.$56c=
"simple";this.removeComplexElements();this.modeToggleButton.setTitle(isc.ColorPicker.MORE_BUTTON_TITLE)}this.modeToggleButton.setState("")});isc.B._maxIndex=isc.C+31;isc.ColorPicker.registerStringMethods({colorChanged:"",colorSelected:"color,opacity"});isc.defineClass("ColorUtils",isc.Class);isc.A=isc.ColorUtils;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.hexToDec=function(a){return parseInt(a,16)},isc.A.decToHex=function(a){a=(a/1).toString(16);
if(a.length==1)a="0"+a;return a},isc.A.brightness=function(a,b,c){return isc.ColorUtils.rgbToHsl(a,b,c).l/240},isc.A.encodingIsValid=function(a){return a.substring(0,1)=="#"&&isc.isA.color(a)},isc.A.rgbToHtml=function(a,b,c){return"#"+isc.ColorUtils.decToHex(a)+isc.ColorUtils.decToHex(b)+isc.ColorUtils.decToHex(c)},isc.A.hslToHtml=function(a,b,c){a=isc.ColorUtils.hslToRgb(a,b,c);return"#"+isc.ColorUtils.decToHex(a.r)+isc.ColorUtils.decToHex(a.g)+isc.ColorUtils.decToHex(a.b)},isc.A.htmlToRgb=function(a){var b=
a.substring(1,3),c=a.substring(3,5);a=a.substring(5,7);return{r:isc.ColorUtils.hexToDec(b),g:isc.ColorUtils.hexToDec(c),b:isc.ColorUtils.hexToDec(a)}},isc.A.htmlToHsl=function(a){var b=a.substring(1,3),c=a.substring(3,5);a=a.substring(5,7);return isc.ColorUtils.rgbToHsl(isc.ColorUtils.hexToDec(b),isc.ColorUtils.hexToDec(c),isc.ColorUtils.hexToDec(a))},isc.A.rgbToHsl=function(a,b,c){a=a/255;b=b/255;c=c/255;var d=Math.min(Math.min(a,b),c),e=Math.max(Math.max(a,b),c),f=e-d,g=0,h=0,i=0;i=(e+d)/2;if(e==
d)g=h=0;else{h=i<0.5?(e-d)/(e+d):(e-d)/(2-e-d);g=a==e?(b-c)/f:b==e?2+(c-a)/f:4+(a-b)/f}g=Math.floor(g*40+0.5);if(g<0)g+=240;h=Math.floor(h*240+0.5);i=Math.floor(i*240+0.5);return{h:g,s:h,l:i}},isc.A.hslToRgb=function(a,b,c){a=a/239;b=b/240;var d=c/240,e,f=e=c=0;if(b==0)f=e=c=d;else{b=d<0.5?d*(1+b):d+b-d*b;d=2*d-b;c=a+0.3333;e=a;a=a-0.3333;if(c<0)c+=1;if(e<0)e+=1;if(a<0)a+=1;if(c>1)c-=1;if(e>1)e-=1;if(a>1)a-=1;c=c*6<1?d+(b-d)*6*c:c*2<1?b:c*3<2?d+(b-d)*(0.6667-c)*6:d;e=e*6<1?d+(b-d)*6*e:e*2<1?b:e*3<
2?d+(b-d)*(0.6667-e)*6:d;f=a*6<1?d+(b-d)*6*a:a*2<1?b:a*3<2?d+(b-d)*(0.6667-a)*6:d}c=Math.floor(c*255+0.5);e=Math.floor(e*255+0.5);f=Math.floor(f*255+0.5);return{r:c,g:e,b:f}});isc.B._maxIndex=isc.C+10}isc.ClassFactory.defineClass("NestedEditorItem","CanvasItem");isc.A=isc.NestedEditorItem.getPrototype();isc.A.shouldSaveValue=true;isc.A.editorConstructor="DynamicForm";isc.A.editorDefaults={itemChanged:function(){this.creator.updateValue(this.getValuesAsCriteria())}};isc.A=isc.NestedEditorItem.getPrototype();
isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function(){this.$67h();this.Super("init",arguments)},isc.A.isEditable=function(){return true},isc.A.$67h=function(){var a,b={};if(this.form.dataSource){a=isc.DataSource.getDataSource(this.form.dataSource);var c=a.getField(this.name);if(c)b.dataSource=a.getFieldDataSource(c)}if(this.form&&this.form.showComplexFieldsRecursively){b.showComplexFields=true;b.showComplexFieldsRecursively=true}else b.showComplexFields=
false;this.addAutoChild("editor",b);this.canvas=this.editor},isc.A.setValue=function(a){this.editor.setValues(a)},isc.A.updateValue=function(a){this.$10y(a)});isc.B._maxIndex=isc.C+5;isc.ClassFactory.defineClass("NestedListEditorItem","CanvasItem");isc.A=isc.NestedListEditorItem.getPrototype();isc.A.shouldSaveValue=true;isc.A.editorConstructor="ListEditor";isc.A.editorDefaults={inlineEdit:false,height:155,saveRecord:function(){if(!this.form.validate())return false;var a=this.form.getValues();this.showList();
if(this.inlineEdit)this.grid.setEditValues(this.grid.getEditRow(),a);else{if(this.form.saveOperationType=="add")this.grid.addData(a);else{isc.addProperties(this.currentRecord,a);this.grid.markForRedraw()}this.inlineEdit||this.form.clearValues();this.creator.updateValue(this.grid.data)}return true}};isc.A=isc.NestedListEditorItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function(){this.$67h();this.Super("init",arguments)},
isc.A.isEditable=function(){return true},isc.A.$67h=function(){var a,b={};if(this.form.dataSource){a=isc.DataSource.getDataSource(this.form.dataSource);var c=a.getField(this.name);if(c)b.dataSource=a.getFieldDataSource(c)}if(this.form&&this.form.showComplexFieldsRecursively){b.formProperties={showComplexFields:true,showComplexFieldsRecursively:true};b.gridProperties={showComplexFields:true,showComplexFieldsRecursively:true,canRemoveRecords:true,saveLocally:true,data:[]}}else{b.formProperties={showComplexFields:false};
b.gridProperties={showComplexFields:false,canRemoveRecords:true,saveLocally:true}}this.addAutoChild("editor",b);this.canvas=this.editor},isc.A.updateValue=function(a){this.editor.setData(a);this.$10y(a)},isc.A.setValue=function(a){this.editor.setData(a);this.Super("setValue",arguments)});isc.B._maxIndex=isc.C+5;isc.ClassFactory.defineClass("ViewFileItem","CanvasItem");isc.A=isc.ViewFileItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.shouldSaveValue=
false;isc.A.colSpan="*";isc.A.height=20;isc.A.width="*";isc.A.overflow="visible";isc.A.canvasDefaults={_constructor:"Canvas",height:10,width:"100%"};isc.B.push(isc.A.isEditable=function(){return false},isc.A.init=function(){this.addAutoChild("canvas");this.Super("init",arguments)},isc.A.setValue=function(a){var b=this.form.getValues();if(this.type=="imageFile"&&this.showFileInline!=false){this.canvas.setHeight("*");this.canvas.setWidth("*");this.canvas.setContents(this.getImageHTML()||"&nbsp;")}else{this.showFileInline==
true&&this.logWarn("setValue(): Unsupported field-type for showFileInline: "+this.type);this.canvas.setHeight(20);this.canvas.setWidth("*");this.canvas.setContents(this.getViewDownloadHTML(a,b)||"&nbsp;")}this.Super("setValue",arguments)},isc.A.getViewDownloadHTML=function(a,b){if(isc.isA.String(a))return a;if(b==null)return null;var c=b[this.name+"_filename"];if(c==null||isc.isA.emptyString(c))return this.emptyCellValue;var d=isc.Canvas.imgHTML("[SKIN]actions/view.png",16,16,null,"style='cursor:"+
isc.Canvas.HAND+"' onclick='"+this.getID()+".viewFile()'"),e=isc.Canvas.imgHTML("[SKIN]actions/download.png",16,16,null,"style='cursor:"+isc.Canvas.HAND+"' onclick='"+this.getID()+".downloadFile()'");return"<nobr>"+d+"&nbsp;"+e+"&nbsp;"+c+"</nobr>"},isc.A.getImageHTML=function(){var a=this.form.getValues(),b=this.form.getField(this.name),c=this.name+"$68c";if(!a[this.name])return" ";if(a[c])a=a[c];else{var d=isc.Canvas.getFieldImageDimensions(b,a);a=a[c]=isc.Canvas.imgHTML(this.form.getDataSource().streamFile(a,
b.name),d.width,d.height)}return a},isc.A.viewFile=function(){isc.DS.get(this.form.dataSource).viewFile(this.form.getValues(),this.name)},isc.A.downloadFile=function(){isc.DS.get(this.form.dataSource).downloadFile(this.form.getValues(),this.name)});isc.B._maxIndex=isc.C+7;isc.defineClass("PanelHeader","ImgSectionHeader");isc.A=isc.PanelHeader.getPrototype();isc.A.width="100%";isc.A.height=22;isc.A.baseStyle="sectionHeader";isc.A=isc.PanelHeader.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;
isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.showSelectedIcon=false;isc.A.showRollOverIcon=false;isc.A.showDisabledIcon=false;isc.A.showDownIcon=false;isc.A.showFocusedIcon=false;isc.B.push(isc.A.initWidget=function(){this.setPanelTitleFromCanvas()},isc.A.setPanelTitleFromCanvas=function(){if(this.canvas){if(this.canvas.title)this.title=this.canvas.title;if(this.canvas.icon)this.icon=this.canvas.icon}});isc.B._maxIndex=isc.C+2;isc.PanelHeader.registerStringMethods({iconClick:""});isc.A=isc.Canvas.getPrototype();
isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.panelHeaderDefaults={_constructor:"PanelHeader"};isc.A.panelHeaderProperties={};isc.A.panelHeaderPlacement="peer";isc.B.push(isc.A.setupPanelHeader=function(){if(this.showPanelHeader){this.panelHeader=this.createAutoChild("panelHeader",{canvas:this,snapTo:"T"});this.panelHeaderPlacement=isc.isA.Layout(this)?"member":"peer";this.panelHeaderPlacement="peer";if(this.panelHeaderPlacement=="member")this.addMember(this.panelHeader,
0);else if(this.panelHeaderPlacement=="peer"){this.addPeer(this.panelHeader);this.panelHeader.moveAbove(this);this.$wi(this.panelHeader,isc.Canvas.TOP)}}});isc.B._maxIndex=isc.C+1;isc.A=isc.Canvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.panelActionControls=[];isc.B.push(isc.A.refreshPanelControls=function(){var a=this.panelControls||[];if(this.panelHeader.controls)this.panelHeader.controls.setLength(0);else this.panelHeader.controls=
[];for(var b=0;b<a.length;b++){var c=a.get(b),d=null;if(isc.isAn.Object(c))d=isc.addProperties({},c);else if(c.startsWith("action:")){c=c.substring(7,c.length);c=isc.Canvas.getRegisteredAction(c);if(this.canPerformAction(c))if(this.showActionInPanel(c))d=this.getPanelActionControl(c)}else d=this.createAutoChild(c);d&&this.panelHeader.controls.add(d)}this.panelHeader.addControls()},isc.A.canPerformAction=function(a){var b=a.name;a=a.enableProperty||"can"+b.substring(0,1).toUpperCase()+b.substring(1,
b.length);return this[a]&&this[a]==true?true:false},isc.A.showActionInPanel=function(a){return a.showInPanel},isc.A.getPanelActionControl=function(a){var b=this.panelActionControls[a.name];b=isc.ClassFactory.newInstance(a.controlConstructor||"ImgButton",{ID:this.getID()+"_"+a.name,width:18,height:18,src:a.icon,showRollOver:false,showDown:false,showDisabled:false,showFocused:false,actionTarget:this,actionObject:a,prompt:a.tooltip,click:function(){this.actionTarget[this.actionObject.methodName]()}});
this.panelActionControls[a.name]=b;return this.panelActionControls[a.name]},isc.A.showPrintPreview=function(a,b,c,d){isc.Canvas.showPrintPreview(this,a,b,c,d)});isc.B._maxIndex=isc.C+5;isc.A=isc.Canvas;isc.A.$71k={};isc.A=isc.Canvas;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.registerAction=function(a){this.$71k[a.name]||(this.$71k[a.name]=a)},isc.A.getRegisteredActionNames=function(){return isc.getKeys(this.$71k)},isc.A.getRegisteredActions=
function(){return isc.getValues(this.$71k)},isc.A.getRegisteredActionIndex=function(){return this.getRegisteredActions().makeIndex("name",false)},isc.A.getRegisteredAction=function(a){return this.$71k[a]},isc.A.isActionRegistered=function(a){return!this.$71k[a]?false:true});isc.B._maxIndex=isc.C+6;isc.defineClass("Action","Class");isc.A=isc.Action.getPrototype();isc.A.name=null;isc.A.title=null;isc.A.icon=null;isc.A.tooltip=null;isc.A.methodName=null;isc.A.controlConstructor="ImgButton";isc.A.enableProperty=
null;isc.A.showInPanel=true;isc.Canvas.registerAction(isc.Action.create({name:"edit",title:"Edit",icon:"[SKINIMG]/actions/edit.png",tooltip:"Put the component into Edit mode",methodName:"startEditing",showInPanel:false}));isc.Canvas.registerAction(isc.Action.create({name:"editNew",title:"Edit New",icon:"[SKINIMG]/SectionHeader/opener_closed.png",tooltip:"Add a new Record to the component",methodName:"startEditingNew",showInPanel:false}));isc.Canvas.registerAction(isc.Action.create({name:"sort",title:"Sort",
icon:"[SKINIMG]/actions/sort_ascending.png",tooltip:"Sort the records in the component",methodName:"sort",controlConstructor:"SortActionSelector",enableProperty:"canSortFields",showInPanel:false}));isc.Canvas.registerAction(isc.Action.create({name:"export",title:"Export",icon:"[SKINIMG]/actions/redo.png",tooltip:"Export the data in the component",methodName:"exportData",showInPanel:true}));isc.Canvas.registerAction(isc.Action.create({name:"print",title:"Print",icon:"[SKINIMG]/actions/print.png",tooltip:"Print the data in the component",
methodName:"showPrintPreview",showInPanel:true}));isc.defineClass("SortActionSelector","DynamicForm");isc.A=isc.SortActionSelector.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.width=100;isc.A.height=20;isc.A.numCols=4;isc.A.fields=[{name:"sortField",showTitle:false,colSpan:2,type:"select",width:80,prompt:"Sort Field",startRow:false,endRow:false,changed:function(a,b,c){var d=(b=a.getField("sortDirection").getValue())?"ascending":"descending";
a.actionTarget.sort?a.actionTarget.sort(c,d):a.actionTarget.data.sortByProperty(c,b)}},{name:"sortDirection",showTitle:true,showLabel:false,type:"checkbox",width:20,prompt:"Sort Direction: Checked is Ascending",startRow:false,endRow:false,changed:function(a,b,c){b=c?"ascending":"descending";var d=a.getField("sortField").getValue();a.actionTarget.sort?a.actionTarget.sort(d,b):a.actionTarget.data.sortByProperty(d,c)}}];isc.B.push(isc.A.initWidget=function(){this.Super("initWidget",arguments)},isc.A.draw=
function(){this.Super("draw",arguments);var a=this.actionTarget.getDataSource();a=a?isc.getValues(a.getFields()):[];for(var b={},c=0;c<a.length;c++){var d=a.get(c);b[d.name]=d.title}this.getField("sortField").setValueMap(b)});isc.B._maxIndex=isc.C+2;isc.defineClass("DataPathItem","TextItem");isc.A=isc.DataPathItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.operationsTreeDefaults={_constructor:"TTreeGrid",autoDraw:false,recordDoubleClick:function(){this.creator.operationSelected()},
getIcon:function(a){var b=this.creator.form.creator;if(b=b&&b.getServiceElementIcon?b.getServiceElementIcon(a):null)return b;return this.Super("getIcon",arguments)}};isc.A.operationsTreeSelectButtonDefaults={_constructor:"TButton",autoDraw:false,title:"Select",click:function(){this.creator.operationsTree.anySelected()&&this.creator.operationSelected()}};isc.A.defaultIcons=[{src:"[SKINIMG]/actions/edit.png",click:"item.showOperationsTreeData()",width:16,height:16},{src:"[SKINIMG]/actions/remove.png",
click:"item.clearFormValues()",width:16,height:16}];isc.A.baseManagedProperties=["dataPath","schemaDataSource","serviceName","serviceNamespace"];isc.B.push(isc.A.getPropertyName=function(a){return this.isInput?"input"+a.substring(0,1).toUpperCase()+a.substring(1):a},isc.A.initManagedProperties=function(){this.managedProperties=[];for(var a=this.baseManagedProperties,b=0;b<a.length;b++)this.managedProperties.add(this.getPropertyName(a[b]))},isc.A.keyPress=function(a,b,c){if(c!="Arrow_Left"&&c!="Arrow_Right"&&
c!="Home"&&c!="End")return false;this.Super("keyPress",arguments)},isc.A.init=function(){this.icons=isc.clone(this.defaultIcons);this.initManagedProperties();this.Super("init",arguments);this.operationsTreeData&&this.addAutoChildren(["operationsTree","operationsTreeSelectButton"])},isc.A.showOperationsTreeData=function(){if(this.operationsTreeData){this.operationsTree||this.addAutoChildren(["operationsTree","operationsTreeSelectButton"]);var a;if(isc.isA.Tree(this.operationsTreeData))a=this.operationsTreeData;
else{a=isc.Tree.create({modelType:"children",root:{children:this.operationsTreeData},nameProperty:"name",childrenProperty:"children"});a.openAll()}this.operationsTree.setData(a);var b=(this.isInput?"formInputs":"formOutputs")+"/"+this.getValue();(a=a.find(b))&&this.operationsTree.selectRecord(a);if(this.schemaDialog)this.schemaDialog.show();else this.schemaDialog=isc.TWindow.create({title:"Select element from message",autoCenter:true,height:"90%",width:"60%",isModal:true,showModalMask:true,items:[isc.VLayout.create({width:"100%",
height:"100%",members:[this.operationsTree,this.operationsTreeSelectButton]})]})}},isc.A.operationSelected=function(){var a=this.operationsTree.getSelectedRecord();this.schemaDialog.hide();this.setDataPathProperties(a)},isc.A.setDataPathProperties=function(a){var b=a.initData||a.defaults;this.dataPathProps=isc.applyMask(b,this.managedProperties);this.logIsInfoEnabled()&&this.logInfo("setDPProps, editNode: "+this.echoAll(a)+" defaults: "+this.echo(b)+", managedProps: "+this.managedProperties+", props: "+
this.echo(this.dataPathProps));this.saveFormValues()},isc.A.saveFormValues=function(){for(var a=0;a<this.managedProperties.length;a++){var b=this.managedProperties[a];this.form.setValue(b,this.dataPathProps[b])}this.form.saveProperties&&this.form.saveProperties(this.dataPathProps,this.form.currentComponent)},isc.A.clearFormValues=function(){for(var a=0;a<this.managedProperties.length;a++)this.form.setValue(this.managedProperties[a],null);this.form.saveProperties&&this.form.saveProperties(this.dataPathProps,
this.form.currentComponent)});isc.B._maxIndex=isc.C+9;if(isc.ListGrid){isc.defineClass("RelativeDateItem","CanvasItem");isc.A=isc.RelativeDateItem;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.mapRelativeDateShortcut=function(a){switch(a){case "$now":return"+0MS";case "$today":case "$startOfToday":return"-0D";case "$endOfToday":return"+0D";case "$yesterday":case "$startOfYesterday":return"-1D";case "$endOfYesterday":return"-1ms[-0D]";case "$tomorrow":case "$startOfTomorrow":return"+1ms[D]";
case "$endOfTomorrow":return"+1D";case "$startOfWeek":return"-0W";case "$endOfWeek":return"+0W";case "$startOfMonth":return"-0M";case "$endOfMonth":return"+0M";case "$startOfYear":return"-0Y";case "$endOfYear":return"+0Y"}return a},isc.A.getAbsoluteDate=function(a,b){var c=isc.RelativeDateItem,d=a,e=new Date;d=c.mapRelativeDateShortcut(a);d=c.getRelativeDateParts(d);b=b||new Date;e.setTime(b.getTime());if(d.qualifier){d.qualifier=d.qualifier.toUpperCase();var f=c.getRelativeDateParts(d.qualifier);
if(["S","MN","H","D","W","M","Q","Y"].contains(f.period))e=c.dateAdd(e,f.period,f.countValue,f.direction=="+"?1:-1);else isc.logWarn("Invalid date-offset qualifier provided: "+f.period+".  Valid options are: S, MN, H, D, W, M, Q and Y.")}return c.dateAdd(e,d.period,d.countValue,d.direction=="+"?1:-1)},isc.A.getRelativeDateParts=function(a){var b=a.substring(0,1),c=a.indexOf("["),d=c>0?a.substring(c):null;c=d!=null?a.substring(1,c):a.substring(1);a=parseInt(c);c=c.replace(a,"");return{direction:b==
"+"||b=="-"?b:"+",qualifier:d?d.replace("[","").replace("]","").replace(",",""):null,countValue:isc.isA.Number(a)?a:0,period:c?c:b}},isc.A.isRelativeDate=function(a){if(isc.isA.Date(a))return false;if(isc.isAn.Object(a)&&a._constructor=="RelativeDate")return true;return false},isc.A.getPeriodName=function(a){switch(a.toLowerCase()){case "ms":return"Millisecond";case "s":return"Second";case "mn":return"Minute";case "h":return"Hour";case "d":return"Day";case "w":return"Week";case "m":return"Month";
case "q":return"Quarter";case "y":return"Year";case "dc":return"Decade";case "c":return"Century"}},isc.A.dateAdd=function(a,b,c,d){var e=isc.RelativeDateItem,f=a;switch(b){case "MS":case "ms":f.setMilliseconds(a.getMilliseconds()+c*d);break;case "S":case "s":f.setSeconds(a.getSeconds()+c*d);if(b=="S"){f=e.getEndOf(f,"S");break}break;case "MN":case "mn":f.setMinutes(a.getMinutes()+c*d);if(b=="MN"){f=e.getEndOf(f,"MN");break}break;case "H":case "h":f.setHours(a.getHours()+c*d);if(b=="H"){f=e.getEndOf(f,
"H");break}break;case "D":case "d":f.setDate(a.getDate()+c*d);if(b=="D")switch(d){case 1:f=e.getEndOf(f,"D");break;case -1:f=e.getStartOf(f,"D")}break;case "W":case "w":f.setDate(a.getDate()+c*7*d);if(b=="W")f=e.getEndOf(f,"W");break;case "M":case "m":f.setMonth(a.getMonth()+c*d);if(b=="M")f=e.getEndOf(f,"M");break;case "Q":case "q":f.setMonth(a.getMonth()+c*3*d);if(b=="Q")f=e.getEndOf(f,"Q");break;case "Y":case "y":f.setFullYear(a.getFullYear()+c*d);if(b=="Y")f=e.getEndOf(f,"Y");break;case "DC":case "dc":f.setFullYear(a.getFullYear()+
c*10*d);if(b=="DC")f=e.getEndOf(f,"DC");break;case "C":case "c":f.setFullYear(a.getFullYear()+c*100*d);if(b=="C")f=e.getEndOf(f,"C")}return f},isc.A.getStartOf=function(a,b){switch(b){case "s":case "S":return new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),0);case "mn":case "MN":return new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),0,0);case "h":case "H":return new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),
0,0,0);case "d":case "D":return new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0);case "w":case "W":a.setDate(a.getDate()-a.getDay());return new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0);case "m":case "M":return new Date(a.getFullYear(),a.getMonth(),1,0,0,0,0);case "q":case "Q":var c=Math.floor((a.getMonth()+1)/3)*3;return new Date(a.getFullYear(),c-1,1,0,0,0,0);case "y":case "Y":return new Date(a.getFullYear(),0,1,0,0,0,0);case "dc":case "DC":c=Math.floor(a.getFullYear()/10)*
10;return new Date(c,0,1,0,0,0,0);case "c":case "C":c=Math.floor(a.getFullYear()/100)*100;return new Date(c,0,1,0,0,0,0)}return a},isc.A.getEndOf=function(a,b){var c=a;switch(b){case "s":case "S":return new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),999);case "mn":case "MN":return new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),59,999);case "h":case "H":return new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),
59,59,999);case "d":case "D":return new Date(a.getFullYear(),a.getMonth(),a.getDate(),23,59,59,999);case "w":case "W":c.setDate(a.getDate()+(6-a.getDay()));return new Date(c.getFullYear(),c.getMonth(),c.getDate(),23,59,59,999);case "m":case "M":c=new Date(a.getFullYear(),a.getMonth()+1,1,23,59,59,999);c.setDate(c.getDate()-1);break;case "q":case "Q":c=Math.floor((a.getMonth()+4)/3)*3;c=new Date(a.getFullYear(),c,1,23,59,59,999);c.setDate(c.getDate()-1);break;case "y":case "Y":return new Date(a.getFullYear(),
11,31,23,59,59,999);case "dc":case "DC":c=a.getFullYear()/10*10+9;return new Date(c,11,1,23,59,59,999);case "c":case "C":c=Math.floor(a.getFullYear()/100)*100+99;return new Date(c,11,1,23,59,59,999)}return c});isc.B._maxIndex=isc.C+8;isc.A=isc.RelativeDateItem.getPrototype();isc.A.height=20;isc.A.cellHeight=20;isc.A.canFocus=true;isc.A.timeUnitOptions=["day","week","month"];isc.A.todayTitle="Today";isc.A.millisecondsAgoTitle="N milliseconds ago";isc.A.secondsAgoTitle="N seconds ago";isc.A.minutesAgoTitle=
"N minutes ago";isc.A.hoursAgoTitle="N hours ago";isc.A.daysAgoTitle="N days ago";isc.A.weeksAgoTitle="N weeks ago";isc.A.monthsAgoTitle="N months ago";isc.A.yearsAgoTitle="N years ago";isc.A.millisecondsFromNowTitle="N milliseconds from now";isc.A.secondsFromNowTitle="N seconds from now";isc.A.minutesFromNowTitle="N minutes from now";isc.A.hoursFromNowTitle="N hours from now";isc.A.daysFromNowTitle="N days from now";isc.A.weeksFromNowTitle="N weeks from now";isc.A.monthsFromNowTitle="N months from now";
isc.A.yearsFromNowTitle="N years from now";isc.A.defaultValue="$today";isc.A.operator="greaterThan";isc.A.presetOptions={$today:"Today",$yesterday:"Yesterday",$tomorrow:"Tomorrow","-1w":"Current day of last week","+1w":"Current day of next week","-1m":"Current day of last month","+1m":"Current day of next month"};isc.A.valueFieldDefaults={type:"ComboBoxItem",name:"valueField",showTitle:false,shouldSaveValue:false,validateOnChange:false};isc.A.defaultQuantity=1;isc.A.quantityFieldDefaults={type:"SpinnerItem",
name:"quantityField",width:60,min:0,step:1,showTitle:false,shouldSaveValue:false,selectOnFocus:true};isc.A.showChooserIcon=true;isc.A.pickerIconDefaults={name:"chooserIcon",showOver:false,showFocused:false,showFocusedWithItem:false,neverDisable:true,src:"[SKIN]/DynamicForm/DatePicker_icon.gif"};isc.A.pickerIconPrompt="Show Date Chooser";isc.A.pickerConstructor="DateChooser";isc.A.showCalculatedDateField=true;isc.A.calculatedDateFieldDefaults={type:"BlurbItem",name:"calculatedDateField",border:"1px solid black;",
width:"*",startRow:false,showTitle:false,shouldSaveValue:false};isc.A.startDate=isc.DateItem.DEFAULT_START_DATE;isc.A.endDate=isc.DateItem.DEFAULT_END_DATE;isc.A.centuryThreshold=isc.DateItem.DEFAULT_CENTURY_THRESHOLD;isc.A.shouldSaveValue=true;isc.A.editorConstructor="DynamicForm";isc.A.editorDefaults={numCols:4,width:290,colWidths:[130,"*","*"],itemChanged:function(){this.creator.updateValue(this.creator.getValue())}};isc.A.useSharedPicker=false;isc.A.pickerDefaults={width:isc.DateItem.chooserWidth,
height:isc.DateItem.chooserHeight,showCancelButton:true,autoHide:true};isc.A=isc.RelativeDateItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function(){this.$67h();this.Super("init",arguments)},isc.A.isEditable=function(){return true},isc.A.$67h=function(){this.addAutoChild("editor",{$76z:true});this.canvas=this.editor;var a=this,b=[],c=2;b[0]=isc.addProperties({},this.valueFieldDefaults,this.valueFieldProperties,
{valueMap:this.getValueFieldOptions(),changed:function(d,e,f){a.delayCall("valueFieldChanged",[f],1)}});b[1]=isc.addProperties({},this.quantityFieldDefaults,this.quantityFieldProperties,{defaultValue:this.defaultQuantity,changed:function(d,e,f){a.quantityFieldChanged(f)}});if(this.showChooserIcon){c=3;b[2]={name:"iconPlaceholder",type:"staticText",width:1,showTitle:false,icons:[isc.addProperties({prompt:this.pickerIconPrompt},this.pickerIconDefaults,this.pickerIconProperties,{click:function(){a.showPicker()}})]}}this.baseDate=
this.baseDate||new Date;if(this.showCalculatedDateField)b[c]=isc.addProperties({},this.calculatedDateFieldDefaults,this.calculatedDateFieldProperties,{cellStyle:this.getHintStyle()});this.canvas.setFields(b);this.valueField=this.canvas.getField("valueField");this.quantityField=this.canvas.getField("quantityField");if(this.showCalculatedDateField)this.calculatedDateField=this.canvas.getField("calculatedDateField");if(this.showChooserIcon){this.iconPlaceholder=this.canvas.getField("iconPlaceholder");
this.pickerIcon=this.iconPlaceholder.icons.find("name","chooserIcon")}this.setValue(this.defaultValue)},isc.A.valueFieldChanged=function(a,b){var c=this.valueField.getSelectionRange();this.fieldChanged();c&&this.valueField.delayCall("setSelectionRange",[c[0],c[1]]);!b&&this.quantityField.isVisible()&&this.quantityField.delayCall("focusInItem")},isc.A.quantityFieldChanged=function(){this.fieldChanged()},isc.A.fieldChanged=function(){if(this.valueField&&this.quantityField){var a=this.valueField.getValue();
this.quantityField.getValue();a&&isc.isA.String(a)&&this.relativePresets[a]?this.quantityField.show():this.quantityField.hide();if(this.calculatedDateField){a=this.getValue();this.calculatedDateField.setValue(!a?"":"("+this.formatDate(a)+")")}}},isc.A.getValueFieldOptions=function(){var a=isc.clone(this.presetOptions);this.relativePresets={};for(var b=0;b<this.timeUnitOptions.length;b++){var c=this.timeUnitOptions[b];a[c+"_ago"]=this[c+"sAgoTitle"];a[c+"_fromNow"]=this[c+"sFromNowTitle"];this.relativePresets[c+
"_ago"]=true;this.relativePresets[c+"_fromNow"]=true}return a},isc.A.setValue=function(a){if(a==null){this.valueField.setValue(null);this.valueFieldChanged(a,true)}else if(isc.isA.Date(a)||this.valueField.valueMap[a]||a.value&&this.valueField.valueMap[a.value]){this.valueField.setValue(isc.isA.Date(a)?this.formatDate(a):a.value?a.value:a);this.valueFieldChanged(a,true)}else if(this.timeUnitOptions.contains(a)){a+="_fromNow";this.valueField.setValue(a);this.valueFieldChanged(a,true)}else if(a!=null)if(isc.RelativeDateItem.isRelativeDate(a)){var b,
c;if(isc.isAn.Object(a)&&a.value){c=isc.RelativeDateItem.getRelativeDateParts(a.value);b=isc.RelativeDateItem.getPeriodName(c.period);var d=c.direction=="+"?"fromNow":"ago";c=c.countValue;b=b?b.toLowerCase()+"_"+d:null}if(b&&this.valueField.valueMap[b]){this.valueField.setValue(b);this.quantityField.setValue(c)}this.valueFieldChanged(a,true)}},isc.A.getValue=function(){if(this.valueField&&this.quantityField){var a=this.getRelativeDate();if(a)return isc.RelativeDateItem.getAbsoluteDate(a.value,this.baseDate);
a=this.parseDate(this.valueField.getValue(),this.getInputFormat());if(isc.isA.Date(a))return a;return null}},isc.A.getRelativeDate=function(){var a=this.valueField.getValue(),b=this.quantityField.getValue();if(!a||!isc.isA.String(a))return null;var c=a.substring(0,1);if(c=="+"||c=="-"||c=="$")return this.getRelativeDateObject(a);var d=a.indexOf("_");if(d>=0){c=a.substring(0,d);a=a.substring(d+1)=="ago"?"-":"+";switch(c){case "millisecond":c="ms";break;case "second":c="s";break;case "minute":c="mn";
break;case "hour":c="h";break;case "day":c="d";break;case "week":c="w";break;case "month":c="m";break;case "quarter":c="q";break;case "year":c="y";break;case "decade":c="dc";break;case "century":c="c";break;default:c=null}if(c){a=a+b+c;return this.getRelativeDateObject(a)}}return null},isc.A.getRelativeDateObject=function(a){return{_constructor:"RelativeDate",value:a}},isc.A.updateValue=function(a){var b=this.valueField.getValue();this.$10y(a);this.$20l=true;this.valueField.setValue(b);this.valueFieldChanged();
this.$20l=false},isc.A.getCriteriaValue=function(){return this.getRelativeDate()},isc.A.getCriterion=function(a){var b=this.valueField.getValue();if(a==null&&isc.RelativeDateItem.isRelativeDate(b))a=false;return{operator:this.operator,value:a?this.getValue():this.getRelativeDate()}},isc.A.getCellHeight=function(){var a=this.Super("getCellHeight",arguments);if(isc.Browser.isIE&&this.useTextField&&isc.isA.Number(a))a+=2;return a},isc.A.getPickerIcon=function(a,b,c,d){a=this.invokeSuper(isc.DateItem,
"getPickerIcon",a,b,c,d);if(a.prompt==null)a.prompt=this.pickerIconPrompt;return a},isc.A.showPicker=function(){if(!this.picker)this.picker=this.useSharedPicker?isc.DateChooser.getSharedDateChooser():isc[this.pickerConstructor].create(isc.addProperties({},this.pickerDefaults,this.pickerProperties,{_generated:true,autoHide:true,showCancelButton:true}));var a=this.picker,b=a.callingFormItem;if(b!=this){b&&b.ignore(a,"dataChanged");this.observe(a,"dataChanged","observer.pickerDataChanged(observed)");
a.callingFormItem=this;a.callingForm=this.canvas;a.locatorParent=this.canvas}a.startYear=this.getStartDate().getFullYear();a.endYear=this.getEndDate().getFullYear();return this.Super("showPicker",arguments)},isc.A.getPickerRect=function(){var a=this.getPageLeft(),b=this.getPageTop(),c=isc.DateItem.chooserWidth+3,d=isc.DateItem.chooserHeight+3,e;e=this.canvas.getItem("iconPlaceholder");a+=e.getLeft();a+=Math.round(e.getVisibleWidth()-this.getPickerIconWidth()/2-c/2);b+=Math.round(this.getPickerIconHeight()/
2-d/2);return[a,b]},isc.A.pickerDataChanged=function(a){a=a.getData();a.getFullYear();a.getMonth();a.getDate();this.$20l=true;this.valueField.setValue(this.formatDate(a));this.$20l=false;this.updateValue();this.fieldChanged();this.hasFocus||this.focusInItem()},isc.A.getStartDate=function(){var a=this.parseDate(this.startDate);if(!isc.isA.Date(a)){this.logWarn("startDate was not in valid date format - using default start date");a=isc.DateItem.DEFAULT_START_DATE}return a},isc.A.getEndDate=function(){var a=
this.parseDate(this.endDate);if(!isc.isA.Date(a)){this.logWarn("endDate was not in valid date format - using default end date");a=isc.DateItem.DEFAULT_END_DATE}return a},isc.A.parseDate=function(a,b){if(b==null)b=this.getInputFormat();return Date.parseInput(a,b,this.centuryThreshold,true,this.useCustomTimezone)},isc.A.formatDate=function(a){return isc.isA.Date(a)?a.toShortDate(this.displayFormat,this.useCustomTimezone):a},isc.A.getInputFormat=function(){if(this.inputFormat)return this.inputFormat;
if(this.displayFormat)return Date.mapDisplayFormatToInputFormat(this.displayFormat);return null});isc.B._maxIndex=isc.C+24}if(isc.ListGrid){isc.defineClass("DateRangeItem","CanvasItem");isc.A=isc.DateRangeItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.shouldSaveValue=true;isc.A.fromTitle="From";isc.A.toTitle="To";isc.A.allowRelativeDates=false;isc.A.dateRangeFormDefaults={_constructor:"DynamicForm",numCols:2,colWidths:[50,"*"],margin:0,
padding:0,itemChanged:function(){var a=this.getValues(),b={_constructor:"DateRange"};if(a.fromField!=null)b.start=a.fromField;if(a.toField!=null)b.end=a.toField;this.creator.updateValue(b)}};isc.B.push(isc.A.setFromDate=function(a){this.fromDate=a;this.fromField&&this.fromField.setValue(this.fromDate)},isc.A.setToDate=function(a){this.toDate=a;this.toField&&this.toField.setValue(this.toDate)},isc.A.hasAdvancedCriteria=function(){return true},isc.A.getCriterion=function(a){var b=(a=a||!this.allowRelativeDates)?
this.fromField.getValue():this.fromField.getRelativeDate()||this.fromField.getValue(),c=b!=null;a=a?this.toField.getValue():this.toField.getRelativeDate()||this.toField.getValue();var d=a!=null,e=null;if(c||d){e={_constructor:"AdvancedCriteria",operator:"and",criteria:[]};c&&e.criteria.add({fieldName:this.name,operator:"greaterOrEqual",value:b});d&&e.criteria.add({fieldName:this.name,operator:"lessOrEqual",value:a})}return e},isc.A.canEditCriterion=function(a){if(a==null)return false;var b=this.getCriteriaFieldName();
if(a.operator=="and"){a=a.criteria;if(a.length==0||a.length>2)return false;for(var c=0;c<a.length;c++){var d=a[c];if(d.fieldName!=b)return false;if(d.operator!="greaterThan"&&d.operator!="greaterOrEqual"&&d.operator!="lessThan"&&d.operator!="lessOrEqual"){this.logWarn("DynamicForm editing Advanced criteria. Includes criterion for field "+b+". A dateRange editor is showing for this field but the existing criteria has operator:"+d.operator+". DateRange items can only edit criteria greaterThan/greaterOrEqual or lessThan/lessOrEqual so leaving this unaltered.");
return false}}return true}else if(a.fieldName==b){if(a.operator!="greaterThan"&&a.operator!="greaterOrEqual"&&a.operator!="lessThan"&&a.operator!="lessOrEqual"){this.logWarn("DynamicForm editing Advanced criteria. Includes criterion for field "+b+". A dateRange editor is showing for this field but the existing criteria has operator:"+a.operator+". DateRange items can only edit criteria greaterThan/greaterOrEqual or lessThan/lessOrEqual so leaving this unaltered.");return false}return true}return false},
isc.A.setCriterion=function(a){var b,c;if(a.operator=="and"){(b=a.criteria.find("operator","greaterThan"))||(b=a.criteria.find("operator","greaterOrEqual"));(c=a.criteria.find("operator","lessThan"))||(c=a.criteria.find("operator","lessOrEqual"))}else if(a.operator=="greaterThan")b=a;else if(a.operator=="greaterOrEqual")b=a;else if(a.operator=="lessThan")c=a;else if(a.operator=="lessOrEqual")c=a;b!=null&&this.fromField.setValue(b.value);c!=null&&this.toField.setValue(c.value)});isc.B._maxIndex=isc.C+
6;isc.A=isc.DateRangeItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function(){this.$67h();this.Super("init",arguments)},isc.A.isEditable=function(){return true},isc.A.$67h=function(){var a,b={$76z:true};if(this.form.dataSource){a=isc.DataSource.getDataSource(this.form.dataSource);var c=a.getField(this.name);if(c)b.dataSource=a.getFieldDataSource(c)}if(this.form&&this.form.showComplexFieldsRecursively){b.showComplexFields=
true;b.showComplexFieldsRecursively=true}else b.showComplexFields=false;b.height=22;this.addAutoChild("dateRangeForm",b);this.canvas=this.dateRangeForm;this.baseDate=this.baseDate||new Date;a=this.allowRelativeDates?"RelativeDateItem":"DateItem";b=[];b[0]=isc.addProperties({},this.fromFieldDefaults,this.fromFieldProperties,{name:"fromField",_constructor:a,baseDate:this.baseDate,displayFormat:this.dateDisplayFormat,inputFormat:this.dateInputFormat,title:this.fromTitle,titleOrientation:this.form.titleOrientation,
defaultValue:this.fromValue,useTextField:a=="DateItem"?true:null});b[1]=isc.addProperties({},this.toFieldDefaults,this.toFieldProperties,{name:"toField",_constructor:a,baseDate:this.baseDate,displayFormat:this.dateDisplayFormat,inputFormat:this.dateInputFormat,title:this.toTitle,titleOrientation:this.form.titleOrientation,defaultValue:this.toValue,useTextField:a=="DateItem"?true:null});this.canvas.setFields(b);this.toField=this.canvas.getField("toField");this.fromField=this.canvas.getField("fromField");
if(this.allowRelativeDates){this.fromField.canvas.$v4=this.toField.canvas;this.toField.canvas.$vw=this.fromField.canvas}if(this.defaultValue)this.setValue(this.defaultValue);else{this.fromDate&&this.setFromDate(this.fromDate);this.toDate&&this.setToDate(this.toDate)}},isc.A.fieldChanged=function(){},isc.A.setValue=function(a){var b=a?a.start:null,c=a?a.end:null,d=isc.RelativeDateItem;!this.allowRelativeDates&&d.isRelativeDate(b)?this.setFromDate(null):this.setFromDate(b);!this.allowRelativeDates&&
d.isRelativeDate(c)?this.setToDate(null):this.setToDate(c);this.Super("setValue",arguments)},isc.A.getValue=function(){if(this.fromField&&this.toField){var a=this.allowRelativeDates,b=a&&this.fromField.getRelativeDate()?this.fromField.getRelativeDate():this.fromField.getValue();a=a&&this.toField.getRelativeDate()?this.toField.getRelativeDate():this.toField.getValue();var c={_constructor:"DateRange"};if(b==null&&a==null)return null;if(b!=null)c.start=b;if(a!=null)c.end=a;return c}},isc.A.updateValue=
function(a){this.$10y(a)});isc.B._maxIndex=isc.C+7;if(isc.Window){isc.defineClass("DateRangeDialog","Window");isc.A=isc.DateRangeDialog;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.askForRange=function(a,b,c,d){isc.DateRangeDialog.create({allowRelativeDates:a!=null?a:true,rangeItemProperties:b,callback:d},c).show()});isc.B._maxIndex=isc.C+1;isc.A=isc.DateRangeDialog.getPrototype();isc.A.isModal=true;isc.A.showModalMask=true;isc.A.dismissOnEscape=
true;isc.A.autoCenter=true;isc.A.width=380;isc.A.height=140;isc.A.vertical="true";isc.A.showMinimizeButton=false;isc.A.headerIconProperties={src:"[SKIN]/DynamicForm/DatePicker_icon.gif"};isc.A.returnCriterion=false;isc.A.headerTitle="Select Date Range";isc.A.mainLayoutDefaults={_constructor:"VLayout",width:"100%",height:"100%",layoutMargin:5};isc.A.rangeFormDefaults={_constructor:"DynamicForm",numCols:1,width:"100%",height:"100%",autoParent:"mainLayout"};isc.A.rangeItemDefaults={_constructor:"DateRangeItem",
allowRelativeDates:true,showTitle:false};isc.A.buttonLayoutDefaults={_constructor:"HLayout",width:"100%",height:22,align:"right",membersMargin:5,autoParent:"mainLayout"};isc.A.clearButtonTitle="Clear";isc.A.clearButtonDefaults={_constructor:"IButton",height:22,width:80,autoParent:"buttonLayout",click:function(){this.creator.clear()}};isc.A.okButtonTitle="OK";isc.A.okButtonDefaults={_constructor:"IButton",height:22,width:80,autoParent:"buttonLayout",click:function(){this.creator.accept()}};isc.A.cancelButtonTitle=
"Cancel";isc.A.cancelButtonDefaults={_constructor:"IButton",height:22,width:80,autoParent:"buttonLayout",click:function(){this.creator.cancel()}};isc.A.destroyOnClose=true;isc.A=isc.DateRangeDialog.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function(){this.title=this.headerTitle;this.Super("initWidget",arguments);this.addAutoChild("mainLayout");this.addAutoChild("rangeForm",{$76z:true,items:[isc.addProperties({},
this.rangeItemDefaults,this.rangeItemProperties,{name:"rangeItem",fromDate:this.fromDate,toDate:this.toDate,dateDisplayFormat:this.dateDisplayFormat})]});this.rangeItem=this.rangeForm.getField("rangeItem");this.rangeItem.canvas.numCols=1;this.addAutoChild("buttonLayout");this.addAutoChild("clearButton",{title:this.clearButtonTitle});this.addAutoChild("okButton",{title:this.okButtonTitle});this.addAutoChild("cancelButton",{title:this.cancelButtonTitle});this.addItem(this.mainLayout)},isc.A.clear=function(){this.rangeItem.setValue(null)},
isc.A.accept=function(){this.finished(this.rangeItem.returnCriterion?this.rangeItem.getCriterion():this.rangeItem.getValue())},isc.A.cancel=function(){this.hide();this.destroyOnClose&&this.markForDestroy()},isc.A.finished=function(a){this.callback&&this.fireCallback(this.callback,"value",[a]);this.hide();this.destroyOnClose&&this.markForDestroy()});isc.B._maxIndex=isc.C+5;isc.defineClass("MiniDateRangeItem","StaticTextItem");isc.A=isc.MiniDateRangeItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;
isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.textBoxStyle="textItem";isc.A.clipValue=true;isc.A.wrap=false;isc.A.iconVAlign="top";isc.A.height=20;isc.A.width=100;isc.A.shouldSaveValue=true;isc.A.rangeDialogDefaults={_constructor:"DateRangeDialog",autoDraw:false,destroyOnClose:false};isc.A.fromDateOnlyPrefix="Since";isc.A.toDateOnlyPrefix="Before";isc.A.pickerIconPrompt="Show Date Chooser";isc.A.pickerIconDefaults={name:"showDateRange",src:"[SKIN]/DynamicForm/DatePicker_icon.gif",width:20,
height:20,neverDisable:true,showDisabled:false,showOver:false,showFocused:false,showFocusedWithItem:false,hspace:0,click:function(a,b){b.showRangeDialog()}};isc.A.allowRelativeDates=true;isc.B.push(isc.A.handleClick=function(){this.showRangeDialog()});isc.B._maxIndex=isc.C+1;isc.A=isc.MiniDateRangeItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function(){this.addAutoChild("rangeDialog",{fromDate:this.fromDate,toDate:this.toDate,
rangeItemProperties:{allowRelativeDates:this.allowRelativeDates},dateDisplayFormat:this.dateDisplayFormat,callback:this.getID()+".rangeDialogCallback(value)"});this.icons=[isc.addProperties({prompt:this.pickerIconPrompt},this.pickerIconDefaults,this.pickerIconProperties)];this.rangeItem=this.rangeDialog.rangeItem;this.rangeItem.name=this.name},isc.A.showRangeDialog=function(){this.rangeDialog.rangeItem.setFromDate(this.fromDate);this.rangeDialog.rangeItem.setToDate(this.toDate);this.rangeDialog.show()},
isc.A.rangeDialogCallback=function(a){this.updateValue(a)},isc.A.hasAdvancedCriteria=function(){return true},isc.A.getCriterion=function(){return this.rangeItem?this.rangeItem.getCriterion():null},isc.A.setCriterion=function(a){if(this.rangeItem){this.rangeItem.setCriterion(a);this.setValue(this.rangeItem.getValue(),null,true)}},isc.A.canEditCriterion=function(a){return this.rangeItem?this.rangeItem.canEditCriterion(a):false},isc.A.setValue=function(a,b,c){this.updateStoredDates(a);if(!c){this.rangeItem.setFromDate(this.fromDate);
this.rangeItem.setToDate(this.toDate)}this.Super("setValue",[this.getValue()],arguments)},isc.A.updateStoredDates=function(a){if(a!=null){if(isc.DataSource.isAdvancedCriteria(a)){for(var b={},c=0;c<a.criteria.length;c++){var d=a.criteria[c];if(d.operator=="greaterThan"||d.operator=="greaterOrEqual")b.start=d.value;else if(d.operator=="lessThan"||d.operator=="lessOrEqual")b.end=d.value}a=b}this.fromDate=a.start;this.toDate=a.end}else this.toDate=this.fromDate=null},isc.A.saveValue=function(){this.Super("saveValue",
arguments);this.updateStoredDates(this._value)},isc.A.displayValue=function(a){this.setElementValue(this.mapValueToDisplay(a)||"",a)},isc.A.updateValue=function(a){this.$10y(a)&&this.displayValue(a)},isc.A.mapValueToDisplay=function(a){if(a==null)return"";var b=a.start;a=a.end;var c=isc.RelativeDateItem;b=c.isRelativeDate(b)?c.getAbsoluteDate(b.value):b;a=c.isRelativeDate(a)?c.getAbsoluteDate(a.value):a;var d;if(b||a){if(this.dateDisplayFormat){if(b)d=this.formatDate(b);if(a)if(d)d+=" - "+this.formatDate(a);
else d=this.formatDate(a)}else d=Date.getFormattedDateRangeString(b,a);if(b)a||(d=this.fromDateOnlyPrefix+" "+d);else d=this.toDateOnlyPrefix+" "+d}return this.prompt=d||""},isc.A.getValue=function(){if(this.rangeItem)return this.rangeItem.getValue()},isc.A.formatDate=function(a){return isc.isA.Date(a)?a.toShortDate(this.displayFormat,this.useCustomTimezone):a},isc.A.getCriteriaValue=function(){return this.getCriterion()});isc.B._maxIndex=isc.C+16}}isc.defineClass("EntityEditorHeader","VLayout");
isc.A=isc.EntityEditorHeader.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.height=1;isc.A.padding=10;isc.A.border="2px solid black";isc.A.headerLayoutDefaults={_constructor:"VLayout",width:"100%",height:1,membersMargin:5};isc.A.headerLabelTitle="<B><H2>Editing ${entityType}</H2><br><H3>This UI lets you edit the entire data-structure for this Entity-type</H3></B>";isc.A.headerLabelDefaults={_constructor:"Label",width:"100%",height:30,
autoParent:"headerLayout"};isc.A.showDetailLabel=false;isc.A.defaultDetailLabelTitle="<B><H3>This UI lets you edit the entire data-structure for this Entity-type</H3></B>";isc.A.detailLabelTitle="<B><H3>$entityComment</H3></B>";isc.A.detailLabelDefaults={_constructor:"Label",width:"100%",height:20,autoParent:"headerLayout"};isc.A.unknownEntityTitle="[Unknown Entity-type]";isc.B.push(isc.A.initWidget=function(){var a=this.headerLabelTitle,b=this.detailLabelTitle;this.dataSource&&this.getDataSource(this.dataSource);
if(!this.entityName)this.entityName=this.getEntityName(this.dataSource);if(!this.entityComment)this.entityComment=this.getEntityComment(this.dataSource);if(this.entityName)a=a.evalDynamicString(this,{entityType:this.entityName});if(this.entityComment)b=b.evalDynamicString(this,{entityType:this.entityComment});this.headerLayout=this.addAutoChild("headerLayout");this.headerLabel=this.addAutoChild("headerLabel",{contents:a});this.detailLabel=this.addAutoChild("detailLabel",{contents:b});this.headerLayout.addMembers([this.headerLabel,
this.detailLabel]);this.addMember(this.headerLayout)},isc.A.getEntityName=function(a){var b=this.unknownEntityTitle;if(a)b=isc.isA.Function(a.getEntityName)?a.getEntityName():a.ID;return b},isc.A.getEntityComment=function(a){var b=this.defaultDetailLabelTitle;if(a)b=isc.isA.Function(a.getEntityComment)?a.getEntityComment():"Allows hierarchical editing of data in "+a.ID+" DataSource";return b});isc.B._maxIndex=isc.C+3;isc.defineClass("EntityEditorForm","Portlet");isc.A=isc.EntityEditorForm.getPrototype();
isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.addButtonDefaults={_constructor:"IButton",title:"Add",autoFit:true,layoutAlign:"right",click:function(){this.creator.addRecord()}};isc.A.formDefaults={_constructor:"DynamicForm",numCols:6,colWidths:["*","*","*","*","*","*"],width:"100%",implicitSave:true,initWidget:function(){this.Super("initWidget",arguments);if(this.record&&this.relation){var a={};a[this.relation.baseFieldName]=this.relation.direction?
this.record[this.relation.relatedFieldName]:this.record[this.relation.baseFieldName];this.fetchData(a)}},implicitSaveCallback:function(a){if(!this.record||!this.record[this.relation.baseFieldName]){this.creator.setRecord(a);this.setValues(a);this.saveOperationType="update"}}};isc.B.push(isc.A.initWidget=function(){this.Super("initWidget",arguments);this.addAutoChild("addButton");this.addAutoChild("form",isc.addProperties({},this.formProperties,{dataSource:this.dataSource,title:this.title,record:this.record,
relation:this.relation}));isc.isA.Portlet(this)?this.addItems([this.addButton,this.form]):this.addMembers([this.addButton,this.form])},isc.A.fetchData=function(){var a={};if(this.relation.direction)a[this.relation.baseFieldName]=this.record[this.relation.relatedFieldName];else if(this.isTopLevel())a[this.relation.baseFieldName]=this.record[this.relation.baseFieldName];this.form.fetchData(a)},isc.A.addRecord=function(){var a={};if(this.relation.direction)a[this.relation.baseFieldName]=this.record[this.relation.relatedFieldName];
else this.isTopLevel()||(a[this.relation.baseFieldName]=this.record[this.relation.baseFieldName]);this.record=a;this.form.editNewRecord(a)},isc.A.isTopLevel=function(){return this.relation.relatedDS==null},isc.A.setRecord=function(a){this.isTopLevel()?this.creator.updateTopLevel():this.fetchData();this.record=a;this.form.record=a;this.addButton&&this.addButton.setDisabled(this.record==null)},isc.A.getData=function(){return null},isc.A.getCriteria=function(){return this.form.getValuesAsCriteria()},
isc.A.enterSearchMode=function(a){this.addButton.setDisabled(true);this.record=this.form.record=null;this.form.implicitSave=false;this.form.setData([]);a&&this.form.setValues(a)},isc.A.exitSearchMode=function(){});isc.B._maxIndex=isc.C+9;isc.defineClass("EntityEditorGrid","Portlet");isc.A=isc.EntityEditorGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.addButtonDefaults={_constructor:"IButton",title:"Add",autoFit:true,layoutAlign:"right",
click:function(){this.creator.addRecord()}};isc.A.gridDefaults={_constructor:"ListGrid",width:"100%",height:"100%",autoFitMaxRecords:4,autoFetchData:false,canEdit:true,autoSaveEdits:true,initWidget:function(){if(this.record&&this.relation){this.initialCriteria={};this.initialCriteria[this.relation.baseFieldName]=this.record[this.relation.relatedFieldName]}this.Super("initWidget",arguments)}};isc.B.push(isc.A.initWidget=function(){this.addAutoChild("addButton");if(!isc.isA.DataSource(this.dataSource))this.dataSource=
isc.DS.get(this.dataSource);this.addAutoChild("grid",isc.addProperties({},this.gridProperties,{dataSource:this.dataSource,title:this.title,record:this.record,relation:this.relation}));this.record&&this.fetchData();this.addButton&&this.addButton.setDisabled(this.record==null);isc.isA.Portlet(this)?this.addItems([this.addButton,this.grid]):this.addMembers([this.addButton,this.grid]);this.Super("initWidget",arguments)},isc.A.setData=function(){},isc.A.fetchData=function(){var a={};if(this.record)a[this.relation.baseFieldName]=
this.record[this.relation.relatedFieldName];this.grid.fetchData(a)},isc.A.addRecord=function(){var a={};a[this.relation.baseFieldName]=this.record[this.relation.relatedFieldName];this.grid.startEditingNew(a)},isc.A.setRecord=function(a){this.record=a;this.fetchData();this.addButton&&this.addButton.setDisabled(this.record==null)},isc.A.getData=function(){return null},isc.A.getCriteria=function(){return this.grid.getFilterEditorCriteria()},isc.A.enterSearchMode=function(a){this.addButton.setDisabled(true);
this.record=this.grid.record=null;this.grid.setData([]);this.grid.setShowFilterEditor(true);a&&this.grid.setCriteria(a)},isc.A.exitSearchMode=function(){});isc.B._maxIndex=isc.C+9;isc.defineClass("EntityEditor","VLayout");isc.A=isc.EntityEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.membersMargin=10;isc.A.padding=10;isc.A.dataSource="";isc.A.modeFormDefaults={_constructor:"DynamicForm",height:1,width:"100%",fields:[{name:"edit",
title:"options",defaultToFirstOption:true,valueMap:["Edit","Search"],changed:function(a,b,c){a.creator.setMode(c)}}]};isc.A.formEntityDefaults={_constructor:"EntityEditorForm",height:1,width:"100%"};isc.A.gridEntityDefaults={_constructor:"EntityEditorGrid",height:1,width:"100%"};isc.A.showTabset=false;isc.A.tabsetDefaults={_constructor:"TabSet",width:"100%",height:"100%"};isc.A.portalDefaults={_constructor:"PortalLayout",width:"100%",height:"100%",showColumnMenus:false,numColumns:1};isc.B.push(isc.A.getDataSourceHierarchy=
function(a,b){var c=[];isc.isA.DataSource(a)||(a=isc.DS.getDataSource(a));if(!isc.isA.DataSource(a)){this.logWarn("No datasource provided..");return c}b||(b=[]);if(b.contains(a.ID))return null;for(var d=isc.getValues(a.getFields()),e=[],f=0;f<d.length;f++)d[f].foreignKey!=null&&e.add(d[f]);var g=a.ID;isc.DS.registerDataSource(a);var h=a.getChildDataSources();if(h)for(f=0;f<h.length;f++)for(var i=h[f],j=isc.getValues(i.getFields()),k=0;k<j.length;k++){var l=j[k];if(!(!l.foreignKey||isc.DS.getForeignDSName(l,
i)!=a.ID)){var m=isc.DS.getForeignFieldName(l,i);if((m=d.find("name",m))&&l.entityEditMode!="picker"){var n=g,o=m.name,s=i.ID;l=l.name;var r=m.relationArity,t="out";b.contains(s)||c.add({baseDS:s,baseFieldName:l,relatedDS:n,relatedFieldName:o,relationArity:m.relationArity})}}}for(k=0;k<e.length;k++){m=e[k];if(m.foreignKey){d=isc.DS.getForeignFieldName(m,a);i=isc.DS.getDataSource(isc.DS.getForeignDSName(m,a));j=isc.getValues(i.getFields());if((l=j.find("name",d))&&m.entityEditMode!="picker"){n=g;o=
m.name;s=this.getDSName(i);l=l.name;r=m.relationArity;t="out";b.contains(s)||c.add({baseDS:s,baseFieldName:l,relatedDS:n,relatedFieldName:o,relationArity:r,direction:t})}}}return c},isc.A.getDSName=function(a){if(isc.isA.String(a))return a;if(isc.isA.DataSource(a))return a.ID;return null});isc.B._maxIndex=isc.C+2;isc.A=isc.EntityEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function(){this.vertical=true;
if(!isc.isA.DataSource(this.dataSource))this.dataSource=isc.DS.getDataSource(this.dataSource);if(this.dataSource)this.entityTree=this.getEntityTree();else this.logWarn("No dataSource provided - no entity to edit");this.addAutoChild("modeForm");this.addAutoChild("tabset");this.addAutoChild("portal");this.addMember(this.modeForm);this.tabset&&this.addMember(this.tabset);this.portal&&this.addMember(this.portal)},isc.A.getEntityTree=function(){if(!isc.isA.DataSource(this.dataSource))return{baseDS:"NoDSProvided",
relations:[]};var a={baseDS:this.dataSource.ID,baseFieldName:this.dataSource.getPrimaryKeyFieldNames()[0],relations:[]};a.relations=this.getDataSourceHierarchy(this.dataSource);return a},isc.A.fetchDataByPK=function(a){if(this.dataSource){var b=this;this.dataSource.fetchData(a,function(c,d){b.fetchDataReply(d)})}},isc.A.fetchDataReply=function(a){this.clearEntity();this.record=a[0];this.showEntity()},isc.A.clearEntity=function(){if(this.entities&&this.entities.length>0)if(this.showTabset)for(var a=
this.tabset.tabs.length-1;a>=0;a--){this.entities[a].markForDestroy();this.tabset.removeTab(a)}else if(this.portal){this.portal.members.removeAll();for(a=this.entities.length-1;a>=0;a--)this.entities[a].markForDestroy()}else for(a=this.members.length-1;a>=1;a--){this.removeMember(a);this.entities[a-1].markForDestroy()}this.entities=[];this.record=null},isc.A.showEntity=function(){var a=this.entityTree;if(!this.entities)this.entities=[];if(this.entityTree){this.addEditor(a);this.topLevelComponent=
this.entities[0];if(a&&a.relations&&a.relations.length>0)for(var b=0;b<a.relations.length;b++){var c=a.relations[b];if(this.shouldShowEntity(c.baseDS))c.relationArity=="one"?this.addEditor(c):this.addGrid(c)}}},isc.A.updateTopLevel=function(){for(var a=1;a<this.entities.length;a++)this.entities[a].setRecord(this.topLevelComponent.record)},isc.A.getData=function(){return[]},isc.A.getDataSourceSpec=function(a,b){if(this.dataSources){var c=this.dataSources[a];c||(c=this.dataSources[a+"!"+b]);return c}return null},
isc.A.getRelatedEditorProperties=function(a,b){var c=this.getDataSourceSpec(a,b);if(c)return c.editorProperties;return null},isc.A.shouldShowEntity=function(a){if(this.dataSources){a=this.dataSources[a];if(a===void 0)return true;return a!==null}return true},isc.A.addEditor=function(a){this.addEntityLink(this.createAutoChild("formEntity",{height:"100%",width:"100%",dataSource:a.baseDS,title:this.getEntityTitle(a),record:this.record,relation:a,formProperties:this.getRelatedEditorProperties(a.baseDS,
a.relatedFieldName)}));this.logWarn("adding linked single-record entity")},isc.A.addGrid=function(a){this.addEntityLink(this.createAutoChild("gridEntity",{height:"100%",width:"100%",dataSource:a.baseDS,title:this.getEntityTitle(a),record:this.record,relation:a,gridProperties:this.getRelatedEditorProperties(a.baseDS,a.relatedFieldName)}));this.logWarn("added linked multiple-record entity")},isc.A.addEntityLink=function(a){this.entities.add(a);if(this.showTabset)this.addEntityTab(a);else{var b=a.relation;
var c=(b=this.getDataSourceSpec(b.baseDS,b.relatedFieldName))&&b.rowNum!=null?b.rowNum:-1,d=b&&b.offsetInRow!=null?b.offsetInRow:-1;if(this.portal){if(b&&b.userHeight!=null)a.$po=b.userHeight;c!=-1?this.portal.getColumn(0).addPortletToExistingRow(a,c,d):this.portal.getColumn(0).addPortlet(a)}else this.addMember(a)}},isc.A.getEntityName=function(a){var b=this.getDSName(a.baseDS);this.getDSName(a.relatedDS);return b+"_"+(a.relatedFieldName||a.baseFieldName)},isc.A.getEntityTitle=function(a){var b=this.getDataSourceSpec(a.baseDS,
a.baseFieldName),c=this.getDSName(a.baseDS),d=this.getDSName(a.relatedDS);a=a.relatedFieldName||a.baseFieldName;return b&&b.entityTitle?b.entityTitle:d?c!=d?isc.DS.getAutoTitle(c):isc.DS.getAutoTitle(a):isc.DS.getAutoTitle(c)},isc.A.addEntityTab=function(a){var b=this.getEntityName(a.relation),c=this.getEntityTitle(a.relation);if(a){a.setWidth("100%");a.setHeight("100%")}this.tabset.addTab({name:b,title:c,pane:a,relation:a.relation})},isc.A.setMode=function(a){var b;if(a=="Search"){if(this.entities&&
this.entities.length>0)for(a=0;a<this.entities.length;a++){b=this.entities[a];if(isc.isA.EntityEditorGrid(b)){b.enterSearchMode(this.getEntityCriteria(b));b.markForRedraw()}else if(isc.isA.EntityEditorForm(b)){b.enterSearchMode(this.getEntityCriteria(b));b.markForRedraw()}}}else{if(!this.entityCriteria)this.entityCriteria={};if(this.entities&&this.entities.length>0)for(a=0;a<this.entities.length;a++){b=this.entities[a];var c=b.getCriteria();if(c)this.entityCriteria[b.getID()]={relation:b.relation,
criteria:c}}}},isc.A.getEntityCriteria=function(a){if(this.entityCriteria)return this.entityCriteria[a.getID()];return null});isc.B._maxIndex=isc.C+19;isc._moduleEnd=isc._Forms_end=isc.timestamp?isc.timestamp():(new Date).getTime();isc.Log&&isc.Log.logIsInfoEnabled("loadTime")&&isc.Log.logInfo("Forms module init time: "+(isc._moduleEnd-isc._moduleStart)+"ms","loadTime");delete isc.definingFramework}else window.isc&&isc.Log&&isc.Log.logWarn&&isc.Log.logWarn("Duplicate load of module 'Forms'.");if(window.isc&&window.isc.module_Core&&!window.isc.module_DataBinding){isc.module_DataBinding=1;isc._moduleStart=isc._DataBinding_start=isc.timestamp?isc.timestamp():(new Date).getTime();if(isc._moduleEnd&&(!isc.Log||isc.Log&&isc.Log.logIsDebugEnabled("loadTime"))){isc._pTM={message:"DataBinding load/parse time: "+(isc._moduleStart-isc._moduleEnd)+"ms",category:"loadTime"};if(isc.Log&&isc.Log.logDebug)isc.Log.logDebug(isc._pTM.message,"loadTime");else if(isc._preLog)isc._preLog[isc._preLog.length]=
isc._pTM;else isc._preLog=[isc._pTM]}isc.definingFramework=true;isc.Comm||isc.defineClass("Comm");isc.A=isc.Comm;isc.A.XML_BACKREF_PREFIX="$$BACKREF$$:";isc.A.$36r=/^([_:A-Za-z])([_:.A-Za-z0-9]|-)*$/;isc.A.serializeBackrefs=true;isc.A=isc.Comm;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.xmlSerialize=function(a,b,c){return isc.Comm.$ew(a,b,c?"":null)},isc.A.$ew=function(a,b,c,d){if(!d||!d.objRefs){d=isc.addProperties({},d);d.objRefs={obj:[],
path:[]};if(!d.objPath)d.objPath=b&&b.getID?b.getID():"";if(a==null)a=isc.isA.Class(b)?b.getClassName():isc.isAn.Array(b)?"Array":isc.isA.Object(b)?b.$schemaId||"Object":"ISC_Auto"}if(b==null)return isc.Comm.$ex(a,"");if(isc.isA.String(b))return isc.Comm.$ex(a,isc.makeXMLSafe(b),isc.Comm.xmlSchemaMode?"string":null);if(isc.isA.Function(b)){if(b.iscAction)return isc.StringMethod.$41u(b.iscAction);return null}if(b==window){this.logWarn("Serializer encountered the window object at path: "+d.objPath+
" - returning null for this slot.");return null}if(isc.RPCManager.preserveTypes){if(isc.isA.Number(b)||isc.isA.SpecialNumber(b)){if(b.toString().contains("."))return isc.Comm.$ex(a,b,"double");return isc.Comm.$ex(a,b,"long")}if(isc.isA.Boolean(b))return isc.Comm.$ex(a,b,"boolean")}else{if(isc.isA.Number(b)||isNaN(b))return isc.Comm.$ex(a,b);if(isc.isA.Boolean(b))return isc.Comm.$ex(a,b)}var e=isc.JSONEncoder.$zl(d.objRefs,b);if(e!=null&&d.objPath.contains(e)){var f=d.objPath.substring(e.length,e.length+
1);if(f=="."||f=="["||f=="]"){if(this.serializeBackrefs)return isc.Comm.$36u(a)+isc.Comm.XML_BACKREF_PREFIX+e+isc.Comm.$36v(a);return isc.emptyString}}isc.JSONEncoder.$zm(d.objRefs,b,d.objPath);if(isc.isA.Function(b.$ew))return b.$ew(a,null,null,c,d.objRefs,d.objPath);else if(isc.isA.Class(b)){this.logWarn("Attempt to serialize class of type: "+b.getClassName()+" at path: "+d.objPath+" - returning null for this slot.");return null}e=d.isRoot==false?false:true;if(isc.isAn.Array(b))return isc.Comm.$36s(a,
b,d.objPath,d.objRefs,c,e);b=b.getSerializeableFields?b.getSerializeableFields([],[]):b;return isc.Comm.$36t(a,b,d.objPath,d.objRefs,c,e)},isc.A.$36s=function(a,b,c,d,e,f){f=isc.Comm.$36u(a,"List",null,null,null,f);for(var g=0,h=b.length;g<h;g++){var i=b[g],j={objRefs:d,objPath:isc.JSONEncoder.$zp(c,g),isRoot:false};f=isc.StringBuffer.concat(f,e!=null?isc.StringBuffer.concat("\r",e,"\t"):"",isc.Comm.$ew((i!=null?i.$schemaId:null)||"elem",i,e!=null?isc.StringBuffer.concat(e,"\t"):null,j))}return f=
isc.StringBuffer.concat(f,e!=null?isc.StringBuffer.concat("\r",e):"",isc.Comm.$36v(a))},isc.A.$36w=function(a){return isc.Comm.xmlSchemaMode||a.match(this.$36r)},isc.A.$36t=function(a,b,c,d,e,f){if(isc.isAn.Instance(b))a=b.getClassName();else if(b._constructor&&b._constructor!="AdvancedCriteria"&&b._constructor!="RelativeDate")a=b._constructor;f=isc.Comm.$36u(a,"Object",null,null,null,f);b=isc.JSONEncoder.$42b(b);for(var g in b)if(g!=null)if(g!=isc.gwtRef)if(!g.startsWith("$")){var h=b[g];if(h!==
void 0)if(!(isc.isA.Function(h)&&!h.iscAction)){var i=g.toString(),j={objRefs:d,objPath:isc.JSONEncoder.$zp(c,g),isRoot:false};f=isc.StringBuffer.concat(f,e!=null?isc.StringBuffer.concat("\r",e,"\t"):"",isc.Comm.$ew(i,h,e!=null?isc.StringBuffer.concat(e,"\t"):null,j))}}return f=isc.StringBuffer.concat(f,e!=null?isc.StringBuffer.concat("\r",e):"",isc.Comm.$36v(a))},isc.A.$36x=function(a,b){if(a[b]!=null)return a[b];else{if(a.$36y==null)a.$36y=0;return a[b]="ns"+a.$36y++}},isc.A.$36u=function(a,b,c,
d,e,f){var g=isc.SB.create(),h=c!=null;if(c!=null&&isc.isAn.Object(d)){h=false;d=this.$36x(d,c)}var i="";if(!this.$36w(a)){i=' _isc_name="'+isc.makeXMLSafe(a)+'"';a="Object"}if(c){d=d||"schNS";g.append("<",d,":",a);h&&g.append(" xmlns:",d,'="',c,'"')}else g.append("<",a);i&&g.append(i);f&&!this.omitXSI&&g.append(' xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance"');b&&!this.omitXSI&&g.append(' xsi:type="xsd:',isc.makeXMLSafe(b),'"');e||g.append(">");return g.toString()},isc.A.$36v=function(a,
b,c){if(b!=null&&isc.isAn.Object(c))c=this.$36x(c,b);this.$36w(a)||(a="Object");if(b){c=c||"schNS";return isc.SB.concat("</",c,":",a,">")}else return isc.SB.concat("</",a,">")},isc.A.$ex=function(a,b,c,d,e){if(c=="base64Binary")b='<xop:Include xmlns:xop="http://www.w3.org/2004/08/xop/include" href="'+b+'"/>';return isc.StringBuffer.concat(isc.Comm.$36u(a,c,d,e),b,isc.Comm.$36v(a,d,e))});isc.B._maxIndex=isc.C+9;isc.defineClass("XMLDoc").addMethods({addPropertiesOnCreate:false,init:function(a,b){this.nativeDoc=
a;this.namespaces=b;this.documentElement=this.nativeDoc.documentElement},hasParseError:function(){if(isc.Browser.isIE){var a=this.nativeDoc.parseError;return a!=null&&a!=0}return this.nativeDoc.documentElement&&this.nativeDoc.documentElement.tagName=="parsererror"},addNamespaces:function(a){this.namespaces=this.$363(a);if(this.$364)if(a=isc.xml.xmlResponses.find("ID",this.$364))a.xmlNamespaces=this.namespaces},$363:function(a){if(a==null)return this.namespaces;if(this.namespaces==null)return a;return isc.addProperties({},
this.namespaces,a)},selectNodes:function(a,b,c){return isc.xml.selectNodes(this.nativeDoc,a,this.$363(b),c)},selectString:function(a,b){return isc.xml.selectString(this.nativeDoc,a,this.$363(b))},selectNumber:function(a,b){return isc.xml.selectNumber(this.nativeDoc,a,this.$363(b))},selectScalar:function(a,b,c){return isc.xml.selectScalar(this.nativeDoc,a,this.$363(b),c)},selectScalarList:function(a,b){return isc.xml.selectScalarList(this.nativeDoc,a,this.$363(b))},getElementById:function(a){return this.nativeDoc.getElementById(a)},
getElementsByTagName:function(a){return this.nativeDoc.getElementsByTagName(a)}});isc.XMLDoc.getPrototype().toString=function(){return"[XMLDoc <"+this.documentElement.tagName+">]"};isc.defineClass("XMLTools").addClassProperties({httpProxyURL:"[ISOMORPHIC]/HttpProxy"});isc.A=isc.XMLTools;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.xmlResponses=[];isc.A.$365=0;isc.A.xmlDOMConstructors=["MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"];isc.A.mozAnchorBug=
isc.Browser.isMoz&&isc.Browser.geckoVersion<20080205&&window.location.href.indexOf("#")!=-1;isc.A.$pa="*";isc.A.$366=":";isc.A.$27c="List";isc.A.$45s="xmlToJS";isc.A.$45t="type";isc.A.$367="xsi:type";isc.A.$71v="ref";isc.A.$gy="number";isc.A.$71f="xmlns:";isc.A.$45u={nil:"xsi:nil","null":"xsi:null",type:"xsi:type"};isc.A.xsiNamespaces=["http://www.w3.org/2001/XMLSchema-instance","http://www.w3.org/1999/XMLSchema-instance"];isc.A.$45v="nil";isc.A.$45w="null";isc.A.$18r="false";isc.A.$w0="0";isc.A.$ho=
"[";isc.A.useClientXML=true;isc.B.push(isc.A.loadXML=function(a,b,c){c=c||{};c.operationType=c.operationType||"loadXML";this.getXMLResponse(isc.addProperties({actionURL:a,httpMethod:"GET",callback:b},c))},isc.A.getXMLResponse=function(a){a.$37b=a.callback;a.callback={target:this,methodName:"$37c"};a.httpMethod=a.httpMethod||"POST";this.logInfo("loading XML from: "+a.actionURL,"xmlComm");isc.rpc.sendProxied(a)},isc.A.$37c=function(a,b,c){if(a.isStructured)this.fireCallback(c.$37b,"xmlDoc,xmlText,rpcResponse,rpcRequest",
[null,null,a,c]);else{b=a.httpResponseText;var d=this.parseXML(b);if(this.logIsInfoEnabled("xmlComm"))this.logInfo("XML reply with text: "+(this.logIsDebugEnabled("xmlComm")?b:this.echoLeaf(b)),"xmlComm");var e=this.xmlResponses,f=isc.Log.logViewer;if(this.logIsDebugEnabled("xmlComm")||isc.Page.isLoaded()&&f&&f.logWindowLoaded()){var g=this.$365++;e.add({ID:g,text:b});if(d)d.$364=g;e.length>10&&e.shift();f&&f.logWindowLoaded()&&f._logWindow!=null&&f._logWindow.updateCommWatcher()}else e.length=0;
this.fireCallback(c.$37b,"xmlDoc,xmlText,rpcResponse,rpcRequest",[d,b,a,c])}},isc.A.parseXML=function(a,b){if(a!=null){a=this.trimXMLStart(a);var c;if(!isc.Browser.isIE){try{if((this.mozAnchorBug||this.useAnchorWorkaround)&&this.useAnchorWorkaround!==false){isc.Page.isLoaded()?isc.Element.insertAdjacentHTML(document.getElementsByTagName("body")[0],"beforeEnd","<IFRAME STYLE='position:absolute;visibility:hidden;top:-1000px' ID='isc_parseXMLFrame'></IFRAME>"):document.write("<IFRAME STYLE='position:absolute;visibility:hidden;top:-1000px' ID='isc_parseXMLFrame'></IFRAME>");
var d=document.getElementById("isc_parseXMLFrame"),e=d.contentWindow;window.isc.xmlSource=a;e.location.href="javascript:top.isc.parsedXML=new top.isc.XMLTools.getXMLParser().parseFromString(top.isc.xmlSource, 'text/xml')";c=window.isc.parsedXML;isc.xmlSource=isc.parsedXML=null;d.parentNode.removeChild(d)}else c=this.getXMLParser().parseFromString(a,"text/xml")}catch(f){b||this.$37d(this.echo(f));return null}if(!b&&c.documentElement&&c.documentElement.tagName=="parsererror"){this.$37d(c.documentElement.textContent);
return null}return isc.XMLDoc.create(c)}if(c=this.getXMLParser()){c.loadXML(a);if(c.parseError!=0){c=c.parseError;b||this.$37d("\rReason: "+c.reason+"Line number: "+c.line+", character: "+c.linepos+"\rLine contents: "+c.srcText+(!isc.isA.emptyString(c.url)?"\rSource URL: "+c.url:""));return null}return isc.XMLDoc.create(c)}else this.$37a("XMLTools.parseXML()")}},isc.A.trimXMLStart=function(a){if(a.indexOf("<?xml")!=-1){var b=a.match(/^\s*<\?[^?]*\?>/);if(b)a=a.substring(b[0].length)}if(isc.Browser.isIE&&
a.indexOf("<!DOCTYPE")!=-1)if(b=a.match(/^\s*<!DOCTYPE .*>/))a=a.substring(b[0].length);return a},isc.A.$37d=function(a,b){this.logWarn("Error parsing XML: "+a+(this.logIsDebugEnabled("parseXML")?"\rXML was:\r"+b+"\rTrace:"+this.getStackTrace():""),"parseXML")},isc.A.getXMLParser=function(){if(!isc.Browser.isIE){if(!this.$37e)this.$37e=new DOMParser;return this.$37e}var a;if(this.$37f)a=new ActiveXObject(this.$37f);else{for(var b=0;b<this.xmlDOMConstructors.length;b++)try{var c=this.xmlDOMConstructors[b];
if(a=new ActiveXObject(c)){this.logInfo("Using XML DOM constructor: "+c);this.$37f=c;break}}catch(d){}a||this.logWarn("Couldn't create XML DOM parser - tried the following constructors: "+this.echoAll(this.xmlDOMConstructors))}return a},isc.A.nativeXMLAvailable=function(){if(isc.Browser.isSafari&&!isc.Browser.isApollo&&isc.Browser.safariVersion<522)return false;return this.$37e!=null||this.getXMLParser()!=null},isc.A.$37a=function(a){if(this.nativeXMLAvailable()||!this.logIsWarnEnabled())return false;
a="Feature "+a+" requires a native XML parser which is not available ";a+=isc.Browser.isSafari?"because this version of Safari does not support native XML processing.":"because ActiveX is currently disabled.";a+=" Please see the 'Features requiring ActiveX or Native support' topic in the client-side reference under Client Reference/System for more information";this.logWarn(a);return true},isc.A.serverToJS=function(a,b,c){isc.DMI.callBuiltin({methodName:"xmlToJS",callback:b,arguments:a,requestParams:{evalVars:c,
evalResult:true}})},isc.A.toJSCode=function(a,b){isc.DMI.callBuiltin("xmlToJS",a,b)},isc.A.elementToObject=function(a){if(a==null)return null;var b=this.getAttributes(a);a=a.getElementsByTagName(this.$pa);for(var c=0;c<a.length;c++){var d=a[c];b[d.tagName]=this.getElementText(d)}return b},isc.A.getLocalName=function(a){if(!isc.Browser.isIE){var b=a.localName;if(b==null)return a.nodeName;return b}a=a.nodeName;b=a.indexOf(this.$366);if(b!=-1)return a.substring(b+1);return a},isc.A.toJS=function(a,b,
c,d,e){if(a==null)return null;if(isc.isAn.XMLDoc(a))a=a.nativeDoc;if(a.documentElement)a=a.documentElement;e=e||isc.emptyObject;if(isc.isAn.Array(a)){for(var f=[],g=0;g<a.length;g++)f[g]=this.toJS(a[g],b,c,d,e);return f}var h;g=this.getExplicitType(a,d);if(d||!c||c&&isc.DS.get(g)==null){if(d){var i=this.isRefElement(a);if(i){i=isc.Canvas.getById(i);if(i!=null)return i}if((i=(i=this.firstElementChild(a))?this.isRefElement(i):null)&&this.getElementChildren(a).length==1){i=isc.Canvas.getById(i);if(i!=
null)return i}if(!g){i=a.tagName;if(i==this.$27c||isc.DS.get(i))g=a.tagName}}if(g!=null&&g==this.$27c){h=this.getElementChildren(a);return this.toJS(h,b,c,d,e)}if(g)if(isc.DS.get(g)!=null)c=isc.DS.get(g);else return isc.SimpleType.validateValue(g,this.getElementText(a))}if(c&&c.xmlToJS)return c.xmlToJS(a,e);if(this.elementIsNil(a))return null;if(c){h=b||c.getFieldNames();f={};for(g=0;g<h.length;g++){var j=h[g];i=c.getField(j);if(!(i==null||i.valueXPath==null&&i.getFieldValue==null)){i=c.getFieldValue(a,
j,i);if(i!=null){this.logIsDebugEnabled(this.$45s)&&this.logDebug("valueXPath / getFieldValue() field: "+c.ID+"."+j+" on element: "+this.echoLeaf(a)+" got value: "+i,"xmlToJS");f[j]=i}}}}f=this.getAttributes(a,b,f,c!=null,c);if(!this.$37g(f)&&!this.hasElementChildren(a))return this.getElementText(a);f[this.$367]&&f[this.$367]=="xsd:Object"&&delete f[this.$367];h=a.childNodes;this.logIsDebugEnabled(this.$45s)&&this.logDebug("using DataSource: "+c+" for complex element: "+this.echoLeaf(a)+" childNodes: "+
this.echoLeaf(h)+" has attributes: "+this.$37g(f),"xmlToJS");j=false;for(g=0;g<h.length;g++){var k=h[g],l=this.getLocalName(k);if(!this.isTextNode(k)){j=true;if(!(b&&!b.contains(l))){i=c?c.getField(l):null;if(!(i&&(i.valueXPath||i.getFieldValue))){if(this.logIsInfoEnabled(this.$45s))this.logInfo("dataSource: "+c+", field: "+this.echoLeaf(i)+(i!=null?" type: "+i.type:"")+", XML element: "+this.echoLeaf(k),"xmlToJS");var m=k;if(i&&i.multiple){k=this.getElementChildren(k);if(k.length>0)m=k}if(!c||i==
null||i.type==null){if(this.logIsDebugEnabled(this.$45s))this.logDebug("applying schemaless transform at: "+(c?c.ID:"[schemaless]")+"."+l,"xmlToJS");k=this.toJS(m,null,null,d,e)}else{k=c.getSchema(i.type);if(k!=null){k=this.toJS(m,null,k,d,i.propertiesOnly?{propertiesOnly:true}:e);this.logIsDebugEnabled(this.$45s)&&this.logDebug("complexType field: "+this.echoLeaf(i)+" got value: "+this.echoLeaf(k),"xmlToJS")}else{if(isc.isAn.Array(m)){k=[];for(var n=0;n<m.length;n++)k.add(c.validateFieldValue(i,
this.getElementText(m[n])))}else k=c.validateFieldValue(i,this.getElementText(m));this.logIsDebugEnabled(this.$45s)&&this.logDebug("simpleType field: "+this.echoLeaf(i)+" got value: "+this.echoLeaf(k),"xmlToJS")}}if(i&&i.multiple)if(k==null||isc.isA.emptyString(k))k=[];else isc.isAn.Array(k)||(k=[k]);if(f[l]){isc.isAn.Array(f[l])||(f[l]=[f[l]]);i&&i.multiple&&isc.isAn.Array(k)?f[l].addList(k):f[l].add(k)}else f[l]=k}}}}if(!j){a=this.getElementText(a);b=e.textContentProperty||(c?c.textContentProperty:
"xmlTextContent");if(c)if(i=c.getTextContentField())a=c.validateFieldValue(i,a);if(a!=null&&!isc.isAn.emptyString(a))f[b]=a}if(d&&c&&(c.instanceConstructor||c.Constructor)){c=c.instanceConstructor||c.Constructor;if(e!=null&&e.propertiesOnly)f._constructor=c;else if(isc.ClassFactory.getClass(c)!=null)return isc.ClassFactory.newInstance(c,f)}return f},isc.A.getExplicitType=function(a,b){if(!(a==null||this.isTextNode(a))){var c=this.getXSIAttribute(a,this.$45t);if(c){if(c.contains(isc.colon))c=c.substring(c.indexOf(isc.colon)+
1);return c}if(b)c=a.getAttribute("constructor");return c}},isc.A.isRefElement=function(a){if(a==null||this.isTextNode(a))return false;var b=a.getAttribute(this.$71v);if(b&&a.attributes.length==1&&!this.hasElementChildren(a))return b},isc.A.toComponents=function(a,b){isc.DS.get("Canvas")==null&&this.logWarn("Can't find schema for Canvas - make sure you've loaded component schema via <isomorphic:loadSystemSchema/> jsp tag or by some other mechanism");if(isc.isA.String(a)){var c=this.parseXML(a,true);
if(c.hasParseError()){this.logWarn("xml failed to parse xmlDoc, wrapping in root node");c=this.parseXML("<isomorphicXML>"+a+"</isomorphicXML>")}a=c}return this.toJS(a,null,null,true,b)},isc.A.getFieldValue=function(a,b,c,d,e){if(a.ownerDocument==null)return a[b];c=c||(d?d.getField(b):isc.emptyObject);try{var f;if(c.valueXPath){var g=d?d.getSchema(c.type):isc.DS.get(c.type);if(g){var h=isc.xml.selectNodes(a,c.valueXPath,e),i=isc.xml.toJS(h,null,g);if(!c.multiple&&i.length==1)i=i[0];return i}else f=
isc.xml.selectScalar(a,c.valueXPath,e)}else f=isc.xml.getXMLFieldValue(a,b);d=d||isc.DS.get("Object");return f=d.validateFieldValue(c,f)}catch(j){this.logWarn("error getting value for field: '"+b+(c.valueXPath?"', valueXPath: '"+c.valueXPath:"")+"' in record: "+this.echo(a)+"\r: "+this.echo(j)+this.getStackTrace());return null}},isc.A.getXMLFieldValue=function(a,b){var c=a.getAttribute(b);if(c!=null)return c;c=a.getElementsByTagName(b)[0];if(c==null)return null;return isc.Browser.isIE?c.text:c.textContent},
isc.A.$37g=function(a){for(var b in a)if(b!=this.$367)return true;return false},isc.A.getAttributes=function(a,b,c,d,e){c=c||{};if(b){isc.isAn.Array(b)||(b=[b]);for(var f=0;f<b.length;f++){var g=b[f];if(!(d&&c[g]!==void 0)){var h=a.getAttribute(g);if(!(h==null||isc.isAn.emptyString(h))){if(e&&e.getField(g))h=e.validateFieldValue(e.getField(g),h);c[g]=h}}}return c}a=a.attributes;if(a!=null)for(f=0;f<a.length;f++){h=a[f];g=h.name;if(!(d&&c[g]!==void 0))if(!(isc.startsWith(g,this.$71f)&&e&&e.dropNamespaceDeclarations)){h=
h.value;if(!(h==null||isc.isAn.emptyString(h))){if(e&&e.getField(g))h=e.validateFieldValue(e.getField(g),h);c[g]=h}}}return c},isc.A.getXSIAttribute=function(a,b){var c;if(isc.Browser.isOpera){for(var d=0;d<this.xsiNamespaces.length;d++){c=a.getAttributeNS(this.xsiNamespaces[d],b);if(c!=null)break}return c}return a.getAttribute(this.$45u[b])},isc.A.elementIsNil=function(a){if(a==null||!isc.isA.XMLNode(a)||a.nodeType!=1)return false;var b=this.getXSIAttribute(a,this.$45v);if(b&&b!=this.$18r&&b!=this.$w0)return true;
if((b=this.getXSIAttribute(a,this.$45w))&&b!=this.$18r&&b!=this.$w0)return true;return false},isc.A.getElementText=function(a){if(this.elementIsNil(a))return null;if(!a)return null;var b=a.firstChild;if(!b)return isc.emptyString;b=b.data;if(isc.Browser.isMoz&&b!=null&&b.length>4E3)return a.textContent;return b},isc.A.isTextNode=function(a){if(a==null)return false;a=a.nodeType;return a==3||a==4||a==8},isc.A.hasElementChildren=function(a){return this.firstElementChild(a)!=null},isc.A.firstElementChild=
function(a){if(a==null||a.hasChildNodes!=null&&a.hasChildNodes()==false)return null;a=a.childNodes;if(!a)return null;for(var b=a.length,c=0;c<b;c++){var d=a[c];if(!this.isTextNode(d))return d}return null},isc.A.setAttributes=function(a,b){for(var c in b)b[c]==null?a.removeAttribute(c):a.setAttribute(c,b[c])},isc.A.$37h=function(a,b){var c=isc.SB.create(),d=a.documentElement;b=b||isc.emptyObject;if(!b["default"])(d=this.$45x(d))&&c.append('xmlns:default="',d,'" ');d=a.documentElement.attributes;for(var e=
0;e<d.length;e++){var f=d[e],g=f.prefix;g=="xmlns"&&g!=f.name&&b[f.baseName]==null&&c.append(f.name,'="',f.value,'" ')}return c.toString()},isc.A.$45x=function(a){var b=this.logIsDebugEnabled("xmlSelect");if((a.prefix==null||isc.isAn.emptyString(a.prefix))&&a.namespaceURI){b&&this.logWarn("using docElement ns, prefix: "+a.prefix,"xmlSelect");return a.namespaceURI}else if(a.firstChild){for(var c,d=0;d<a.childNodes.length;d++){var e=a.childNodes[d];if(e.nodeType!=3){if(!e.namespaceURI)break;if(e.prefix==
null||isc.isAn.emptyString(e.prefix)){c=e.namespaceURI;break}}}c!=null&&b&&this.logDebug("using default namespace detected on child: "+c,"xmlSelect");if(c==null&&a.namespaceURI){c=a.namespaceURI;b&&this.logDebug("using document element's namespace as default namespace: "+c,"xmlSelect")}c||(c="http://openuri.org/defaultNamespace");return c}},isc.A.selectObjects=function(a,b,c){if(isc.contains("|")){b=b.split(/|/);c=[];for(var d=0;d<b.length;d++)c.addList(this.selectObjects(b[d],a));return c}a=isc.isAn.Array(a)?
a:[a];if(b!=isc.slash){if(isc.startsWith(b,isc.slash))b=b.substring(1);a=this.$37i(b.split(/[\/@]/),a,isc.slash)}if(c&&a.length<=1)return a[0];return a},isc.A.$37i=function(a,b,c){var d=a[0];a=a.length>1?a.slice(1):null;if(b==null)return null;var e,f=d,g=d.indexOf(this.$ho);if(g!=-1){f=d.substring(0,g);e=d.substring(g+1,d.length-1)}g=[];for(var h=0;h<b.length;h++){var i=b[h];if(f!=isc.star)i=i[f];else{var j=isc.getValues(i);i=[];for(h=0;h<j.length;h++)isc.isAn.Array(j[h])?i.addList(j[h]):i.add(j[h])}if(i!=
null)isc.isAn.Array(i)?g.addList(i):g.add(i)}if(e)g=this.$37j(g,e);if(a==null||a.length==0)return g;c+=d+isc.slash;return this.$37i(a,g,c)},isc.A.$37j=function(a,b){var c=parseInt(b);if(!isNaN(c))return[a[c-1]];if(b=="last()")return[a.last()];c=b.match(/^([a-zA-Z_0-9:\-\.\(\)]*)\s*(<|>|!=|=|<=|>=|)\s*(.*)$/);var d,e,f;if(c==null){if(!b.match(/^[a-zA-Z_0-9:\-\.]*$/)){this.logWarn("couldn't parse predicate expression: "+b);return null}d=b}else{d=c[1];e=c[2];f=c[3]}if(e=="=")e="==";if(f=="true()")f=
true;else if(f=="false()")f=false;if(d=="position()")d="position";e=new Function("item,position","return "+(d!="position"?"item.":"")+d+(e?e+f:""));f=[];for(c=0;c<a.length;c++)e(a[c],c+1)&&f.add(a[c]);return f},isc.A.selectNodes=function(a,b,c,d){if(isc.isA.String(a))a=this.parseXML(a);if(isc.Browser.isSafari&&(isc.Browser.isApollo||isc.Browser.safariVersion<522)){this.$37a("XPath");return this.safariSelectNodes(a,b,c,d)}if(isc.isAn.XMLDoc(a))return a.selectNodes(b,c,d);var e=isc.timestamp();a=this.$37k(a,
b,c,d);c=isc.timestamp();this.logIsInfoEnabled("xmlSelect")&&this.logInfo("selectNodes: expression: "+b+" returned "+this.echoLeaf(a)+": "+(c-e)+"ms","xmlSelect");return a},isc.A.safariSelectNodes=function(a,b){var c=[];if(!b)return null;var d=b.substring(b.indexOf(":")+1),e;if(d.endsWith("/*")){e=true;d=d.substring(0,d.indexOf("/*"))}d=a.getElementsByTagName(d);if(e&&d.length>0)d=d[0].childNodes;for(var f=0;f<d.length;f++)d[f].nodeType!=3&&c.add(d[f]);if(e&&c.length==1)c=c[0];return c},isc.A.$37l=
function(a,b,c){if(a==null)return isc.emptyString;if(b==null)b=isc.getKeys(a);var d=isc.SB.create();c=c!=null?"\n"+c:"";for(var e=0;e<b.length;e++){var f=b[e];d.append(c," xmlns:",f,'="',a[f],'"')}return d.toString()},isc.A.$53z=function(a){var b=a.lookupNamespaceURI("");if(isc.Browser.isSafari&&(b==null||b==""))b=a.getAttribute("xmlns");if(b==null)b=a.namespaceURI;if(b==null)b="";return b},isc.A.$37k=function(a,b,c,d){if(a!=null){var e=a.ownerDocument;if(e==null&&a.documentElement){e=a;a=e.documentElement}if(e==
null)return null;if(isc.Browser.isIE){if(isc.Browser.version>5.5){e.setProperty("SelectionLanguage","XPath");var f=this.$37h(e,c);if(c)f+=this.$37l(c);this.logIsDebugEnabled("xmlSelect")&&this.logDebug("selectNodes: expression: "+b+", using namespaces: "+f,"xmlSelect");e.setProperty("SelectionNamespaces",f)}if(d)return a.selectSingleNode(b);return this.$37m(a.selectNodes(b))}var g=e.createNSResolver(e.documentElement),h=this.$53z(e.documentElement);this.logIsDebugEnabled("xmlSelect")&&this.logDebug("Using namespaces: "+
isc.echo(c)+", defaultNamespace: '"+h+"'","xmlSelect");a=e.evaluate(b,a,function(i){if(c&&c[i])return c[i];if(i=="default")return h;return g.lookupNamespaceURI(i)},0,null);if(d)return a.iterateNext();return this.$37m(a)}},isc.A.$37m=function(a){var b=[];if(isc.Browser.isIE||a.iterateNext==null)for(var c=0;c<a.length;c++)b.add(a.item(c));else for(;c=a.iterateNext();)b.add(c);return b},isc.A.getElementChildren=function(a){var b=[];a=a.childNodes;for(var c=0;c<a.length;c++){var d=a[c];this.isTextNode(d)||
b.add(d)}return b},isc.A.selectString=function(a,b,c){return this.selectScalar(a,b,c)},isc.A.selectNumber=function(a,b,c){return this.selectScalar(a,b,c,true)},isc.A.selectScalar=function(a,b,c,d){if(isc.isA.String(a))a=this.parseXML(a);if(isc.isAn.XMLDoc(a))return a.selectScalar(b,c,d);if(isc.Browser.isSafari&&isc.Browser.isApollo||isc.Browser.safariVersion<522){b=b.substring(b.indexOf(":")+1);a=a.getElementsByTagName(b)[0]}else a=this.selectNodes(a,b,c,true);if(a==null)return null;a=this.getElementText(a);
return d?parseInt(a):a},isc.A.selectScalarList=function(a,b,c){if(isc.isA.String(a))a=this.parseXML(a);if(isc.isAn.XMLDoc(a))return a.selectScalarList(b,c);a=this.selectNodes(a,b,c);for(b=0;b<a.length;b++)a[b]=a[b].nodeValue;return a},isc.A.transformNodes=function(a,b){if(isc.isAn.XMLDoc(a))a=a.nativeDoc;if(isc.isAn.XMLDoc(b))b=b.nativeDoc;if(isc.Browser.isIE)return a.transformNode(b);var c=new XSLTProcessor;c.importStylesheet(b);if(isc.Browser.isMoz&&this.mozAnchorBug&&isc.Browser.geckoVersion<20051107){var d=
document.implementation.createDocument("","test",null);c=c.transformToFragment(a,d);return(new XMLSerializer).serializeToString(c)}c=c.transformToDocument(a);return(new XMLSerializer).serializeToString(c)},isc.A.serializeToString=function(a){this.$37n=this.$37n||isc.xml.parseXML('<xsl:stylesheet version=\'1.0\' xmlns:xsl=\'http://www.w3.org/1999/XSL/Transform\'>\r<xsl:output method="xml" indent="yes"/>\r<xsl:strip-space elements="*"/>\r<xsl:template match="/">\r  <xsl:copy-of select="."/>\r</xsl:template>\r</xsl:stylesheet>');
return this.transformNodes(a,this.$37n)},isc.A.loadXMLSchema=function(a,b,c,d,e){c=c||{};c.operationType=c.operationType||"loadXMLSchema";this.loadWSDL(a,b,c,d,e,true)},isc.A.loadWSDL=function(a,b,c,d,e,f){if(this.$37o){c=c||{};c.operationType=c.operationType||"loadWSDL";var g={location:a,callback:b,autoLoadImports:d,wsProperties:e||{},returnSchemaSet:f};isc.xml.loadXML(a,function(i,j,k,l){g.rpcResponse=k;g.rpcRequest=l;isc.xml.$37p(i,g)},c)}else{var h=isc.Page.getIsomorphicClientDir()+"schema/schemaTranslator.xsl";
h=h.replace(/https?:\/\/[^\/]*\//,"/");this.$37o="LOADING";isc.xml.loadXML(h,function(i,j,k){isc.xml.logDebug("schema translator loaded");isc.xml.$37o=isc.Browser.isMoz&&k.xmlHttpRequest&&k.xmlHttpRequest.responseXML?isc.XMLDoc.create(k.xmlHttpRequest.responseXML):i;isc.xml.loadWSDL(a,b,c,d,e,f)})}},isc.A.loadWSDLFromXML=function(a,b,c,d,e){if(isc.isA.String(a))a=isc.xml.parseXML(a);this.$37p(a,{callback:b,autoLoadImports:c,wsProperties:d,returnSchemaSet:e})},isc.A.$37p=function(a,b){if(isc.isAn.XMLDoc(this.$37o)){this.logInfo("transforming schema: "+
this.echoLeaf(a)+" with translator "+this.echoLeaf(this.$37o),"xmlComm");var c=this.transformNodes(a,this.$37o);this.logIsDebugEnabled("xmlComm")&&this.logWarn("XML service definition is: \n"+c);var d=b.wsProperties,e=d.initiator;if(d.captureXML){d.xmlSource=c;e&&e.addImportXMLSource(c,b.location)}if(this.useClientXML){a=isc.xml.parseXML(c);this.toJS(this.$37m(a.documentElement.childNodes),null,null,true);this.$37q(b)}else{this.logInfo("about to call serverToJS with: "+this.echoLeaf(c)+", callback: "+
this.echo(b.callback),"xmlComm");this.serverToJS(c,function(){isc.Log.logWarn("serverToJS returned");isc.xml.$37q(b)})}}else{this.logInfo("deferred schema translator, schema translator not loaded","xmlComm");isc.Timer.setTimeout({methodName:"$37p",target:this,args:[a,b]})}},isc.A.$37q=function(a){var b;b=a.returnSchemaSet?isc.SchemaSet.$37r:isc.WebService.$37r||isc.SchemaSet.$37r;isc.WebService.$37r=isc.SchemaSet.$37r=null;b.location=a.location;a.wsProperties&&b.setProperties(a.wsProperties);var c=
(isc.isA.WebService(b)?"service":"schemaSet")+",rpcRequest",d=[b,a.rpcRequest];if(a.autoLoadImports&&b.loadImports){var e=this;b.loadImports(function(){e.$41k(a.callback,c,d)})}else this.$41k(a.callback,c,d)},isc.A.$41k=function(a,b,c){this.fireCallback(a,b,c)},isc.A.getCompleteSource=function(a,b,c){var d=a.importSources;if(!d)return"";d=d.getProperty("xmlText");d.unshift(a.xmlSource);d=this.map("trimXMLStart",d);a=d.join("\n");c?this.fireCallback(b,"source",[a]):this.toJSCode(a,function(e,f){this.fireCallback(b,
"source",[f])})});isc.B._maxIndex=isc.C+53;isc.xml=isc.XML=isc.XMLTools;isc.defineClass("DataSource");isc.DS=isc.DataSource;isc.A=isc.DataSource;isc.A.dataSourceObjectSuffix="DS";isc.A._dataSources={};isc.A.$54v={};isc.A.$54w={};isc.A.$532="element";isc.A.$45t="type";isc.A.TABLE="table";isc.A.VIEW="view";isc.A.loaderURL="[ISOMORPHIC]/DataSourceLoader";isc.A.$37t="<soap:Envelope xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/' ";isc.A.$37w="</soap:Envelope>";isc.A.$37u="<soap:Header>";isc.A.$51y=
"</soap:Header>";isc.A.$37v="<soap:Body";isc.A.$51z="</soap:Body>";isc.A=isc.DataSource;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$748="ref:";isc.A.serializeTimeAsDatetime=false;isc.A.$78d=[];isc.A.maxResponsesToCache=100;isc.A.offlineMessage="This data not available while offline";isc.B.push(isc.A.isLoaded=function(a){if(!a)return false;if(isc.isA.DataSource(a)||this._dataSources[a])return true;return false},isc.A.getDataSource=function(a,b,c,
d){if(!a)return null;if(isc.isA.DataSource(a))return a;if(isc.startsWith(a,this.$748))a=a.substring(4);if(d&&isc.WebService){if(d==isc.DS.$532)return this.$54v[a];if(d==isc.DS.$45t)return this.$54w[a];return null}d=this._dataSources[a];if(!d)if(d=this.$37x(a,b))d.ID=a;if(d){b&&this.fireCallback(b,"ds",[d],d);return d}b&&this.loadSchema(a,b,c);return null},isc.A.loadSchema=function(a){this.logWarn("Attempt to load schema for DataSource '"+a+"'. This dataSource cannot be found. To load DataSources from the server without explicit inclusion in your application requires optional SmartClient server support - not present in this build.");
return null},isc.A.get=function(a,b,c,d){return this.getDataSource(a,b,c,d)},isc.A.$37x=function(a,b){if(b)return null;a!=isc.auto&&this.logIsDebugEnabled()&&this.logDebug("isc.DataSource '"+a+"' not present");return null},isc.A.getRegisteredDataSources=function(){return isc.getKeys(this._dataSources)},isc.A.isRegistered=function(a){if(this._dataSources[a])return true;return false},isc.A.getForeignFieldName=function(a){a=a.foreignKey;var b=a.indexOf(".");if(b==-1)return a;return a.substring(b+1)},
isc.A.getForeignDSName=function(a,b){var c=a.foreignKey,d=c.indexOf(".");if(d==-1)return isc.isA.String(b)?b:b.ID;return c.substring(0,d)},isc.A.registerDataSource=function(a){this.logIsInfoEnabled()&&this.logInfo("Registered new isc.DataSource '"+a.ID+"'");if(a.ID)if(!this._dataSources[a.ID]||!a.schemaNamespace)this._dataSources[a.ID]=a;if(isc.Schema&&isc.isA.Schema(a))if(isc.isAn.XSElement(a))this.$54v[a.ID]=a;else{if(isc.isAn.XSComplexType(a))this.$54w[a.ID]=a}else{var b=a.getLocalFields(true),
c=this.$37z=this.$37z||{},d;for(d in b){var e=b[d];if(e.foreignKey!=null){e=this.getForeignDSName(e,a);if(isc.DS.isRegistered(e))isc.DS.get(e).addChildDataSource(a);else{if(c[e]==null)c[e]=[];c[e].add(a)}}}b=c[a.ID];if(b!=null){a.map("addChildDataSource",b);c[a.ID]=null}d=this.$370=this.$370||{};if(a.childRelations)for(c=0;c<a.childRelations.length;c++){b=a.childRelations[c];e=b.dsName;var f=isc.DS.get(e);if(f)this.$371(a,f,b);else{if(d[e]==null)d[e]=[];b.parentDS=a.ID;d[e].add(b)}}if(d=d[a.ID])for(c=
0;c<d.length;c++){b=d[c];this.$371(isc.DS.get(b.parentDS),a,b)}}},isc.A.$371=function(a,b,c){a.addChildDataSource(b);if(c.fieldName){b=b.getField(c.fieldName);if(!b.foriegnKey)b.foreignKey=a.ID+"."+a.getPrimaryKeyFieldNames()[0]}},isc.A.getInheritanceDistance=function(a,b){var c=isc.ClassFactory.getClass(a),d=isc.ClassFactory.getClass(b);if(c==null||d==null){this.logWarn("Invalid superclass and/or subclass argument provided");return-1}if(!d.isA(a)){this.logWarn(b+" is not a subclass of "+a);return-1}for(var e=
0;d!=c;e++)d=d.getSuperClass();return e},isc.A.isSimpleTypeValue=function(a){if(a!=null&&(!isc.isAn.Object(a)||isc.isA.Date(a)))return true;return false},isc.A.getNearestSchema=function(a){if(a==null)return null;var b;b=isc.isA.String(a)?a:isc.isAn.Instance(a)?a.getClassName():a._constructor||a.type||a.$schemaId;a=isc.DS.get(b);b=isc.ClassFactory.getClass(b);if(b!=null)for(var c=null;a==null&&(b=b.getSuperClass())!=null&&b!=c;){a=isc.DS.get(b.getClassName());c=b}return a||isc.DS.get("Object")},isc.A.getNearestSchemaClass=
function(a){if(a==null)return null;for(var b;b==null;){a=isc.DS.get(a);if(a==null)break;b=isc.ClassFactory.getClass(a._constructor||a.Constructor||a.type);if(b!=null)return b;a=a.inheritsFrom;if(!a)break}return null},isc.A.$372=function(a){switch(a){case "fetch":case "select":case "filter":return"fetch";case "add":case "insert":return"add";case "update":return"update";case "remove":case "delete":return"remove";default:return a}},isc.A.isClientOnly=function(a){if(isc.isA.String(a))a=this.getDataSource(a);
if(!a)return false;return a.clientOnly},isc.A.makeDefaultOperation=function(a,b,c){var d=isc.rpc.app();if(isc.isA.DataSource(a))a=a.ID;if(a){if(c){var e=isc.DataSource.get(a);if(isc.isA.DataSource(e)){if(!e.createdOperations)e.createdOperations={};var f=e.createdOperations[c];if(f==null){f={ID:c,dataSource:a,type:b,filterType:"paged",loadDataOnDemand:true};return e.createdOperations[c]=f}}}}else a="auto";if(d.operations==null)d.operations={};c=c||a+"_"+b;f=d.operations[c];if(f==null){f={ID:c,dataSource:a,
type:b,filterType:"paged",loadDataOnDemand:true,source:"auto"};d.operations[c]=f}return f},isc.A.handleUpdate=function(a,b){this.isUpdateOperation(b.operationType)&&this.get(b.dataSource).updateCaches(a,b)},isc.A.isUpdateOperation=function(a){if(a=="add"||a=="update"||a=="remove"||a=="replace"||a=="delete"||a=="insert")return true},isc.A.getUpdatedData=function(a,b,c){return this.get(a.dataSource).getUpdatedData(a,b,c)},isc.A.filterCriteriaForFormValues=function(a){var b={},c;for(c in a){var d=a[c];
if(!(d==null||isc.is.emptyString(d))){if(isc.isAn.Array(d)){if(d.length==0)continue;for(var e=0;e<d.length;e++)isc.isAn.emptyString(d[e])}b[c]=d}}return b},isc.A.checkEmptyCriteria=function(a){if(a.criteria){if(a.criteria.length==0)return null;for(var b=a.criteria.length;b>=0;b--){var c=a.criteria[b],d=false;if(c)if(c.criteria)if(c=this.checkEmptyCriteria(c))a.criteria[b]=c;else d=true;else{if(isc.isA.emptyObject(c))d=true}else d=true;d&&a.criteria.removeAt(b)}}if(a.criteria&&a.criteria.length==0)return null;
return a},isc.A.load=function(a,b,c){isc.isAn.Array(a)||(a=[a]);if(a.length<=0)this.logWarn("No DataSource IDs passed in.");else{for(var d=[],e=0;e<a.length;e++)if(!this.isLoaded(a[e])||c)d.add(a[e]);c=d.join(",");c=isc.DataSource.loaderURL+"?dataSource="+c;var f=a;if(d.length>0)isc.RPCManager.send(null,function(g,h){if(g.httpResponseCode==404){isc.warn("The DataSourceLoader servlet is not installed.");return null}eval(h);b&&this.fireCallback(b,["dsID"],[f])},{actionURL:c,httpMethod:"GET",willHandleError:true});
else{this.logWarn("DataSource(s) already loaded: "+a.join(",")+"\nUse forceReload to reload such DataSources");b&&this.fireCallback(b,["dsID"],[f])}}},isc.A.getSortBy=function(a){isc.isA.Array(a)||(a=[a]);for(var b=[],c=0;c<a.length;c++){var d=a.get(c);b.add((d.direction=="descending"?"-":"")+d.property)}return b},isc.A.getSortSpecifiers=function(a){isc.isA.Array(a)||(a=[a]);for(var b=[],c=0;c<a.length;c++){var d=a.get(c),e="ascending",f=d;if(d.substring(0,1)=="-"){e="descending";f=d.substring(1)}b.add({property:f,
direction:e})}return b},isc.A.isAdvancedCriteria=function(a,b){if(!a)return false;if(!b)return a&&a._constructor=="AdvancedCriteria";isc.isA.DataSource(b)||(b=this.get(b));if(a._constructor=="AdvancedCriteria")return true;if(b.getField("fieldName")||b.getField("operator"))return false;if(b.getField(a.fieldName)&&b.getSearchOperator(a.operator))return true;if(a.fieldName&&a.value&&a.operator&&b.getSearchOperator(a.operator))return true;if(a.operator!=void 0){var c=b.getSearchOperator(a.operator);if(c!=
null&&(c.isAnd||c.isOr))return true}return false},isc.A.getCriteriaFields=function(a,b){if(b&&!isc.isA.DataSource(b))b=this.get(b);if(b?b.isAdvancedCriteria(a):this.isAdvancedCriteria(a)){var c=[];this.$74s(a,c);return c}return isc.getKeys(a)},isc.A.$74s=function(a,b){if(a.criteria)for(var c=0;c<a.criteria.length;c++)isc.DS.$74s(a.criteria[c],b);else b.add(a.fieldName)},isc.A.cacheResponse=function(a,b){if(isc.Offline){var c=isc.Offline.serialize(isc.Offline.trimRequest(a)),d=this.$78d.findIndex("requestKey",
c);if(d!=-1)this.$78d.set(d,b);else{this.$78d.length>=this.maxResponsesToCache&&this.$78d.removeAt(0);this.$78d.add({requestKey:c,dsResponse:b})}}},isc.A.getCachedResponse=function(a){if(isc.Offline)return this.$78d.find("requestKey",isc.Offline.serialize(isc.Offline.trimRequest(a)));return null});isc.B._maxIndex=isc.C+31;isc.A=isc.DataSource.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.addGlobalId=true;isc.A.dataFormat="iscServer";
isc.A.callbackParam="callback";isc.A.preventHTTPCaching=true;isc.A.sendExtraFields=true;isc.A.transformResponseToJS=true;isc.A.supportsRequestQueuing=true;isc.A.copyLocalResults=true;isc.A.criteriaPolicy="dropOnShortening";isc.A.showPrompt=true;isc.A.autoDeriveTitles=true;isc.A.canMultiSort=true;isc.A.nullStringValue="";isc.A.nullIntegerValue=0;isc.A.nullFloatValue=0;isc.A.nullBooleanValue=false;isc.A.nullDateValue=new Date(0);isc.A.cacheMaxAge=60;isc.A.cacheLastFetchTime=0;isc.A.autoCacheAllData=
false;isc.A.autoConvertRelativeDates=true;isc.B.push(isc.A.setCacheAllData=function(a){if(a){this.logIsInfoEnabled("cacheAllData")&&this.logInfo("setCacheAllData(true): invalidate the cache","cacheAllData");this.cacheAllData=true;this.invalidateCache()}else if(this.cacheAllData==true){this.logIsInfoEnabled("cacheAllData")&&this.logInfo("setCacheAllData(false): clearing the cache and any deferred requests","cacheAllData");this.cacheAllData=false;this.invalidateCache();this.clearDeferredRequests()}},
isc.A.cacheNeedsRefresh=function(){var a=((new Date).getTime()-this.cacheLastFetchTime)/1E3;a=this.cacheLastFetchTime==0||a>this.cacheMaxAge;this.logIsInfoEnabled("cacheAllData")&&this.logInfo("cacheNeedsRefresh returns "+a,"cacheAllData");return a},isc.A.setCacheData=function(a,b){if(this.cacheAllData||this.clientOnly){if(b){this.logIsInfoEnabled("cacheAllData")&&this.logInfo("setCacheData: invalidating the cache","cacheAllData");this.invalidateCache();this.clearDeferredRequests()}this.cacheData=
this.testData=a;this.logIsInfoEnabled("cacheAllData")&&this.logInfo("setCacheData: cacheData has been set","cacheAllData")}},isc.A.clearDeferredRequests=function(a){if(this.$498){a=a||"any";isc.isAn.Array(a)||(a=[a]);this.logIsInfoEnabled("cacheAllData")&&this.logInfo("clearDeferredRequests: "+this.$498.length+" requests, clearing those of type "+isc.echoAll(a),"cacheAllData");if(a.contains("any"))delete this.$498;else if(this.$498){for(var b=this.$498,c=b.length;c>=0;c--)a.contains(b[c].operationType||
"fetch")&&this.$498.removeAt(c);this.$498.length==0&&delete this.$498}}},isc.A.processDeferredRequests=function(){if(this.$498){this.logIsInfoEnabled("cacheAllData")&&this.logInfo("processDeferredRequests: processing "+this.$498.length+" deferred requests","cacheAllData");var a=this.$498;this.clearDeferredRequests();for(var b=0;b<a.length;b++)this.sendDSRequest(a[b])}},isc.A.invalidateCache=function(){if(this.cacheAllData||this.clientOnly){this.logIsInfoEnabled("cacheAllData")&&this.logInfo("invalidateCache: invalidating client-side cache",
"cacheAllData");delete this.cacheData;delete this.testData;this.cacheLastFetchTime=0;if(this.cacheResultSet){this.cacheResultSet.destroy();delete this.cacheResultSet}}},isc.A.setClientOnly=function(a){if(a){this.clientOnly=true;if(this.cacheAllData){if(this.cacheResultSet){this.logIsInfoEnabled("cacheAllData")&&this.logInfo("setClientOnly: sourcing from client-cache","cacheAllData");this.cacheData=this.testData=this.cacheResultSet.getAllRows()}}else{this.clearDeferredRequests();this.invalidateCache();
this.performDSOperation("fetch")}}},isc.A.hasAllData=function(){return this.cacheResultSet?this.cacheResultSet.lengthIsKnown():false},isc.A.convertRelativeDates=function(a,b,c,d){if(!a)return null;if(!this.isAdvancedCriteria(a)&&a.operator==null)return a;var e=isc.clone(a);d=d||new Date;if(c==null)c=isc.DateChooser?isc.DateChooser.firstDayOfWeek:0;if(e.criteria&&isc.isAn.Array(e.criteria))for(var f=e.criteria,g=f.length-1;g>=0;g--){var h=f[g];if(h)if(h.criteria&&isc.isAn.Array(h.criteria)){this.logIsInfoEnabled("relativeDates")&&
this.logInfo("Calling convertRelativeDates from convertRelativeDates - data is:\n\n"+isc.echoFull(h)+"\n\ncriteria is: \n\n"+isc.echoFull(a),"relativeDates");e.criteria[g]=this.convertRelativeDates(h,b,c,d);this.logIsInfoEnabled("relativeDates")&&this.logInfo("Called convertRelativeDates from convertRelativeDates - data is\n\n"+isc.echoFull(e.criteria[g]),"relativeDates")}else e.criteria[g]=this.mapRelativeDate(h,d);else{this.logIsInfoEnabled("relativeDates")&&this.logInfo("Removing NULL subcriteria...",
"relativeDates");e.criteria.removeAt(g)}}else e=this.mapRelativeDate(e,d);this.logIsInfoEnabled("relativeDates")&&this.logInfo("Returning from convertRelativeDates - result is:\n\n"+isc.echoFull(e)+"\n\noriginal criteria is: \n\n"+isc.echoFull(a),"relativeDates");return e},isc.A.mapRelativeDate=function(a,b){var c=isc.addProperties({},a),d;b=b||new Date;if(c.value&&isc.isAn.Object(c.value)&&c.value._constructor=="RelativeDate"){d=c.value.value;c.value=isc.RelativeDateItem.getAbsoluteDate(d,b)}else{if(c.start&&
isc.isAn.Object(c.start)&&c.start._constructor=="RelativeDate"){d=c.start.value;if(d=="$today")d="$startOfToday";c.start=isc.RelativeDateItem.getAbsoluteDate(d,b)}if(c.end&&isc.isAn.Object(c.end)&&c.end._constructor=="RelativeDate"){d=c.end.value;if(d=="$today")d="$endOfToday";c.end=isc.RelativeDateItem.getAbsoluteDate(d,b)}}return c});isc.B._maxIndex=isc.C+10;isc.A=isc.DataSource.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$41v="Action";
isc.A.resultBatchSize=150;isc.A.$2j=[];isc.A.canExport=true;isc.A.textContentProperty="xmlTextContent";isc.A.$dq="Defaults";isc.A.$dr="Properties";isc.A.$375="name";isc.A.$45t="type";isc.A.dropUnknownCriteria=true;isc.A.$45y="startsWith";isc.A.$19q="substring";isc.A.$50i="exact";isc.A.$50j="iscServer";isc.B.push(isc.A.init=function(){if(this.serverType=="sql")this.dataFormat="iscServer";if(this.dataFormat=="iscServer"&&(this.serviceNamespace!=null||this.recordXPath!=null))this.dataFormat="xml";this.canQueueRequests=
this.dataFormat=="iscServer"||this.clientOnly;if(this.testData&&!this.cacheData)this.cacheData=this.testData;else if(this.clientOnly&&this.cacheData&&!this.testData)this.testData=this.cacheData;if(this.ID==null&&this.id!=null)this.ID=this.id;if(this.name==null)this.name=this.ID;var a=isc.DS.get(this.ID);if(a&&a.builtinSchema)return a;a=window[this.ID];if(this.addGlobalId&&this.addGlobalId!=isc.$ae&&(!a||!isc.isA.ClassObject(a)&&isc.isA.DataSource(a)))isc.ClassFactory.addGlobalID(this);a=this.fields;
if(isc.isAn.Array(a)){for(var b={},c=0;c<a.length;c++){var d=a[c];if(d.includeFrom!=null){var e=d.includeFrom.split(".");if(e==null||e.length!=2){this.logWarn("Field has includeFrom specified as :"+d.includeFrom+" format not understood - clearing this property");d.includeFrom=null}else if(d.name==null)d.name=e[1]}if(b[d.name]!=null)this.logWarn("field.name collision: first field: "+this.echo(b[d.name])+", discarded field: "+this.echo(d));else b[d.name]=d}this.fields=b}this.dataSourceType==isc.DataSource.VIEW&&
this.initViewSources();isc.DataSource.registerDataSource(this)},isc.A.destroy=function(){var a=this.ID,b=isc.DS;if(a&&this==window[a])window[a]=null;if(b._dataSources[a]==this)b._dataSources[a]=null;if(b.$54v[a]==this)b.$54v[a]=null;if(b.$54w[a]==this)b.$54w[a]=null},isc.A.getResultSet=function(a){var b=isc.ClassFactory.getClass(this.resultSetClass||isc.ResultSet);if(!isc.isA.Class(b)){this.logWarn("getResultSet(): Unrecognized 'resultSetClass' property:"+b+", returning a standard isc.ResultSet.");
b=isc.ResultSet}return b.create(a,{$31k:true})},isc.A.dataChanged=function(){},isc.A.updateCaches=function(a,b){if(b==null){b={operationType:a.operationType,dataSource:this};if(a.clientContext!=null)b.clientContext=a.clientContext}var c=a.invalidateCache,d=a.httpResponseCode;if(!a.data&&!c&&!(d>=200&&d<300))this.logWarn("Empty results returned on '"+b.operationType+"' on dataSource '"+b.dataSource+"', unable to update resultSet(s) on DataSource "+this.ID+".  Return affected records to ensure cache consistency.");
else{this.cacheAllData&&this.hasAllData()&&this.invalidateCache();this.dataChanged(a,b)}},isc.A.getLegalChildTags=function(){for(var a=this.getFieldNames(),b=[],c=0;c<a.length;c++)this.fieldIsComplexType(a[c])&&b.add(a[c]);return b},isc.A.getOperationBinding=function(a,b){if(a==null||this.operationBindings==null)return this;if(isc.isAn.Object(a)){var c=a;a=c.operationType;b=c.operationId}if(b)if(c=this.operationBindings.find("operationId",b))return c;if(a)if(c=this.operationBindings.find("operationType",
a))return c;return this},isc.A.getDataFormat=function(a,b){return this.getOperationBinding(a,b).dataFormat||this.dataFormat},isc.A.shouldBypassCache=function(a,b){var c=this.getOperationBinding(a,b).preventHTTPCaching;if(c==null)c=this.preventHTTPCaching;return c},isc.A.transformRequest=function(a){return a.data},isc.A.getUpdatedData=function(a,b,c){var d=b.data;if(c&&b.status==0&&(d==null||isc.isA.Array(d)&&d.length==0||isc.isAn.emptyString(d))){this.logInfo("dsResponse for successful operation of type "+
a.operationType+" did not return updated record[s]. Using submitted request data to update ResultSet cache.","ResultSet");if((b=a.data)&&isc.isAn.Object(a.data)){if(a.operationType=="update"){d=isc.addProperties({},a.oldValues);d=isc.isAn.Array(b)?isc.addProperties(d,b[0]):isc.addProperties(d,b);d=[d]}else{isc.isAn.Array(b)||(b=[b]);d=[];for(a=0;a<b.length;a++)d[a]=isc.addProperties({},b[a])}this.logIsDebugEnabled("ResultSet")&&this.logDebug("Submitted data to be integrated into the cache:"+this.echoAll(d),
"ResultSet")}}return d},isc.A.serializeFields=function(a,b){if(!a)a=b.data;if(!a)return a;if(isc.DS.isSimpleTypeValue(a))return a;if(isc.isAn.Array(a)){for(var c=[],d=0;d<a.length;d++)c[d]=this.serializeFields(a[d],b);return c}else if(this.isAdvancedCriteria(a))return this.serializeAdvancedCriteria(a);a=isc.addProperties({},a);a.__ref&&delete a.__ref;c=this.getFields();for(d in c){var e=c[d];if(isc.isA.Date(a[d]))if(isc.SimpleType.getBaseType(e.type)=="date"&&!isc.SimpleType.inheritsFrom(e.type,"datetime"))a[d].logicalDate=
true;else if(isc.SimpleType.getBaseType(e.type)=="time")a[d].logicalTime=true}return a},isc.A.serializeAdvancedCriteria=function(a){a=isc.clone(a);if(a.criteria)for(var b=0;b<a.criteria.length;b++)a.criteria[b]=this.serializeAdvancedCriteria(a.criteria[b]);else if(isc.isA.Date(a.value)||isc.isA.Date(a.start)||isc.isA.Date(a.end)){b=this.getField(a.fieldName);if(b!=null)if(isc.SimpleType.getBaseType(b.type)=="date"&&!isc.SimpleType.inheritsFrom(b.type,"datetime")){if(a.value)a.value.logicalDate=true;
if(a.start)a.start.logicalDate=true;if(a.end)a.end.logicalDate=true}else if(isc.SimpleType.getBaseType(b.type)=="time"){if(a.value)a.value.logicalTime=true;if(a.start)a.start.logicalTime=true;if(a.end)a.end.logicalTime=true}}return a},isc.A.getDataProtocol=function(a){var b=this.getOperationBinding(a);a=this.getWebService(a);return b.dataProtocol!=null?b.dataProtocol:isc.isA.WebService(a)?"soap":this.dataProtocol||"getParams"},isc.A.$754=function(a){if(!this.$624)this.$624={};this.$624[a.requestId]=
a},isc.A.getServiceInputs=function(a){var b=this.getOperationBinding(a),c=this.getWebService(a),d=this.getWSOperation(a);this.addDefaultCriteria(a,b);a.originalData=a.data;this.$754(a);this.applySendExtraFields(a);if(!this.clientOnly){if(this.fulfilledFromOffline(a))return{dataProtocol:"clientCustom"};a.unconvertedDSRequest=isc.shallowClone(a)}if(this.autoConvertRelativeDates==true){this.logIsInfoEnabled("relativeDates")&&this.logInfo("Calling convertRelativeDates from getServiceInputs - data is\n\n"+
isc.echoFull(f));var e=this.convertRelativeDates(a.data);this.logIsInfoEnabled("relativeDates")&&this.logInfo("Called convertRelativeDates from getServiceInputs - data is\n\n"+isc.echoFull(f));a.data=e}var f=this.transformRequest(a);if(f!==a)a.data=f;e=this.getDataProtocol(a);if(e=="clientCustom")return{dataProtocol:"clientCustom"};else delete this.$624[a.requestId];if(isc.isA.WebService(c)){if(a.wsOperation==null&&isc.isAn.Object(d))a.wsOperation=d.name;this.logInfo("web service: "+c+", wsOperation: "+
this.echoLeaf(d),"xmlBinding")}f=this.getDataURL(a);f=a.actionURL||a.dataURL||f;if(a.useHttpProxy==null)a.useHttpProxy=this.$du(b.useHttpProxy,this.useHttpProxy);var g,h=b.defaultParams||this.defaultParams,i=a.params;if(h||i)g=isc.addProperties({},h,i);if(h=e=="getParams"||e=="postParams")g=isc.addProperties(g||{},a.data);if(h){if(g)g=this.serializeFields(g,a);return{actionURL:f,httpMethod:a.httpMethod||(e=="getParams"?"GET":"POST"),params:g}}f={actionURL:f,httpMethod:a.httpMethod||"POST"};if(g)f.params=
g;if(e=="postMessage")f.data=(a.data||"").toString();if(e=="postXML"||e=="soap"){this.getSerializeFlags(a);g=f.data=this.getXMLRequestBody(a);f.contentType=a.contentType||"text/xml";this.logDebug("XML post requestBody is: "+g,"xmlBinding")}if(e=="soap"){g=this.$du(b.soapAction,d.soapAction);if(g==null)g='""';f.httpHeaders=isc.addProperties({SOAPAction:g},a.httpHeaders);if(isc.isA.WebService(c)&&this.$du(b.spoofResponses,this.spoofResponses)){f.spoofedResponse=c.getSampleResponse(d.name);this.logInfo("Using spoofed response:\n"+
f.spoofedResponse,"xmlBinding")}}this.logIsDebugEnabled("xmlBinding")&&this.logDebug("serviceInputs are: "+this.echo(f),"xmlBinding");return f},isc.A.addDefaultCriteria=function(a,b){var c=b.defaultCriteria||this.defaultCriteria;if(c)if((c=isc.addProperties({},c))&&a.operationType=="fetch"){if(this.isAdvancedCriteria(a.data)){var d=this.mineCriteriaFieldNames(a.data),e;for(e in c)d.contains(e)&&delete c[e]}if(isc.getValues(c).length>0)a.data=isc.DataSource.combineCriteria(a.data,c,"and",null,true)}},
isc.A.mineCriteriaFieldNames=function(a){var b=[];if(!a.criteria)return b;for(var c=0;c<a.criteria.length;c++)a.criteria[c].criteria?b.addList(this.mineCriteriaFieldNames(a.criteria[c])):b.add(a.criteria[c].fieldName);return b},isc.A.applySendExtraFields=function(a){if(!this.sendExtraFields){a=a.data;isc.isAn.Array(a)||(a=[a]);for(var b=0;b<a.length;b++){var c=a[b];if(isc.isAn.Object(c))for(var d in c)this.getField(d)||delete c[d]}}},isc.A.processResponse=function(a,b){var c=this.$624[a];if(c==null)this.logWarn("DataSource.processResponse(): Unable to find request corresponding to ID "+
a+", taking no action.");else{delete this.$624[a];if(b.status==null)b.status=0;if(b.status==0){var d=b.data;if(d==null)b.data=d=[];if(b.startRow==null)b.startRow=c.startRow||0;if(b.endRow==null)b.endRow=b.startRow+d.length;if(b.totalRows==null)b.totalRows=Math.max(b.endRow,d.length)}this.$38b(d,b,c)}},isc.A.$50e=function(a,b,c){var d=this.cacheAllData&&!this.clientOnly&&this.cacheResultSet?this.cacheResultSet.getAllRows():null;d=this.getClientOnlyResponse(c.$374,d);this.$38b(b,d,c.$374,a,c)},isc.A.$38a=
function(a,b,c){this.$38b(b,{data:b,startRow:0,endRow:0,totalRows:0,status:0},c.$374,a,c)},isc.A.$377=function(a,b,c){var d=c.$374,e=this.getOperationBinding(d).recordXPath||this.recordXPath;if((a.$38c||a.$69j)&&this.logIsDebugEnabled("xmlBinding"))this.logDebug("Raw response data: "+this.echoFull(b),"xmlBinding");var f=b;if(b){if(e){b=isc.xml.selectObjects(b,e);this.logInfo("JSON recordXPath: '"+e+"', selected: "+this.echoLeaf(b),"xmlBinding")}b=this.recordsFromObjects(b);this.logIsDebugEnabled("xmlBinding")&&
this.logDebug("Validated dsResponse.data: "+isc.echoFull(b),"xmlBinding");e={data:b,startRow:d.startRow||0,status:0};e.endRow=e.startRow+Math.max(0,b.length);e.totalRows=Math.max(e.endRow,b.length)}else{b=a.status;if(b==0||b==null)b=-1;e={status:b,data:a.data}}this.$38b(f,e,d,a,c)},isc.A.$69k=function(a,b,c){if(a.status==0){b=a.data.split(/[\r\n]+/);var d=b[0].split(",");d=d.map(function(k){return k.trim()});for(var e=[],f=1;f<b.length;f++){for(var g=b[f].split(","),h={},i=0;i<g.length;i++){var j=
g[i];if(j!=null)j=j.trim();if(isc.startsWith(j,'"'))j=j.substring(1);if(isc.endsWith(j,'"'))j=j.substring(0,j.length-1);h[d[i]]=j}e.add(h)}a.$69j=true;this.$377(a,e,c)}},isc.A.$379=function(a,b,c){if(a.status>=0){var d=b;if(c.transport!="scriptInclude"){var e;if(this.jsonPrefix){e=RegExp(/^\s*/);d=d.replace(e,"");if(d.startsWith(this.jsonPrefix))d=d.substring(this.jsonPrefix.length);else this.logInfo("DataSource specifies jsonPrefix, but not present in response returned from server. Processing response anyway.")}if(this.jsonSuffix){e=
RegExp(/\s*$/);d=d.replace(e,"");if(d.endsWith(this.jsonSuffix))d=d.substring(0,d.length-this.jsonSuffix.length);else this.logInfo("DataSource specifies jsonSuffix, but not present in response returned from server. Processing response anyway.")}}if(d.match(/^\s*\{/))d="var evalText = "+d+";evalText;";try{var f=isc.eval(d)}catch(g){this.logWarn("Error evaluating JSON: "+g.toString()+", JSON text:\r"+b);return}if(f==null){this.logWarn("Evaluating JSON reply resulted in empty value. JSON text:\r"+this.echo(b));
return}a.$38c=true}this.$377(a,f,c)},isc.A.recordsFromObjects=function(a){isc.isAn.Array(a)||(a=[a]);if(this.skipJSONValidation)return a;for(var b=0;b<a.length;b++)a[b]=this.validateJSONRecord(a[b]);return a},isc.A.validateJSONRecord=function(a){for(var b=this.getFieldNames(),c={},d=0;d<b.length;d++){var e=b[d],f=this.getField(e),g;g=f.valueXPath?isc.xml.selectObjects(a,f.valueXPath,true):a[e];if(f.getFieldValue){isc.isA.Function(f.getFieldValue)||isc.Func.replaceWithMethod(f,"getFieldValue","record,value,field,fieldName");
g=f.getFieldValue(a,g,f,e)}if(g!=void 0)c[e]=this.validateFieldValue(f,g)}if(this.dropExtraFields)return c;for(d=0;d<b.length;d++){e=b[d];a[e]=c[e]}return a},isc.A.getMessageSerializer=function(a,b){var c=this.getOperationBinding(a,b);if(c.wsOperation)return this.getWebService(a,b).getMessageSerializer(c.wsOperation);return this},isc.A.getXMLRequestBody=function(a,b){if(isc.$cv)arguments.$cw=this;var c=isc.SB.create();if(this.getDataProtocol(a)=="soap"){c.append(this.getSoapStart(a),"\r");c.append(this.getSoapBody(a,
b));c.append("\r",this.getSoapEnd(a))}else if(this.messageStyle=="template")c.append(this.$38d(a));else{var d=this.getMessageSerializer(a);b=this.getSerializeFlags(a,b);c.append(d.xmlSerialize(a.data,b))}this.logIsDebugEnabled("xmlComm")&&this.logDebug("outbound XML message: "+c,"xmlComm");return c.toString()},isc.A.$38d=function(a){isc.SB.create();return this.soapBodyTemplate.evalDynamicString(this,a)},isc.A.getSchemaSet=function(){return isc.SchemaSet.get(this.schemaNamespace)},isc.A.hasWSDLService=
function(a){return isc.isA.WebService(this.getWebService(a))},isc.A.getWebService=function(a){var b=this.getOperationBinding(a),c=(a?a.serviceNamespace:null)||b.serviceNamespace||this.serviceNamespace;b=(a=(a?a.serviceName:null)||b.serviceName||this.serviceName)?isc.WebService.getByName(a,c):isc.WebService.get(c);if((c!=null||a!=null)&&b==null)this.logWarn("Could not find WebService definition: "+(a?"serviceName: "+a:"")+(c?"   serviceNamespace: "+c:"")+this.getStackTrace());return b||this},isc.A.getWSOperation=
function(a){var b=this.getOperationBinding(a);b=(isc.isAn.Object(a)?a.wsOperation:null)||b.wsOperation||this.wsOperation;a=this.getWebService(a);if(b!=null&&isc.isA.WebService(a)){(a=a.getOperation(b))||isc.logWarn("DataSource.getWSOperation() : could not retrieve the operation "+b);return a}return this},isc.A.getDataURL=function(a){var b=this.getOperationBinding(a);if(b!=this&&b.dataURL)return b.dataURL;if(this.dataURL!=null)return this.dataURL;if(this.hasWSDLService(a))return this.getWebService(a).getDataURL(this.getWSOperation(a).name);
return this.dataURL},isc.A.getGlobalNamespaces=function(a){a=this.getWebService(a);var b=this.globalNamespaces;if(a&&a.globalNamespaces)b=isc.addProperties({},b,a.globalNamespaces);return b},isc.A.getSoapStart=function(a){var b=this.getWebService(a);if(b.getSoapStart)return b.getSoapStart(a);return isc.SB.concat(isc.DataSource.$37t,isc.xml.$37l(this.getGlobalNamespaces(a),null,"         "),">",isc.DataSource.$37u,this.getSoapHeader(a),isc.DataSource.$51y)},isc.A.getSoapHeader=function(a){var b=this.getWebService(a);
if(b.getSoapHeader)return b.getSoapHeader(a);var c=a.headerData||b.getHeaderData(a);if(c){this.logDebug("headerData is: "+this.echo(c),"xmlBinding");b=b.getInputHeaderSchema(this.getWSOperation(a))||isc.emptyObject;var d="";a=a.useFlatHeaderFields;for(var e in c){var f=b[e];if(f!=null)d+=isc.isA.DataSource(f)?f.xmlSerialize(c[e],{useFlatFields:a}):"\r     "+this.$38g(e,f,c[e],f.partNamespace);else this.logWarn("headerData passed for SOAP header partName: "+e+", no schema available, not outputting")}return d}},
isc.A.getSoapBody=function(a,b){if(isc.$cv)arguments.$cw=this;var c=isc.SB.create(),d=this.getWebService(a),e=this.getSoapStyle(a),f=this.getWSOperation(a),g=this.xmlNamespaces?isc.makeReverseMap(this.xmlNamespaces):null;b=isc.addProperties({nsPrefixes:isc.addProperties({},g)},b);g=b.generateResponse?d.getResponseMessage(f.name):d.getRequestMessage(f.name);d=b.bodyPartNames||d.getBodyPartNames(f.name,b.generateResponse);b=this.getSerializeFlags(a,b);isc.Comm.omitXSI=f.inputEncoding!="encoded";var h=
isc.Comm.xmlSchemaMode;isc.Comm.xmlSchemaMode=true;var i="        ";if(e=="rpc"){c.append("\n",i,isc.Comm.$36u(f.name,null,f.inputNamespace,"opNS",true),">");i+="    "}this.logInfo("soap:body parts in use: '"+d+"', soapStyle: "+e,"xmlSerialize");this.logIsDebugEnabled("xmlSerialize")&&this.logDebug("SOAP data is: "+this.echoFull(a.data),"xmlSerialize");for(var j=0;j<d.length;j++){var k=d[j];k=g.getMessagePart(k,d.length<2&&e=="document"?a.data:a.data?a.data[k]:null,b,i);c.append("\r"+i+k)}e=="rpc"&&
c.append("\n","        ",isc.Comm.$36v(f.name,f.inputNamespace,"opNS"));isc.Comm.omitXSI=null;isc.Comm.xmlSchemaMode=h;return isc.SB.concat("    ",isc.DS.$37v,this.outputNSPrefixes(b.nsPrefixes,"        "),">",c.toString(),"\r    ",isc.DS.$51z)},isc.A.getMessagePart=function(a,b,c,d){if(isc.$cv)arguments.$cw=this;var e=this.getPartField(a),f=this.getSchema(e.type,e.xsElementRef?"element":null),g=this.logIsInfoEnabled("xmlSerialize");if(isc.isA.DataSource(f)){if(g)this.logInfo("soap:body part '"+a+
"' is complex type with schema: "+f+" has value: "+(this.logIsDebugEnabled("xmlSerialize")?this.echo(b):this.echoLeaf(b)),"xmlSerialize");return f.xmlSerialize(b,c,d,e.xsElementRef?null:a)}else{if(b!=null&&!isc.DS.isSimpleTypeValue(b))b=b[e.name]||b[a]||b;g&&this.logInfo("soap:body part '"+a+"' is of simple type '"+e.type+"' has value: '"+this.echoLeaf(b)+"'","xmlSerialize");f=this.getType(e.type);g=e.partNamespace;if(!g&&f&&f.schemaNamespace)g=f.schemaNamespace;return this.$38g(e.name||a,e,b,g,c)}},
isc.A.getPartField=function(a){var b=isc.getValues(this.getFields()).find("partName",a);if(b!=null)return b;return this.getField(a)},isc.A.getSoapEnd=function(a){var b=this.getWebService(a);if(b.getSoapEnd)return b.getSoapEnd(a);return isc.DataSource.$37w},isc.A.getSoapStyle=function(a){if(!this.hasWSDLService(a))return"document";return this.getWebService(a).getSoapStyle(this.getWSOperation(a).name)},isc.A.getSerializeFlags=function(a,b){b=isc.addProperties({soapStyle:this.getSoapStyle(a)},b);var c=
this.getOperationBinding(a);b.flatData=this.$du(a.useFlatFields,c.useFlatFields,this.useFlatFields);b.recursiveFlatFields=this.$du(a.recursiveFlatFields,c.recursiveFlatFields,this.recursiveFlatFields);b.textContentProperty=this.$du(a.textContentProperty,c.textContentProperty);b.dsRequest=a;b.startRowTag=c.startRowTag||this.startRowTag;b.endRowTag=c.endRowTag||this.endRowTag;return b},isc.A.xmlSerialize=function(a,b,c,d){b||(b={});if(b.useFlatFields)b.flatData=true;var e=this.getSchemaSet(),f=b.qualifyAll==
null;if(e&&e.qualifyAll)b.qualifyAll=true;var g;if(b.nsPrefixes==null){e=this.xmlNamespaces?isc.makeReverseMap(this.xmlNamespaces):null;b.nsPrefixes=isc.addProperties({},e);g=true}isc.Comm.xmlSchemaMode=true;var h;if(isc.Comm.omitXSI==null)h=isc.Comm.omitXSI=true;a=this.$ew(a,b,c,d,g);if(f)b.qualifyAll=null;isc.Comm.xmlSchemaMode=isc.Comm.xmlSchemaMode;if(h)isc.Comm.omitXSI=null;return a},isc.A.$ew=function(a,b,c,d,e){if(isc.$cv)arguments.$cw=this;this.logIsDebugEnabled("xmlSerialize")&&this.logDebug("schema: "+
this+" serializing: "+this.echo(a)+" with flags: "+this.echo(b),"xmlSerialize");var f=this.mustQualify||b.qualifyAll;d=d||this.tagName||this.ID;var g;if(a!=null&&(a._constructor||isc.isAn.Instance(a)))g=isc.isAn.Instance(a)?a.Class:a._constructor;if(isc.DS.isSimpleTypeValue(a)){if(isc.isA.String(a)&&isc.startsWith(a,"ref:"))return"<"+d+' ref="'+a.substring(4)+'"/>';this.logDebug("simple type value: "+this.echoLeaf(a)+" passed to xmlSerialize on "+this,"xmlSerialize");return isc.Comm.$ew(d||this.tagName||
this.ID,a)}if(isc.isAn.Instance(a))a=a.getSerializeableFields();if(isc.isAn.Array(a)&&!this.canBeArrayValued)return this.map("xmlSerialize",a,b,c).join("\n");var h=isc.SB.create();c=c||"";h.append("\r",c);var i;if(f)i=(this.isA("XSComplexType")?b.parentSchemaNamespace:null)||this.schemaNamespace;h.append(isc.Comm.$36u(d,this.ID,i,b.nsPrefixes,true));a=this.serializeAttributes(a,h,b);g&&d!=g&&h.append(' constructor="',g,'"');var j;if(a!=null)j=this.xmlSerializeFields(a,b,c+"    ");e&&h.append(this.outputNSPrefixes(b.nsPrefixes,
c+"     "));f=this.$45z;this.$45z=null;if(j==null||isc.isAn.emptyString(j)){h.append("/>");return h.toString()}h.append(">",j,f?"":"\r"+c);h.append(isc.Comm.$36v(d,i,b.nsPrefixes));return h.toString()},isc.A.outputNSPrefixes=function(a,b){delete a.$36y;a=isc.makeReverseMap(a);return isc.xml.$37l(a,null,b+"        ")},isc.A.serializeAttributes=function(a,b,c){for(var d=this.getFieldNames(),e=true,f=0;f<d.length;f++){var g=d[f],h=this.getField(g);if(h.xmlAttribute&&(a&&a[g]!=null||h.xmlRequired)){if(e){a=
isc.addProperties({},a);e=false}var i=a[g];if(c&&c.spoofData)i=this.getSpoofedData(h);b.append(" ",g,'="',this.$38f(h,i),'"');delete a[g]}}return a},isc.A.xmlSerializeFields=function(a,b,c){var d=isc.SB.create();b=b||isc.emptyObject;var e=b.flatData,f=b.spoofData;c=c||"";a=isc.addProperties({},a);a.__ref!=null&&delete a.__ref;var g=this.getFields(),h;for(h in g){var i=this.getField(h),j=this.fieldIsComplexType(h),k=a[h];if(b.startRowTag==i.name&&k==null)k=b.dsRequest?b.dsRequest.startRow:null;else if(b.endRowTag==
i.name&&k==null)k=b.dsRequest?b.dsRequest.endRow:null;else if(j&&e&&k==null)k=a;var l=i.xmlRequired&&!i.xmlAttribute||a[h]!=null||f&&!i.xmlAttribute;if(e&&j){var m=this.getSchema(i.type);i=isc.clone(b.nsPrefixes);m=m.xmlSerializeFields(k,b);if(m!=null&&!isc.isAn.emptyString(m))l=true;b.nsPrefixes=i}if(l){if(e&&j&&a[h]!=null&&!isc.DS.isSimpleTypeValue(a[h])&&!b.recursiveFlatFields){b=isc.addProperties({},b);b.flatData=false}d.append(this.xmlSerializeField(h,k,b,c))}!e&&a[h]!=null&&delete a[h]}if(!e&&
!isc.isA.Schema(this))for(h in a)d.append(this.xmlSerializeField(h,a[h],b,c));return d.toString()},isc.A.xmlSerializeField=function(a,b,c,d){var e=isc.SB.create(),f=this.getField(a);if(!(f==null&&(a.startsWith("_")||a.startsWith("$")))){var g=f?f.type:null,h=c&&c.spoofData;d=d||"";if(h)b=this.getSpoofedData(f);this.logIsDebugEnabled("xmlSerialize")&&this.logDebug("serializing fieldName: "+a+" with type: "+g+" with value: "+this.echo(b),"xmlSerialize");h=f&&f.mustQualify||c.qualifyAll?this.getSchemaSet().schemaNamespace:
null;var i=c.textContentProperty||this.textContentProperty,j=this.getTextContentField();if(a==i&&(j!=null||!this.hasXMLElementFields(i))){this.$45z=true;return this.$38f(j,b)}if(g==this.$41v&&b!=null)if(b.iscAction)b=b.iscAction;else if(isc.isA.StringMethod(b))b=b.value;g=isc.Comm.$36u(a,f?f.type:null,h,c.nsPrefixes);i=isc.Comm.$36v(a,h,c.nsPrefixes);j=isc.isAn.Array(b)?b:[b];if(this.fieldIsComplexType(a)){h=c.parentSchemaNamespace;c.parentSchemaNamespace=this.schemaNamespace;var k=this.getFieldDataSource(f,
f&&f.xsElementRef?"element":null);if(f.multiple){e.append("\r",d,g);for(var l=0;l<j.length;l++)e.append(k.xmlSerialize(j[l],c,d+"    ",f.childTagName));e.append("\r",d,i)}else if(k.canBeArrayValued&&isc.isAn.Array(b))e.append(k.xmlSerialize(b,c,d,a));else for(l=0;l<j.length;l++){b=j[l];if(b==null){e.append("\r",d);e.append(g,i)}else if(isc.DS.isSimpleTypeValue(b))if(isc.isA.String(b)&&isc.startsWith(b,"ref:")){e.append("\r",d);e.append(g);e.append("<",f?f.childTagName||f.type:"value",' ref="',b.substring(4),
'"/>');e.append(i)}else{this.logWarn("simple type value "+this.echoLeaf(b)+" passed to complex field '"+f.name+"'","xmlSerialize");e.append("\r",d);e.append(isc.Comm.xmlSerialize(a,b))}else e.append(k.xmlSerialize(b,c,d,a))}c.parentSchemaNamespace=h}else if(f!=null){if(f.xsElementRef)if((b=this.getType(f.type))&&b.schemaNamespace)h=b.schemaNamespace;if(f.multiple){e.append("\r",d,g,"\r");for(l=0;l<j.length;l++)e.append(this.$38g(f.childTagName,f,j[l],h,c),"\r",d);e.append("\r",d,i,"\r")}else for(l=
0;l<j.length;l++)e.append("\r",d,this.$38g(a,f,j[l],h,c))}else for(l=0;l<j.length;l++)j[l]==null||isc.isAn.emptyObject(j[l])?e.append("\r",d,g,i):e.append("\r",d,isc.Comm.$ew(a,j[l],d,{isRoot:false}));return e.toString()}},isc.A.$38g=function(a,b,c,d,e){var f=b.type;e=e||{};if(isc.isAn.Object(c)&&!isc.isA.Function(c.$ew))return isc.Comm.xmlSerialize(a||null,c);else{f=this.$38h(f);if(c==null&&b.nillable)return isc.Comm.$36u(a||"value",null,d,e.nsPrefixes,true)+' xsi:nil="true"/>';if(isc.isA.Date(c))c=
c.toSchemaDate(b.type);else if(c!=null&&c.$ew)return c.$ew(a,f,d);else c=isc.makeXMLSafe(c);return isc.Comm.$ex(a||"value",c,f,d,e.nsPrefixes)}},isc.A.$38f=function(a,b){return isc.isA.Date(b)?b.toSchemaDate(a?a.type:null):isc.makeXMLSafe(b)},isc.A.$38h=function(a){switch(a){case "integer":return"int";case "number":return"long";default:return a}},isc.A.xmlSerializeSample=function(){return this.xmlSerialize({},{spoofData:true})},isc.A.getSpoofedData=function(a){if(!a)return"textValue";if(this.getSchema(a.type)!=
null)return{};if(a.multiple){a={type:a.type};return[this.getSpoofedData(a),this.getSpoofedData(a)]}if(a.valueMap){a=!isc.isAn.Array(a.valueMap)?isc.getKeys(a.valueMap):a.valueMap;return a[Math.round(Math.random()*(a.length-1))]}switch(isc.SimpleType.getBaseType(a.type)){case "boolean":return Math.random()>0.5;case "integer":case "int":case "number":var b=0,c=10;if(a.validators){var d=a.validators.find("type","integerRange");if(d){this.logWarn(a.name+" has "+d.type+" validator  with min "+d.min+" and max "+
d.max);b=d.min||0;c=d.max||Math.min(b,10);if(b>c)b=c}}return Math.round(b+Math.random()*(c-b));case "float":case "decimal":case "double":b=0;c=10;var e=2;if(a.validators){if(d=a.validators.find("type","floatRange")){this.logWarn(a.name+" has "+d.type+" validator  with min "+d.min+" and max "+d.max);b=d.min||0;c=d.max||Math.min(b,10);if(b>c)b=c}if(a=a.validators.find("type","floatPrecision"))e=a.precision||2}return(b+Math.random()*(c-b)).toFixed(e);case "date":case "time":case "datetime":b=new Date;
if(a.validators)if(d=a.validators.find("type","dateRange")){this.logWarn(a.name+" has "+d.type+" validator  with min "+d.min+" and max "+d.max);if(d.min)b=d.min;else if(d.max)b=d.max}return b;default:return"textValue"}},isc.A.getSerializeableFields=function(){var a=this.Super("getSerializeableFields",arguments),b=a.fields;b=isc.getValues(b);for(var c=0;c<b.length;c++){var d=b[c]=isc.addProperties({},b[c]),e=d.validators;if(e){d.validators=e.findAll("_generated",null);d.validators==null&&delete d.validators}}a.fields=
b;return a},isc.A.$378=function(a,b,c,d){var e=d.$374,f=this.getOperationBinding(e),g;if(c.status<0){a=b||c.data;this.$38b(a,{status:c.status,data:a},e,c,d)}else{if(a){if(f.wsOperation){g=this.getWebService(e).getOutputNamespaces(f.wsOperation);a.addNamespaces(g)}a.addNamespaces(this.xmlNamespaces);a.addNamespaces(f.xmlNamespaces)}b=isc.addProperties({},g,this.xmlNamespaces,f.xmlNamespaces);this.dsResponseFromXML(a,e,b,{target:this,methodName:"$57b",xmlData:a,dsRequest:e,rpcRequest:d,rpcResponse:c})}},
isc.A.$57b=function(a,b){this.$38b(b.xmlData,a,b.dsRequest,b.rpcResponse,b.rpcRequest)},isc.A.dsResponseFromXML=function(a,b,c,d){a?this.selectRecords(a,b,{target:this,methodName:"$57c",dsRequest:b,callback:d,xmlData:a,xmlNamespaces:c}):this.$57c([],b,c,d)},isc.A.$57c=function(a,b,c,d){if(!d&&b.callback)d=b.callback;if(b.xmlNamespaces)c=b.xmlNamespaces;if(b.dsRequest)b=b.dsRequest;if(c==null)c=this.xmlNamespaces;var e={data:a,startRow:b.startRow||0,status:0};e.endRow=e.startRow+Math.max(0,a.length-
1);e.totalRows=Math.max(e.endRow,a.length);var f=d.xmlData;if(f){if(this.totalRowsXPath)e.totalRows=isc.xml.selectNumber(f,this.totalRowsXPath,c,true);if(this.startRowXPath){e.startRow=isc.xml.selectNumber(f,this.startRowXPath,c,true);e.endRow=e.startRow+Math.max(0,a.length-1)}if(this.endRowXPath){e.endRow=isc.xml.selectNumber(f,this.endRowXPath,c,true);if(!this.startRowXPath)e.startRow=e.endRow-Math.max(0,a.length-1)}if(this.statusXPath)e.status=parseInt(isc.xml.selectScalar(f,this.statusXPath,c,
true));if(this.errorSchema)e.errors=this.errorSchema.selectRecords(f,b)}d&&this.fireCallback(d,"dsResponse",[e,d]);return e},isc.A.selectRecords=function(a,b,c){a=this.selectRecordElements(a,b);return(this.getSchema(this.getOperationBinding(b).responseDataSchema)||this).recordsFromXML(a,c)},isc.A.recordsFromXML=function(a,b){if(a&&!isc.isAn.Array(a))a=a.length!=null?isc.xml.$37m(a):[a];if(a&&this.transformResponseToJS){if(a.length>this.resultBatchSize)return this.$57d({startingRow:0,callback:b,elements:a});
var c=this.dropExtraFields?this.getFieldNames():null;a=isc.xml.toJS(a,c,this);this.logIsDebugEnabled("xmlBinding")&&this.logDebug("transformed response: "+this.echoFull(a)+"xmlBinding")}b&&this.fireCallback(b,"records",[a,b]);return a},isc.A.$57d=function(a){var b=a.elements,c=a.startingRow,d=a.callback,e=Math.min(b.length,c+this.resultBatchSize),f=this.dropExtraFields?this.getFieldNames():null;if(a.$57e){c=isc.xml.toJS(b.slice(c,e+1),f,this);a.$57e.addList(c)}else a.$57e=isc.xml.toJS(b.slice(c,e+
1),f,this);if(e<b.length){a.startingRow=e+1;this.delayCall("$57d",[a])}else d&&this.fireCallback(d,"records",[a.$57e,d])},isc.A.selectRecordElements=function(a,b){if(isc.isA.String(a))a=isc.xml.parseXML(a);var c=this.getOperationBinding(b),d=c==this?null:c.recordXPath,e=c==this?null:c.recordName,f=this.recordXPath,g=this.recordName;if(d==null&&(e!=null||f==null&&g!=null)&&this.hasWSDLService(b))return this.getWebService(b).selectByType(a,c.wsOperation||this.wsOperation,e||g);if(d=d||f){c=isc.xml.selectNodes(a,
d,this.xmlNamespaces);this.logDebug("applying XPath: "+d+(this.xmlNamespaces?" with namespaces: "+this.echo(this.xmlNamespaces):"")+" got "+(c?c.length:null)+" elements","xmlBinding")}else{c=[];e=e||g||this.ID;g=a.getElementsByTagName(e);for(d=0;d<g.length;d++)c.add(g[d]);this.logDebug("getting elements of tag name: "+e+" got "+c.length+" elements","xmlBinding")}return c},isc.A.$38b=function(a,b,c,d,e){b||(b={status:d.status,httpResponseCode:d.httpResponseCode});if(d!=null&&e!=null){b.httpResponseCode=
d.httpResponseCode;b.transactionNum=d.transactionNum;b.clientContext=e.clientContext}else b.clientContext=c.clientContext;this.logIsInfoEnabled("xmlBinding")&&this.logInfo("dsResponse is: "+this.echo(b),"xmlBinding");b.context=e;b=this.transformResponse(b,c,a)||b;b.startRow=this.$52v(b.startRow,0);a=b.endRow;if(a==null)a=b.status<0?0:isc.isAn.Array(b.data)?b.data.length:1;b.endRow=this.$52v(a);b.totalRows=this.$52v(b.totalRows,b.endRow);if(this.useOfflineStorage&&b.status==0&&!this.clientOnly){isc.DataSource.cacheResponse(c,
b);if(isc.Offline&&!b.fromOfflineCache)c.unconvertedDSRequest?isc.Offline.storeResponse(c.unconvertedDSRequest,b):isc.Offline.storeResponse(c,b)}if(c&&c.resultSet)c.resultSet.$78c=b.status==isc.RPCResponse.STATUS_OFFLINE?true:false;else if(c&&c.resultTree)c.resultTree.$78c=b.status==isc.RPCResponse.STATUS_OFFLINE?true:false;this.fireResponseCallbacks(b,c,d,e)},isc.A.fireResponseCallbacks=function(a,b,c,d){if(!a.clientContext)a.clientContext={};if(a.status>=0)isc.DataSource.handleUpdate(a,b);else b.willHandleError||
isc.RPCManager.$a0(a,b);for(var e=[b.$376,b.afterFlowCallback],f=[],g=0;g<e.length;g++){var h=e[g];if(f.contains(h))this.logWarn("Suppressed duplicate callback: "+h);else{h=this.fireCallback(h,"dsResponse,data,dsRequest",[a,a.data,b]);if(d&&d.willHandleError&&h===false){this.logDebug("performOperationReply: Further processing cancelled by callback");break}if(c)if((h=isc.RPCManager.getTransaction(c.transactionNum))&&h.suspended)break}}});isc.B.push(isc.A.$52v=function(a,b){if(a==null)return b;if(!isc.isA.String(a))return a;
var c=parseInt(a);return isNaN(c)?b!=null?b:a:c},isc.A.transformResponse=function(a){return a},isc.A.getFieldValue=function(a,b,c){var d=isc.xml.getFieldValue(a,b,c,this,this.xmlNamespaces);if(!c.getFieldValue)return d;isc.isA.Function(c.getFieldValue)||isc.Func.replaceWithMethod(c,"getFieldValue","record,value,field,fieldName");return c.getFieldValue(a,d,c,b)},isc.A.validateFieldValue=function(a,b){if(!isc.Validator)return b;var c=a.validators;if(!c)return b;if(!isc.isAn.Array(c)){this.$2j[0]=c;
c=this.$2j}for(var d=0;d<c.length;d++){var e=c[d],f=isc.Validator.processValidator(a,e,b,null,null);if(!f){this.logWarn(this.ID+"."+a.name+": value: "+this.echoLeaf(b)+" failed on validator: "+this.echo(e));return b}if(e.resultingValue!==void 0){b=e.resultingValue;e.resultingValue=void 0}if(!f&&e.stopIfFalse)break}this.$2j.length=0;return b},isc.A.getCriteriaFields=function(a){return isc.DS.getCriteriaFields(a,this)},isc.A.$74s=function(a,b){return isc.DS.$74s(a,b)},isc.A.fetchRecord=function(a,b,
c){var d={},e=this.getPrimaryKeyField();if(e==null)this.logWarn("This datasource has no primary key field. Ignoring fetchRecord call");else{e=e.name;if(isc.isAn.Object(a)&&a[e]!==void 0)d=a;else d[e]=a;return this.fetchData(d,b,c)}},isc.A.fetchData=function(a,b,c){this.performDSOperation("fetch",a,b,c)},isc.A.filterData=function(a,b,c){c||(c={});if(c.textMatchStyle==null)c.textMatchStyle="substring";this.performDSOperation("fetch",a,b,c)},isc.A.exportClientData=function(a,b){var c=b&&b.exportFilename?
b.exportFilename:"export",d=b&&b.exportDisplay?b.exportDisplay:"download";isc.DMI.callBuiltin({methodName:"downloadClientExport",arguments:[a,b&&b.exportAs?b.exportAs:"csv",c,d,{exportAs:b.exportAs,exportDelimiter:b.exportDelimiter,exportFields:b.exportFields,exportHeader:b.exportHeader,exportFooter:b.exportFooter,exportTitleSeparatorChar:b.exportTitleSeparatorChar,lineBreakStyle:b.lineBreakStyle}],requestParams:{showPrompt:false,transport:"hiddenFrame",exportResults:true,downloadResult:true,downloadToNewWindow:d==
"window",download_filename:d=="window"?c:null}})},isc.A.exportData=function(a,b){b||(b={});if(this.canExport==false)isc.logWarn("Exporting is disabled for this DataSource.  Set DataSource.canExport to true to enable it.");else if(b.exportAs&&b.exportAs.toLowerCase()=="json")isc.logWarn("Export to JSON is not allowed from a client call - set operationBinding.exportAs on your DataSource instead.");else{if(b.textMatchStyle==null)b.textMatchStyle="substring";var c={};c.exportResults=true;c.exportAs=b.exportAs||
"csv";c.exportDelimiter=b.exportDelimiter||",";c.exportTitleSeparatorChar=b.exportTitleSeparatorChar||"";c.exportFilename=b.exportFilename||"Results."+(c.exportAs=="ooxml"?"xlsx":c.exportAs);b.exportFilename=c.exportFilename;c.exportDisplay=b.exportDisplay||"download";c.lineBreakStyle=b.lineBreakStyle||"default";c.exportFields=this.getExportableDSFields(b.exportFields||this.getVisibleDSFields());c.exportHeader=b.exportHeader;c.exportFooter=b.exportFooter;b.downloadResult=true;b.downloadToNewWindow=
b.exportDisplay=="window"?true:false;if(b.downloadToNewWindow){if(c.exportFilename.endsWith(".xml")&&c.exportAs!="xml")c.exportFilename+=".txt";b.download_filename=b.exportFilename;a.download_filename=b.download_filename}b.showPrompt=false;b.parameters=c;this.performDSOperation("fetch",a,null,b)}},isc.A.getVisibleDSFields=function(){for(var a=[],b=0;b<this.fields.length;b++){var c=this.fields.get(b);c.hidden||a.add(c.name)}return a},isc.A.getExportableDSFields=function(a){var b=[];if(this.canExport)for(var c=
0;c<a.length;c++){var d=this.getField(a[c]);d&&d.canExport!=false&&b.add(d.name)}return b},isc.A.getClientOnlyDataSource=function(a,b,c,d){var e=this;if(this.cacheAllData&&this.hasAllData()){var f=isc.DataSource.create({inheritsFrom:e,clientOnly:true,useParentFieldOrder:true,testData:this.cacheResultSet.getAllRows()},d);e.fireCallback(b,"dataSource",[f]);return f}else this.fetchData(a,function(g){e.fetchData(a,function(h,i){var j=isc.DataSource.create({inheritsFrom:e,clientOnly:true,useParentFieldOrder:true,
testData:i},d);e.fireCallback(b,"dataSource",[j])},isc.addProperties({},c,{startRow:0,endRow:g.totalRows}))},isc.addProperties({},c,{startRow:0,endRow:0}))},isc.A.addData=function(a,b,c){isc.Offline&&isc.Offline.isOffline()&&this.contactsServer()?isc.logWarn("Data cannot be saved because you are not online"):this.performDSOperation("add",a,b,c)},isc.A.updateData=function(a,b,c){isc.Offline&&isc.Offline.isOffline()&&this.contactsServer()?isc.logWarn("Data cannot be saved because you are not online"):
this.performDSOperation("update",a,b,c)},isc.A.removeData=function(a,b,c){if(isc.Offline&&isc.Offline.isOffline()&&this.contactsServer())isc.logWarn("Data cannot be saved because you are not online");else{var d=this.getPrimaryKeyFields();a=isc.applyMask(a,d);this.performDSOperation("remove",a,b,c)}},isc.A.contactsServer=function(){return!this.clientOnly&&this.dataProtocol!="clientCustom"},isc.A.validateData=function(a,b,c){c||(c={});c=isc.addProperties(c,{willHandleError:true});if(c.validationMode==
null)c.validationMode="full";return this.performDSOperation("validate",a,b,c)},isc.A.performCustomOperation=function(a,b,c,d){d||(d={});isc.addProperties(d,{operationId:a});this.performDSOperation("custom",b,c,d)},isc.A.$625=function(){if(!this.$626)this.$626=[this.getID(),"$627"];this.$626[2]=isc.DataSource.$625();return this.$626.join(isc.emptyString)},isc.A.performDSOperation=function(a,b,c,d){if(isc.$cv)arguments.$cw=this;var e=isc.addProperties({operationType:a,dataSource:this.ID,data:b,callback:c,
requestId:this.$625()},d);if(e.sortBy!=null){if(!isc.isAn.Array(e.sortBy))e.sortBy=[e.sortBy];if(isc.isAn.Object(e.sortBy[0]))e.sortBy=isc.DS.getSortBy(e.sortBy);for(var f=0;f<e.sortBy.length;f++){var g=e.sortBy[f];if(isc.isA.String(g))if((g=this.getField(g.charAt(0)=="-"?g.substring(1):g))&&g.canSortClientOnly)e.sortBy[f]=null}e.sortBy.removeEmpty();e.sortBy.length==0&&delete e.sortBy}return this.sendDSRequest(e)},isc.A.sendDSRequest=function(a){isc.addDefaults(a,this.getOperationBinding(a.operationType).requestProperties);
isc.addDefaults(a,this.requestProperties);var b=this.getDataFormat(a);if(b=="iscServer"&&!this.clientOnly&&!isc.hasOptionalModule("SCServer")){if(this.dataURL==null&&this.testFileName==null){this.logError("DataSource: "+this.ID+": attempt to use DataSource of type iscServer without SmartClient Server option. Please either set clientOnly: true for one-time fetch against dataURL/testFileName or upgrade to SmartClient Pro, Power or Enterprise");return}this.logInfo("Switching to clientOnly - no SmartClient Server installed.");
this.clientOnly=true}if(a.bypassCache==null)a.bypassCache=this.shouldBypassCache(a);if(a.showPrompt==null)a.showPrompt=this.showPrompt;if(!this.cacheAllData&&this.autoCacheAllData&&a.operationType=="fetch"&&a.startRow==null&&a.endRow==null&&a.criteria==null){this.logIsInfoEnabled("cacheAllData")&&this.logInfo("sendDSRequest: switching on cacheAllData","cacheAllData");this.cacheAllData=true}if(!this.fetchingClientOnlyData(a)){this.logIsDebugEnabled()&&this.logDebug("Outbound DSRequest: "+this.echo(a));
a.$376=a.callback;var c=a.operationType;if((c=="update"||c=="add")&&(this.sparseUpdates||this.noNullUpdates))this.$79c(a.data,a.oldValues,c,this);if(b=="iscServer"){this.$754(a);a.unconvertedDSRequest=isc.shallowClone(a);if(this.autoConvertRelativeDates==true){this.logIsInfoEnabled("relativeDates")&&this.logInfo("Calling convertRelativeDates from sendDSRequest - data is\n\n"+isc.echoFull(d));var d=this.convertRelativeDates(a.data);this.logIsInfoEnabled("relativeDates")&&this.logInfo("Called convertRelativeDates from sendDSRequest - data is\n\n"+
isc.echoFull(d));a.data=d}d=this.transformRequest(a);if(this.getDataProtocol(a)=="clientCustom")return;if(!this.clientOnly&&!this.cacheAllData||a.cachingAllData||this.cacheAllData&&a.operationType&&a.operationType!="fetch"){this.logIsInfoEnabled("cacheAllData")&&a.cachingAllData&&this.logInfo("sendDSRequest: processing cacheAllData request","cacheAllData");this.addDefaultCriteria(a,this.getOperationBinding(a));this.applySendExtraFields(a);b=this.getOperationBinding(a);if(b==null)b={};if(b=b.defaultParams||
this.defaultParams)a.data=isc.addProperties({},b,a.data);d=a.data;return this.performSCServerOperation(a,d)}}b=this.getServiceInputs(a);if(b.dataProtocol!="clientCustom"){var e=isc.addProperties({},a,b);e.$374=a;if(b.data==null)e.data=null;if(this.clientOnly||this.cacheAllData&&a.operationType=="fetch"){e.clientOnly=true;e.callback={target:this,methodName:"$50e"};isc.RPC.sendRequest(e)}else{b=this.getOperationBinding(a);e.transport=b.dataTransport||this.dataTransport;if(e.transport=="scriptInclude"){e.callback=
{target:this,methodName:"$377"};if(!e.callbackParam)e.callbackParam=b.callbackParam||this.callbackParam;isc.rpc.sendRequest(e)}else{b=this.getDataFormat(a);if(b=="xml"){var f=e.spoofedResponse;if(f){var g=this;isc.Timer.setTimeout(function(){g.$378(isc.xml.parseXML(f),f,{status:0,httpResponseCode:200,data:f},e)})}else{e.callback={target:this,method:this.$378};isc.xml.getXMLResponse(e)}}else{if(b=="json")e.callback={target:this,method:this.$379};else if(b=="csv")e.callback={target:this,method:this.$69k};
else{e.serverOutputAsString=true;e.callback={target:this,method:this.$38a}}isc.rpc.sendProxied(e)}}}}}},isc.A.$79c=function(a,b,c,d){d=d||this;if(!d.noNullUpdates){if(!d.sparseUpdates)return;if(b==null)return}for(var e in a)if(e!=isc.gwtRef){var f=a[e];if(d.noNullUpdates&&f===null)if(c=="add"&&d.omitNullDefaultsOnAdd==true)delete a[e];else{var g=d.getField(e);if(g&&g.nullReplacementValue!==void 0)a[e]=g.nullReplacementValue;else{f=isc.SimpleType.getBaseType(g.type,d);a[e]=f=="integer"?d.nullIntegerValue:
f=="float"?d.nullFloatValue:f=="date"||f=="time"?d.nullDateValue:f=="boolean"?d.nullBooleanValue:d.nullStringValue}}else if(d.sparseUpdates&&c=="update")if(b!=null){var h=b[e];if(!(h==null&&f!=null)){if(d!=null)if((g=d.getField(e))&&g.primaryKey)continue;if(isc.isA.Date(f)&&Date.compareDates(f,h)==0)delete a[e];else if(isc.isAn.Array(f)){for(var i=0;i<f.length;i++){this.$79c(f[i],h[i],c,g==null?null:isc.DataSource.get(g.type));var j=0,k;for(k in f[i])j++;j==0&&delete f[i]}var l;for(i=0;i<f.length;i++)if(f[i]!=
null){l=true;break}l||delete a[e]}else if(isc.isAn.Object(f)){this.$79c(f,h,c,g==null?null:isc.DataSource.get(g.type));j=0;for(k in f)j++;j==0&&delete a[e]}else f==h&&delete a[e]}}}},isc.A.fulfilledFromOffline=function(a){var b=a.unconvertedDSRequest?a.unconvertedDSRequest:a;if(this.useOfflineStorage&&isc.Offline){var c=a.dataSource+"."+a.operationType;if(isc.Offline.isOffline()){var d=isc.Offline.getResponse(b);this.logInfo("currently offline, for request: "+c+" found cached response: "+this.echoLeaf(d),
"offline");if(this.useOfflineResponse&&!this.useOfflineResponse(b,d)){this.logInfo("User-written useOfflineResponse() method returned false; not using cached response","offline");d=null}this.processOfflineResponse(a,d);return true}else if(b.useOfflineCache||b.useOfflineCacheOnly){d=isc.Offline.getResponse(b);if(d!=null){this.logInfo("request: "+c+", returning cached offline response","offline");if(this.useOfflineResponse&&!this.useOfflineResponse(b,d)){this.logInfo("User-written useOfflineResponse() method returned false; not using cached response",
"offline");d=null}this.processOfflineResponse(a,d);return true}else if(a.useOfflineCacheOnly){this.logInfo("request: "+c+": useOfflineCacheOnly: no response available","offline");this.processOfflineResponse(a);return true}this.logInfo("request: "+c+", no cached response, proceeding with network request","offline")}}return false},isc.A.processOfflineResponse=function(a,b){b||(b={status:isc.RPCResponse.STATUS_OFFLINE,data:isc.DataSource.offlineMessage,clientContext:a.clientContext});b.isCachedResponse=
true;this.fireResponseCallbacks(b,a)},isc.A.performSCServerOperation=function(a){this.logWarn("Attempt to perform iscServer request requires options SmartClient server support - not present in this build.\nRequest details:"+this.echo(a))},isc.A.getSchema=function(a,b){var c=this.getSchemaSet();if(c!=null){c=c.getSchema(a,b);if(c!=null)return c}c=this.getWebService();if(isc.isA.WebService(c))return c.getSchema(a,b);return isc.DS.get(a,null,null,b)},isc.A.getTitle=function(){return this.title||this.ID},
isc.A.getPluralTitle=function(){return this.pluralTitle||this.getTitle()+"s"},isc.A.getTitleField=function(){if(this.titleField==null){var a=isc.getKeys(this.getFields());this.titleField=a.contains("title")?"title":a.contains("label")?"label":a.contains("name")?"name":a.contains("id")?"id":a.first()}return this.titleField},isc.A.getIconField=function(){if(this.iconField===void 0){this.iconField=null;isc.getKeys(this.getFields());for(var a=["picture","thumbnail","icon","image","img"],b=0;b<a.length;b++){var c=
a[b],d=this.getField(c);if(d&&isc.SimpleType.inheritsFrom(d.type,"image"))this.iconField=c}}return this.iconField},isc.A.initViewSources=function(){var a=this.fields={},b;for(b in this.sources){var c=isc.DS.get(b);if(c){var d=this.sources[b].fields,e;for(e in d){var f=d[e],g=null;if(f=="*")g=c.fields[e];else if(isc.isA.String(f))g=c.fields[f];else if(isc.isAn.Object(f)){g=isc.addProperties({},c.fields[c.fields[f.field]]);isc.addProperties(g,f)}if(g)a[e]=g}}}},isc.A.inheritsSchema=function(a){if(a==
null)return false;if(isc.isA.String(a))a=this.getSchema(a);if(a==this||a==isc.DS.get("Object"))return true;if(!this.hasSuperDS())return false;return this.superDS().inheritsSchema(a)},isc.A.getInheritedProperty=function(a){if(this[a])return this[a];var b=this.superDS();return b?b.getInheritedProperty(a):null},isc.A.hasSuperDS=function(){if(this.inheritsFrom)return true;return false},isc.A.superDS=function(){if(this.hasSuperDS())return this.getSchema(this.inheritsFrom);return null},isc.A.getField=function(a){if(isc.isAn.Object(a))a=
a.name;var b=this.getFields();return b?b[a]:null},isc.A.getDisplayValue=function(a,b){var c=this.getField(a);if(c==null)return b;if(isc.isAn.Object(c.valueMap)&&!isc.isAn.Array(c.valueMap)&&isc.propertyDefined(c.valueMap,b))return c.valueMap[b];return b},isc.A.getFieldNames=function(a){if(isc.$cv)arguments.$cw=this;if(!a)return isc.getKeys(this.getFields());var b=this.getFields(),c=[],d=0,e;for(e in b)b[e].hidden||(c[d++]=e);return c},isc.A.getLocalFields=function(a){if(this.$38k)return this.fields;
if(a)return this.fields;this.$38l();this.$63p();this.$38k=true;return this.fields},isc.A.getFields=function(){if(isc.$cv)arguments.$cw=this;if(this.mergedFields)return this.mergedFields;if(!this.hasSuperDS()||this==this.superDS())return this.mergedFields=this.getLocalFields();var a=this.superDS();if(this.showLocalFieldsOnly||this.restrictToLocalFields)this.useParentFieldOrder=false;var b=isc.addProperties({},this.getLocalFields()),c;c=this.useParentFieldOrder?{}:b;for(var d=this.restrictToLocalFields?
isc.getKeys(this.getLocalFields()):a.getFieldNames(),e=0;e<d.length;e++){var f=d[e],g=b[f];if(g!=null){var h=a.getField(f);if(h.hidden&&g.hidden==null&&!g.inapplicable)g.hidden=false;if(h.visibility!=null&&g.visibility==null&&!g.inapplicable&&!g.hidden&&h.visibility=="internal")g.visibility="external";var i=isc.addProperties({},g);c[f]=a.combineFieldData(g);if(i.$76s)c[f].title=h.title}else if(this.showLocalFieldsOnly){c[f]=isc.addProperties({},a.getField(f));c[f].hidden="true"}else c[f]=a.getField(f);
this.useParentFieldOrder&&delete b[f]}this.useParentFieldOrder&&isc.addProperties(c,b);if(this.restrictToLocalFields&&isc.Schema&&isc.isA.Schema(this)){b=a.getFieldNames();for(e=0;e<b.length;e++){f=b[e];d=a.getField(f);if(d.xmlAttribute)c[f]=c[f]||d}}return this.mergedFields=c},isc.A.hasFields=function(){if(this.fields)return true;else if(this.inheritsFrom)for(var a=this;a.inheritsFrom;){a=isc.DataSource.get(this.inheritsFrom);if(a.fields)return true}return false},isc.A.getFlattenedFields=function(a,
b,c){a=a||{};for(var d=this.getFieldNames(),e=0;e<d.length;e++){var f=d[e],g=this.getField(f);if(this.fieldIsComplexType(f)){g=this.getFieldDataSource(g);if(b!=null)b=(b?b+"/":"")+f;g.getFlattenedFields(a,b,c)}else if(a[f]==null){g.sourceDS=this.ID;if(b){g=isc.addProperties({},g);g[c]=b+"/"+f}a[f]=g}}return a},isc.A.fieldIsComplexType=function(a){a=this.getField(a);if(a==null)return false;return a.type!=null&&!a.xmlAttribute&&this.getSchema(a.type)!=null||this.fieldIsAnonDataSource(a)},isc.A.fieldIsAnonDataSource=
function(a){if(!a.fields)return false;a=isc.isAn.Array(a.fields)?a.fields:isc.getValues(a.fields);return a.length>0&&isc.isAn.Object(a.get(0))},isc.A.getFieldDataSource=function(a,b){if(!a)return null;if(this.fieldIsAnonDataSource(a)){if(!a.$67z){var c=isc.DataSource.create({"class":"DataSource",fields:a.fields});a.$67z=c}return a.$67z}return a.type!=null?this.getSchema(a.type,b):null},isc.A.findTagOfType=function(a,b,c){for(var d=this.getFieldNames(),e=0;e<d.length;e++){var f=d[e],g=this.getField(f);
if(g.type==a)return[this,f,b,c];if(this.fieldIsComplexType(f))if(f=this.getFieldDataSource(g).findTagOfType(a,this,f))return f}},isc.A.getTextContentField=function(){return this.getField(this.textContentProperty)},isc.A.hasXMLElementFields=function(a){a=a||this.textContentProperty;for(var b=this.getFieldNames(),c=0;c<b.length;c++)if(b[c]!=a)if(!this.getField(b[c]).xmlAttribute)return true;return false},isc.A.getGroups=function(){for(var a=this;a.groups==null&&a.hasSuperDS();)a=a.superDS();return a.groups},
isc.A.getObjectField=function(a,b,c){if(!a)return null;var d=this.getLocalFields(),e=isc.getKeys(d).reverse(),f=isc.DataSource.getNearestSchemaClass(a);if(c==null)c={};for(var g=-1,h=null,i=0;i<e.length;i++){var j=e[i],k=d[j];if(!(isc.endsWith(j,this.$dr)||isc.endsWith(j,this.$dq)))if(!b&&(c[j]||k.advanced||k.inapplicable||k.hidden||k.visibility!=null&&k.visibility=="internal"))c[j]=j;else{if(!f&&k.type==a)return j;if(f&&f.isA(k.type)){k=isc.DS.getInheritanceDistance(k.type,a);if(h==null||k<g){h=
j;g=k}}}}if(h!=null)if(g==0||!this.hasSuperDS())return h;else{if(b=this.superDS().getObjectField(a,b,c)){var l=this.getField(b).type;l=isc.DS.getInheritanceDistance(l,a)}return b&&l<g?b:h}else if(this.hasSuperDS())return this.superDS().getObjectField(a,b,c);return null},isc.A.getLocalPrimaryKeyFields=function(){if(!this.primaryKeys){this.primaryKeys={};var a=this.getFields(),b;for(b in a){var c=a[b];if(c.primaryKey)this.primaryKeys[b]=c}}return this.primaryKeys},isc.A.filterPrimaryKeyFields=function(a){var b=
this.getPrimaryKeyFields();return isc.applyMask(a,isc.getKeys(b))},isc.A.filterDSFields=function(a){var b=this.getFields();return isc.applyMask(a,isc.getKeys(b))},isc.A.recordHasAllKeys=function(a){var b=this.getPrimaryKeyFields(),c;for(c in b)if(a[c]==null)return false;return true},isc.A.getForeignKeysByRelation=function(a,b){var c=this.getForeignKeyFields(b);if(!c)return{};var d={},e;for(e in c){var f=isc.DataSource.getForeignFieldName(c[e]);if((f=a[f])||f===0)d[e]=f}return d},isc.A.getPrimaryKeyFields=
function(){if(!this.mergedPrimaryKeys){this.mergedPrimaryKeys={};this.hasSuperDS()&&isc.addProperties(this.mergedPrimaryKeys,this.superDS().getPrimaryKeyFields());isc.addProperties(this.mergedPrimaryKeys,this.getLocalPrimaryKeyFields())}return this.mergedPrimaryKeys},isc.A.getForeignKeyFields=function(a){if(isc.isA.DataSource(a))a=a.ID;var b=this.getFields();if(!b)return null;var c={},d;for(d in b){var e=b[d];if(e.foreignKey){if(a)if(isc.DataSource.getForeignDSName(e,a||this)!=a)continue;c[e.name]=
e}}return c},isc.A.getLocalPrimaryKeyFieldNames=function(){var a=this.getLocalPrimaryKeyFields(),b=[],c;for(c in a)b.add(c);return b},isc.A.getPrimaryKeyFieldNames=function(){return isc.getKeys(this.getPrimaryKeyFields())},isc.A.getPrimaryKeyField=function(){var a=this.getPrimaryKeyFields(),b;for(b in a)return a[b]},isc.A.getPrimaryKeyFieldName=function(){return this.getPrimaryKeyFieldNames()[0]},isc.A.addChildDataSource=function(a){(this.$38m=this.$38m||[]).add(a)},isc.A.getChildDataSources=function(){return this.$38m},
isc.A.getChildDataSource=function(a){var b=this.getChildDataSources();if(b==null)return null;for(var c,d=0;d<b.length;d++)if(!(!b[d]||a&&b[d]==this))if(c){if(c!=b[d]){this.logInfo("getChildDatasource(): This DataSource has multiple child DataSources defined making getChildDataSource() ambiguous. Returning the first child dataSource only - call getChildDataSources() to retrieve a complete list.");break}}else c=b[d];return c},isc.A.getTreeRelationship=function(a,b){if(isc.isA.String(a))a=this.getSchema(a);
var c=this.getFields();if(b==null)for(var d in c){var e=c[d];if(e.foreignKey!=null)if(!a||a.getID()==isc.DataSource.getForeignDSName(e,this)){b=d;break}}var f;if(b==null&&a){b=f=isc.getKeys(this.fields).intersect(isc.getKeys(a.fields))[0];this.logWarn("no foreign key declaration, guessing tree relationship is on field name: "+b+" which occurs in both DataSources")}var g;if(b)g=c[b];g==null&&this.logDebug("getTreeRelationship(): Unable to find foreignKeyField.foreignKeyFieldName specified as:"+b);
a||(a=g?this.getSchema(isc.DataSource.getForeignDSName(g,this)):this);f||(f=g?isc.DataSource.getForeignFieldName(g):null);if(f==null){f=a.getPrimaryKeyFieldNames();if(isc.isAn.Array(f)){f.length>1&&this.logWarn("getTreeRelationship: dataSource '"+a.ID+"' has multi-field primary key, which is not supported for tree viewing.  Using field '"+f[0]+"' as the only primary key field");f=f[0]}f=f}var h,i;if(this.childrenField)i=this.childrenField;for(d in c){g=c[d];if(g.isFolderProperty)h=d;if(g.childrenProperty)i=
d;if(i==d&&g.multiple==null)g.multiple=true}c={childDS:this,parentDS:a,isFolderProperty:h};if(b){c.parentIdField=b;c.idField=f}if(i)c.childrenProperty=i;i==null&&b==null&&this.logInfo("getTreeRelationship(): No specified foreignKeyField or childrenProperty.");if(a==this){i=b?this.getField(b).rootValue:null;c.rootValue=i==null?null:i}return c},isc.A.combineFieldOrders=function(a,b,c){var d=[];this.$38n(b,0,a,d,c);for(var e in a){var f=a[e],g=b.findIndex(this.$375,e);if(g!=-1){f=this.combineFieldData(b[g]);
if(c==null||c(f,this))d.add(f);this.$38n(b,g+1,a,d,c)}else if(c==null||c(f,this))d.add(isc.addProperties({},f))}return d},isc.A.$38n=function(a,b,c,d,e){for(b=b;b<a.length;b++){var f=a[b];if(f.name!=null&&c[f.name]!=null)break;if(!(e==null||!e(f,this))){isc.SimpleType.addTypeDefaults(f);d.add(f)}}},isc.A.combineFieldData=function(a,b){var c;c=isc.isAn.Object(b)?b:this.getField(b||a.name);return isc.DataSource.combineFieldData(a,c)},isc.A.$38l=function(a){if(a==null)a=this.fields;for(var b in a){var c=
a[b];if(c&&c.required==null&&c.xmlRequired!=null&&c.xmlNonEmpty!=null)c.required=c.xmlRequired&&c.xmlNonEmpty;if(c&&(c.childrenProperty||c.name==this.childrenField))if(!c.type)c.type=this.ID;isc.SimpleType.addTypeDefaults(c,this);this.$75f(c)}},isc.A.$75f=function(a){var b={type:"required"};if(a.required){b=isc.addProperties({},b);var c=a.requiredMessage||this.requiredMessage;if(c!=null)b.errorMessage=c;if(a.validators){if(!isc.isAn.Array(a.validators))a.validators=[a.validators];if(a.validators.$69)a.validators=
a.validators.duplicate();a.validators.add(b)}else a.validators=[b]}},isc.A.$63p=function(){if(this.autoDeriveTitles)for(var a in this.fields){var b=this.fields[a];if(b.title==null){b.title=this.getAutoTitle(a);b.$76s=true}}},isc.A.getAutoTitle=function(a){return isc.DataSource.getAutoTitle(a)},isc.A.getType=function(a){if(this.schemaNamespace){var b=isc.SchemaSet.get(this.schemaNamespace).getSimpleType(a);if(b)return b}b=isc.SimpleType.getType(a);if(b!=null)return b;if(this.types&&this.types[a])return this.types[a];
return null},isc.A.firstCacheAllDataRequest=function(a){this.logIsInfoEnabled("cacheAllData")&&this.logInfo("firstCacheAllDataRequest: refreshing cache","cacheAllData");this.$498=[a];this.cacheResultSet=isc.ResultSet.create({dataSource:this,fetchMode:"local",allRows:this.cacheData?this.cacheData:null,cachingAllData:true,dataArrived:function(b,c){this.logIsInfoEnabled("cacheAllData")&&this.logInfo("cacheAllData - cacheResultSet.dataArrived: startRow/endRow: "+b+"/"+c);if(this.lengthIsKnown()){var d=
this.getDataSource();if(d.cacheResultSet!=null){d.cacheLastFetchTime=(new Date).getTime();if(d.clientOnly)d.testData=d.cacheData=this.getAllRows();d.processDeferredRequests()}}}});if(this.cacheData){this.logIsInfoEnabled("cacheAllData")&&this.logInfo("firstCacheAllDataRequest: updating last fetch time","cacheAllData");this.cacheLastFetchTime=(new Date).getTime();if(this.clientOnly)this.testData=this.cacheData;this.processDeferredRequests()}else{this.logIsInfoEnabled("cacheAllData")&&this.logInfo("firstCacheAllDataRequest: issuing fetch",
"cacheAllData");this.cacheResultSet.get(0);return true}},isc.A.fetchingClientOnlyData=function(a){if(a.cachingAllData)return false;var b=this.useTestDataFetch==null?this.clientOnly==true&&this.cacheAllData!=true&&(this.dataURL!=null||this.testFileName!=null):this.useTestDataFetch;this.logIsInfoEnabled("cacheAllData")&&this.logInfo("fetchingClientOnlyData: useTestDataFetch is "+b,"cacheAllData");if(this.clientOnly){a.clientOnly=true;if(this.testData&&!this.cacheData)this.cacheData=this.testData;else if(this.cacheData&&
!this.testData)this.testData=this.cacheData}if(this.$498){this.$498.add(a);return true}if(b==false&&this.clientOnly&&(this.testFileName||this.dataURL))b=true;if(!b&&(this.cacheAllData&&this.cacheNeedsRefresh()||this.clientOnly&&!this.testData&&this.dataURL!=null&&this.testDataFile!=null))return this.firstCacheAllDataRequest(a);else if(this.clientOnly&&!this.testData&&(this.testFileName||this.dataURL)||this.cacheAllData&&this.cacheNeedsRefresh()){this.logIsInfoEnabled("cacheAllData")&&this.logInfo("fetchingClientOnlyData: issuing oneTimeDS fetch",
"cacheAllData");this.$498=[a];b=this.dataURL||this.testFileName;var c=this.getDataFormat(a);if(c=="iscServer")c=b.match(/\.xml$/i)?"xml":"json";var d=this.getOperationBinding(a);a=this.transformRequest;var e=this.transformResponse,f=this.$ba;if(f){if(f.transformRequest)a=this[isc.$ah+"transformRequest"];if(f.transformResponse)e=this[isc.$ah+"transformResponse"]}d=d.recordName||this.recordName||(this.inheritsFrom?isc.isA.String(this.inheritsFrom)?this.inheritsFrom:this.inheritsFrom.ID:this.ID);var g=
isc.DataSource.create({ID:this.ID+"$499",inheritsFrom:this.ID,dataURL:b,dataFormat:c,recordXPath:this.recordXPath,transformRequest:a,transformResponse:e,recordName:d,showPrompt:this.showPrompt});this.logInfo("clientOnly datasource performing one-time "+c+" fetch via: "+b);this.addProperties({transformRequest:isc.DataSource.getInstanceProperty("transformRequest"),transformResponse:isc.DataSource.getInstanceProperty("transformResponse")});var h=this;if(this.cacheAllData)g.cacheAllData=false;g.sendDSRequest({operationType:"fetch",
willHandleError:true,callback:function(i,j){var k;if(i.status!=isc.DSResponse.STATUS_SUCCESS){h.logWarn("one-time fetch failed with status: "+i.status+" and messsage: "+(j?j:"N/A")+".  Initializing an empty Array as testData.");k=[]}else{h.logInfo("One-time fetch complete: "+(j?j.length:"null")+" records");k=h.initializeSequenceFields(j)}if(h.cacheAllData){h.cacheLastFetchTime=(new Date).getTime();h.cacheResultSet=isc.ResultSet.create({dataSource:h.ID,fetchMode:"local",allRows:k});h.cacheLastFetchTime=
(new Date).getTime()}if(h.clientOnly)h.cacheData=h.testData=k;h.processDeferredRequests();g.destroy()}});return true}},isc.A.getClientOnlyResponse=function(a,b){if((b=b||this.testData)&&!this.testData&&this.clientOnly)this.cacheData=this.testData=b;if(!b||isc.isA.String(b)){if(isc.isA.String(b)){this.logInfo(this.ID+" datasource: using testData property as data");this.cacheData=this.testData=isc.eval(b)}else if(window[this.ID+"TestData"]){this.logInfo(this.ID+" datasource: using "+this.ID+"TestData object as data");
this.cacheData=this.testData=window[this.ID+"TestData"]}else{this.logInfo(this.ID+" datasource: testData property and "+this.ID+"TestData object not found, using empty list as data");this.cacheData=this.testData=[]}b=this.testData}var c={status:0};switch(a.operationType){case "fetch":case "select":case "filter":var d=a.data;if(isc.isAn.Array(d))d=d[0];var e=d=this.applyFilter(b,d,a);if(a.startRow!=null){var f=a.startRow,g=a.endRow,h=d.length;if(e=a.sortBy){isc.isAn.Array(e)||(e=[e]);if(isc.isAn.Object(e[0]))e=
isc.DS.getSortBy(e);for(var i=[],j=0;j<e.length;j++){var k=true;if(e[j].startsWith("-")){e[j]=e[j].substring(1);k=false}i[j]=k}d.sortByProperties(e,i)}g=Math.min(g,h-1);e=d.slice(f,g+1);c.startRow=f;c.endRow=g;c.totalRows=h}if(this.copyLocalResults)for(j=0;j<e.length;j++)e[j]=isc.addProperties({},e[j]);c.data=e;break;case "remove":case "delete":d=this.findByKeys(a.data,b);if(d==-1)this.logWarn("clientOnly remove operation: Unable to find record matching criteria:"+this.echo(a.data));else{b.removeAt(d);
c.data=isc.addProperties({},a.data)}break;case "add":case "insert":d=isc.addProperties({},a.data);d=this.applySequenceFields(d);b.add(d);c.data=isc.addProperties({},d);break;case "replace":case "update":d=this.findByKeys(a.data,b);if(d==-1)this.logWarn("clientOnly update operation: Unable to find record matching criteria:"+this.echo(a.data));else{d=b[d];isc.addProperties(d,a.data);c.data=isc.addProperties({},d)}}return c},isc.A.getNextSequenceValue=function(a){for(var b=this.testData,c=0,d=0;d<b.length;d++){var e=
b[d][a.name];if(e!=null&&e>c)c=e}return c+1},isc.A.applySequenceFields=function(a){if(this.clientOnly){var b=this.getFields(),c;for(c in b){var d=b[c];if((d.type=="sequence"||d.primaryKey)&&a[c]==null)a[c]=this.getNextSequenceValue(d)}return a}},isc.A.initializeSequenceFields=function(a){if(isc.isAn.Array(a)){var b=this.getFields(),c=[],d;for(d in b)if(b[d].type=="sequence"||b[d].primaryKey)c.add(d);for(b=0;b<a.length;b++)for(var e=0;e<c.length;e++){d=c[e];if(a[b][d]==null)a[b][d]=b}return a}},isc.A.findByKeys=
function(a,b,c,d){return b.findByKeys(a,this,c,d)},isc.A.applyFilter=function(a,b,c){var d=[];if(!a||a.length==0)return d;b=b;if(this.autoConvertRelativeDates==true){this.logIsInfoEnabled("relativeDates")&&this.logInfo("Calling convertRelativeDates from applyFilter - data is\n\n"+isc.echoFull(b));b=this.convertRelativeDates(b);this.logIsInfoEnabled("relativeDates")&&this.logInfo("Called convertRelativeDates from applyFilter - data is\n\n"+isc.echoFull(b))}if(this.isAdvancedCriteria(b))return this.recordsMatchingAdvancedFilter(a,
b,c);return this.recordsMatchingFilter(a,b,c)},isc.A.recordsMatchingFilter=function(a,b,c){var d=isc.getKeys(b),e=d.length,f=[],g,h,i,j,k;if(c&&c.operation&&this.operationBindings){g=c.operation;if(g=g.ID==g.dataSource+"_"+g.type?this.operationBindings.find({operationId:null,operationType:g.type}):this.operationBindings.find({operationId:c.operation.ID,operationType:g.type})){var l=g.customCriteriaFields;if(isc.isA.String(l)){l=l.split(",");for(g=0;g<l.length;g++)l[g]=l[g].replace(/^\s+|\s+$/g,"")}}}for(var m=
0,n=a.length;m<n;m++){g=a[m];if(g!=null){h=true;for(k=0;k<e;k++){i=d[k];if(i!=null)if(!(this.dropUnknownCriteria&&!this.getField(i))){j=false;if(isc.isA.List(l)&&l.contains(i))j=true;if(!(!j&&this.getField(i).customSQL)){j=g[i];i=b[i];if(!this.fieldMatchesFilter(j,i,c)){h=false;break}}}}h&&f.add(g)}}return f});isc.B.push(isc.A.recordMatchesFilter=function(a,b,c){if(this.isAdvancedCriteria(b))return this.recordsMatchingAdvancedFilter([a],b,c).length>0;return this.recordsMatchingFilter([a],b,c).length>
0},isc.A.fieldMatchesFilter=function(a,b,c){if(isc.isAn.Array(b)){if(b.contains(a))return true;return false}if(isc.isA.Date(a)&&isc.isA.Date(b))return Date.compareDates(a,b)==0;if(!isc.isA.String(a)&&!isc.isA.String(b)){this.logIsDebugEnabled()&&this.logDebug("Direct compare: "+a+"=="+b);return a==b}if(b==null)b=isc.emptyString;if(a==null)a=isc.emptyString;isc.isA.String(a)||(a=a.toString());isc.isA.String(b)||(b=b.toString());if(!this.filterIsCaseSensitive){a=a.toLocaleLowerCase();b=b.toLocaleLowerCase()}var d;
if(c)d=c.textMatchStyle;if(!this.supportsTextMatchStyle(d)){if(!this.$63c)this.$63c={};if(!this.$63c[d]){this.logWarn("Text match style specified as '"+d+"': This is not supported for this dataSource - performing a substring match instead");this.$63c[d]=true}d=this.getTextMatchStyle(d)}return d==this.$45y?isc.startsWith(a,b):d==this.$19q?isc.contains(a,b):a==b},isc.A.supportsTextMatchStyle=function(a){if(!this.clientOnly&&this.dataFormat!=this.$50j)return true;return a==null||a==this.$19q||a==this.$50i||
a==this.$45y},isc.A.getTextMatchStyle=function(a){if(a==null)a=this.$50i;if(!this.supportsTextMatchStyle(a))a=this.$19q;return a},isc.A.compareTextMatchStyle=function(a,b){a=this.getTextMatchStyle(a);b=this.getTextMatchStyle(b);if(a==b)return 0;if(a==this.$50i)return 1;if(b==this.$50i)return-1;if(a==this.$45y)return 1;return-1},isc.A.compareCriteria=function(a,b,c,d){if(this.logIsInfoEnabled())this.logInfo("Comparing criteria, oldCriteria:\n"+this.echo(b)+"\nnewCriteria:\n"+this.echo(a)+", policy: "+
(d||this.criteriaPolicy));if(b==null)return-1;var e=this.getTextMatchStyle(c?c.textMatchStyle:null);if(this.isAdvancedCriteria(a)||this.isAdvancedCriteria(b)){var f;if(this.isAdvancedCriteria(a)){if(this.isAdvancedCriteria(b))f=this.compareAdvancedCriteria(a,b,c);else{var g=0,h;for(h in b)g++;if(g==0)f=1}if(f==void 0){b=isc.DataSource.convertCriteria(b,e);f=this.compareAdvancedCriteria(a,b,c)}}else{a=isc.DataSource.convertCriteria(a,e);f=this.compareAdvancedCriteria(a,b,c)}if(f==void 0)f=-1;d=d||
this.criteriaPolicy;return d=="dropOnShortening"?f:f==0?0:-1}d=d||this.criteriaPolicy;return d=="dropOnShortening"?e==this.$50i?this.dropOnFieldChange(a,b,c):this.dropOnShortening(a,b,c):this.dropOnChange(a,b,c)},isc.A.dropOnChange=function(a,b){if(isc.getKeys(b).length!=isc.getKeys(a).length)return-1;for(var c in b){var d=b[c],e=a[c];if(isc.isAn.Array(d)){if(!isc.isAn.Array(e))return-1;if(d.length!=e.length)return-1;if(d.intersect(e).length!=d.length)return-1}else if(isc.isA.Date(d)&&isc.isA.Date(e)){if(d.getTime()!=
e.getTime())return-1}else if(d!=e)return-1}return 0},isc.A.dropOnFieldChange=function(a,b){var c=isc.getKeys(a),d=isc.getKeys(b),e=c.length-d.length;if(e<0)return-1;for(var f in b){var g=b[f],h=a[f];if(h==null)return-1;if(isc.isAn.Array(g)){if(!isc.isAn.Array(h))return-1;if(g.length!=h.length)return-1;if(g.intersect(h).length!=g.length)return-1}else if(isc.isA.Date(g)&&isc.isA.Date(h)){if(g.getTime()!=h.getTime())return-1}else if(g!=h)return-1}if(e>0){c.removeList(d);for(d=0;d<c.length;d++)if(this.getField(c[d])==
null)return-1;return 1}return 0},isc.A.dropOnShortening=function(a,b){var c=isc.getKeys(a),d=isc.getKeys(b),e=c.length-d.length;if(e<0)return-1;var f=0,g;for(g in b){var h=b[g],i=a[g];if(i==null)return-1;if(this.getField(g)==null&&h!=i)return-1;if(isc.isAn.Array(h)){if(!isc.isAn.Array(i))return-1;if(h.length!=i.length)return-1;if(h.intersect(i).length!=h.length)return-1}else if(isc.isA.String(h)){if(!isc.isA.String(i))return-1;if(i.indexOf(h)==-1)return-1;if(h.length>i.length)return-1;if(h.length<
i.length)f=1}else if(isc.isA.Date(h)&&isc.isA.Date(i)){if(h.getTime()!=i.getTime())return-1}else if(h!=i)return-1}if(e>0){c.removeList(d);for(d=0;d<c.length;d++)if(this.getField(c[d])==null)return-1;return 1}return f});isc.B._maxIndex=isc.C+159;isc.A=isc.DataSource;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$628=0;isc.A.$71l={sum:function(a,b){for(var c=0,d=0;d<b.length;d++){var e=a[b[d].name],f=parseFloat(e);if(isc.isA.Number(f)&&f==e)c+=f;else if(e!=
null&&e!=isc.emptyString)return null}return c},avg:function(a,b){for(var c=0,d=0,e=0;e<b.length;e++){var f=a[b[e].name],g=parseFloat(f);if(isc.isA.Number(g)&&g==f){d+=1;c+=g}else if(f!=null&&f!=isc.emptyString)return null}return d>0?c/d:null},max:function(a,b){for(var c,d,e=0;e<b.length;e++){var f=a[b[e].name];if(isc.isA.Date(f)){if(d)return null;if(c==null)c=f.duplicate();else if(c.getTime()<f.getTime())c=f.duplicate()}else{d=true;var g=parseFloat(f);if(isc.isA.Number(g)&&g==f)if(c==null)c=g;else{if(c<
f)c=g}else if(f!=null&&f!=isc.emptyString)return null}}return c},min:function(a,b){for(var c,d,e=0;e<b.length;e++){var f=a[b[e].name];if(isc.isA.Date(f)){if(d)return null;if(c==null)c=f.duplicate();if(f.getTime()<c.getTime())c=f.duplicate()}else if(!(f==null||f==isc.emptyString)){d=true;var g=parseFloat(f);if(isc.isA.Number(g)&&g==f)if(c==null)c=g;else{if(c>f)c=g}else return null}}return c},multiplier:function(a,b){for(var c=0,d=0;d<b.length;d++){var e=a[b[d].name],f=parseFloat(e);if(isc.isA.Number(f)&&
f==e)if(d==0)c=f;else c*=f;else return null}return c}};isc.B.push(isc.A.addSearchOperator=function(a){if(!a||!a.ID)isc.logWarn("Attempted to add null search operator, or operator with no ID");else{if(!isc.DataSource.$57z)isc.DataSource.$57z={};isc.DataSource.$57z[a.ID]!==void 0&&isc.logWarn("Attempted to add existing operator "+a.ID+" - replacing");isc.DataSource.$57z[a.ID]=a}},isc.A.setTypeOperators=function(a,b){if(b){isc.isAn.Array(b)||(b=[b]);if(!isc.DataSource.$570)isc.DataSource.$570={};isc.DataSource.$570[a||
"_all_"]=b}},isc.A.$625=function(){return this.$628++},isc.A.getAutoTitle=function(a,b){b=b||/[_\$]/g;if(!a)return"";isc.isA.String(a)||(a=a.toString());var c;d=a.replace(b," ");var d=d.replace(/^\s+|\s+$/g,"");if(d==d.toUpperCase()||d==d.toLowerCase()){d=d.toLowerCase();var e=true;c="";for(var f=0;f<d.length;f++){var g=d.substr(f,1);if(e){g=g.toUpperCase();e=false}if(g==" ")e=true;c+=g}}else{c=d.substr(0,1).toUpperCase();e=d.substr(0,1)==d.substr(0,1).toUpperCase();var h=false;for(f=1;f<d.length;f++){g=
d.substr(f,1);if(h&&g==g.toLowerCase()){h=false;c=c.substr(0,c.length-1)+" "+c.substr(c.length-1)}if(e&&g==g.toUpperCase())h=true;if(!e&&g==g.toUpperCase())c+=" ";e=g==g.toUpperCase();c+=g}}return c},isc.A.convertCriteria=function(a,b){var c={_constructor:"AdvancedCriteria",operator:"and"},d=[],e;for(e in a){var f=this.getCriteriaOperator(a[e],b);if(isc.isA.Array(a[e])){for(var g={_constructor:"AdvancedCriteria",operator:"or",criteria:[]},h=0;h<a[e].length;h++)g.criteria.add({fieldName:e,operator:f,
value:a[e][h]});d.add(g)}else d.add({fieldName:e,operator:f,value:a[e]})}c.criteria=d;return c},isc.A.getCriteriaOperator=function(a,b){return isc.isA.Number(a)||isc.isA.Date(a)||isc.isA.Boolean(a)?"equals":b=="equals"||b=="exact"?"iEquals":b=="startsWith"?"iStartsWith":"iContains"},isc.A.combineCriteria=function(a,b,c,d){if(!a)return b;if(!b)return a;c||(c="and");if(c!="and"&&c!="or"){isc.logWarn("combineCriteria called with invalid outerOperator '"+c+"'");return null}var e;if(a._constructor!="AdvancedCriteria"&&
b._constructor!="AdvancedCriteria"&&c=="and")for(var f in a){if(b[f]!=void 0){e=true;break}}else e=true;if(!e)return isc.addProperties({},a,b);a=a._constructor=="AdvancedCriteria"?a:isc.DataSource.convertCriteria(a,d);b=b._constructor=="AdvancedCriteria"?b:isc.DataSource.convertCriteria(b,d);d={_constructor:"AdvancedCriteria",operator:c};if(a.operator==c&&b.operator==c){d.criteria=[];d.criteria.addAll(a.criteria);d.criteria.addAll(b.criteria)}else d.criteria=[a,b];return d},isc.A.simplifyAdvancedCriteria=
function(a){if(!this.isAdvancedCriteria(a))return a;a=this.$79a(a);a._constructor="AdvancedCriteria";return a},isc.A.$79a=function(a){var b=a.operator;if(b=="and"||b=="or"){var c=a.criteria;if(c==null||c.length==0)return a;if(c.length==1){a=c[0];return this.$79a(a)}for(var d=[],e=0;e<c.length;e++){var f=c[e];f=this.$79a(f);f.operator==b?d.addList(f.criteria):d.add(f)}a.criteria=d}return a},isc.A.combineFieldData=function(a,b){if(b==null)return a;for(var c in b)if(c=="validators"&&a.validators!=null&&
b.validators!=a.validators){if(b.validators.$69)if(isc.SimpleType.getBaseType(a.type)!=isc.SimpleType.getBaseType(b.type))continue;for(var d=0;d<b.validators.length;d++){var e=b.validators[d];if(!a.validators.contains(e)){if(a.validators.$69)a.validators=a.validators.duplicate();a.validators.add(e)}}}else if(a[c]==null)if(c!="name")a[c]=b[c];return a},isc.A.applyRecordSummaryFunction=function(a,b,c,d){if(b&&c){if(isc.isA.String(a))a=this.$71l[a]?this.$71l[a]:isc.Func.expressionToFunction("record,fields,summaryField",
a);if(isc.isA.Function(a))return a(b,c,d)}},isc.A.registerRecordSummaryFunction=function(a,b){if(isc.isA.String(b))b=isc.Func.expressionToFunction("record,fields,summaryField",b);this.$71l[a]=b});isc.B._maxIndex=isc.C+12;isc.A=isc.DataSource.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.isAdvancedCriteria=function(a){return isc.DS.isAdvancedCriteria(a,this)},isc.A.addSearchOperator=function(a,b){if(!a||!a.ID)isc.logWarn("Attempted to add null search operator, or operator with no ID");
else{isc.DataSource.addSearchOperator(a);if(!this.$570)this.$570={$58d:true};if(b){for(var c=0;c<this.$570.length;c++)this.$570[c].remove(a.ID);for(c=0;c<b.length;c++){this.$570[b[c]]||(this.$570[b[c]]=[a.ID]);this.$570[b[c]].contains(a.ID)||this.$570[b[c]].add(a.ID)}}else{this.$570._all_||(this.$570._all_=[a.ID]);this.$570._all_.contains(a.ID)||this.$570._all_.add(a.ID)}}},isc.A.getSearchOperator=function(a){return isc.DataSource.$57z[a]},isc.A.getTypeOperators=function(a){var b=[];a=a||"text";var c=
isc.SimpleType.getType(a);if(this.$570){for(;c&&!this.$570[c.name];)c=isc.SimpleType.getType(c.inheritsFrom,this);if(c&&this.$570[c.name])b=this.$570[c.name];b.addList(this.$570._all_);if(!this.$570.$58d)return b}for(c=isc.SimpleType.getType(a);c&&!isc.DataSource.$570[c.name];)c=isc.SimpleType.getType(c.inheritsFrom,this);c&&isc.DataSource.$570[c.name]&&b.addList(isc.DataSource.$570[c.name]);b.addList(isc.DataSource.$570._all_);return b},isc.A.setTypeOperators=function(a,b){if(b){isc.isAn.Array(b)||
(b=[b]);if(this.$570)this.$570.$58d=false;else this.$570={};this.$570[a||"_all_"]=b;this.$570.$58d=false}},isc.A.getFieldOperators=function(a){if(isc.isA.String(a))a=this.getField(a);if(!a)return[];if(a&&a.validOperators)return a.validOperators;var b=isc.SimpleType.getType(a.type);a=a.type||"text";b||(a="text");return this.getTypeOperators(a)},isc.A.getFieldOperatorMap=function(a,b,c,d){if(isc.isA.String(a))a=this.getField(a);var e={};a=this.getFieldOperators(a);for(var f=0;f<a.length;f++){var g=
this.getSearchOperator(a[f]);if(g&&(!g.hidden||b))if(!c||g.valueType==c==!d)e[a[f]]=g.titleProperty==null?g.title:isc.Operators[g.titleProperty]}return e},isc.A.getTypeOperatorMap=function(a,b,c,d){var e={};a=this.getTypeOperators(a);for(var f=0;f<a.length;f++){var g=this.getSearchOperator(a[f]);if(g&&(!g.hidden||b))if(!c||g.valueType==c==!d)e[a[f]]=g.titleProperty==null?g.title:isc.Operators[g.titleProperty]}return e});isc.B._maxIndex=isc.C+8;isc.A=isc.DataSource.getPrototype();isc.B=isc._allFuncs;
isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.evaluateCriterion=function(a,b){if(b.requiresServer==true)return true;var c=this.getSearchOperator(b.operator);if(c==null){isc.logWarn("Attempted to use unknown operator "+b.operator);return false}if(this.$80m)if(b.fieldName)this.getFieldOperators(b.fieldName).contains(c.ID)||this.logWarn("Operator "+c.ID+" is not valid for field "+b.fieldName+". Continuing anyway.");return c.condition(b.value,a,b.fieldName,b,c,
this)},isc.A.recordsMatchingAdvancedFilter=function(a,b){var c=[];this.$59u=false;this.$59v=b.strictSQLFiltering;this.$80m=true;for(var d=0;d<a.length;d++){this.evaluateCriterion(a[d],b)&&c.add(a[d]);delete this.$80m}return c},isc.A.compareAdvancedCriteria=function(a,b){var c=this.getSearchOperator(b.operator);if(c!=this.getSearchOperator(a.operator))return-1;return c.compareCriteria(a,b,c,this)});isc.B._maxIndex=isc.C+3;isc.DataSource.registerStringMethods({transformRequest:"dsRequest",transformResponse:"dsResponse,dsRequest,data"});
isc.$571=function(){var a=function(p,q,u,w,v,z){var A;if(!w.criteria)w.criteria=[];if(!isc.isAn.Array(w.criteria)){isc.logWarn("AdvancedCriteria: found boolean operator where subcriteria was not an array.  Subcriteria was: "+isc.echoFull(w.criteria));return false}if(v.isNot)z.$59u=!z.$59u;for(p=0;p<w.criteria.length;p++){u=z.evaluateCriterion(q,w.criteria[p]);if(v.isAnd&&!u)A=false;if(v.isNot&&u)A=false;if(v.isOr&&u)A=true;if(A!=null)break}if(A==null)A=v.isOr?false:true;if(v.isNot)z.$59u=!z.$59u;
return A},b=function(p,q,u,w,v,z){if(z.$59v)if(q[u]==null||p==null)return z.$59u;w=p==q[u];if(isc.isA.Date(p)&&isc.isA.Date(q[u]))w=(z=z.getField(u))&&z.type=="datetime"?Date.compareDates(p,q[u])==0:Date.compareLogicalDates(p,q[u])==0;return v.negate?!w:w},c=function(p,q,u,w,v,z){var A=p;p=p;var B=q[u];if(w.start)A=w.start;if(w.end)p=w.end;if(z.$59v)if(B==null||v.lowerBounds&&A==null||v.upperBounds&&p==null)return z.$59u;z=w=true;var C=isc.isA.Date(q[u]),x=isc.isA.Number(q[u]);if(v.lowerBounds&&A&&
(x&&isNaN(A)||A&&C&&!isc.isA.Date(A)))return false;if(v.upperBounds&&p&&(x&&isNaN(p)||A&&C&&!isc.isA.Date(p)))return false;if(A===null||A===void 0)w=false;if(p===null||p===void 0)z=false;if(C&&!isc.isA.Date(A))w=false;if(C&&!isc.isA.Date(p))z=false;C=isc.isA.Date(A)||isc.isA.Date(p);x=isc.isA.Number(A)||isc.isA.Number(p);B=q[u];if(B===null||B===void 0)B=C?new Date(-864E13):x?Number.MIN_VALUE:"";else{if(x&&isNaN(B)){A=""+A;p=""+p}if(C&&!isc.isA.Date(B))return false}if(v.lowerBounds&&w)if(v.inclusive){if(B<
A)return false}else if(B<=A)return false;if(v.upperBounds&&z)if(v.inclusive){if(B>p)return false}else if(B>=p)return false;return true},d=function(p,q,u,w,v,z){q=q[u];p=p;if(isc.isA.Number(q))q=""+q;if(!isc.isA.String(q))return v.negate;if(q==null)return z.$59v?z.$59u:v.negate;if(p==null)p="";if(isc.isA.Number(p))p=""+p;if(!isc.isA.String(p)||!isc.isA.String(q))return v.negate;if(v.caseInsensitive){q=q.toLowerCase();p=p.toLowerCase()}z=v.startsWith?isc.startsWith(q,p):v.endsWith?isc.endsWith(q,p):
v.equals?q==p:isc.contains(q,p);return v.negate?!z:z},e=function(p,q,u,w,v){p=q[u]==null;return v.negate?!p:p},f=function(p,q,u,w,v){if(p===void 0)return false;if(isc.isA.Date(p)||isc.isA.Date(q[u]))return false;return(v.caseInsensitive?RegExp(p,"i"):RegExp(p)).test(q[u])},g=function(p,q,u,w,v){if(p==null)p=[];else isc.isAn.Array(p)||(p=[p]);if(isc.isA.Date(q[u])){z=false;for(w=0;w<p.length;w++)if(isc.isA.Date(p[w])&&Date.compareDates(p[w],q[u])==0){z=true;break}}else var z=p.contains(q[u]);return v.negate?
!z:z},h=function(p,q,u,w,v){if(p==null)return true;w=q[p]==q[u];if(isc.isA.Date(q[p])&&isc.isA.Date(q[u]))w=Date.compareDates(q[p],q[u])==0;return v.negate?!w:w},i=function(p,q,u,w,v,z){if(p==null)return true;return c(q[p],q,u,w,v,z)},j=function(p,q,u,w,v,z){if(p==null)return true;return d(q[p],q,u,w,v,z)},k=function(p,q,u,w){if(!q.criteria)q.criteria=[];if(!isc.isAn.Array(q.criteria)){isc.logWarn("AdvancedCriteria: boolean compareCriteria found where old subcriteria was not an array");return-1}if(!p.criteria)p.criteria=
[];if(!isc.isAn.Array(p.criteria)){isc.logWarn("AdvancedCriteria: boolean compareCriteria found where new subcriteria was not an array");return-1}var v,z=0,A=q.criteria.length,B=p.criteria.length;if(B>A&&u.isOr)return-1;q=isc.clone(q.criteria);p=isc.clone(p.criteria);for(var C=0;C<A;C++){var x=q[C],D=C>B?null:p[C];if(!D||D&&D.fieldName!=x.fieldName||D.operator!=x.operator||D.processed==true){D=null;for(var F=0;F<B;F++)if(!p[F].processed)if(p[F].fieldName==x.fieldName&&p[F].operator==x.operator){D=
p[F];break}}if(D&&x){D.processed=true;v=w.compareAdvancedCriteria(D,x)}else if(x&&!D){if(u.isOr)v=1;if(u.isAnd)v=-1;if(u.isNot)v=-1}if(u.isAnd&&v==-1)return-1;if(u.isOr&&v==-1)return-1;if(u.isNot&&v==1)return-1;if(v!=0)z=1}for(C=0;C<B;C++)if(!p[C].processed){if(u.isOr)return-1;if(u.isAnd)return 1;if(u.isNot)return-1}return z},l=function(p,q,u,w){if(p.fieldName==q.fieldName){u=p.value==q.value;if(isc.isA.Date(p.value)&&isc.isA.Date(q.value))u=(w=w.getField(p.fieldName))&&w.type=="datetime"?Date.compareDates(p.value,
q.value)==0:Date.compareLogicalDates(p.value,q.value)==0;return u?0:-1}else return-1},m=function(p,q,u){if(p.fieldName==q.fieldName){if(u.upperBounds&&u.lowerBounds){if(p.start==q.start||isc.isA.Date(p.start)&&isc.isA.Date(q.start)&&Date.compareDates(p.start,q.start)==0)if(p.end==q.end||isc.isA.Date(p.end)&&isc.isA.Date(q.end)&&Date.compareDates(p.end,q.end)==0)return 0}else if(p.value==q.value||isc.isA.Date(p.value)&&isc.isA.Date(q.value)&&Date.compareDates(p.value,q.value)==0)return 0;var w=p.start==
null?p.value:p.start,v=q.start==null?q.value:q.start;p=p.start==null?p.value:p.end;q=q.start==null?q.value:q.end;var z=true,A=true,B=true,C=true;if(v==null)z=false;if(q==null)A=false;if(w==null)B=false;if(p==null)C=false;if(u.lowerBounds&&!u.upperBounds&&!B&&!z)return 0;if(u.lowerBounds&&!u.upperBounds&&(w>v||B&&!z))return 1;if(u.upperBounds&&!u.lowerBounds&&!C&&!A)return 0;if(u.upperBounds&&!u.lowerBounds&&(p<q||C&&!A))return 1;if(u.lowerBounds&&u.upperBounds){if(w>=v&&w<=q&&p<=q&&p>=v)return 1;
if(B&&!z||C&&!A)return 1;if(!B&&!z&&!C&&!z)return 0}}return-1},n=function(p,q,u){var w=q.value,v=p.value;if(isc.isA.Number(w))w=""+w;if(isc.isA.Number(v))v=""+v;if(!isc.isA.String(w)||!isc.isA.String(v))return-1;if(u.caseInsensitive){w=w.toLowerCase();v=v.toLowerCase()}if(p.fieldName==q.fieldName&&p.value==q.value&&!u.equals)return 0;if(u.equals){if(w==v&&!u.negate||w!=v&&u.negate)return 0;return-1}if(u.startsWith&&!u.negate&&v.length>w.length&&isc.startsWith(v,w))return 1;if(u.startsWith&&u.negate&&
w.length>v.length&&isc.startsWith(w,v))return 1;if(u.endsWith&&!u.negate&&v.length>w.length&&isc.endsWith(v,w))return 1;if(u.endsWith&&u.negate&&w.length>v.length&&isc.endsWith(w,v))return 1;if(!u.startsWith&&!u.endsWith&&!u.negate&&v.length>w.length&&isc.contains(v,w))return 1;if(!u.startsWith&&!u.endsWith&&u.negate&&w.length>v.length&&isc.contains(w,v))return 1;return-1},o=function(p,q){return p.fieldName==q.fieldName?0:-1},s=function(p,q){return p.value==q.value&&p.fieldName==q.fieldName?0:-1},
r=function(p,q,u){if(p.fieldName==q.fieldName){if(!isc.isAn.Array(q.value)||!isc.isAn.Array(p.value))return-1;if(p.value.equals(q.value))return 0;if(!u.negate&&q.value.containsAll(p.value))return 1;if(u.negate&&p.value.containsAll(q.value))return 1}return-1},t=function(p,q){return p.value==q.value&&p.fieldName==q.fieldName?0:-1};a=[{ID:"equals",titleProperty:"equalsTitle",negate:false,valueType:"fieldType",condition:b,compareCriteria:l,getCriterion:function(p,q){var u={fieldName:p,operator:this.ID};
u.value=isc.isA.RelativeDateItem(q)?q.getRelativeDate()||q.getValue():q.getValue();return u}},{ID:"notEqual",titleProperty:"notEqualTitle",negate:true,valueType:"fieldType",condition:b,compareCriteria:l,getCriterion:function(p,q){var u={fieldName:p,operator:this.ID};u.value=isc.isA.RelativeDateItem(q)?q.getRelativeDate()||q.getValue():q.getValue();return u}},{ID:"greaterThan",titleProperty:"greaterThanTitle",lowerBounds:true,valueType:"fieldType",condition:c,compareCriteria:m,getCriterion:function(p,
q){var u={fieldName:p,operator:this.ID};u.value=isc.isA.RelativeDateItem(q)?q.getRelativeDate()||q.getValue():q.getValue();return u}},{ID:"lessThan",titleProperty:"lessThanTitle",upperBounds:true,valueType:"fieldType",condition:c,compareCriteria:m,getCriterion:function(p,q){var u={fieldName:p,operator:this.ID};u.value=isc.isA.RelativeDateItem(q)?q.getRelativeDate()||q.getValue():q.getValue();return u}},{ID:"greaterOrEqual",titleProperty:"greaterOrEqualTitle",lowerBounds:true,inclusive:true,valueType:"fieldType",
condition:c,compareCriteria:m,getCriterion:function(p,q){var u={fieldName:p,operator:this.ID};u.value=isc.isA.RelativeDateItem(q)?q.getRelativeDate()||q.getValue():q.getValue();return u}},{ID:"lessOrEqual",titleProperty:"lessOrEqualTitle",upperBounds:true,inclusive:true,valueType:"fieldType",condition:c,compareCriteria:m,getCriterion:function(p,q){var u={fieldName:p,operator:this.ID};u.value=isc.isA.RelativeDateItem(q)?q.getRelativeDate()||q.getValue():q.getValue();return u}},{ID:"between",titleProperty:"betweenTitle",
lowerBounds:true,upperBounds:true,valueType:"valueRange",condition:c,compareCriteria:m,getCriterion:function(p,q){var u={fieldName:p,operator:this.ID};u.value=isc.isA.RelativeDateItem(q)?q.getRelativeDate()||q.getValue():q.getValue();return u}},{ID:"betweenInclusive",titleProperty:"betweenInclusiveTitle",lowerBounds:true,upperBounds:true,hidden:true,valueType:"valueRange",inclusive:true,condition:c,compareCriteria:m,getCriterion:function(p,q){var u={fieldName:p,operator:this.ID};u.value=isc.isA.RelativeDateItem(q)?
q.getRelativeDate()||q.getValue():q.getValue();return u}},{ID:"iEquals",titleProperty:"iEqualsTitle",equals:true,caseInsensitive:true,valueType:"fieldType",condition:d,compareCriteria:n},{ID:"iContains",titleProperty:"iContainsTitle",caseInsensitive:true,valueType:"fieldType",condition:d,compareCriteria:n},{ID:"iStartsWith",titleProperty:"iStartsWithTitle",startsWith:true,caseInsensitive:true,valueType:"fieldType",condition:d,compareCriteria:n},{ID:"iEndsWith",titleProperty:"iEndsWithTitle",endsWith:true,
caseInsensitive:true,valueType:"fieldType",condition:d,compareCriteria:n},{ID:"contains",titleProperty:"containsTitle",hidden:true,valueType:"fieldType",condition:d,compareCriteria:n},{ID:"startsWith",titleProperty:"startsWithTitle",startsWith:true,hidden:true,valueType:"fieldType",condition:d,compareCriteria:n},{ID:"endsWith",titleProperty:"endsWithTitle",endsWith:true,hidden:true,valueType:"fieldType",condition:d,compareCriteria:n},{ID:"iNotEqual",titleProperty:"iNotEqualTitle",caseInsensitive:true,
equals:true,negate:true,valueType:"fieldType",condition:d,compareCriteria:n},{ID:"iNotContains",titleProperty:"iNotContainsTitle",caseInsensitive:true,negate:true,valueType:"fieldType",condition:d,compareCriteria:n},{ID:"iNotStartsWith",titleProperty:"iNotStartsWithTitle",startsWith:true,caseInsensitive:true,negate:true,valueType:"fieldType",condition:d,compareCriteria:n},{ID:"iNotEndsWith",titleProperty:"iNotEndsWithTitle",endsWith:true,caseInsensitive:true,negate:true,valueType:"fieldType",condition:d,
compareCriteria:n},{ID:"notContains",titleProperty:"notContainsTitle",negate:true,hidden:true,valueType:"fieldType",condition:d,compareCriteria:n},{ID:"notStartsWith",titleProperty:"notStartsWithTitle",startsWith:true,negate:true,hidden:true,valueType:"fieldType",condition:d,compareCriteria:n},{ID:"notEndsWith",titleProperty:"notEndsWithTitle",endsWith:true,negate:true,hidden:true,valueType:"fieldType",condition:d,compareCriteria:n},{ID:"isNull",titleProperty:"isNullTitle",valueType:"none",condition:e,
compareCriteria:o},{ID:"notNull",titleProperty:"notNullTitle",negate:true,valueType:"none",condition:e,compareCriteria:o},{ID:"regexp",titleProperty:"regexpTitle",hidden:true,valueType:"custom",condition:f,compareCriteria:s},{ID:"iregexp",titleProperty:"iregexpTitle",hidden:true,caseInsensitive:true,valueType:"custom",condition:f,compareCriteria:s},{ID:"inSet",titleProperty:"inSetTitle",hidden:true,valueType:"valueSet",condition:g,compareCriteria:r},{ID:"notInSet",titleProperty:"notInSetTitle",negate:true,
hidden:true,valueType:"valueSet",condition:g,compareCriteria:r},{ID:"equalsField",titleProperty:"equalsFieldTitle",valueType:"fieldName",condition:h,compareCriteria:t},{ID:"notEqualField",titleProperty:"notEqualFieldTitle",negate:true,valueType:"fieldName",condition:h,compareCriteria:t},{ID:"greaterThanField",titleProperty:"greaterThanFieldTitle",lowerBounds:true,valueType:"fieldName",condition:i,compareCriteria:t},{ID:"lessThanField",titleProperty:"lessThanFieldTitle",upperBounds:true,valueType:"fieldName",
condition:i,compareCriteria:t},{ID:"greaterOrEqualField",titleProperty:"greaterOrEqualFieldTitle",lowerBounds:true,inclusive:true,valueType:"fieldName",condition:i,compareCriteria:t},{ID:"lessOrEqualField",titleProperty:"lessOrEqualFieldTitle",upperBounds:true,inclusive:true,valueType:"fieldName",condition:i,compareCriteria:t},{ID:"containsField",titleProperty:"containsFieldTitle",hidden:true,valueType:"fieldName",condition:j,compareCriteria:t},{ID:"startsWithField",titleProperty:"startsWithTitleField",
startsWith:true,hidden:true,valueType:"fieldName",condition:j,compareCriteria:t},{ID:"endsWithField",titleProperty:"endsWithTitleField",endsWith:true,hidden:true,valueType:"fieldName",condition:j,compareCriteria:t},{ID:"and",titleProperty:"andTitle",isAnd:true,valueType:"criteria",condition:a,compareCriteria:k},{ID:"not",titleProperty:"notTitle",isNot:true,valueType:"criteria",condition:a,compareCriteria:k},{ID:"or",titleProperty:"orTitle",isOr:true,valueType:"criteria",condition:a,compareCriteria:k}];
for(b=0;b<a.length;b++)isc.DataSource.addSearchOperator(a[b]);isc.DataSource.setTypeOperators(null,["equals","notEqual","lessThan","greaterThan","lessOrEqual","greaterOrEqual","between","betweenInclusive","isNull","notNull","inSet","notInSet","equalsField","notEqualField","greaterThanField","lessThanField","greaterOrEqualField","lessOrEqualField","and","or","not"]);isc.DataSource.setTypeOperators("text",["regexp","iregexp","contains","startsWith","endsWith","iEquals","iNotEqual","iContains","iStartsWith",
"iEndsWith","notContains","notStartsWith","notEndsWith","iNotContains","iNotStartsWith","iNotEndsWith","containsField","startsWithField","endsWithField"]);isc.DataSource.setTypeOperators("integer",["iContains","iStartsWith","iEndsWith","iNotContains","iNotStartsWith","iNotEndsWith","containsField","startsWithField","endsWithField"]);isc.DataSource.setTypeOperators("float",["iContains","iStartsWith","iEndsWith","iNotContains","iNotStartsWith","iNotEndsWith","containsField","startsWithField","endsWithField"])};
isc.$571();isc.DataSource.create({ID:"Object",fields:{},addGlobalId:false});isc.DataSource.create({ID:"ValueMap",addGlobalId:false,builtinSchema:true,canBeArrayValued:true,fields:{},$cp:"ID",$450:"id",xmlToJS:function(a){if(a==null||isc.xml.elementIsNil(a))return null;for(var b=isc.xml.getElementChildren(a),c=isc.xml.getAttributes(a),d=!isc.isAn.emptyObject(c),e=0;e<b.length;e++){var f=b[e],g=a.getAttribute(this.$cp)||a.getAttribute(this.$450);f=isc.xml.getElementText(f);if(g!=null&&f!=null){d=true;
c[g]=f}else if(g!=null)c[g]=g;else if(f!=null)c[f]=f;else c[isc.emptyString]=isc.emptyString}if(d)return c;return isc.getValues(c)},xmlSerializeFields:function(a,b,c){if(a==null||isc.DS.isSimpleTypeValue(a))return this.Super("xmlSerializeFields",arguments);var d=isc.SB.create();c=(c||"")+"    ";if(isc.isAn.Array(a))for(var e=0;e<a.length;e++){var f=a[e];d.append("\r",c,"<value>",isc.makeXMLSafe(f),"</value>")}else for(e in a){f=a[e];d.append("\r",c,'<value id="',isc.makeXMLSafe(e),'">',isc.makeXMLSafe(f),
"</value>")}return d.toString()}});isc.ClassFactory.defineInterface("DataModel");isc.DataModel.addInterfaceMethods({getDataSource:function(){if(isc.isA.String(this.dataSource))this.dataSource=isc.DS.get(this.dataSource);return this.dataSource},getOperationId:function(a){a=this.getOperation(a);return a==null?null:isc.isA.String(a)?a:a.ID},getOperation:function(a){isc.rpc.getDefaultApplication();var b,c,d=a+"Operation";if(this[d]){b=this[d];if(isc.isAn.Object(b))return b;c=b}if(c==null||isc.isA.String(c)){b=
this.getDataSource();if(b==null){this.logWarn("can't getOperation for type: "+a+", no "+d+" specified, and no dataSource to create an auto-operation");return null}this.logInfo("creating auto-operation for operationType: "+a);b=isc.DataSource.makeDefaultOperation(b,a);c=b.ID;this[d]=c}return b}});isc.defineClass("XJSONDataSource","DataSource");isc.A=isc.XJSONDataSource.getPrototype();isc.A.dataFormat="json";isc.A.dataTransport="scriptInclude";isc.defineClass("Schema","DataSource");isc.A=isc.Schema.getPrototype();
isc.A.dataFormat="xml";isc.A.dropNamespaceDeclarations=true;isc.A.addGlobalId=false;isc.defineClass("WSDLMessage","Schema");isc.A=isc.WSDLMessage.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getWSOperation=function(a){var b=this.getWebService(a);return a&&a.wsOperation?b.getOperation(a.wsOperation):b.getOperationForMessage(this.ID.substring(8))});isc.B._maxIndex=isc.C+1;isc.defineClass("XSElement","Schema");isc.defineClass("XSComplexType",
"Schema");isc.defineClass("SchemaSet").addMethods({init:function(){this.ns.ClassFactory.addGlobalID(this);var a=this.schemaNamespace,b=isc.SchemaSet.schemaSets,c=b[a];if(c==null||c.schema==null&&c.schema.length==0&&this.schema!=null&&this.schema.length!=0)b[a]=this;b=this.serviceNamespace;if(this.schema){this.$530={};this.$531={};this.$693={};for(c=0;c<this.schema.length;c++){var d=this.schema[c];d.serviceNamespace=b;d.schemaNamespace=a;d.location=this.location;if(isc.isA.SimpleType(d))this.$693[d.name]=
d;else if(d.ID)if(isc.isAn.XSElement(d))this.$531[d.ID]=d;else this.$530[d.ID]=d}}isc.SchemaSet.$37r=this},getSchema:function(a,b,c){if(c)c.add(this);else c=[this];var d;if(b==null){d=this.$530[a]||this.$531[a];if(d!=null)return d}if(!this.$70w){isc.SchemaSet.findLoadedImports(this);this.$70w=true}var e=this.$38q;if(e!=null)for(var f=0;f<e.length;f++){d=e[f];if(!c.contains(d)){d=d.getSchema(a,b,c);if(d!=null)return d}}},getSimpleType:function(a,b){if(b)b.add(this);else b=[this];var c;if(this.$693)if(c=
this.$693[a])return c;if(this.$38q!=null)for(var d=0;d<this.$38q.length;d++){c=this.$38q[d];if(!b.contains(c)){c=c.getSimpleType(a,b);if(c!=null)return c}}},setLocation:function(a){this.location=a;if(this.schema)for(var b=0;b<this.schema.length;b++)this.schema[b].location=a},loadImports:function(a){isc.SchemaSet.loadImports(a,this)},loadImport:function(a,b,c,d){return isc.SchemaSet.loadImport(a,b,c,d,this)},doneImporting:function(){this.fireCallback(this.$69o)},addImportXMLSource:function(a,b){this.importSources=
this.importSources||[];this.importSources.add({xmlText:a,location:b})},addSchemaSet:function(a){this.$69n=this.$69n||[];this.$69n.add(a)}});isc.A=isc.SchemaSet;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.schemaSets={};isc.A.$69p=["http://www.w3.org/2001/xml.xsd","http://www.w3.org/2001/XMLSchema","http://www.w3.org/XML/1998/namespace"];isc.A.$69q=[];isc.B.push(isc.A.get=function(a){return this.schemaSets[a]},isc.A.findLoadedImports=function(a){var b=
this.getAllImports(a);if(b)for(var c=a.$38q=a.$38q||[],d=a.$70x=a.$70x||[],e=0;e<b.length;e++){var f=b[e],g=f.isWSDL,h=f.namespace;if(!this.$69p.contains(h))if(!(g&&d.find("serviceNamespace",h)||!g&&c.find("schemaNamespace",h))){var i=g?isc.WebService.get(h):isc.SchemaSet.get(h);if(i==null){i=isc.isA.WebService(a)?"WebService with targetNamespace '"+a.serviceNamespace:"SchemaSet with targetNamespace '"+a.schemaNamespace;a[f.location?"logWarn":"logInfo"](i+"' could not find "+(g?"webService":"SchemaSet")+
" for namespace: '"+h+"'. Pass autoLoadImports to loadWSDL()/loadXMLSchema() or separately load via loadWSDL/loadXMLSchema jsp tag or method","schemaLoader")}else{i.location==null&&i.setLocation(a.location);g?d.add(i):c.add(i)}}}},isc.A.getAllImports=function(a){var b=a.schemaImports;if(a.wsdlImports){a.wsdlImports.setProperty("isWSDL",true);b=b||[];b=b.concat(a.wsdlImports)}return b},isc.A.loadImports=function(a,b){b.$69o=a;var c=this.getAllImports(b);if(!c)return b.doneImporting();for(var d=b.$69r=
0;d<c.length;d++){var e=c[d],f=e.namespace;if(f)if((e.isWSDL?isc.WebService.get(f):isc.SchemaSet.get(f))!=null){b.logDebug("import already loaded: "+f+", skipping","schemaLoader");continue}e.location&&e.location!=b.location&&b.loadImport(f,e.location,function(g){isc.isA.WebService(g)?b.addWebService(g,f):b.addSchemaSet(g,f);b.$69r--;b.logInfo(b+" loaded import: "+g+" as namespace: "+f+", remaining imports: "+b.$69r,"schemaLoader");b.$69r==0&&b.doneImporting()},e.isWSDL)&&b.$69r++}b.$69r==0&&b.doneImporting()},
isc.A.loadImport=function(a,b,c,d,e){a=e.location.substring(0,e.location.lastIndexOf("/"));a.endsWith("/")||(a+="/");var f=isc.Page.combineURLs(a,b);if(f==e.location){e.logDebug("skipping self-reference import: "+f,"schemaLoader");return false}if(this.$69p.contains(f)){e.logDebug("skipping pedantic import: "+f,"schemaLoader");return false}if(this.$69q.contains(f)){e.logDebug("skipping redundant import: "+f,"schemaLoader");return false}this.$69q.add(f);e.logInfo("loading import from: "+f+"\nschema/service base dir: "+
a+"\nimport location: "+b,"schemaLoader");isc.xml[d?"loadWSDL":"loadXMLSchema"](f,function(g){e.fireCallback(c,"schemaSet",[g])},null,true,{initiator:e.initiator||e,captureXML:e.captureXML});return true});isc.B._maxIndex=isc.C+5;isc.SchemaSet.getPrototype().toString=function(){return"["+this.Class+" ns="+this.echoLeaf(this.schemaNamespace)+(this.location?" location="+isc.Page.getLastSegment(this.location):"")+"]"};isc.defineClass("WebService").addMethods({init:function(){var a=this.serviceNamespace;
if(this.messages)for(var b=0;b<this.messages.length;b++)this.messages[b].serviceNamespace=a;this.logInfo("registered service with serviceNamespace: "+a+" service name: "+this.name);isc.WebService.services.add(this);isc.WebService.$37r=this},loadImports:function(a){isc.SchemaSet.loadImports(a,this)},loadImport:function(a,b,c,d){return isc.SchemaSet.loadImport(a,b,c,d,this)},doneImporting:function(){this.fireCallback(this.$69o)},addSchemaSet:function(a){this.$38q=this.$38q||[];this.$38q.add(a)},addWebService:function(a){this.$70x=
this.$70x||[];this.$70x.add(a)},addImportXMLSource:function(a,b){this.importSources=this.importSources||[];this.importSources.add({xmlText:a,location:b})},getOperation:function(a,b){if(isc.isAn.Object(a))return a;if(!this.$70w){isc.SchemaSet.findLoadedImports(this);this.$70w=true}var c=this.getBindingOperation(a,b),d=this.getPortTypeOperation(a,b);if(!c&&!d){this.logWarn(this+": no such operation: '"+a+"'");return null}return isc.addProperties({},d,c)},findOperation:function(a,b,c,d){if(c){if(b)c=
c.findAll("portTypeName",b);if(c){if(this.$70x)for(var e=0;e<this.$70x.length;e++){var f=this.$70x[e][d?"getPortTypeOperation":"getBindingOperation"](a,b);if(f!=null)return f}for(e=0;e<c.length;e++){b=c[e].operation;isc.isAn.Array(b)||(b=[b]);f=b.find("name",a);if(f!=null)return f}}}},getPortTypeOperation:function(a,b){return this.findOperation(a,b,this.portTypes,true)},getBindingOperation:function(a,b){return this.findOperation(a,b,this.bindings)},getOperationForMessage:function(a){var b=this.getOperations();
if(b){var c=b.find("inputMessage",a);if(c)return c;if(c=b.find("outputMessage",a))return c}},getOperationNames:function(){var a=this.operationNames;if(a)return a;if(!this.$70w){isc.SchemaSet.findLoadedImports(this);this.$70w=true}a=this.operationNames=[];if(this.bindings)for(var b=0;b<this.bindings.length;b++){var c=this.bindings[b],d=c.operation;isc.isAn.Array(d)||(d=[d]);a.addList(d.getProperty("name"));for(d=0;d<a.length;d++){var e=this.getPortTypeOperation(a[d],c.portTypeName);if(e)e.hasBinding=
true}}if(this.portTypes)for(b=0;b<this.portTypes.length;b++){d=this.portTypes[b].operation;isc.isAn.Array(d)||(d=[d]);if(c=d.findAll("hasBinding",true)){d=d.duplicate();d.removeAll(c)}a.addList(d.getProperty("name"))}return this.operationNames=a},getOperations:function(a){for(var b=this.getOperationNames(),c=[],d=0;d<b.length;d++){var e=this.getOperation(b[d]);a&&!e.hasBinding||c.add(e)}return c},getSchema:function(a,b){if(!this.$70w){isc.SchemaSet.findLoadedImports(this);this.$70w=true}var c=this.$38q;
if(c!=null)for(var d=0;d<c.length;d++){var e=c[d].getSchema(a,b);if(e)return e}return isc.DS.get(a,null,null,b)},getRequestMessage:function(a){return this.getMessage(this.getOperation(a).inputMessage)},getResponseMessage:function(a){return this.getMessage(this.getOperation(a).outputMessage)},getMessage:function(a){var b=this.messages.find("ID","message:"+a);if(b)return b;if(!this.$70w){isc.SchemaSet.findLoadedImports(this);this.$70w=true}if(this.$70x)for(var c=0;c<this.$70x.length;c++)if(b=this.$70x[c].getMessage(a))return b},
getBodyPartNames:function(a,b){var c=this.getOperation(a);c=b?c.outputParts:c.inputParts;return c==null||isc.isAn.emptyString(c)?(b?this.getResponseMessage(a):this.getRequestMessage(a)).getFieldNames():c.split(" ")},globalNamespaces:{xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},callOperation:function(a,b,c,d,e){var f=this.getOperation(a);if(f==null)this.logWarn("No such operation: "+a);else{e=e||isc.emptyObject;b=isc.addProperties({actionURL:this.getDataURL(a),
httpMethod:"POST",contentType:"text/xml",data:b,serviceNamespace:this.serviceNamespace,serviceName:this.name,wsOperation:a},e);b.httpHeaders=isc.addProperties({},{SOAPAction:f.soapAction||'""'},e.httpHeaders);b.headerData=e.headerData||this.getHeaderData(b);b.data=this.getSoapMessage(b);b.clientContext={$38r:d,$38s:a,$38u:c,$38v:e.xmlResult};if(this.spoofResponses){a=this.getSampleResponse(a);this.logIsDebugEnabled("xmlBinding")&&this.logDebug("spoofed response:\n"+a,"xmlBinding");this.delayCall("$38w",
[isc.xml.parseXML(a),a,{status:0,clientContext:b.clientContext,httpResponseCode:200,httpResponseText:a},b])}else{b.callback={target:this,methodName:"$38w"};isc.xml.getXMLResponse(b)}}},$38w:function(a,b,c,d){b=d.clientContext;var e=b.$38s,f=b.$38u;if(!(c.status<0)){a.addNamespaces(this.getOutputNamespaces(e));d.xmlNamespaces&&a.addNamespaces(d.xmlNamespaces);var g=f!=null&&f.contains("/"),h=g?f:null;if(g)h=a.selectNodes(h);else if(f)h=this.selectByType(a,e,f);else{h=a.selectNodes("//s:Body/*",{s:"http://schemas.xmlsoap.org/soap/envelope/"});
if(h.length==1)h=h[0]}this.logIsDebugEnabled()&&this.logDebug("selected response data is: "+this.echoFull(h));if(!b.$38v){if(g)e=null;else if(f)e=this.getSchema(b.$38u);else{f=this.getSchema("message:"+this.getOperation(e).outputMessage);if(this.getSoapStyle(e)!="document")e=f;else{e=f.getFieldNames().first();e=f.getSchema(f.getField(e).type)}}h=isc.xml.toJS(h,null,e)}}this.fireCallback(b.$38r,"data,xmlDoc,rpcResponse,wsRequest",[h,a,c,d])},getOutputNamespaces:function(a,b){var c=this.getDefaultOutputDS(a);
return isc.addProperties({"default":c.schemaNamespace||this.serviceNamespace,schema:c.schemaNamespace,service:this.serviceNamespace},b)},getDataURL:function(a){if((a=this.getOperation(a))&&a.dataURL)return a.dataURL;return this.dataURL},getMessageSerializer:function(a,b){var c=b?this.getResponseMessage(a):this.getRequestMessage(a);if(c==null)this.logWarn("no "+(b?"response":"request")+" message definition found for operation: '"+a+"'");else{if(this.getSoapStyle(a)!="document")return c;var d=c.getFieldNames();
if(d.length==1&&c.fieldIsComplexType(d[0])){d=c.getField(d[0]);c=c.getSchema(d.type,d.xsElementRef?"element":null);if(c==null)this.logWarn("can't find schema: "+d.type+", part of "+(b?"response":"request")+" message for operation '"+a+"'")}return c}},useSimplifiedInputs:function(a,b){var c=b?this.getResponseMessage(a):this.getRequestMessage(a);return this.getMessageSerializer(a,b)!=c},getSoapMessage:function(a,b){a.serviceNamespace=a.serviceNamespace||this.serviceNamespace;var c=a.wsOperation;if(this.getOperation(c)==
null){this.logWarn("no such operation: '"+c+"' in service: "+this.serviceNamespace);return""}c=this.getMessageSerializer(a.wsOperation,b&&b.generateResponse);if(c==null)return"";return c.getXMLRequestBody(a,b)},getSampleResponse:function(a,b,c,d){return this.getSoapMessage({wsOperation:a,data:b||{}},isc.addProperties({spoofData:true,generateResponse:!d},c))},getSampleRequest:function(a,b,c){return this.getSampleResponse(a,b,c,true)},getSoapStyle:function(a){return this.getOperation(a).soapStyle||
this.soapStyle},getInputDS:function(a){return this.getMessageSerializer(a)},getHeaderSchema:function(a,b){var c=this.getOperation(a);c=b?c.inputHeaders:c.outputHeaders;if(!c)return null;for(var d={},e=0;e<c.length;e++){var f=c[e].part,g=this.getSchema("message:"+c[e].message).getPartField(f);d[f]=this.getSchema(g.type)||g}return d},getInputHeaderSchema:function(a){return this.getHeaderSchema(a,true)},getOutputHeaderSchema:function(a){return this.getHeaderSchema(a,false)},getHeaderData:function(){},
selectByType:function(a,b,c){b=this.getOperation(b);var d=this.getSchema("message:"+b.outputMessage),e=this.getSchema(c);if(e==null){this.logWarn("selectByType: type '"+c+"' not present in schema for message: "+b.outputMessage);return null}var f=d.findTagOfType(e.ID);if(f==null){this.logWarn("selectByType: no tag of type '"+c+"' could be found in message: "+b.outputMessage);return null}d=f[1];f=f[0].getField(d);d=d||e.ID;c=e.mustQualify;var g=e.schemaNamespace;d="//"+(c?"ns0:":"")+d;if(f&&f.multiple)d+=
"/*";a=isc.xml.selectNodes(a,d,{ns0:g});if(this.logIsDebugEnabled("xmlBinding"))this.logDebug("selecting type: '"+e+"' within message '"+b.outputMessage+" via XPath: "+d+(c?" using ns0: "+e.schemaNamespace:"")+" got "+a.length+" elements","xmlBinding");return a},getDefaultOutputDS:function(a){a=this.getResponseMessage(a);if(!a)return null;var b=a.getFieldNames();if(b.length==1&&a.fieldIsComplexType(b[0]))return a.getSchema(a.getField(b[0]).type);return a},getFetchDS:function(a,b,c){if(b==null)b=this.getDefaultOutputDS(a);
b=isc.isA.Object(b)?b.ID:b;b!=null&&this.getSchema(b)==null&&this.logWarn("getFetchDS: resultType: '"+b+"' not present in web service - missing XML files?");return isc.DS.create({serviceNamespace:this.serviceNamespace,inheritsFrom:b,operationBindings:[isc.addProperties({operationType:"fetch",wsOperation:a,recordName:b},c)]})},setLocation:function(a,b){if(b)this.getBindingOperation(b).dataURL=a;else this.dataURL=a}});isc.A=isc.WebService;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;
isc.D[isc.C]=isc.A.Class;isc.A.services=[];isc.B.push(isc.A.get=function(a){return this.services.find("serviceNamespace",a)},isc.A.getByName=function(a,b){if(a=="")a=null;return b!=null?this.services.find({name:a,serviceNamespace:b}):this.services.find("name",a)});isc.B._maxIndex=isc.C+2;isc.WebService.getPrototype().toString=function(){return"["+this.Class+" ns="+this.echoLeaf(this.serviceNamespace)+(this.location?" location="+isc.Page.getLastSegment(this.location):"")+"]"};isc.ClassFactory.defineClass("RPCManager");
isc.RPC=isc.rpc=isc.RPCManager;isc.Page.observe(isc,"goOffline","isc.rpc.goOffline()");isc.Page.observe(isc,"goOnline","isc.rpc.goOnline()");isc.ClassFactory.defineClass("RPCRequest");isc.A=isc.RPCRequest;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.create=function(a,b,c,d,e,f,g,h,i,j,k,l,m){this.logWarn("An RPCRequest does not need to be created. Instead, pass properties to methods such as RPCManager.send() and RPCManger.sendRequest.");
return isc.addProperties({},a,b,c,d,e,f,g,h,i,j,k,l,m)});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("RPCResponse");isc.A=isc.RPCResponse;isc.A.errorCodes={STATUS_SUCCESS:0,STATUS_OFFLINE:1,STATUS_FAILURE:-1,STATUS_VALIDATION_ERROR:-4,STATUS_LOGIN_INCORRECT:-5,STATUS_MAX_LOGIN_ATTEMPTS_EXCEEDED:-6,STATUS_LOGIN_REQUIRED:-7,STATUS_LOGIN_SUCCESS:-8,STATUS_UPDATE_WITHOUT_PK_ERROR:-9,STATUS_TRANSACTION_FAILED:-10,STATUS_TRANSPORT_ERROR:-90,STATUS_UNKNOWN_HOST_ERROR:-91,STATUS_CONNECTION_RESET_ERROR:-92,
STATUS_SERVER_TIMEOUT:-100};isc.RPCResponse.addClassProperties(isc.RPCResponse.errorCodes);isc.addGlobal("DSResponse",isc.RPCResponse);isc.A=isc.RPCManager;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.maxErrorMessageLength=1E3;isc.A.maxLogMessageLength=25E3;isc.A.defaultTimeout=24E4;isc.A.defaultPrompt="Contacting server...";isc.A.timeoutErrorMessage="Operation timed out";isc.A.removeDataPrompt="Deleting record(s)...";isc.A.saveDataPrompt="Saving form...";
isc.A.validateDataPrompt="Validating...";isc.A.promptStyle=isc.Dialog?"dialog":"cursor";isc.A.useCursorTracker=isc.Browser.isSafari||isc.Browser.isMoz&&isc.Browser.geckoVersion<20051111;isc.A.cursorTrackerConstructor="Img";isc.A.cursorTrackerDefaults={src:"[SKINIMG]shared/progressCursorTracker.gif",size:16,offsetX:12,offsetY:0,$38x:function(a){var b=isc.EH.getX()+this.offsetX,c=isc.EH.getY()+this.offsetY;if(b+this.size>=isc.Page.getWidth()||c+this.size>=isc.Page.getHeight())this.hide();else{if(isNaN(b))b=
0;if(isNaN(c))c=0;this.setLeft(b);this.setTop(c);!a&&!this.isVisible()&&this.show()}},initWidget:function(){this.Super("initWidget",arguments);this.$38x(true);this.$38y=isc.Page.setEvent("mouseMove",this.getID()+".$38x()");this.$69s=isc.Page.setEvent("mouseOut",this.getID()+".hide()");this.bringToFront()},destroy:function(){isc.Page.clearEvent("mouseMove",this.$38y);isc.Page.clearEvent("mouseOut",this.$69s);this.Super("destroy",arguments)}};isc.A.promptCursor=isc.Browser.isSafari||isc.Browser.isMoz&&
isc.Browser.geckoVersion<20051111||isc.Browser.isIE&&isc.Browser.minorVersion<=5.5?"wait":"progress";isc.A.fetchDataPrompt="Finding records that match your criteria...";isc.A.getViewRecordsPrompt="Loading record...";isc.A.showPrompt=false;isc.A.neverShowPrompt=false;isc.A.actionURL="[ISOMORPHIC]/IDACall";isc.A.defaultTransport="xmlHttpRequest";isc.A.dataEncoding="XML";isc.A.preserveTypes=true;isc.A.credentialsURL=isc.Page.getIsomorphicDir()+"login/loginSuccessMarker.html";isc.A.loginWindowSettings=
"WIDTH=550,HEIGHT=250";isc.A.maxLoginPageLength=1048576;isc.A.$38z=Array.create({addTrack:function(a,b){this.$451=a;this.add(a,b);this.$451=null},setLastChanged:function(a){this.$451=a},clearLastChanged:function(){this.$451=null},getLastChanged:function(){return this.$451}});isc.A.$452=0;isc.A.$410=[];isc.B.push(isc.A.getTransactions=function(){return this.$38z});isc.B._maxIndex=isc.C+1;isc.A=isc.RPCManager;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;
isc.A.$380=0;isc.A.onLine=!isc.isOffline();isc.A.loginStatusCodeMarker="<SCRIPT>//'\"]]\>>isc_";isc.A.loginRequiredMarker="<SCRIPT>//'\"]]\>>isc_loginRequired";isc.A.loginSuccessMarker="<SCRIPT>//'\"]]\>>isc_loginSuccess";isc.A.maxLoginAttemptsExceededMarker="<SCRIPT>//'\"]]\>>isc_maxLoginAttemptsExceeded";isc.B.push(isc.A.xmlHttpRequestAvailable=function(){if(isc.Browser.isIE)return isc.Comm.createXMLHttpRequest()!=null;return true},isc.A.getActionURL=function(){return isc.Page.getURL(this.actionURL)},
isc.A.send=function(a,b,c){c=c||{};isc.addProperties(c,{data:a,callback:b});return this.sendRequest(c)},isc.A.$383=function(a){if(this.xmlHttpRequestAvailable()||!this.logIsWarnEnabled())return false;this.logWarn("Feature "+a+" requires the xmlHttpRequest transport which is not currently available because ActiveX is disabled. Please see the 'Features requiring ActiveX or Native support' topic in the client-side reference under Client Reference/System for more information.");return true},isc.A.sendProxied=
function(a,b){a.serverOutputAsString=true;a.sendNoQueue=true;var c=a.actionURL||isc.RPCManager.actionURL,d=a.useHttpProxy!=null?a.useHttpProxy:isc.RPCManager.useHttpProxy&&c.startsWith("http")&&!this.isLocalURL(c);!d&&c.startsWith("http")&&!this.isLocalURL(c)&&isc.warn("SmartClient can't directly contact URL '"+c+"' due to browser same-origin policy.  Remove the host and port number (even if localhost) to avoid this problem, or use XJSONDataSource for JSONP protocol (which allows cross-site calls), or use the server-side HttpProxy included with SmartClient Server.");
if(d)a=isc.addProperties({},a,{actionURL:isc.XMLTools.httpProxyURL,isProxied:true,useSimpleHttp:true,proxiedURL:c,params:{data:isc.Comm.xmlSerialize("data",{url:c,httpMethod:a.httpMethod,params:a.params,contentType:a.contentType,requestBody:a.data,username:a.username,password:a.password,httpHeaders:a.httpHeaders,uploadFileName:a.uploadFileName})},transport:"xmlHttpRequest",httpMethod:null,data:null,contentType:null});else if(!b)a.useSimpleHttp=true;return isc.rpc.sendRequest(a)},isc.A.$59w=function(a){var b=
isc.Page.getProtocol(a),c=a.indexOf("/",b.length);a=a.substring(b.length,c);var d;b=a.indexOf(":");if(b!=-1){d=a.substring(b+1);a=a.substring(0,b)}return[a,d]},isc.A.isLocalURL=function(a){var b=this.$59w(a);a=b[0];b=b[1];if(b==null||b=="")b=80;var c=this.getWindow().location,d=c.hostname;c=c.port;if(c==null||c=="")c=80;return(a=="localhost"||a==d)&&b==c},isc.A.sendRequest=function(a){if(a.useHttpProxy&&!a.isProxied)return this.sendProxied(a);if(!(a.canDropOnDelay&&this.delayingTransactions)){a=isc.addProperties({},
a);if(a.suppressAutoDraw!==false)a.suppressAutoDraw=true;a.actionURL=isc.Page.getURL(a.actionURL||a.url||a.URL||this.getActionURL());var b=a.transport;if(!b)a.transport=a.useXmlHttpRequest!=null||this.useXmlHttpRequest!=null?a.useXmlHttpRequest==null?this.useXmlHttpRequest!=null?this.useXmlHttpRequest?"xmlHttpRequest":"hiddenFrame":this.defaultTransport:b=a.useXmlHttpRequest?"xmlHttpRequest":"hiddenFrame":this.defaultTransport;this.checkTransportAvailable(a,b!=null);if(a.useSimpleHttp==null)a.useSimpleHttp=
a.paramsOnly;isc.addDefaults(a,{showPrompt:this.showPrompt,promptStyle:this.promptStyle,promptCursor:this.promptCursor,useCursorTracker:this.useCursorTracker,cursorTrackerConstructor:this.cursorTrackerConstructor});a.cursorTrackerProperties=isc.addProperties({},this.cursorTrackerDefaults,this.cursorTrackerProperties,a.cursorTrackerProperties);if(a.cursorTrackerProperties==null)a.cursorTrackerProperties=this.cursorTrackerProperties;if(!a.operation)a.operation={ID:"custom",type:"rpc"};if(this.canQueueRequest(a,
b!=null)){if(!this.currentTransaction)this.currentTransaction=this.$385();this.$386(a,this.currentTransaction);if(!this.queuing)return this.sendQueue();return a}else return this.sendNoQueue(a)}},isc.A.checkTransportAvailable=function(a,b){var c=this.xmlHttpRequestAvailable(),d=a.transport||this.defaultTransport;if(!c){if(d=="xmlHttpRequest")b?this.logWarn("RPC/DS request specifically requesting the xmlHttpRequest transport, but xmlHttpRequest not currently available - switching transport to hiddenFrame."):
this.logWarn("RPCManager.defaultTransport specifies xmlHttpRequest, but xmlHttpRequest not currently available - switching transport to hiddenFrame.");a.transport="hiddenFrame"}},isc.A.canQueueRequest=function(a){if(a.ignoreTimeout)a.sendNoQueue=true;if(a.containsCredentials)return false;if(a.sendNoQueue||a.transport=="scriptInclude")return false;var b=this.currentTransaction&&this.currentTransaction.requestData.operations.length>0;if(b&&a.actionURL!=this.currentTransaction.URL){this.logWarn("RPCRequest specified (or defaulted to) URL: "+
a.actionURL+" which is different than the URL for which the RPCManager is currently queuing: "+this.currentTransaction.URL+" - sending this request to server and continuing to queue");return false}if(b&&this.currentTransaction.transport!=a.transport){this.logWarn("RPCRequest with conflicting transport while queuing, sending request to server and continuing to queue.");return false}return true},isc.A.sendNoQueue=function(a){var b=this.currentTransaction,c=this.queuing;this.currentTransaction=this.$385();
this.$386(a,this.currentTransaction);a=this.sendQueue();this.queuing=c;this.currentTransaction=b;return a},isc.A.$385=function(){var a=this.$452++;a={timeout:this.defaultTimeout,transactionNum:a,operations:[],responses:[],requestData:{transactionNum:a,operations:[]},prompt:this.defaultPrompt,showPrompt:false,changed:function(){isc.RPCManager.$38z.setLastChanged(this);isc.RPCManager.$38z.dataChanged();isc.RPCManager.$38z.clearLastChanged()}};this.$38z.addTrack(a);this.$38z.clearLastChanged();return a},
isc.A.$386=function(a,b){b.URL=a.actionURL;if(a.containsCredentials)b.containsCredentials=true;if(a.exportFilename)b.URL+="/"+a.exportFilename;if(!b.download_filename)b.download_filename=a.download_filename;if((a.downloadResult||a.downloadToNewWindow)&&a.download_filename){b.download_filename=a.download_filename;b.URL+="/"+a.download_filename;b.ignoreError=true}if(a.prompt&&!b.customPromptIsSet){this.logDebug("Grabbed prompt from first request that defined one: "+a.prompt);b.prompt=a.prompt;b.customPromptIsSet=
true}if(a.showPrompt&&!b.showPrompt&&!this.neverShowPrompt){a.showedPrompt=true;isc.addProperties(b,{showPrompt:true,promptStyle:a.promptStyle,promptCursor:a.promptCursor,useCursorTracker:a.useCursorTracker,cursorTrackerConstructor:a.cursorTrackerConstructor,cursorTrackerProperties:a.cursorTrackerProperties})}a.isProxied&&isc.addProperties(b,{isProxied:true,proxiedURL:a.proxiedURL});b.transport=a.transport;if(a.ignoreReloginMarkers)b.ignoreReloginMarkers=true;b.operations.add(a);var c=a.data;if(c==
null)c="__ISC_NULL__";else if(c==="")c="__ISC_EMPTY_STRING__";a.clientOnly||b.requestData.operations.add(c);b.omitNullMapValuesInResponse=b.omitNullMapValuesInResponse!==false&&a.omitNullMapValuesInResponse!=null?b.requestData.omitNullMapValuesInResponse=a.omitNullMapValuesInResponse:false;if(a.ignoreTimeout)b.$387=true;a.transactionNum=b.transactionNum;if(a.timeout||a.timeout===0)b.timeout=a.timeout;b.changed()},isc.A.startQueue=function(a){var b=this.queuing;this.queuing=a==null?true:a;return b},
isc.A.doShowPrompt=function(a,b){if(this.$380++==0)if(a.promptStyle=="dialog"&&b!=null){isc.showPrompt(b);this.$388=true}else{isc.EH.showClickMask(null,"hard",null,"blockingRPC");if(a.useCursorTracker){this.$389=isc.ClassFactory.getClass(a.cursorTrackerConstructor).create(a.cursorTrackerProperties);this.$389.show()}else isc.EH.$m8.setCursor(a.promptCursor)}},isc.A.doClearPrompt=function(a){if(!a.clearedPrompt){a.clearedPrompt=true;if(--this.$380!=0){if(this.$380<0)this.$380=0}else{if(this.$388)isc.clearPrompt();
else{if(this.$389){this.$389.destroy();this.$389=null}else isc.EH.$m8.setCursor(isc.Canvas.DEFAULT);isc.EH.hideClickMask("blockingRPC")}this.$388=null}}},isc.A.getCurrentTransactionId=function(){return this.currentTransaction?this.currentTransaction.transactionNum:null},isc.A.cancelQueue=function(a){if(a){a=this.getTransaction(a);if(a!=null){a.showPrompt&&this.doClearPrompt(a);a.transportRequest&&a.transportRequest.abort&&a.transportRequest.abort();this.clearTransaction(a)}}else this.currentTransaction=
null},isc.A.getTransaction=function(a){if(a==null)return null;if(a.location&&a.document){for(var b=a,c=isc.HiddenFrame.$h6,d=0;d<c.length;d++)if(b==c[d].getHandle()){a=c[d].transactionNum;break}if(a==b){this.logDebug("Can't find transactionNum in getTransaction from iframe");return null}}if(isc.isA.Number(a)||isc.isA.String(a))a=this.$38z.find({transactionNum:a});if(a&&a.cleared)return null;return a},isc.A.getCurrentTransaction=function(){return this.currentTransaction},isc.A.getLastSubmittedTransaction=
function(){return this.$38z[this.$38z.length-1]},isc.A.clearTransaction=function(a){var b=this.getTransaction(a);if(b==null)this.logWarn("clearTransaction: no such transaction: "+this.echo(a));else{this.clearTransactionTimeout(b);if(!this.$453&&isc.Page.isLoaded()){a=isc.LogViewer.getGlobalLogCookie();this.setTrackRPC(a?a.trackRPC:false)}b.cleared=true;this.$454?b.changed():this.$38z.remove(b)}},isc.A.setTrackRPC=function(a){(this.$454=a)||this.removeClearedRPC()},isc.A.removeClearedRPC=function(){var a=
this.$38z.findAll("cleared",true);a&&this.$38z.removeList(a)},isc.A.delayAllPendingTransactions=function(){this.delayingTransactions=true;for(var a=0;a<this.$38z.length;a++)this.delayTransaction(this.$38z[a])},isc.A.suspendTransaction=function(a){a=this.getTransaction(a)||this.getCurrentTransaction();if(a==null)this.logWarn("No transaction to suspend");else if(!a.suspended){a.suspended=true;if(a.$66n)a.abortCallbacks=true;this.clearTransactionTimeout(a);a.showPrompt&&this.doClearPrompt(a);a.changed()}},
isc.A.delayTransaction=function(a){a=this.getTransaction(a);if(!a.delayed){a.delayed=true;this.clearTransactionTimeout(a);a.changed()}},isc.A.goOffline=function(){this.logInfo("Going offline...");this.onLine=false},isc.A.goOnline=function(){this.logInfo("Going online...");this.offlinePlayback=true;this.playbackNextOfflineTransaction()},isc.A.offlineTransactionPlaybackComplete=function(){},isc.A.playbackNextOfflineTransaction=function(){var a=this.offlineTransactionLog?this.offlineTransactionLog.removeAt(0):
null;if(a==null){this.logInfo("Offline transaction playback complete");this.offlinePlayback=false;this.onLine=!isc.isOffline();this.offlineTransactionPlaybackComplete()}else this.resubmitTransaction(a)},isc.A.offlineTransaction=function(a){if(!a.offline){a=this.getTransaction(a);a.offline=true;this.clearTransactionTimeout(a);if(!this.offlineTransactionLog){this.offlineTransactionLog=[];this.offlineTransactionLog.sortByProperty("timestamp",Array.ASCENDING)}this.offlineTransactionLog.add(a);a.changed();
for(var b=a.operations,c=0;c<b.length;c++){var d=b[c],e=this.createRPCResponse(a,d,{httpResponseCode:200,offlineResponse:true});this.delayCall("fireReplyCallbacks",[d,e],0)}}},isc.A.resendTransaction=function(a){this.resendTransactionsFlagged(a,"suspended")},isc.A.resendDelayedTransactions=function(){this.delayingTransactions=false;this.resendTransactionsFlagged(null,"delayed")},isc.A.resendTransactionsFlagged=function(a,b){for(var c=a?[this.getTransaction(a)]:this.$38z,d=0;d<c.length;d++){a=c[d];
if(a[b]){delete a[b];this.resubmitTransaction(a)}}},isc.A.getTransactionRequests=function(a){return this.getTransaction(a).operations},isc.A.$39a=function(a){a=this.getTransaction(a);var b=a.timeout;if(!b&&b!==0)b=this.defaultTimeout;if(b!=0)a.timeoutTimer=isc.Timer.setTimeout("isc.RPCManager.$39b("+a.transactionNum+")",b)},isc.A.clearTransactionTimeout=function(a){(a=this.getTransaction(a)||this.getCurrentTransaction()||this.getLastSubmittedTransaction())&&isc.Timer.clear(a.timeoutTimer)},isc.A.$39b=
function(a){a=this.getTransaction(a);if(a.$387)this.clearTransaction(a);else if(this.onLine){a.results=this.$39c(a,{data:isc.RPCManager.timeoutErrorMessage,status:isc.RPCResponse.STATUS_SERVER_TIMEOUT});this.$39d(a.transactionNum)}else this.offlineTransaction(a)},isc.A.$39c=function(a,b){for(var c=[],d=0;d<a.operations.length;d++)c[d]=isc.clone(b);return c},isc.A.resubmitTransaction=function(a){a=this.getTransaction(a)||this.getLastSubmittedTransaction();a.status=null;var b=this.currentTransaction;
this.currentTransaction=a;if(a!=null){this.logInfo("Resubmitting transaction number: "+a.transactionNum);delete a.suspended;delete a.clearedPrompt;a=a.$76k||isc.emptyObject;this.sendQueue(a.callback,a.prompt,a.URL)}else this.logWarn("No transaction to resubmit: transaction number "+a+" does not exist");this.currentTransaction=b},isc.A.retryOperation=function(a){this.logDebug("Server-initiated operation retry for commFrameID: "+a);var b=window[a];b?b.sendData():this.logError("comm operation retry failed - can't locate object: "+
a)},isc.A.transactionAsGetRequest=function(a,b,c){a.cleared||(a=this.getTransaction(a)||this.getCurrentTransaction());b=b||a.URL||this.getActionURL();c||(c={});c._transaction=this.serializeTransaction(a);return this.addParamsToURL(this.markURLAsRPC(b),c)},isc.A.encodeParameter=function(a,b){if(isc.isA.Date(b)){isc.Comm.xmlSchemaMode=true;b=b.toSchemaDate();isc.Comm.xmlSchemaMode=null}else if(isc.isA.Array(b)){for(var c=isc.SB.create(),d=0;d<b.length;d++){c.append(this.encodeParameter(a,b[d]));d<b.length-
1&&c.append("&")}return c.toString()}isc.isA.String(b)||(b=isc.JSON.encode(b,{prettyPrint:false}));return isc.SB.concat(encodeURIComponent(a),"=",encodeURIComponent(b))},isc.A.addParamsToURL=function(a,b){var c=a;if(!b)return a;for(var d in b){var e=b[d];c+=c.contains("?")?"&":"?";c+=this.encodeParameter(d,e)}return c},isc.A.serializeTransaction=function(a){if(this.dataEncoding=="JS"){isc.Comm.$ev=true;a=isc.Comm.serialize(a.requestData);isc.Comm.$ev=null}else a=isc.Comm.xmlSerialize("transaction",
a.requestData);return a},isc.A.markURLAsRPC=function(a){a.contains("isc_rpc=")||(a+=(a.contains("?")?"&":"?")+"isc_rpc=1&isc_v="+isc.versionNumber);return a},isc.A.markURLAsXmlHttp=function(a){a.contains("isc_xhr=")||(a+=(a.contains("?")?"&":"?")+"isc_xhr=1");return a},isc.A.addDocumentDomain=function(a){a.contains("isc_dd=")||(a+=(a.contains("?")?"&":"?")+"isc_dd="+document.domain);return a},isc.A.sendQueue=function(a,b,c){var d=this.currentTransaction;this.currentTransaction=null;this.queuing=false;
if(!d){this.logInfo("sendQueue called with no current queue, ignoring");return false}var e=d.operations[0];if(!isc.Page.isLoaded()){d.$76k={callback:a,prompt:b,URL:c};this.delayingTransactions||isc.Page.setEvent("load",this,isc.Page.FIRE_ONCE,"resendDelayedTransactions");this.delayingTransactions=true}if(this.delayingTransactions){this.delayTransaction(d);return e}d.timestamp=(new Date).getTime();if(!this.onLine&&!this.offlinePlayback){this.offlineTransaction(d);return e}for(var f=true,g=0;g<d.operations.length;g++)if(!d.operations[g].clientOnly){f=
false;break}if(f){d.allClientOnly=true;d.sendTime=isc.timeStamp();this.delayCall("$39d",[d.transactionNum],0);return e}c=d.URL=isc.Page.getURL(c||d.URL||this.getActionURL());if(!e.useSimpleHttp&&d.transport!="scriptInclude"){c=this.markURLAsRPC(c);if(d.transport=="xmlHttpRequest")c=this.markURLAsXmlHttp(c);if(document.domain!=location.hostname)c=this.addDocumentDomain(c);c=this.addParamsToURL(c,{isc_tnum:d.transactionNum})}(b=d.prompt=d.showPrompt==null||d.showPrompt?b||d.prompt||this.defaultPrompt:
null)&&this.doShowPrompt(d,b);f={};var h=false;for(g=0;g<d.operations.length;g++){var i=d.operations[g];b=i.params;var j=i.queryParams,k=b;if(j&&isc.isAn.Object(j))c=d.URL=this.addParamsToURL(c,j);b&&h&&this.logWarn("Multiple RPCRequests with params attribute in one transaction - merging");if(b){if(isc.isA.String(b))if(window[b])b=window[b];else if(isc.Canvas.getForm(b))b=isc.Canvas.getForm(b);else{this.logWarn("RPCRequest: "+isc.Log.echo(i)+" was passed a params value: "+b+" which does not resolve to a component or a native form - request to server will not include these params");
b=null}if(isc.isA.Class(b))if(b.getValues)b=b.getValues();else this.logWarn("RPCRequest: "+isc.Log.echo(i)+" was passed an instance of class "+b.getClassName()+" (or a global ID that resolved to this class) - this class does not support the getValues() method - request to server will not include these params");if(b&&!isc.isAn.Object(b)){this.logWarn("params value: "+k+" for RPCrequest: "+isc.Log.echo(i)+" resolved to non-object: "+isc.Log.echo(b)+" - request to server will not include these params");
b=null}if(b){isc.addProperties(f,b);h=true}}}this.logIsInfoEnabled()&&this.logInfo("sendQueue["+d.transactionNum+"]: "+d.operations.length+" RPCRequest(s); transport: "+d.transport+"; target: "+c);d.sendTime=isc.timeStamp();d.changed();d.callback="isc.RPCManager.performTransactionReply(transactionNum,results,wd)";if(a)d.$40c=a;b=f;a=d.transport;a="send"+a.substring(0,1).toUpperCase()+a.substring(1);if(isc.Comm[a]==null)this.logWarn("Attempt to send transaction with specified transport '"+d.transport+
"' failed - unsupported transaction type.");else{this.$39a(d);isc.RPCManager.$410.push(d.transactionNum);d.transactionRequest=isc.Comm[a]({URL:c,httpMethod:e.httpMethod,contentType:e.contentType,httpHeaders:e.httpHeaders,bypassCache:e.bypassCache,data:e.useSimpleHttp?e.data:null,fields:b,target:e.target,callbackParam:e.callbackParam,transport:d.transport,blocking:e.blocking,useSimpleHttp:e.useSimpleHttp,transactionNum:d.transactionNum,transaction:d});isc.isA.Function(this.queueSent)&&this.queueSent(d.operations);
return e}},isc.A.performTransactionReply=function(a,b){var c=this.getTransaction(a);if(!c){this.logWarn("performTransactionReply: No such transaction "+a);return false}delete c.$66n;delete c.abortCallbacks;c.receiveTime=isc.timeStamp();c.changed();isc.RPCManager.$410.remove(a);this.logInfo("transaction "+a+" arrived after "+(c.receiveTime-c.sendTime)+"ms");if(b==null){this.logFatal("No results for transaction "+a);return false}if(c.transport=="xmlHttpRequest"){var d=b;c.xmlHttpRequest=d;b=d.responseText;
var e;try{e=d.status}catch(f){this.logWarn("Unable to access XHR.status - network cable unplugged?");e=-1}if(e==1223)e=204;if(e==0&&(location.protocol=="file:"||location.protocol=="app-resource:"))e=200;c.httpResponseCode=e;c.httpResponseText=d.responseText;if(e!=-1&&!c.ignoreReloginMarkers&&this.processLoginStatusText(d,a))return;if(e!=-1&&this.responseRequiresLogin(d,a)){this.handleLoginRequired(a);return}if(e!=-1&&this.responseIsRelogin(d,a)){this.handleLoginRequired(a);return}if(e==12030&&isc.Browser.isIE){this.logWarn("Received HTTP status code 12030, resubmitting request");
this.resubmitTransaction(a);return}var g=c.URL,h;if(c.isProxied){g=c.proxiedURL+" (via proxy: "+g+")";var i=this.getHttpHeaders(d,c),j;if(i)for(var k in i)if(k.toLowerCase()=="x-isc-httpproxy-status"){j=i[k];break}if(j&&j=="-91")h=-91;if(j&&j=="-92")h=-92}if(h)e=500;if(e>299||e<200){b=this.$39c(c,{data:"Transport error - HTTP code: "+e+" for URL: "+g+(e==302?" This error is likely the result of a redirect to a server other than the origin server or a redirect loop.":""),status:h?h:isc.RPCResponse.STATUS_TRANSPORT_ERROR});
this.logDebug("RPC request to: "+g+" returned with http response code: "+e+". Response text:\n"+d.responseText);c.status=h?h:isc.RPCResponse.STATUS_TRANSPORT_ERROR;c.$66n=true;this.handleTransportError(a,c.status,c.httpResponseCode,c.httpResponseText);if(c.suspended||c.abortCallbacks){delete c.abortCallbacks;delete c.$66n;return}delete c.$66n}}c.results=b;this.$39d(a);return true},isc.A.responseIsRelogin=function(a){var b=a.status;if(document.domain!=location.hostname&&(b==302&&this.treatRedirectAsRelogin||
b==0||b==200&&a.getAllResponseHeaders()==isc.emptyString&&a.responseText==isc.emptyString)){this.logDebug("Detected document.domain 302 relogin condition - status: "+b);return true}return false},isc.A.processLoginStatusText=function(a,b){var c=a.responseText;if(c&&c.length<this.maxLoginPageLength){var d=c.indexOf(this.loginStatusCodeMarker);if(d==-1)return false;if(c.indexOf(this.loginRequiredMarker,d)!=-1){this.handleLoginRequired(b);return true}else if(c.indexOf(this.loginSuccessMarker,d)!=-1){this.handleLoginSuccess(b);
return true}else if(c.indexOf(this.maxLoginAttemptsExceededMarker,d)!=-1){this.handleMaxLoginAttemptsExceeded(b);return true}}return false},isc.A.processLoginStatusCode=function(a){if(a.status==isc.RPCResponse.STATUS_LOGIN_REQUIRED){this.handleLoginRequired(a.transactionNum);return true}else if(a.status==isc.RPCResponse.STATUS_LOGIN_SUCCESS){this.handleLoginSuccess(a.transactionNum);return true}else if(a.status==isc.RPCResponse.STATUS_MAX_LOGIN_ATTEMPTS_EXCEEDED){this.handleMaxLoginAttemptsExceeded(a.transactionNum);
return true}return false},isc.A.responseRequiresLogin=function(){return false},isc.A.createRPCResponse=function(a,b,c){b=isc.addProperties({operationId:b.operation.ID,clientContext:b.clientContext,context:b,transactionNum:a.transactionNum,httpResponseCode:a.httpResponseCode,httpResponseText:a.httpResponseText,xmlHttpRequest:a.xmlHttpRequest,transport:a.transport,status:a.status,clientOnly:b.clientOnly},c);a.transport=="xmlHttpRequest"&&isc.addProperties(b,{httpHeaders:this.getHttpHeaders(a.xmlHttpRequest,
a)});return b},isc.A.getHttpHeaders=function(a,b){if(!b.allClientOnly)if(a){if(!isc.Browser.isIE&&!a.getAllResponseHeaders)return null;var c;try{c=a.getAllResponseHeaders()}catch(d){this.logWarn("Exception thrown by xmlHttpRequest.getAllResponseHeaders(): "+d)}if(!c){this.logWarn("xmlHttpRequest.getAllResponseHeaders() returned null");return null}c=c.split("\n");for(var e={},f=0;f<c.length;f++)if(c[f].replace(/^\s+|\s+$/g,"")!=""){var g=c[f].indexOf(":");if(g==-1)this.logWarn("GetAllResponseHeaders string had malformed entry at line 1.  Line reads "+
c[f]);else{var h=c[f].substring(0,g);e[h]=c[f].substring(g+1).replace(/^\s+|\s+$/g,"");if(e[h]=="true")e[h]=true;if(e[h]=="false")e[h]=false}}if(e["X-Proxied-Set-Cookie"]!=null)e["Set-Cookie"]=e["X-Proxied-Set-Cookie"];return e}else this.logWarn("getHttpHeaders called with a null XmlHttpRequest object")},isc.A.$39d=function(a){var b=this.getTransaction(a);this.clearTransactionTimeout(a);if(b){this.logIsDebugEnabled()&&this.logDebug("Result string for transaction "+a+": "+isc.Log.echoAll(b.results));
var c;if(b.transport!="scriptInclude")if(isc.isAn.Array(b.results))c=true;else if(b.allClientOnly){b.results={status:0};b.receiveTime=isc.timeStamp()}var d=b.results,e=b.operations,f=[];b.$66n=true;for(var g=0,h=0;g<e.length;g++){var i=e[g],j;j=c&&i.clientOnly?isc.addProperties(this.createRPCResponse(b,i),{isStructured:false}):isc.addProperties(this.createRPCResponse(b,i),{isStructured:c,callbackArgs:b.transport=="scriptInclude"?d:null,results:c?d[h++]:d});if(j.status==null)j.status=0;if(j.isStructured){j.results.errors&&
isc.isAn.Array(j.results.errors);j.results&&isc.addProperties(j,j.results)}f[g]=j;b.responses[g]=j;b.changed()}for(c=0;c<e.length&&!b.suspended&&!b.abortCallbacks;){i=e[c];j=f[c];this.performOperationReply(i,j);c++}b.showPrompt&&this.doClearPrompt(b);!b.suspended&&!b.abortCallbacks&&this.clearTransaction(a);delete b.abortCallbacks;delete b.$66n;b.offline&&this.playbackNextOfflineTransaction();if(b.$40c){a=i.application?i.application:this.getDefaultApplication();if(isc.isA.String(a))a=window[a];a.fireCallback(b.$40c,
"responses",[b.responses])}}},isc.A.performOperationReply=function(a,b){var c=b.results;this.logIsInfoEnabled()&&this.logInfo("rpcResponse(unstructured) results --\>"+isc.Log.echoAll(c)+"<--");if(!this.processLoginStatusCode(b,b.transactionNum))return this.fireReplyCallbacks(a,b)},isc.A.fireReplyCallback=function(a,b,c,d){var e=b.application?b.application:this.getDefaultApplication();if(isc.isA.String(e))e=window[e];return e.fireCallback(a,"rpcResponse,data,rpcRequest",[c,d,b])},isc.A.evalResult=
function(a,b,c){var d=a.evalVars;this.logDebug("evaling result"+(d?" with evalVars: "+isc.Log.echo(d):""));b=isc.Canvas.getInstanceProperty("autoDraw");a.suppressAutoDraw&&isc.Canvas.setInstanceProperty("autoDraw",false);if(c.match(/^\s*\{/))c="var evalText="+c+";evalText;";c=isc.Class.evalWithVars(c,d);a.suppressAutoDraw&&isc.Canvas.setInstanceProperty("autoDraw",b);return c},isc.A.fireReplyCallbacks=function(a,b){var c=b.results,d=a.evalResult&&a.transport!="scriptInclude"?this.evalResult(a,b,c):
null;c=a.evalResult?d:c;b.data=c;this.getTransaction(b.transactionNum);d=a.callback;d!=null&&this.fireReplyCallback(d,a,b,c)},isc.A.$a0=function(a,b){if(!a.ignoreError){if(b.dataSource){var c=isc.DataSource.get(b.dataSource);if(c&&c.handleError)if(c.handleError(a,b)==false)return}return this.handleError(a,b)}},isc.A.handleError=function(a){var b;if(isc.isA.String(a.data)){b=a.data;if(isc.isA.String(b)){var c=b;if(c.length>this.maxErrorMessageLength){var d=c.length-this.maxErrorMessageLength;c=c.substring(0,
this.maxErrorMessageLength)+"<br><br>...("+d+" bytes truncated - set isc.RPCManager.maxErrorMessageLength > "+this.maxErrorMessageLength+" to see more or check the Developer Console for full error)..."}isc.warn(c.asHTML())}}else{b=isc.getKeyForValue(a.status,isc.RPCResponse.errorCodes);if(isc.isA.String(b)){if(b.startsWith("STATUS_"))b=b.substring(7)}else b="number: "+(a.status!=null?a.status:"unknown");c=a.operationId||a.operationType;b="Error performing "+(c?"operation: '"+c+"'":"rpcRequest")+": error: "+
b}this.logWarn(b+", response: "+this.echo(a));return false},isc.A.handleTransportError=function(){},isc.A.handleLoginRequired=function(a){if(!(this.$39j&&this.$39j==a)){var b=this.getTransaction(a);if(b!=null){a=b.transactionNum;this.clearTransactionTimeout(b);var c=b.operations[0],d=this.createRPCResponse(b,c);this.logInfo("loginRequired for transaction: "+a+(b.containsCredentials?", transaction containsCredentials":""));if(b.containsCredentials){if(c.callback){d.status=isc.RPCResponse.STATUS_LOGIN_INCORRECT;
this.fireReplyCallbacks(c,d);this.clearTransaction(b);return}this.clearTransaction(b)}this.suspendTransaction(b);if(this.loginRequired){d.status=isc.RPCResponse.STATUS_LOGIN_REQUIRED;this.loginRequired(a,c,d)}else{a=this.addParamsToURL(this.credentialsURL,{ts:(new Date).getTime()});this.$39j=window.open(a,this.loginWindowSettings)}}}},isc.A.handleLoginSuccess=function(a){if((a=this.getTransaction(a))&&a.containsCredentials){this.clearTransactionTimeout(a);var b=a.operations[0];if(b.callback){var c=
this.createRPCResponse(a,b,{status:isc.RPCResponse.STATUS_SUCCESS});this.fireReplyCallbacks(b,c);this.clearTransaction(a);return}this.clearTransaction(a)}this.$39j&&this.$39j.close();this.loginSuccess&&this.loginSuccess()===false||this.resendTransaction()},isc.A.handleMaxLoginAttemptsExceeded=function(a){if((a=this.getTransaction(a))&&a.containsCredentials){this.clearTransactionTimeout(a);var b=a.operations[0];if(b.callback){var c=this.createRPCResponse(a,b,{status:isc.RPCResponse.STATUS_MAX_LOGIN_ATTEMPTS_EXCEEDED});
this.fireReplyCallbacks(b,c);this.clearTransaction(a);return}this.clearTransaction(a)}this.$39j&&this.$39j.close();if(this.maxLoginAttemptsExceeded)this.maxLoginAttemptsExceeded();else isc.warn?isc.warn("Max login attempts exceeded."):alert("Max login attempts exceeded.")});isc.B._maxIndex=isc.C+68;isc.RPCManager.rpc_logMessage=isc.RPCManager.logMessage;isc.RPCManager.logMessage=function(a,b,c,d){if(this.logIsEnabledFor(a,c))if(isc.isA.String(b)&&b.length>this.maxLogMessageLength&&!this.logIsEnabledFor(a,
"RPCManagerResponse")){var e=b.length-this.maxLogMessageLength;b=b.substring(0,this.maxLogMessageLength)+"\n...("+e+" bytes truncated).  Enable RPCManagerResponse log at same threshold to see full message."}this.rpc_logMessage(a,b,c,d)};isc.addGlobal("InstantDataApp",isc.RPCManager);isc.isA.InstantDataApp=isc.isA.RPCManager;isc.A=isc.InstantDataApp;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.addDefaultOperation=function(a,b,c){a||(a={});
a.operation=isc.DataSource.makeDefaultOperation(b,c,a.operation);return a},isc.A.setDefaultApplication=function(a){isc.InstantDataApp.defaultApplication=a},isc.A.getDefaultApplication=function(){this.defaultApplication==null&&this.create({ID:"builtinApplication",dataSources:[],operations:{},pointersToThis:[{object:this,property:"defaultApplication"}]});return this.defaultApplication},isc.A.app=function(){return this.getDefaultApplication()});isc.B._maxIndex=isc.C+4;isc.A=isc.InstantDataApp.getPrototype();
isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function(){this.ID!="builtinApplication"&&isc.ClassFactory.addGlobalID(this);if(isc.rpc.defaultApplication==null||isc.rpc.defaultApplication.getID()=="builtinApplication")isc.rpc.setDefaultApplication(this)});isc.B._maxIndex=isc.C+1;isc.defineClass("DMI").addClassProperties({actionURL:isc.RPCManager.actionURL,call:function(a,b,c){for(var d=[],e=0;e<arguments.length;e++)d[d.length]=arguments[e];
e={};if(isc.isAn.Object(a)&&d.length==1){d=isc.clone(a);if(d.requestParams){isc.addProperties(e,this.requestParams,d.requestParams);delete d.requestParams;if(d.downloadResult==true){d.showPrompt=false;d.transport="hiddenFrame"}}e.callback=d.callback;delete d.callback;e.data=d}else{e.data={appID:a,className:b,methodName:c,arguments:d.slice(3,d.length-1)};e.callback=d[d.length-1]}d=e.data.arguments;isc.isAn.Array(d)||(d=d==null?[]:[d]);e.data.arguments=d;e.data.is_ISC_RPC_DMI=true;if(this.addMetaDataToQueryString){if(!e.queryParams)e.queryParams=
{};isc.addProperties(e.queryParams,{dmi_appID:e.data.appID,dmi_class:e.data.className,dmi_method:e.data.methodName})}return isc.RPCManager.sendRequest(e)},callTemplate:"(function(){var x = function (firstArg) { var isCall = ${isCall};var obj = {};obj.requestParams=this.requestParams;if(isc.isAn.Object(firstArg) && arguments.length == 1){isc.addProperties(obj,{appID:'${appID}',className:'${className}',methodName:'${methodName}'},firstArg);} else {var args = [];for (var i = 0; i < arguments.length; i++) args[args.length] = arguments[i];isc.addProperties(obj,{appID:'${appID}',className:'${className}',methodName:isCall?firstArg:'${methodName}',arguments:args.slice(isCall ? 1 : 0,args.length-1),callback:args[args.length-1]});}isc.DMI.call(obj);};return x})()",
bind:function(a,b,c,d){isc.isAn.Array(c)||(c=[c]);d=isc.addProperties({},this.requestParams,d);d=isc.defineClass(b).addClassProperties({requestParams:d});d.call=isc.eval(this.callTemplate.evalDynamicString(this,{appID:a,className:b,methodName:"firstArg",isCall:true}));for(var e=0;e<c.length;e++)d[c[e]]=isc.eval(this.callTemplate.evalDynamicString(this,{appID:a,className:b,methodName:c[e],isCall:false}));return window[b]=d},makeDMIMethod:function(a,b,c,d){return isc.eval(this.callTemplate.evalDynamicString(this,
{appID:a,className:b,isCall:c,methodName:c?"firstArg":d}))}});isc.DMI.callBuiltin=isc.DMI.makeDMIMethod("isc_builtin","builtin",true);isc.ClassFactory.defineClass("ResultSet",null,["List","DataModel"]);isc.A=isc.ResultSet;isc.A.UNKNOWN_LENGTH=1E3;isc.A=isc.ResultSet.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.cachedRows=0;isc.A.fetchAhead=true;isc.A.resultSize=75;isc.A.fetchDelay=0;isc.A.useClientSorting=true;isc.A.useClientFiltering=
true;isc.A.updateCacheFromRequest=true;isc.A.updatePartialCache=true;isc.B.push(isc.A.shouldUseClientSorting=function(){if(!isc.RPCManager.onLine)return true;return this.useClientSorting},isc.A.shouldUseClientFiltering=function(){if(!isc.RPCManager.onLine)return true;return this.useClientFiltering},isc.A.shouldNeverDropUpdatedRows=function(){if(!isc.RPCManager.onLine)return true;return this.neverDropUpdatedRows},isc.A.shouldUpdatePartialCache=function(){if(!isc.RPCManager.onLine)return true;return this.updatePartialCache});
isc.B._maxIndex=isc.C+4;isc.A=isc.ResultSet.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.dynamicDSFieldValues=false;isc.A.$39r=0;isc.A.notifyOnUnchangedCache=false;isc.B.push(isc.A.init=function(){isc.ClassFactory.addGlobalID(this);if(this.operation!=null)this.fetchOperation=this.operation;var a=this.getOperation("fetch"),b=a.dataSource;isc.isAn.Array(b)||(b=[b]);for(var c=0;c<b.length;c++){var d=isc.DS.get(b[c]);this.observe(d,"dataChanged",
"observer.dataSourceDataChanged(dsRequest,dsResponse)");if(!this.$39s)this.$39s=[];this.$39s.add(d);if(!this.dataSource)this.dataSource=d}this.getDataSource()||this.logError("Invalid dataSource: "+this.echoLeaf(this.dataSource)+", a ResultSet must be created with a valid DataSource");this.resultSize=(b=this.context)&&b.dataPageSize!=null?b.dataPageSize:this.resultSize;this.fetchMode=this.allRows?"local":b&&b.dataFetchMode!=null?b.dataFetchMode:this.fetchMode||"paged";if(this.dropCacheOnUpdate==null)this.dropCacheOnUpdate=
this.$du(a.dropCacheOnUpdate,this.getDataSource().dropCacheOnUpdate);this.context=this.context||{};a=this.criteria||this.filter||{};this.criteria=null;this.setCriteria(a);if(this.initialData){this.prepareSparseInitialData();this.fillCacheData(this.initialData);this.setFullLength(this.initialLength||this.totalRows||this.initialData.length);this.sortSpecifiers&&this.setSort(this.sortSpecifiers,true);this.sortBy&&this.setSort(isc.DS.getSortSpecifiers(this.sortBy),true)}else if(this.isPaged())this.localData=
[];this.observe(isc,"goOffline",this.getID()+".goOffline()");this.observe(isc.RPCManager,"offlineTransactionPlaybackComplete",this.getID()+".offlinePlaybackComplete()")},isc.A.goOffline=function(){},isc.A.offlinePlaybackComplete=function(){if(this.haveOfflineRecords){this.invalidateCache();this.haveOfflineRecords=false}},isc.A.destroy=function(){if(window[this.ID]==this)window[this.ID]=null;this.ignore(isc,"goOffline");this.ignore(isc.RPCManager,"offlineTransactionPlaybackComplete");if(this.$39s)for(var a=
0;a<this.$39s.length;a++){var b=this.$39s[a];b&&this.ignore(b,"dataChanged")}},isc.A.prepareSparseInitialData=function(){for(var a=0;a<this.initialData.length;a++)if(this.initialData[a]==Array.LOADING)this.initialData[a]=null},isc.A.getFirstUsedIndex=function(){if(!this.lengthIsKnown())return 0;if(this.localData)for(var a=0;a<this.localData.length;a++)if(this.localData[a]!=null&&this.localData[a]!=Array.LOADING)return a;return 0},isc.A.isPaged=function(){return this.fetchMode=="paged"},isc.A.isLocal=
function(){return this.fetchMode=="local"},isc.A.allMatchingRowsCached=function(){return this.allRows!=null&&(!this.allRowsCriteria||this.$505)||this.localData!=null&&(!this.isPaged()||this.allRows!=null||this.cachedRows==this.totalRows)},isc.A.allRowsCached=function(){return this.allRows!=null&&(!this.allRowsCriteria||this.$505)||this.allMatchingRowsCached()&&this.$39t},isc.A.isEmpty=function(){if(this.isPaged())if(this.allMatchingRowsCached())return this.getLength()==0;else if(this.cachedRows>0)return false;
return!this.lengthIsKnown()||this.getLength()<=0},isc.A.canSortOnClient=function(){return this.shouldUseClientSorting()&&(this.allMatchingRowsCached()||isc.Offline&&isc.Offline.isOffline())},isc.A.canFilterOnClient=function(){return this.shouldUseClientFiltering()&&this.allRowsCached()},isc.A.getLength=function(){var a=this.unknownLength||isc.ResultSet.UNKNOWN_LENGTH;if(!this.lengthIsKnown())return a;return this.isPaged()&&!this.allRows?this.totalRows:this.localData.length},isc.A.indexOf=function(a,
b,c){if(this.localData==null)return-1;if(Array.isLoading(a))return-1;var d=this.localData.indexOf(a,b,c);if(d!=-1)return d;return this.getDataSource().findByKeys(a,this.localData,b,c)},isc.A.slideList=function(a,b){if(!this.allMatchingRowsCached()&&!this.shouldUpdatePartialCache())isc.logWarn("updatePartialCache is disabled: record position will not be shifted.");else{var c=[],d;if(b<0)b=0;for(d=0;d<b;d++){if(Array.isLoading(this.localData[d])){isc.logWarn("Sliding from a row position that has not yet been loaded, ignoring");
return}a.contains(this.localData[d])||c.add(this.localData[d])}for(d=0;d<a.length;d++)c.add(a[d]);for(d=b;d<this.localData.length;d++){if(Array.isLoading(this.localData[d])){isc.logWarn("Sliding into a row position that has not yet been loaded, ignoring");return}a.contains(this.localData[d])||c.add(this.localData[d])}this.shouldUpdatePartialCache()&&this.invalidateRowOrder();this.localData=c;this.dataChanged()}},isc.A.get=function(a){if(a<0){this.logWarn("get: invalid index "+a);return null}if(this.localData!=
null&&this.localData[a]!=null)return this.localData[a];if(this.fetchStartRow!=null&&a>=this.fetchStartRow&&a<=this.fetchEndRow)return Array.LOADING;return this.getRange(a,a+1)[0]},isc.A.getRange=function(a,b,c,d){if(isc.$cv)arguments.$cw=this;if(a==null)this.logWarn("getRange() called with no specified range - ignoring.");else{if(b==null)b=a+1;if(this.isPaged())return this.$39u(a,b,c,d);if(this.localData==null){this.localData=[];var e=this.getServerFilter();this.setRangeLoading(a,b);this.fetchRemoteData(e)}return this.localData.slice(a,
b)}},isc.A.getAllRows=function(){if(!this.lengthIsKnown())return[];return this.getRange(0,this.getLength())},isc.A.getAllLoadedRows=function(){if(!this.lengthIsKnown())return[];for(var a=[],b=0;b<this.getLength();b++)this.rowIsLoaded(b)&&a.add(this.localData[b]);return a},isc.A.getFieldValue=function(a,b,c){if(this.dynamicDSFieldValues)return this.getDataSource().getFieldValue(a,b,c);else{if(c&&c.dataPath)return isc.Canvas.$70o(c.dataPath,a);return a[b]}},isc.A.lengthIsKnown=function(){return this.localData!=
null&&(this.isPaged()?this.totalRows!=null:this.$39v==null)},isc.A.rowIsLoaded=function(a){if(this.localData!=null){a=this.localData[a];if(a!=null&&!Array.isLoading(a))return true}return false},isc.A.rangeIsLoaded=function(a,b){if(this.localData==null)return false;for(var c=a;c<b;c++){var d=this.localData[c];if(d==null||Array.isLoading(d))return false}return true},isc.A.findLastCached=function(a,b){if(!this.rowIsLoaded(a))return null;if(b){for(var c=a;c>=0;c--){var d=this.localData[c];if(d==null||
Array.isLoading(d))break}return c+1}else{var e=this.getLength();for(c=a;c<e;c++){d=this.localData[c];if(d==null||Array.isLoading(d))break}return c-1}},isc.A.getCachedRange=function(a){if(a==null)a=this.lastRangeStart;if(a==null)a=0;if(!this.rowIsLoaded(a))return null;var b=this.getLength();if(this.allMatchingRowsCached())return[0,b-1];b=this.findLastCached(a,true);a=this.findLastCached(a);return[b,a]},isc.A.setRangeLoading=function(a,b){if(this.localData==null)this.localData=[];for(var c=a;c<b;c++)if(this.localData[c]==
null)this.localData[c]=Array.LOADING},isc.A.fillRangeLoading=function(a,b){for(var c=0;c<b;c++)if(a[c]==null)a[c]=Array.LOADING;return a},isc.A.getServerFilter=function(){if(this.isLocal())return null;return this.criteria},isc.A.$39w=function(){var a=this.fetchStartRow,b=this.fetchEndRow;if(!(a==null||b==null)){this.setRangeLoading(a,b);this.fetchEndRow=this.fetchStartRow=null;this.logInfo("fetching rows "+[a,b]+" from server");return this.fetchRemoteData(this.getServerFilter(),a,b)}},isc.A.fetchRemoteData=
function(a,b,c){if(isc.Offline.isOffline())this.haveOfflineRecords=true;this.$39r+=1;var d;if(this.context&&this.context.clientContext)this.context.clientContext.requestIndex=this.$39r;else d={requestIndex:this.$39r};b=isc.addProperties({operation:this.getOperationId("fetch"),startRow:b,endRow:c,sortBy:this.$39x,resultSet:this,clientContext:d},this.context);b.clientContext.$69t=b.willHandleError;b.willHandleError=true;if(this.rowOrderInvalid()){this.logInfo("invalidating rows on fetch due to 'add'/'update' operation  with updatePartialCache");
this.invalidateRows()}this.logIsDebugEnabled("fetchTrace")&&this.logWarn("ResultSet server fetch with server criteria: "+this.echoFull(a)+this.getStackTrace());if(this.cachingAllData)b.cachingAllData=true;this.getDataSource().fetchData(a,{caller:this,methodName:"fetchRemoteDataReply"},b);if(!this.isPaged())this.$39v=this.$39r},isc.A.fetchRemoteDataReply=function(a,b,c){var d=a.clientContext.requestIndex;if(!this.$39y)this.$39y=0;if(d!=this.$39y+1&&!a.isCachedResponse){this.logInfo("server returned out-of-sequence response for fetch remote data request  - delaying processing: last processed:"+
this.$39y+", returned:"+d);if(!this.$39z)this.$39z=[];this.$39z.add({dsResponse:a,data:b,request:c})}else{this.cachingAllData==true&&delete this.cachingAllData;!this.isPaged()&&this.$39v==d&&delete this.$39v;var e;e=(b=a.status<0)||a.offlineResponse?[]:a.data;var f=e.length;this.document=a.document;this.logInfo("Received "+f+" records from server");if(a.startRow==null)a.startRow=c.startRow;if(a.endRow==null)a.endRow=a.startRow+f;if(a.totalRows==null&&a.endRow<c.endRow)a.totalRows=a.endRow;if(this.transformData){var g=
this.transformData(e,a);e=g!=null?g:e;if(e.length!=f){this.logInfo("Transform applied, "+e.length+" records resulted, from "+a.startRow+" to "+a.endRow);a.endRow=a.startRow+e.length;if(a.totalRows!=null&&a.totalRows<a.endRow)a.totalRows=a.endRow}}if(isc.isA.List(e)){if(a.totalRows!=null&&a.totalRows<a.endRow){this.logWarn("fetchData callback: dsResponse.endRow set to:"+a.endRow+". dsResponse.totalRows set to:"+a.totalRows+". endRow cannot exceed total dataset size. Clamping endRow to the end of the dataset ("+
a.totalRows+").");a.endRow=a.totalRows}f=a.startRow;g=a.endRow;this.$521();this.$390(e,a);this.$522(f,g,b);delete this.context.afterFlowCallback;this.$39y=d;if(this.$39z&&this.$39z.length>0)for(d=0;d<this.$39z.length;d++){e=this.$39z[d];if(e!=null){f=e.dsResponse.clientContext.requestIndex;if(f==this.$39y+1){this.logInfo("Delayed out of sequence data response being processed now "+f);this.$39z[d]=null;this.fetchRemoteDataReply(e.dsResponse,e.data,e.request);break}}}!c.clientContext.$69t&&b&&isc.RPCManager.$a0(a,
c)}else this.logWarn("Bad data returned, ignoring: "+this.echo(e))}},isc.A.$390=function(a,b){if(this.isLocal()){this.$78z(a);this.filterLocalData()}else{if(this.isPaged()){this.$ed();if(this.dropCacheOnLengthChange&&this.lengthIsKnown()&&this.totalRows!=b.totalRows){this.logInfo("totalRows changed from "+this.totalRows+" to "+b.totalRows+", invalidating cache");this.$394()}if(this.localData==null)this.localData=[];this.setFullLength(b.totalRows);this.fillCacheData(a,b.startRow);for(var c=this.localData,
d=b.startRow+a.length;d<this.totalRows;d++)if(Array.isLoading(c[d]))c[d]=null;else break;this.logInfo("cached "+a.getLength()+" rows, from "+b.startRow+" to "+b.endRow+" ("+this.totalRows+" total rows, "+this.cachedRows+" cached)");if(this.allMatchingRowsCached()){this.allRowsCached()?this.logInfo("Cache for entire DataSource complete"):this.logInfo("Cache for current criteria complete");this.canSortOnClient()&&this.$391()}}else{this.$ed();this.localData=a;this.canSortOnClient()&&this.$391();this.allRowsCached()&&
this.$78z(this.localData,this.criteria)}this.$ee()}},isc.A.setContext=function(a){this.context=a},isc.A.findByKey=function(a){var b=isc.DataSource.getDataSource(this.dataSource);if(b)if(b.getPrimaryKeyField()&&this.lengthIsKnown()){var c;if(isc.isAn.Object(a))c=a;else{c={};c[b.getPrimaryKeyFieldName()]=a}a=this.localData.findByKeys(c,b);return a!=null?this.localData[a]:null}},isc.A.setCriteria=function(a){if(a==null)a={};var b=this.$780(a);if(b==null){this.localData==null&&this.allRows!=null&&this.filterLocalData();
this.logInfo("setCriteria: filter criteria unchanged");return false}this.getDataSource().isAdvancedCriteria(a)||(a=isc.clone(a));var c=this.criteria;this.criteria=a;this.$39t=isc.getKeys(a).length==0;this.$51w=this.context&&this.context.textMatchStyle?this.context.textMatchStyle:null;if(b){this.logInfo("setCriteria: filter criteria changed, invalidating cache");this.invalidateCache()}else{this.allRows==null&&this.$78z(this.localData,c);this.filterLocalData()}return true},isc.A.$78z=function(a,b){this.allRows=
a;this.allRowsCriteria=b||{};this.$505=isc.getKeys(this.allRowsCriteria).length==0},isc.A.setFilter=function(a){return this.setCriteria(a)},isc.A.getCriteria=function(){return this.criteria},isc.A.compareCriteria=function(a,b,c,d){return this.getDataSource().compareCriteria(a,b,c?c:this.context,d?d:this.criteriaPolicy)},isc.A.compareTextMatchStyle=function(a,b){return this.getDataSource().compareTextMatchStyle(a,b)},isc.A.willFetchData=function(a,b){return this.$780(a,b)==true},isc.A.$780=function(a,
b){if(a==null)a={};if(this.localData==null&&this.allRows==null)return true;if(a==null)a={};var c=this.criteria||{},d=this.$51w,e=this.getDataSource();if(b==null)b=this.context&&this.context.textMatchStyle?this.context.textMatchStyle:null;d=this.compareTextMatchStyle(b,d);var f=this.allRows&&this.shouldUseClientFiltering()&&c!=this.allRowsCriteria;if(d>=0){var g=f?this.allRowsCriteria:c;if(g==null)g={};if(e.isAdvancedCriteria(a)&&!e.isAdvancedCriteria(g))g=isc.DataSource.convertCriteria(g,b);if(!e.isAdvancedCriteria(a)&&
e.isAdvancedCriteria(g))a=isc.DataSource.convertCriteria(a,b);var h=isc.addProperties({},this.context);if(b!=null)h.textMatchStyle=b;g=this.compareCriteria(a,g,h);if(g!=0)d=g}if(d==0){if(f){if(e.isAdvancedCriteria(a)&&!e.isAdvancedCriteria(c))c=isc.DataSource.convertCriteria(c,b);if(this.compareCriteria(a,c)!=0)return false}return null}else{if(!this.allMatchingRowsCached())return true;if(this.isLocal())return false;if(d==-1)return true;else if(d==1){if(this.shouldUseClientFiltering())return false;
return true}}},isc.A.sortByProperty=function(a,b,c,d){if(c==null){var e=this.getDataSource().getField(a);if(e)c=e.type}if(!(this.$395==a&&this.$392==b&&this.$393==c)){if(d)if((e=d.getField(a))&&e.displayField&&e.sortByDisplayField!=false){var f;if(e.optionDataSource)f=isc.DataSource.getDataSource(e.optionDataSource);if(!f||f==isc.DataSource.getDataSource(this.dataSource))a=e.displayField}this.$395=a;this.$392=b;this.$393=c;this.$45g=d;if(this.isPaged()||!this.shouldUseClientSorting())this.$39x=(this.$392?
"":"-")+this.$395;if(this.canSortOnClient()){this.localData.sortByProperties([a],[b],[c],[d]);this.allRows&&this.localData!==this.allRows&&this.allRows.sortByProperties([a],[b],[c],[d]);delete this.$572;delete this.$573;delete this.$574;delete this.$575;this.$52z()||this.dataChanged()}else this.invalidateCache()}},isc.A.unsort=function(){if(!this.allMatchingRowsCached())return false;this.$395=null;this.localData&&this.localData.unsort();return true},isc.A.$391=function(){var a=this.$73p;if(!(this.localData==
null||!a||a.length==0)){for(var b=[],c=[],d=[],e=[],f=0;f<a.length;f++){var g=a[f];b[f]=g.property;c[f]=Array.shouldSortAscending(g.direction);d[f]=g.normalizer;e[f]=g.context}if(this.canSortOnClient()){if(a&&a.length>0){this.logInfo("$391: sorting on properties ["+b.join(",")+"] : directions ["+c.join(",")+"] : full cache allows local sort");this.localData.sortByProperties(b,c,d,e);delete this.$572;delete this.$573;delete this.$574;delete this.$575;this.$52z()||this.dataChanged()}}else{this.logInfo("$391: sorting on properties ["+
b.join(",")+"] : directions ["+c.join(",")+"] : invalidating cache");this.invalidateCache()}}},isc.A.getSort=function(){return this.$73p},isc.A.setSort=function(a,b){for(var c=[],d=[],e,f=0;f<a.length;f++){var g=a[f];if(g.normalizer==null)if(e=this.getDataSource().getField(g.property)){g.normalizer=e.type;g.$78e=g.normalizer}if(g.context)if((e=g.context.getField(g.property)||this.getDataSource().getField(g.property))&&e.displayField&&e.sortByDisplayField!=false){var h;if(e.optionDataSource)h=isc.DataSource.getDataSource(e.optionDataSource);
if(!h||h==isc.DataSource.getDataSource(this.dataSource))g.property=e.displayField}if(this.isPaged()||!this.shouldUseClientSorting())c[f]=(Array.shouldSortAscending(g.direction)?"":"-")+g.property;if(this.$73p&&this.$73p.length>0){e={property:g.property,direction:g.direction};if(g.normalizer!=null&&g.normalizer!=g.$78e)e.normalizer=g.normalizer;this.$73p.findIndex(e)==f&&d.add(g)}}if(a.length!=d.length){this.$73p=isc.shallowClone(a);this.$39x=c;b||this.$391()}},isc.A.$521=function(){if(this.$523===
void 0)this.$523=0;this.$523++},isc.A.$522=function(a,b,c){--this.$523==0&&!c&&this.dataArrived&&this.dataArrived(a,b)},isc.A.$524=function(){return this.$523!=null&&this.$523>0},isc.A.dataSourceDataChanged=function(a,b){if(!this.disableCacheSync){this.logIsDebugEnabled()&&this.logDebug("dataSource data changed firing");var c=this.getDataSource().getUpdatedData(a,b,this.updateCacheFromRequest);if(this.transformData&&this.transformUpdateResponses!==false){var d=this.transformData(c,b);c=d==null?c:
d}this.handleUpdate(a.operationType,c,b.invalidateCache,a)}},isc.A.handleUpdate=function(a,b,c,d){if(isc.$cv)arguments.$cw=this;var e=this.allMatchingRowsCached()?", allMatchingRowsCached true":", cached rows: "+this.cachedRows+", total rows: "+this.totalRows;if(this.dropCacheOnUpdate||c||a!="remove"&&!this.allMatchingRowsCached()&&!this.shouldUpdatePartialCache())this.invalidateCache();else{this.logInfo("updating cache in place after operationType: "+a+e);this.$ed();if(!isc.isAn.Array(b)||b.length==
1){this.$572=a;this.$573=b}this.updateCache(a,b,d);this.$ee()}},isc.A.$ee=function(a){var b;if(!this.notifyOnUnchangedCache&&this.$573&&this.$575==null)b=true;var c,d,e;if(!b&&this.$573){c=this.$572;d=this.$574;e=this.$575}if(--this.$ef==0&&!b){this.dataChanged(c,d,e,this.$573,a);delete this.$572;delete this.$574;delete this.$575;delete this.$576;delete this.$573}},isc.A.updateCache=function(a,b,c){if(b!=null){a=isc.DS.$372(a);isc.isAn.Array(b)||(b=[b]);if(this.logIsInfoEnabled())this.logInfo("Updating cache: operationType '"+
a+"'"+(c.componentId?" submitted by '"+c.componentId+"'":" (no componentID) ")+","+b.length+" rows update data"+(this.logIsDebugEnabled()?":\n"+this.echoAll(b):""));switch(a){case "remove":this.removeCacheData(b,c);break;case "add":this.addCacheData(b,c);break;case "replace":case "update":this.updateCacheData(b,c)}this.shouldUpdatePartialCache()&&a!="remove"&&!this.allMatchingRowsCached()&&this.invalidateRowOrder();a=a=="remove"||a=="update"&&this.$576==null;this.allRows&&!this.shouldNeverDropUpdatedRows()&&
this.filterLocalData();b=this.$576||this.$574;if(!a&&b!=null){a=this.indexOf(b);if(a==-1){delete this.$575;delete this.$574}else this.$575=a}}},isc.A.updateCacheData=function(a,b){isc.isAn.Array(a)||(a=[a]);for(var c=this.allRows!=null,d=c?this.allRows:this.localData,e=0,f=0,g=0,h=this.getDataSource().getPrimaryKeyFields(),i=0;i<a.length;i++){var j=a[i],k=isc.applyMask(j,h),l=this.getDataSource().findByKeys(k,d),m;if(l==-1){m=b.data;if(isc.isAn.Array(m))m=m[0];m=isc.applyMask(m,h);var n=this.getDataSource().findByKeys(m,
d);if(n!=-1){this.logWarn("Update operation - submitted record with primary key value[s]:"+this.echo(m)+" returned with modified primary key:"+this.echo(k)+". This may indicate bad server logic. Updating cache to reflect new primary key.");f++;d.removeAt(n);delete this.$573}}else if(a.length==1){m=d.get(l);if(c&&!this.getDataSource().recordMatchesFilter(m,this.criteria,this.context))m=null;if(this.$574=m)this.$575=this.indexOf(m)}m=c?this.allRowsCriteria:this.criteria;n=this.getDataSource().recordMatchesFilter(j,
m,this.context);var o=this.shouldNeverDropUpdatedRows();if(l==-1&&n){this.logInfo("updated row returned by server doesn't match any cached row,  adding as new row.  Primary key values: "+this.echo(k)+", complete row: "+this.echo(j));g++;d.add(j);if(a.length==1){this.$576=j;this.$575=d.length-1}}else if(l!=-1)if(n||o){e++;d.set(l,j)}else{this.logIsDebugEnabled()&&this.logDebug("row dropped:\n"+this.echo(j)+"\ndidn't match filter: "+this.echo(m));f++;d.removeAt(l)}}this.logIsDebugEnabled()&&this.logDebug("updated cache: "+
g+" row(s) added, "+e+" row(s) updated, "+f+" row(s) removed.");!c&&this.isPaged()&&this.setFullLength(this.totalRows-f+g);!c&&!this.shouldUpdatePartialCache()&&this.$391()},isc.A.removeCacheData=function(a){isc.isAn.Array(a)||(a=[a]);for(var b=this.allRows!=null,c=b?this.allRows:this.localData,d=this.getDataSource(),e=0,f=0;f<a.length;f++){var g=d.findByKeys(a[f],c);if(g!=-1){if(a.length==1){var h=c[g];if(!b||d.recordMatchesFilter(h,this.criteria,this.context)){this.$574=h;this.$575=this.indexOf(this.$574)}}c.removeAt(g);
this.cachedRows-=1;e++}else if(!this.allMatchingRowsCached())if(d.applyFilter([a[f]],this.criteria,this.context).length>0){this.logIsDebugEnabled()&&this.logDebug("removed record matches filter criteria: "+this.echo(a[f]));this.$574==null&&delete this.$573;e++}else this.logIsDebugEnabled()&&this.logIsDebugEnabled("cache sync ignoring 'remove' operation, removed  row doesn't match filter criteria: "+this.echo(a[f]))}!b&&this.isPaged()&&this.setFullLength(this.totalRows-e)},isc.A.addCacheData=function(a){isc.isAn.Array(a)||
(a=[a]);if(a!=null){var b;if(this.allRows==null||!this.shouldUseClientFiltering())b=this.getDataSource().applyFilter(a,this.criteria,this.context);else{b=a;if(this.allRowsCriteria)b=this.getDataSource().applyFilter(b,this.allRowsCriteria,this.context)}var c;if(b.length!=a.length)this.logInfo("Adding rows to cache, "+b.length+" of "+a.length+" rows match filter criteria");else if(b.length==1)c=true;if(a=this.allRows||this.localData){if(!this.allMatchingRowsCached()&&this.shouldUpdatePartialCache()){var d=
this.getCachedRange();if(d)if(d[1]==this.getLength()-1||!this.rowIsLoaded(0)){d=d[1]+1;a.addListAt(b,d);if(c)this.$575=d}else{a.addListAt(b,0);if(c)this.$575=0}else{a.addList(b);if(c)this.$575=a.length-1}}else{a.addList(b);if(c)this.$575=a.length-1}if(this.$575!=null)this.$576=a[this.$575];this.cachedRows+=b.length;this.canSortOnClient()&&this.$391();this.isPaged()&&!this.allRows&&this.setFullLength(this.totalRows+b.length)}}},isc.A.insertCacheData=function(a,b){isc.isAn.Array(a)||(a=[a]);this.allRows&&
this.allRows!=this.localData&&this.allRows.addListAt(a,b);this.localData.addListAt(a,b);this.isPaged()&&this.setFullLength(this.totalRows+a.length)},isc.A.findFirstCachedRow=function(a){for(a=a;a>=0;a--)if(this.localData[a]==null)return a+1;return 0},isc.A.findLastCachedRow=function(a){for(a=a;a<this.totalRows;a++)if(this.localData[a]==null)return a-1;return this.totalRows-1},isc.A.$39u=function(a,b,c,d){if(this.$397)return this.fillRangeLoading(((this.ignoreCache?[]:this.localData)||[]).slice(a,
b),b-a);this.$397=true;a=this.getRangePaged(a,b,c,d);delete this.$397;return a},isc.A.getRangePaged=function(a,b,c,d){if(a<0||b<0){this.logWarn("getRange("+a+", "+b+"): negative indices not supported, clamping start to 0");if(a<0)a=0}if(b<=a){this.logDebug("getRange("+a+", "+b+"): returning empty list");return[]}if(!c&&this.lengthIsKnown()){var e=this.getLength();if(a>e-1&&a!=0){this.logWarn("getRange("+a+", "+b+"): start beyond end of rows, returning empty list");return[]}else if(b>e)b=e}if(this.localData==
null)this.localData=[];if(c){this.realCache=this.localData;this.localData=[]}e=this.localData;this.lastRangeStart=a;this.lastRangeEnd=b;for(var f,g,h,i=a;i<b;i++)if(e[i]==null){h=true;if(f==null)f=i;if(g==null||g<i)g=i}if(!h){this.logDebug("getRange("+a+", "+b+") satisfied from cache");return e.slice(a,b)}if(this.fetchAhead){g=this.$398(a,b,f,g,c);f=g[0];g=g[1]}else{f=f;g=g+1}this.fetchStartRow=f;this.fetchEndRow=g;if(d||this.fetchDelay==0){this.$39w();a=e.slice(a,b)}else{this.fireOnPause("fetchRemoteData",
"$39w",this.fetchDelay);a=this.fillRangeLoading(e.slice(a,b),b-a)}if(c){this.localData=this.realCache;this.realCache=null}return a},isc.A.$398=function(a,b,c,d,e){var f=e?[]:this.localData,g=e?Number.MAX_VALUE:this.getLength(),h=Math.floor((this.resultSize-(d-c))/2);e=Math.max(0,c-h);g=Math.min(g,d+h);for(h=e;h<=c;h++){var i=f[h];if(i==null||Array.isLoading(i))break}c=h;for(h=g;h>=d;h--){i=f[h];if(i==null||Array.isLoading(i))break}d=h;this.logDebug("getRange("+[a,b]+"), cache check: "+[e,g]+" firstMissingRow: "+
c+" lastMissingRow: "+d);if(c==0||c>e&&d==g){this.logDebug("getRange: guessing forward scrolling");c=c;d=c+this.resultSize;if(d<b)d=b}else if(c==e&&d<g){this.logDebug("getRange: guessing backward scrolling");d=d+1;c=d-this.resultSize;if(c<0)c=0;if(c>a)c=a}else{this.logDebug("getRange: no scrolling direction detected");c=e;d=g;if(c>a)c=a;if(d<b)d=b}for(h=c;h<e;h++){i=f[h];if(i==null||Array.isLoading(i))break}c=h;for(h=d-1;h>g;h--){i=f[h];if(i==null||Array.isLoading(i))break}d=h+1;this.logInfo("getRange("+
a+", "+b+") will fetch from "+c+" to "+d);return[c,d]},isc.A.filterLocalData=function(){this.$ed();this.localData=this.applyFilter(this.allRows,this.criteria,isc.addProperties({dataSource:this},this.context));this.logInfo("Local filter applied: "+this.localData.length+" of "+this.allRows.length+" records matched filter:"+this.echoFull(this.criteria),"localFilter");this.allRows!=null&&this.shouldUseClientSorting()&&this.$391();!this.$524()&&this.dataArrived&&this.dataArrived(0,this.localData.length-
1);this.$ee(true)},isc.A.applyFilter=function(a,b,c){return this.getDataSource().applyFilter(a,b,c)},isc.A.getValuesList=function(a){this.logInfo("asked for valuesList for property '"+a+"'");if(this.isLocal()){if(!this.allRows){this.logWarn("asked for valuesList before data has been loaded");return[]}a=this.allRows.getProperty(a);if(!a)return[];return a.getUniqueItems()}for(var b=this.getCachedRange(),c=[],d=b[0];d<=b[1];d++){var e=this.get(d);c.contains(e[a])||(c[c.length]=e[a])}return c},isc.A.fillCacheData=
function(a,b){if(b==null)b=0;this.logDebug("integrating "+a.length+" rows into cache at position "+b);if(this.localData==null){this.localData=[];this.localData.length=this.getLength()}else{var c=this.getLength(),d=this.localData.length;if(d>c)this.localData=this.localData.slice(0,c);else if(d!=c)this.localData.length=c}for(c=0;c<a.length;c++){d=b+c;var e=this.localData[d];if(e==null||Array.isLoading(e))this.cachedRows++;this.localData[d]=a[c]}this.allRowsCached()&&this.$78z(this.localData,this.criteria)},
isc.A.setFullLength=function(a){if(isc.isA.Number(a)){this.logDebug("full length set to: "+a);if(this.isPaged())this.totalRows=a;if(this.localData){var b=this.localData.length;if(b>a)this.localData=this.localData.slice(0,a);else if(b!=a)this.localData.length=a}if(this.cachedRows>a)this.cachedRows=a}},isc.A.invalidateCache=function(){delete this.$572;delete this.$576;delete this.$573;delete this.$574;delete this.$575;this.$394();this.$52z()||this.dataChanged(null,null,null,null,true)},isc.A.$394=function(){this.invalidateRows();
this.totalRows=null;this.logInfo("Invalidating cache")},isc.A.invalidateRows=function(){this.allRowsCriteria=this.localData=this.allRows=null;delete this.$505;this.cachedRows=0;this.$50k=null},isc.A.invalidateRowOrder=function(){this.$50k=true},isc.A.rowOrderInvalid=function(){return this.$50k},isc.A.dataChanged=function(){this.onDataChanged&&this.onDataChanged()},isc.A.getNewSelection=function(a){var b=this.getDataSource().selectionClass||"Selection";return isc.ClassFactory.getClass(b).create(a)});
isc.B._maxIndex=isc.C+76;isc.ResultSet.registerStringMethods({transformData:"newData,dsResponse",dataArrived:"startRow,endRow",dataChanged:"operationType,originalRecord,rowNum,updateData,filterChanged"});isc.ResultSet.getPrototype().toString=isc.$63a;isc.ResultSet.getPrototype().logMessage=isc.$63b;isc.ClassFactory.defineClass("LocalResultSet",isc.ResultSet);isc.A=isc.LocalResultSet.getPrototype();isc.A.fetchMode="local";isc.ClassFactory.defineClass("WindowedResultSet",isc.ResultSet);isc.ResultSet.addMethods(isc.ClassFactory.makePassthroughMethods(["find",
"findIndex","findNextIndex","findAll","getProperty"],"localData"));isc.ClassFactory.defineClass("ResultTree",isc.Tree);isc.A=isc.ResultTree.getPrototype();isc.A.nameProperty="$399";isc.A.nodeTypeProperty="nodeType";isc.A.childTypeProperty="childType";isc.A.modelType="parent";isc.A.loadDataOnDemand=true;isc.A.defaultNewNodesToRoot=false;isc.A.updateCacheFromRequest=true;isc.A=isc.ResultTree.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=
function(a,b,c,d,e,f){isc.ClassFactory.addGlobalID(this);if(!this.criteria)this.criteria={};if(!this.operation)this.operation={operationType:"fetch"};if(!this.dataSource)this.dataSource=this.operation.dataSource;if(!this.operation.dataSource)this.operation.dataSource=this.dataSource;if(isc.isAn.Array(this.dataSource)){this.dataSource=this.dataSource[0];this.operation.dataSource=this.dataSource}if(!this.isMultiDSTree()){if(!this.root)this.root=this.makeRoot();var g=this.getTreeRelationship(this.root);
if(this.rootValue===void 0)this.rootValue=g.rootValue;if(!this.loadDataOnDemand&&(this.rootValue!=null||this.root!=null&&this.root[this.idField]!=null)&&this.discardParentlessNodes==null)this.discardParentlessNodes=true;if(this.idField==null)this.idField=g.idField;if(this.parentIdField==null)this.parentIdField=g.parentIdField;if(g.childrenProperty)this.childrenProperty=g.childrenProperty;this.root[this.idField]=this.rootValue}this.setupProperties();if(this.initialData)if("parent"==this.modelType)this.data=
this.initialData;else if("children"==this.modelType)this.root=this.initialData;this.observe(isc.DataSource.getDataSource(this.dataSource),"dataChanged","observer.dataSourceDataChanged(dsRequest,dsResponse);");this.dropCacheOnUpdate=this.operation.dropCacheOnUpdate;if(this.defaultIsFolder==null)this.defaultIsFolder=this.loadDataOnDemand;this.invokeSuper(isc.ResultTree,"init",a,b,c,d,e,f);this.defaultLoadState=this.loadDataOnDemand?isc.Tree.UNLOADED:isc.Tree.LOADED},isc.A.destroy=function(){this.Super("destroy",
arguments);var a=isc.DataSource.getDataSource(this.dataSource);a&&this.ignore(a,"dataChanged")},isc.A.getTreeRelationship=function(a){return this.getChildDataSource(a).getTreeRelationship()},isc.A.getChildDataSource=function(a,b){var c=a[this.childTypeProperty];if(c!=null)return isc.DS.get(c);b=b||this.getNodeDataSource(a);if(b==null||!this.isMultiDSTree())return this.getRootDataSource();c=this.treeRelations;var d=b.getChildDataSources();if(c){c=c[b.ID];if(c!=null)return isc.DS.get(c)}if(d!=null)return d[0]},
isc.A.getNodeDataSource=function(a){var b=a[this.nodeTypeProperty];if(b==null){a=this.getParent(a);if(a==null)return null;else if(a==this.root)b=this.getRootDataSource().ID;else{b=a.$40a;if(b==null)b=this.getRootDataSource().ID}}return isc.DS.get(b)||this.getRootDataSource()},isc.A.isMultiDSTree=function(){return this.multiDSTree||this.treeRelations!=null},isc.A.getRootDataSource=function(){return this.operation&&this.operation.dataSource?isc.DS.get(this.operation.dataSource):isc.DS.get(this.dataSource)},
isc.A.getCriteria=function(a){if(this.getRootDataSource()==a)return this.criteria;return null},isc.A.getOperationId=function(){return this.operation?this.operation.ID:null},isc.A.loadChildren=function(a,b){var c=a==null||a==this.root,d,e,f;if(c&&this.isMultiDSTree()){e=this.getRootDataSource();d={childDS:e}}else{d=this.getTreeRelationship(a);e=d.childDS;f=d.parentDS}if(!this.isMultiDSTree()){d.idField=this.idField;d.parentIdField=this.parentIdField;d.rootValue=d.rootValue}if(this.logIsDebugEnabled())this.logDebug("parent id: "+
(c?"[root]":a[d.idField])+" (type: "+(c?"[root]":f.ID)+") has childDS: "+e.ID+", relationship: "+this.echo(d));a.$40a=e.ID;var g=isc.addProperties({},this.getCriteria(e,f,a));if(!(c&&this.isMultiDSTree()))if(this.loadDataOnDemand){var h=a[d.idField];if(c&&h===void 0)h=d.rootValue;g[d.parentIdField]=h}else this.defaultLoadState=isc.Tree.LOADED;c=isc.addProperties({parentNode:a,relationship:d,childrenReplyCallback:b},this.context?this.context.clientContext:null);c=isc.addProperties({parentNode:a,resultTree:this},
this.context,{clientContext:c});if(f=this.getOperationId(e,f,a))c.operationId=f;c.willHandleError=true;a!=null&&this.setLoadState(a,isc.Tree.LOADING);e.fetchData(g,{caller:this,methodName:"loadChildrenReply"},c)},isc.A.loadChildrenReply=function(a,b,c){b=a.clientContext;var d=b.parentNode,e=b.relationship,f=a.data;if(a.status<0)f=null;if(a.status==isc.RPCResponse.STATUS_OFFLINE){f=[];d!=null&&!this.isRoot(d)&&isc.say(window[c.componentId].offlineNodeMessage)}if(f==null||f.length==0){if(a.status==
isc.RPCResponse.STATUS_OFFLINE){this.setLoadState(d,isc.Tree.UNLOADED);this.delayCall("closeFolder",[d],0)}else this.setLoadState(d,isc.Tree.LOADED);if(f==null){a.status<0?isc.RPCManager.$a0(a,c):this.logWarn("null children returned; return empty List instead");f=[]}}if(this.isMultiDSTree())for(a=0;a<f.length;a++){c=f[a];this.getChildDataSource(c,e.childDS)!=null&&this.convertToFolder(c);this.add(c,d)}else if(a.status==isc.RPCResponse.STATUS_OFFLINE){this.setLoadState(d,isc.Tree.UNLOADED);this.delayCall("closeFolder",
[d],0)}else this.linkNodes(f,e.idField,e.parentIdField,e.rootValue,e.isFolderProperty,d);b.childrenReplyCallback&&this.fireCallback(b.childrenReplyCallback,"node",[d],this);if(this.dataArrived!=null){isc.Func.replaceWithMethod(this,"dataArrived","parentNode");this.dataArrived(d)}},isc.A.getDataSource=function(){return isc.DataSource.getDataSource(this.dataSource)},isc.A.invalidateCache=function(){if(this.isLoaded(this.root)){var a=this.makeRoot();this.setRoot(a);this.loadDataOnDemand||this.reloadChildren(a)}},
isc.A.dataSourceDataChanged=function(a,b){if(!this.disableCacheSync){var c=isc.DataSource.getUpdatedData(a,b,this.updateCacheFromRequest);this.handleUpdate(a.operationType,c,b.invalidateCache)}},isc.A.handleUpdate=function(a,b,c){if(isc.$cv)arguments.$cw=this;if(this.dropCacheOnUpdate||c){this.invalidateCache();this.getDataSource().canQueueRequests||this.dataChanged()}else{this.updateCache(a,b);this.dataChanged()}},isc.A.updateCache=function(a,b){if(b!=null){a=isc.DS.$372(a);isc.isAn.Array(b)||(b=
[b]);if(this.logIsInfoEnabled())this.logInfo("Updating cache: operationType '"+a+"', "+b.length+" rows update data"+(this.logIsDebugEnabled()?":\n"+this.echoAll(b):""));switch(a){case "remove":this.removeCacheData(b);break;case "add":this.addCacheData(b);break;case "replace":case "update":this.updateCacheData(b)}}},isc.A.addCacheData=function(a){isc.isAn.Array(a)||(a=[a]);var b=this.getDataSource().applyFilter(a,this.criteria,this.context);this.logInfo("Adding rows to cache: "+b.length+" of "+a.length+
" rows match filter criteria");a=this.getDataSource().getPrimaryKeyFieldNames()[0];for(var c=0;c<b.length;c++)this.$651(b[c],a)},isc.A.$651=function(a,b){if(b==null)b=this.getDataSource().getPrimaryKeyFieldNames()[0];var c=a[this.parentIdField];c=c!=null?this.find(b,c):this.defaultNewNodesToRoot||this.rootValue==null?this.getRoot():null;if(c!=null&&this.getLoadState(c)==isc.Tree.LOADED){a=isc.clone(a);this.add(a,c);return true}return false},isc.A.updateCacheData=function(a){isc.isAn.Array(a)||(a=
[a]);for(var b=0,c=this.getDataSource().getPrimaryKeyFieldNames()[0],d=0;d<a.length;d++){var e=a[d],f=this.getDataSource().recordMatchesFilter(e,this.criteria,this.context);this.logIsDebugEnabled()&&!f&&this.logDebug("updated node :\n"+this.echo(e)+"\ndidn't match filter: "+this.echo(this.criteria));var g=this.find(c,e[c]);if(g==null)f&&this.$651(e,c)&&this.logInfo("updated row returned by server doesn't match any cached row,  adding as new row.  Primary key value: "+this.echo(e[c])+", complete row: "+
this.echo(e));else if(f){if(e[this.parentIdField]!=g[this.parentIdField]){f=this.find(c,e[this.parentIdField]);if(f==null&&(this.defaultNewNodesToRoot||this.rootValue==null))f=this.getRoot();if(f==null||this.getLoadState(f)!=isc.Tree.LOADED){this.remove(g);b++;continue}this.move(g,f)}isc.addProperties(g,e)}else{this.remove(g);b++}}this.logIsDebugEnabled()&&this.logDebug("updated cache, "+(a.length-b)+" out of "+a.length+" rows remain in cache, 0 row(s) added.")},isc.A.removeCacheData=function(a){isc.isAn.Array(a)||
(a=[a]);for(var b=[],c=this.getDataSource().getPrimaryKeyFieldNames()[0],d=0;d<a.length;d++){var e=this.find(c,a[d][c]);e==null?this.logWarn("Cache synch: couldn't find deleted node:"+this.echo(a[d])):b.add(e)}this.removeList(b)},isc.A.getTitle=function(a){var b=this.getNodeDataSource(a);if(!b)return"root";b=a[b.getTitleField()];if(b!=null)return b;return this.Super("getTitle",arguments)},isc.A.indexOf=function(a,b,c,d,e){for(var f=this.getDataSource().getPrimaryKeyFieldNames(),g=0;g<f.length;g++){var h=
f[g];if(a[h]!=null)return this.findIndex(h,a[h])}return this.invokeSuper(isc.ResultTree,"indexOf",a,b,c,d,e)});isc.B._maxIndex=isc.C+22;isc.ResultTree.getPrototype().toString=isc.$63a;isc.ResultTree.getPrototype().logMessage=isc.$63b;isc.ResultTree.registerStringMethods({dataArrived:"parentNode"});isc.A=isc.Canvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.buildRequest=function(a,b,c){a||(a={});if(c)a.afterFlowCallback=
c;if(b=="filter"){b="fetch";if(a.textMatchStyle==null)a.textMatchStyle="substring"}if(this.textMatchStyle!=null)a.textMatchStyle=this.textMatchStyle;b=isc.DS.$372(b);if(this.dataPageSize)a.dataPageSize=this.dataPageSize;if(this.dataFetchMode)a.dataFetchMode=this.dataFetchMode;c=a.operationId||a.operation;if(c==null)switch(b){case "fetch":c=this.fetchOperation;break;case "add":c=this.addOperation||this.saveOperation;break;case "update":c=this.updateOperation||this.saveOperation;break;case "remove":c=
this.removeOperation||this.deleteOperation;break;case "validate":c=this.validateOperation}a.operation=c||this.operation;a.componentId=this.ID;return isc.rpc.addDefaultOperation(a,this.dataSource,b)},isc.A.createResultTree=function(a,b,c){if(c==null)c={};if(c.clientContext==null)c.clientContext={};c.clientContext.$53w=b;var d=c.clientContext;if(c.afterFlowCallback!=null)if(d.$53w==null)d.$53w=c.afterFlowCallback;else d.$53w!=c.afterFlowCallback&&this.logWarn("createResultTree called with request.afterFlowCallback:"+
this.echo(c.afterFlowCallback)+" as well as explicit callback parameter "+this.echo(b)+". The request.afterFlowCallback will not be fired.");c.afterFlowCallback={target:this,methodName:"$53x"};b=isc.addProperties({initialData:this.initialData},this.dataProperties,c.dataProperties,this.treeProperties,c.treeProperties);b.criteria=a;b.operation=c.operation;b.context=c;b.dataSource=this.dataSource;b.componentId=this.ID;b.$31k=true;if(this.loadDataOnDemand!=null)b.loadDataOnDemand=this.loadDataOnDemand;
if(this.treeRootValue!=null)b.rootValue=this.treeRootValue;if(this.treeDataRelations)b.treeRelations=this.treeDataRelations;if(this.multiDSTree!=null)b.multiDSTree=this.multiDSTree;a=this.getDataSource().resultTreeClass||"ResultTree";return isc.ClassFactory.getClass(a).create(b)},isc.A.$53x=function(a,b,c){var d=c.clientContext?c.clientContext.$53w:null;if(d){this.fireCallback(d,"dsResponse,data,dsRequest",arguments);delete c.clientContext.$53w}});isc.B._maxIndex=isc.C+3;if(isc.ValuesManager){isc.A=
isc.ValuesManager.getPrototype();isc.A.buildRequest=isc.Canvas.getInstanceProperty("buildRequest")}isc.ClassFactory.defineInterface("EditorActionMethods");isc.EditorActionMethods.addInterfaceMethods({save:function(a){return this.saveData(a)},editSelected:function(a,b){return this.editSelectedData(a,b)},editNew:function(a,b){return this.editNewRecord(a,b)},editNewRecord:function(a){this.setSaveOperationType("add");this.$39m(a)},editRecord:function(a){this.setSaveOperationType(a==null?"add":"update");
this.$39m(a)},$39m:function(a){delete this.$50l;delete this.$39l;a=isc.addProperties({},a);this.setData(a)},editSelectedData:function(a){if(isc.isA.String(a))a=window[a];if(a)(a=a.selection.getSelection())&&a.length>0&&this.editList(a)},editList:function(a){this.setSaveOperationType("update");this.$50b(a)},$50b:function(a){this.$50l=0;this.$39l=a;this.editRecord(isc.addProperties({},a[this.$50l]))},editNextRecord:function(){this.editOtherRecord(true)},editPrevRecord:function(){this.editOtherRecord(false)},
editOtherRecord:function(a){if(this.$39l)if(this.isVisible()&&this.valuesHaveChanged()){this.$39n=a;this.saveData({target:this,methodName:"editOtherReply"})}else{if(a&&this.$50l>=this.$39l.length-1){this.logWarn("Unable to edit next record - this is the last selected record");return false}if(!a&&this.$50l<=0){this.logWarn("Unable to edit previous record - this is the first selected record");return false}this.$50l+=a?1:-1;this.setData(isc.addProperties({},this.$39l[this.$50l]))}},editOtherReply:function(a,
b,c){b=this.$39n;delete this.$39n;if(a.status<0&&a.errors)return this.setErrors(a.errors,true);if(a.status<0)return isc.RPCManager.$a0(a,c);this.rememberValues();this.$39l[this.$50l]=this.getValues();this.editOtherRecord(b);return true},validateData:function(a,b){if(!this.validate())return false;var c=this.getValues(),d=this.buildRequest(b,"validate");d.editor=this;if(d.valuesAsParams){if(!d.params)d.params={};isc.addProperties(d.params,c)}return this.getDataSource().validateData(c,a?a:{target:this,
methodName:"saveEditorReply"},d)},reset:function(){this.resetValues()},cancel:function(a){var b={actionURL:this.action,target:window,sendNoQueue:true,ignoreTimeout:true,useXmlHttpRequest:false,params:{},useSimpleHttp:true};b.params[this.cancelParamName]=this.cancelParamValue;if(b.actionURL){isc.addProperties(b,a);isc.rpc.sendRequest(b)}else this.logWarn("No actionURL defined for the cancel RPC - set 'action' on your form orprovide an actionURL in the requestProperties to cancel()")},submit:function(a,
b){if(this.valuesManager!=null)return this.valuesManager.submit(a,b);if(this.submitValues!=null)return this.submitValues(this.getValues(),this);return this.canSubmit?this.submitForm():this.saveData(a,b)},saveOperationIsAdd:function(){if(this.saveOperationType)return this.saveOperationType=="add";if(this.dataSource)return!isc.DataSource.getDataSource(this.dataSource).recordHasAllKeys(this.getValues());return false},saveData:function(a,b,c){if(this.dataSource==null)if(this.selectionComponent!=null)(b=
this.$71d)&&this.selectionComponent.setRecordValues&&this.selectionComponent.setRecordValues(b,this.getValues());else this.logWarn("saveData() called on a non-databound "+this.Class+". This is not supported.  for information on databinding of components look at the documentation for the DataSource class.  If this was intended to be a native HTML form submission, set the canSubmit property to true on this form.");else if(isc.Offline&&isc.Offline.isOffline()&&!this.dataSource.clientOnly)isc.warn(this.offlineSaveMessage);
else{if(b==null&&isc.isAn.Object(a)&&a.methodName==null){b=a;a=b.afterFlowCallback}if(b==null)b={};var d=this.getSaveOperationType(b);if(!b.oldValues)b.oldValues=d!="add"?this.$10s:{};if(this.validationURL&&!c){c={};isc.addProperties(c,b);isc.addProperties(c,{actionURL:this.validationURL,valuesAsParams:true,sendNoQueue:true});c.$40b=b;c.$40c=a;this.performingServerValidation=true;this.validateData(this.getID()+".$40d(rpcRequest,rpcResponse,data)",c)}else{var e=this.getFileItemForm();if(e&&e.isDrawn()){this.updateFileItemForm();
if(!this.validate())return false;return e.saveData(a,b,c)}this.$40c=a;a=this.getID()+".$49z(dsRequest, dsResponse, data)";b=this.buildRequest(b,d,a);a=false;if(this.submitParamsOnly)b.useSimpleHttp=true;if(isc.DynamicForm&&isc.isA.DynamicForm(this)){if(this.$66g){b.actionURL=this.action;b.target=this.target?this.target:window;a=true}if(this.method!=isc.DynamicForm.getInstanceProperty("method"))b.httpMethod=this.method}if(!this.validate())return false;c=this.getValues();return isc.DynamicForm&&isc.isA.DynamicForm(this)&&
this.isMultipart()||this.canSubmit||a?this.submitEditorValues(c,b.operation,b.callback,b):this.saveEditorValues(c,b.operation,b.callback,b)}}},setSelectionComponent:function(a,b){if(a){var c=a;if(isc.isA.String(a))a=window[a];if(!a||!isc.isA.Canvas(a)||a.dataArity!="multiple")this.logWarn("setSelectionComponent() - selection component specified as:"+c+" this is not a valid component");else if(a.getSelection){if(!b&&this.selectionComponent){if(this.selectionComponent==a)return;this.isObserving(this.selectionComponent,
"selectionChanged")&&this.ignore(this.selectionComponent,"selectionChanged");this.isObserving(this.selectionComponent,"cellSelectionChanged")&&this.ignore(this.selectionComponent,"cellSelectionChanged")}this.selectionComponent=a;this.selectionComponent.useCellRecords?this.observe(this.selectionComponent,"cellSelectionChanged","observer.selectionComponentCellSelectionChanged(observed, cellList)"):this.observe(this.selectionComponent,"selectionChanged","observer.selectionComponentSelectionChanged(observed, record,state)")}else this.logWarn("setSelectionComponent() - specified selection component:"+
a+" does not support selection - ignoring")}else{if(this.selectionComponent!=null){this.ignore(this.selectionComponent,"selectionChanged");this.ignore(this.selectionComponent,"cellSelectionChanged")}delete this.selectionComponent}},selectionComponentSelectionChanged:function(a,b,c){if(c){this.$71d=a.getPrimaryKeys(b);this.editRecord(b)}},selectionComponentCellSelectionChanged:function(a,b){for(var c=0;c<b.length;c++){var d=b[c];d=this.selectionComponent.getCellRecord(d[0],d[1]);if(a.cellIsSelected(d))break;
d=null}if(d){this.$71d=a.getPrimaryKeys(d);this.editRecord(d)}},updateFileItemForm:function(){var a=this.getFileItemForm();if(a!=null){var b=a.getValues(),c=this.getValues(),d=a.getItem(0).getFieldName(),e;for(e in b)e!=d&&a.setValue(e,null);for(e in c)e!=d&&a.setValue(e,c[e]);this.$66g&&a.setAction(this.action);a.dataSource=this.dataSource}},isNewRecord:function(){return this.getSaveOperationType()=="add"},setSaveOperationType:function(a){this.saveOperationType=a},getSaveOperationType:function(a){var b;
if(!a||!a.operation){b=a&&a.operationType?a.operationType:this.saveOperationType;if(!b&&this.dataSource!=null){a=isc.DataSource.getDataSource(this.dataSource).getPrimaryKeyFieldNames();for(var c=this.getValues(),d=0;d<a.length;d++){var e=a[d],f=c[a];if(f==null){b="add";break}if(this.$10s[e]!==void 0&&this.$10s[e]!=f)b="add";if((e=this.getItem(e))&&e.isVisible()&&e.shouldSaveValue&&e.isEditable()){b="add";break}}if(b==null)b="update"}}return b},$49z:function(a,b,c){this.$490=0;if(!this.suppressServerDataSync&&
b&&b.status>=0&&c!=null){if(isc.isAn.Array(c))c=c[0];var d=a.originalData||a.data,e=this.getValues(),f;for(f in c){var g=this.getField(f);if(!this.fieldValuesAreEqual(g,d[f],c[f])&&this.fieldValuesAreEqual(g,e[f],d[f])&&(!g||!isc.isAn.UploadItem(g)))this.setValue(f,c[f])}this.saveOperationType=="add"&&delete this.saveOperationType}this.$491={request:a,response:b,data:c};this.formSavedComplete()},formSavedComplete:function(){for(var a=this.getFields(),b=this.$490;b<a.length;b++){this.$490++;var c=
a[b];if(isc.isA.Function(c.formSaved)&&c.formSaved(this.$491.request,this.$491.response,this.$491.data)===false)return}this.$40c&&this.fireCallback(this.$40c,"dsResponse,data,dsRequest",[this.$491.response,this.$491.data,this.$491.request]);delete this.$492;delete this.$40c},saveEditorValues:function(a,b,c,d){d||(d={});isc.addProperties(d,{prompt:d.prompt||isc.RPCManager.saveDataPrompt,editor:this});if(d.clientContext==null)d.clientContext={};d.clientContext.$69t=d.willHandleError;d.willHandleError=
true;if(d.valuesAsParams){if(!d.params)d.params={};isc.addProperties(d.params,a)}return this.getDataSource().performDSOperation(b.type,a,c?c:{target:this,methodName:"saveEditorReply"},d)},submitEditorValues:function(a,b,c,d){d||(d={});isc.addProperties(d,{directSubmit:true,submitForm:this});return this.saveEditorValues(a,b,c,d)},saveEditorReply:function(a,b,c){if(a.status==isc.RPCResponse.STATUS_VALIDATION_ERROR&&a.errors){isc.isA.FileItem(this.targetItem)?this.parentElement.setErrors(a.errors,true):
this.setErrors(a.errors,true);return false}if(c.clientContext)c.willHandleError=c.clientContext.$69t;if(a.status<0&&!c.willHandleError)return isc.RPCManager.$a0(a,c);return true},$40d:function(a,b){if(b.status==isc.RPCResponse.STATUS_SUCCESS){this.performingServerValidation=false;this.markForRedraw("serverValidationSuccess");this.saveData(a.$40c,a.$40b,true);a.$40c=null;a.$40b=null}else this.setErrors(b.errors,true)}});isc.DynamicForm&&isc.ClassFactory.mixInInterface("DynamicForm","EditorActionMethods");
isc.$457={fetchData:function(a,b,c){var d=this.getDataSource();if(d){if(this.$458==null)this.$458=[];this.$458.add(b);c=this.buildRequest(c,"fetch");d.fetchData(a,{target:this,methodName:"fetchDataReply"},c)}else this.logWarn("Ignoring call to fetchData() on a DynamicForm with no valid dataSource")},fetchDataReply:function(a,b,c){if(b==null||isc.isAn.emptyObject(b)||isc.isAn.Array(b)&&b.getLength()==0)a.status==isc.RPCResponse.STATUS_OFFLINE&&isc.say(this.offlineMessage);this.editRecord(isc.isAn.Array(b)?
b.get(0):b);var d=this.$458.pop();d&&this.fireCallback(d,"dsResponse,data,dsRequest",[a,b,c])},filterData:function(a,b,c){var d=this.getDataSource();if(d){if(this.$458==null)this.$458=[];this.$458.add(b);d.filterData(a,{target:this,methodName:"fetchDataReply"},c)}else this.logWarn("Ignoring call to filterData() on a DynamicForm with no valid dataSource")}};isc.DynamicForm&&isc.DynamicForm.addMethods(isc.$457);isc.ValuesManager&&isc.ClassFactory.mixInInterface("ValuesManager","EditorActionMethods");
isc.ValuesManager&&isc.ValuesManager.addMethods(isc.$457);if(isc.ValuesManager){isc.A=isc.ValuesManager.getPrototype();isc.A.fieldValuesAreEqual=isc.Canvas.getPrototype().fieldValuesAreEqual}if(isc.TreeGrid){isc.A=isc.TreeGrid.getPrototype();isc.A.ignoreEmptyCriteria=true;isc.A=isc.TreeGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.useExistingDataModel=function(){return false},isc.A.createDataModel=function(a,b,c){return this.createResultTree(a,
c.afterFlowCallback,c,null)});isc.B._maxIndex=isc.C+2}if(isc.DetailViewer){isc.A=isc.DetailViewer.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.viewSelectedData=function(a,b,c){if(isc.isA.String(a))a=window[a];c=c||{};var d=a.selection.getSelection();if(d&&d.length>0)if(c.operation){a=c.operation;var e=this.getDataSource();d=e.filterPrimaryKeyFields(d);if(c.prompt==null)c.prompt=isc.RPCManager.getViewRecordsPrompt;c.viewer=
this;return e.performDSOperation(a.type,d,b?b:{target:this,methodName:"viewSelectedDataReply"},c)}else this.setData(d);return false},isc.A.viewSelected=function(a,b){return this.viewSelectedData(a,b)},isc.A.viewSelectedDataReply=function(a,b){this.setData(b)});isc.B._maxIndex=isc.C+3}isc.defineClass("DataView",isc.VLayout);isc.A=isc.DataView.getPrototype();isc.A.autoLoadServices=true;isc.A.autoBindDBCs=true;isc.A=isc.Canvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;
isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.dataViewInit=function(){var a=this.operations;if(a==null)this.bindToServices();else{this.operations.setProperty("dataView",this);if(this.autoLoadServices){a=a.getProperty("location").getUniqueItems();this.logInfo("loading services: "+a);this.$72q=a.length;for(var b=this,c=0;c<a.length;c++)isc.xml.loadWSDL(a[c],function(d){b.$72q--;b.logInfo("service loaded: "+d+", remaining: "+b.$72q);if(window.avosConfig&&d.dataURL&&d.dataURL.contains("active-bpel/services/")&&
d.dataURL.contains("localhost")){var e=d.dataURL;e=window.avosConfig.baseUrl+"/"+e.substring(e.indexOf("services/"));isc.logWarn("revising AV service location from: "+d.dataURL+" to "+e);d.setLocation(e)}if(b.$72q==0){b.dataViewLoaded();b.bindToServices()}},null,true)}}},isc.A.addVM=function(a){this.addedVMs=this.addedVMs||[];this.addedVMs.add(a)},isc.A.bindToServices=function(){if(this.autoBindDBCs){var a=this.getAllDBCs(this);if(a){var b=this.getAllVMs();this.logIsDebugEnabled("DataView")&&this.logDebug("vms: "+
this.echoAll(b.getProperties(["dataSource","serviceNamespace","serviceName"]))+", all dbcs: "+this.echoAll(a.getProperties(["dataSource","serviceNamespace","serviceName"])),"DataView");for(var c=0;c<a.length;c++){var d=a[c];if(d.dataSource){this.canEdit!=null&&d.canEdit==null&&d.setCanEdit(this.canEdit);var e=this.findVM(d,b);if(e){this.logIsInfoEnabled("dataRegistration")&&this.logWarn("dbc: "+d+" binding to dataSource: "+d.dataSource+" and vm: "+e+", with fields: "+this.echoAll(d.originalFields),
"dataRegistration");d.originalFields&&d.setDataSource(d.dataSource,d.originalFields);e.addMember(d)}else this.logInfo("no VM for DBC: "+this.echoLeaf(d),"DataView")}isc.isA.DynamicForm(d)&&d.items&&d.items.map("registerWithDataView",this)}}}},isc.A.getAllVMs=function(){var a=[],b=this.operations;if(b){a.addAll(b.getProperty("inputVM"));a.addAll(b.getProperty("outputVM"))}a.addAll(this.addedVMs);a.removeList([null]);return a},isc.A.findVM=function(a,b){b||(b=this.getAllVMs());for(var c=isc.isA.DataSource(a)?
a:a.getDataSource(),d=0;d<b.length;d++){var e=b[d];if(c==e.getDataSource())return e}},isc.A.getAllDBCs=function(a){var b=a.children;if(!b)return null;for(var c=[],d=0;d<b.length;d++){a=b[d];isc.isA.DataBoundComponent(a)&&c.add(a);c.addAll(this.getAllDBCs(a))}return c},isc.A.registerItem=function(a){if(a.inputDataPath)if(isc.WebService.getByName(a.inputServiceName,a.inputServiceNamespace)){var b=a.inputSchemaDataSource,c=this.itemRegistry=this.itemRegistry||{};(c[b]=c[b]||[]).add(a)}else this.logWarn("Member: "+
a+" could not find webService with name '"+a.inputServiceName+"', namespace '"+a.inputServiceNamespace+"'. Has it been loaded?")},isc.A.populateListeners=function(a){var b=a.getDataSource().getID(),c=this.itemRegistry;this.logIsInfoEnabled("DataView")&&this.logInfo("message: "+b+", registry: "+this.echo(c)+", data: "+this.echo(a.getValues()),"DataView");if(c)if(b=c[b])for(c=0;c<b.length;c++){var d=b[c],e=a.getValue(d.inputDataPath);this.logWarn("component: "+d+" with inputDataPath: "+d.inputDataPath+
" got data: "+this.echo(e));isc.isA.FormItem(d)?d.setValue(e):d.setData(e)}},isc.A.dataViewLoaded=function(){});isc.B._maxIndex=isc.C+9;isc.DataView.registerStringMethods({dataViewLoaded:""});isc.defineClass("ServiceOperation").addClassMethods({getServiceOperation:function(a,b,c){if(this.$725)return this.$725.find({operationName:a,serviceName:b,serviceNamespace:c})}});isc.A=isc.ServiceOperation.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;
isc.B.push(isc.A.init=function(){isc.ClassFactory.addGlobalID(this);this.Super("init",arguments);if(!isc.ServiceOperation.$725)isc.ServiceOperation.$725=[];isc.ServiceOperation.$725.add(this)},isc.A.invoke=function(){var a=this.service=isc.WebService.getByName(this.serviceName,this.serviceNamespace);if(a){var b=this.inputVM.getValues();if(a.useSimplifiedInputs(this.operationName))b=b[isc.firstKey(b)];var c=this;a.callOperation(this.operationName,b,null,function(d,e,f,g){c.invocationCallback(d,e,f,
g)})}else this.logWarn("Unable to find web service with serviceName '"+this.serviceName+"' and serviceNamespace '"+this.serviceNamespace+"'. Has it been loaded?")},isc.A.invocationCallback=function(a){if(this.outputVM){if(this.service.getSoapStyle(this.operationName)=="document"){var b=this.outputVM.getDataSource().getFieldNames();if(b.length==1){b=b.first();var c={};c[b]=a;a=c}}this.outputVM.setValues(a);this.logIsInfoEnabled()&&this.logInfo("populating listeners on dataView: "+this.dataView+", vm has values: "+
this.echo(this.outputVM.getValues()));this.dataView&&this.dataView.populateListeners(this.outputVM)}});isc.B._maxIndex=isc.C+3;(function(){var a={explicitOffline:null,isOffline:function(){if(this.explicitOffline!==null)return this.explicitOffline;return window.navigator.onLine?false:true},goOffline:function(){this.explicitOffline=true},goOnline:function(){this.explicitOffline=false},useNativeOfflineDetection:function(){this.explicitOffline=null},KEY_PREFIX:"isc-",LOCAL_STORAGE:"localStorage",GLOBAL_STORAGE:"globalStorage",
DATABASE_STORAGE:"databaseStorage",GEARS_DATABASE_API:"gears database api",USERDATA_PERSISTENCE:"userData persistence",GOOGLE_GEARS:"google gears",NO_MECHANISM:"no discovered mechanism",maxResponsesToPersist:100,userDataPersistenceInIE8:true,localStorageType:function(){if(window.localStorage)if(!this.userDataPersistenceInIE8||!isc.Browser.isIE)return this.LOCAL_STORAGE;if(window.globalStorage)return this.GLOBAL_STORAGE;if(window.openDatabase)return this.DATABASE_STORAGE;if(isc.Browser.isIE&&isc.Browser.version>=
5){b.isInitialized||b.init();return this.USERDATA_PERSISTENCE}return this.NO_MECHANISM},getNativeStoredValuesCount:function(){switch(this.localStorageType()){case this.LOCAL_STORAGE:return localStorage.length;case this.USERDATA_PERSISTENCE:return b.getNativeStoredValuesCount()}},getSCStoredValuesCount:function(){var c=this.get(this.countKey);return c=c?c*1:0},getKeyForNativeIndex:function(c){switch(this.localStorageType()){case this.LOCAL_STORAGE:return localStorage.key(c);case this.USERDATA_PERSISTENCE:return b.getKeyForNativeIndex(c)}},
clearCache:function(){for(var c=this.getSCStoredValuesCount();this.getSCStoredValuesCount()>0;){this.removeOldestEntry();if(this.getSCStoredValuesCount()==c)break;c=this.getSCStoredValuesCount()}},clearCacheNatively:function(){if(this.localStorageType()==this.USERDATA_PERSISTENCE)b.clearCacheNatively();else{var c=this.getNativeStoredValuesCount();isc.logWarn("Removing all "+c+" entries from local storage");for(var d=0;d<c;d++)this.$786(this.getKeyForNativeIndex(0),false)}},logCacheContents:function(c){var d=
this.getCacheContents();this.logWarn("Dumping the contents of the browser's local storage:");for(var e in d){var f=d[e];if(f&&f.length>c)f=f.substring(0,c);this.logWarn(e+" ===> "+f)}},getCacheContents:function(){for(var c=0,d={},e=this.getSCStoredValuesCount();c<e;){var f=this.getPriorityQueueKey(c);if(f.indexOf(this.KEY_PREFIX)==0)f=f.substring(this.KEY_PREFIX.length);d[f]=this.get(f);c++}return d},getCacheKeys:function(){for(var c=0,d=[],e=this.getSCStoredValuesCount();c<e;){this.getPriorityQueueKey(c);
d[d.length]=key;c++}return d},removeOldestEntry:function(){var c=this.getAndRemoveOldestFromPriorityQueue();c!=null&&this.remove(c,true)},$787:function(c){c=100;this.logWarn("Dumping the contents of raw userData storage:");for(var d=0;d<this.userDataSpan.xmlDocument.firstChild.attributes.length;d++){var e=this.userDataSpan.xmlDocument.firstChild.attributes[d].name,f=this.userDataSpan.getAttribute(e);if(f&&f.length>c)f=f.substring(0,c)+"...";this.logWarn(e+" ===> "+f)}},put:function(c,d,e){for(var f=
(new Date).getTime(),g=this.get(c);;)try{this.$788(c,d);break}catch(h){if(e!==false&&this.isStorageException(h)){var i=this.getStorageMetrics().storedEntries;if(i>0){this.logWarn("Cache full; removing oldest entry and trying again");this.removeOldestEntry()}else{this.logWarn("Can't add this entry to browser-local storage, even though the cache is empty - the item must be larger than the browser's permitted cache space.");break}}else throw h;}for(var j=(new Date).getTime(),k=false,l=false;!k||!l;)try{k||
this.addToPriorityQueue(c);k=true;l||this.updateMetrics("put",c,d,g);l=true}catch(m){if(this.isStorageException(m)){if(e!==false){i=this.getStorageMetrics().storedEntries;if(i>0){this.logWarn("Cache full when updating priority queue or metrics; removing oldest entry and trying again");this.removeOldestEntry();continue}}this.logWarn("Cache full when updating priority queue or metrics; rolling back the entire update");this.$786(c);k&&this.removeFromPriorityQueue(c);this.rebuildMetrics()}throw m;}this.logWarn("put() with key: "+
c+"\nitem: "+this.echoLeaf(d)+": "+(j-f)+"ms. Maintaining the priority queue and metrics took a further "+(new Date).getTime()-j+"ms")},$788:function(c,d,e){c=(e===false?"":this.KEY_PREFIX)+c;switch(this.localStorageType()){case this.LOCAL_STORAGE:localStorage.setItem(c,d);break;case this.USERDATA_PERSISTENCE:b.putValue(c,d);break;case this.GLOBAL_STORAGE:case this.DATABASE_STORAGE:case this.GEARS_DATABASE_API:case this.GOOGLE_GEARS:this.logError("Persistence method '"+this.localStorageType()+"' not yet supported")}},
isStorageException:function(c){switch(this.localStorageType()){case this.LOCAL_STORAGE:return isc.Browser.isIE?c.number==-2147024882:isc.Browser.isMoz?c.name=="NS_ERROR_DOM_QUOTA_REACHED":c.name=="QUOTA_EXCEEDED_ERR";case this.USERDATA_PERSISTENCE:return c.number==-2147024857}},get:function(c){var d=(new Date).getTime(),e;switch(this.localStorageType()){case this.LOCAL_STORAGE:e=localStorage.getItem(this.KEY_PREFIX+c);break;case this.USERDATA_PERSISTENCE:e=b.getValue(this.KEY_PREFIX+c)}if(e)e=isc.clone(e);
var f=(new Date).getTime();this.logWarn("get() with key: "+c+"\nitem is: "+this.echoLeaf(e)+": "+(f-d)+"ms");return e},remove:function(c,d){this.logWarn("Removing item for key: "+c);this.updateMetrics("remove",c);d||this.removeFromPriorityQueue(c);this.$786(c)},$786:function(c,d){c=(d===false?"":this.KEY_PREFIX)+c;switch(this.localStorageType()){case this.LOCAL_STORAGE:localStorage.removeItem(c);break;case this.USERDATA_PERSISTENCE:b.removeValue(c)}},getUndecoratedKey:function(c){if(c&&c.startsWith(this.KEY_PREFIX))c=
c.substring(this.KEY_PREFIX.length);return c},priorityQueueKey:"pq",addToPriorityQueue:function(c){this.removeFromPriorityQueue(c);c=this.toInternalKey(c);var d=this.get(this.priorityQueueKey);if(d)eval("var pq = "+d);else var e=[];e.push(c);this.$788(this.priorityQueueKey,this.serialize(e))},removeFromPriorityQueue:function(c){c=this.toInternalKey(c);var d=this.get(this.priorityQueueKey);if(d)eval("var pq = "+d);else var e=[];for(d=0;d<e.length;d++)if(e[d]==c){c=e.slice(0,d);e=e.slice(d+1);e=c.concat(e);
break}this.$788(this.priorityQueueKey,this.serialize(e))},getAndRemoveOldestFromPriorityQueue:function(){var c=this.get(this.priorityQueueKey);if(c)eval("var pq = "+c);else var d=[];c=d.shift();this.$788(this.priorityQueueKey,this.serialize(d));return this.toUserKey(c)},getPriorityQueueEntry:function(c){c=this.getPriorityQueueKey(c);var d=this.get(c),e={};e[c]=d;return e},getPriorityQueueValue:function(c){return this.get(this.getPriorityQueueKey(c))},getPriorityQueueKey:function(c){var d=this.get(this.priorityQueueKey);
if(d)eval("var pq = "+d);else var e=[];return this.toUserKey(e[c])},getPriorityQueue:function(){var c=this.get(this.priorityQueueKey);if(c)eval("var pq = "+c);else var d=[];return d},toInternalKey:function(c){if(this.localStorageType()==this.USERDATA_PERSISTENCE)return b.getDataStoreKey(this.KEY_PREFIX+c);return c},toUserKey:function(c){if(this.localStorageType()==this.USERDATA_PERSISTENCE)return this.getUndecoratedKey(b.getUserKey(c));return c},countKey:"storedEntryCount__",keyKey:"storedKeyBytes__",
valueKey:"storedValueBytes__",updateMetrics:function(c,d,e,f){var g=this.KEY_PREFIX+d,h=this.get(this.countKey)||0,i=this.get(this.keyKey)||0,j=this.get(this.valueKey)||0;i=1*i;j=1*j;if(c=="remove"){c=this.get(d);h--;i-=g.length;j-=c.length}else if(f==null){h++;i+=g.length;j+=e.length}else j+=e.length-f.length;this.$788(this.countKey,h);this.$788(this.keyKey,i);this.$788(this.valueKey,j)},rebuildMetrics:function(){for(var c=this.getPriorityQueue(),d=0,e=0,f=0,g=0;g<c.length;g++){var h=this.get(c[g]);
d++;e+=c[g].length;f+=h.length}this.$788(this.countKey,d);this.$788(this.keyKey,e);this.$788(this.valueKey,f)},getStorageMetrics:function(){var c=this.get(this.countKey)||0,d=this.get(this.keyKey)||0,e=this.get(this.valueKey)||0,f=0,g=0,h=0;if(c)f=c.length;if(d)g=d.length;if(e)h=e.length;c=1*c;d=1*d;e=1*e;var i=this.get(this.priorityQueueKey);f=this.countKey.length+this.keyKey.length+this.valueKey.length+f+g+h;i=i==null?0:i.length+(this.KEY_PREFIX+this.priorityQueueKey).length;return{storedEntries:c,
storedKeyBytes:d,storedValueBytes:e,metricsOverhead:f,priorityQueue:i,total:d+e+f+i}},getTotalStorageUsed:function(){var c=this.getStorageMetrics();return c.storedKeyBytes+c.storedValueBytes+c.metricsOverhead+c.priorityQueue},storeResponse:function(c,d){var e=(new Date).getTime();d.offlineTimestamp=e;var f=this.serialize(this.trimRequest(c)),g=this.serialize(this.trimResponse(d));this.logWarn("storeResponse serializing: "+((new Date).getTime()-e)+"ms");this.get(f)==null&&this.getSCStoredValuesCount()>=
this.maxResponsesToPersist&&this.removeOldestEntry();this.put(f,g)},trimRequest:function(c){for(var d=["dataSource","operationType","operationId","textMatchStyle","values","sortBy","startRow","endRow","data"],e={},f=0;f<d.length;f++)if(c[d[f]]!==void 0)e[d[f]]=c[d[f]];return e},trimResponse:function(c){for(var d=["dataSource","startRow","endRow","totalRows","data","offlineTimestamp","status","errors","invalidateCache","cacheTimestamp"],e={},f=0;f<d.length;f++)if(c[d[f]]!==void 0)e[d[f]]=c[d[f]];return e},
getResponse:function(c){c=this.get(this.serialize(this.trimRequest(c)));eval("returnValue = "+c)},serialize:function(c){return isc.Comm.serialize(c,false)},showStorageInfo:function(){if(!this.storageBrowser){isc.Offline.localStorageType()==isc.Offline.USERDATA_PERSISTENCE&&isc.Timer.setTimeout(function(){isc.say("WARNING:  This browser uses an old storage mechanism that does not permit arbitrary key/value pair storage.  This means we have to store extra management data, with the upshot that the metrics reported for 'priority queue' and 'overhead' are indicative, but not accurate")},
0);this.metricsDF=isc.DynamicForm.create({width:"100%",numCols:6,fields:[{name:"storedEntries",title:"No. entries",disabled:true},{name:"storedKeyBytes",title:"Used by keys",disabled:true},{name:"storedValueBytes",title:"Used by values",disabled:true},{name:"priorityQueue",title:"Used by Priority Queue",disabled:true},{name:"metricsOverhead",title:"Metrics overhead",disabled:true},{name:"total",title:"Total Bytes",disabled:true}]});this.storageLG=isc.ListGrid.create({width:"100%",height:"*",canRemoveRecords:true,
removeData:function(c){isc.ask("Remove this entry?",function(d){if(d){isc.Offline.remove(c.key);isc.Offline.refreshStorageInfo()}})},rowDoubleClick:function(c){isc.Offline.createStorageEditorWindow();isc.Offline.storageEditorWindow.show();isc.Offline.storageEditor.editRecord(c)},fields:[{name:"key",width:"25%",title:"Key"},{name:"value",title:"Value"}]});this.storageBrowser=isc.Window.create({autoCenter:true,canDragResize:true,width:Math.floor(isc.Page.getWidth()*0.5),height:Math.floor(isc.Page.getHeight()*
0.5),title:"Offline Storage",items:[this.metricsDF,this.storageLG,isc.HLayout.create({width:"100%",height:1,members:[isc.LayoutSpacer.create({width:"*"}),isc.Button.create({title:"Add Entry",click:function(){isc.Offline.createStorageEditorWindow();isc.Offline.storageEditorWindow.show();isc.Offline.storageEditor.editNewRecord()}})]})]})}this.storageBrowser.show();this.refreshStorageInfo()},createStorageEditorWindow:function(){if(!isc.Offline.storageEditorWindow){isc.Offline.storageEditor=isc.DynamicForm.create({fields:[{name:"key",
title:"Key",editorType:"TextAreaItem",width:400},{name:"value",title:"Value",editorType:"TextAreaItem",width:400},{name:"saveButton",type:"button",title:"Save",click:function(){var c=isc.Offline.storageEditor;if(c.saveOperationType=="update"&&c.getValue("key")!=c.getOldValue("key"))isc.ask("Key has changed - this will create a new entry. Do you want to retain the old entry as well? (if you answer 'No', it will be removed",function(d){d===false&&isc.Offline.remove(c.getOldValue("key"));if(d!=null){isc.Offline.put(c.getValue("key"),
c.getValue("value"));isc.Offline.storageEditorWindow.hide();isc.Offline.refreshStorageInfo()}});else{isc.Offline.put(c.getValue("key"),c.getValue("value"));isc.Offline.storageEditorWindow.hide();isc.Offline.refreshStorageInfo()}}}]});isc.Offline.storageEditorWindow=isc.Window.create({bodyProperties:{margin:5},title:"Edit Offline Storage Entry",isModal:true,autoCenter:true,height:280,width:480,items:[isc.Offline.storageEditor]})}},refreshStorageInfo:function(){this.metricsDF.editRecord(isc.Offline.getStorageMetrics());
var c=isc.Offline.getCacheContents(),d=[],e;for(e in c)d.add({key:e,value:c[e]});this.storageLG.setData(d)}},b={isInitialized:false,poolSize:10,keyIndexKey:"keyIndex",reverseKeyIndexKey:"reverseKeyIndex",init:function(){this.userDataSpan=[];for(var c=0;c<this.poolSize;c++){this.userDataSpan[c]=document.createElement("span");this.userDataSpan[c].ID="isc_userData_"+c;this.userDataSpan[c].style.behavior="url(#default#userdata)";document.body.appendChild(this.userDataSpan[c]);this.userDataSpan[c].load("isc_userData_"+
c)}this.keyIndexStore=document.createElement("span");this.keyIndexStore.ID="isc_userData_keyIndex";this.keyIndexStore.style.behavior="url(#default#userdata)";document.body.appendChild(this.keyIndexStore);this.keyIndexStore.load("isc_userData_keyIndex");this.keyIndex=this.getKeyIndexFromStore();this.reverseKeyIndex=this.getReverseKeyIndexFromStore();if(this.keyIndex)this.reverseKeyIndex||this.buildReverseKeyIndex();else{this.keyIndex={};this.reverseKeyIndex={}}this.buildNextAttributeInfo();this.isInitialized=
true},clearCacheNatively:function(){for(var c=0;c<this.poolSize;c++)for(var d=this.userDataSpan[c].xmlDocument.firstChild.attributes;d.length>0;)this.userDataSpan[c].removeAttribute(d[0].name);this.keyIndex={};this.reverseKeyIndex={};this.saveKeyIndex()},getNativeStoredValuesCount:function(){for(var c=0,d=0;d<this.poolSize;d++)c+=this.userDataSpan[d].xmlDocument.firstChild.attributes.length;return c},getKeyForNativeIndex:function(c){for(var d=0;d<this.poolSize;d++)if(0+this.userDataSpan[d].xmlDocument.firstChild.attributes.length>
c){c=this.userDataSpan[d].xmlDocument.firstChild.attributes[c-0].name.substring(1);return this.getUserKey(this.getKeyIndexValue(d,c))}},getKeyIndexValue:function(c,d){var e=d.substring(1);if(c==0)return"00000".substring(e.length)+e;return c*1E4+1*e},getUserKey:function(c){return this.reverseKeyIndex[c]},getDataStoreKey:function(c){return this.keyIndex[c]},$70p:function(c,d){return this.userDataSpan[c].getAttribute(d)},getValue:function(c){var d=this.getDataStoreKey(c);if(d===void 0)return null;c=
(""+d).substring(0,1);d="v"+(""+d).substring(1)*1;return this.$70p(c,d)},putValue:function(c,d){var e=this.getDataStoreKey(c);if(e){var f=(""+e).substring(0,1);e="v"+(""+e).substring(1)*1;var g=this.$70p(f,e)}else{f=this.getDataStoreForNewItem();e=this.getNextAttributeName(f)}this.userDataSpan[f].setAttribute(e,d);try{this.userDataSpan[f].save("isc_userData_"+f);this.addToKeyIndex(c,f,e)}catch(h){if(isc.Offline.isStorageException(h))if(g)this.userDataSpan[f].setAttribute(e,g);else{this.userDataSpan[f].removeAttribute(e);
this.removeFromKeyIndex(c)}throw h;}},removeValue:function(c){var d=this.getDataStoreKey(c);if(d===void 0)a.logWarn("userData: in removeValue, no value for key '"+c+"' was found");else{var e=(""+d).substring(0,1);d="v"+(""+d).substring(1)*1;this.userDataSpan[e].removeAttribute(d);this.userDataSpan[e].save("isc_userData_"+e);this.removeFromKeyIndex(c);this.unusedAttributeNumbers[e].push(d.substring(1)*1)}},getDataStoreForNewItem:function(){if(this.nextDataStoreToUse===void 0)this.nextDataStoreToUse=
Math.floor(Math.random()*this.poolSize);var c=this.nextDataStoreToUse++;if(this.nextDataStoreToUse>=this.poolSize)this.nextDataStoreToUse=0;return c},buildNextAttributeInfo:function(){this.nextAttributeNumber=[];this.unusedAttributeNumbers=[];for(var c=0;c<this.poolSize;c++){this.unusedAttributeNumbers[c]=[];for(var d=this.userDataSpan[c].xmlDocument.firstChild.attributes,e=[],f=0;f<d.length;f++){var g=d[f].name.substring(1)*1;isNaN(g)||e.add(d[f].name.substring(1)*1)}e.sort?e.sort():this.sort(e);
for(f=d=0;f<e.length;f++){d++;if(e[f]!=d)for(;e[f]!=d&&d<=9999;)this.unusedAttributeNumbers[c].push(d++)}this.nextAttributeNumber[c]=d}},sort:function(c){for(var d=0;d<c.length;d++){for(var e=false,f=1;f<c.length-d;f++)if(c[f]<c[f-1]){e=c[f];c[f]=c[f-1];c[f-1]=e;e=true}if(!e)break}},getNextAttributeName:function(c){if(this.unusedAttributeNumbers[c]&&this.unusedAttributeNumbers[c].length>0)return"v"+this.unusedAttributeNumbers[c].shift();if(this.nextAttributeNumber[c]==null)this.nextAttributeNumber[c]=
1;return"v"+this.nextAttributeNumber[c]++},addToKeyIndex:function(c,d,e){d=this.getKeyIndexValue(d,e);this.keyIndex[c]=d;this.reverseKeyIndex[d]=c;this.saveKeyIndex()},removeFromKeyIndex:function(c){var d=this.keyIndex[c];delete this.keyIndex[c];delete this.reverseKeyIndex[d];this.saveKeyIndex()},saveKeyIndex:function(){this.keyIndexStore.setAttribute(this.keyIndexKey,a.serialize(this.keyIndex));this.keyIndexStore.setAttribute(this.reverseKeyIndexKey,a.serialize(this.reverseKeyIndex));this.keyIndexStore.save("isc_userData_keyIndex")},
buildReverseKeyIndex:function(){this.reverseKeyIndex={};for(var c in this.keyIndex)this.reverseKeyIndex[keyIndex[c]]=c},getKeyIndexFromStore:function(){var c=this.keyIndexStore.getAttribute(this.keyIndexKey);if(c)eval("var ki = "+c);else var d=null;return d},getReverseKeyIndexFromStore:function(){var c=this.keyIndexStore.getAttribute(this.reverseKeyIndexKey);if(c)eval("var ki = "+c);else var d=null;return d}};if(window.isc){isc.defineClass("Offline").addClassProperties(a);isc.defineClass("UserDataPersistence").addClassProperties(b)}else{isc.addProperties=
function(c,d){for(var e in d)c[e]=d[e]};isc.addProperties(isc.Offline,{serialize:function(c){return isc.OfflineJSONEncoder.encode(c)},logWarn:function(c){console&&console.log(c)},logError:function(c){console?console.log(c):alert(c)},echoLeaf:function(c){var d="";if(c===void 0)return"undef";try{if(typeof c=="Array")d+="Array["+c.length+"]";else if(typeof c=="Date")d+="Date("+c.toShortDate()+")";else if(typeof c=="Function")d+=isc.Func.getName(c,true)+"()";else switch(typeof c){case "string":if(c.length<=
40){d+='"'+c+'"';break}d+='"'+c.substring(0,40)+'..."['+c.length+"]";d=d.replaceAll("\n","\\n").replaceAll("\r","\\r");break;case "object":if(c==null){d+="null";break}if(c.tagName!=null){d+="["+c.tagName+"Element]";break}c=""+c;if(c!=""&&c!="[object Object]"&&c!="[object]"){d+=c;break}d+="Obj";break;default:d+=""+c}return d}catch(e){d+="[Error in echoLeaf: "+e+"]";return d}},echo:function(c){return this.serialize(c)}});isc.OfflineJSONEncoder={$zm:function(c,d,e){c.obj.add(d);c.path.add(e)},$42b:function(c){var d=
c.$42c;if(d!=null)if((d=window[d])&&d.parentProperty&&c[d.parentProperty])c=d.getCleanNodeData(c);return c},$zl:function(c,d){var e=c.obj.indexOf(d);if(e==-1)return null;return c.path[e]},$zp:function(c,d){return isc.isA.Number(d)?c+"["+d+"]":isc.Comm.$zk.test(d)?c+"."+d:c+'["'+d+'"]'},encode:function(c){this.objRefs={obj:[],path:[]};c=this.$eu(c,this.prettyPrint?"":null,null);this.objRefs=null;return c},dateFormat:"xmlSchema",encodeDate:function(c){return this.dateFormat=="dateConstructor"?"new Date("+
c.getTime()+")":'"'+this.toSchemaDate(c)+'"'},toSchemaDate:function(c){var d=""+c.getDate(),e=""+(c.getMonth()+1),f=""+(c.getyear()+1900),g=""+c.getHours(),h=""+c.getMinutes();c=""+c.getSeconds();d=d.length==1?"0"+d:d;e=e.length==1?"0"+e:e;g=g.length==1?"0"+g:ff;h=h.length==1?"0"+h:h;c=c.length==1?"0"+c:c;return f+"-"+e+"-"+d+"T"+g+":"+h+":"+c},strictQuoting:true,circularReferenceMode:"path",circularReferenceMarker:"$$BACKREF$$",prettyPrint:false,$eu:function(c,d,e){e||(e=c&&c.getID?c.getID():"");
if(c==null)return null;if(this.isAString(c))return this.asSource(c);if(this.isAFunction(c))return null;if(this.isANumber(c)||this.isASpecialNumber(c))return c;if(this.isABoolean(c))return c;if(this.isADate(c))return this.encodeDate(c);if(this.isAnInstance(c))return null;var f=this.$zl(this.objRefs,c);if(f!=null&&e.contains(f)){var g=e.substring(f.length,f.length+1);if(g=="."||g=="["||g=="]"){c=this.circularReferenceMode;return c=="marker"?"'"+this.circularReferenceMarker+"'":c=="path"?"'"+this.circularReferenceMarker+
":"+f+"'":null}}if(this.isAClassObject(c))return null;if(c==window)return null;this.$zm(this.objRefs,c,e);if(this.isAFunction(c.$eu))return c.$eu(d,this.objRefs,e);if(this.isAnArray(c))return this.$zn(c,e,this.objRefs,d);return this.$zo(c.getSerializeableFields?c.getSerializeableFields([],[]):c,e,this.objRefs,d)},$zn:function(c,d,e,f){e="[";for(var g=0,h=c.length;g<h;g++){var i=c[g];if(f!=null)e+="\r"+f;d=this.$zp(d,g);i=this.$eu(i,f!=null?f:null,d);e+=i+",";if(f!=null)e+=" "}c=e.lastIndexOf(",");
if(c>-1)e=e.substring(0,c);if(f!=null)e+="\r"+f;e+="]";return e},$zo:function(c,d,e,f){e="{";c=this.$42b(c);for(var g in c)break;for(g in c)if(g!=null)if(g!="xmlHttpRequest")if(!(g.substring(0,1)=="_"||g.substring(0,1)=="$")){var h=c[g];if(!this.isAFunction(h))if(!this.isAnInstance(h)){var i=g.toString();i='"'+i+'"';d=this.$zp(d,g);var j;if(g!="__ref")j=this.$eu(h,f!=null?f:null,d);if(f!=null)e+="\r"+f;e+=i+":"+j+",";f!=null&&e.append(" ")}}c=e.lastIndexOf(",");if(c>-1)e=e.substring(0,c);if(f!=null)e+=
"\r"+f;e+="}";return e},isAString:function(c){if(c==null)return false;if(typeof c==this.$a7)return false;if(c.constructor&&c.constructor.$k!=null)return c.constructor.$k==4;if(c.Class!=null&&c.Class==this.$73x)return true;return typeof c=="string"},isAnArray:function(c){if(c==null)return false;if(typeof c==this.$a7)return false;if(c.constructor&&c.constructor.$k!=null)return c.constructor.$k==2;if(isc.Browser.isSafari)return""+c.splice=="(Internal function)";return""+c.constructor==""+Array},isAFunction:function(c){if(c==
null)return false;if(isc.Browser.isIE&&typeof c==this.$a7)return true;var d=c.constructor;if(d&&d.$k!=null){if(d.$k!=1)return false;if(d===Function)return true}return isc.Browser.isIE?isc.emptyString+c.constructor==Function.toString():typeof c==this.$a7},isANumber:function(c){if(c==null)return false;if(c.constructor&&c.constructor.$k!=null){if(c.constructor.$k!=5)return false}else if(typeof c!="number")return false;return!isNaN(c)&&c!=Number.POSITIVE_INFINITY&&c!=Number.NEGATIVE_INFINITY},isASpecialNumber:function(c){if(c==
null)return false;if(c.constructor&&c.constructor.$k!=null){if(c.constructor.$k!=5)return false}else if(typeof c!="number")return false;return isNaN(c)||c==Number.POSITIVE_INFINITY||c==Number.NEGATIVE_INFINITY},isABoolean:function(c){if(c==null)return false;if(c.constructor&&c.constructor.$k!=null)return c.constructor.$k==6;return typeof c=="boolean"},isADate:function(c){if(c==null)return false;if(c.constructor&&c.constructor.$k!=null)return c.constructor.$k==3;return""+c.constructor==""+Date&&c.getDate&&
isc.isA.Number(c.getDate())},isAnXMLNode:function(c){if(c==null)return false;if(isc.Browser.isIE)return c.specified!=null&&c.parsed!=null&&c.nodeType!=null&&c.hasChildNodes!=null;c=c.ownerDocument;if(c==null)return false;return c.contentType==this.$bm},isAnInstance:function(c){return c!=null&&c.$76y!=null},isAClassObject:function(c){return c!=null&&c.$bp==true},asSource:function(c,d){this.isAString(c)||(c=""+c);var e=d?String.$ez:String.$e0,f=d?"'":'"';return f+c.replace(/\\/g,"\\\\").replace(e,"\\"+
f).replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+f}}}})();isc.A=isc.Canvas;isc.A.resizeThumbConstructor=isc.Canvas;isc.A.resizeThumbDefaults={width:8,height:8,overflow:"hidden",styleName:"resizeThumb",canDrag:true,canDragResize:true,getEventEdge:function(){return this.edge},autoDraw:false};isc.A=isc.Canvas;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.$40f=function(){var a=isc.Canvas.getInstanceProperty("edgeCursorMap"),
b={},c=isc.ClassFactory.getClass(this.resizeThumbConstructor),d;for(d in a)b[d]=c.create({ID:"isc_resizeThumb_"+d,edge:d},this.resizeThumbDefaults,this.resizeThumbProperties);isc.Canvas.$40g=b},isc.A.showResizeThumbs=function(a){if(a){isc.Canvas.$40g||isc.Canvas.$40f();var b=isc.Canvas.resizeThumbDefaults.width,c=isc.Canvas.$40g,d=a.getPageRect(),e=d[0],f=d[1],g=d[2];d=d[3];var h=Math.floor(e+g/2-b/2),i=Math.floor(f+d/2-b/2);c.T.moveTo(h,f-b);c.B.moveTo(h,f+d);c.L.moveTo(e-b,i);c.R.moveTo(e+g,i);
c.TL.moveTo(e-b,f-b);c.TR.moveTo(e+g,f-b);c.BL.moveTo(e-b,f+d);c.BR.moveTo(e+g,f+d);for(var j in c){b=c[j];b.dragTarget=a;b.bringToFront();b.show()}this.$rl=a}},isc.A.hideResizeThumbs=function(){var a=this.$40g,b;for(b in a)a[b].hide();this.$rl=null});isc.B._maxIndex=isc.C+3;isc.A=isc.Canvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.editMaskDefaults={draw:function(){this.Super("draw",arguments);this.observe(this.masterElement,"setZIndex",
"observer.moveAbove(observed)");isc.Canvas.showResizeThumbs(this);this.observe(this.masterElement,"setPrompt","observer.setPrompt(observed.prompt)");return this},parentVisibilityChanged:function(){this.Super("parentVisibilityChanged",arguments);isc.Canvas.$rl==this&&isc.Canvas.hideResizeThumbs()},click:function(){isc.Canvas.showResizeThumbs(this);return isc.EH.STOP_BUBBLING},bringToFront:function(){},mouseDown:function(){this.Super("mouseDown",arguments);return isc.EH.STOP_BUBBLING},mouseUp:function(){this.Super("mouseUp",
arguments);return isc.EH.STOP_BUBBLING},doubleClick:function(){this.$jr.bringToFront();return this.click()},canDrag:true,canDragReposition:true,setDragTracker:function(){return isc.EH.STOP_BUBBLING},moved:function(){this.Super("moved",arguments);var a=this.masterElement;if(a){this.getOffsetLeft();a.getLeft();this.getOffsetTop();a.getTop();this.$ns=false;a.moveTo(this.getOffsetLeft(),this.getOffsetTop());this.$ns=true}isc.Canvas.$rl==this&&isc.Canvas.showResizeThumbs(this)},resized:function(){this.Super("resized",
arguments);if(!this.$40h){this.$40h=true;var a=this.masterElement;if(a){this.$jo=false;a.resizeTo(this.getWidth(),this.getHeight());this.$jo=true;a.redrawIfDirty();this.resizeTo(a.getVisibleWidth(),a.getVisibleHeight())}isc.Canvas.showResizeThumbs(this);this.$40h=false}},showContextMenu:function(){if(this.editContext){var a=this.masterElement,b;b=this.editContext.selectedComponents.length>0?(a.editMultiMenuItems||[]).concat(this.multiSelectionMenuItems):(a.editMenuItems||[]).concat(this.standardMenuItems);
if(!this.contextMenu)this.contextMenu=this.getMenuConstructor().create({});this.contextMenu.setData(b);this.contextMenu.showContextMenu(a);return false}},standardMenuItems:[{title:"Remove",click:"target.destroy()"},{title:"Bring to Front",click:"target.bringToFront()"},{title:"Send to Back",click:"target.sendToBack()"}],multiSelectionMenuItems:[{title:"Remove Selected Items",click:"target.editContext.removeSelection(target)"}]};isc.A.useEditMask=true;isc.A.dropMargin=15;isc.B.push(isc.A.setEditMode=
function(a,b,c){if(a==null)a=true;if(this.editingOn!=a){if(this.editingOn=a)this.editContext=b;else this.hideEditMask();this.editNode=c;if(this.editingOn){this.saveToOriginalValues(["click","doubleClick","willAcceptDrop","clearNoDropIndicator","setNoDropCursor","canAcceptDrop","canDropComponents","drop","dropMove","dropOver","setDataSource"]);this.setProperties({click:this.editModeClick,doubleClick:this.editModeDoubleClick,willAcceptDrop:this.editModeWillAcceptDrop,clearNoDropIndicator:this.editModeClearNoDropIndicator,
setNoDropIndicator:this.editModeSetNoDropIndicator,canAcceptDrop:true,canDropComponents:true,drop:this.editModeDrop,dropMove:this.editModeDropMove,dropOver:this.editModeDropOver,baseSetDataSource:this.setDataSource,setDataSource:this.editModeSetDataSource})}else this.restoreFromOriginalValues(["click","doubleClick","willAcceptDrop","clearNoDropIndicator","setNoDropCursor","canAcceptDrop","canDropComponents","drop","dropMove","dropOver","setDataSource"]);this.markForRedraw()}},isc.A.showEditMask=function(){var a=
this.getID()+":<br>"+this.src;if(!this.$40i){var b={};isc.SVG&&isc.isA.SVG(this)&&isc.Browser.isIE&&isc.addProperties(b,{backgroundColor:"gray",mouseOut:function(){this.$jr.Super("$mc")},contents:isc.Canvas.spacerHTML(1E4,1E4,a)});b=isc.addProperties({},this.editMaskDefaults,this.editMaskProperties,{editContext:this.editContext||this.parentElement,keepInParentRect:this.keepInParentRect},b);this.$40i=isc.EH.makeEventMask(this,b)}this.$40i.show();if(isc.SVG&&isc.isA.SVG(this))if(isc.Browser.isIE)this.showNativeMask();
else{this.setBackgroundColor("gray");this.setContents(a)}},isc.A.hideEditMask=function(){this.$40i&&this.$40i.hide()},isc.A.editModeClick=function(){if(this.editNode){isc.EditContext.selectCanvasOrFormItem(this,true);return isc.EH.STOP_BUBBLING}},isc.A.editModeDoubleClick=function(){},isc.A.editModeWillAcceptDrop=function(a){this.logInfo("editModeWillAcceptDrop for "+this.ID,"editModeDragTarget");var b=this.ns.EH.dragTarget.getDragData(),c=true;if(b==null||isc.isAn.Array(b)&&b.length==0){c=false;
this.logInfo("dragData is null - using the dragTarget itself","editModeDragTarget");b=this.ns.EH.dragTarget;if(isc.isA.FormItemProxyCanvas(b)){this.logInfo("The dragTarget is a FormItemProxyCanvas for "+b.formItem,"editModeDragTarget");b=b.formItem}b=b._constructor||b.Class}else{if(isc.isAn.Array(b))b=b[0];b=b.className||b.type}this.logInfo("Using dragType "+b,"editModeDragTarget");if(!this.canAdd(b)){this.logInfo(this.ID+" does not accept drop of type "+b,"editModeDragTarget");if(this.parentElement&&
this.parentElement.editingOn){if(!this.parentElement.editModeWillAcceptDrop()){this.logInfo("No ancestor accepts drop","editModeDragTarget");if(a!=false){c&&isc.EditContext.hideDragHandle();isc.SelectionOutline.hideOutline();this.setNoDropIndicator()}return false}this.logInfo("An ancestor accepts drop","editModeDragTarget");return true}else{this.logInfo(this.ID+" has no parentElement in editMode","editModeDragTarget");if(a!=false){c&&isc.EditContext.hideDragHandle();isc.SelectionOutline.hideOutline();
this.setNoDropIndicator()}return false}}this.logInfo(this.ID+" is accepting the "+b+" drop","editModeDragTarget");var d=this.findEditNode(b);if(d){if(a!=false){this.logInfo(this.ID+": selecting editNode object "+d.ID);c&&isc.EditContext.hideDragHandle();isc.SelectionOutline.select(d,false);d.clearNoDropIndicator()}return true}else this.logInfo("findEditNode() returned null for "+this.ID,"editModeDragTarget");a!=false&&this.logInfo("In editModeWillAcceptDrop, '"+this.ID+"' was willing to accept a '"+
b+"' drop but we could not find an ancestor with an editNode")},isc.A.findEditNode=function(a){if(!this.editNode){this.logInfo("Skipping '"+this+"' - has no editNode","editModeDragTarget");return this.parentElement&&this.parentElement.findEditNode?this.parentElement.findEditNode(a):null}return this},isc.A.canAdd=function(a){if(this.getObjectField(a)==null){a=isc.ClassFactory.getClass(a);return isc.isA.FormItem(a)?this.getObjectField("Canvas")!=null:false}else return true},isc.A.editModeClearNoDropIndicator=
function(){this.$uh&&delete this.$uh;this.$k2()},isc.A.editModeSetNoDropIndicator=function(){this.$uh=true;this.$v8(this.noDropCursor)},isc.A.shouldPassDropThrough=function(){var a=isc.EH.dragTarget;if(a.isA("Palette")){a=a.getDragData();if(isc.isAn.Array(a))a=a[0];a=a.className||a.type}else a=a.isA("FormItemProxyCanvas")?a.formItem.Class:a.Class;this.logInfo("Dropping a "+a,"formItemDragDrop");if(isc.isA.TabBar(this)){if(a!="Tab")return true;return false}if(!this.canAdd(a)){this.logInfo("This canvas cannot accept a drop of a "+
a,"formItemDragDrop");return true}if(this.parentElement&&!this.parentElement.editModeWillAcceptDrop(false)){this.logInfo(this.ID+" is not passing drop through - no ancestor is willing to accept the drop","editModeDragTarget");return false}a=isc.EH.getX();var b=isc.EH.getY(),c=this.getPageRect();c={left:c[0],top:c[1],right:c[0]+c[2],bottom:c[1]+c[3]};if(!this.orientation||this.orientation=="vertical")if(a<c.left+this.dropMargin||a>c.right-this.dropMargin){this.logInfo("Close to right or left edge - passing drop through to parent for "+
this.ID,"editModeDragTarget");return true}if(!this.orientation||this.orientation=="horizontal")if(b<c.top+this.dropMargin||b>c.bottom-this.dropMargin){this.logInfo("Close to top or bottom edge - passing drop through to parent for "+this.ID,"editModeDragTarget");return true}this.logInfo(this.ID+" is not passing drop through","editModeDragTarget");return false},isc.A.editModeDrop=function(){if(!this.shouldPassDropThrough()){var a=isc.EH.dragTarget,b;if(a.isA("Palette")){b=a.transferDragData();if(isc.isAn.Array(b))b=
b[0];b.dropped=true}else if(a.isA("FormItemProxyCanvas"))a=a.formItem;if(a.isA("Palette")){if(b.loadData&&!b.isLoaded){var c=this;b.loadData(b,function(d){d=d||b;d.isLoaded=true;c.completeItemDrop(d);d.dropped=b.dropped});return isc.EH.STOP_BUBBLING}this.completeItemDrop(b);return isc.EH.STOP_BUBBLING}else{isc.EditContext.$70r&&isc.EditContext.$70r.hide();if(a!=this){this.editContext.data.getParent(a.editNode);this.editContext.removeComponent(a.editNode);(a=a.isA("FormItem")?a.isA("CanvasItem")?this.editContext.addNode(a.canvas.editNode,
this.editNode):this.editContext.addWithWrapper(a.editNode,this.editNode):this.editContext.addNode(a.editNode,this.editNode))&&a.liveObject&&isc.EditContext.selectCanvasOrFormItem(a.liveObject,true)}}}},isc.A.completeItemDrop=function(a){if(this.editContext){var b=isc.ClassFactory.getClass(a.className||a.type);b&&isc.isA.FormItem(b)?this.editContext.addWithWrapper(a,this.editNode):this.editContext.addComponent(a,this.editNode)}},isc.A.editModeDropMove=function(){if(!this.editModeWillAcceptDrop())return false;
if(!this.shouldPassDropThrough()){this.Super("dropMove",arguments);if(this.parentElement&&this.parentElement.hideDropLine){this.parentElement.hideDropLine();isc.isA.FormItem(this.parentElement)&&this.parentElement.form.hideDragLine()}return isc.EH.STOP_BUBBLING}},isc.A.editModeDropOver=function(){if(!this.editModeWillAcceptDrop())return false;if(!this.shouldPassDropThrough()){this.Super("dropOver",arguments);if(this.parentElement&&this.parentElement.hideDropLine){this.parentElement.hideDropLine();
isc.isA.FormItem(this.parentElement)&&this.parentElement.form.hideDragLine()}return isc.EH.STOP_BUBBLING}},isc.A.editModeSetDataSource=function(a,b,c){if(isc.$75u)this.baseSetDataSource(a,b);else if(a!=null)if(!(a==this.dataSource&&!c)){b=this.getFields();c=[];var d=[];if(b){for(var e=0;e<b.length;e++){var f=b[e];f.editNode&&f.editNode.autoGen&&!this.fieldEdited(f)?d.add(f):c.add(f)}this.setFields(c);for(e=0;e<d.length;e++)this.editContext.removeComponent(d[e].editNode,true)}d=(b=a.fields)&&isc.getKeys(b).length==
1&&a.fieldIsComplexType(b[isc.firstKey(b)].name)?a.getSchema(b[isc.firstKey(b)].type):a;e=d.getFields();b={};for(var g in e){f=e[g];if(this.shouldUseField(f,a))b[g]=e[g]}c.addList(isc.getValues(b));this.baseSetDataSource(a,c);for(g in b){f=b[g];this.editContext.addNode(this.editContext.makeEditNode(this.getFieldEditNode(f,d)),this.editNode,null,null,true)}}},isc.A.fieldEdited=function(a){return a.editNode.$71u},isc.A.getFieldEditNode=function(a,b){return{type:this.Class+"Field",autoGen:true,defaults:{name:a.name,
title:a.title||b.getAutoTitle(a.name)}}});isc.B._maxIndex=isc.C+18;isc.A=isc.Class.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getSchema=function(){return isc.DS.get(this.schemaName||this.Class)},isc.A.getSchemaField=function(a){return this.getSchema().getField(a)},isc.A.getObjectField=function(a){var b=this.$40j;if(isc.isA.Canvas(this))if(b&&b[a]!==void 0)return b[a];var c=this.getSchema();if(c){c=c.getObjectField(a);if(isc.isA.Canvas(this)){if(!b)this.$40j=
b={};b[a]=c}return c}else this.logWarn("getObjectField: no schema exists for: "+this)},isc.A.addChildObject=function(a,b,c,d){return this.$40k("add",a,b,c,d)},isc.A.removeChildObject=function(a,b,c){return this.$40k("remove",a,b,c)},isc.A.$40k=function(a,b,c,d,e){e=e||this.getObjectField(b);if(!this.getSchemaField(e).multiple){d={};d[e]=a=="remove"?null:c;this.logInfo(a+"ChildObject calling setProperties for fieldName '"+e+"'","editing");this.setProperties(d);return true}a=this.getFieldMethod(b,e,
a);if(a!=null){this.logInfo("calling "+a+"("+this.echoLeaf(c)+(d!=null?","+d+")":")"),"editing");this[a](c,d);return true}return false},isc.A.getChildObject=function(a,b,c){c=c||this.getObjectField(a);if(!this.getSchemaField(c).multiple)return this.getProperty(c);var d;d=isc.isA.ListGrid(this)&&c=="fields"?"getSpecifiedField":this.getFieldMethod(a,c,"get");if(d==null)d=this.getFieldMethod(a,c,"get");if(d&&this[d]){this.logInfo("getChildObject calling: "+d+"('"+b+"')","editing");return this[d](b)}else{this.logInfo("getChildObject calling getArrayItem('"+
b+"',this."+c+")","editing");return isc.Class.getArrayItem(b,this[c])}},isc.A.getFieldMethod=function(a,b,c){a=c+a;if(isc.isA.Function(this[a])&&isc.Func.getArgs(this[a]).length>0)return a;if(b.endsWith("s")){a=c+b.slice(0,-1).toInitialCaps();if(isc.isA.Function(this[a])&&isc.Func.getArgs(this[a]).length>0)return a}},isc.A.getEditableProperties=function(a){var b={};if(!this.editModeOriginalValues)this.editModeOriginalValues={};isc.isAn.Array(a)||(a=[a]);for(var c=0;c<a.length;c++){var d=isc.isAn.Object(a[c])?
a[c].name:a[c];if(this.editModeOriginalValues[d]===void 0){this.logInfo("Field "+d+" - value ["+this[d]+"] is coming from live values","editModeOriginalValues");b[d]=this[d]}else{this.logInfo("Field "+d+" - value ["+this.editModeOriginalValues[d]+"] is coming from original values","editModeOriginalValues");b[d]=this.editModeOriginalValues[d]}}return b},isc.A.setEditableProperties=function(a){if(!this.editModeOriginalValues)this.editModeOriginalValues={};for(var b in a)if(this.editModeOriginalValues[b]===
void 0){this.logInfo("Field "+b+" - value is going to live values","editModeOriginalValues");this.setProperty(b,a[b])}else{this.logInfo("Field "+b+" - value is going to original values","editModeOriginalValues");this.editModeOriginalValues[b]=a[b]}this.editablePropertiesUpdated()},isc.A.saveToOriginalValues=function(a){if(!this.editModeOriginalValues)this.editModeOriginalValues={};for(var b=0;b<a.length;b++){var c=isc.isAn.Object(a[b])?a[b].name:a[b];this.editModeOriginalValues[c]=this[c]===void 0?
null:this[c]&&this[c].$dw?this[isc.$ah+c]:this[c]}},isc.A.restoreFromOriginalValues=function(a){if(!this.editModeOriginalValues)this.editModeOriginalValues={};for(var b={},c=0;c<a.length;c++){var d=isc.isAn.Object(a[c])?a[c].name:a[c];if(this.editModeOriginalValues[d]!==void 0){b[d]=this.editModeOriginalValues[d];delete this.editModeOriginalValues[d]}}this.addProperties(b)},isc.A.propertyHasBeenEdited=function(a){if(!this.editModeOriginalValues)return false;if(isc.isAn.Object(a))a=a.name;if(this.editModeOriginalValues[a]!==
void 0){if(isc.isA.Function(this.editModeOriginalValues[a]))return false;if(this.editModeOriginalValues[a]!=this[a])return true}return false},isc.A.editablePropertiesUpdated=function(){this.parentElement&&this.parentElement.editablePropertiesUpdated()});isc.B._maxIndex=isc.C+14;isc.A=isc.DataSource;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getSchema=function(a){if(isc.isA.Class(a))return a.getSchema();return isc.DS.get(a.schemaName||
a._constructor||a.Class)},isc.A.getObjectField=function(a,b){if(a==null)return null;if(isc.isA.Class(a))return a.getObjectField(b);var c=isc.DS.getSchema(a);if(c)return c.getObjectField(b)},isc.A.getSchemaField=function(a,b){var c=isc.DS.getSchema(a);if(c)return c.getField(b)},isc.A.addChildObject=function(a,b,c,d,e){return this.$40k(a,"add",b,c,d,e)},isc.A.removeChildObject=function(a,b,c,d){return this.$40k(a,"remove",b,c,d)},isc.A.$40k=function(a,b,c,d,e,f){var g=f||isc.DS.getObjectField(a,c);
if(g==null){this.logWarn("No field for child of type "+c);return false}this.logInfo(b+" object "+this.echoLeaf(d)+" in field: "+g+" of parentObject: "+this.echoLeaf(a),"editing");var h=isc.DS.getSchemaField(a,g);if(isc.isA.Class(a))if(a.$40k(b,c,d,e,f))return true;if(!h.multiple){if(b=="add")a[g]=d;else if(b=="remove")a[g]!=null&&delete a[g];else{this.logWarn("unrecognized verb: "+b);return false}return true}this.logInfo("using direct Array manipulation for field '"+g+"'","editing");c=a[g];if(b==
"add"){if(c!=null&&!isc.isAn.Array(c)){this.logWarn("unexpected field value: "+this.echoLeaf(c)+" in field '"+g+"' when trying to add child: "+this.echoLeaf(d));return false}if(c==null)a[g]=c=[];e!=null?c.addAt(d,e):c.add(d)}else if(b=="remove"){if(!isc.isAn.Array(c))return false;e!=null?c.removeAt(d,e):c.remove(d)}else{this.logWarn("unrecognized verb: "+b);return false}return true},isc.A.getChildObject=function(a,b,c,d){if(isc.isA.Class(a))return a.getChildObject(b,c,d);d=isc.DS.getObjectField(a,
b);b=isc.DS.getSchemaField(a,d);a=a[d];if(!b.multiple)return a;if(!isc.isAn.Array(a))return null;return isc.Class.getArrayItem(c,a)},isc.A.getAutoIdField=function(a){return(a=this.getNearestSchema(a))?a.getAutoIdField():"ID"},isc.A.getAutoId=function(a){var b=this.getAutoIdField(a);return b?a[b]:null});isc.B._maxIndex=isc.C+9;isc.A=isc.DataSource.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getAutoIdField=function(){return this.getInheritedProperty("autoIdField")||
"ID"},isc.A.shouldCreateStandalone=function(){if(this.createStandalone!=null)return this.createStandalone;if(!this.superDS())return true;return this.superDS().shouldCreateStandalone()});isc.B._maxIndex=isc.C+2;var sharedEditModeFunctions={editModeClick:function(){isc.VisualBuilder&&isc.VisualBuilder.titleEditEvent=="click"&&this.editClick();return this.Super("editModeClick",arguments)},editModeDoubleClick:function(){isc.VisualBuilder&&isc.VisualBuilder.titleEditEvent=="doubleClick"&&this.editClick();
return this.Super("editModeDoubleClick",arguments)}};isc.Button.addProperties(sharedEditModeFunctions);isc.ImgButton.addMethods(sharedEditModeFunctions);isc.StretchImgButton.addMethods(sharedEditModeFunctions);isc.SectionHeader.addMethods(sharedEditModeFunctions);isc.ImgSectionHeader.addMethods(sharedEditModeFunctions);isc.A=isc.ImgSectionHeader.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.setEditMode=function(a,b,c){if(a==
null)a=true;if(a!=this.editingOn){this.invokeSuper(isc.TabSet,"setEditMode",a,b,c);if(this.editingOn){var d=this;isc.Timer.setTimeout(function(){d.saveToOriginalValues(["background"]);d.background.setProperties({iconClick:d.editModeIconClick})},0)}else this.restoreFromOriginalValues(["background"])}},isc.A.editModeIconClick=function(){var a=this.creator;if(a){var b=a.layout;b.sectionIsExpanded(a)?b.collapseSection(a):b.expandSection(a);var c=a.editContext;c&&c.setNodeProperties(a.editNode,{expanded:b.sectionIsExpanded(a)})}return this.Super("editModeClick",
arguments)},isc.A.editClick=function(){var a=this.getPageLeft()+this.getLeftBorderSize()+this.getLeftMargin()+1-this.getScrollLeft(),b=this.getVisibleWidth()-this.getLeftBorderSize()-this.getLeftMargin()-this.getRightBorderSize()-this.getRightMargin()-1;isc.Timer.setTimeout({target:isc.EditContext,methodName:"manageTitleEditor",args:[this,a,b]},100)});isc.B._maxIndex=isc.C+3;isc.A=isc.StatefulCanvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;
isc.B.push(isc.A.editClick=function(){var a,b;if(isc.isA.Button(this)){a=this.getPageLeft()+this.getLeftBorderSize()+this.getLeftMargin()+1-this.getScrollLeft();b=this.getVisibleWidth()-this.getLeftBorderSize()-this.getLeftMargin()-this.getRightBorderSize()-this.getRightMargin()-1}else if(isc.isA.StretchImgButton(this)){a=this.getPageLeft()+this.capSize;b=this.getVisibleWidth()-this.capSize*2}else{isc.logWarn("Ended up in editClick with a StatefulCanvas of type '"+this.getClass()+"'.  This is neither a Button nor a StretchImgButton - editor will work, but will hide the entire component it is editing");
a=this.getPageLeft();b=this.getVisibleWidth()}isc.Timer.setTimeout({target:isc.EditContext,methodName:"manageTitleEditor",args:[this,a,b]},0)},isc.A.repositionTitleEditor=function(){var a=this.getPageLeft()+this.capSize,b=this.getVisibleWidth()-this.capSize*2;isc.EditContext.positionTitleEditor(this,a,b)});isc.B._maxIndex=isc.C+2;if(isc.TabSet){isc.A=isc.TabSet;isc.A.addTabEditorHint="Enter tab titles (comma separated)";isc.A=isc.TabSet.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=
isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.defaultPaneDefaults={_constructor:"VLayout"};isc.B.push(isc.A.setEditMode=function(a,b,c){if(a==null)a=true;if(a!=this.editingOn){this.invokeSuper(isc.TabSet,"setEditMode",a,b,c);if(this.editingOn){for(c=0;c<this.tabs.length;c++){var d=this.tabs[c];this.saveOriginalValues(d);this.setCanCloseTab(d,true)}this.closeClick=function(f){this.editContext.removeComponent(f.editNode);var g=this;isc.Timer.setTimeout(function(){g.manageAddIcon()},200)}}else for(c=
0;c<this.tabs.length;c++){d=this.tabs[c];this.restoreOriginalValues(d);var e=this.getTab(d);this.setCanCloseTab(d,e.editNode.initData.canClose)}this.tabBar.setEditMode(a,b,null);this.paneContainer.setEditMode(a,b,null);this.manageAddIcon()}},isc.A.saveOriginalValues=function(a){(a=this.getTab(a))&&a.saveToOriginalValues(["closeClick","canClose","icon","iconSize","iconOrientation","iconAlign","disabled"])},isc.A.restoreOriginalValues=function(a){(a=this.getTab(a))&&a.restoreFromOriginalValues(["closeClick",
"canClose","icon","iconSize","iconOrientation","iconAlign","disabled"])},isc.A.showAddTabEditor=function(){var a=this.tabBarPosition,b=this.tabBarAlign,c,d;if(a==isc.Canvas.TOP||a==isc.Canvas.BOTTOM){a=this.tabBar.getPageTop();c=this.tabBar.getHeight();if(b==isc.Canvas.LEFT){b=this.addIcon.getPageLeft();d=this.tabBar.getVisibleWidth()-this.addIcon.left;if(d<150)d=150}else{d=this.tabBar.getVisibleWidth();d-=d-(this.addIcon.left+this.addIcon.width);if(d<150)d=150;b=this.addIcon.getPageLeft()+this.addIcon.width-
d}}else{b=this.tabBar.getPageLeft();d=150;a=this.addIcon.getPageTop();c=20}this.manageAddTabEditor(b,d,a,c)},isc.A.manageAddIcon=function(){if(this.editingOn){if(this.addIcon==null){this.addIcon=isc.Img.create({autoDraw:false,width:16,height:16,cursor:"hand",tabSet:this,src:"[SKIN]/actions/add.png",click:function(){this.tabSet.showAddTabEditor()}});this.tabBar.addChild(this.addIcon)}var a=this.tabs.length==0?null:this.getTab(this.tabs[this.tabs.length-1]),b=this.tabBarPosition,c=this.tabBarAlign;
if(a==null)if(b==isc.Canvas.TOP||b==isc.Canvas.BOTTOM){b=c==isc.Canvas.LEFT?this.tabBar.left+10:this.tabBar.left+this.tabBar.width-10-16;a=this.tabBar.top+this.tabBar.height/2-8}else if(c==isc.Canvas.TOP){b=this.tabBar.left+this.tabBar.width/2-8;a=this.tabBar.top+10}else{b=this.tabBar.left+this.tabBar.width/2-8;a=this.tabBar.top+this.tabBar.height-10-16}else if(b==isc.Canvas.TOP||b==isc.Canvas.BOTTOM){b=c==isc.Canvas.LEFT?a.left+a.width+10:a.left-10-16;a=a.top+a.height/2-8}else if(c==isc.Canvas.TOP){b=
a.left+this.width/2-8;a=a.top+a.height+10}else{b=a.left+this.width/2-8;a=a.top+a.height/2-8}this.addIcon.setTop(a);this.addIcon.setLeft(b);this.addIcon.show()}else this.addIcon&&this.addIcon.hide&&this.addIcon.hide()},isc.A.manageAddTabEditor=function(a,b,c,d){if(!isc.isA.DynamicForm(isc.TabSet.addTabEditor))isc.TabSet.addTabEditor=isc.DynamicForm.create({autoDraw:false,margin:0,padding:0,cellPadding:0,fields:[{name:"addTabString",type:"text",hint:isc.TabSet.addTabEditorHint,showHintInField:true,
showTitle:false,keyPress:function(g,h,i){if(i=="Escape"){h.discardUpdate=true;h.hide()}else i=="Enter"&&g.blurItem()},blur:function(g,h){g.discardUpdate||g.targetComponent.editModeAddTabs(h.getValue());g.hide()}}]});var e=isc.TabSet.addTabEditor;e.addProperties({targetComponent:this});e.discardUpdate=false;var f=e.getItem("addTabString");f.setHeight(d);f.setWidth(b);f.setValue(f.hint);e.setTop(c);e.setLeft(a);e.show();f.focusInItem();f.delayCall("selectValue",[],100)},isc.A.editModeAddTabs=function(a){if(!(!a||
a==isc.TabSet.addTabEditorHint)){a=a.split(",");for(var b=0;b<a.length;b++){var c=isc.addProperties({},this.defaultPaneDefaults);if(!c.type&&!c.className)c.type=c._constructor;var d=this.editContext.addComponent(this.editContext.makeEditNode({type:"Tab",initData:{title:a[b]}}),this.editNode);d&&this.editContext.addComponent(this.editContext.makeEditNode(c),d)}}},isc.A.addTabsEditModeExtras=function(a){this.delayCall("manageAddIcon");if(this.editingOn)for(var b=0;b<a.length;b++){this.saveOriginalValues(a[b]);
this.setCanCloseTab(a[b],true)}},isc.A.removeTabsEditModeExtras=function(){this.delayCall("manageAddIcon")},isc.A.editablePropertiesUpdated=function(){this.delayCall("manageAddIcon");this.invokeSuper(isc.TabSet,"editablePropertiesUpdated")},isc.A.tabScrolledIntoView=function(){if(this.editingOn)for(var a=0;a<this.tabs.length;a++){var b=this.getTab(this.tabs[a]);b.titleEditor&&b.titleEditor.isVisible()&&b.repositionTitleEditor()}},isc.A.findEditNode=function(a){this.logInfo("In TabSet.findEditNode, dragType is "+
a,"editModeDragTarget");if(a!="Tab"){var b=this.getTab(this.getSelectedTabNumber());if(b&&b.editNode)return b;for(var c=0;c<this.tabs.length;c++){b=this.getTab(c);if(b.editNode)return b}if(this.parentElement)return this.parentElement.findEditNode(a)}return this.Super("findEditNode",arguments)});isc.B._maxIndex=isc.C+12;isc.A=isc.TabBar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.findEditNode=function(a){if(a=="Tab")return this.parentElement.findEditNode(a);
else if(this.parentElement&&isc.isA.Layout(this.parentElement.parentElement))return this.parentElement.parentElement.findEditNode(a);return this.Super("findEditNode",arguments)});isc.B._maxIndex=isc.C+1}isc.A=isc.Layout.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.setEditMode=function(a,b,c){if(a==null)a=true;if(a!=this.editingOn){this.invokeSuper(isc.Layout,"setEditMode",a,b,c);a=isc.DS.getNearestSchema(this.className||
this.type);b=a.getField("members");c=true;if(!b||!b.inapplicable){b=a.getField("children");if(!b||!b.inapplicable)c=false}if(!c)if(this.editingOn){this.saveToOriginalValues(["canAcceptDrop","canDropComponents","drop","dropMove","dropOver"]);this.setProperties({canAcceptDrop:true,canDropComponents:true,drop:this.editModeDrop,dropMove:this.editModeDropMove,dropOver:this.editModeDropOver})}else this.restoreFromOriginalValues(["canAcceptDrop","canDropComponents","drop","dropMove","dropOver"])}},isc.A.editModeDrop=
function(){if(this.shouldPassDropThrough())this.hideDropLine();else{isc.EditContext.hideAncestorDragDropLines(this);var a=isc.EH.dragTarget,b,c;if(a.isA("Palette")){b=a.transferDragData();if(isc.isAn.Array(b))b=b[0];b.dropped=true;c=b.className||b.type}else{if(a.isA("FormItemProxyCanvas"))a=a.formItem;c=a._constructor||a.Class}var d=this.findEditNode(c);if(d)d=d.editNode;if(this.modifyEditNode){d=this.modifyEditNode(b,d,c);if(!d){this.hideDropLine();return isc.EH.STOP_BUBBLING}}if(a.isA("Palette")){a=
(a=isc.ClassFactory.getClass(c))&&a.isA("FormItem")?this.editContext.addWithWrapper(b,d):this.editContext.addComponent(b,d,this.getDropPosition(c));if(a!=null){c=b.liveObject;if(isc.isA.TabSet(d.liveObject)){b=isc.addProperties({},d.liveObject.defaultPaneDefaults);if(!b.type&&!b.className)b.type=b._constructor;this.editContext.addComponent(this.editContext.makeEditNode(b,a));d.liveObject.selectTab(c)}if(isc.isA.TabSet(c))c.delayCall("showAddTabEditor");else if(isc.isA.ImgTab(c)||isc.isA.Button(c)||
isc.isA.StretchImgButton(c)||isc.isA.SectionHeader(c)||isc.isA.ImgSectionHeader(c))c.delayCall("editClick")}}else{isc.EditContext.$70r&&isc.EditContext.$70r.hide();if(a==this)return;var e=this.editContext.data;b=e.getParent(a.editNode);e=e.getChildren(b).indexOf(a.editNode);c=this.getDropPosition(c);this.editContext.removeComponent(a.editNode);b==this.editNode&&c>e&&c--;c=a.isA("FormItem")?a.isA("CanvasItem")?this.editContext.addNode(a.canvas.editNode,d,c):this.editContext.addWithWrapper(a.editNode,
d):this.editContext.addNode(a.editNode,d,c);if(isc.isA.TabSet(d.liveObject))d.liveObject.selectTab(a);else c&&c.liveObject&&isc.EditContext.delayCall("selectCanvasOrFormItem",[c.liveObject,true],200)}this.hideDropLine();return isc.EH.STOP_BUBBLING}},isc.A.editModeDropMove=function(){if(!this.editModeWillAcceptDrop())return false;if(this.shouldPassDropThrough())this.hideDropLine();else{this.Super("dropMove",arguments);if(this.parentElement&&this.parentElement.hideDropLine){this.parentElement.hideDropLine();
isc.isA.FormItem(this.parentElement)&&this.parentElement.form.hideDragLine()}return isc.EH.STOP_BUBBLING}},isc.A.editModeDropOver=function(){if(!this.editModeWillAcceptDrop())return false;if(this.shouldPassDropThrough())this.hideDropLine();else{this.Super("dropOver",arguments);if(this.parentElement&&this.parentElement.hideDropLine){this.parentElement.hideDropLine();isc.isA.FormItem(this.parentElement)&&this.parentElement.form.hideDragLine()}return isc.EH.STOP_BUBBLING}});isc.B._maxIndex=isc.C+4;if(isc.DynamicForm){isc.A=
isc.DynamicForm.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.dropMargin=10;isc.B.push(isc.A.setEditMode=function(a,b,c){if(a==null)a=true;if(a!=this.editingOn){this.invokeSuper(isc.DynamicForm,"setEditMode",a,b,c);if(this.editingOn){this.saveToOriginalValues(["canAcceptDrop","canDropItems","canDropComponents","canAddColumns","drop","dropMove","dropOver","dropOut","setDataSource"]);this.setProperties({canAcceptDrop:true,canDropItems:true,
canDropComponents:true,canAddColumns:true,drop:this.editModeDrop,dropMove:this.editModeDropMove,dropOut:this.editModeDropOut,dropOver:this.editModeDropOver});this.resetValues();a=this.dropMargin;if(a*2>this.getVisibleHeight()-10){a=Math.round((this.getVisibleHeight()-10)/2);if(a<2)a=2;this.dropMargin=a}}else{this.restoreFromOriginalValues(["canAcceptDrop","canDropItems","canDropComponents","canAddColumns","drop","dropMove","dropOver","dropOut","setDataSource"]);this.resetValues()}}},isc.A.editModeDropOver=
function(){if(this.canDropItems!=true)return false;if(!this.editModeWillAcceptDrop())return false;this.$69c=null;this.hideDragLine();return isc.EH.STOP_BUBBLING},isc.A.editModeDropMove=function(){if(!this.ns.EH.getDragTarget())return false;if(this.canDropItems!=true)return false;if(!this.editModeWillAcceptDrop())return false;var a=this.ns.EH.getDragTarget().getDragData();if(isc.isAn.Array(a))a=a[0];if(a!=null&&(a.type=="DataSource"||a.className=="DataSource")){this.hideDragLine();return isc.EH.STOP_BUBBLING}if(this.getItems().length==
0){if(this.shouldPassDropThrough()){this.hideDragLine();return}isc.EditContext.hideAncestorDragDropLines(this);this.showDragLineForForm();return isc.EH.STOP_BUBBLING}a=this.ns.EH.lastEvent;var b=this.getItemAtPageOffset(a.x,a.y),c=this.getNearestItem(a.x,a.y);if(b){isc.EditContext.hideAncestorDragDropLines(this);this.showDragLineForItem(c,a.x,a.y)}else{if(this.shouldPassDropThrough()){this.hideDragLine();return}if(c){isc.EditContext.hideAncestorDragDropLines(this);this.showDragLineForItem(c,a.x,a.y)}else this.hideDragLine()}this.$69c=
c;return isc.EH.STOP_BUBBLING},isc.A.editModeDropOut=function(){this.hideDragLine();return isc.EH.STOP_BUBBLING},isc.A.editModeDrop=function(){var a=this.ns.EH.getDragTarget().getDragData();if(isc.isAn.Array(a))a=a[0];if(a&&a.className=="DataSource"||this.getItems().length==0){if(this.shouldPassDropThrough()){this.hideDragLine();return}this.itemDrop(this.ns.EH.getDragTarget(),0,0,0);return isc.EH.STOP_BUBBLING}if(this.$69c){a=this.$69c;var b=this.getItemTableOffsets(a),c=a.dropSide,d=this.getItemDropIndex(a,
c);this.$69c=null;if(this.shouldPassDropThrough())this.hideDragLine();else{if(d!=null&&d>=0){if(this.parentElement){this.parentElement.hideDragLine&&this.parentElement.hideDragLine();this.parentElement.hideDropLine&&this.parentElement.hideDropLine()}d=this.items.$8j.duplicate();this.modifyFormOnDrop(a,b.top,b.left,c,d)}this.hideDragLine();return isc.EH.STOP_BUBBLING}}else isc.logWarn("lastDragOverItem not set, cannot drop","dragDrop")},isc.A.itemDrop=function(a,b,c,d,e,f){var g=a.getDragData();if(g==
null){g=isc.EH.dragTarget;if(isc.isA.FormItemProxyCanvas(g)){this.logInfo("The dragTarget is a FormItemProxyCanvas for "+g.formItem,"editModeDragTarget");g=g.formItem}}if(a.isA("Palette")){var h=a.transferDragData();if(isc.isAn.Array(h))h=h[0];if(h.loadData&&!h.isLoaded){var i=this;h.loadData(h,function(l){l=l||h;l.isLoaded=true;i.completeItemDrop(l,b,c,d,e,f);l.dropped=h.dropped})}else this.completeItemDrop(h,b,c,d,e,f)}else{isc.EditContext.$70r&&isc.EditContext.$70r.hide();var j=this.editContext.data;
a=j.getParent(g.editNode);j=j.getChildren(a).indexOf(g.editNode);var k=g.editNode;if(isc.isA.Function(this.itemDropping)){k=this.itemDropping(k,b,true);if(!k)return}this.editContext.removeComponent(k);a==this.editNode&&b>j&&b--;(g=this.editContext.addNode(g.editNode,this.editNode,b))&&g.liveObject&&isc.EditContext.delayCall("selectCanvasOrFormItem",[g.liveObject,true],200);return g}},isc.A.completeItemDrop=function(a,b,c,d,e,f){c=a.liveObject;var g;if(!isc.isA.FormItem(c))if(isc.isA.Button(c)||isc.isAn.IButton(c))a=
this.editContext.makeEditNode({type:"ButtonItem",title:c.title,defaults:a.defaults});else if(isc.isA.Canvas(c)){g=a;a=this.editContext.makeEditNode({type:"CanvasItem"});isc.addProperties(a.initData,{showTitle:false,startRow:true,endRow:true,width:"*",colSpan:"*"})}a.dropped=true;if(isc.isA.Function(this.itemDropping)){a=this.itemDropping(a,b,true);if(!a)return}if(b=this.editContext.addComponent(a,this.editNode,b)){isc.EditContext.clearSchemaProperties(b);if(g){b=this.editContext.addComponent(g,b,
0);isc.isA.TabSet(c)&&c.delayCall("showAddTabEditor",[],1E3)}b.liveObject.dataSource&&b.liveObject.setDataSource(b.liveObject.dataSource,null,true);isc.EditContext.delayCall("selectCanvasOrFormItem",[a.liveObject,true],200);b.showTitle!=false&&a.liveObject.delayCall("editClick")}f&&this.fireCallback(f,"node",[b])},isc.A.modifyFormOnDrop=function(a,b,c,d,e){if(this.canAddColumns!=false){var f=this.ns.EH.getDragTarget().getDragData(),g,h,i=this;if(f){if(isc.isAn.Array(f))f=f[0];var j=f.type||f.className,
k=isc.ClassFactory.getClass(j);f=isc.isA.FormItem(k)?this.createItem(f,j):this.createItem({type:"CanvasItem",showTitle:false},"CanvasItem");j=false}else{f=this.ns.EH.getDragTarget();if(!isc.isA.FormItemProxyCanvas(f)){this.logWarn("In modifyFormOnDrop the drag target was not a FormItemProxyCanvas");return}f=f.formItem;for(var l=-1,m=0;m<e.length;m++)for(j=0;j<e[m].length;j++)if(e[m][j]!=l){l=e[m][j];if(this.items[l]==f){h=m;break}}j=true}g=this.getAdjustedColSpan(f);if(f.startRow&&f.$71r||f.endRow&&
f.$71n)f.editContext.setNodeProperties(f.editNode,{startRow:null,$71r:null,endRow:null,$71n:null});k=[];if(j&&h){var n=e[h];l=-1;for(m=0;m<n.length;m++)if(n[m]!=l){l=n[m];if(this.items[l]!=f)if(isc.isA.SpacerItem(this.items[l])&&this.items[l].$71m){this.logDebug("Marking spacer "+this.items[l].name+" for removal","formItemDragDrop");k.add(this.items[l])}else{this.logDebug("Found a non-spacer item on row "+h+", no spacers will be deleted","formItemDragDrop");k=null;break}}}l=0;if(d=="L"||d=="R"){var o=
true;if(f.startRow)o=false;if(f.endRow&&(d=="L"||c<e[b].length))o=false;if(j&&h==b)o=false;if(o){var s=g;a=e[b][c];if(e[b].contains(a)){var r=this.items[a];if(!isc.isA.SpacerItem(r)||!r.$71m){a+=d=="L"?-1:1;r=this.items[a]}if(e[b].contains(a))if(isc.isA.SpacerItem(r)&&r.$71m)if(r.colSpan&&r.colSpan>s){r.editContext.setNodeProperties(r.editNode,{colSpan:r.colSpan-s});s=0}else{s-=r.colSpan;r.editContext.removeComponent(r.editNode);if(d=="R")l=-1}}if(s<=0)o=false;else if(e[b].length+g<=this.numCols)o=
false;else this.editContext.setNodeProperties(this.editNode,{numCols:this.numCols+s})}for(m=0;m<e.length;m++){a=e[m][c];if(a==null)a=this.items.length;else a+=l+(d=="L"?0:1);if(m!=b){if(o){j&&h&&b<h&&m==h&&l--;if(!(k&&k.length>0&&m==h)){if(a>0){r=this.items[a-1];if(!r||r==f||r.endRow)continue}g=this.getAdjustedColSpan(r);if(d=="R"&&c+g>=e[m].length)r.endRow||r.editContext.setNodeProperties(r.editNode,{endRow:true,$71n:true});else{g=this.editContext.makeEditNode({type:"SpacerItem"});isc.addProperties(g.initData,
{colSpan:s,height:0,$71m:true});this.editContext.addComponent(g,this.editNode,a);l++}}}}else{if(d=="L")(r=this.items[a])&&r.startRow&&r.$71r&&r.editContext.setNodeProperties(r.editNode,{startRow:null,$71r:null});else(r=this.items[a-1])&&r.endRow&&r.$71n&&r.editContext.setNodeProperties(r.editNode,{endRow:null,$71n:null});this.itemDrop(this.ns.EH.getDragTarget(),a,m,c,d,function(t){i.$72s=t});if(h==null||b<h)l++}}}else{b=isc.isA.SpacerItem(a)&&a.$71m?b:b+(d=="B"?1:0);if(e[b])o=e[b][c];r=b>=e.length?
this.items.length:e[b][0];h=o==null?null:this.items[o];if(h==null||isc.isA.SpacerItem(h)&&h.$71m)if(b>e.length-1||b<0){if(c!=0&&!f.startRow){g=this.editContext.makeEditNode({type:"SpacerItem"});isc.addProperties(g.initData,{colSpan:c,height:0,$71m:true});this.editContext.addComponent(g,this.editNode,r)}this.itemDrop(this.ns.EH.getDragTarget(),r+(c!=0?1:0),b,c,d,function(t){i.$72s=t})}else if(h==null){h=e[b].length-1;if(h<0){isc.logWarn("Found completely empty row in DynamicForm at position ("+b+","+
c+")");return}e=e[b][h];r=this.items[e];if(r==null){isc.logWarn("Null item in DynamicForm at position ("+b+","+(c-1)+")");return}r.endRow&&r!=f&&r.editContext.setNodeProperties(r.editNode,{endRow:false});h=c-h-1;if(j&&r==f)h+=g;if(h>0){g=this.editContext.makeEditNode({type:"SpacerItem"});isc.addProperties(g.initData,{colSpan:h,height:0,$71m:true});this.editContext.addComponent(g,this.editNode,e+1)}this.itemDrop(this.ns.EH.getDragTarget(),e+(h>0?2:1),b,c,d,function(t){i.$72s=t})}else{e=h.colSpan?h.colSpan:
1;if(e>g){h.editContext.setNodeProperties(h.editNode,{colSpan:e-g});this.itemDrop(this.ns.EH.getDragTarget(),o,b,c,d,function(t){i.$72s=t})}else{this.itemDrop(this.ns.EH.getDragTarget(),o,b,c,d,function(t){i.$72s=t});h.editContext.removeComponent(h.editNode)}}else{if(c!=0){g=this.editContext.makeEditNode({type:"SpacerItem"});isc.addProperties(g.initData,{colSpan:c,height:0,$71m:true});this.editContext.addComponent(g,this.editNode,r)}this.itemDrop(this.ns.EH.getDragTarget(),r+(c==0?0:1),b,c,d,function(t){t&&
t.liveObject&&t.liveObject.editContext&&t.liveObject.editContext.setNodeProperties(t,{endRow:true,$71n:true});i.$72s=t})}}if(j&&k)for(m=0;m<k.length;m++){this.logDebug("Removing spacer item "+k[m].name,"formItemDragDrop");k[m].editContext.removeComponent(k[m].editNode)}j||f.destroy();this.$72s&&this.$72s.liveObject&&isc.EditContext.delayCall("selectCanvasOrFormItem(",[this.$72s.liveObject],200)}},isc.A.getAdjustedColSpan=function(a){if(!a)return 0;var b=a.colSpan!=null?a.colSpan:1;if(b=="*")b=1;if(a.showTitle!=
false&&(a.titleOrientation=="left"||a.titleOrientation=="right"||a.titleOrientation==null))b++;return b},isc.A.canAdd=function(a){if(this.getObjectField(a)!=null)return true;if((a=isc.ClassFactory.getClass(a))&&a.isA("Canvas"))return true;return false},isc.A.setEditorType=function(a,b){if(a.editContext){var c=a.editContext.data,d=c.getParent(a.editNode);c=c.getChildren(d).indexOf(a.editNode);var e=a.editContext,f=e.makeEditNode({className:b,defaults:a.editNode.defaults});e.removeComponent(a.editNode);
e.addComponent(f,d,c)}},isc.A.itemDropping=function(a,b){var c=isc.EditContext.getSchemaInfo(a);if(!c.dataSource)return a;if(!this.dataSource){this.setDataSource(c.dataSource);this.serviceNamespace=c.serviceNamespace;this.serviceName=c.serviceName;return a}if(c.dataSource==isc.DataSource.getDataSource(this.dataSource).ID&&c.serviceNamespace==this.serviceNamespace&&c.serviceName==this.serviceName)return a;var d=this.editContext.makeEditNode({className:"CanvasItem",defaults:{cellStyle:"nestedFormContainer"}});
isc.addProperties(d.initData,{showTitle:false,colSpan:2});d.dropped=true;this.editContext.addComponent(d,this.editNode,b);c=this.editContext.makeEditNode({className:"DynamicForm",defaults:{numCols:2,canDropItems:false,dataSource:c.dataSource,serviceNamespace:c.serviceNamespace,serviceName:c.serviceName,doNotUseDefaultBinding:true}});c.dropped=true;this.editContext.addComponent(c,d,0);d=this.editContext.addComponent(a,c,0);isc.EditContext.clearSchemaProperties(d)},isc.A.getFieldEditNode=function(a,
b){var c=this.getEditorType(a);c=c.substring(0,1).toUpperCase()+c.substring(1)+"Item";return{type:c,autoGen:true,defaults:{name:a.name,title:a.title||b.getAutoTitle(a.name)}}});isc.B._maxIndex=isc.C+13;isc.A=isc.FormItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.setEditMode=function(a,b,c){if(a==null)a=true;if(this.editingOn!=a){if(this.editingOn=a)this.editContext=b;this.editNode=c;if(this.editingOn){this.saveToOriginalValues(["click",
"doubleClick","changed"]);this.setProperties({click:this.editModeClick,doubleClick:this.editModeDoubleClick,changed:this.editModeChanged})}else this.restoreFromOriginalValues(["click","doubleClick","changed"])}},isc.A.editModeChanged=function(a,b,c){this.editContext.setNodeProperties(this.editNode,{defaultValue:c})},isc.A.setEditorType=function(a){this.form&&this.form.setEditorType(this,a)});isc.B._maxIndex=isc.C+3;isc.A=isc.ButtonItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=
isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.editClick=function(){var a=this.canvas.getPageLeft(),b=this.canvas.getVisibleWidth(),c=this.canvas.getPageTop(),d=this.canvas.getHeight();isc.EditContext.manageTitleEditor(this,a,b,c,d)});isc.B._maxIndex=isc.C+1}isc.A=isc.SectionStack.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.canAdd=function(a){if(a=="SectionStackSection")return true;if((a=isc.ClassFactory.getClass(a))&&
a.isA("Canvas"))return true;if(a&&a.isA("FormItem"))return true;return false},isc.A.modifyEditNode=function(a,b,c){if(c=="SectionStackSection")return b;a=this.getDropPosition();if(a==0){isc.warn("Cannot drop before the first section header");return false}c=this.$700();for(var d=c.length-1;d>=0;d--)if(a>c[d])return this.getSectionHeader(d).editNode;return b},isc.A.getEditModeDropPosition=function(a){var b=this.invokeSuper(isc.SectionStack,"getDropPosition");if(!a||a=="SectionStackSection")return b;
a=this.$700();for(var c=a.length-1;c>=0;c--)if(b>a[c])return b-a[c]-1;return 0},isc.A.$700=function(){for(var a=[],b=0,c=0;c<this.getMembers().length;c++)if(this.getMember(c).isA(this.sectionHeaderClass))a[b++]=c;return a});isc.B._maxIndex=isc.C+4;if(isc.ListGrid!=null){isc.A=isc.ListGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.setEditMode=function(a,b,c){if(a==null)a=true;if(a!=this.editingOn){this.invokeSuper(isc.ListGrid,
"setEditMode",a,b,c);if(this.editingOn){this.saveToOriginalValues(["setNoDropIndicator","clearNoDropIndicator","headerClick"]);this.setProperties({setNoDropIndicator:this.editModeSetNoDropIndicator,clearNoDropIndicator:this.editModeClearNoDropIndicator,headerClick:this.editModeHeaderClick})}else this.restoreFromOriginalValues(["setNoDropIndicator","clearNoDropIndicator","headerClick"])}},isc.A.editModeClearNoDropIndicator=function(){this.Super("clearNoDropIndicator",arguments);this.body.editModeClearNoDropIndicator()},
isc.A.editModeSetNoDropIndicator=function(){this.Super("setNoDropIndicator",arguments);this.body.editModeSetNoDropIndicator()},isc.A.editModeHeaderClick=function(a){var b=this.editContext.data;b=b.getChildren(b.findById(this.ID))[a];b.liveObject.$73a=this.header.getButton(a);isc.EditContext.selectCanvasOrFormItem(b.liveObject);this.$73b=true;return isc.EH.STOP_BUBBLING},isc.A.editModeClick=function(){if(this.editNode){if(this.$73b)delete this.$73b;else isc.EditContext.selectCanvasOrFormItem(this,
true);return isc.EH.STOP_BUBBLING}});isc.B._maxIndex=isc.C+5}if(isc.TreeGrid!=null){isc.A=isc.TreeGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.setEditMode=function(a,b,c){if(a==null)a=true;if(a!=this.editingOn){this.invokeSuper(isc.TreeGrid,"setEditMode",a,b,c);if(this.editingOn){this.editModeCreateDefaultTreeFieldEditNode();this.saveToOriginalValues(["addField"]);this.setProperties({addField:this.editModeAddField})}else this.restoreFromOriginalValues(["addField"])}},
isc.A.editModeCreateDefaultTreeFieldEditNode=function(){if(!isc.$75u)if(!this.dataSource)for(var a=this.fields,b=0;b<a.length;b++)if(a[b].name=="nodeTitle"){this.editContext.addNode(this.editContext.makeEditNode({type:"TreeGridField",autoGen:true,defaults:{name:a[b].name,title:a[b].title}}),this.editNode,null,null,true);break}},isc.A.editModeAddField=function(a){this.Super("addField",arguments);if(isc.$75u)if(a.treeField)for(var b=this.getFields(),c=0;c<b.length;c++)if(b[c].name!=a.name&&b[c].treeField){this.removeField(b[c]);
break}},isc.A.editModeSetDataSource=function(a,b,c){if(isc.$75u)this.baseSetDataSource(a,b);else if(a!=null)if(!(a==this.dataSource&&!c)){if(b=this.getFields())for(c=0;c<b.length;c++){var d=b[c];if(d.treeField){d.treeField=null;var e=d.editNode;break}}c=this.getFields();c.remove(d);d=(b=a.fields)&&isc.getKeys(b).length==1&&a.fieldIsComplexType(b[isc.firstKey(b)].name)?a.getSchema(b[isc.firstKey(b)].type):a;b=d.getFields();var f=a.titleField;isc.isAn.Array(b)||(b=isc.getValues(b));for(var g=0;g<b.length;g++)if(this.shouldUseField(b[g],
a))if(f==null||f==b[g].name){var h=b[g];break}h&&c.addAt(h,0);this.baseSetDataSource(a,c);a=this.getFieldEditNode(h,d);a.defaults.treeField=true;this.editContext.addNode(this.editContext.makeEditNode(a),this.editNode,0,null);e&&this.editContext.removeNode(e,true)}});isc.B._maxIndex=isc.C+4}var basicSetEditMode=function(a,b,c){if(a==null)a=true;if(this.editingOn!=a){if(this.editingOn=a)this.editContext=b;this.editNode=c}};isc.A=isc.ServiceOperation.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;
isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.setEditMode=basicSetEditMode;isc.B.push(isc.A.getActionTargetTitle=function(){return"Operation: ["+this.operationName+"]"});isc.B._maxIndex=isc.C+1;if(isc.ValuesManager!=null){isc.A=isc.ValuesManager.getPrototype();isc.A.setEditMode=basicSetEditMode}isc.ClassFactory.defineInterface("EditContext");isc.A=isc.EditContext;isc.A.$72t=18;isc.A.$72u=18;isc.A.$70s=-18;isc.A.$70t=0;isc.A=isc.EditContext;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;
isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.manageTitleEditor=function(a,b,c,d,e){if(!isc.isA.DynamicForm(this.titleEditor))this.titleEditor=isc.DynamicForm.create({autoDraw:false,margin:0,padding:0,cellPadding:0,fields:[{name:"title",type:"text",showTitle:false,keyPress:function(i,j,k){if(k=="Escape"){j.discardUpdate=true;j.hide()}else k=="Enter"&&i.blurItem()},blur:function(i,j){if(!i.discardUpdate){var k=i.targetComponent,l=k.editContext;if(l){l.setNodeProperties(k.editNode,{title:j.getValue()});
l.nodeClick(l,k.editNode)}}i.hide()}}]});var f=this.titleEditor;f.setProperties({targetComponent:a});f.discardUpdate=false;var g=f.getItem("title"),h=a.title;if(!h)h=a.name;g.setValue(h);this.positionTitleEditor(a,b,c,d,e);f.show();g.focusInItem();g.delayCall("selectValue",[],100)},isc.A.positionTitleEditor=function(a,b,c,d,e){if(d==null)d=a.getPageTop();if(e==null)e=a.height;if(b==null)b=a.getPageLeft();if(c==null)c=a.getVisibleWidth();a=this.titleEditor;var f=a.getItem("title");f.setHeight(e);f.setWidth(c);
a.setTop(d);a.setLeft(b)},isc.A.deselect=function(){isc.SelectionOutline.deselect();this.hideDragHandle()},isc.A.selectCanvasOrFormItem=function(a,b){if(!(!isc.isA.Canvas(a)&&!isc.isA.FormItem(a)&&!a.$73a))if(!isc.isA.Menu(a)){this.$70r&&this.$70r.hide();var c=isc.SelectionOutline.getSelectedObject();if(c&&this.observer){this.observer.ignore(c,"dragMove");c.restoreFromOriginalValues(["canDrag","canDrop","dragAppearance","dragStart","dragMove","dragStop","setDragTracker"])}var d,e;if(a.$73a){e="["+
(a.type||a._constructor)+" "+(a.name?"name:":"ID");e+=a.name||a.ID;e+="]";d=a;a=a.$73a}a.saveToOriginalValues(["canDrag","canDrop","dragAppearance","dragStart","dragMove","dragStop","setDragTracker"]);a.setProperties({canDrop:true,dragAppearance:"outline",dragStart:function(){return true},dragMove:function(){return true},setDragTracker:function(){isc.EH.setDragTracker("");return false},dragStop:function(){isc.EditContext.hideProxyCanvas();isc.EditContext.positionDragHandle()}});if(c=d?d.editContext:
a.editContext){c=c.creator;isc.SelectionOutline.select(a,false,!(b&&c.hideLabelWhenSelecting),e);if(d)a=d;if(a.editingOn){this.showSelectedObjectDragHandle();d=a.editContext;if(d.selectRecord){d.deselectAllRecords();if(isc.isA.Canvas(a))isc.isA.SectionHeader(a)||isc.isA.ImgSectionHeader(a)?d.selectRecord(d.data.findById(a.$42i)):d.selectRecord(d.data.findById(a.ID));else d.selectRecord(d.data.find({ID:a.name}))}d.creator.editComponent(a.editNode,a)}}}},isc.A.showSelectedObjectDragHandle=function(){if(!this.$70r){var a=
this;this.$70r=isc.Img.create({src:"[SKIN]/../../ToolSkin/images/controls/dragHandle.gif",prompt:"Grab here to drag component",width:this.$72u,height:this.$72t,cursor:"move",backgroundColor:"white",opacity:80,canDrag:true,canDrop:true,isMouseTransparent:true,mouseDown:function(){this.dragIconOffsetX=isc.EH.getX()-isc.EditContext.draggingObject.getPageLeft();this.dragIconOffsetY=isc.EH.getY()-isc.EditContext.draggingObject.getPageTop();a.$53r=true;this.Super("mouseDown",arguments)},mouseUp:function(){a.$53r=
false}})}if(this.draggingObject){this.observer.ignore(this.draggingObject,"dragMove");this.observer.ignore(this.draggingObject,"dragStop");this.observer.ignore(this.draggingObject,"hide");this.observer.ignore(this.draggingObject,"destroy")}var b=isc.SelectionOutline.getSelectedObject();if(isc.isA.FormItem(b)){if(!this.$70y)this.$70y=isc.FormItemProxyCanvas.create();this.$70y.delayCall("setFormItem",[b]);b=this.$70y}this.$70r.setProperties({dragTarget:b});isc.Timer.setTimeout("isc.EditContext.positionDragHandle()",
0);if(!this.observer)this.observer=isc.Class.create();this.draggingObject=b;this.observer.observe(this.draggingObject,"dragMove","isc.EditContext.positionDragHandle(true)");this.observer.observe(this.draggingObject,"dragStop","isc.EditContext.$53r = false");this.observer.observe(this.draggingObject,"hide","isc.EditContext.$70r.hide()");this.observer.observe(this.draggingObject,"destroy","isc.EditContext.$70r.hide()");this.$70r.show()},isc.A.hideProxyCanvas=function(){this.$70y&&this.$70y.hide()},
isc.A.positionDragHandle=function(a){if(this.$70r){var b=this.draggingObject;if(b.destroyed||b.destroying)this.logWarn("target of dragHandle: "+isc.Log.echo(b)+" is invalid: "+b.destroyed?"already destroyed":"currently in destroy()");else{var c=b.getVisibleHeight();this.$70t=c<this.$72t*2?Math.round((c-this.$70r.height)/2)-1:-1;b.isA("FormItemProxyCanvas")&&!this.$53r&&b.syncWithFormItemPosition();if(b){c=b.getPageLeft()+this.$70s;if(a)c+=b.getOffsetX()-this.$70r.dragIconOffsetX;this.$70r.setPageLeft(c);
c=b.getPageTop()+this.$70t;if(a)c+=b.getOffsetY()-this.$70r.dragIconOffsetY;this.$70r.setPageTop(c);this.$70r.bringToFront()}}}},isc.A.hideDragHandle=function(){this.$70r&&this.$70r.hide()},isc.A.showDragHandle=function(){this.$70r&&this.$70r.show()},isc.A.hideAncestorDragDropLines=function(a){for(;a&&a.parentElement;){a.parentElement.hideDragLine&&a.parentElement.hideDragLine();a.parentElement.hideDropLine&&a.parentElement.hideDropLine();a=a.parentElement;if(isc.isA.FormItem(a))a=a.form}},isc.A.getSchemaInfo=
function(a){var b={};a=a.liveObject;if(!a)return b;if(isc.isA.FormItem(a))if(a.form&&a.form.dataSource){a=a.form;b.dataSource=isc.DataSource.getDataSource(a.dataSource).ID;b.serviceName=a.serviceName;b.serviceNamespace=a.serviceNamespace}else{b.dataSource=a.schemaDataSource;b.serviceName=a.serviceName;b.serviceNamespace=a.serviceNamespace}else{b.dataSource=isc.isA.Canvas(a)?isc.DataSource.getDataSource(a.dataSource).ID:a.schemaDataSource;b.serviceName=a.serviceName;b.serviceNamespace=a.serviceNamespace}return b},
isc.A.clearSchemaProperties=function(a){if(a&&a.initData&&isc.isA.FormItem(a.liveObject)){delete a.initData.schemaDataSource;delete a.initData.serviceName;delete a.initData.serviceNamespace;var b=a.liveObject.form;if(b&&b.inputSchemaDataSource&&isc.DataSource.get(b.inputSchemaDataSource).ID==a.initData.inputSchemaDataSource&&b.inputServiceName==a.initData.inputServiceName&&b.inputServiceNamespace==a.initData.inputServiceNamespace){delete a.initData.inputSchemaDataSource;delete a.initData.inputServiceName;
delete a.initData.inputServiceNamespace}}});isc.B._maxIndex=isc.C+12;isc.EditContext.addInterfaceMethods({addFromPaletteNode:function(a,b){return this.addNode(isc.HiddenPalette.create().makeEditNode(a),b)},makeEditNode:function(a){return isc.HiddenPalette.create().makeEditNode(a)},requestLiveObject:function(a,b,c){var d=this;if(a.loadData&&!a.isLoaded)a.loadData(a,function(e){e=e||a;e.isLoaded=true;e.dropped=a.dropped;d.fireCallback(b,"node",[e])},c);else if(a.wizardConstructor){this.logInfo("creating wizard with constructor: "+
a.wizardConstructor);isc.ClassFactory.newInstance(a.wizardConstructor,a.wizardDefaults).getResults(a,function(e){e.liveObject||(e=c.makeEditNode(e));d.fireCallback(b,"node",[e])},c)}else this.fireCallback(b,"node",[a])},getEditComponents:function(){return this.editComponents},getEditDataSource:function(a){return isc.DataSource.getDataSource(a.editDataSource||a.Class||this.editDataSource)},$40l:function(a){var b=[];b.addList(a.baseEditFields);b.addList(a.editFields);for(var c=0;c<b.length;c++){var d=
b[c];if(d.visible==null)d.visible=true}if(b.length==0){b=this.getEditDataSource(a).getFields();b=isc.getValues(b)}return b},getEditFieldsList:function(a){var b=[];a=this.$40l(a);for(var c=0;c<a.length;c++){var d=a[c];isc.isAn.Object(d)?b.add(d.name):b.add(d)}return b},getEditFields:function(a){a=this.$40l(a);for(var b=0;b<a.length;b++){var c=a[b];if(isc.isA.String(c))c={name:c};if(c.visible==null)c.visible=true;a[b]=c}return a},serializeEditComponents:function(){var a=this.getEditComponents(),b=[];
if(!a)return[];for(var c=0;c<a.length;c++){var d=a[c].liveObject,e=d.getUniqueProperties(),f=this.getEditFieldsList(d);e._constructor=d.Class;e=isc.applyMask(e,f);b.add(e)}return b},enableEditing:function(a){var b=a.liveObject;if(b.setEditMode)b.setEditMode(true,this,a);else{b.editContext=this;b.editNode=a;b.editingOn=true}},setNodeProperties:function(a,b){this.creator.setIsDirty(true);isc.addProperties(a.initData,b);a.$71u=true;var c=a.liveObject,d=isc.DS.get(a.type);if(b.name!=null&&(isc.isA.FormItem(c)||
d&&(d.inheritsSchema("ListGridField")||d.inheritsSchema("DetailViewerField")))){var e=this.data;d=e.getParent(a);e=e.getChildren(d).findIndex(a);this.logInfo("using remove/re-add cycle to modify liveObject: "+isc.echoLeaf(c)+" within parent node "+isc.echoLeaf(d));this.removeComponent(a);a.name=a.ID=b.name;delete b.name;this.addComponent(a,d,e);c=this.getLiveObject(a)}if(a.initData.ID!=null)a.ID=a.initData.ID;if(c.setEditableProperties){c.setEditableProperties(b);if(c.markForRedraw)c.markForRedraw();
else c.redraw&&c.redraw()}else{isc.addProperties(c,b);(d=this.data.getParent(a))&&d.liveObject&&d.liveObject.markForRedraw&&d.liveObject.markForRedraw()}this.markForRedraw()},addWithWrapper:function(a,b){var c=isc.addProperties({},this.wrapperFormDefaults),d={type:this.wrapperFormDefaults._constructor,defaults:c};if(a.liveObject.schemaDataSource){var e=a.liveObject;c.doNotUseDefaultBinding=true;c.dataSource=e.schemaDataSource;c.serviceNamespace=e.serviceNamespace;c.serviceName=e.serviceName}c=this.makeEditNode(d);
this.addComponent(c,b);return this.addComponent(a,c)},wrapperFormDefaults:{_constructor:"DynamicForm"}});isc.ClassFactory.defineInterface("Palette");isc.Palette.addInterfaceMethods({makeEditNode:function(a){return this.makeNewComponent(a)},makeNewComponent:function(a){a||(a=this.getDragData());if(isc.isAn.Array(a))a=a[0];var b=a.className||a.type;b={type:b,_constructor:b,title:a.title,icon:a.icon,iconSize:a.iconSize,showDropIcon:a.showDropIcon,useEditMask:a.useEditMask,autoGen:a.autoGen};if(isc.isAn.Object(a.editNodeProperties))for(var c in a.editNodeProperties)b[c]=
a.editNodeProperties[c];if(a.makeComponent){b.liveObject=a.makeComponent(b);return b}c=a.defaults;b.ID=a.ID||(c?isc.DS.getAutoId(c):null);c=true;if(a.loadData)b.loadData=a.loadData;else if(a.wizardConstructor){b.wizardConstructor=a.wizardConstructor;b.wizardDefaults=a.wizardDefaults}else if(a.liveObject){var d=a.liveObject;if(isc.isA.String(d))d=window[d];b.liveObject=d}else{b=this.createLiveObject(a,b);c=false}if(c)b.defaults=a.defaults;return b},generateNames:true,typeCount:{},getNextAutoId:function(a){if(a==
null)a="Object";var b;for(this.typeCount[a]=this.typeCount[a]||0;window[b=a+this.typeCount[a]++]!=null;);return b},createLiveObject:function(a,b){var c=a.className||a.type,d=isc.ClassFactory.getClass(c),e=isc.DS.getNearestSchema(c),f={},g=e?e.shouldCreateStandalone():true,h=a.initData||a.defaults||{};if(d&&d.isA("Canvas"))f.autoDraw=false;if(a.initData&&a.initData.title)f.title=a.initData.title;if(this.generateNames){var i=b.ID=b.ID||h[e.getAutoIdField()]||this.getNextAutoId(c);f[e.getAutoIdField()]=
i;if(e&&e.getField("title")&&!isc.isA.FormItem(d)&&!f.title)f.title=i}f=b.initData=b.defaults=isc.addProperties(f,this.componentDefaults,a.defaults);f._constructor=c;if(d&&g)d=isc.ClassFactory.newInstance(f);else{b.generatedType=true;d=isc.shallowClone(f)}b.liveObject=d;this.logInfo("palette created component, type: "+c+", ID: "+i+(this.logIsDebugEnabled("editing")?", initData: "+this.echo(f):"")+", liveObject: "+this.echoLeaf(d),"editing");return b}});isc.defineClass("HiddenPalette","Class","Palette");
if(isc.TreeGrid){isc.defineClass("TreePalette","TreeGrid","Palette");isc.A=isc.TreePalette.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canDragRecordsOut=true;isc.B.push(isc.A.recordDoubleClick=function(){var a=this.defaultEditContext;if(a){if(isc.isA.String(a))a=this.creator[a];if(isc.isAn.EditContext(a)){var b=this.makeEditNode(this.getDragData());if(b)if(a.getDefaultParent(b,true)==null)isc.warn("No default parent can accept a component of this type");
else{a.addNode(b);isc.EditContext.selectCanvasOrFormItem(b.liveObject,true)}}}},isc.A.transferDragData=function(){return[this.makeEditNode(this.getDragData())]});isc.B._maxIndex=isc.C+2}if(isc.ListGrid){isc.defineClass("ListPalette","ListGrid","Palette");isc.A=isc.ListPalette.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canDragRecordsOut=true;isc.A.defaultFields=[{name:"title",title:"Title"}];isc.B.push(isc.A.recordDoubleClick=function(){var a=
this.defaultEditContext;if(a){if(isc.isA.String(a))a=isc.Canvas.getById(a);isc.isAn.EditContext(a)&&a.addNode(this.makeEditNode(this.getDragData()))}},isc.A.transferDragData=function(){return[this.makeEditNode(this.getDragData())]});isc.B._maxIndex=isc.C+2}if(isc.Menu){isc.defineClass("MenuPalette","Menu","Palette");isc.A=isc.MenuPalette.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canDragRecordsOut=true;isc.A.selectionType="single";
isc.B.push(isc.A.itemClick=function(){var a=this.defaultEditContext;if(a){if(isc.isA.String(a))a=isc.Canvas.getById(a);isc.isAn.EditContext(a)&&a.addNode(this.makeEditNode(this.getDragData()))}},isc.A.transferDragData=function(){return[this.makeEditNode(this.getDragData())]});isc.B._maxIndex=isc.C+2}isc.ClassFactory.defineClass("EditPane","Canvas","EditContext");isc.A=isc.EditPane.getPrototype();isc.A.canAcceptDrop=true;isc.A.contextMenu={autoDraw:false,data:[{title:"Clear",click:"target.removeAllChildren()"}]};
isc.A.editingOn=true;isc.A.canDrag=true;isc.A.dragAppearance="none";isc.A.overflow="hidden";isc.A.selectedComponents=[];isc.A=isc.EditPane.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canMultiSelect=true;isc.A.outlineBorderStyle="2px dashed red";isc.B.push(isc.A.drop=function(){var a=isc.EH.dragTarget;if(!a.isA("Palette"))return this.Super("drop",arguments);var b=a.transferDragData();b=isc.isAn.Array(b)?b[0]:b;if(!b)return false;var c=
this;this.requestLiveObject(b,function(d){d&&c.addComponentAtCursor(d)},a);return isc.EH.STOP_BUBBLING},isc.A.addNode=function(a){return this.addComponent(a)},isc.A.addComponent=function(a){this.logInfo("EditPane adding component: "+this.echoLeaf(a),"editing");if(this.editComponents==null)this.editComponents=[];this.editComponents.add(a);var b=a.liveObject;this.addChild(b);this.creator&&this.creator.editingOn&&this.enableEditing(a);a.useEditMask&&b.showEditMask()},isc.A.addComponentAtCursor=function(a){this.addNode(a);
a.liveObject.moveTo(this.getOffsetX(),this.getOffsetY())},isc.A.removeChild=function(a){this.Super("removeChild",arguments);if(this.editComponents==null)this.editComponents=[];this.editComponents.removeWhere("ID",a.getID());this.selectedComponents.remove(a)},isc.A.removeAllChildren=function(){if(this.children){for(var a=[],b=0;b<this.children.length;b++)this.children[b]._eventMask&&a.add(this.children[b]);for(b=0;b<a.length;b++)a[b].destroy()}},isc.A.removeSelection=function(a){if(this.selectedComponents.length>
0)for(;this.selectedComponents.length>0;)this.selectedComponents[0].destroy();else a.destroy()},isc.A.click=function(){isc.Canvas.hideResizeThumbs()},isc.A.setEditMode=function(a){if(a==null)a=true;if(this.editingOn!=a){this.editingOn=a;this.editComponents.getProperty("liveObject").map("setEditMode",a,this)}},isc.A.childResized=function(a){var b=this.Super("childResized",arguments);this.saveCoordinates(a);return b},isc.A.childMoved=function(a,b,c){var d=this.Super("childMoved",arguments);this.saveCoordinates(a);
var e=this.selectedComponents;if(e.length>0&&e.contains(a))for(var f=0;f<e.length;f++)e[f]!=a&&e[f].moveBy(b,c);return d},isc.A.saveCoordinates=function(a){if(this.editComponents){var b=this.editComponents.find("liveObject",a);if(b)b.initData=isc.addProperties(b.initData,{left:a.getLeft(),top:a.getTop(),width:a.getWidth(),height:a.getHeight()})}},isc.A.getSaveData=function(){for(var a=this.getEditComponents(),b=[],c=0;c<a.length;c++){var d=a[c],e=d.liveObject;d={type:d.type,defaults:d.defaults};if(e.getSaveData)d=
e.getSaveData(d);b.add(d)}return b},isc.A.mouseDown=function(){if(!(!this.editingOn||!this.canMultiSelect||isc.EH.getTarget()!=this)){isc.EH.getTarget();if(this.selector==null){this.selector=isc.Canvas.create({autoDraw:false,keepInParentRect:true,left:isc.EH.getX(),top:isc.EH.getY(),redrawOnResize:false,overflow:"hidden",border:"1px solid blue"});this.addChild(this.selector)}this.startX=this.getOffsetX();this.startY=this.getOffsetY();this.resizeSelector();this.selector.show();this.updateCurrentSelection()}},
isc.A.dragMove=function(){this.selector&&this.resizeSelector()},isc.A.mouseUp=function(){this.selector&&this.selector.hide()},isc.A.dragStop=function(){this.selector&&this.selector.hide()},isc.A.setOutline=function(a){if(a){isc.isAn.Array(a)||(a=[a]);for(var b=0;b<a.length;b++)a[b]._eventMask.setBorder(this.outlineBorderStyle)}},isc.A.clearOutline=function(a){if(a){isc.isAn.Array(a)||(a=[a]);for(var b=0;b<a.length;b++)a[b]._eventMask.setBorder("none")}},isc.A.updateCurrentSelection=function(){if(this.children){var a=
this.selectedComponents;this.selectedComponents=[];for(var b=0;b<this.children.length;b++){var c=this.children[b];if(this.selector.intersects(c))(c=this.deriveSelectedComponent(c))&&!this.selectedComponents.contains(c)&&this.selectedComponents.add(c)}this.setOutline(this.selectedComponents);a.removeList(this.selectedComponents);this.clearOutline(a);a=this.selectedComponents.getProperty("ID");window.status=a.length?"Current Selection: "+a:""}},isc.A.deriveSelectedComponent=function(a){if(a.masterElement)return this.deriveSelectedComponent(a.masterElement);
if(!a.parentElement||a.parentElement==this){if(a._eventMask)return a;return null}return this.deriveSelectedComponent(a.parentElement)},isc.A.resizeSelector=function(){var a=this.getOffsetX(),b=this.getOffsetY();if(this.selector.keepInParentRect){if(a<0)a=0;var c=this.selector.parentElement.getVisibleHeight();if(b>c)b=c}this.selector.resizeTo(Math.abs(a-this.startX),Math.abs(b-this.startY));a<this.startX?this.selector.setLeft(a):this.selector.setLeft(this.startX);b<this.startY?this.selector.setTop(b):
this.selector.setTop(this.startY);this.updateCurrentSelection()},isc.A.getSelectedComponents=function(){return this.selectedComponents.duplicate()});isc.B._maxIndex=isc.C+23;if(isc.TreeGrid){isc.ClassFactory.defineClass("EditTree","TreeGrid","EditContext");isc.A=isc.EditTree.getPrototype();isc.A.canDragRecordsOut=false;isc.A.canAcceptDroppedRecords=true;isc.A.canReorderRecords=true;isc.A.fields=[{name:"ID",title:"ID",width:"*"},{name:"type",title:"Type",width:"*"}];isc.A.selectionType=isc.Selection.SINGLE;
isc.A.autoShowParents=true;isc.A=isc.EditTree.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function(){this.Super("initWidget",arguments);var a=this.rootComponent||{_constructor:"Object"},b=isc.isA.Class(a)?a.Class:a._constructor;this.setData(isc.Tree.create({idField:"ID",root:{type:b,_constructor:b,initData:a,liveObject:this.rootLiveObject||a},isFolder:function(){return true}}))},isc.A.canAddToParent=function(a,
b){var c=a.liveObject;if(isc.isA.Class(c))return c.getObjectField(b)!=null;return isc.DS.getObjectField(a,b)!=null},isc.A.willAcceptDrop=function(){if(!this.Super("willAcceptDrop",arguments))return false;this.getEventRow();var a=this.getDropFolder(),b=this.ns.EH.dragTarget.getDragData();if(b==null)return false;if(isc.isAn.Array(b)){if(b.length==0)return false;b=b[0]}if(a==null)a=this.data.getRoot();b=b.className||b.type;this.logInfo("checking dragType: "+b+" against dropLiveObject: "+a.liveObject,
"editing");return this.canAddToParent(a,b)},isc.A.folderDrop=function(a,b,c,d){if(d!=this&&!d.isA("Palette"))return this.Super("folderDrop",arguments);if(d!=this)a=d.transferDragData();var e=isc.isAn.Array(a)?a[0]:a;e.dropped=true;this.logInfo("sourceWidget is a Palette, dropped node of type: "+e.type," editing");var f=this;this.requestLiveObject(e,function(g){if(g!=null){if(d==f){var h=this.data.getParent(e);if(b==h){h=this.data.getChildren(h).indexOf(e);h!=null&&h<=c&&c--}f.removeComponent(e)}f.addNode(g,
b,c)}},d)},isc.A.addNode=function(a,b,c,d,e){return this.addComponent(a,b,c,d,e)},isc.A.addComponent=function(a,b,c,d,e){if(b==null)b=this.getDefaultParent(a);var f=this.getLiveObject(b);this.logInfo("addComponent will add newNode of type: "+a.type+" to: "+this.echoLeaf(f),"editing");var g=d||isc.DS.getObjectField(f,a.type),h=isc.DS.getSchemaField(f,g);if(h){if(!h.multiple)if(h=isc.DS.getChildObject(f,a.type,d)){var i=this.data.getChildren(b).find("ID",isc.DS.getAutoId(h));this.logWarn("destroying existing child: "+
this.echoLeaf(h)+" in singular field: "+g);this.data.remove(i);isc.isA.Class(h)&&!isc.isA.DataSource(h)&&h.destroy()}if(a.generatedType){g=isc.addProperties({},a.initData);this.addChildData(g,this.data.getChildren(a))}else g=a.liveObject;if(!e)if(!isc.DS.addChildObject(f,a.type,g,c,d)){this.logWarn("addChildObject failed, returning");return}a.liveObject=isc.DS.getChildObject(f,a.type,isc.DS.getAutoId(a.initData),d);this.logDebug("for new node: "+this.echoLeaf(a)+" liveObject is now: "+this.echoLeaf(a.liveObject),
"editing");a.liveObject==null&&this.logWarn("wasn't able to retrieve live object after adding node of type: "+a.type+" to liveParent: "+f+", does liveParent have an appropriate getter() method?");this.data.add(a,b,c);this.data.openFolder(a);this.logInfo("added node "+this.echoLeaf(a)+" to EditTree at path: "+this.getData().getPath(a)+" with live object: "+this.echoLeaf(a.liveObject),"editing");this.selection.selectSingle(a);this.autoShowParents&&this.showParents(a);this.creator.editingOn&&this.enableEditing(a);
return a}else this.logWarn("can't addComponent: can't find a field in parent: "+f+" for a new child of type: "+a.type+", newNode is: "+this.echo(a))},isc.A.getDefaultParent=function(a,b){for(var c=a.className||a.type,d=this.getSelectedRecord();d&&!this.canAddToParent(d,c);)d=this.data.getParent(d);var e=this.data.getRoot();if(b){if(!d&&this.canAddToParent(e,c))return e;return d}return d||e},isc.A.getLiveObject=function(a){var b=this.data.getParent(a);if(b==null)return a.liveObject;if(b=isc.DS.getChildObject(b.liveObject,
a.type,isc.DS.getAutoId(a)))a.liveObject=b;return a.liveObject},isc.A.removeAll=function(){for(var a=this.data.getChildren(this.data.getRoot()).duplicate(),b=0;b<a.length;b++)this.removeComponent(a[b])},isc.A.destroyAll=function(){for(var a=this.data.getChildren(this.data.getRoot()).duplicate(),b=0;b<a.length;b++)this.destroyComponent(a[b])},isc.A.removeNode=function(a,b){return this.removeComponent(a,b)},isc.A.removeComponent=function(a,b){this.data.remove(a);if(!b){var c=this.getLiveObject(this.data.getParent(a)),
d=this.getLiveObject(a);isc.DS.removeChildObject(c,a.type,d)}},isc.A.destroyNode=function(a){return this.destroyComponent(a)},isc.A.destroyComponent=function(a){var b=this.getLiveObject(a);this.removeNode(a);b.destroy&&b.destroy()},isc.A.showParents=function(a){if(a=this.data.getParents(a).findAll("type","Tab"))for(var b=0;b<a.length;b++){var c=a[b],d=this.data.getParent(c);c=this.getLiveObject(c);this.getLiveObject(d).selectTab(c)}},isc.A.serializeComponents=function(a,b){return this.serializeEditNodes(b?
[this.data.root]:this.data.getChildren(this.data.root).duplicate(),a)},isc.A.serializeEditNodes=function(a,b){var c=isc.SB.create();this.serverless=b;for(var d=0;d<a.length;d++){var e=a[d]=isc.addProperties({},a[d]),f=isc.ClassFactory.getClass(e.type);e=e.initData=isc.addProperties({},e.initData);if(f&&f.isA("Canvas")&&e&&e.visibility!=isc.Canvas.HIDDEN&&e.autoDraw!==false)e.autoDraw=true}this.saveNodes=[];this.map("getSerializeableTree",a);isc.Comm.omitXSI=true;for(d=0;d<this.saveNodes.length;d++){e=
this.saveNodes[d];f=isc.DS.getNearestSchema(e);c.append(f.xmlSerialize(e),"\n\n")}this.serverless=isc.Comm.omitXSI=null;return c.toString()},isc.A.getSerializeableTree=function(a,b){var c=a.type,d=isc.addProperties({},a.initData),e=isc.ClassFactory.getClass(c);this.logInfo("node: "+this.echoLeaf(a)+" with type: "+c);if(e&&e.isA("DataSource")){if(this.saveNodes)if((c=this.saveNodes.find("ID",d.ID)||this.saveNodes.find("loadID",d.ID))&&c.$schemaId=="DataSource")return;if(this.serverless){c=a.liveObject;
d=c.getSerializeableFields();d._constructor=c.Class;d.$schemaId="DataSource"}else d={_constructor:"DataSource",$schemaId:"DataSource",loadID:d.ID}}this.convertActions(a,d,e);if(e=this.data.getChildren(a)){this.addChildData(d,e);if(b)return d}this.saveNodes&&this.saveNodes.add(d)},isc.A.addChildData=function(a,b){for(var c=isc.DS.get(a._constructor),d=0;d<b.length;d++){var e=b[d],f=e.initData._constructor,g=isc.addProperties({},e.initData),h=g.parentProperty||c.getObjectField(f),i=c.getField(h);this.logInfo("serializing: child of type: "+
f+" goes in parent field: "+h,"editing");if(isc.isA.Canvas(e.liveObject)&&!e.liveObject._generated||isc.isA.DataSource(e.liveObject)){g="ref:"+g.ID;this.getSerializeableTree(e)}else g=this.getSerializeableTree(e,true);e=a[h];if(i.multiple){e||(e=a[h]=[]);e.add(g)}else a[h]=g}},isc.A.convertActions=function(a,b,c){for(var d in b){var e=b[d];if(!(!isc.isAn.Object(e)||isc.isA.StringMethod(e))){var f;if(c.getField)f=c.getField(d).type;if(!(f&&f!="StringMethod")){var g=a.liveObject[d],h;if(g?g.iscAction:
null)h=true;if(h)b[d]=isc.StringMethod.create({value:e})}}}});isc.B._maxIndex=isc.C+20}isc.defineClass("FormItemProxyCanvas","Canvas");isc.A=isc.FormItemProxyCanvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoDraw=false;isc.A.canDrop=true;isc.B.push(isc.A.setFormItem=function(a){this.formItem=a;this.syncWithFormItemPosition();this.sendToBack();this.show()},isc.A.syncWithFormItemPosition=function(){if(this.formItem&&this.formItem.form){this.setPageLeft(this.formItem.getPageLeft());
this.setPageTop(this.formItem.getPageTop());this.setWidth(this.formItem.getVisibleWidth());this.setHeight(this.formItem.getVisibleHeight())}});isc.B._maxIndex=isc.C+2;if(isc.DynamicForm){isc.defineClass("PropertySheet","DynamicForm");isc.A=isc.PropertySheet.getPrototype();isc.A.autoChildItems=true;isc.A.browserSpellCheck=false;isc.A.autoChildDefaults={cellStyle:"propSheetValue",titleStyle:"propSheetTitle",showHint:false};isc.A.GroupItemDefaults={cellStyle:null};isc.A.ExpressionItemDefaults={width:"*",
height:18,showActionIcon:true};isc.A.ActionMenuItemDefaults={width:"*",height:18};isc.A.SelectItemDefaults={height:20,width:"*"};isc.A.DateItemDefaults={width:"*"};isc.A.TextItemDefaults={width:"*",height:20};isc.A.StaticTextItemDefaults={width:"*",height:20,textBoxStyle:"propSheetField"};isc.A.ColorItemDefaults={width:"*",height:16,pickerIconHeight:16,pickerIconWidth:16,pickerIconSrc:"[SKIN]/DynamicForm/PropSheet_ColorPicker_icon.png",textBoxStyle:"propSheetField"};isc.A.HeaderItemDefaults={cellStyle:"propSheetHeading"};
isc.A.TextAreaItemProperties={width:"*"};isc.A.CheckboxItemDefaults={showTitle:true,showLabel:false,getTitleHTML:function(){if(this[this.form.titleField]!=null)return this[this.form.titleField];return this[this.form.fieldIdProperty]}};isc.A.SectionItemDefaults={cellStyle:"propSheetSectionHeaderCell"};isc.A.titleAlign="left";isc.A.titleWidth=120;isc.A.cellSpacing=0;isc.A.cellPadding=0;isc.A.backgroundColor="white";isc.A.requiredTitlePrefix="<span style='color:green'>";isc.A.requiredTitleSuffix="</span>";
isc.A.titleSuffix="";isc.A.clipItemTitles=true}if(isc.ListGrid&&isc.DynamicForm){isc.defineClass("ListEditor",isc.Layout);isc.A=isc.ListEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.vertical=false;isc.A.gridConstructor=isc.ListGrid;isc.A.gridDefaults={editEvent:"click",listEndEditAction:"next",autoParent:"gridLayout",selectionType:isc.Selection.SINGLE,recordClick:"this.creator.recordClick(record)",editorEnter:"if (this.creator.moreButton) this.creator.moreButton.enable()",
selectionChanged:function(){this.anySelected()&&this.creator.moreButton&&this.creator.moreButton.enable()},contextMenu:{data:[{title:"Remove",click:"target.creator.removeRecord()"}]}};isc.A.gridButtonsDefaults={_constructor:isc.HLayout,autoParent:"gridLayout",height:10,width:10,layoutMargin:6,membersMargin:10,overflow:isc.Canvas.VISIBLE};isc.A.newButtonTitle="New";isc.A.newButtonDefaults={_constructor:isc.AutoFitButton,autoParent:"gridButtons",click:"this.creator.newRecord()"};isc.A.moreButtonTitle=
"More..";isc.A.moreButtonDefaults={_constructor:isc.AutoFitButton,autoParent:"gridButtons",click:"this.creator.editMore()",disabled:true};isc.A.removeButtonTitle="Remove";isc.A.removeButtonDefaults={_constructor:isc.AutoFitButton,autoParent:"gridButtons",click:"this.creator.removeRecord()"};isc.A.formDefaults={_constructor:isc.DynamicForm,autoParent:"formLayout",overflow:isc.Canvas.AUTO};isc.A.formButtonsDefaults={_constructor:isc.HLayout,autoParent:"formLayout",height:10,width:10,layoutMargin:6,
membersMargin:10,overflow:isc.Canvas.VISIBLE};isc.A.saveButtonTitle="Save";isc.A.saveButtonDefaults={_constructor:isc.AutoFitButton,autoParent:"formButtons",click:"this.creator.saveRecord();"};isc.A.cancelButtonTitle="Cancel";isc.A.cancelButtonDefaults={_constructor:isc.AutoFitButton,autoParent:"formButtons",click:"this.creator.cancelChanges()"};isc.A.resetButtonTitle="Reset";isc.A.resetButtonDefaults={_constructor:isc.AutoFitButton,autoParent:"formButtons",click:"this.creator.form.resetValues()"};
isc.A.gridLayoutDefaults={_constructor:isc.VLayout};isc.A.gridButtonsOrientation="left";isc.A.formLayoutDefaults={_constructor:isc.VLayout,autoFocus:true};isc.A.animateMembers=true;isc.A.membersMargin=10;isc.A.confirmLoseChangesMessage="Discard changes?";isc.A.formGroup=["formLayout","form","formButtons","saveButton","cancelButton","resetButton"];isc.A.gridButtonsGroup=["gridButtons","newButton","moreButton"];isc.B.push(isc.A.draw=function(){if(isc.$cv)arguments.$cw=this;if(!this.readyToDraw())return this;
return this.Super("draw",arguments)},isc.A.initWidget=function(){this.Super("initWidget",arguments);if(!this.inlineEdit)this.showMoreButton=this.showMoreButton||false;this.addAutoChild("gridLayout");this.addAutoChild("grid",{_constructor:this.gridConstructor});this.addAutoChildren(this.gridButtonsGroup);this.addAutoChildren(this.formGroup)},isc.A.configureAutoChild=function(a,b){if(isc.isA.Button(a))a.title=this[b+"Title"];if(a==this.grid){a.dataSource=this.dataSource;a.fields=this.fields;a.saveLocally=
this.saveLocally;a.canEdit=this.inlineEdit}if(this.gridButtonsOrientation==isc.Canvas.RIGHT){if(a==this.gridLayout)a.vertical=false;if(a==this.formLayout)a.vertical=false;if(a==this.gridButtons)a.vertical=true;if(a==this.formButtons)a.vertical=true}if(a==this.form){a.dataSource=this.dataSource;a.fields=this.formFields}if(this.inlineEdit){if(a==this.formLayout)a.visibility=isc.Canvas.HIDDEN}else if(a==this.gridLayout)a.showResizeBar=true},isc.A.setDataSource=function(a,b){this.dataSource=a||this.dataSource;
if(this.grid!=null){this.grid.setDataSource(a,b);this.form.setDataSource(a,b)}},isc.A.setData=function(a){if(a==null)a=[];a.dataSource&&this.setDataSource(a.dataSource);if(this.grid!=null){this.grid.setData(a);this.form.clearValues()}else isc.addProperties(this.gridDefaults,this.gridProperties||{},{data:a})},isc.A.getData=function(){this.inlineEdit&&this.grid.endEditing();return this.grid.getData()},isc.A.cancelChanges=function(){this.form.clearValues();this.showList()},isc.A.showList=function(){if(this.inlineEdit){this.formLayout.animateHide({effect:"wipe",
startFrom:"R"});this.gridLayout.animateShow({effect:"wipe",startFrom:"R"})}},isc.A.showForm=function(){if(this.inlineEdit){this.gridLayout.animateHide({effect:"wipe",startFrom:"R"});this.formLayout.animateShow({effect:"wipe",startFrom:"R"})}},isc.A.recordClick=function(a){if(!this.inlineEdit){var b=this,c=function(d){if(d){b.currentRecord=a;b.inlineEdit||b.form.editRecord(a);b.form.setValues(isc.addProperties({},b.grid.getSelectedRecord()))}};this.form.valuesHaveChanged()?this.confirmLoseChanges(c):
c(true)}},isc.A.getEditRecord=function(){var a=this.grid.getEditRow();return a!=null?this.grid.getEditedRecord(a):isc.addProperties({},this.grid.getSelectedRecord())},isc.A.editMore=function(){this.currentRecord=this.getEditRecord();this.showForm();this.form.setValues(this.currentRecord)},isc.A.newRecord=function(){if(this.inlineEdit)return this.grid.startEditingNew();var a=this,b=function(c){if(c){a.grid.deselectAllRecords();a.showForm();a.form.editNewRecord()}};this.form.valuesHaveChanged()?this.confirmLoseChanges(b):
b(true)},isc.A.removeRecord=function(){this.form.clearValues();this.grid.removeSelectedData()},isc.A.saveRecord=function(){if(!this.form.validate())return false;var a=this.form.getValues();this.showList();if(this.form.saveOperationType=="add")this.grid.addData(a);else if(this.inlineEdit&&this.grid.getEditRow()!=null){var b=this.grid.getEditRow();this.grid.data[b]!=null?this.grid.updateData(a):this.grid.setEditValues(b,a)}else this.grid.updateData(a);return true},isc.A.confirmLoseChanges=function(a){isc.confirm(this.confirmLoseChangesMessage,
a)},isc.A.validate=function(){if(this.form.isVisible()&&this.form.valuesHaveChanged())return this.form.validate();return true});isc.B._maxIndex=isc.C+17}isc.ClassFactory.defineClass("ViewLoader",isc.Label);isc.A=isc.ViewLoader.getPrototype();isc.A.loadingMessage="Loading View...&nbsp;${loadingImage}";isc.A.align=isc.Canvas.CENTER;isc.A.allowContentAndChildren=true;isc.A.httpMethod="GET";isc.A.useSimpleHttp=true;isc.A.transformXML=true;isc.A.overflow="hidden";isc.A=isc.ViewLoader.getPrototype();isc.B=
isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function(){this.Super(this.$oc);if(this.placeholder)this.addChild(this.placeholder);else this.contents=this.getLoadingMessage()},isc.A.draw=function(){if(!this.readyToDraw())return this;this.Super("draw",arguments);if(this.view){this.addChild(this.view);this.view.show()}else this.viewURL&&!this.loadingView()&&this.setViewURL();return this},isc.A.layoutChildren=function(){this.Super("layoutChildren",
arguments);var a=this.children;if(!(!a||a.length==0)){a=this.children[0];var b=this.getWidth(),c=this.getHeight();if(a.$pn!=null)b=null;if(a.$po!=null)c=null;a.setRect(0,0,b,c)}},isc.A.destroy=function(){this.placeholder&&this.placeholder.destroy();this.view&&this.view.destroy();this.Super("destroy",arguments)},isc.A.setPlaceholder=function(a){this.placeholder&&this.placeholder.destroy();this.placeholder=a;this.addChild(a);this.placeholder.sendToBack()},isc.A.setViewURL=function(a,b,c){if(a!=null)this.viewURL=
a;if(this.placeholder){this.placeholder.show();this.placeholder.bringToFront()}if(this.view!=null){this.view.hide();this.setContents(this.getLoadingMessage())}a={};var d=this.useSimpleHttp,e=this.httpMethod,f=false;if(!isc.rpc.xmlHttpRequestAvailable()){this.logInfo("XMLHttpRequest not available, using frames comm and expecting RPCResponse");a={};d=false;e="POST";f=false}b=isc.addProperties({showPrompt:false,actionURL:this.viewURL,httpMethod:e,useSimpleHttp:d,bypassCache:!this.allowCaching,params:isc.addProperties(a,
this.viewURLParams,b)},this.viewRPCProperties,c,{evalResult:f,suppressAutoDraw:true,willHandleError:true,callback:"if(window."+this.getID()+")"+this.getID()+".$40p(rpcRequest, rpcResponse, data)"});if(!b.evalVars)b.evalVars={};b.evalVars.viewLoader=this;this.$40t=isc.rpc.sendProxied(b,true).transactionNum},isc.A.loadingView=function(){return this.$40t!=null},isc.A.$40p=function(a,b,c){if(a.transactionNum==this.$40t){delete this.$40t;this.$40q=false;if(b.status!=isc.RPCResponse.STATUS_SUCCESS)if(this.handleError(a,
b)===false)return;try{if(a.actionURL.endsWith(".xml")&&this.transformXML){var d=isc.Canvas._canvasList,e=d.length;isc.xml.toComponents(c);if(!this.$40q)for(var f=d.length;f>=e;f--){var g=d[f];if(g!=null&&isc.isA.Canvas(g)&&g.parentElement==null&&g.masterElement==null){this.setView(this.transformView(g));break}}this.$40r()}else{var h=this;isc.Class.globalEvalWithCapture(c,function(j,k){isc.Log.logWarn("firing the callback from global eval with...");isc.Log.logWarn("viewLoader is:"+h);k?h.handleError(a,
b,k):h.$40r(j)},a.evalVars)}}catch(i){this.handleError(a,b,i)}}},isc.A.$40r=function(a){if(!this.$40q&&a)for(var b=a.length;b>=0;b--){var c=window[a[b]];if(c&&isc.isA.Canvas(c)&&c.parentElement==null&&c.masterElement==null){this.setView(this.transformView(c));break}}this.$40q||this.logWarn("setView() not explicitly called by loaded view and could not be autodetected for view: "+this.getID());this.viewLoaded(this.view)},isc.A.transformView=function(a){return a},isc.A.handleError=function(a,b,c){this.logWarn("ViewLoader received bad response:\n"+
isc.echo(b.data));this.setView(isc.Label.create({contents:c?c.toString():b.data}));return false},isc.A.setView=function(a){if(!(a!=null&&a==this.view)){this.$40q=true;this.setContents("&nbsp;");this.view&&this.view.destroy();this.view=a;if(a!=null){this.addChild(a,null,false);this.layoutChildren();a.draw();this.logInfo("showing view: "+a);this.placeholder&&this.placeholder.hide();this.contents="&nbsp;"}}},isc.A.getView=function(){return this.view},isc.A.viewLoaded=function(){},isc.A.getLoadingMessage=
function(){return this.loadingMessage.evalDynamicString(this,{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)})});isc.B._maxIndex=isc.C+15;isc.ClassFactory.defineClass("HTMLFlow","Canvas");isc.A=isc.HTMLFlow;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$49v=0;isc.A.$49w=[];isc.B.push(isc.A.executeScript=function(a,b,c){this.$49w[this.$49v]={callback:b,displayErrors:c};this.$49v++;this.getScript(a,
"isc.HTMLFlow.$49x("+this.$49v+",htmlFragments, scripts);")},isc.A.$49x=function(a,b,c){b=this.$49w[a];delete this.$49w[a];a=true;for(var d=0;d<this.$49w.length;d++)if(this.$49w[d]!=null){a=false;break}if(a)this.$49v=0;isc.Class.globalEvalWithCapture(c,b.callback,null,b.displayErrors)},isc.A.getScript=function(a,b,c,d){for(var e=a,f,g;(f=a.match(/<!--/i))!=null;){g=a.match(/--\>/i);if(g==null||g.index<f.index){this.logWarn('HTMLFlow content contains an opening comment tag "<!--" with no closing tag "--\>", or vice versa. We recommend you review this HTML (original HTML follows):\n'+
e);if(g){f=g.index;g=f+3}else{f=f.index;g=f+4}}else{f=f.index;g=g.index+3}a=a.slice(0,f)+a.slice(g,a.length)}g=[];f=[];var h=[];a=a;for(var i;(i=a.match(/(<script([^>]*)?>)/i))!=null;){var j=i[1];h.add(a.slice(0,i.index));g.add(null);f.add(null);a=a.slice(i.index+j.length,a.length);var k=a.match(/<\/script>/i);i=a.match(/(<script([^>]*)?>)/i);if(k==null||i&&k.index>i.index)this.logWarn("HTMLFlow content contains an opening <script ...> tag with no closing tag, or vice versa. Stripping out this tag:"+
j);else{i=a.slice(0,k.index);a=a.slice(k.index+9,a.length);k=j.match(/<script\s*(language|type)/i)==null||j.match(/<script\s*(language|type)\s*=["']?[^'"]*(javascript|ecmascript|jscript)[^'"]*["']?/i)!=null;if(this.shouldLoadScript(j))if(k){if(j=j.match(/src=('|")?([^'"> ]*)/i)){f.add(j[2]);g.add(null)}else{if(!isc.isA.String(i)||isc.isAn.emptyString(i))continue;g.add(i);f.add(null)}h.add(null)}else this.logWarn("html to be evaluated contains non-JS script tags - these will be ignored.  Tag: "+j)}}if(h.length==
0)h=[a];else h.push(a);if(f.length>0&&!d)if(isc.RPCManager){d=false;for(a=0;a<f.length;a++)if(f[a]!=null){isc.RPCManager.sendRequest({actionURL:f[a],serverOutputAsString:true,httpMethod:"GET",clientContext:{scriptIndex:a,scripts:g,scriptIncludes:f,callback:b,htmlFragments:c?h:[e]},callback:"isc.HTMLFlow.loadedRemoteScriptBlock(data, rpcResponse.clientContext)"});d=true}if(d)return}else this.logWarn("html contains <script src=> blocks with the following target URLs: "+f+" If you want these to be dynamically loaded, please include the DataBinding module or include the contents of these files in inline <script> blocks.");
g.join("\n");this.fireCallback(b,"htmlFragments,scripts",[c?h:[e],g])},isc.A.shouldLoadScript=function(a){var b=a.match(/ISC_([^.]*)\.js/i);if(b&&isc["module_"+b[1]])return false;if(b=a.match(/load_skin\.js/i))return false;return true},isc.A.loadedRemoteScriptBlock=function(a,b){var c=b.scriptIndex,d=b.scripts,e=b.scriptIncludes;d[c]=a;delete e[c];for(c=0;c<e.length;c++)if(e[c]!=null)return;this.fireCallback(b.callback,"htmlFragments,scripts",[b.htmlFragments,d])});isc.B._maxIndex=isc.C+5;isc.A=isc.HTMLFlow.getPrototype();
isc.A.defaultWidth=200;isc.A.defaultHeight=1;isc.A.allowContentAndChildren=true;isc.A.cursor="auto";isc.A.loadingMessage="&nbsp;${loadingImage}";isc.A.httpMethod="GET";isc.A.useSimpleHttp=true;isc.A.evalScriptBlocks=true;isc.A.captureSCComponents=true;isc.A=isc.HTMLFlow.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$525=0;isc.B.push(isc.A.initWidget=function(){this.contentsType=="page"&&this.overflow=="visible"&&this.setOverflow("auto")},
isc.A.draw=function(){if(!this.readyToDraw())return this;this.Super("draw",arguments);if(this.containsIFrame())return this;else if(this.canSelectText===void 0)this.canSelectText=true;if(this.contentsURL&&!(this.$533==this.contentsURL||this.loadingContent()))this.setContentsURL();return this},isc.A.setContentsURL=function(a,b,c){if(this.contentsType=="page")return this.invokeSuper(isc.HTMLFlow,"setContentsURL",a,b);if(a!=null)this.contentsURL=a;this.loadingMessage&&this.setContents(this.loadingMessage.evalDynamicString(this,
{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)}));a=isc.addProperties({},this.contentsURLParams,b);c=isc.addProperties({showPrompt:false,actionURL:this.contentsURL,httpMethod:this.httpMethod,useSimpleHttp:this.useSimpleHttp,bypassCache:!this.allowCaching,params:a},this.contentRPCProperties,c,{willHandleError:true,serverOutputAsString:true,callback:this.getID()+".$40s(rpcRequest, rpcResponse)"});this.$40t=isc.rpc.sendProxied(c,true).transactionNum},
isc.A.loadingContent=function(){return this.$40t!=null},isc.A.$40s=function(a,b){var c=b.data;if(b.status!=isc.RPCResponse.STATUS_SUCCESS)if(this.handleError(a,b)===false)return;a.transactionNum==this.$40t&&isc.HTMLFlow.getScript(c,{target:this,methodName:"$49y"},true,!this.evalScriptBlocks)},isc.A.$526=function(a){a.parentElement||this.addChild(a);var b="HTMLFlow"+this.$525++;a.htmlElement=b;return'<DIV id="'+b+'"></DIV>'},isc.A.$527=function(a){a.parentElement||this.addChild(a);return null},isc.A.$49y=
function(a,b){this.setContents(this.transformHTML(a.join("")));if(a.length>1)if(this.evalScriptBlocks){this.isDirty()&&this.redraw();if(this.captureSCComponents){this.$528=isc.Canvas.autoDraw;isc.setAutoDraw(false)}for(var c=0;c<a.length;c++){var d=null,e=this;if(this.captureSCComponents)d=function(g){if(g.length)a[c]=g.map(function(h){h=window[h];if(!h||!isc.isA.Canvas(h))return null;return h.position==isc.Canvas.RELATIVE?e.$526(h):e.$527(h)}).join("")};b[c]&&isc.Class.globalEvalWithCapture(b[c],
d)}if(this.captureSCComponents){this.setContents(this.transformHTML(a.join("")));if(this.$528){isc.setAutoDraw(true);for(var f in window)isc.isA.Canvas(f)&&f.autoDraw&&f.markForRedraw()}}}else this.logWarn("html returned by server appears to contain <script> blocks.  If you want these to be evaluated, you must set evalScriptBlocks:true.");this.$40u()},isc.A.handleError=function(a,b){this.logWarn(b.data)},isc.A.$40u=function(){this.$533=this.contentsURL;this.$40t=null;this.contentLoaded()},isc.A.transformHTML=
function(a){return a},isc.A.contentLoaded=function(){},isc.A.modifyContent=function(){this.$73w()});isc.B._maxIndex=isc.C+13;isc.HTMLFlow.registerStringMethods({contentLoaded:""});isc.defineClass("HTMLPane",isc.HTMLFlow);isc.A=isc.HTMLPane.getPrototype();isc.A.overflow=isc.Canvas.AUTO;isc.A.defaultHeight=200;isc.defineClass("WSDataSource","DataSource");isc.A=isc.WSDataSource.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.serviceNamespace=
"urn:operations.smartclient.com";isc.A.operationBindings=[{operationType:"fetch",wsOperation:"fetch",recordXPath:"//data/*"},{operationType:"add",wsOperation:"add",recordXPath:"//data/*"},{operationType:"remove",wsOperation:"remove",recordXPath:"//data/*"},{operationType:"update",wsOperation:"update",recordXPath:"//data/*"}];isc.B.push(isc.A.transformRequest=function(a){var b={dataSource:a.dataSource,operationType:a.operationType,data:a.data};if(a.startRow!=null){b.startRow=a.startRow;b.endRow=a.endRow}if(a.textMatchStyle!=
null)b.textMatchStyle=a.textMatchStyle;if(a.operationId!=null)b.operationId=a.operationId;if(a.sortBy!=null)b.sortBy=a.sortBy;return b},isc.A.transformResponse=function(a,b,c){if(c&&c.selectString){a.status=c.selectString("//status");if(isc.isA.String(a.status)){b=isc.DSResponse[a.status];if(a.status==null){this.logWarn("Unable to map response code: "+b+" to a DSResponse code, setting status to DSResponse.STATUS_FAILURE.");a.data=c.selectString("//data")}else a.status=b}if(a.status==isc.DSResponse.STATUS_VALIDATION_ERROR){b=
c.selectNodes("//errors/*");a.errors=isc.xml.toJS(b,null,this)}a.totalRows=c.selectNumber("//totalRows");a.startRow=c.selectNumber("//startRow");a.endRow=c.selectNumber("//endRow")}});isc.B._maxIndex=isc.C+2;isc.defineClass("RestDataSource","DataSource");isc.A=isc.RestDataSource.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.serverType="generic";isc.A.dataFormat="xml";isc.A.xmlRecordXPath="/response/data/*";isc.A.jsonRecordXPath="/response/data";
isc.A.prettyPrintJSON=true;isc.A.operationBindings=[{operationType:"fetch",dataProtocol:"getParams"},{operationType:"add",dataProtocol:"postParams"},{operationType:"remove",dataProtocol:"postParams"},{operationType:"update",dataProtocol:"postParams"}];isc.A.sendMetaData=true;isc.A.metaDataPrefix="_";isc.B.push(isc.A.init=function(){this.recordXPath=this.recordXPath||(this.dataFormat=="xml"?this.xmlRecordXPath:this.jsonRecordXPath);this.jsonPrefix=this.jsonPrefix||"//isc_JSONResponseStart--\>";this.jsonSuffix=
this.jsonSuffix||"//isc_JSONResponseEnd";return this.Super("init",arguments)},isc.A.getDataURL=function(a){var b=a.operationType;if(b=="fetch"&&this.fetchDataURL!=null)return this.fetchDataURL;if(b=="update"&&this.updateDataURL!=null)return this.updateDataURL;if(b=="add"&&this.addDataURL!=null)return this.addDataURL;if(b=="remove"&&this.removeDataURL!=null)return this.removeDataURL;return this.Super("getDataURL",arguments)},isc.A.getDataProtocol=function(){var a=this.Super("getDataProtocol",arguments);
if(a=="postXML")a="postMessage";return a},isc.A.transformRequest=function(a){var b=this.getDataProtocol(a);if(b=="postMessage"){if(a.params==null)a.params={};a.params.isc_dataFormat=this.dataFormat;b={dataSource:this.getID()};if(a.operationType!=null)b.operationType=a.operationType;if(a.operationId!=null)b.operationId=a.operationId;if(a.startRow!=null)b.startRow=a.startRow;if(a.endRow!=null)b.endRow=a.endRow;if(a.sortBy!=null)b.sortBy=a.sortBy;if(a.textMatchStyle!=null)b.textMatchStyle=a.textMatchStyle;
if(this.sendClientContext)b.clientContext=a.clientContext;if(a.componentId)b.componentId=a.componentId;var c=isc.DataSource.create({fields:[{name:"data",multiple:true,type:this.getID()},{name:"oldValues",type:this.getID()}]});if(this.autoConvertRelativeDates==true){this.logIsInfoEnabled("relativeDates")&&this.logInfo("Calling convertRelativeDates from getServiceInputs - data is\n\n"+isc.echoFull(a.data));var d=this.convertRelativeDates(a.data);this.logIsInfoEnabled("relativeDates")&&this.logInfo("Called convertRelativeDates from getServiceInputs - data is\n\n"+
isc.echoFull(d));a.data=d}b.data=a.data;b.oldValues=a.oldValues;if(!a.contentType)a.contentType=this.dataFormat=="json"?"application/json":"text/xml";if(this.dataFormat=="json"){if(b.data!=null)b.data=this.serializeFields(b.data);if(b.oldValues!=null)b.oldValues=this.serializeFields(b.oldValues);return isc.JSON.encode(b,{prettyPrint:this.prettyPrintJSON})}else return c.xmlSerialize(b,null,null,"request")}else{if(b!="getParams"&&b!="postParams"){this.logWarn("RestDataSource operation:"+a.operationID+
", of type "+a.operationType+" has dataProtocol specified as '"+b+"'. Supported protocols are 'postParams', 'getParams' and 'postMessage' only. Defaulting to 'getParams'.");a.dataProtocol="getParams"}b=isc.addProperties({},a.data,a.params);if(this.sendMetaData){if(!this.parameterNameMap){d={};d[this.metaDataPrefix+"operationType"]="operationType";d[this.metaDataPrefix+"operationId"]="operationId";d[this.metaDataPrefix+"startRow"]="startRow";d[this.metaDataPrefix+"endRow"]="endRow";d[this.metaDataPrefix+
"sortBy"]="sortBy";d[this.metaDataPrefix+"textMatchStyle"]="textMatchStyle";d[this.metaDataPrefix+"oldValues"]="oldValues";d[this.metaDataPrefix+"componentId"]="componentId";this.parameterNameMap=d}for(c in this.parameterNameMap){d=a[this.parameterNameMap[c]];if(d!=null)b[c]=d}b[this.metaDataPrefix+"dataSource"]=this.getID();b.isc_metaDataPrefix=this.metaDataPrefix}b.isc_dataFormat=this.dataFormat;return b}},isc.A.getUpdatedData=function(a,b,c){var d=b?b.data:null;if(c&&(!d||isc.isAn.emptyString(d)||
isc.isA.Array(d)&&d.length==0)&&b.status==0&&this.getDataProtocol(a)=="postMessage"){this.logInfo("dsResponse for successful operation of type "+a.operationType+" did not return updated record[s]. Using submitted request data to update ResultSet cache.","ResultSet");d={};var e=a.originalData;if(e&&isc.isAn.Object(e)){if(a.operationType=="update"){d=isc.addProperties({},a.oldValues);d=isc.isAn.Array(e)?isc.addProperties(d,e[0]):isc.addProperties(d,e);d=[d]}else{isc.isAn.Array(e)||(e=[e]);d=[];for(var f=
0;f<e.length;f++)d[f]=isc.addProperties({},e[f])}this.logIsDebugEnabled("ResultSet")&&this.logDebug("Submitted data to be integrated into the cache:"+this.echoAll(d),"ResultSet")}return d}else return this.Super("getUpdatedData",arguments)},isc.A.getValidStatus=function(a){if(isc.isA.String(a))if(parseInt(a)==a)a=parseInt(a);else{a=isc.DSResponse[a];if(a==null){this.logWarn("Unable to map response code: "+a+" to a DSResponse code, setting status to DSResponse.STATUS_FAILURE.");a=isc.DSResponse.STATUS_FAILURE}}if(a==
null)a=isc.DSResponse.STATUS_SUCCESS;return a},isc.A.transformResponse=function(a,b,c){if(a.status<0||!c)return a;if(this.dataFormat=="json"){c=c.response||{};a.status=this.getValidStatus(c.status);if(a.status==isc.DSResponse.STATUS_VALIDATION_ERROR){b=c.errors;if(isc.isAn.Array(b)){b.length>1&&this.logWarn("server returned an array of errors - ignoring all but the first one");b=b[0]}a.errors=b}else if(a.status<0)a.data=c.data;if(c.totalRows!=null)a.totalRows=c.totalRows;if(c.startRow!=null)a.startRow=
c.startRow;if(c.endRow!=null)a.endRow=c.endRow}else{a.status=this.getValidStatus(c.selectString("//status"));if(a.status==isc.DSResponse.STATUS_VALIDATION_ERROR){b=c.selectNodes("//errors");b=isc.xml.toJS(b);b.length>1&&this.logWarn("server returned an array of errors - ignoring all but the first one");b=b[0];a.errors=b}else if(a.status<0)a.data=c.selectString("//data");b=c.selectNumber("//totalRows");if(b!=null)a.totalRows=b;b=c.selectNumber("//startRow");if(b!=null)a.startRow=b;c=c.selectNumber("//endRow");
if(c!=null)a.endRow=c}return a});isc.B._maxIndex=isc.C+7;isc.DataSource.create({Constructor:"DataSource",ID:"DataSource",addGlobalId:"false",fields:{ID:{required:"true",type:"string",xmlAttribute:"true"},inheritsFrom:{title:"Superclass",type:"string"},useParentFieldOrder:{type:"boolean"},useLocalFieldsOnly:{type:"boolean"},restrictToParentFields:{type:"boolean"},dataFormat:{title:"DataFormat",type:"string",xmlAttribute:"true",valueMap:{custom:"Custom Binding",iscServer:"ISC Java Server",json:"JSON Web Service",
xml:"XML / WSDL Web Service"}},noAutoFetch:{type:"boolean",xmlAttribute:"true"},serverType:{title:"Server Type",type:"string",xmlAttribute:"true",valueMap:{custom:"Custom Server Binding",sql:"ISC Server SQL Connectors"}},callbackParam:{title:"Callback Parameter",type:"string",xmlAttribute:"true"},requestProperties:{type:"Object"},fields:{childTagName:"field",multiple:"true",propertiesOnly:"true",type:"DataSourceField",uniqueProperty:"name"},addGlobalId:{title:"Add Global ID",type:"boolean"},showPrompt:{type:"boolean"},
dbName:{title:"Database Name",type:"string",xmlAttribute:"true"},tableName:{title:"Table Name",type:"string",xmlAttribute:"true"},serverObject:{type:"ServerObject"},operationBindings:{multiple:"true",type:"OperationBinding"},serviceNamespace:{type:"string",xmlAttribute:"true"},dataURL:{type:"string",xmlAttribute:"true"},dataProtocol:{type:"string",xmlAttribute:"true"},dataTransport:{type:"string",xmlAttribute:"true"},defaultParams:{type:"Object"},soapAction:{type:"string"},jsonPrefix:{type:"string"},
jsonSuffix:{type:"string"},messageTemplate:{type:"string"},defaultCriteria:{propertiesOnly:"true",type:"Object",visibility:"internal"},tagName:{type:"string",visibility:"xmlBinding"},recordXPath:{type:"XPath"},recordName:{type:"string"},xmlNamespaces:{type:"Object"},dropExtraFields:{type:"boolean"},schemaNamespace:{type:"string",visibility:"internal",xmlAttribute:"true"},mustQualify:{type:"boolean",visibility:"internal"},xsdSimpleContent:{type:"boolean",visibility:"internal"},xsdAnyElement:{type:"boolean",
visibility:"internal"},xsdAbstract:{type:"boolean",visibility:"internal"},title:{title:"Title",type:"string"},titleField:{title:"Title Field",type:"string"},pluralTitle:{title:"Plural Title",type:"string"},clientOnly:{title:"Client Only",type:"boolean",xmlAttribute:"true"},testFileName:{title:"Test File Name",type:"URL",xmlAttribute:"true"},testData:{multiple:"true",type:"Object"},types:{multiple:"true",propertiesOnly:"true",type:"DataSourceField",uniqueProperty:"ID",visibility:"internal"},groups:{multiple:"true",
type:"string",visibility:"internal"},methods:{multiple:"true",type:"MethodDeclaration",visibility:"internal"},showSuperClassActions:{type:"boolean"},createStandalone:{type:"boolean"},useFlatFields:{type:"boolean"},showLocalFieldsOnly:{type:"boolean",xmlAttribute:"true"},globalNamespaces:{type:"Object"},autoDeriveSchema:{type:"boolean"},useLocalValidators:{type:"boolean"},autoDeriveTitles:{type:"boolean"},qualifyColumnNames:{type:"boolean"},validateRelatedRecords:{type:"boolean"},requiresAuthentication:{type:"boolean"},
requiresRoles:{type:"boolean"},requires:{type:"string"},beanClassName:{type:"string"},autoJoinTransactions:{type:"boolean"}}});isc.DataSource.create({ID:"DataSourceField",addGlobalId:"false",fields:{name:{basic:"true",primaryKey:"true",required:"true",title:"Name",type:"string",xmlAttribute:"true"},type:{basic:"true",title:"Type",type:"string",xmlAttribute:"true"},disabled:{title:"Disabled",type:"boolean"},idAllowed:{title:"ID Allowed",type:"boolean",xmlAttribute:"true"},required:{title:"Required",
type:"boolean",xmlAttribute:"true"},valueMap:{type:"ValueMap"},validators:{multiple:"true",propertiesOnly:"true",type:"Validator"},length:{title:"Length",type:"integer",xmlAttribute:"true"},xmlRequired:{type:"boolean",visibility:"internal"},xmlMaxOccurs:{type:"string",visibility:"internal"},xmlMinOccurs:{type:"integer",visibility:"internal"},xmlNonEmpty:{type:"boolean",visibility:"internal"},xsElementRef:{type:"boolean",visibility:"internal"},canHide:{title:"User can hide",type:"boolean"},xmlAttribute:{type:"boolean",
visibility:"internal"},mustQualify:{type:"boolean",visibility:"internal"},valueXPath:{title:"Value XPath",type:"XPath",xmlAttribute:"true"},childrenProperty:{type:"boolean"},title:{title:"Title",type:"string",xmlAttribute:"true"},detail:{title:"Detail",type:"boolean",xmlAttribute:"true"},canEdit:{title:"Can Edit",type:"boolean",xmlAttribute:"true"},canSave:{title:"Can Save",type:"boolean",xmlAttribute:"true"},inapplicable:{inapplicable:"true",title:"Inapplicable",type:"boolean"},advanced:{inapplicable:"true",
title:"Advanced",type:"boolean"},visibility:{inapplicable:"true",title:"Visibility",type:"string"},hidden:{inapplicable:"true",title:"Hidden",type:"boolean",xmlAttribute:"true"},primaryKey:{title:"Is Primary Key",type:"boolean",xmlAttribute:"true"},foreignKey:{title:"Foreign Key",type:"string",xmlAttribute:"true"},rootValue:{title:"Tree Root Value",type:"string",xmlAttribute:"true"},showFileInline:{type:"boolean",xmlAttribute:"true"},nativeName:{hidden:"true",title:"Native Name",type:"string"},fieldName:{hidden:"true",
title:"Field Name",type:"string"},fields:{childTagName:"field",hidden:"true",multiple:"true",propertiesOnly:"true",type:"DataSourceField",uniqueProperty:"name"},multiple:{type:"boolean",xmlAttribute:"true"},validateEachItem:{type:"boolean",xmlAttribute:"true"},pickListFields:{multiple:"true",type:"Object"},canFilter:{type:"boolean",xmlAttribute:"true"},ignore:{type:"boolean"},canSortClientOnly:{type:"boolean",xmlAttribute:"true"},childTagName:{type:"string",xmlAttribute:"true"},basic:{type:"boolean"},
maxFileSize:{type:"integer"},frozen:{title:"Frozen",type:"boolean",xmlAttribute:"true"}}});isc.DataSource.create({ID:"Validator",addGlobalId:"false",fields:{type:{type:"string"},stopIfFalse:{type:"boolean"},clientOnly:{type:"boolean"},errorMessage:{type:"string"},max:{type:"number"},min:{type:"number"},exclusive:{type:"boolean"},mask:{type:"regexp"},transformTo:{type:"regexp"},precision:{type:"integer"},expression:{type:"string"},otherField:{type:"string"},list:{multiple:"true",type:"text"},valueMap:{type:"ValueMap"},
substring:{type:"text"},operator:{type:"text"},count:{type:"integer"},applyWhen:{type:"AdvancedCriteria"},dependentFields:{multiple:"true",type:"string"},serverCondition:{type:"string"},serverObject:{type:"ServerObject"}}});isc.DataSource.create({Constructor:"SimpleType",ID:"SimpleType",addGlobalId:false,inheritsFrom:"DataSourceField",fields:{inheritsFrom:{name:"inheritsFrom",type:"string"},editorType:{name:"editorType",type:"string"}}});isc.DataSource.create({Constructor:"XSComplexType",ID:"XSComplexType",
addGlobalId:false,inheritsFrom:"DataSource"});isc.DataSource.create({Constructor:"XSElement",ID:"XSElement",addGlobalId:false,inheritsFrom:"DataSource"});isc.DataSource.create({Constructor:"SchemaSet",ID:"SchemaSet",addGlobalId:false,fields:{schemaNamespace:{name:"schemaNamespace",type:"url"},schemaImports:{multiple:true,name:"schemaImports",type:"Object"},qualifyAll:{name:"qualifyAll",type:"boolean"},schema:{multiple:true,name:"schema",type:"DataSource"}}});isc.DataSource.create({Constructor:"WSDLMessage",
ID:"WSDLMessage",addGlobalId:false,inheritsFrom:"DataSource"});isc.DataSource.create({Constructor:"WebService",ID:"WebService",addGlobalId:false,fields:{location:{name:"location",type:"url"},targetNamespace:{name:"targetNamespace",type:"url"},schemaImports:{multiple:true,name:"schemaImports",type:"Object"},wsdlImports:{multiple:true,name:"wsdlImports",type:"Object"},operations:{multiple:true,name:"operations",type:"WebServiceOperation"},portTypes:{multiple:true,name:"portTypes",type:"Object"},bindings:{multiple:true,
name:"bindings",type:"Object"},messages:{multiple:true,name:"messages",type:"WSDLMessage"},globalNamespaces:{name:"globalNamespaces",type:"Object"}}});isc.DataSource.create({ID:"WebServiceOperation",addGlobalId:false,fields:{name:{name:"name",required:true,title:"Operation Name"},soapAction:{name:"soapAction",title:"SOAPAction Header"},inputMessage:{name:"inputMessage",title:"Input Message"},outputMessage:{name:"outputMessage",title:"Output Message"},inputHeaders:{multiple:true,name:"inputHeaders",
type:"WSOperationHeader"},outputHeaders:{multiple:true,name:"outputHeaders",type:"WSOperationHeader"}}});isc.DataSource.create({ID:"WSOperationHeader",addGlobalId:false,fields:{encoding:{name:"encoding"},message:{name:"message"},part:{name:"part"}}});isc.defineClass("Operators","Class");isc.A=isc.Operators;isc.A.equalsTitle="equals";isc.A.notEqualTitle="not equal";isc.A.iEqualsTitle="equals (disregard case)";isc.A.iNotEqualTitle="not equal (disregard case)";isc.A.greaterThanTitle="greater than";isc.A.lessThanTitle=
"less than";isc.A.greaterOrEqualTitle="greater than or equal to";isc.A.lessOrEqualTitle="less than or equal to";isc.A.betweenTitle="between";isc.A.betweenInclusiveTitle="between (inclusive)";isc.A.iContainsTitle="contains";isc.A.iStartsWithTitle="starts with";isc.A.iEndsWithTitle="ends with";isc.A.containsTitle="contains (match case)";isc.A.startsWithTitle="starts with (match case)";isc.A.endsWithTitle="ends with (match case)";isc.A.iNotContainsTitle="does not contain";isc.A.iNotStartsWithTitle="does not start with";
isc.A.iNotEndsWithTitle="does not end with";isc.A.notContainsTitle="does not contain (match case)";isc.A.notStartsWithTitle="does not start with (match case)";isc.A.notEndsWithTitle="does not end with (match case)";isc.A.isNullTitle="is null";isc.A.notNullTitle="not null";isc.A.regexpTitle="matches expression (exact case)";isc.A.iregexpTitle="matches expression";isc.A.inSetTitle="is one of";isc.A.notInSetTitle="is not one of";isc.A.equalsFieldTitle="matches other field";isc.A.notEqualFieldTitle="differs from field";
isc.A.greaterThanFieldTitle="greater than field";isc.A.lessThanFieldTitle="less than field";isc.A.greaterOrEqualFieldTitle="greater than or equal to field";isc.A.lessOrEqualFieldTitle="less than or equal to field";isc.A.containsFieldTitle="contains (match case) another field value";isc.A.startsWithFieldTitle="starts with (match case) another field value";isc.A.endsWithFieldTitle="ends with (match case) another field value";isc.A.andTitle="and";isc.A.notTitle="not";isc.A.orTitle="or";if(isc.DynamicForm){isc.defineClass("DynamicFilterForm",
"DynamicForm");isc.A=isc.DynamicFilterForm;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.canEditField=function(a){return a.canFilter!=false});isc.B._maxIndex=isc.C+1;isc.A=isc.DynamicFilterForm.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$10j="Enter";isc.B.push(isc.A.handleKeyPress=function(a,b){var c=this.getFocusSubItem();if(isc.isA.TextItem(c))b.firedOnTextItem=true;if(a.keyName!=
this.$10j)return this.Super("handleKeyPress",[a,b])},isc.A.itemChanged=function(){this.creator.itemChanged&&this.creator.itemChanged()});isc.B._maxIndex=isc.C+2;isc.defineClass("FilterClause","HStack");isc.A=isc.FilterClause.getPrototype();isc.A.height=20;isc.A.showFieldTitles=true;isc.A.validateOnChange=true;isc.A.fieldPickerWidth=150;isc.A.operatorPickerWidth=150;isc.A.valueItemWidth=150;isc.A.fieldPickerDefaults={type:"SelectItem",name:"fieldName",showTitle:false,textMatchStyle:"startsWith",changed:function(){this.form.creator.fieldNameChanged(this.form)}};
isc.A.operatorPickerDefaults={name:"operator",type:"select",showTitle:false,addUnknownValues:false,defaultToFirstOption:true,changed:function(){this.form.creator.operatorChanged(this.form)}};isc.A.clauseConstructor=isc.DynamicFilterForm;isc.A.showRemoveButton=true;isc.A.removeButtonPrompt="Remove";isc.A.excludeNonFilterableFields=true;isc.A.removeButtonDefaults={_constructor:isc.ImgButton,width:18,height:18,layoutAlign:"center",src:"[SKIN]/actions/remove.png",showRollOver:false,showDown:false,showDisabled:false,
click:function(){this.creator.remove()}};isc.A.flattenItems=true;isc.A=isc.FilterClause.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getPrimaryDS=function(){if(this.dataSource)return this.getDataSource();else if(this.fieldDataSource)return this.fieldDataSource},isc.A.initWidget=function(){if(this.dataSource&&!isc.isA.DataSource(this.dataSource))this.dataSource=isc.DataSource.get(this.dataSource);if(this.fieldDataSource&&
!isc.isA.DataSource(this.fieldDataSource))this.fieldDataSource=isc.DataSource.get(this.fieldDataSource);this.setupClause()},isc.A.getField=function(a){var b;if(this.dataSource)b=this.getDataSource().getField(a);else if(this.clause){(b=this.fieldData?this.fieldData[a]:null)||(b=this.clause.getField("fieldName").getSelectedRecord());if(b)this.field=b;else b=this.field}return b},isc.A.getFieldNames=function(){if(this.dataSource)return this.getDataSource().getFieldNames(true)},isc.A.getFieldOperatorMap=
function(a,b,c,d){return this.getPrimaryDS().getFieldOperatorMap(a,b,c,d)},isc.A.getSearchOperator=function(a){return this.getPrimaryDS().getSearchOperator(a)},isc.A.combineFieldData=function(a,b){var c=this.getPrimaryDS();return c.getField(b)?c.combineFieldData(a,b):a},isc.A.setupClause=function(){this.showRemoveButton&&this.addAutoChild("removeButton");var a={};if(this.showClause!=false){var b=[isc.addProperties(isc.clone(this.fieldPickerDefaults),{width:this.fieldPickerWidth},this.fieldPickerProperties,
{name:"fieldName"}),isc.addProperties(isc.clone(this.operatorPickerDefaults),{width:this.operatorPickerWidth},this.operatorPickerProperties,{name:"operator"})],c=this.criterion,d=this.getFieldNames(),e;if(this.fieldName&&this.dataSource){e=this.fieldName;var f=this.getField(e),g;isc.addProperties(b[0],{type:"staticText",clipValue:true,wrap:false});if(!f||this.excludeNonFilterableFields&&f.canFilter==false)e=d[0];else if(this.showFieldTitles)g=f.title?f.title:e;b[0].defaultValue=g||e;e=e}else if(this.fieldDataSource){isc.addProperties(b[0],
{type:"ComboBoxItem",completeOnTab:true,optionDataSource:this.fieldDataSource,valueField:"name",displayField:this.showFieldTitles?"title":"name",pickListProperties:{reusePickList:function(){return false}}});if(this.field)b[0].defaultValue=this.field.name}else{for(var h=0;h<d.length;h++){var i=d[h];f=this.getField(i);if(f.canFilter!=false)if(this.showFieldTitles){g=(g=f.title)?g:i;a[i]=g}else a[i]=i}b[0].valueMap=a;b[0].defaultValue=isc.firstKey(a)}this.fieldPicker=b[0];f=b[0];g=b[1];if(!this.fieldName){if(c&&
c.fieldName)if(this.fieldDataSource)f.defaultValue=c.fieldName;else if(d.contains(c.fieldName))f.defaultValue=c.fieldName;else{isc.logWarn("Criterion specified field "+c.fieldName+", which is not in the record. Using the first record field ("+a?isc.firstKey(a):d[0]+") instead");f.defaultValue=a?isc.firstKey(a):d[0]}e=f.defaultValue}if(e){a=(f=this.field||this.getField(e))?this.getFieldOperatorMap(f,false,"criteria",true):null;if(g.valueMap=a)g.defaultValue=c&&c.operator?c.operator:isc.firstKey(a);
this.$74o=e;d=this.getSearchOperator(g.defaultValue);if(!d&&a.length>0){isc.logWarn("Criterion specified unknown operator "+(c?c.operator:"[null criterion]")+". Using the first valid operator ("+isc.firstKey(a)+") instead");g.defaultValue=isc.firstKey(a);d=this.getSearchOperator(g.defaultValue)}f=this.buildValueItemList(f,d);if(c){if(c.value!=null&&f.containsProperty("name","value"))f.find("name","value").defaultValue=c.value;if(c.start!=null&&f.containsProperty("name","start"))f.find("name","start").defaultValue=
c.start;if(c.end!=null&&f.containsProperty("name","end"))f.find("name","end").defaultValue=c.end}f&&b.addList(f)}else g.disabled=true;this.addAutoChild("clause",{flattenItems:this.flattenItems,items:b});this.fieldPicker=this.clause.getItem("fieldName");this.operatorPicker=this.clause.getItem("operator")}this.addMembers([this.removeButton,this.clause]);if(this.fieldPicker&&this.fieldPicker.type=="staticText")this.fieldPicker.prompt=this.fieldPicker.getValue()},isc.A.buildValueItemList=function(a,b){b==
null&&this.logWarn("buildValueItemList passed null operator");if(a!=null){for(var c=a.name,d=b?b.valueType:"text",e=isc.SimpleType.getType(a.type)||isc.SimpleType.getType("text"),f=[],g=null;e.inheritsFrom;)e=isc.SimpleType.getType(e.inheritsFrom);e=e.name;if(isc.isA.FilterBuilder(this.creator)){g=this.creator.getEditorType(c,b.ID);if(g!=null)e=g}if(d!="valueSet"){if(d=="fieldType"||d=="custom"){g=null;if(d=="custom"&&b&&b.editorType)g=b.editorType;c=isc.addProperties({type:e,name:a.name,showTitle:false,
width:this.valueItemWidth,editorType:g,changed:function(){this.form.creator.valueChanged(this,this.form)}},this.getValueFieldProperties(a.type,c));c=this.combineFieldData(c,a);c.name="value";if(a.type=="enum")c=isc.addProperties(c,{valueMap:a.valueMap});if(e=="boolean")c=isc.addProperties(c,{defaultValue:false});if(a.editorType=="SelectItem"||a.editorType=="ComboBoxItem"){if(a.editorProperties!=null){e=a.editorProperties;c=isc.addProperties(c,{optionDataSource:e.optionDataSource?e.optionDataSource:
this.getDataSource(),valueField:e.valueField?e.valueField:a.name,displayField:e.displayField?e.displayField:a.name})}}else if(a.editorProperties)c=isc.addProperties({},c,a.editorProperties);f.add(c)}else if(d=="fieldName"){e={type:"select",name:"value",showTitle:false,width:this.valueItemWidth,textMatchStyle:this.fieldPicker.textMatchStyle,changed:function(){this.form.creator.valueChanged(this,this.form)}};if(this.fieldDataSource)e=isc.addProperties(e,{type:"ComboBoxItem",completeOnTab:true,optionDataSource:this.fieldDataSource,
valueField:"name",displayField:this.showFieldTitles?"title":"name",pickListProperties:{reusePickList:function(){return false}}});else{d=this.getFieldNames(true);d.remove(c);g={};for(var h=0;h<d.length;h++){var i=d[h];if(this.showFieldTitles){var j=this.getField(i).title;j=j?j:i;g[i]=j}else g[i]=i}e=isc.addProperties(e,{valueMap:g})}f.add(isc.addProperties(e,this.getValueFieldProperties(a.type,c)))}else if(d=="valueRange"){e=this.combineFieldData(isc.addProperties({type:e,showTitle:false,width:this.valueItemWidth,
changed:function(){this.form.creator.valueChanged(this,this.form)}},this.getValueFieldProperties(a.type,c)),a);f.addList([isc.addProperties({},e,{name:"start"}),isc.addProperties({type:"staticText",name:"rangeSeparator",showTitle:false,width:1,defaultValue:this.rangeSeparator,shouldSaveValue:false,changed:function(){this.form.creator.valueChanged(this,this.form)}},this.getValueFieldProperties(a.type,c)),isc.addProperties({},e,{name:"end"})])}if(this.validateOnChange)for(h=0;h<f.length;h++)isc.addProperties(f[h],
{blur:function(k,l){if(!k.creator.itemsInError)k.creator.itemsInError=[];if(k.validate(null,null,true))k.creator.itemsInError.contains(l)&&k.creator.itemsInError.remove(l);else{l.focusInItem();k.creator.itemsInError.contains(l)||k.creator.itemsInError.add(l)}}});for(h=0;h<f.length;h++)f[h].showIf!=null&&delete f[h].showIf;return f}}},isc.A.getValueFieldProperties=function(){},isc.A.remove=function(){this.markForDestroy()},isc.A.getValues=function(){return this.clause.getValues()},isc.A.getFieldName=
function(){return this.fieldPicker.getValue()||this.fieldName},isc.A.getCriterion=function(){if(!this.clause)return null;var a=this.clause,b=this.getFieldName(),c=this.operatorPicker.getValue(),d=a.getField("value"),e=a.getField("start"),f=a.getField("end");a=a.getValues();if(isc.isA.String(c))c=this.getSearchOperator(c);if(c!=null){if(c.getCriterion&&isc.isA.Function(c.getCriterion))if(d)a=c.getCriterion(b,d);else{d=c.getCriterion(b,e);f=c.getCriterion(b,f);a.fieldName=d.fieldName;a.operator=d.operator;
delete a.value;a.start=d.value;a.end=f.value}if(this.fieldName)a.fieldName=this.fieldName;b=this.getDataSource().getField(b);if(isc.isA.Date(a.value)&&(!b||!isc.SimpleType.inheritsFrom(b.type,"datetime")))a.value.logicalDate=true;if(!c||c.valueType!="none"&&c.valueType!="valueRange"&&(a.value==null||isc.isA.String(a.value)&&a.value==""))return null;return a}},isc.A.setDefaultFocus=function(){this.clause&&isc.isA.Function(this.clause.focusInItem)&&this.clause.focusInItem("fieldName")},isc.A.validate=
function(){return this.clause?this.clause.validate(null,null,true):true},isc.A.itemChanged=function(){this.creator&&isc.isA.Function(this.creator.itemChanged)&&this.creator.itemChanged()},isc.A.valueChanged=function(){},isc.A.fieldNameChanged=function(){this.clause.getItem("operator").disabled=false;this.updateFields()},isc.A.removeValueFields=function(){if(this.clause){var a=this.clause;a.getItem("value")&&a.removeItem("value");a.getItem("rangeSeparator")&&a.removeItem("rangeSeparator");a.getItem("start")&&
a.removeItem("start");a.getItem("end")&&a.removeItem("end")}},isc.A.operatorChanged=function(){if(this.clause){var a=this.clause,b=this.fieldName||a.getValue("fieldName");if(b!=null){b=this.getField(b);var c=this.getSearchOperator(a.getValue("operator"));this.removeValueFields();b=this.buildValueItemList(b,c);a.addItems(b);if((a=a.getItem("value"))&&(a.getValueMap()&&a.$193&&!a.$193(a.getValue())||a.optionDataSource||!this.retainValuesAcrossFields))a.clearValue()}}},isc.A.updateFields=function(){if(this.clause){var a=
this.clause,b=this.$74o,c=this.fieldName||a.getValue("fieldName");if(c!=null){c=this.getField(c);b=this.getField(b);if(c){var d=a.getValue("operator");a.getItem("operator").setValueMap(this.getFieldOperatorMap(c,false,"criteria",true));if(d==null||a.getValue("operator")!=d){a.getValue("operator")==null&&a.getItem("operator").setValue(a.getItem("operator").getFirstOptionValue());d=a.getValue("operator")}d=this.getSearchOperator(d);var e;if(a.getItem("value"))e=a.getItem("value").type!=(c.type||"text");
this.removeValueFields();a.addItems(this.buildValueItemList(c,d));if(e)a.clearValue("value");else{e=a.getItem("value");(c.valueMap||c.optionDataSource||b&&(b.valueMap||b.optionDataSource)||!this.retainValuesAcrossFields)&&e.clearValue()}a.getItem("start")&&a.setValue("start",null);a.getItem("end")&&a.setValue("end",null);this.$74o=c.name}}}},isc.A.getFieldOperators=function(a){a=this.getField(a);return this.getPrimaryDS().getFieldOperators(a)});isc.B._maxIndex=isc.C+23;isc.FilterClause.registerStringMethods({remove:""});
isc.defineClass("FilterBuilder","Layout");isc.A=isc.FilterBuilder;isc.A.missingFieldPrompt="[missing field definition]";isc.A=isc.FilterBuilder;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getFilterDescription=function(a,b){isc.isA.DataSource(b)||(b=isc.DS.getDataSource(b));if(!b)return"No dataSource";var c="";if(a.criteria&&isc.isAn.Array(a.criteria))for(var d=a.operator,e=a.criteria,f=0;f<e.length;f++){var g=e[f];if(f>0)c+=" "+d+" ";
if(g.criteria&&isc.isAn.Array(g.criteria)){c+="(";c+=isc.FilterBuilder.getFilterDescription(g,b);c+=")"}else c+=isc.FilterBuilder.getCriterionDescription(g,b)}else c+=isc.FilterBuilder.getCriterionDescription(a,b);return c},isc.A.getCriterionDescription=function(a,b){isc.isA.DataSource(b)||(b=isc.DS.getDataSource(b));if(!b)return"No DataSource";var c=a.fieldName,d=a.operator,e=a.value,f=a.start,g=a.end,h=b.getField(c),i=b.getSearchOperator(d),j=b.getFieldOperatorMap(h,true,i.valueType,false),k="";
if(h)k=(h.title?h.title:c)+" ";else{if(a.criteria&&isc.isAn.Array(a.criteria)){isc.logWarn("FilterBuilder.getCriterionDescription: Passed an AdvancedCriteria - returning through getFilterDescription.");return isc.FilterBuilder.getFilterDescription(a,b)}k=c+" "+isc.FilterBuilder.missingFieldPrompt+" ";isc.logWarn("FilterBuilder.getCriterionDescription: No such field '"+c+"' in DataSource '"+b.ID+"'.")}switch(d){case "notEqual":case "lessThan":case "greaterThan":case "lessOrEqual":case "greaterOrEqual":case "between":case "notNull":k+=
"is "+j[d]||d;break;case "equals":k+="is equal to";break;case "notEqual":k+="is not equal to";break;default:k+=j[d]||d}if(i.valueType=="valueRange")k+=" "+f+" and "+g;else if(d!="notNull")k+=" "+e;return k});isc.B._maxIndex=isc.C+2;isc.A=isc.FilterBuilder.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.vertical=false;isc.A.vPolicy="none";isc.A.height=1;isc.A.defaultWidth=400;isc.A.fieldPickerDefaults={type:"SelectItem",name:"fieldName",
textMatchStyle:"startsWith",showTitle:false,changed:function(){this.form.creator.fieldNameChanged(this.form)}};isc.A.showFieldTitles=true;isc.A.validateOnChange=true;isc.A.showRemoveButton=true;isc.A.removeButtonPrompt="Remove";isc.A.removeButtonDefaults={_constructor:isc.ImgButton,width:18,height:18,layoutAlign:"center",src:"[SKIN]/actions/remove.png",showRollOver:false,showDown:false,showDisabled:false,click:function(){this.creator.removeButtonClick(this.clause)}};isc.A.showAddButton=true;isc.A.addButtonPrompt=
"Add";isc.A.addButtonDefaults={_constructor:isc.ImgButton,autoParent:"buttonBar",width:18,height:18,src:"[SKIN]/actions/add.png",showRollOver:false,showDown:false,click:function(){this.creator.addButtonClick(this.clause)}};isc.A.buttonBarDefaults={_constructor:isc.HStack,autoParent:"clauseStack",membersMargin:4,defaultLayoutAlign:"center",height:1};isc.A.retainValuesAcrossFields=true;isc.A.topOperator="and";isc.A.radioOptions=["and","or","not"];isc.A.topOperatorAppearance="bracket";isc.A.radioOperatorFormDefaults=
{_constructor:isc.DynamicForm,autoParent:"clauseStack",height:1,items:[{name:"operator",type:"radioGroup",showTitle:false,vertical:false,width:250,changed:function(a,b,c){a.creator.topOperatorChanged(c)}}]};isc.A.topOperatorFormDefaults={height:1,width:80,numCols:1,colWidths:["*"],layoutAlign:"center",_constructor:isc.DynamicForm,items:[{name:"operator",type:"select",showTitle:false,width:"*",changed:function(a,b,c){a.creator.topOperatorChanged(c)}}]};isc.A.defaultSubClauseOperator="or";isc.A.matchAllTitle=
"Match All";isc.A.matchNoneTitle="Match None";isc.A.matchAnyTitle="Match Any";isc.A.clauseStackDefaults={_constructor:isc.VStack,height:1,membersMargin:1,animateMembers:true,animateMemberTime:150};isc.A.clauseConstructor="FilterClause";isc.A.rangeSeparator="and";isc.A.subClauseButtonTitle="+()";isc.A.subClauseButtonPrompt="Add Subclause";isc.A.subClauseButtonDefaults={_constructor:"IButton",autoParent:"buttonBar",autoFit:true,click:function(){this.creator.addSubClause(this.clause)}};isc.A.bracketDefaults=
{styleName:"bracketBorders",width:10};isc.A.$10j="Enter";isc.B.push(isc.A.setDataSource=function(a){if(isc.DataSource.get(this.dataSource).ID!=isc.DataSource.get(a).ID){this.dataSource=a;this.clearCriteria()}},isc.A.addButtonClick=function(){this.addNewClause()},isc.A.removeButtonClick=function(a){a&&this.removeClause(a)},isc.A.removeClause=function(a){this.clauses.remove(a);this.clauseStack&&this.clauseStack.hideMember(a,function(){a.destroy()});this.updateFirstRemoveButton()},isc.A.updateFirstRemoveButton=
function(){var a=this.clauses[0];if(a&&a.removeButton)if(this.clauses.length==1&&!this.allowEmpty){a.removeButton.disable();a.removeButton.setOpacity(50)}else if(this.clauses.length>1){a.removeButton.enable();a.removeButton.setOpacity(100)}},isc.A.setTopOperator=function(a){this.topOperator=a;var b=this.topOperatorAppearance;if(b=="bracket")this.topOperatorForm.setValue("operator",a);else b=="radio"&&this.radioOperatorForm.setValue("operator",a)},isc.A.topOperatorChanged=function(a){this.topOperator=
a},isc.A.getPrimaryDS=function(){if(this.dataSource)return this.getDataSource();else if(this.fieldDataSource)return this.fieldDataSource},isc.A.initWidget=function(){this.Super("initWidget",arguments);if(this.fieldDataSource&&this.criteria)this.$75v=true;this.addButtonDefaults.prompt=this.addButtonPrompt;this.removeButtonDefaults.prompt=this.removeButtonPrompt;this.subClauseButtonDefaults.prompt=this.subClauseButtonPrompt;this.subClauseButtonDefaults.title=this.subClauseButtonTitle;if(this.showSubClauseButton==
void 0)this.showSubClauseButton=this.topOperatorAppearance!="radio";this.clauses=[];var a=this.topOperatorAppearance;if(isc.isA.String(this.fieldDataSource))this.fieldDataSource=isc.DS.get(this.fieldDataSource);if(isc.isA.String(this.dataSource))this.dataSource=isc.DS.get(this.dataSource);var b=this.getPrimaryDS().getTypeOperatorMap("text",true,"criteria"),c=[],d={and:this.matchAllTitle,or:this.matchAnyTitle,not:this.matchNoneTitle},e;for(e in b)c.add(e);if(a=="bracket"){if(this.showTopRemoveButton)this.addMember(this.removeButton=
this.createAutoChild("removeButton",{click:function(){this.creator.parentClause.removeButtonClick(this.creator)}}));this.addAutoChild("topOperatorForm");this.topOperatorForm.items[0].valueMap=b;this.topOperatorForm.items[0].defaultValue=this.topOperator;this.addAutoChild("bracket")}this.addAutoChild("clauseStack");this.clauseStack.hide();if(a=="radio"){this.addAutoChild("radioOperatorForm");a={};for(b=0;b<this.radioOptions.length;b++)a[this.radioOptions[b]]=d[this.radioOptions[b]];this.radioOperatorForm.items[0].valueMap=
a;this.radioOperatorForm.items[0].defaultValue=this.topOperator}this.addAutoChildren(["buttonBar","addButton","subClauseButton"]);this.stripNullCriteria(this.criteria);this.setCriteria(this.criteria)},isc.A.addNewClause=function(a,b){return this.$74e(this.createAutoChild("clause",{visibility:"hidden",flattenItems:true,criterion:a,dataSource:this.dataSource,validateOnChange:this.validateOnChange,showFieldTitles:this.showFieldTitles,showRemoveButton:this.showRemoveButton,removeButtonPrompt:this.removeButtonPrompt,
retainValuesAcrossFields:this.retainValuesAcrossFields,fieldDataSource:this.fieldDataSource,field:b,fieldData:this.fieldData,fieldPickerDefaults:this.fieldPickerDefaults,fieldPickerProperties:this.fieldPickerProperties,remove:function(){this.creator.removeClause(this)},fieldNameChanged:function(){this.Super("fieldNameChanged",arguments);this.creator.fieldNameChanged(this)}}))},isc.A.addClause=function(a){if(!a)return a;var b=this;a.fieldDataSource=this.fieldDataSource;a.remove=function(){b.removeClause(this)};
a.fieldNameChanged=function(){this.Super("fieldNameChanged",arguments);b.fieldNameChanged(this)};return this.$74e(a)},isc.A.$74e=function(a){this.clauses.add(a);var b=this.clauseStack,c=Math.max(0,b.getMemberNumber(this.buttonBar));b.addMember(a,c);b.showMember(a,function(){a.setDefaultFocus()});this.updateFirstRemoveButton();return a},isc.A.getChildFilters=function(){for(var a=[],b=0;b<this.clauses.length;b++){var c=this.clauses[b];isc.isA.FilterBuilder(c)&&a.add(c)}return a},isc.A.getFilterDescription=
function(){return isc.FilterBuilder.getFilterDescription(this.getCriteria(),this.dataSource)},isc.A.validate=function(){for(var a=true,b=0;b<this.clauses.length;b++)this.clauses[b].validate(null,null,true)||(a=false);return a},isc.A.getFieldOperators=function(a){a=this.getPrimaryDS().getField(a);return this.getPrimaryDS().getFieldOperators(a)},isc.A.getValueFieldProperties=function(){},isc.A.childResized=function(){this.Super("childResized",arguments);this.clauseStack&&this.bracket&&this.bracket.setHeight(this.clauseStack.getVisibleHeight())},
isc.A.draw=function(){this.Super("draw",arguments);this.clauseStack&&this.bracket&&this.bracket.setHeight(this.clauseStack.getVisibleHeight())},isc.A.resized=function(){this.clauseStack&&this.bracket&&this.bracket.setHeight(this.clauseStack.getVisibleHeight())},isc.A.addSubClause=function(a){var b;if(a)b=a.operator;var c=this.createAutoChild("subClause",{dataSource:this.dataSource,parentClause:this,showTopRemoveButton:true,topOperatorAppearance:"bracket",topOperator:b||this.defaultSubClauseOperator,
clauseConstructor:this.clauseConstructor,fieldPickerDefaults:this.fieldPickerDefaults,fieldPickerProperties:this.fieldPickerProperties,fieldDataSource:this.fieldDataSource,fieldData:this.fieldData,visibility:"hidden",saveOnEnter:this.saveOnEnter,validateOnChange:this.validateOnChange,dontCreateEmptyChild:a!=null},this.Class);this.clauses.add(c);this.clauseStack.addMember(c,this.clauses.length-1);this.clauseStack.showMember(c,function(){c.topOperatorForm.focusInItem("operator");c.bracket.setHeight(c.getVisibleHeight())});
this.updateFirstRemoveButton();return c},isc.A.getCriteria=function(){if(this.$75v)return this.criteria;for(var a={_constructor:"AdvancedCriteria",operator:this.topOperator,criteria:[]},b=0;b<this.clauses.length;b++){var c=this.clauses[b],d=false;if(isc.isA.FilterBuilder(c))c=c.getCriteria();else{c=c.getCriterion();d=c==null}d||a.criteria.add(c)}return isc.clone(a)},isc.A.filterReady=function(){},isc.A.setCriteria=function(a){this.clearCriteria(true);this.stripNullCriteria(a);if(!this.$76t&&this.fieldDataSource&&
a){if(isc.isA.String(this.fieldDataSource))this.fieldDataSource=isc.DS.getDataSource(this.fieldDataSource);var b=this,c=this.fieldDataSource.getCriteriaFields(a),d={};if(c&&c.length>0){d={_constructor:"AdvancedCriteria",operator:"or",criteria:[]};for(f=0;f<c.length;f++){var e=c[f];(this.fieldData?this.fieldData[e]:null)||(d.criteria[d.criteria.length]={fieldName:"name",operator:"equals",value:e})}if(d.criteria.length!=0){this.$76t=true;this.fieldDataSource.fetchData(d,function(g){b.fetchFieldsReply(g,
a)});return}}}if(a){this.getPrimaryDS().isAdvancedCriteria(a)||(a=isc.DataSource.convertCriteria(a,"substring"));this.setTopOperator(a.operator);if((!a.criteria||a.criteria.length==0)&&!this.radioOptions.contains(a.operator)){this.logWarn("Found top-level AdvancedCriteria with no sub-criteria. Converting to a top-level 'and' with a single sub-criterion");this.setTopOperator(this.topOperator);this.addNewClause(a)}else{for(var f=0;f<a.criteria.length;f++){c=a.criteria[f];this.addCriterion(c,this.fieldData?
this.fieldData[c.fieldName]:null)}this.clauses.length==0&&!this.allowEmpty&&this.addNewClause()}delete this.$75v;this.$76t=false}else!this.allowEmpty&&!this.dontCreateEmptyChild&&this.addNewClause();this.clauseStack.show();this.redraw();this.filterReady()},isc.A.stripNullCriteria=function(a){if(a&&a.criteria&&a.criteria.length>0)for(var b=a.criteria.length-1;b>=0;b--)if(a.criteria[b]==null)a.criteria.removeAt(b);else a.criteria[b].criteria&&this.stripNullCriteria(a.criteria[b])},isc.A.fetchFieldsReply=
function(a,b){if(this.fieldData){var c=isc.getValues(this.fieldData);c.addList(a.data);this.fieldData=c.makeIndex("name")}else this.fieldData=a.data.makeIndex("name");this.setCriteria(b)},isc.A.clearCriteria=function(a){var b=this.clauseStack?this.clauseStack.animateMembers:null;if(this.clauseStack)this.clauseStack.animateMembers=false;for(;this.clauses.length>0;)this.removeClause(this.clauses[0]);!a&&!this.allowEmpty&&this.addNewClause();if(this.clauseStack)this.clauseStack.animateMembers=b},isc.A.addCriterion=
function(a,b){if(a.criteria)for(var c=this.addSubClause(a),d=0;d<a.criteria.length;d++){b=this.fieldData?this.fieldData[a.criteria[d].fieldName]:null;c.addCriterion(a.criteria[d],b)}else this.addNewClause(a,b)},isc.A.handleKeyPress=function(a,b){if(a.keyName==this.$10j)if(this.saveOnEnter)if(b.firedOnTextItem)if(!this.creator&&this.search){this.search(this.getCriteria());return isc.EH.STOP_BUBBLING}},isc.A.itemChanged=function(){if(this.creator&&isc.isA.Function(this.creator.itemChanged))this.creator.itemChanged();
else!this.creator&&isc.isA.Function(this.filterChanged)&&this.filterChanged()},isc.A.fieldNameChanged=function(){},isc.A.getEditorType=function(a,b){var c=this.getPrimaryDS(),d,e=c.getSearchOperator(b);if(e.editorType)return e.editorType;if(e.getEditorType&&isc.isA.Function(e.getEditorType))return e.getEditorType();if(c)d=c.getField(a);if(d&&(b=="equals"||b=="notEqual"||b=="lessThan"||b=="greaterThan"||b=="between"||b=="betweenInclusive"||b=="greaterOrEqual"||b=="lessOrEqual"))if(d&&isc.SimpleType.inheritsFrom(d.type,
"date"))return"RelativeDateItem";return d?isc.FormItemFactory.getItemClassName({},d.type,null):isc.FormItemFactory.getItemClassName({},"text",null)});isc.B._maxIndex=isc.C+32;isc.FilterBuilder.registerStringMethods({search:"criteria",filterChanged:""})}isc.screenReader=false;isc.A=isc.Canvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.addPrimaryRole=function(){if(!(!isc.Browser.isMoz||isc.Browser.geckoVersion<20051111))if(this.waiRole){var a=
this.getClipHandle();isc.Canvas.setWAIRole(a,this.waiRole);var b=this.waiStateProps;if(!b)for(var c in b){var d=this[b[c]];d!=null&&isc.Canvas.setWAIState(a,c,d)}}},isc.A.addContentRoles=function(){});isc.B._maxIndex=isc.C+2;isc.A=isc.Canvas;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.waiStateNS="http://www.w3.org/2005/07/aaa";isc.A.xhtml2NS="http://www.w3.org/TR/xhtml2";isc.B.push(isc.A.setWAIRole=function(a,b){a.setAttributeNS(this.xhtml2NS,"role",
"wairole:"+b)},isc.A.setWAIState=function(a,b,c){a.setAttributeNS(this.waiStateNS,b,c)},isc.A.setWAIStates=function(a,b){for(var c in b)this.setWAIState(a,c,b[c])});isc.B._maxIndex=isc.C+3;if(isc.DynamicForm){isc.A=isc.FormItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.addContentRoles=function(){if(!(!isc.Browser.isMoz||isc.Browser.geckoVersion<20051111))if(this.$kk()){var a=this.getFocusElement();a!=null&&isc.Canvas.setWAIRole(a,
this.waiRole)}});isc.B._maxIndex=isc.C+1}if(isc.GridRenderer){isc.A=isc.GridRenderer.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.addContentRoles=function(){if(!(!isc.Browser.isMoz||isc.Browser.geckoVersion<20051111)){var a=this.parentElement;if(!(!a||!a.rowRole&&!a.getRowRole))for(var b=this.$252;b<=this.$253;b++){var c=b,d=this.getTableElement(c),e=a.getRowRole?a.getRowRole(c):a.rowRole;if(e&&d){isc.Canvas.setWAIRole(d,
e);if(a.getRowWAIState)(e=a.getRowWAIState(c))&&isc.Canvas.setWAIStates(d,e)}this.addCellRoles(c)}}},isc.A.addCellRoles=function(a){var b=this.parentElement;if(!(!b||!b.cellRole&&!b.getCellRole))for(var c=this.$254;c<=this.$255;c++){var d=this.getTableElement(a,c),e=b.getCellRole?b.getCellRole(a,c):b.cellRole;if(e){isc.Canvas.setWAIRole(d,e);if(b.getCellWAIState)(e=b.getCellWAIState(a,c))&&isc.Canvas.setWAIStates(d,e)}}});isc.B._maxIndex=isc.C+2;isc.A=isc.ListGrid.getPrototype();isc.B=isc._allFuncs;
isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.waiRole="list";isc.A.rowRole="listitem";isc.B.push(isc.A.getRowRole=function(a){if((a=this.getCellRecord(a))&&a.isSeparator)return"separator";return this.rowRole},isc.A.getRowWAIState=function(a){this.getRecord(a);if(this.selection&&this.selection.isSelected&&this.selection.isSelected(a))return{selected:true}});isc.B._maxIndex=isc.C+2;isc.A=isc.TreeGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;
isc.D[isc.C]=isc.A.Class;isc.A.waiRole="tree";isc.A.rowRole="treeitem";isc.B.push(isc.A.getRowRole=function(a){if(!isc.isA.Tree(this.data))return this.rowRole;return this.data.isFolder(this.getRecord(a))?"group":this.rowRole},isc.A.getRowWAIState=function(a){a=this.getRecord(a);var b=this.data,c=!!(this.selection&&this.selection.isSelected&&this.selection.isSelected(a));if(c||b.isFolder(a)){c={selected:c};if(b.isFolder(a))c.expanded=!!b.isOpen(a);return c}});isc.B._maxIndex=isc.C+2;isc.A=isc.Menu.getPrototype();
isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.waiRole="menu";isc.B.push(isc.A.getRowRole=function(a){a=this.getItem(a);if(!a||a.isSeparator)return"separator";if(a.checked||a.checkIf||a.checkable)return"menuitemcheckable";if(a.radio)return"menuitemradio";return"menuitem"},isc.A.getRowState=function(a){if(this.hasSubmenu(this.getItem(a)))return{haspopup:true}});isc.B._maxIndex=isc.C+2;isc.A=isc.MenuButton.getPrototype();isc.A.waiRole="menu";isc.A=isc.MenuBar.getPrototype();
isc.A.waiRole="menubar"}(function(){var a={Button:"button",StretchImgButton:"button",ImgButton:"button",Label:"label",SectionHeader:"heading",ImgSectionHeader:"heading",CheckboxItem:"checkbox",Slider:"slider",ComboBoxItem:"combobox",SelectItem:"listbox",Window:"dialog",Toolbar:"toolbar",TabBar:"tablist",PaneContainer:"tabpanel",ImgTab:"tab",EdgedCanvas:"presentation",BackMask:"presentation"},b;for(b in a){var c=isc.ClassFactory.getClass(b);c&&c.addProperties({waiRole:a[b]})}})();if(isc.ListGrid!=
null){isc.ClassFactory.defineClass("DataSourceEditor","VLayout");isc.A=isc.DataSourceEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.overflow="visible";isc.A.mainEditorDefaults={_constructor:"ComponentEditor",autoDraw:false,numCols:4,overflow:"visible",backgroundColor:"black",dataSource:"DataSource",fields:[{name:"ID",required:true},{type:"section",defaultValue:"XPath Binding",showIf:"values.dataFormat != 'iscServer'",itemIds:["dataURL",
"selectBy","recordXPath","recordName"]},{name:"dataURL",showIf:"values.dataFormat != 'iscServer'"},{name:"selectBy",title:"Select Records By",shouldSaveValue:false,valueMap:{tagName:"Tag Name",xpath:"XPath Expression"},defaultValue:"xpath",redrawOnChange:true,showIf:"values.dataFormat == 'xml'"},{name:"recordXPath",showIf:"values.dataFormat != 'iscServer' && form.getItem('selectBy').getValue() == 'xpath'"},{name:"recordName",showIf:"values.dataFormat == 'xml' && values.selectBy == 'tagName'"},{type:"section",
defaultValue:"SQL Binding",showIf:"values.serverType == 'sql' || values.serverType == 'hibernate'",itemIds:["tableName","dbName"]},{name:"tableName",showIf:"values.serverType == 'sql' || values.serverType == 'hibernate'"},{name:"dbName",showIf:"values.serverType == 'sql'"},{type:"section",defaultValue:"Record Titles",sectionExpanded:false,itemIds:["title","pluralTitle","titleField"]},{name:"title"},{name:"pluralTitle"},{name:"titleField"}]};isc.A.fieldEditorDefaults={_constructor:"ListEditor",autoDraw:false,
inlineEdit:true,dataSource:"DataSourceField",saveLocally:true,gridButtonsOrientation:"right",backgroundColor:"white",fields:[{name:"name",treeField:true},{name:"title"},{name:"type",width:60},{name:"required",title:"Req.",width:40,canToggle:true},{name:"hidden",width:40},{name:"length",width:60},{name:"primaryKey",title:"is PK",width:40}],formConstructor:isc.ComponentEditor,formProperties:{numCols:4,initialGroups:10},formFields:[{name:"name",canEdit:false},{name:"type"},{name:"title"},{name:"primaryKey"},
{name:"valueXPath",colSpan:2,showIf:function(){var a=this.form.creator;return(a=a?a.creator.mainEditor:null)&&a.getValues().dataFormat!="iscServer"}},{type:"section",defaultValue:"Value Constraints",itemIds:["required","length","valueMap"]},{name:"valueMap",rowSpan:2},{name:"required"},{name:"length"},{type:"section",defaultValue:"Component Binding",itemIds:["hidden","detail","canEdit"]},{name:"canEdit"},{name:"hidden"},{name:"detail"},{type:"section",defaultValue:"Relations",sectionExpanded:false,
itemIds:["foreignKey","rootValue"]},{name:"foreignKey"},{name:"rootValue",showTitle:false,colSpan:4}],gridDefaults:{editEvent:"click",listEndEditAction:"next",autoParent:"gridLayout",selectionType:isc.Selection.SINGLE,recordClick:"this.creator.recordClick(record)",modalEditing:true,editorEnter:"if (this.creator.moreButton) this.creator.moreButton.enable()",selectionChanged:function(){this.anySelected()&&this.creator.moreButton&&this.creator.moreButton.enable()},contextMenu:{data:[{title:"Remove",
click:"target.creator.removeRecord()"}]},styleName:"rightBorderOnly",validateByCell:true,leaveScrollbarGap:false,alternateRecordStyles:true,canRemoveRecords:true,canEdit:true,canEditCell:function(a,b){var c=this.getRecord(a),d=this.getField(b),e=d[this.fieldIdProperty],f=e=="name"||e=="title";if(isc.isA.TreeGrid(this)){if(c.isFolder&&!(f||e=="required"||e=="hidden"))return false}else if(this.getDataSource().fieldIsComplexType(d)&&!f)return false;return this.Super("canEditCell",arguments)}},newRecord:function(){if(this.creator.canEditChildSchema){var a=
this.grid.data,b=this.getSelectedNode();if(!b)b=a.root;a=a.getParent(b);if(b){b.isFolder||(b=a);this.addNode({name:this.getNextUniqueFieldName(b,"field"),id:this.getNextUnusedNodeId(),parentId:b?b.id:null},b)}}else this.Super("newRecord",arguments)},getSelectedNode:function(){return this.grid.getSelectedRecord()},addNode:function(a){this.grid.data.linkNodes([a])},getNextUniqueFieldName:function(a,b){var c=a?a.fields||[]:[],d=1;if(!b||b.length==0)b="field";if(c&&c.length>0)for(var e=0;e<c.length;e++){var f=
c.get(e).name;if(f.substring(0,b.length)==b&&f.length>b.length){f=parseInt(f.substring(b.length));if(!isNaN(f)&&f>=d)d=f+1}}return b+d},getNextUnusedNodeId:function(){for(var a=this.grid.data,b=1;b<1E4;b++)if(!a.findById(b))return b;return 1}};isc.A.newButtonDefaults={_constructor:isc.AutoFitButton,autoParent:"gridButtons",title:"New Field",click:"this.creator.newRecord()"};isc.A.moreButtonDefaults={_constructor:isc.AutoFitButton,autoParent:"gridButtons",click:"this.creator.editMore()",disabled:true};
isc.A.buttonLayoutDefaults={_constructor:"HLayout",width:"100%"};isc.A.saveButtonDefaults={_constructor:"IButton",autoDraw:false,title:"Save",autoFit:true,autoParent:"buttonLayout",click:function(){var a=true;if(this.creator.showMainEditor!=false)a=this.creator.mainEditor.validate();a&&this.creator.fieldEditor.validate()&&this.creator.save()}};isc.A.addChildButtonDefaults={_constructor:"IButton",autoDraw:false,title:"Add Child Object",autoFit:true,click:function(){var a=this.creator.fieldEditor,b=
a.grid,c=b.data;b=b.getSelectedRecord()||c.root;var d=c.getParent(b),e={isFolder:true,children:[],multiple:true,childTagName:"item"};if(b){b.isFolder||(b=d);e.name=a.getNextUniqueFieldName(b,"child");e.id=a.getNextUnusedNodeId();e.parentId=b.id;c.linkNodes([e],d);c.openFolder(e)}}};isc.A.mainStackDefaults={_constructor:"SectionStack",overflow:"visible",width:"100%",height:"100%",visibilityMode:"multiple"};isc.A.instructionsSectionDefaults={_constructor:"SectionStackSection",title:"Instructions",expanded:true,
canCollapse:true};isc.A.instructionsDefaults={_constructor:"HTMLFlow",autoFit:true,padding:10};isc.A.mainSectionDefaults={_constructor:"SectionStackSection",title:"DataSource Properties",expanded:true,canCollapse:false};isc.A.fieldSectionDefaults={_constructor:"SectionStackSection",title:"DataSource Fields &nbsp;<span style='color:#BBBBBB'>(click to edit or press New)</span>",expanded:true,canCollapse:false};isc.A.fieldLayoutDefaults={_constructor:"Layout",vertical:true,height:"*"};isc.A.bodyProperties=
{overflow:"auto",backgroundColor:"black",layoutMargin:10};isc.A.canEditChildSchema=false;isc.A.canAddChildSchema=false;isc.B.push(isc.A.editNew=function(a,b,c){if(a.defaults){this.paletteNode=a;this.start(a.defaults,b,true,c)}else this.start(a,b,true,c)},isc.A.editSaved=function(a,b,c){this.start(a,b,false,c)},isc.A.start=function(a,b,c,d){if(d){this.mainStack.showSection(0);this.instructions.setContents(d)}else this.mainStack.hideSection(0);this.mainEditor&&this.mainEditor.clearValues();this.fieldEditor&&
this.fieldEditor.setData(null);this.saveCallback=b;this.logWarn("editing "+(c?"new ":"")+"DataSource: "+this.echo(a));if(!a)return this.show();this.dsClass=a.Class;if(c){if(isc.isA.DataSource(a)){b=a.sfName;a=a.getSerializeableFields();if(b)a.sfName=b;this.logWarn("editing new DataSource from live DS, data: "+this.echo(a))}else a.ID=this.getUniqueDataSourceID();this.$31u(a)}else isc.DMI.callBuiltin({methodName:"loadSharedXML",callback:this.getID()+".$37p(data)",arguments:["DS",a.ID]})},isc.A.getUniqueDataSourceID=
function(){return"newDataSource"},isc.A.$37p=function(a){isc.captureInitData=true;a=isc.eval(a.js);isc.captureInitData=null;a=a.defaults;this.logWarn("captured DS initData: "+this.echo(a));if(a.serverType=="sql")a.dataFormat="iscServer";if(a.recordXPath!=null&&a.dataFormat==null)a.dataFormat="xml";this.$31u(a)},isc.A.$31u=function(a){if(this.mainEditor)this.mainEditor.setValues(a);else this.mainEditorValues=a;var b=a.fields;isc.isAn.Array(b)||(b=isc.getValues(a.fields));if(this.fieldEditor)if(this.canEditChildSchema){this.setupIDs(b,
1,null);a=isc.Tree.create({modelType:"parent",childrenProperty:"fields",titleProperty:"name",idField:"id",nameProperty:"id",root:{id:0,name:"root"},data:b});a.openAll();this.fieldEditor.setData(a)}else this.fieldEditor.setData(b);this.show()},isc.A.setupIDs=function(a,b,c){b=b;var d;b||(b=1);for(var e=0;e<a.length;e++){d=a.get(e);d.parentId=c;d.id=b++;if(d.fields){if(!isc.isAn.Array(d.fields))d.fields=isc.getValues(d.fields);b=this.setupIDs(d.fields,b,d.id)}}return b},isc.A.save=function(){var a=
isc.addProperties({},this.mainEditor?this.mainEditor.getValues():this.mainEditorValues);if(this.canEditChildSchema){var b=this.fieldEditor.grid.data;b=b.getCleanNodeData(b.getRoot(),true).fields;a.fields=this.getExtraCleanNodeData(b)}else a.fields=this.fieldEditor.getData();if(a.serverType=="sql"||a.serverType=="hibernate")if(!a.fields.getProperty("primaryKey").or()){isc.warn("SQL / Hibernate DataSources must have a field marked as the primary key");return}this.doneEditing(a)},isc.A.getExtraCleanNodeData=
function(a){if(a==null)return null;var b=[],c=false;if(!isc.isAn.Array(a)){a=[a];c=true}for(var d=0;d<a.length;d++){var e=a[d],f={},g;for(g in e)if(!(g=="id"||g=="parentId"||g=="isFolder")){f[g]=e[g];if(g==this.fieldEditor.grid.data.childrenProperty&&isc.isAn.Array(f[g]))f[g]=this.getExtraCleanNodeData(f[g])}b.add(f)}if(c)return b[0];return b},isc.A.doneEditing=function(a){var b=this.dsClass||"DataSource",c;if(isc.DS.isRegistered(b))c=isc.DS.get(b);else{c=isc.DS.get("DataSource");a._constructor=b}c=
c.xmlSerialize(a);this.logWarn("saving DS with XML: "+c);isc.DMI.callBuiltin({methodName:"saveSharedXML",arguments:["DS",a.ID,c]});this.fireCallback(this.saveCallback,"dataSource",[isc.ClassFactory.getClass(b).create(a)]);this.saveCallback=null},isc.A.clear=function(){if(this.mainEditor)this.mainEditor.clearValues();else this.mainEditorValues=null;this.fieldEditor.setData([])},isc.A.initWidget=function(){this.Super("initWidget",arguments);this.addAutoChildren(["mainStack","fieldLayout","instructions",
"mainEditor","buttonLayout","saveButton"]);if(this.canAddChildSchema){this.canEditChildSchema=true;this.addAutoChild("addChildButton")}this.addAutoChild("fieldEditor",{gridConstructor:this.canEditChildSchema?isc.TreeGrid:isc.ListGrid,showMoreButton:this.showMoreButton,newButtonTitle:"New Field",newButtonDefaults:this.newButtonDefaults,newButtonProperties:this.newButtonProperties,moreButtonDefaults:this.moreButtonDefaults,moreButtonProperties:this.moreButtonProperties});this.moreButton=this.fieldEditor.moreButton;
this.newButton=this.fieldEditor.newButton;this.canAddChildSchema&&this.fieldEditor.gridButtons.addMember(this.addChildButton);this.fieldLayout.addMembers([this.fieldEditor,this.saveButton]);var a=this.mainStack;a.addSections([isc.addProperties(this.instructionsSectionDefaults,this.instructionsSectionProperties,{items:[this.instructions]})]);a.addSections([isc.addProperties(this.mainSectionDefaults,this.mainSectionProperties,{items:[this.mainEditor]})]);this.showMainEditor==false&&a.hideSection(1);
a.addSections([isc.addProperties(this.fieldSectionDefaults,this.fieldSectionProperties,{items:[this.fieldLayout]})])});isc.B._maxIndex=isc.C+12}isc._moduleEnd=isc._DataBinding_end=isc.timestamp?isc.timestamp():(new Date).getTime();isc.Log&&isc.Log.logIsInfoEnabled("loadTime")&&isc.Log.logInfo("DataBinding module init time: "+(isc._moduleEnd-isc._moduleStart)+"ms","loadTime");delete isc.definingFramework}else window.isc&&isc.Log&&isc.Log.logWarn&&isc.Log.logWarn("Duplicate load of module 'DataBinding'.");if(window.isc&&window.isc.module_Core&&!window.isc.module_Calendar){isc.module_Calendar=1;isc._moduleStart=isc._Calendar_start=isc.timestamp?isc.timestamp():(new Date).getTime();if(isc._moduleEnd&&(!isc.Log||isc.Log&&isc.Log.logIsDebugEnabled("loadTime"))){isc._pTM={message:"Calendar load/parse time: "+(isc._moduleStart-isc._moduleEnd)+"ms",category:"loadTime"};if(isc.Log&&isc.Log.logDebug)isc.Log.logDebug(isc._pTM.message,"loadTime");else if(isc._preLog)isc._preLog[isc._preLog.length]=isc._pTM;else isc._preLog=
[isc._pTM]}isc.definingFramework=true;isc.ClassFactory.defineClass("Calendar","Canvas","DataBoundComponent");isc.A=isc.Calendar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.defaultWidth="100%";isc.A.defaultHeight="100%";isc.A.year=(new Date).getFullYear();isc.A.month=(new Date).getMonth();isc.A.chosenDate=new Date;isc.A.firstDayOfWeek=0;isc.A.baseStyle="calendar";isc.A.dayHeaderBaseStyle="calMonthDayHeader";isc.A.dayBodyBaseStyle="calMonthDayBody";
isc.A.otherDayHeaderBaseStyle="calMonthOtherDayHeader";isc.A.otherDayBodyBaseStyle="calMonthOtherDayBody";isc.A.otherDayBlankStyle="calMonthOtherDayBlank";isc.A.selectedCellStyle="calendarCellSelected";isc.A.eventWindowStyle="eventWindow";isc.A.calMonthEventLinkStyle="calMonthEventLink";isc.A.workdayBaseStyle="calendarWorkday";isc.A.workdayStart="9:00am";isc.A.workdayEnd="5:00pm";isc.A.showWorkday=false;isc.A.workdays=[1,2,3,4,5];isc.A.scrollToWorkday=false;isc.A.nameField="name";isc.A.descriptionField=
"description";isc.A.startDateField="startDate";isc.A.endDateField="endDate";isc.A.leadingDateField="leadingDate";isc.A.trailingDateField="trailingDate";isc.A.eventTypeField="type";isc.A.eventWindowStyleField="eventWindowStyle";isc.A.canEditField="canEdit";isc.A.canDragEventField="canDrag";isc.A.weekEventBorderOverlap=false;isc.A.eventSnapGap=30;isc.A.showQuickEventDialog=true;isc.A.canCreateEvents=true;isc.A.canEditEvents=true;isc.A.canDeleteEvents=true;isc.A.canDragEvents=true;isc.A.showDateChooser=
false;isc.A.disableWeekends=true;isc.A.showWeekends=true;isc.A.showDayHeaders=true;isc.A.showOtherDays=true;isc.A.showControlsBar=true;isc.A.eventAutoArrange=true;isc.A.eventOverlap=true;isc.A.eventOverlapPercent=10;isc.A.showTimelineView=false;isc.A.renderEventsOnDemand=true;isc.A.timelineGranularity="day";isc.A.timelineUnitsPerColumn=1;isc.A.canResizeTimelineEvents=false;isc.A.allowEventOverlap=true;isc.A.sizeEventsToGrid=true;isc.A.dayViewTitle="Day";isc.A.weekViewTitle="Week";isc.A.monthViewTitle=
"Month";isc.A.timelineViewTitle="Timeline";isc.A.eventNameFieldTitle="Event Name";isc.A.saveButtonTitle="Save Event";isc.A.detailsButtonTitle="Edit Details";isc.A.cancelButtonTitle="Cancel";isc.A.previousButtonHoverText="Previous";isc.A.nextButtonHoverText="Next";isc.A.addEventButtonHoverText="Add an event";isc.A.datePickerHoverText="Choose a date";isc.A.invalidDateMessage="From must be before To";isc.A.dayViewConstructor="DaySchedule";isc.A.weekViewConstructor="WeekSchedule";isc.A.monthViewConstructor=
"MonthSchedule";isc.A.timelineViewConstructor="TimelineView";isc.A.mainViewDefaults={_constructor:isc.TabSet,defaultWidth:"80%",defaultHeight:"100%",tabBarAlign:"right",selectedTab:1};isc.A.dateChooserConstructor="DateChooser";isc.A.eventDialogDefaults={_constructor:isc.Window,showHeaderIcon:false,showMinimizeButton:false,showMaximumButton:false,canDragReposition:true,overflow:"visible",bodyProperties:{overflow:"visible"},width:400,height:100};isc.A.eventEditorDefaults={_constructor:isc.DynamicForm,
padding:4,numCols:4,showInlineErrors:false,width:200};isc.A.eventEditorLayoutDefaults={_constructor:isc.Window,showHeaderIcon:false,showShadow:false,showMinimizeButton:false,showMaximumButton:false,canDragReposition:false};isc.A.addEventButtonDefaults={_constructor:isc.ImgButton,title:"",src:"[SKINIMG]actions/add.png",showRollOver:false,showDown:false,showFocused:false,width:16,height:16};isc.A.datePickerButtonDefaults={_constructor:isc.ImgButton,title:"",src:"[SKIN]/controls/date_control.gif",width:16,
height:16,showRollOver:false,showFocused:false};isc.A.controlsBarDefaults={_constructor:isc.HLayout,defaultLayoutAlign:"center",height:25,membersMargin:5};isc.A.previousButtonDefaults={_constructor:isc.ImgButton,title:"",src:"[SKINIMG]actions/back.png",showFocused:false,width:16,height:16,click:"this.creator.previous()",showRollOver:false,showDown:false};isc.A.nextButtonDefaults={_constructor:isc.ImgButton,title:"",src:"[SKINIMG]actions/forward.png",showFocused:false,width:16,height:16,click:"this.creator.next()",
showRollOver:false,showDown:false};isc.A.dateDisplayDefaults={_constructor:isc.Label,wrap:false,width:5,contents:"-"};isc.A.DAY="day";isc.A.WEEK="week";isc.A.MONTH="month";isc.A.dateFormatter=null;isc.A.timeFormatter="toShortPaddedTime";isc.A.$81i=/^\d{4}.\d\d?.\d\d?$/;isc.A.$81j=/^\d\d?.\d\d.\d{4}?$/;isc.B.push(isc.A.initWidget=function(){if(this.chosenDate){this.year=this.chosenDate.getFullYear();this.month=this.chosenDate.getMonth()}if(!this.data)this.data=this.getDefaultData();this.previousButtonDefaults.prompt=
this.previousButtonHoverText;this.nextButtonDefaults.prompt=this.nextButtonHoverText;this.datePickerButtonDefaults.prompt=this.datePickerHoverText;this.addEventButtonDefaults.prompt=this.addEventButtonHoverText;this.$529();this.createChildren();this.$53a();if(!this.initialCriteria&&this.autoFetchData)this.initialCriteria=this.getNewCriteria();this.setData(null);this.invokeSuper(isc.Calendar,"initWidget")},isc.A.autoDetectFieldNames=function(){var a=this.dataSource=isc.DS.getDataSource(this.dataSource),
b=isc.getValues(a.getFields()),c;if(this.fieldIsMissing(this.nameField,a))this.nameField=a.getTitleField();if(this.fieldIsMissing(this.descriptionField,a)){b.sortByProperties(["length"],[false]);c={length:0};for(var d=0;d<b.length;d++){var e=b.get(d);if(!e.type||e.type=="text"||e.type=="string")if(e.length>255&&e.length<1024E3){this.descriptionField=e.name;break}else if(e.length&&e.length<1024E3&&e.length>c.length)c=e;else e.length||c||(c=e)}if(this.fieldIsMissing(this.descriptionField,a)&&c)this.descriptionField=
c.name}if(this.fieldIsMissing(this.startDateField,a)){c=null;for(d=0;d<b.length;d++){e=b.get(d);if(e.type=="date"||e.type=="datetime")if(e.name.toLowerCase().indexOf("start")>=0||e.name.toLowerCase().indexOf("begin")>=0){this.startDateField=e.name;break}else c=e}if(this.fieldIsMissing(this.startDateField,a)&&c)this.startDateField=c.name}if(this.fieldIsMissing(this.endDateField,a)){c=null;for(d=0;d<b.length;d++){e=b.get(d);if(e.type=="date"||e.type=="datetime")if(e.name.toLowerCase().indexOf("end")>=
0||e.name.toLowerCase().indexOf("stop")>=0){this.endDateField=e.name;break}else if(e.name!=this.startDateField)c=e}if(this.fieldIsMissing(this.endDateField,a)&&c)this.endDateField=c.name}},isc.A.fieldIsMissing=function(a,b){return!a||a==""||b&&!b.getField(a)},isc.A.getDefaultData=function(){return[]},isc.A.setData=function(a){if(this.data!=a){if(this.data){this.ignore(this.data,"dataChanged");this.data.$31k&&isc.isA.Function(this.data.destroy)&&this.data.destroy()}if(a)this.data=a;if(this.data){this.observe(this.data,
"dataChanged","observer.dataChanged()");this.hasData()&&this.dataChanged()}}},isc.A.getData=function(){return this.data},isc.A.hasData=function(){return!this.data||isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown()?false:true},isc.A.dataChanged=function(){if(this.$53e){this.logDebug("dataChanged, ignoring","calendar");this.$53e=false}else{this.logDebug("dataChanged, refreshing","calendar");this.refreshSelectedView()}},isc.A.refreshSelectedView=function(){if(this.dayViewSelected()){this.dayView.refreshEvents();
this.monthView&&this.monthView.refreshEvents()}else if(this.weekViewSelected()){this.weekView.refreshEvents();this.monthView&&this.monthView.refreshEvents()}else if(this.monthViewSelected())this.monthView.refreshEvents();else this.timelineViewSelected()&&this.timelineView.refreshEvents()},isc.A.getSelectedView=function(){if(this.dayViewSelected())return this.dayView;else if(this.weekViewSelected())return this.weekView;else if(this.monthViewSelected())return this.monthView;else if(this.timelineViewSelected())return this.timelineView},
isc.A.getCurrentViewName=function(){return this.getSelectedView().viewName},isc.A.setCurrentViewName=function(a){var b=this.mainView.tabs.find("viewName",a);b&&this.mainView.selectTab(b);return a},isc.A.getEventWindowID=function(a){if(!a)return null;var b=this.getDataSource();if(b&&b.getPrimaryKeyFieldNames().length>0){b=b.getPrimaryKeyFields();var c="",d;for(d in b)c+=a[d];return this.$65c[c]}else return a.$65d},isc.A.setEventWindowID=function(a,b){if(!this.$65c)this.$65c=[];var c=this.getDataSource();
if(c&&c.getPrimaryKeyFieldNames().length>0){c=c.getPrimaryKeyFields();var d="",e;for(e in c)d+=a[e];this.$65c[d]=b}else a.$65d=b},isc.A.getDayDiff=function(a,b,c){var d;if(Date.compareDates(a,b)>0){d=new Date(a.getFullYear(),a.getMonth(),a.getDate());a=new Date(b.getFullYear(),b.getMonth(),b.getDate())}else{d=new Date(b.getFullYear(),b.getMonth(),b.getDate());a=new Date(a.getFullYear(),a.getMonth(),a.getDate())}b=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);d=Date.UTC(d.getFullYear(),
d.getMonth(),d.getDate(),0,0,0);d=b-d;if(c){c=Math.floor(d/864E5);d=Math.floor(c/7);b=Date.getWeekendDays();var e=c%7,f=0;a=a.duplicate();a.setDate(a.getDate()-e);for(var g=0;g<e;g++){b.contains(a.getDay())&&f++;a.setDate(a.getDate()+1)}c-=d*2+f}else c=Math.floor(d/864E5);return c},isc.A.getEventLeft=function(a,b){var c=b?this.weekView:this.dayView,d=c.showLabelColumn&&c.labelColumnPosition=="left",e=d?c.labelColumnWidth:0,f=c.getColumnWidth(c.isLabelCol(0)?1:0);if(c.$53i)e=this.getDayDiff(a[this.startDateField],
this.chosenWeekStart,this.showWeekends==false)*f+(d?c.labelColumnWidth:0);this.logIsDebugEnabled("calendar")&&this.logDebug("calendar.getEventLeft() = "+e+" for:"+isc.Log.echoFull(a),"calendar");return e},isc.A.setShowWeekends=function(a){this.showWeekends=a;if(isc.isA.TabSet(this.mainView)){a=this.mainView.getSelectedTabNumber();this.mainView.removeTabs(this.mainView.tabs);this.dayView&&this.dayView.destroy();this.weekView&&this.weekView.destroy();this.monthView&&this.monthView.destroy();this.mainView.addTabs(this.$653());
this.mainView.selectTab(a)}else{a=this.children[0].members[1];var b=a.members[1],c=this.$653()[0].pane;a.removeMember(b);b.destroy();a.addMember(c)}this.$53a();this.setDateLabel()},isc.A.canEditEvent=function(a){return a?a[this.canEditField]!=null?a[this.canEditField]:this.canEditEvents:false},isc.A.addEvent=function(a,b,c,d,e,f){isc.isAn.Object(e)||(e={});var g;if(isc.isA.Date(a)){g={};g[this.startDateField]=a;g[this.endDateField]=b;g[this.nameField]=c;g[this.descriptionField]=d;isc.addProperties(g,
e)}else if(isc.isAn.Object(a))g=a;else{isc.logWarn("addEvent error: startDate parameter must be either a Date or an event record (Object)");return}var h=this;a=function(i,j){var k;(k=isc.isAn.Array(j)?j[0]:j)||(k=g);h.logIsDebugEnabled("calendar")&&h.logDebug("event added:"+this.echo(k),"calendar");h.$53b(k[h.startDateField],k[h.endDateField])&&h.dayView.addEvent(k);h.$53c(k[h.startDateField],k[h.endDateField])&&h.weekView.addEvent(k);h.$53d(k[h.startDateField],k[h.endDateField])&&h.monthView.refreshEvents();
h.eventAdded&&h.eventAdded(k)};if(f)this.$53e=true;if(this.dataSource)isc.DataSource.get(this.dataSource).addData(g,a,{componentId:this.ID});else{this.$53e=true;this.data.add(g);a()}},isc.A.removeEvent=function(a,b){var c=a[this.startDateField],d=a[this.endDateField],e=this,f=function(){e.$53b(c,d)&&e.dayView.removeEvent(a);e.$53c(c,d)&&e.weekView.removeEvent(a);e.$53d(c,d)&&e.monthView.refreshEvents();if(e.eventAutoArrange){e.dayView&&e.dayView.refreshEvents();e.weekView&&e.weekView.refreshEvents()}e.eventRemoved&&
e.eventRemoved(a)};if(b)this.$53e=true;if(this.dataSource)isc.DataSource.get(this.dataSource).removeData(a,f,{componentId:this.ID,oldValues:a});else{this.data.remove(a);f()}},isc.A.updateEvent=function(a,b,c,d,e,f,g){isc.isAn.Object(f)||(f={});var h=this,i=a[this.startDateField],j=a[this.endDateField],k=function(m,n){var o;(o=isc.isAn.Array(n)?n[0]:n)||(o=a);if(h.$53b(i,j)||h.$53b(b,c))h.dayView.refreshEvents();h.$53c(b,c)&&h.weekView.updateEventWindow(o);h.$53d(b,c)&&h.monthView.refreshEvents();
h.$664(b,c)&&h.timelineView.updateEventWindow(o);h.eventChanged&&h.eventChanged(o)};if(g)this.$53e=true;if(this.dataSource){g=isc.DataSource.get(this.dataSource);var l={};l[this.startDateField]=b;l[this.endDateField]=c;l[this.descriptionField]=e;l[this.nameField]=d;d=isc.addProperties({},a,l,f);g.updateData(d,k,{oldValues:a,componentId:this.ID})}else{a[this.startDateField]=b;a[this.endDateField]=c;a[this.descriptionField]=e;a[this.nameField]=d;isc.addProperties(a,f);k()}},isc.A.eventsAreSame=function(a,
b){if(this.dataSource){for(var c=isc.DataSource.get(this.dataSource).getPrimaryKeyFieldNames(),d=true,e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f]){d=false;break}}return d}else return a===b},isc.A.getEventTitle=function(a){return a[this.nameField]},isc.A.getEventHoverHTML=function(a){var b=a[this.startDateField].toShortDate(this.dateFormatter),c=isc.Time.toTime(a[this.startDateField],this.timeFormatter),d=isc.Time.toTime(a[this.endDateField],this.timeFormatter);return b+"&nbsp;"+c+"&nbsp;-&nbsp;"+
d+"</br></br>"+a[this.nameField]+"</br></br>"+a[this.descriptionField]},isc.A.$53b=function(a){if(!this.dayView)return false;var b=new Date(this.year,this.month,this.chosenDate.getDate(),0,0),c=new Date(this.year,this.month,this.chosenDate.getDate(),23,59);return this.dayView.body&&b.getTime()<=a.getTime()&&c.getTime()>=a.getTime()?true:false},isc.A.$53c=function(a,b){if(!this.weekView)return false;var c=this.chosenWeekEnd.duplicate();c.setMinutes(c.getMinutes()+1);return this.weekView.body&&this.chosenWeekStart.getTime()<=
a.getTime()&&c.getTime()>=b.getTime()?true:false},isc.A.$53d=function(a,b){if(!this.monthView)return false;var c=new Date(this.year,this.month,37);return(new Date(this.year,this.month,-7)).getTime()<=a.getTime()&&c.getTime()>=b.getTime()?true:false},isc.A.$664=function(){return this.showTimelineView?true:false},isc.A.$53f=function(a){var b=this.canEditEvent(a),c=a[this.eventWindowStyleField]||this.eventWindowStyle;return this.createAutoChild("eventWindow",{calendar:this,className:c,baseStyle:c,canDragReposition:b,
canDragResize:b,_redrawWithParent:false,showCloseButton:this.canDeleteEvents==null?b:this.canDeleteEvents,event:a,descriptionText:a[this.descriptionField]},isc.EventWindow)},isc.A.$53g=function(a,b){for(var c=[],d=Date.getWeekendDays(),e=0;e<this.data.getLength();e++){var f=this.data.get(e);if(!f||!f[this.startDateField])return[];if(f[this.startDateField].getTime()>=a.getTime()&&f[this.startDateField].getTime()<=b.getTime()&&(this.showWeekends||!d.contains(f[this.startDateField].getDay())))c.add(f)}return c},
isc.A.$64h=function(a,b,c){var d=[],e=Date.getWeekendDays(),f=a.getTime(),g=this.getDayEnd(a),h=b.getHours()!=0?b.getTime():g.getTime(),i=f,j=h,k=false;for(b.getHours()==0||Date.compareDates(a,b);!k;){for(var l=0;l<this.data.getLength();l++){var m=this.data.get(l),n=m[this.startDateField],o=m[this.endDateField];if(o.getHours()==0||o<n)o=g;if(!n)return[];if(n.getTime()>=f&&n.getTime()<h&&n.getDay()==a.getDay()||o.getTime()>f&&o.getTime()<=h&&o.getDay()==b.getDay()||n.getTime()<f&&o.getTime()>h&&(n.getDay()==
a.getDay()||o.getDay()==b.getDay())&&(this.showWeekends||!e.contains(n.getDay()))){d.add(m);if(c){if(n.getTime()<i)i=n.getTime();if(o.getTime()>j)j=o.getTime()}}}if(!c||i==f&&j==h)k=true;else{f=i;h=j;d.clear()}}return d},isc.A.$64i=function(a,b){var c=b?this.weekView:this.dayView;if(c.body&&c.body.children){var d=c.body.children;if(this.dataSource)this.$53s=isc.DataSource.get(this.dataSource).getLocalPrimaryKeyFields();for(var e=0;e<d.length;e++)if(isc.isAn.EventWindow(d[e])&&c.areSame(d[e].event,
a)&&d[e].$53i==b)return d[e];return false}},isc.A.$64j=function(a){for(var b=[],c=0,d=60/this.eventSnapGap,e=24*d,f=0;f<e;f++)b.add({usedCol:0,assignedCol:0,exactTime:0});for(f=0;f<a.getLength();f++){e=a.get(f);var g=e[this.startDateField].getHours(),h=e[this.startDateField].getMinutes(),i=h%this.eventSnapGap;if(i)h-=i;if(g==24)g=0;i=e[this.endDateField].getHours();var j=e[this.endDateField].getMinutes(),k=j%this.eventSnapGap;if(k){j+=this.eventSnapGap-k;if(j==60){j=0;i++}}e.$64k=0;e.$64l=0;g=g*d+
h/this.eventSnapGap;h=i*d+j/this.eventSnapGap;for(i=g;i<h;i++){j=b[i].usedCol;k=b[i].assignedCol;var l=b[i].exactTime;if(i==g){var m=k!=0;e.$64k=k;if(this.eventOverlap){e.$64m=this.eventOverlapIdenticalStartTimes?true:l==0;l=1}k++;if(k>c)c=k;if(!m&&j!=0){e.$64l=j;k=j+1}else if(k<=j){e.$64l=j;k=j+1}else e.$64l=c}else if(m)if(k==0){if(j==0)j=e.$64k}else if(j==0)if(e.$64k>k)j=e.$64k;else k=e.$64k+1;else{if(k<j)k=j+1}else if(k+1<j)k++;else k=j+1;b[i].usedCol=j;b[i].assignedCol=k;b[i].exactTime=l}}return c},
isc.A.getDayEnd=function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate(),23,59,59)},isc.A.$64n=function(a,b,c){var d=a?this.weekView:this.dayView;if(d.isDrawn()){var e=d.getRowHeight(1),f=d.getColumnWidth(d.isLabelCol(0)?1:0),g=c;if(Date.compareDates(b,g)<0||g.getHours()==0)g=this.getDayEnd(b);g=this.$64h(b,g,true);g.sortByProperties([this.startDateField,this.endDateField],[true,false]);var h=this.$64j(g,d);if(h==0)h=1;g.unsort();g.sortByProperties(["$64k"],[true]);f=f/h;for(h=0;h<g.getLength();h++){var i=
g.get(h);if(i.$64l==0)i.$64l=1;var j=this.getEventLeft(i,a);j+=i.$64k*f;var k=(i.$64l-i.$64k)*f;if(this.eventOverlap&&i.$64m)if(i.$64k>0){j-=f*(this.eventOverlapPercent/100);k+=f*(this.eventOverlapPercent/100)}var l=i[this.endDateField].getHours();if(l==0&&i[this.endDateField].getMinutes()==0)l=24;var m=false;if(b.getDate()>c.getDate()){m=true;l=24}l=(l-i[this.startDateField].getHours())*e*2;if(this.weekEventBorderOverlap&&d.$53i)k+=1;if(i[this.startDateField].getMinutes()>0)l-=this.$54g(i[this.startDateField].getMinutes(),
e);if(i[this.endDateField].getMinutes()>0&&!m)l+=this.$54g(i[this.endDateField].getMinutes(),e);m=i[this.startDateField].getHours()*e*2;if(i[this.startDateField].getMinutes()>0)m+=this.$54g(i[this.startDateField].getMinutes(),e);(i=this.$64i(i,a))&&i.renderEvent(m,j,k,l)}}},isc.A.$529=function(){var a=this.chosenWeekStart=new Date(this.year,this.month,this.chosenDate.getDate()-this.chosenDate.getDay()+this.firstDayOfWeek);Date.compareDates(this.chosenDate,a)==1&&this.chosenWeekStart.setDate(this.chosenWeekStart.getDate()-
7);this.chosenWeekEnd=new Date(a.getFullYear(),a.getMonth(),a.getDate()+6,23,59);if(Date.compareDates(this.chosenDate,this.chosenWeekEnd)==-1){this.chosenWeekStart.setDate(this.chosenWeekStart.getDate()+7);this.chosenWeekEnd.setDate(this.chosenWeekEnd.getDate()+7)}},isc.A.setChosenDate=function(a){this.year=a.getFullYear();this.month=a.getMonth();this.$53h=this.chosenDate;this.chosenDate=a;this.$529();if(this.$53h.getFullYear()!=this.year||this.$53h.getMonth()!=this.month)this.monthView&&this.monthView.refreshEvents();
a=new Date(this.$53h.getFullYear(),this.$53h.getMonth(),this.$53h.getDate()-this.$53h.getDay());var b=new Date(a.getFullYear(),a.getMonth(),a.getDate()+6),c=this.chosenDate.getTime();if(c<a.getTime()||c>b.getTime())if(this.weekView){this.weekView.refreshEvents();this.$53a()}if(c!=this.$53h.getTime())if(this.dayView){this.dayView.refreshStyle();this.dayView.refreshEvents()}this.setDateLabel();this.dateChanged()},isc.A.dateIsWorkday=function(a){return this.workdays.contains(a.getDay())},isc.A.adjustCriteria=
function(a){return a},isc.A.getNewCriteria=function(){var a={};if(this.fetchMode=="timeline"){a=this.timelineView;a=this.adjustCriteria({_constructor:"AdvancedCriteria",operator:"and",criteria:[{fieldName:this.startDateField,operator:"greaterThan",value:a.startDate},{fieldName:this.endDateField,operator:"lessThan",value:a.endDate}]})}return a},isc.A.$53a=function(){if(this.weekView){var a=this.chosenWeekStart.duplicate(),b=Date.getShortDayNames();Date.getWeekendDays();for(var c=1;c<8;c++){if(this.weekView.getFieldNum("day"+
c)>=0){var d=a.toShortDate(this.dateFormatter);if(d.match(this.$81i)!=null)d=d.substring(5);else if(d.match(this.$81j))d=d.substring(0,d.length-5);d={title:b[a.getDay()]+" "+d,align:"right",$654:a.getDay(),$658:a.getDate(),$659:a.getMonth(),$66a:a.getFullYear()};this.weekView.setFieldProperties("day"+c,d);this.weekView.header&&this.weekView.header.markForRedraw()}a.setDate(a.getDate()+1)}}},isc.A.next=function(){var a;if(this.dayViewSelected()){a=new Date(this.year,this.month,this.chosenDate.getDate()+
1);if(!this.showWeekends)for(var b=Date.getWeekendDays(),c=0;c<b.length;c++)b.contains(a.getDay())&&a.setDate(a.getDate()+1)}else if(this.weekViewSelected())a=new Date(this.year,this.month,this.chosenDate.getDate()+7);else if(this.monthViewSelected())a=new Date(this.year,this.month+1,1);else if(this.timelineViewSelected()){a=this.chosenDate.duplicate();this.timelineView.nextOrPrev(true)}this.dateChooser.setData(a);this.setChosenDate(a)},isc.A.previous=function(){if(this.dayViewSelected()){var a=new Date(this.year,
this.month,this.chosenDate.getDate()-1);if(!this.showWeekends)for(var b=Date.getWeekendDays(),c=0;c<b.length;c++)b.contains(a.getDay())&&a.setDate(a.getDate()-1)}else if(this.weekViewSelected())a=new Date(this.year,this.month,this.chosenDate.getDate()-7);else if(this.monthViewSelected())a=new Date(this.year,this.month-1,1);else if(this.timelineViewSelected()){a=this.chosenDate.duplicate();this.timelineView.nextOrPrev(false)}this.dateChooser.setData(a);this.setChosenDate(a)},isc.A.dataArrived=function(){return true},
isc.A.draw=function(a,b,c,d){this.invokeSuper(isc.Calendar,"draw",a,b,c,d);isc.ResultSet&&isc.isA.ResultSet(this.data)&&this.dataSource&&this.observe(this.data,"dataArrived","observer.dataArrived(arguments[0], arguments[1])");if(this.mainView.isA("TabSet")){this.mainView.addChild(this.controlsBar);this.controlsBar.moveAbove(this.mainView.tabBar)}},isc.A.$653=function(){var a=[];if(this.showDayView!=false){this.dayView=this.createAutoChild("dayView",{baseStyle:this.baseStyle,viewName:"day"});a.add({title:this.dayViewTitle,
pane:this.dayView,viewName:"day"})}if(this.showWeekView!=false){this.weekView=this.createAutoChild("weekView",{$53i:true,baseStyle:this.baseStyle,viewName:"week"});a.add({title:this.weekViewTitle,pane:this.weekView,viewName:"week"})}if(this.showMonthView!=false){this.monthView=this.createAutoChild("monthView",{baseStyle:this.baseStyle,viewName:"month",bodyConstructor:"MonthScheduleBody"});a.add({title:this.monthViewTitle,pane:this.monthView,viewName:"month"})}if(this.showTimelineView!=false){this.timelineView=
this.createAutoChild("timelineView",{baseStyle:this.baseStyle,viewName:"timeline"});a.add({title:this.timelineViewTitle,pane:this.timelineView,viewName:"timeline"})}return a},isc.A.$655=function(a){if(a.length>1){this.mainView=this.createAutoChild("mainView",{tabs:a,tabSelected:function(b,c){this.creator.$567=c.viewName;this.creator.setDateLabel()}});if(this.currentViewName)(a=a.find("viewName",this.currentViewName))&&this.mainView.selectTab(a)}else this.mainView=a[0].pane},isc.A.createChildren=function(){this.$655(this.$653());
if(this.showControlsBar!=false){this.dateDisplay=this.createAutoChild("dateDisplay");this.addEventButton=this.createAutoChild("addEventButton",{click:function(){var c=this.creator,d=c.getCurrentViewName();c.eventDialog.event=null;c.eventDialog.items[0].createFields(false);var e=new Date,f=c.chosenDate.duplicate();if(d=="day")e=f;else if(d=="week"){if(c.chosenWeekStart.getTime()>e.getTime())e=c.chosenWeekStart.duplicate();if(!this.showWeekends){d=Date.getWeekendDays();for(f=0;f<d.length;f++)d.contains(e.getDay())&&
e.setDate(e.getDate()+1)}e.setMinutes(0);if(e.getHours()>22){e.setDate(e.getDate()+1);e.setHours(0)}else e.setHours(e.getHours()+1)}else if(d=="month"){f.setDate(1);if(f.getTime()>e.getTime())e=f}c.eventDialog.setDate(e);c.eventDialog.setPageLeft(c.getPageLeft());c.eventDialog.setPageTop(this.getPageTop()+this.getVisibleHeight());c.eventDialog.show()}});this.datePickerButton=this.createAutoChild("datePickerButton",{click:function(){var c=this.creator;if(this.$54x){this.$54x.setData(c.chosenDate);
this.$54x.draw()}else{this.$54x=isc.DateChooser.create({calendar:this.creator,autoDraw:false,showCancelButton:true,autoClose:true,disableWeekends:this.creator.disableWeekends,firstDayOfWeek:this.creator.firstDayOfWeek,showWeekends:this.creator.showWeekends,dateClick:function(d,e,f){this.setData(new Date(d,e,f));this.calendar.dateChooser.dateClick(d,e,f);this.close()}});this.$54x.setData(c.chosenDate);c.addChild(this.$54x);this.$54x.placeNextTo(this,"bottom",true)}}});this.previousButton=this.createAutoChild("previousButton",
{});this.nextButton=this.createAutoChild("nextButton",{})}var a=[];this.showPreviousButton!=false&&a.add(this.previousButton);this.showDateDisplay!=false&&a.add(this.dateDisplay);this.showDatePickerButton!=false&&a.add(this.datePickerButton);this.canCreateEvents&&this.showAddEventButton!=false&&a.add(this.addEventButton);this.showNextButton!=false&&a.add(this.nextButton);if(this.showControlsBar!=false)this.controlsBar=this.createAutoChild("controlsBar",{members:a});this.dateChooser=this.createAutoChild("dateChooser",
{disableWeekends:this.disableWeekends,showWeekends:this.showWeekends,chosenDate:this.chosenDate,month:this.month,year:this.year,dateClick:function(c,d,e){c=new Date(c,d,e);this.setData(c);this.creator.setChosenDate(c)},showPrevYear:function(){this.year--;this.dateClick(this.year,this.month,this.chosenDate.getDate())},showNextYear:function(){this.year++;this.dateClick(this.year,this.month,this.chosenDate.getDate())},showPrevMonth:function(){if(--this.month==-1){this.month=11;this.year--}this.dateClick(this.year,
this.month,1)},showNextMonth:function(){if(++this.month==12){this.month=0;this.year++}this.dateClick(this.year,this.month,1)}});this.eventDialog=this.createAutoChild("eventDialog",{items:[isc.DynamicForm.create({autoDraw:false,padding:4,calendar:this,saveOnEnter:true,useAllDataSourceFields:true,$642:["name"],getCustomValues:function(){if(this.calendar.eventDialogFields){for(var c=this.$642,d=this.calendar.eventDialogFields,e={},f=0;f<d.length;f++){var g=d[f];if(g.name&&!c.contains(g.name))e[g.name]=
this.getValue(g.name)}return e}},setCustomValues:function(c){if(this.calendar.eventDialogFields)for(var d=this.$642,e=this.calendar.eventDialogFields,f=0;f<e.length;f++){var g=e[f];g.name&&!d.contains(g.name)&&this.setValue(g.name,c[g.name])}},createFields:function(c){var d=this.calendar;d=[{name:d.nameField,title:d.eventNameFieldTitle,type:c?"staticText":"text",width:250},{name:"save",title:d.saveButtonTitle,type:"SubmitItem",endRow:false},{name:"details",title:d.detailsButtonTitle,type:"button",
startRow:false,click:function(e){e.calendar.$53j(e.calendar.eventDialog.event)}}];c&&d.removeAt(1);this.setDataSource(isc.DataSource.create({addGlobalId:false,fields:d}));this.setFields(isc.shallowClone(this.calendar.eventDialogFields))},submit:function(){var c=this.calendar,d=c.eventDialog.event,e=c.eventDialog.currentStart,f=c.eventDialog.currentEnd;if(this.validate()){d?c.updateEvent(d,e,f,this.getItem(this.calendar.nameField).getValue(),d[c.descriptionField],this.getCustomValues(),true):c.addEvent(e,
f,this.getItem(this.calendar.nameField).getValue(),"",this.getCustomValues(),true);c.eventDialog.hide()}}})],setDate:function(c,d){d||(d=c.getHours()==23&&c.getMinutes()==30?new Date(c.getFullYear(),c.getMonth(),c.getDate()+1):new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours()+1,c.getMinutes()));this.setTitle(this.creator.$53k(c,d));this.currentStart=c;this.currentEnd=d;this.items[0].getItem(this.creator.nameField).setValue("")},setEvent:function(c){this.event=c;var d=this.items[0];if(this.creator.eventDialogFields){d.clearErrors(true);
d.setCustomValues(c)}this.setDate(c[this.creator.startDateField],c[this.creator.endDateField]);d.getItem(this.creator.nameField).setValue(c[this.creator.nameField])},closeClick:function(){this.Super("closeClick");this.creator.dayView.clearSelection();this.creator.weekView.clearSelection()},show:function(){if(this.creator.showQuickEventDialog){this.isDrawn()||this.draw();this.Super("show");this.items[0].getItem(this.creator.nameField).focusInItem()}else this.creator.$53j(this.event)},hide:function(){this.Super("hide");
this.moveTo(0,0)}});this.eventEditor=this.createAutoChild("eventEditor",{useAllDataSourceFields:true,initWidget:function(){this.invokeSuper(isc.DynamicForm,"initWidget",arguments);this.timeFormat=this.creator.timeFormat;var c=[{name:"startHours",title:"From",type:"select",width:60},{name:"startMinutes",showTitle:false,type:"select",width:60},{name:"startAMPM",showTitle:false,type:"select",width:60},{name:"invalidDate",type:"blurb",colSpan:4,visible:false,defaultValue:this.creator.invalidDateMessage},
{name:"endHours",title:"To",type:"select",width:60},{name:"endMinutes",showTitle:false,type:"select",width:60},{name:"endAMPM",showTitle:false,type:"select",width:60},{name:"name",title:"Name",type:"text",colSpan:4},{name:"description",title:"Description",type:"textArea",colSpan:4,height:50}];c[0].valueMap=this.getTimeValues("hours");c[1].valueMap=this.getTimeValues("minutes");c[2].valueMap=this.getTimeValues();c[3].cellStyle=this.errorStyle||"formCellError";c[4].valueMap=this.getTimeValues("hours");
c[5].valueMap=this.getTimeValues("minutes");c[6].valueMap=this.getTimeValues();this.setDataSource(isc.DataSource.create({addGlobalId:false,fields:c}));this.setFields(isc.clone(this.creator.eventEditorFields))},getTimeValues:function(c,d){d||(d=0);var e={};if(c=="hours")for(var f=d;f<12;f++)e[f+1+""]=f+1;else if(c=="minutes")for(f=0;f<60;f++)e[f+""]=f<10?"0"+f:""+f;else{e.am="am";e.pm="pm"}return e},$642:["startHours","startMinutes","startAMPM","endHours","endMinutes","endAMPM","name","description"],
getCustomValues:function(){if(this.creator.eventEditorFields){for(var c=this.$642,d=this.creator.eventEditorFields,e={},f=0;f<d.length;f++){var g=d[f];if(g.name&&!c.contains(g.name))e[g.name]=this.getValue(g.name)}return e}},setCustomValues:function(c){if(this.creator.eventEditorFields)for(var d=this.$642,e=this.creator.eventEditorFields,f=0;f<e.length;f++){var g=e[f];g.name&&!d.contains(g.name)&&this.setValue(g.name,c[g.name])}}});this.eventEditorLayout=this.createAutoChild("eventEditorLayout",{items:[this.eventEditor,
isc.HLayout.create({membersMargin:10,layoutMargin:10,autoDraw:false,members:[isc.IButton.create({autoDraw:false,title:this.saveButtonTitle,calendar:this,click:function(){var c=this.calendar,d=c.eventEditorLayout.event,e=c.eventEditor,f=e.getItem("startHours").getValue(),g=e.getItem("endHours").getValue(),h=e.getItem("startMinutes").getValue(),i=e.getItem("endMinutes").getValue(),j,k;if(!c.twentyFourHourTime){j=e.getItem("startAMPM").getValue();k=e.getItem("endAMPM").getValue();f=c.$534(f,j);g=c.$534(g,
k);if(g==0)g=24}if(f<g||f==g&&h<i){if(e.validate()){j=c.eventEditorLayout.currentStart;k=c.eventEditorLayout.currentEnd;if(k.getDate()>j.getDate())if(g==24)g=0;else k.setDate(j.getDate());j.setHours(f);j.setMinutes(h);k.setHours(g);k.setMinutes(i);if(d){f=c.eventEditorLayout.originalStart;g=c.eventEditorLayout.originalEnd;c.updateEvent(d,j,k,e.getItem("name").getValue(),e.getItem("description").getValue(),e.getCustomValues(),true);c.eventAutoArrange&&c.$64n(c.weekViewSelected(),f,g)}else c.addEvent(j,
k,e.getItem("name").getValue(),e.getItem("description").getValue(),e.getCustomValues(),true);c.eventEditorLayout.hide()}}else e.showItem("invalidDate")}}),isc.IButton.create({autoDraw:false,title:this.cancelButtonTitle,calendar:this,click:function(){this.calendar.eventEditorLayout.hide()}})]})],setDate:function(c,d,e){e||(e="");d||(d=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours()+1,c.getMinutes()));var f=this.creator;this.setTitle(f.$53k(c,d));this.currentStart=c;this.currentEnd=d;
this.items[0].getItem("startHours").setValue(this.getHours(c.getHours()));this.items[0].getItem("endHours").setValue(this.getHours(d.getHours()));this.items[0].getItem("startMinutes").setValue(c.getMinutes());this.items[0].getItem("endMinutes").setValue(d.getMinutes());if(!f.twentyFourHourTime){this.items[0].getItem("startAMPM").setValue(this.getAMPM(c.getHours()));this.items[0].getItem("endAMPM").setValue(this.getAMPM(d.getHours()))}this.items[0].getItem("name").setValue(e);this.items[0].getItem("description").setValue("")},
getHours:function(c){return this.creator.twentyFourHourTime?c:this.creator.$53n(c)},getAMPM:function(c){return c<12?"am":"pm"},setEvent:function(c){this.event=c;if(this.creator.eventEditorFields){this.items[0].clearErrors(true);this.items[0].setCustomValues(c)}this.setDate(c[this.creator.startDateField],c[this.creator.endDateField]);this.items[0].getItem("name").setValue(c[this.creator.nameField]);this.items[0].getItem("description").setValue(c[this.creator.descriptionField]);this.originalStart=isc.clone(this.currentStart);
this.originalEnd=isc.clone(this.currentEnd)},hide:function(){this.Super("hide");this.creator.dayView&&this.creator.dayView.clearSelection();this.creator.weekView&&this.creator.weekView.clearSelection();this.creator.eventEditor.hideItem("invalidDate")},sizeMe:function(){this.setWidth(this.creator.mainView.getVisibleWidth());this.setHeight(this.creator.mainView.getVisibleHeight());this.setLeft(this.creator.mainView.getLeft())}});if(!this.children)this.children=[];a=[];var b=[];b.add(this.dateChooser);
this.showDateChooser&&a.add(isc.VLayout.create({autoDraw:false,width:"20%",membersMargin:10,layoutTopMargin:10,members:b}));if(this.mainView.isA("TabSet"))a.add(this.mainView);else if(this.showControlsBar!=false){b=isc.HLayout.create({autoDraw:false,height:this.controlsBar.getVisibleHeight(),width:"100%"});b.addMember(isc.LayoutSpacer.create({autoDraw:false,width:"*"}));b.addMember(this.controlsBar);b.addMember(isc.LayoutSpacer.create({autoDraw:false,width:"*"}));a.add(isc.VLayout.create({autoDraw:false,
members:[b,this.mainView]}))}else a.add(this.mainView);this.children.add(isc.HLayout.create({autoDraw:false,width:"100%",height:"100%",members:a}));this.eventEditorLayout.hide();this.setDateLabel()});isc.B.push(isc.A.setDateLabel=function(){if(this.dateDisplay)if(this.dayViewSelected())this.dateDisplay.setContents("<b>"+Date.getFormattedDateRangeString(this.chosenDate)+"</b>");else if(this.weekViewSelected()){var a=this.$656();this.dateDisplay.setContents("<b>"+Date.getFormattedDateRangeString(a[0],
a[1])+"</b>")}else if(this.monthViewSelected())this.dateDisplay.setContents("<b>"+this.chosenDate.getShortMonthName()+" "+this.chosenDate.getFullYear()+"</b>");else if(this.timelineViewSelected()){a=this.timelineView;var b=a.endDate;this.dateDisplay.setContents("<b>"+a.formatDateForDisplay(a.startDate)+"</b> through <b>"+a.formatDateForDisplay(b)+"</b>")}},isc.A.$656=function(){var a=this.chosenWeekStart.duplicate(),b=this.chosenWeekEnd.duplicate();if(!this.showWeekends){b=Date.getWeekendDays();for(var c=
7-b.length;b.contains(a.getDay());)a.setDate(a.getDate()+1);for(var d=0,e=a.duplicate(),f=0;f<c;f++){b.contains(e.getDay())&&d++;e.setDate(e.getDate()+1)}b=a.duplicate();b.setDate(b.getDate()+(c-1)+d)}return[a,b]},isc.A.dayViewSelected=function(){return this.mainView.isA("TabSet")?this.$567=="day":this.mainView.viewName=="day"},isc.A.weekViewSelected=function(){return this.mainView.isA("TabSet")?this.$567=="week":this.mainView.viewName=="week"},isc.A.monthViewSelected=function(){return this.mainView.isA("TabSet")?
this.$567=="month":this.mainView.viewName=="month"},isc.A.timelineViewSelected=function(){return this.mainView.isA("TabSet")?this.$567=="timeline":this.mainView.viewName=="timeline"},isc.A.$53l=function(a,b,c,d){if(d){this.eventDialog.eventWindow=d;this.eventDialog.items[0].createFields(true);this.eventDialog.setEvent(d.event)}else{this.eventDialog.event=null;if(this.eventEditorLayout)this.eventEditorLayout.event=null;this.eventDialog.items[0].createFields(false);var e;d=this.$53m(a,b);if(this.monthViewSelected()){var f=
new Date;f=f.getHours();if(f>22)f-=1;d.setHours(f)}if(c&&c>1)e=this.$53m(a+c,b);this.eventDialog.setDate(d,e)}this.eventDialog.moveTo(0,-1E4);this.eventDialog.show();a=this.getSelectedView().getCellPageRect(a,b);this.eventDialog.placeNear(a[0],a[1]);isc.Timer.setTimeout(this.ID+".eventDialog.bringToFront()")},isc.A.$53j=function(a){this.eventEditorLayout.isDrawn()||this.eventEditorLayout.draw();this.eventEditorLayout.setWidth(this.mainView.getVisibleWidth());this.eventEditorLayout.setHeight(this.mainView.getVisibleHeight());
this.eventEditorLayout.setPageLeft(this.mainView.getPageLeft());this.eventEditorLayout.setPageTop(this.getPageTop());if(a)this.eventEditorLayout.setEvent(a);else{this.eventEditor.clearValues();this.eventEditorFields&&this.eventEditorLayout.items[0].setCustomValues(this.eventDialog.items[0].getCustomValues());this.eventEditorLayout.setDate(this.eventDialog.currentStart,this.eventDialog.currentEnd,this.eventDialog.items[0].getItem("name").getValue())}this.eventDialog.hide();this.eventEditorLayout.show()},
isc.A.$53k=function(a,b){var c=Date.getShortDayNames(),d=Date.getShortMonthNames(),e=isc.Time.toTime(a,this.timeFormatter),f=isc.Time.toTime(b,this.timeFormatter);e=e+" - "+f;return c[a.getDay()]+", "+d[a.getMonth()]+" "+a.getDate()+", "+e},isc.A.$53n=function(a){return a==0?12:a<13?a:a-12},isc.A.$534=function(a,b){a=parseInt(a);return b.toLowerCase()=="am"&&a==12?0:b.toLowerCase()=="pm"&&a<12?a+12:a},isc.A.$53m=function(a,b){var c;if(this.dayViewSelected())c=this.chosenDate.duplicate();else if(this.weekViewSelected()){c=
this.weekView.getField(b);if(!c.$66a)return;c=new Date(c.$66a,c.$659,c.$658)}else if(this.monthViewSelected()){c=this.monthView.data.get(a);var d=this.monthView.getField(b).$66b;c=c["date"+d].duplicate();c.setHours(0);c.setMinutes(0);c.setSeconds(0)}else if(this.timelineViewSelected()){d=this.timelineView;c=this.timelineStartDate.duplicate();d.timelineGranularity=="day"?c.setDate(c.getDate()+b):c.setHours(c.getHours()+b)}else return;if(this.dayViewSelected()||this.weekViewSelected()){d=a;var e=0;
if(a%2==1){d=a-1;e=30}c.setHours(d/2,e)}return c},isc.A.$54g=function(a,b,c){return c=="timeline"?Math.round(b/60)*a:Math.round(b/30*a)},isc.A.monthViewEventClick=function(a,b,c){a=this.monthView.getEvents(a,b)[c];this.eventClick(a,"month")&&this.$53j(a)},isc.A.getDayBodyHTML=function(a,b,c,d,e){a.getDay();a=this.monthView.getRowHeight(this.monthView.data?this.monthView.data[1]:null,1);c="";for(var f=0;f<b.length;f++){var g=isc.Time.toTime(b[f][this.startDateField],this.timeFormatter)+" ";c+=this.canEditEvent(b[f])?
"<a href='javascript:"+this.ID+".monthViewEventClick("+d+","+e+","+f+");' class='"+this.calMonthEventLinkStyle+"'>"+g+b[f][this.nameField]+"</a><br/>":g+b[f][this.nameField]+"<br/>";if((f+3)*15>a)break}if(f<b.length-1)c+="+ "+(b.length-1-f)+" more...";return c},isc.A.getDayHeaderHTML=function(a){return a.getDate()},isc.A.dayBodyClick=function(){return true},isc.A.dayHeaderClick=function(){return true},isc.A.eventClick=function(){return true},isc.A.eventRemoveClick=function(){return true},isc.A.eventMoved=
function(){return true},isc.A.eventResized=function(){return true},isc.A.timelineEventMoved=function(){return true},isc.A.timelineEventResized=function(){return true},isc.A.getValidSnapDate=function(a,b){var c=this.eventSnapGap,d=(a.getHours()*60+a.getMinutes())%c,e=b.getHours()*60+b.getMinutes();c=Math.round((e-d)/c)*c+d;d=c%60;b.setHours(Math.floor(c/60));b.setMinutes(d);return b},isc.A.selectTab=function(a){if(this.mainView&&this.mainView.isA("TabSet")&&this.mainView.tabs.getLength()>a){this.mainView.selectTab(a);
this.refreshSelectedView();return true}else return false},isc.A.parentResized=function(){this.Super("parentResized",arguments);this.eventEditorLayout.isVisible()&&this.eventEditorLayout.sizeMe()},isc.A.dateChanged=function(){return true},isc.A.getActiveDay=function(){var a=this.getActiveTime();if(a)return a.getDay()},isc.A.getActiveTime=function(){var a=this.getSelectedView(),b=a.getEventColumn();return this.$53m(a.getEventRow(),b)},isc.A.setTimelineRange=function(a,b,c,d,e){this.timelineView&&this.timelineView.setTimelineRange(a,
b,c,d);e&&this.fireCallback(e)});isc.B._maxIndex=isc.C+79;isc.ClassFactory.defineClass("DaySchedule","ListGrid");isc.DaySchedule.changeDefaults("bodyProperties",{childrenSnapToGrid:true,snapToCells:true,redrawOnResize:true});isc.A=isc.DaySchedule.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoDraw=false;isc.A.canSort=false;isc.A.canResizeFields=false;isc.A.canReorderFields=false;isc.A.showHeader=false;isc.A.showHeaderContextMenu=
false;isc.A.showAllRecords=true;isc.A.fixedRecordHeights=true;isc.A.labelColumnWidth=60;isc.A.labelColumnAlign="right";isc.A.showLabelColumn=true;isc.A.labelColumnPosition="left";isc.A.labelColumnBaseStyle="labelColumn";isc.A.showRollOver=true;isc.A.useCellRollOvers=true;isc.A.canSelectCells=true;isc.B.push(isc.A.initWidget=function(){this.fields=[];var a={width:this.labelColumnWidth,name:"label",title:" ",cellAlign:"right",formatCellValue:function(e,f,g,h,i){if(g%2==0){e=isc.Time.parseInput(g/2);
return isc.Time.toTime(e,i.creator.timeFormatter)}else return""}};this.showLabelColumn&&this.labelColumnPosition=="left"&&this.fields.add(a);this.fields.add({name:"day1",align:"center"});if(this.$53i){for(var b=2;b<8;b++)this.fields.add({name:"day"+b,align:"center"});this.showHeader=true}if(this.$53i&&!this.creator.showWeekends){var c=this.showLabelColumn&&this.labelColumnPosition=="left"?1:0,d=Date.getWeekendDays();for(b=c;b<this.fields.length;b++)if(d.contains((b-c+this.creator.firstDayOfWeek)%
7))this.fields[b].showIf="return false;"}this.showLabelColumn&&this.labelColumnPosition=="right"&&this.fields.add(a);this.data=isc.DaySchedule.$53o;this.Super("initWidget")},isc.A.draw=function(a,b,c,d){this.invokeSuper(isc.DaySchedule,"draw",a,b,c,d);this.logDebug("draw","calendar");this.refreshEvents();this.setSnapGap();this.creator.scrollToWorkday&&this.scrollToWorkdayStart()},isc.A.setSnapGap=function(){this.body.snapVGap=Math.round(this.creator.eventSnapGap/30*this.body.getRowSize(0));this.body.snapHGap=
null},isc.A.scrollToWorkdayStart=function(){var a=isc.Time.parseInput(this.creator.workdayStart),b=a.getHours()*2;a.getMinutes()>0&&b++;this.body.scrollTo(0,this.getRowHeight(null,0)*b)},isc.A.getRowHeight=function(){if(this.creator.scrollToWorkday){var a=isc.Time.parseInput(this.creator.workdayEnd).getUTCHours()-isc.Time.parseInput(this.creator.workdayStart).getUTCHours();if(a<=0)return this.cellHeight;a=Math.floor(this.body.getViewportHeight()/(a*2));return a<this.cellHeight?this.cellHeight:a}else return this.cellHeight},
isc.A.getDayFromCol=function(a){return this.fields.get(a).$654},isc.A.getDateFromCol=function(a){a=this.fields.get(a);return new Date(a.$66a,a.$659,a.$658)},isc.A.isLabelCol=function(a){return a==0&&this.showLabelColumn&&this.labelColumnPosition=="left"?true:a==this.fields.length-1&&this.showLabelColumn&&this.labelColumnPosition=="right"?true:false},isc.A.colDisabled=function(a){a=this.$53i?this.getDayFromCol(a):this.creator.chosenDate.getDay();return this.creator.disableWeekends&&Date.getWeekendDays().contains(a)?
true:false},isc.A.refreshStyle=function(){if(this.body)for(var a=0;a<this.data.length;a++)this.body.refreshCellStyle(a,1)},isc.A.headerClick=function(a){if(this.isLabelCol(a))return true;a=this.getField(a);var b=this.creator;b.dateChooser.dateClick(a.$66a,a.$659,a.$658);b.selectTab(0);return true},isc.A.getCellAlign=function(){return this.labelColumnAlign},isc.A.cellMouseDown=function(a,b,c){if(this.isLabelCol(c)||this.colDisabled(c))return true;if(!this.creator.canCreateEvents)return true;this.clearSelection();
this.$53q={};this.$53q.colNum=c;this.$53q.startRowNum=b;this.$53q.endRowNum=b;this.$53r=true;this.refreshCellStyle(b,c)},isc.A.cellOver=function(a,b,c){if(this.$53r&&this.$53q){a=this.$53q.startRowNum<this.$53q.endRowNum?b>this.$53q.endRowNum?b:this.$53q.endRowNum:b<this.$53q.endRowNum?b:this.$53q.endRowNum;this.$53q.endRowNum=b;c=this.$53q.colNum;for(b=a-6;b<a+6;b++)b>=0&&b<=47&&this.refreshCellStyle(b,c)}},isc.A.cellMouseUp=function(){if(!this.$53q)return true;this.$53r=false;var a,b;if(this.$53q.startRowNum>
this.$53q.endRowNum){a=this.$53q.endRowNum;b=this.$53q.startRowNum}else{b=this.$53q.endRowNum;a=this.$53q.startRowNum}this.creator.$53l(a,this.$53q.colNum,b-a+1)},isc.A.getCellStyle=function(a,b,c){a=this.getBaseStyle(a,b,c);if(this.isLabelCol(c))return a;if(this.colDisabled(c))return this.baseStyle+"Disabled";if(this.$53q&&this.$53q.colNum==c){c=this.$53q.startRowNum;var d=this.$53q.endRowNum;return b>=c&&b<=d||b>=d&&b<=c?this.creator.selectedCellStyle:a}else return a},isc.A.getBaseStyle=function(a,
b,c){if(this.isLabelCol(c))return this.labelColumnBaseStyle;this.$53i?this.getDayFromCol(c):this.creator.chosenDate.getDay();a=this.$53i?this.getDateFromCol(c):this.creator.chosenDate.duplicate();c=a.duplicate();var d=a.duplicate(),e=isc.Time.parseInput(this.creator.workdayStart),f=isc.Time.parseInput(this.creator.workdayEnd);a.setHours(e.getHours());a.setMinutes(e.getMinutes());c.setHours(f.getHours());c.setMinutes(f.getMinutes());d.setHours(Math.floor(b/2));b%2==1?d.setMinutes(30):d.setMinutes(0);
b=this.creator.dateIsWorkday(d);d=d.getTime();return this.creator.showWorkday&&a.getTime()<=d&&d<c.getTime()&&b?this.creator.workdayBaseStyle:this.baseStyle},isc.A.clearSelection=function(){if(this.$53q){var a,b,c=this.$53q.colNum;if(this.$53q.startRowNum<this.$53q.endRowNum){a=this.$53q.startRowNum;b=this.$53q.endRowNum}else{a=this.$53q.endRowNum;b=this.$53q.startRowNum}this.$53q=null;for(a=a;a<b+1;a++)this.refreshCellStyle(a,c)}},isc.A.refreshEvents=function(){if(this.body&&this.creator.hasData()){this.logDebug("refreshEvents:"+
this.viewName,"calendar");this.clearEvents();var a,b,c=this.creator;if(this.$53i){a=c.chosenWeekStart;b=c.chosenWeekEnd}else{a=new Date(c.year,c.month,c.chosenDate.getDate(),0,0);b=new Date(c.year,c.month,c.chosenDate.getDate(),23,59)}a=c.$53g(a,b);for(b=0;b<a.length;b++)this.addEvent(a[b])}},isc.A.sizeEventWindow=function(a){var b=this.creator,c=a.event;if(a.$53v)a.$53v=false;else if(b.eventAutoArrange)b.$64n(a.$53i,c[b.startDateField],c[b.endDateField]);else{var d=a.$53i?b.weekView:b.dayView,e=
d.getRowHeight(1),f=d.getColumnWidth(d.isLabelCol(0)?1:0);d=c[b.endDateField].getHours()==0?24:c[b.endDateField].getHours();var g=false;if(c[b.endDateField].getDate()>c[b.startDateField].getDate()){g=true;d=24}d=(d-c[b.startDateField].getHours())*e*2;f=f;if(b.weekEventBorderOverlap&&a.$53i)f+=1;if(c[b.startDateField].getMinutes()>0)d-=b.$54g(c[b.startDateField].getMinutes(),e);if(c[b.endDateField].getMinutes()>0&&!g)d+=b.$54g(c[b.endDateField].getMinutes(),e);g=c[b.startDateField].getHours()*e*2;
if(c[b.startDateField].getMinutes()>0)g+=b.$54g(c[b.startDateField].getMinutes(),e);b=b.getEventLeft(c,a.$53i);a.renderEvent(g,b,f,d)}},isc.A.clearEvents=function(){if(this.body&&this.body.children)for(var a=this.body.children,b=a.length-1;b>=0;b--)isc.isAn.EventWindow(a[b])&&this.body.removeChild(a[b])},isc.A.addEvent=function(a){this.clearSelection();a=this.creator.$53f(a);a.$643=this;if(this.$53i)a.$53i=true;this.body&&this.body.addChild(a);this.sizeEventWindow(a)},isc.A.removeEvent=function(a){for(var b=
this.body.children,c=0;c<b.length;c++)if(isc.isAn.EventWindow(b[c])&&b[c].event===a){a=b[c];a.parentElement.removeChild(a);a.destroy();return true}return false},isc.A.updateEventWindow=function(a){if(this.body&&this.body.children){var b=this.body.children,c=this.creator;if(c.dataSource)c.$53s=c.getDataSource().getLocalPrimaryKeyFields();for(var d=0;d<b.length;d++)if(isc.isAn.EventWindow(b[d])&&this.areSame(b[d].event,a)){b[d].event=a;this.sizeEventWindow(b[d]);b[d].setDescriptionText(a[c.descriptionField]);
return true}return false}},isc.A.areSame=function(a,b){var c=this.creator;if(c.dataSource){c=c.$53s;var d=true,e;for(e in c)if(a[e]!=b[e]){d=false;break}return d}else return a===b});isc.B._maxIndex=isc.C+25;isc.ClassFactory.defineClass("WeekSchedule","DaySchedule");isc.ClassFactory.defineClass("MonthSchedule","ListGrid");isc.ClassFactory.defineClass("MonthScheduleBody","GridBody");isc.MonthSchedule.changeDefaults("headerButtonProperties",{showRollOver:false,showDown:false,cursor:"default"});isc.MonthSchedule.changeDefaults("bodyProperties",
{redrawOnResize:true});isc.A=isc.MonthSchedule.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoDraw=false;isc.A.leaveScrollbarGap=false;isc.A.showAllRecords=true;isc.A.fixedRecordHeights=true;isc.A.showHeader=true;isc.A.showHeaderContextMenu=false;isc.A.canSort=false;isc.A.canResizeFields=false;isc.A.canReorderFields=false;isc.A.canHover=true;isc.A.showHover=true;isc.A.hoverWrap=false;isc.A.showRollOver=true;isc.A.useCellRollOvers=
true;isc.A.canSelectCells=true;isc.A.firstDayOfWeek=0;isc.A.dayHeaderHeight=20;isc.A.mimimumDayHeight=80;isc.B.push(isc.A.initWidget=function(){if(this.creator.data)this.data=this.getDayArray();this.fields=[{name:"day1",align:"center"},{name:"day2",align:"center"},{name:"day3",align:"center"},{name:"day4",align:"center"},{name:"day5",align:"center"},{name:"day6",align:"center"},{name:"day7",align:"center"}];this.firstDayOfWeek=this.creator.firstDayOfWeek;for(var a=Date.getShortDayNames(),b=Date.getWeekendDays(),
c=0;c<7;c++){var d=(c+this.firstDayOfWeek)%7;this.fields[c].title=a[d];this.fields[c].$654=d;this.fields[c].$66b=c+1;if(!this.creator.showWeekends&&b.contains(d))this.fields[c].showIf="return false;"}this.Super("initWidget")},isc.A.getDayArray=function(){for(var a=[],b,c,d=new Date(this.creator.year,this.creator.month,1);d.getDay()!=this.creator.firstDayOfWeek;)d.setDate(d.getDate()-1);if(!this.creator.showWeekends){b=Date.getWeekendDays();var e=d.duplicate(),f=true;for(c=0;c<7-b.length;c++){if(e.getMonth()==
this.creator.month){f=false;break}e.setDate(e.getDate()+1)}f&&d.setDate(d.getDate()+7)}c=new Date(this.creator.year,this.creator.month,d.getDate()+40);b=this.creator.$53g(d,c);b.sortByProperty("name",true,function(g,h,i){return g[i.startDateField].getTime()},this.creator);for(c=this.$53t=0;c<6;c++){this.creator.showDayHeaders&&a.add(this.getHeaderRowObject(d));a.add(this.getEventRowObject(d,b));d.setDate(d.getDate()+7);if(d.getMonth()!=this.creator.month)break}return a},isc.A.getHeaderRowObject=function(a){var b=
{};a=a.duplicate();for(var c=0;c<7;c++){b["day"+(c+1)]=a.getDate();b["date"+(c+1)]=a.duplicate();a.setDate(a.getDate()+1)}return b},isc.A.getEventRowObject=function(a,b){for(var c={},d=new Date(a.getFullYear(),a.getMonth(),a.getDate()),e=0;e<7;e++){for(var f=[];this.$53t<b.length;){var g=b[this.$53t];if(g[this.creator.startDateField].getMonth()!=d.getMonth()||g[this.creator.startDateField].getDate()!=d.getDate())break;else{f.add(g);this.$53t+=1}}c["day"+(e+1)]=d.getDate();c["date"+(e+1)]=new Date(d.getFullYear(),
d.getMonth(),d.getDate());c["event"+(e+1)]=f;d.setDate(d.getDate()+1)}return c},isc.A.getEvents=function(a,b){this.getDayFromCol(b);var c=this.fields.get(b).$66b;return this.data[a]["event"+c]},isc.A.getEventCell=function(a){for(var b=this.data,c=0;c<this.fields.length;c++)for(var d="event"+this.fields[c].$66b,e=0;e<b.length;e++){var f=b.get(e)[d];if(f!=null&&f.contains(a))return[e,c]}},isc.A.getDayFromCol=function(a){return this.fields.get(a).$654},isc.A.colDisabled=function(a){return this.creator.disableWeekends&&
Date.getWeekendDays().contains(this.getDayFromCol(a))?true:false},isc.A.refreshEvents=function(){if(this.creator.hasData()){this.logDebug("refreshEvents: month","calendar");this.setData(this.getDayArray())}},isc.A.rowIsHeader=function(a){var b=this.creator;return!b.showDayHeaders||b.showDayHeaders&&a%2==1?false:true},isc.A.formatCellValue=function(a,b,c,d){a=this.creator;var e=this.fields.get(d).$66b,f=b["event"+e];b=b["date"+e];e=b.getMonth()!=a.chosenDate.getMonth();return this.rowIsHeader(c)?!a.showOtherDays&&
e?"":a.getDayHeaderHTML(b,f,a,c,d):!a.showOtherDays&&e?"":a.getDayBodyHTML(b,f,a,c,d)},isc.A.getRowHeight=function(a,b){var c=this.creator.showDayHeaders;if(this.rowIsHeader(b))return this.dayHeaderHeight;else{var d=c?this.data.length/2:this.data.length,e=c?this.body.getViewportHeight()-this.dayHeaderHeight*d:this.body.getViewportHeight(),f=c?this.mimimumDayHeight-this.dayHeaderHeight:this.minimumDayHeight;if(e/d<=f)return f;else{f=0;if((c?(b-1)/2:b)<e%d)f=1;return Math.floor(e/d)+f}}},isc.A.getCellAlign=
function(a,b){return this.rowIsHeader(b)?"right":"left"},isc.A.getCellVAlign=function(a,b){return this.rowIsHeader(b)?"center":"top"},isc.A.cellHoverHTML=function(a,b,c){c=this.fields.get(c).$66b;if(!this.rowIsHeader(b)&&a["event"+c]!=null){a=a["event"+c];b="";for(c=0;c<a.length;c++){var d=isc.Time.toTime(a[c][this.creator.startDateField],this.creator.timeFormatter);b+=d+" "+a[c][this.creator.nameField]+"<br/>"}return b}},isc.A.getBaseStyle=function(a,b,c){var d=this.creator,e=this.fields.get(c).$66b;
if(this.rowIsHeader(b))return b==0&&a["day"+e]>7||b==this.data.length-2&&a["day"+e]<7?d.showOtherDays?d.otherDayHeaderBaseStyle:d.otherDayBlankStyle:d.dayHeaderBaseStyle;else{a=this.colDisabled(c);c=d.showDayHeaders?1:0;var f=this.data.length-1;return b==c&&this.data[c]["day"+e]>7||b==f&&this.data[f]["day"+e]<7?d.showOtherDays?a?d.otherDayBodyBaseStyle+"Disabled":d.otherDayBodyBaseStyle:d.otherDayBlankStyle:a?d.dayBodyBaseStyle+"Disabled":d.dayBodyBaseStyle}},isc.A.cellClick=function(a,b,c){var d=
this.creator,e=this.fields.get(c).$66b,f=a["date"+e],g=a["event"+e],h=d.chosenDate.getMonth()!=f.getMonth(),i=false;if(this.rowIsHeader(b)){!this.creator.showOtherDays&&h||(i=d.dayHeaderClick(f,g,d,b,c));if(i){if(b==0&&a["day"+e]>7)if(d.month==0){b=d.year-1;c=11}else{b=d.year;c=d.month-1}else if(b==this.data.length-2&&a["day"+e]<7)if(d.month==11){b=d.year+1;c=0}else{b=d.year;c=d.month+1}else{b=d.year;c=d.month}d.dateChooser.dateClick(b,c,a["day"+e]);d.selectTab(0)}}else if(!this.colDisabled(c)&&!(!d.showOtherDays&&
h))(i=d.dayBodyClick(f,g,d,b,c))&&d.canCreateEvents&&d.$53l(b,c)});isc.B._maxIndex=isc.C+17;isc.ClassFactory.defineClass("EventWindow","Window");isc.EventWindow.changeDefaults("resizerDefaults",{overflow:"hidden",height:3,snapTo:"B",canDragResize:true});isc.EventWindow.changeDefaults("headerDefaults",{layoutMargin:0,layoutLeftMargin:3,layoutRightMargin:3});isc.A=isc.EventWindow.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoDraw=
false;isc.A.minHeight=5;isc.A.minWidth=5;isc.A.showHover=true;isc.A.canHover=true;isc.A.hoverWidth=200;isc.A.showHeaderIcon=false;isc.A.showMinimizeButton=false;isc.A.showMaximimumButton=false;isc.A.canDragResize=true;isc.A.canDragReposition=true;isc.A.resizeFrom=["B"];isc.A.showShadow=false;isc.A.showEdges=false;isc.A.showHeaderBackground=false;isc.A.useBackMask=false;isc.A.keepInParentRect=true;isc.A.headerProperties={height:14};isc.A.closeButtonProperties={height:10,width:10};isc.A.bodyColor=null;
isc.A.showFooter=true;isc.A.footerProperties={overflow:"hidden",defaultLayoutAlign:"center",height:7};isc.A.bodyConstructor=isc.HTMLFlow;isc.B.push(isc.A.initWidget=function(){this.bodyStyle=this.baseStyle+"Body";this.headerStyle=this.baseStyle+"Header";if(this.calendar.showDescription!=false)this.bodyProperties={contents:this.descriptionText,valign:"top",overflow:"hidden"};if(this.calendar.showEventBody==false)this.showTitle=this.showBody=false;this.headerLabelProperties={styleName:this.className+
"Header"};this.Super("initWidget",arguments)},isc.A.makeFooter=function(){if(!(!this.showFooter||this.canDragResize==false)){this.addChild(this.createAutoChild("resizer",{dragTarget:this,styleName:this.baseStyle+"Resizer"}));this.resizer&&this.resizer.bringToFront()}},isc.A.setDescriptionText=function(a){if(this.calendar.getDescriptionText)a=this.calendar.getDescriptionText(this.event);if(a)if(this.body){this.descriptionText=a;this.body.setContents(a)}else{this.descriptionText=a;if(this.$734){this.$734.setWidth("100%");
this.$734.setContents(a)}}},isc.A.click=function(){if(!this.$53u)if(this.$67e)this.$67e=null;else{var a=this.calendar;if(a.eventClick(this.event,this.$53i?"week":"day"))if(a.canEditEvent(this.event)){this.$53i?a.weekView.clearSelection():a.dayView.clearSelection();var b=a.weekView.isLabelCol(0)?1:0;b=this.$53i?this.event[a.startDateField].getDay()-a.firstDayOfWeek+b:b;this.$53i&&a.showWeekends==false&&b--;var c=this.event[a.startDateField].getHours()*2;a.$53l(c,b,null,this)}}},isc.A.mouseDown=function(){this.calendar.eventDialog.hide();
return isc.EH.STOP_BUBBLING},isc.A.renderEvent=function(a,b,c,d){var e=this.calendar,f=this.event;isc.isA.Number(c)&&isc.isA.Number(d)&&this.resizeTo(Math.round(c),Math.round(d));isc.isA.Number(a)&&isc.isA.Number(b)&&this.moveTo(Math.round(b),Math.round(a));this.setTitle(isc.Time.toTime(f[e.startDateField],this.calendar.timeFormatter)+" "+f[e.nameField]);this.bringToFront()},isc.A.getHoverHTML=function(){return this.calendar.getEventHoverHTML(this.event,this)},isc.A.closeClick=function(){if(this.calendar.eventRemoveClick(this.event)==
false)this.$67e=true;else{this.Super("closeClick",arguments);this.calendar.removeEvent(this.event,true);this.$53u=true}},isc.A.parentResized=function(){this.Super("parentResized",arguments);this.$643.sizeEventWindow(this)},isc.A.getEventLength=function(a,b){var c=a||this.event[this.calendar.startDateField];return((b||this.event[this.calendar.endDateField]).getTime()-c.getTime())/6E4},isc.A.dragRepositionStart=function(){this.parentElement.VSnapOrigin=this.getTop()%this.parentElement.snapVGap},isc.A.dragRepositionStop=
function(){var a=this.calendar,b=this.event[a.startDateField],c=this.event[a.endDateField];this.Super("dragRepositionStop",arguments);var d=this.ns.EH,e=this.parentElement.getEventColumn(),f=d.dragMoveTarget.getTop()-this.parentElement.getPageTop()+this.parentElement.getScrollTop(),g=this.parentElement.getRowSize(1),h=Math.floor(f/g),i=this.$53i?a.weekView:a.dayView;if(i.isLabelCol(e)||i.colDisabled(e))return false;e=a.$53m(h,e);f=Math.floor((f-g*h)*(30/g));e.setMinutes(e.getMinutes()+f);e=a.getValidSnapDate(this.event[a.startDateField],
e);if(!a.eventMoved(e,this.event))return false;f=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());f.setMinutes(f.getMinutes()+this.getEventLength());a.updateEvent(this.event,e,f,this.event[a.nameField],this.event[a.descriptionField],null,true);if(a.eventAutoArrange){a.$64n(this.$53i,b,c);d.dragMoveTarget.setPageRect(this.getPageLeft(),this.getPageTop())}return true},isc.A.dragResizeStart=function(){this.parentElement.VSnapOrigin=(this.getTop()+this.getVisibleHeight())%
this.parentElement.snapVGap},isc.A.dragResizeStop=function(){var a=this.calendar,b=this.event[a.startDateField],c=this.event[a.endDateField];this.Super("dragResizeStop",arguments);var d=this.ns.EH,e=this.parentElement.getEventColumn(),f=d.dragMoveTarget.getTop()-this.parentElement.getPageTop()+this.parentElement.getScrollTop()+d.dragMoveTarget.getVisibleHeight(),g=this.parentElement.getRowSize(1),h=Math.floor(f/g);e=a.$53m(h,e);f=Math.floor((f-g*h)*(30/g));e.setMinutes(e.getMinutes()+f);e=a.getValidSnapDate(this.event[a.endDateField],
e);if(d.dragMoveTarget.getVisibleHeight()<g)return false;if(!a.eventResized(e,this.event))return false;a.updateEvent(this.event,this.event[a.startDateField],e,this.event[a.nameField],this.event[a.descriptionField],null,true);if(a.eventAutoArrange){a.$64n(this.$53i,b,c);d.dragMoveTarget.setPageRect(this.getPageLeft(),this.getPageTop())}this.$54h=false});isc.B._maxIndex=isc.C+14;isc.ClassFactory.defineClass("TimelineWindow","EventWindow");isc.A=isc.TimelineWindow.getPrototype();isc.B=isc._allFuncs;
isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.showFooter=false;isc.A.resizeFrom=["L","R"];isc.B.push(isc.A.initWidget=function(){if(this.calendar.showEventWindowHeader==false)this.showTitle=this.showBody=false;this.Super("initWidget")},isc.A.draw=function(a,b,c,d){this.invokeSuper(isc.TimelineWindow,"draw",a,b,c,d);if(this.calendar.showEventWindowHeader==false){a=isc.Canvas.create({autoDraw:false,width:"100%",height:0,top:0,contents:this.descriptionText?this.descriptionText:
" "});this.addMember(a);a.setHeight(0);a.setTop(0);this.$734=a}},isc.A.click=function(){var a=this.calendar;if(a.eventClick(this.event,this.$53i?"week":"day"))if(a.canEditEvent(this.event)){this.$53i?a.weekView.clearSelection():a.dayView.clearSelection();var b=a.weekView.isLabelCol(0)?1:0;b=this.$53i?this.event[a.startDateField].getDay()-a.firstDayOfWeek+b:b;this.$53i&&a.showWeekends==false&&b--;var c=this.event[a.startDateField].getHours()*2;a.$53l(c,b,null,this)}},isc.A.dragRepositionStart=function(){this.$8l=
this.parentElement.getEventRow();this.$644=this.parentElement.getEventColumn();var a=0,b=this.event;if(b.$646&&b.$646.slotNum>0)a=(b.$646.slotNum-1)*this.getVisibleHeight();this.parentElement.VSnapOrigin=a;this.parentElement.HSnapOrigin=0;this.hideLines();return true},isc.A.dragRepositionStop=function(){this.parentElement.HSnapOrigin=0;var a=this.parentElement.getEventRow(),b;if(a!=this.$8l)if(this.calendar.canEditEventType)b=this.calendar.eventTypeData.get(a)[this.calendar.eventTypeField];else{this.showLines();
return false}a=this.calendar;var c=this.event;a=this.calendar;c=this.event;var d=[c[a.startDateField].duplicate(),c[a.endDateField].duplicate()];if(c[a.leadingDateField]&&c[a.trailingDateField]){d.add(c[a.leadingDateField].duplicate());d.add(c[a.trailingDateField].duplicate())}var e=this.ns.EH,f=this.getPageLeft()-this.getLeft();e=e.dragMoveTarget.getLeft()-f;e=a.timelineView.getDateFromPoint(e);f=e.duplicate();f.setMinutes(f.getMinutes()+this.getEventLength());d[0]=e;d[1]=f;e=Math.floor((e.getTime()-
c[a.startDateField].getTime())/6E4);c[a.leadingDateField]&&d[2].setMinutes(d[2].getMinutes()+e);c[a.trailingDateField]&&d[3].setMinutes(d[3].getMinutes()+e);e={};if(b)e[a.eventTypeField]=b;if(c[a.leadingDateField]&&c[a.trailingDateField]){e[a.leadingDateField]=d[2];e[a.trailingDateField]=d[3]}if(b==null)b=c[a.eventTypeField];if(a.adjustEventTimes)if(f=a.adjustEventTimes(c,this,d[0],d[1],b)){d[0]=f[0].duplicate();d[1]=f[1].duplicate()}if(a.allowEventOverlap==false){f=this.checkForOverlap(c,d[0],d[1],
b);if(f==true){a.timelineEventOverlap&&a.timelineEventOverlap(false,c,this,d[0],d[1],b);return false}else if(isc.isAn.Array(f)){d[0]=f[0].duplicate();d[1]=f[1].duplicate();a.timelineEventOverlap&&a.timelineEventOverlap(true,c,this,d[0],d[1],b)}}if(!a.timelineEventMoved(c,this,d[0],d[1],b))return false;this.calendar.updateEvent(c,d[0],d[1],c[a.nameField],c[a.descriptionField],e,true);return true},isc.A.checkForOverlap=function(a,b,c,d){var e={},f=this.calendar;e[f.startDateField]=b.duplicate();e[f.endDateField]=
c.duplicate();e[f.eventTypeField]=d;a=f.timelineView.findOverlappingEvents(a,e);if(a.length==0)return false;else if(a.length>1){isc.logWarn("overlap detected:"+a.length);return true}else{a=a[0];d=f.startDateField;f=f.endDateField;if(Date.compareDates(b,a[d])==1&&Date.compareDates(c,a[d])==-1){c=a[d].duplicate();b=c.duplicate();b.setMinutes(b.getMinutes()-this.getEventLength());isc.logWarn("left overlap:"+[b]);return[b,c]}else if(Date.compareDates(b,a[f])==1&&Date.compareDates(c,a[f])==-1){b=a[f].duplicate();
c=b.duplicate();c.setMinutes(c.getMinutes()+this.getEventLength());isc.logWarn("rigth overlap:"+[a.id,a.end,b,c]);return[b,c]}else return true}},isc.A.dragResizeStart=function(){this.parentElement.VSnapOrigin=(this.getTop()+this.getVisibleHeight())%this.parentElement.snapVGap},isc.A.dragResizeStop=function(){var a=this.calendar,b,c;c=this.ns.EH;b=this.getPageLeft()-this.getLeft();var d=c.dragMoveTarget.getLeft()-b;if(d==this.getLeft()){b=this.event[a.startDateField].duplicate();c=d+c.dragMoveTarget.getVisibleWidth();
c=a.timelineView.getDateFromPoint(c);if(this.calendar.sizeEventsToGrid){d=this.calendar.timelineView.$731();c.setMinutes(c.getMinutes()-d)}}else{b=a.timelineView.getDateFromPoint(d);c=this.event[a.endDateField].duplicate()}if(!a.timelineEventResized(this.event,this,b,c))return false;a.updateEvent(this.event,b,c,this.event[a.nameField],this.event[a.descriptionField],null,true)},isc.A.destroyLines=function(){if(this.$645){this.$645[0]&&this.$645[0].destroy();this.$645[1]&&this.$645[1].destroy();this.$645[2]&&
this.$645[2].destroy();this.$645[3]&&this.$645[3].destroy()}},isc.A.hideLines=function(){if(this.$645){this.$645[0]&&this.$645[0].hide();this.$645[1]&&this.$645[1].hide();this.$645[2]&&this.$645[2].hide();this.$645[3]&&this.$645[3].hide()}},isc.A.showLines=function(){if(this.$645){this.$645[0]&&this.$645[0].show();this.$645[1]&&this.$645[1].show();this.$645[2]&&this.$645[2].show();this.$645[3]&&this.$645[3].show()}},isc.A.hide=function(){this.invokeSuper(isc.TimelineWindow,"hide");this.hideLines()},
isc.A.show=function(){this.invokeSuper(isc.TimelineWindow,"show");this.showLines()},isc.A.parentResized=function(){this.invokeSuper(isc.EventWindow,"parentResized")});isc.B._maxIndex=isc.C+14;isc.ClassFactory.defineClass("TimelineView","ListGrid");isc.TimelineView.changeDefaults("bodyProperties",{childrenSnapToGrid:true,snapToCells:false,suppressVSnapOffset:true});isc.A=isc.TimelineView.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canSort=
false;isc.A.canResizeFields=false;isc.A.canReorderFields=false;isc.A.showHeaderContextMenu=false;isc.A.showAllRecords=true;isc.A.fixedRecordHeights=true;isc.A.alternateRecordStyles=true;isc.A.showRollOver=true;isc.A.useCellRollOvers=true;isc.A.canSelectCells=true;isc.A.eventTypeField="eventType";isc.A.eventWidth=60;isc.A.eventHeight=60;isc.A.labelColumnWidth=75;isc.A.labelColumnBaseStyle="labelColumn";isc.A.eventPageSize=30;isc.A.trailIconSize=16;isc.A.leadIconSize=16;isc.A.scrollToToday=false;isc.A.lineImage=
"[SKINIMG]Stretchbar/hsplit_over_stretch.gif";isc.A.trailingEndPointImage="[SKINIMG]actions/prev.png";isc.A.leadingEndPointImage="[SKINIMG]actions/next.png";isc.B.push(isc.A.initWidget=function(){this.fields=[];if(this.creator.eventTypeField)this.eventTypeField=this.creator.eventTypeField;if(this.creator.timelineStartDate)this.startDate=this.creator.timelineStartDate;if(this.creator.timelineEndDate)this.endDate=this.creator.timelineEndDate;if(this.creator.renderEventsOnDemand)this.renderEventsOnDemand=
this.creator.renderEventsOnDemand;this.cellHeight=this.eventHeight;this.fields=this.calcFields();this.data=this.creator.eventTypeData;this.$730();this.Super("initWidget")},isc.A.$730=function(){var a=this.creator.timelineGranularity;if(a=="day"){this.startDate.setHours(0);this.startDate.setMinutes(0);this.startDate.setSeconds(0);this.startDate.setMilliseconds(0)}else if(a=="hour"){this.startDate.setMinutes(0);this.startDate.setSeconds(0);this.startDate.setMilliseconds(0)}else if(a=="minute"){this.startDate.setSeconds(0);
this.startDate.setMilliseconds(0)}},isc.A.scrollTimelineTo=function(a){this.bodies[1].scrollTo(a)},isc.A.setEventHeight=function(a){this.eventHeight=a;this.setCellHeight(a);this.refreshEvents()},isc.A.setEventWidth=function(a){this.eventWidth=a;this.setFields(this.calcFields());this.refreshEvents()},isc.A.setTimelineRange=function(a,b,c,d){this.startDate=a.duplicate();this.creator.timelineStartDate=a.duplicate();this.endDate=b.duplicate();this.creator.timelineEndDate=b.duplicate();if(c)this.creator.timelineGranularity=
c;if(d)this.creator.timelineUnitsPerColumn=d;isc.logWarn("setTimelineRange:"+[c,d,this.creator.timelineGranularity,this.creator.timelineUnitsPerColumn]);this.setFields(this.calcFields());this.$730();this.refreshVisibleEvents()},isc.A.addUnits=function(a,b){if(this.creator.timelineGranularity=="day")a.setDate(a.getDate()+b);else if(this.creator.timelineGranularity=="hour")a.setHours(a.getHours()+b);else this.creator.timelineGranularity=="minute"&&a.setMinutes(a.getMinutes()+b);return a},isc.A.calcFields=
function(){var a=[];if(this.creator.timelineLabelFields)for(var b=this.creator.timelineLabelFields,c=0;c<b.length;c++)a.add(b[c]);else a.add({width:this.labelColumnWidth,name:this.eventTypeField,title:" ",frozen:true});b=this.startDate.duplicate();c=this.endDate;for(var d=0,e=this.creator.timelineUnitsPerColumn;b.getTime()<=c.getTime();){var f=isc.addProperties({name:"f"+d,title:this.getDayFieldTitle(b),width:this.eventWidth},this.getFieldProperties(b));a.add(f);b=this.addUnits(b,e);d++}return a},
isc.A.getFieldProperties=function(){return null},isc.A.getDayFieldTitle=function(a){if(this.creator.timelineGranularity=="day")return a.getMonth()+1+"/"+a.getDate();else{var b=a.getMinutes().toString();if(b.length==1)b="0"+b;return a.getHours()+":"+b}},isc.A.draw=function(a,b,c,d){this.invokeSuper(isc.TimelineView,"draw",a,b,c,d);a=this.creator.timelineSnapGap;this.body.snapHGap=a?Math.round(a/60*this.eventWidth):this.eventWidth;this.body.snapVGap=this.eventHeight;if(this.scrollToToday!=false){a=
new Date;a.setDate(a.getDate()-this.scrollToToday);this.bodies[1].scrollTo(this.creator.getDayDiff(this.startDate,a)*this.eventWidth,0)}this.logDebug("draw","calendar");this.refreshEvents()},isc.A.getCellCSSText=function(a,b,c){a=this.startDate.duplicate();a.setDate(a.getDate()+c-this.getLabelColCount());c=new Date;return a.toShortDate()==c.toShortDate()&&this.creator.todayBackgroundColor?"background-color:"+this.creator.todayBackgroundColor:null},isc.A.formatDateForDisplay=function(a){return a.getShortMonthName()+
" "+a.getDate()+", "+a.getFullYear()},isc.A.getLabelColCount=function(){return this.creator.timelineLabelFields?this.creator.timelineLabelFields.length:1},isc.A.isLabelCol=function(a){return a<this.getLabelColCount()?true:false},isc.A.getCellStyle=function(a,b,c){a=this.getBaseStyle(a,b,c);this.isLabelCol(c);return a},isc.A.getBaseStyle=function(a,b,c){return this.isLabelCol(c)?this.labelColumnBaseStyle:this.baseStyle},isc.A.nextOrPrev=function(a){a=a?this.eventPageSize:0-this.eventPageSize;this.startDate.setDate(this.startDate.getDate()+
a);this.endDate.setDate(this.endDate.getDate()+a);this.setFields(this.calcFields());if(this.creator.dataSource&&isc.ResultSet&&isc.isA.ResultSet(this.creator.data)){this.creator.data.invalidateCache();this.creator.filterData(this.creator.getNewCriteria())}else this.creator.dataChanged()},isc.A.refreshEvents=function(){if(this.body&&this.creator.hasData()){var a=this.creator;a=a.data.getRange(0,a.data.getLength());this.logDebug("refreshing events","calendar");this.tagDataForOverlap(a);this.refreshVisibleEvents()}},
isc.A.getVisibleEvents=function(){for(var a=this.getVisibleDateRange(),b=this.getVisibleRowRange(),c=this.creator,d=c.data,e=[],f=0;f<d.getLength();f++){var g=d.get(f);if(!g){isc.logWarn("getVisibleEvents: potentially invalid index: "+f);break}var h={};if(g[c.leadingDateField]&&g[c.trailingDateField]){h[c.leadingDateField]=a[0];h[c.trailingDateField]=a[1]}else{h[c.startDateField]=a[0];h[c.endDateField]=a[1]}var i=this.data.findIndex(c.eventTypeField,g[c.eventTypeField]);this.eventsOverlap(h,g)&&b[0]<=
i&&i<=b[1]&&e.add(g)}return e},isc.A.findOverlappingEvents=function(a,b){for(var c=this.creator,d=c.data,e=[],f=0;f<d.getLength();f++){var g=d.get(f);if(!g){isc.logWarn("getVisibleEvents: potentially invalid index: "+f);break}if(!c.eventsAreSame(g,a)){var h={};if(g[c.leadingDateField]&&g[c.trailingDateField]){h[c.leadingDateField]=b[c.leadingDateField];h[c.trailingDateField]=b[c.trailingDateField]}else{h[c.startDateField]=b[c.startDateField];h[c.endDateField]=b[c.endDateField]}b[c.eventTypeField]==
g[c.eventTypeField]&&this.eventsOverlap(h,g)&&e.add(g)}}return e},isc.A.refreshVisibleEvents=function(){var a=this.getVisibleEvents(),b=a.getLength();this.logDebug("refreshing visible events","calendar");for(var c=0;c<b;c++){var d=a.get(c);if(d.$646)d.$646.visited=false;this.addEvent(d,c)}this.clearEvents(b)},isc.A.tagDataForOverlap=function(a,b){if(a.getLength()!=0){var c=this.creator,d=[],e=0,f=0,g=0,h=a.get(0)[c.eventTypeField];a.sort(function(s,r){var t;t=s[c.leadingDateField]&&r[c.leadingDateField]?
c.leadingDateField:c.startDateField;return s[c.eventTypeField]<r[c.eventTypeField]?-1:s[c.eventTypeField]>r[c.eventTypeField]?1:c.timelineView.secondarySort?c.timelineView.secondarySort(s,r):s[t]<r[t]?-1:s[t]>r[t]?1:0});var i=0,j=[];if(b)for(;a.get(i)[c.eventTypeField]!=b&&i<a.getLength();)i++;for(i=i;i<a.getLength();i++){var k=a.get(i);if(b&&k[c.eventTypeField]!=b)break;else b&&j.add(k);if(k[c.eventTypeField]!=h){e=f=g=0;d=[];h=k[c.eventTypeField]}for(var l=true,m=[],n=0;n<d.length;n++){var o=d[n];
if(this.allEventsOverlap||this.eventsOverlap(k,o))m.add(o);else{e--;if(e==0)f=1;l=false}}d=m;d.add(k);e++;l&&d.length>f&&f++;for(n=0;n<d.length;n++){o=d[n];if(!o.$646)o.$646={};if(!o.$646.visited){o.$646.slotNum=null;k=this.nextAvailSlot(d,f);k<1&&isc.logWarn("Calendar.timelineView.tagDataForOverlap, no slot for event:"+isc.Log.echoFull(o));o.$646.slotNum=k;o.$646.visited=true}o.$646.totalSlots=f}f>g&&g++}return j}},isc.A.nextAvailSlot=function(a,b){for(var c=[],d=0;d<b;d++)c.add(false);for(d=0;d<
a.length;d++){var e=a[d];if(e.$646)if(e.$646.slotNum)c[e.$646.slotNum-1]=true}return c.indexOf(false)+1},isc.A.eventsOverlap=function(a,b){var c,d,e=this.creator;c=a[e.leadingDateField]&&b[e.leadingDateField]?e.leadingDateField:e.startDateField;d=a[e.trailingDateField]&&b[e.trailingDateField]?e.trailingDateField:e.endDateField;return e.equalDatesOverlap?a[d]<b[c]||a[c]>b[d]?false:true:a[d]<=b[c]||a[c]>=b[d]?false:true},isc.A.compareDates=function(a,b){if(a.getFullYear()<b.getFullYear())return 1;else if(a.getFullYear()>
b.getFullYear())return-1;if(a.getMonth()<b.getMonth())return 1;else if(a.getMonth()>b.getMonth())return-1;if(a.getDate()<b.getDate())return 1;else if(a.getDate()>b.getDate())return-1;return 0},isc.A.getDateFromPoint=function(a,b){var c=this.startDate.duplicate(),d=this.eventWidth,e=this.$731(),f=0;f+=Math.floor(a/d)*e;b||(f+=a%d/d*e);c.setMinutes(c.getMinutes()+f);return c},isc.A.$731=function(){var a=this.creator.timelineUnitsPerColumn,b=this.creator.timelineGranularity,c;if(b=="day")c=a*1440;else if(b==
"hour")c=a*60;else if(b=="minute")c=a;return c},isc.A.$732=function(a){var b=this.$731(),c,d;c=a.event[this.creator.startDateField].getTime()<this.startDate.getTime()?this.startDate.duplicate():a.event[this.creator.startDateField];if(a.event[this.creator.endDateField].getTime()>this.endDate.getTime()){d=this.endDate.duplicate();d.setMinutes(d.getMinutes()+b)}else d=a.event[this.creator.endDateField].duplicate();a=a.getEventLength(c,d);c=this.eventWidth;d=0;var e=Math.floor(a/b);if(this.creator.sizeEventsToGrid)e+=
1;d+=e*c;if(this.creator.sizeEventsToGrid==false)d+=Math.floor(a%b/b*c);return d},isc.A.getEventLeft=function(a){a=(a[this.creator.startDateField].getTime()-this.startDate.getTime())/6E4;var b=this.eventWidth,c=this.$731(),d=0;d+=Math.floor(a/c)*b;if(this.creator.sizeEventsToGrid==false)d+=Math.floor(a%c/c*b);if(d<0)d=0;return d},isc.A.sizeEventWindow=function(a,b){var c=this.creator,d=a.event,e=this.eventWidth,f=this.eventHeight;(e=d[c.eventWindowStyleField]||c.eventWindowStyle)&&a.setStyleName(e);
if(d.eventWindowBackgroundColor)a.setBackgroundColor(d.eventWindowBackgroundColor);else{a.backgroundColor=null;if(a.isDrawn())a.getStyleHandle().backgroundColor=null}e=this.$732(a);var g=this.getEventLeft(d);a.setTitle(c.getEventTitle(d));b&&a.redraw();var h=this.data.findIndex(this.eventTypeField,d[this.eventTypeField])*f;this.adjustDimensionsForOverlap(a,g,h,e,f);c.showDescription!=false&&a.setDescriptionText(d[c.descriptionField]);if(d[c.leadingDateField]&&d[c.trailingDateField])a.$645?this.addLeadingAndTrailingLines(a):
this.delayCall("addLeadingAndTrailingLines",[a])},isc.A.adjustDimensionsForOverlap=function(a,b,c,d,e){var f=a.event.$646;if(f&&f.totalSlots>0){e=Math.floor(e/f.totalSlots);c+=Math.floor(e*(f.slotNum-1))}a.resizeTo(d,e);a.$77n&&a.header.resizeTo(d,e);a.moveTo(b,c)},isc.A.addLeadingAndTrailingLines=function(a){var b,c,d,e;if(a.$645){b=a.$645[0];c=a.$645[1];d=a.$645[2];e=a.$645[3]}else{b=this.$65r();c=this.$65s(a,"lead");d=this.$65r();e=this.$65s(a,"trail")}this.$65t(c,b);this.$65t(e,d);if(!a.$645){this.body.addChild(b);
this.body.addChild(c);this.body.addChild(d);this.body.addChild(e);a.$645=[b,c,d,e]}},isc.A.$65t=function(a,b){var c=this.creator,d=a.$65e,e=d.event,f=a.type,g=this.eventWidth,h=d.getVisibleHeight(),i=d.getTop();d=d.getLeft();var j,k=true;if(f=="trail")if(this.compareDates(e[c.trailingDateField],this.endDate)<0){j=c.getDayDiff(this.endDate,e[c.startDateField]);if(j<1)j=1;j=j*g;k=false}else{j=c.getDayDiff(e[c.trailingDateField],e[c.startDateField]);j=j*g-Math.round(g/2)}else if(this.compareDates(this.startDate,
e[c.leadingDateField])<0){j=c.getDayDiff(this.startDate,e[c.startDateField]);if(j<1)j=1;j=j*g;k=false}else{j=c.getDayDiff(e[c.leadingDateField],e[c.startDateField]);j=j*g-Math.round(g/2)}b.moveTo(f=="trail"?d+g:d-j,i+Math.round(h/2));b.setWidth(j);var l=0;if(e.$646&&e.$646.slotNum>0)l=(e.$646.slotNum-1)*h;var m=f=="trail"?this.trailIconSize:this.leadIconSize;a.moveTo(k==false?-50:f=="trail"?d+g+j-Math.round(m/2):d-j-Math.round(m/2),i+Math.round(h/2)-Math.round(m/2));a.$647=Math.round(h/2)-Math.round(m/
2)+l;a.$648=Math.round(g/2)-Math.round(m/2);a.$65f=c.getDayDiff(e[c.startDateField],this.startDate);return k},isc.A.$65s=function(a,b){var c=b=="trail"?this.trailIconSize:this.leadIconSize;return isc.Img.create({$65e:a,type:b,autoDraw:false,_redrawWithParent:false,src:b=="trail"?this.trailingEndPointImage:this.leadingEndPointImage,width:c,height:c,canDragReposition:this.creator.canEditEvents==true,dragRepositionStart:function(){this.$8l=this.parentElement.getEventRow();this.$644=this.parentElement.getEventColumn();
this.parentElement.VSnapOrigin=this.$647;this.parentElement.HSnapOrigin=this.$648},dragRepositionStop:function(){var d=this.$65f,e=this.$644,f=this.parentElement.getEventColumn();e=f-e;var g=this.$65e.event,h=this.$65e.calendar;if((this.type=="trail"?f-d:d-f)<1)return false;d={};f=this.type=="trail"?h.trailingDateField:h.leadingDateField;var i=g[f].duplicate();i.setDate(i.getDate()+e);d[f]=i;h.updateEvent(g,g[h.startDateField],g[h.endDateField],g[h.nameField],g[h.descriptionField],d,true);return true}})},
isc.A.$65r=function(){return isc.Canvas.create({autoDraw:false,_redrawWithParent:false,height:2,overflow:"hidden",styleName:"eventLine"})},isc.A.clearEvents=function(a){if(!(!this.body||!this.body.children||!this.$65u)){a||(a=0);for(a=a;a<this.$65u.length;a++)this.$65u[a].hide()}},isc.A.addEvent=function(a,b){if(!this.$65u)this.$65u=[];var c,d=false;if(this.renderEventsOnDemand&&this.$65u[b]){c=this.$65u[b];this.creator.setEventWindowID(a,c.ID);c.event=a;d=true}else{c=this.getNewEventWindow(a);c.$643=
this;this.$65u.add(c)}this.sizeEventWindow(c,d);if(this.body&&(!d||c.parentElement!=this.body))this.body.addChild(c);c.isDrawn()||c.draw();c.body&&c.body.show();c.show()},isc.A.removeEvent=function(a){for(var b=this.body.children,c=0;c<b.length;c++)if(isc.isAn.EventWindow(b[c])&&b[c].event===a){a=b[c];a.parentElement.removeChild(a);a.destroy();return true}return false},isc.A.getNewEventWindow=function(a){var b=a[this.creator.eventWindowStyleField]||this.creator.eventWindowStyle,c=true;if(this.creator.showDescription==
false)c=false;var d={calendar:this.creator,_redrawWithParent:false,styleName:b,canDragReposition:this.creator.canDragEvents==true&&a[this.creator.canDragEventField]!=false,canDragResize:this.creator.canResizeTimelineEvents,edgeMarginSize:10,showCloseButton:false,event:a,descriptionText:a[this.creator.descriptionField]||"",showHeader:c,showBody:c};if(a.eventWindowBackgroundColor)d.backgroundColor=a.eventWindowBackgroundColor;var e=isc.TimelineWindow.create(d);if(!c){e=isc.TimelineWindow.create(d);
b=isc.Label.create({autoDraw:false,styleName:b,border:"0px",height:"*"});e.addChild(b);e.header=b;e.$77n=true}this.creator.setEventWindowID(a,e.ID);return e},isc.A.updateEventWindow=function(a){if(this.body&&this.body.children){var b=this.creator,c=this.tagDataForOverlap(b.data.getRange(0,b.data.getLength()),a[b.eventTypeField]);if(this.renderEventsOnDemand)this.refreshVisibleEvents();else for(var d=0;d<c.length;d++){a=c.get(d);var e=b.getEventWindowID(a);e=window[e];if(a.$646)a.$646.visited=false;
e.event=a;this.sizeEventWindow(e)}}},isc.A.areSame=function(a,b){var c=this.creator;if(c.dataSource){c=c.$53s;var d=true,e;for(e in c)if(a[e]!=b[e]){d=false;break}return d}else return a===b},isc.A.resized=function(){this.Super("resized",arguments);this.isDrawn()&&this.creator.hasData()&&this.renderEventsOnDemand&&this.refreshVisibleEvents()},isc.A.scrolled=function(){if(this.renderEventsOnDemand){this.$57s&&isc.Timer.clear(this.$57s);this.$57s=isc.Timer.setTimeout(this.ID+".refreshVisibleEvents()")}},
isc.A.getVisibleDateRange=function(){if(!this.renderEventsOnDemand)return[this.startDate.duplicate(),this.endDate.duplicate()];var a=this.body.getScrollLeft(),b=a+this.body.getVisibleWidth();a=this.getDateFromPoint(a,true);b=this.getDateFromPoint(b);return[a,b]},isc.A.getVisibleRowRange=function(){if(!this.renderEventsOnDemand)return[0,this.data.getLength()];var a=this.bodies[1].getScrollTop(),b=this.eventHeight,c=this.bodies[1].getVisibleHeight();return[Math.floor(a/b),Math.floor((a+c)/b)]});isc.B._maxIndex=
isc.C+46;isc.Calendar.registerStringMethods({getDayBodyHTML:"date,events,calendar,rowNum,colNum",getDayHeaderHTML:"date,events,calendar,rowNum,colNum",dayBodyClick:"date,events,calendar,rowNum,colNum",dayHeaderClick:"date,events,calendar,rowNum,colNum",eventClick:"event,viewName",eventChanged:"event",eventMoved:"newDate,event",eventResized:"newDate,event"});isc.A=isc.DaySchedule;isc.A.$53o=[{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",
day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",
day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",
day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",
day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",
day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",
day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",
day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""}];isc.AutoTest.customizeCalendar();isc._moduleEnd=isc._Calendar_end=isc.timestamp?isc.timestamp():(new Date).getTime();isc.Log&&isc.Log.logIsInfoEnabled("loadTime")&&isc.Log.logInfo("Calendar module init time: "+(isc._moduleEnd-isc._moduleStart)+"ms","loadTime");delete isc.definingFramework}else window.isc&&isc.Log&&isc.Log.logWarn&&isc.Log.logWarn("Duplicate load of module 'Calendar'.");
